// 
//     Licensed to the Apache Software Foundation (ASF) under one
//     or more contributor license agreements.  See the NOTICE file
//     distributed with this work for additional information
//     regarding copyright ownership.  The ASF licenses this file
//     to you under the Apache License, Version 2.0 (the
//     "License"); you may not use this file except in compliance
//     with the License.  You may obtain a copy of the License at
// 
//       http://www.apache.org/licenses/LICENSE-2.0
// 
//     Unless required by applicable law or agreed to in writing,
//     software distributed under the License is distributed on an
//     "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
//     KIND, either express or implied.  See the License for the
//     specific language governing permissions and limitations
//     under the License.
//

= Руководство по началу работы с платформой NetBeans с использованием Maven
:jbake-type: platform_tutorial
:jbake-tags: tutorials 
:jbake-status: published
:syntax: true
:source-highlighter: pygments
:toc: left
:toc-title:
:icons: font
:experimental:
:description: Руководство по началу работы с платформой NetBeans с использованием Maven - Apache NetBeans
:keywords: Apache NetBeans Platform, Platform Tutorials, Руководство по началу работы с платформой NetBeans с использованием Maven

Добро пожаловать в  link:https://netbeans.apache.org/platform/[*платформу NetBeans*]!

В данном документе представлено краткое описание способов создания простого приложения и модуля платформы NetBeans, а также использования Maven для платформы построения. Для создания приложения и модуля платформы NetBeans в этом документе используются архетипы Maven. Для создания оконного компонента в модуле используется инструментарий интерфейса пользователя Swing и конструктор графического интерфейса пользователя Matisse. Модульный аспект платформы NetBeans позволяет разрабатывать и расширять функциональные возможности приложения, добавляя новые модули.

Этот документ базируется на  link:nbm-quick-start_ru.html[руководстве по началу работы с платформой NetBeans] на основе приложения Ant и демонстрирует некоторые различия между использованием Ant и Maven для разработки приложений платформы NetBeans. После изучения отличий Maven от Ant можно легко пройти другие учебные курсы в  link:https://netbeans.apache.org/kb/docs/platform_ru.html[Учебной карте по платформе NetBeans].

При использовании версии среды IDE NetBeans 6.8 обратитесь к  link:68/nbm-maven-quickstart.html[Руководству по началу работы с платформой NetBeans 6.8 с использованием Maven].

При отсутствии опыта работы с платформой NetBeans рекомендуется просмотреть серию демонстрационных роликов  link:https://netbeans.apache.org/tutorials/nbm-10-top-apis.html[10 лучших интерфейсов API NetBeans].





*Для работы с этим учебным курсом требуется программное обеспечение и ресурсы, перечисленные в следующей таблице.*


NOTE:  Для разработки приложений на платформе NetBeans не требуется загружать отдельную версию этой платформы. Как правило, разработка приложений и модулей осуществляется в среде IDE NetBeans, затем необходимо просто включить требуемые модули для выполнения платформы NetBeans и созданного приложения.

Перед изучением этого учебного курса можно ознакомиться со следующей документацией:

*  link:http://wiki.netbeans.org/MavenBestPractices[Практические рекомендации по Apache Maven в NetBeans 6.x];
*  link:http://www.sonatype.com/books/maven-book/reference/introduction.html[Глава 1. Введение в Apache Maven] (фрагмент из книги  link:http://www.sonatype.com/books/maven-book/reference/public-book.html[Maven: The Definitive Guide]);
*  link:https://netbeans.apache.org/kb/docs/java/gui-functionality_ru.html[Введение в разработку графического интерфейса ].


== Настройка Maven

Если это первый опыт работы с Maven, следует проверить параметры настройки Maven в окне "Параметры". Для работы с этим учебным курсом необходимо установить Maven на локальный компьютер. Программу установки можно загрузить с  link:http://maven.apache.org/[сайта Maven].


[start=1]
1. Выберите категорию "Разное" в окне "Параметры" и перейдите на вкладку "Maven".

[start=2]
1. Укажите папку установки Maven (требуется версия 2.0.9 или более поздняя).

[start=3]
1. Проверьте корректность адреса к локальному репозиторию Maven.

[start=4]
1. Нажмите кнопку "ОК".

В большинстве случаев при использовании типичной настройки Maven данные в окне "Параметры" уже корректны.

NOTE:  Поддержка Maven активируется как часть набора функциональных возможностей Java SE. Если вкладка "Maven" в окне "Параметры" недоступна, подтвердите активацию Java SE при создании приложения Java.

Maven SCM используется в среде IDE для проверки артефактов Maven. Может потребоваться проверка факта установки всех необходимых клиентов для проверки исходных файлов на локальном компьютере и корректности их настройки.

Дополнительные сведения о Maven SCM приведены на  link:http://maven.apache.org/scm/index.html[странице Maven SCM].


=== Просмотр репозиториев Maven

Артефакты, используемые Maven для создания всех проектов, сохраняются в локальном репозитории Maven. Если артефакт объявлен как зависимость проекта, он загружается в локальный репозиторий из одного из зарегистрированных удаленных репозиториев.

Репозиторий NetBeans и некоторые известные индексированные репозитории Maven зарегистрированы и включены в список окна "Обозреватель репозитория" по умолчанию. Репозиторий NetBeans содержит большинство общедоступных артефактов, требуемых для создания проекта. Обозреватель репозиториев Maven можно использовать для просмотра содержимого локальных и удаленных репозиториев. Для просмотра локальных артефактов разверните узел "Локальный репозиторий". Артефакты, указанные в узлах удаленного репозитория, могут быть добавлены в качестве зависимостей проекта, однако не все из них представлены локально. Они добавляются к локальному репозиторию только в том случае, если объявляются в качестве зависимостей проекта.

Чтобы открыть обозреватель репозиториев Maven:

* выберите в главном меню "Окно" > "Прочее" > "Обозреватель репозиториев Maven".

image::images/maven-quickstart68_maven-nbm-netbeans-repo.png[title="Снимок экрана: обозреватель репозиториев Maven"]

Когда курсор находится над артефактом, среда IDE отображает всплывающую подсказку с координатами артефакта. Посмотреть дополнительные сведения об артефакте можно с помощью двойного щелчка по файлу JAR артефакта в обозревателе.

Чтобы выполнить поиск артефакта, нажмите кнопку "Найти" на панели инструментов обозревателя репозиториев Maven или используйте текстовое поле "Быстрый поиск" на главной панели инструментов.

Подробные сведения об управлении зависимостями путей классов Maven и работе с репозиториями Maven в среде IDE приведены в разделе  link:http://wiki.netbeans.org/MavenBestPractices#Dependency_management[Управление зависимостями] курса  link:http://wiki.netbeans.org/MavenBestPractices[Практические рекомендации по Apache Maven в NetBeans 6.x].

Для просмотра видеоролика по использованию Artifact Viewer обратитесь к демонстрации  link:https://netbeans.apache.org/kb/docs/java/maven-dependencies-screencast.html[Работа с зависимостями Maven].


== Создание проекта приложения на платформе NetBeans

В этом разделе для построения приложения на платформе NetBeans из архетипа Maven используется мастер создания проекта. Этот мастер создает проекты модуля Maven, требуемые для разработки приложения на платформе NetBeans. Также мастер предоставляет возможность создания модуля NetBeans в проекте приложения, однако в данном учебном курсе выполняется отдельное создание каждого модуля.


=== Создание проекта

Чтобы создать приложение на платформе NetBeans с помощью мастера создания проекта, выполните следующие действия:


[start=1]
1. Выберите в меню "Файл" команду "Новый проект" (CTRL+SHIFT+N), чтобы открыть мастер создания проекта.

[start=2]
1. Выберите приложение Maven NetBeans из категории Maven. Нажмите кнопку "Далее".

[start=3]
1. В поле "Имя проекта" введите *MavenPlatformWordApp* и укажите местоположение проекта. Нажмите кнопку "Готово". 
image::images/maven-quickstart_maven-newproject.png[title="Снимок экрана: мастер создания проекта"]

NOTE:  Первое создание приложения платформы NetBeans с использованием Maven может занять некоторое время, поскольку среде IDE требуется загрузить все необходимые артефакты из репозитория NetBeans.

При нажатии кнопки "Готово" в среде IDE по умолчанию создаются следующие типы проектов Maven.

* *Приложение на платформе NetBeans.* Данный проект является проектом-контейнером для приложения на платформе. В нем перечисляются включаемые модули и местоположения репозиториев проекта. Данный проект не содержит исходных файлов. В среде IDE создаются модули, содержащие исходные файлы и ресурсы в подкаталогах проекта.
* *Приложение на базе платформы NetBeans.* В данном проекте указываются артефакты (исходные файлы), требуемые для компиляции приложения. Необходимые зависимости (артефакты среды IDE, артефакты модуля) указываются в файле проекта  ``pom.xml`` . При развертке узла "Библиотеки" можно просмотреть библиотеки, необходимые для приложения платформы NetBeans.
* *Ресурсы брэндинга приложения на платформе.* Этот проект содержит ресурсы, используемые для брэндинга приложения.

Во всех проектах Maven файл  ``pom.xml``  (POM) расположен в узле "Файлы проекта" в окне "Проекты". При просмотре файла POM для проекта приложения NetBeans можно заметить, что в качестве модулей приложения перечислены два других модуля, созданные мастером.


[source,xml]
----

<modules>
   <module>branding</module>
   <module>application</module>
</modules>

----


=== Изменение элементов брэндинга

В модуле брэндинга указываются ресурсы брэндинга, используемые для построения приложения на платформе. Диалоговое окно брэндинга обеспечивает удобное редактирование свойств брэндинга приложения для изменения имени, экрана заставки и значений текстовых элементов.

При создании приложения платформы NetBeans на основе архетипа именем приложения по умолчанию будет идентификатор артефакта приложения. В этом упражнении для изменения имени приложения и замены изображения экрана заставки по умолчанию используется мастер брэндинга.

NOTE:  В среде IDE модуль брэндинга необходимо создать до изменения ресурсов брэндинга.


[start=1]
1. Щелкните правой кнопкой мыши модуль *ресурсов брэндинга приложения платформы * и выберите команду "Брэндинг".

[start=2]
1. На вкладке "Основной" измените заголовок приложения на *My Maven Platform Word App*.
image::images/maven-quickstart_maven-branding1.png[title="Снимок экрана: мастер создания проекта"]

[start=3]
1. Выберите вкладку "Экран заставки" и нажмите кнопку "Обзор" рядом с изображением экрана заставки по умолчанию для поиска другого изображения. Нажмите кнопку "ОК".

Можно скопировать изображение, представленное ниже, в локальную систему и указать его в качестве экрана заставки в диалоговом окне "Брэндинг".


image::images/maven-quickstart68_splash.gif[title="Пример изображения заставки, заданного по умолчанию"]


== Создание модуля MavenWordEngine

В этом разделе выполняется создание нового модуля с именем MavenWordEngine. Затем модуль преобразуется для добавления оконного компонента, а также кнопки и текстовой области.


=== Создание модуля

В этом упражнении выполняется создание нового проекта модуля в каталоге, содержащем модуль брэндинга и модуль приложения.


[start=1]
1. В главном меню выберите "Файл" > "Новый проект".

[start=2]
1. Выберите модуль Maven NetBeans в категории Maven. Нажмите кнопку "Далее".

[start=3]
1. В качестве имени проекта введите текст *MavenWordEngine*.

[start=4]
1. Нажмите кнопку "Обзор" и выберите местоположение проекта для каталога MavenPlatformWordApp. Нажмите кнопку "Готово".

image::images/maven-quickstart_maven-wizard-project-location.png[title="Снимок экрана: мастер создания проекта"]

При просмотре файла POM для модуля MavenWordEngine можно заметить, что для идентификатора  ``artifactId``  проекта установлено значение *MavenWordEngine*.


[source,xml]
----

<modelVersion>4.0.0</modelVersion>
<parent>
    <groupId>com.mycompany</groupId>
    <artifactId>MavenPlatformWordApp</artifactId>
    <version>1.0-SNAPSHOT</version>
</parent>
<groupId>com.mycompany</groupId>
<artifactId>*MavenWordEngine*</artifactId>
<packaging>nbm</packaging>
<version>1.0-SNAPSHOT</version>
<name>MavenWordEngine NetBeans Module</name>

----

Для создания модуля NetBeans необходимо использовать подключаемый модуль  ``nbm-maven-plugin`` . При просмотре POM для модуля можно заметить, что в среде IDE автоматически указывается файл  ``nbm``  для  ``packaging`` , и что подключаемый модуль *nbm-maven-plugin* указывается в качестве модуля построения.


[source,xml]
----

<plugin>
   <groupId>org.codehaus.mojo</groupId>
   <artifactId>*nbm-maven-plugin*</artifactId>
   <version>3.2-SNAPSHOT</version>
   <extensions>true</extensions>
</plugin>

----

При просмотре POM для приложения платформы NetBeans обратите внимание, что модуль *MavenWordEngine* добавлен в список модулей приложения.


[source,xml]
----

<modules>
   <module>branding</module>
   <module>application</module>
   <module>*MavenWordEngine*</module>
</modules>

----


=== Добавление модуля в качестве зависимости для MavenPlatformWordApp

В данном упражнении модуль MavenWordEngine объявляется в качестве зависимости приложения на базе платформы NetBeans путем добавления зависимости в POM. В файле POM для приложения выполняется объявление следующих зависимостей.


[source,xml]
----

<dependencies>
    <dependency>
        <groupId>org.netbeans.cluster</groupId>
        <artifactId>platform</artifactId>
        <version>${netbeans.version}</version>
        <type>pom</type>
    </dependency>
    <dependency>
        <groupId>com.mycompany</groupId>
        <artifactId>branding</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency>
</dependencies>
----

При развертке узла "Библиотеки" для приложения на базе платформы NetBeans можно заметить, что в модуле брэндинга и некоторых других библиотеках, являющихся зависимостями кластера, необходимыми для создания приложения, существует зависимость.


image::images/maven-quickstart_maven-projects-libraries.png[title="Снимок экрана: диалоговое окно "Добавить зависимость""]

Можно развернуть список зависимостей, не связанных с classpath для просмотра полного списка зависимостей.

Для добавления зависимости в файл POM можно изменить файл POM непосредственно в редакторе или посредством диалогового окна "Добавить зависимость" в окне "Проекты".


[start=1]
1. Разверните *MavenPlatformWordApp - приложение на основе платформы NetBeans* в окне "Проекты".

[start=2]
1. Щелкните узел "Библиотеки" правой кнопкой мыши и выберите команду "Добавить зависимость".

[start=3]
1. Перейдите на вкладку "Открыть проекты" и выберите *MavenWordEngine*. Нажмите кнопку "ОК".

image::images/maven-quickstart_maven-add-dependency1.png[title="Снимок экрана: диалоговое окно "Добавить зависимость""]

NOTE:  Новый проект будет отображен в диалоговом окне по завершении сканирования и обновления индексов в среде IDE.

При развертке узла "Библиотеки" для MavenPlatformWordApp в окне "Проекты" можно заметить, что модуль MavenWordEngine выведен теперь в качестве зависимости.


=== Добавление оконного компонента в модуль

В этом упражнении используется мастер для добавления оконного компонента в модуль MavenWordEngine.


[start=1]
1. Щелкните *модуль NetBeans MavenWordEngine* в окне "Проекты" правой кнопкой мыши и выберите команду "Создать" > "Прочее" для открытия мастера создания файла.

[start=2]
1. Выберите "Окно" в категории "Разработка модулей". Нажмите кнопку "Далее".

[start=3]
1. Выберите команду *Вывод* в раскрывающемся списке "Позиция окна". Нажмите кнопку "Далее".
image::images/maven-quickstart_maven-new-window.png[title="Снимок экрана: страница оконного компонента в мастере создания файла"]

[start=4]
1. Введите текст *Text* в поле "Префикс имени класса". Нажмите кнопку "Готово".

Выводится список создаваемых и изменяемых файлов.

При нажатии кнопки "Готово" в окне "Проекты" можно заметить, что в среде IDE создан класс  ``TextTopComponent.java``  в  ``com.mycompany.mavenwordengine``  в узле "Папка с исходными файлами". Также в среде IDE созданы дополнительные файлы ресурсов в  ``com.mycompany.mavenwordengine``  в узле "Другие исходные файлы". В этом упражнении выполняется редактирование только для класса  ``TextTopComponent.java`` .

В окне "Файлы" можно просмотреть структуру проекта. Для компиляции проекта Maven в узле "Папка с исходными файлами" могут находиться только исходные файлы (каталог  ``src/main/java``  в окне "Файлы"). Другие ресурсы (например, файлы XML) должны быть расположены в узле "Другие исходные файлы" (каталог  ``src/main/resources``  в окне "Файлы").


=== Изменение оконного компонента

В этом упражнении выполняется добавление текстовой области и кнопки в оконный компонент. Затем выполняется изменение метода, вызываемого при нажатии кнопки, для замены букв в текстовой области на прописные.


[start=1]
1. Выберите в редакторе вкладку "Проектировщик" класса  ``TextTopComponent.java`` .

[start=2]
1. Перетащите кнопку и текстовую область из палитры в окно.

[start=3]
1. Щелкните текстовую область правой кнопкой мыши и выберите команду "Изменить имя переменной", а затем введите текст *text* в качестве имени. Имя используется для получения доступа к компоненту из кода.

[start=4]
1. Введите для кнопки текст "*Filter!*".
image::images/maven-quickstart68_maven-nbm-textopcomponent.png[title="Снимок экрана: страница оконного компонента в мастере создания файла"]

[start=5]
1. Дважды щелкните элемент кнопки "Filter!" в представлении "Проектировщик", чтобы открыть в редакторе исходного кода метод обработчика события для кнопки. Этот метод создается автоматически при двойном щелчке элемента кнопки.

[start=6]
1. Измените тело метода для добавления следующего кода. Сохраните изменения.

[source,java]
----

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
   *String s = text.getText();
   s = s.toUpperCase();
   text.setText(s);*
}
----

Для упрощения ввода кода в редакторе можно использовать автозавершение кода.

Для тестирования правильности работы приложения можно щелкнуть узел проекта *приложения MavenPlatformWordApp на основе платформы NetBeans* правой кнопкой мыши и выбрать команду "Построить вместе с зависимостями".

Действием по умолчанию, привязанным к функции "Построить вместе с зависимостями", является создание проекта при помощи подключаемого модуля Reactor. При создании проекта с использованием подключаемого модуля Reactor построение зависимостей подпроектов выполняется до построения проекта. В окне "Вывод" отображается порядок построения.


image::images/maven-quickstart_maven-buildwithdependencies1.png[title="Снимок экрана: порядок построения Reactor в окне "Вывод""]

Результаты построения также отображаются в окне "Вывод".


image::images/maven-quickstart_maven-buildwithdependencies2.png[title="Снимок экрана: успешное построение Reactor в окне "Вывод""]

В окне "Проекты" можно заметить, что проекты больше не содержат метки, поскольку артефакты необходимых зависимостей теперь доступны в локальном репозитории узла  ``com.mycompany`` .


image::images/maven-quickstart_maven-localrepo.png[title="Снимок экрана: локальный репозиторий"]

Для запуска проекта щелкните узел проекта *приложения MavenPlatformWordApp на основе платформы NetBeans* и выберите команду "Выполнить". После запуска приложения можно протестировать его, выполнив следующие действия.


[start=1]
1. Выберите в главном меню приложения платформы команду "Окно" > "Тext", чтобы открыть окно "Text".

[start=2]
1. Наберите в текстовой области текст строчными буквами и нажмите кнопку "Filter!"

[start=3]
1. Закройте приложение Maven Platform Word App.

При нажатии кнопки "Filter!" буквы введенного текста изменяются на прописные и отображаются в текстовой области.


== Создание модуля TextFilter

В этом упражнении выполняется создание модуля *TextFilter* и добавление модуля в приложение в качестве зависимости. Модуль TextFilter предоставляет определенную службу и содержит только интерфейс. Доступ к этой службе можно впоследствии получить из других модулей при помощи поиска.


=== Создание модуля

В этом упражнении для создания модуля TextFilter выполняются следующие действия.


[start=1]
1. Выберите в меню "Файл" команду "Новый проект" (CTRL+SHIFT+N).

[start=2]
1. Выберите архетип модуля Maven NetBeans в категории "Maven". Нажмите кнопку "Далее".

[start=3]
1. Введите текст *TextFilter* в качестве имени проекта.

[start=4]
1. Нажмите кнопку "Обзор" для установки местоположения проекта и найдите каталог MavenPlatformWordApp. Нажмите кнопку "Готово".

При нажатии кнопки "Готово" в среде IDE создается модуль, и в окне "Проекты" открывается проект модуля *TextFilter NetBeans Module*.

Среда IDE изменяет файл  ``pom.xml``  проекта POM "MavenPlatformWordApp - приложение платформы NetBeans" для добавления нового модуля в список включаемых в проект модулей.


[source,xml]
----

<modules>
    <module>branding</module>
    <module>application</module>
    <module>MavenWordEngine</module>
    <module>TextFilter</module>
</modules>
----

По завершении создания модуля необходимо добавить модуль в качестве зависимости приложения.


=== Добавление модуля TextFilter в качестве зависимости приложения MavenPlatformWordApp

В этом упражнении выполняется добавление модуля TextFilter в качестве зависимости приложения MavenPlatformWordApp на базе платформы NetBeans.


[start=1]
1. Щелкните правой кнопкой мыши узел "Библиотеки" проекта *MavenPlatformWordApp - приложение на базе платформы NetBeans* и выберите команду "Добавить зависимость".

[start=2]
1. Выберите вкладку "Открыть проекты" в диалоговом окне "Добавить зависимость".

[start=3]
1. Выберите модуль *TextFilter NetBeans Module*. Нажмите кнопку "ОК".

При нажатии кнопки "ОК" среда IDE добавляет модуль в качестве зависимости проекта. При развертке узла "Библиотеки" можно заметить, что модуль добавлен в список зависимостей. В файле POM для проекта *MavenPlatformWordApp - приложение на основе платформы NetBeans* видно, что среда IDE добавила в элемент  ``зависимостей``  следующие строки.


[source,xml]
----

<dependency>
   <groupId>${project.groupId}</groupId>
   <artifactId>TextFilter</artifactId>
   <version>${project.version}</version>
</dependency>
----


=== Добавление интерфейса в модуль TextFilter

В этом упражнении выполняется добавление простого интерфейса в модуль TextFilter.


[start=1]
1. Щелкните правой кнопкой мыши модуль *TextFilter NetBeans Module* и выберите "Создать" > "Интерфейс Java".

[start=2]
1. Введите текст *TextFilter* в качестве имени класса.

[start=3]
1. Выберите пункт *com.mycompany.textfilter* в раскрывающемся списке "Упаковка". Нажмите кнопку "Готово".

[start=4]
1. Измените класс путем добавления следующего кода. Сохраните изменения.

[source,java]
----

package com.mycompany.textfilter;

public interface TextFilter {
    *public String process(String s);*
}
----


=== Преобразование модуля TextFilter в общедоступный

В этом упражнении выполняется определение пакета  ``com.mycompany.textfilter``  как общедоступного, чтобы другие модули имели доступ к методам. Для объявления пакета как общедоступного необходимо преобразовать элемент  ``configuration``  подключаемого модуля  ``nbm-maven-plugin``  в файле POM для определения пакетов, экспортируемых как общедоступные посредством подключаемого модуля. Можно внести изменения в файл POM в редакторе или путем выбора пакетов, определяемых как общедоступные, в диалоговом окне "Свойства" проекта.


[start=1]
1. Щелкните модуль *TextFilter NetBeans Module* правой кнопкой мыши и выберите команду "Свойства".

[start=2]
1. Выберите в диалоговом окне "Свойства проекта" категорию "Общедоступные пакеты".

[start=3]
1. Выберите пакет *com.mycompany.textfilter*. Нажмите кнопку "ОК".

image::images/maven-quickstart_maven-public-packages.png[title="Снимок экрана: диалоговое окно "Свойства""]

При нажатии кнопки "ОК" в среде IDE изменяется файл POM проекта для редактирования элемента  ``configuration``  артефакта  ``nbm-maven-plugin``  и добавляются следующие записи.


[source,xml]
----

<publicPackages>
   <publicPackage>com.mycompany.textfilter</publicPackage>
</publicPackages>
----

Теперь запись POM содержит следующие записи.


[source,xml]
----

<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>nbm-maven-plugin</artifactId>
    <version>3.2</version>
    <extensions>true</extensions>
    <configuration>
                    <publicPackages>
                        <publicPackage>com.mycompany.textfilter</publicPackage>
                    </publicPackages>

    </configuration>
</plugin>
----

Дополнительные сведения приведены по адресу  link:http://bits.netbeans.org/mavenutilities/nbm-maven-plugin/manifest-mojo.html#publicPackages[nbm-maven-plugin manifest]


== Создание модуля MyFilter

В этом упражнении выполняется создание модуля *MyFilter* и добавление этого модуля в качестве зависимости модуля TextFilter. Впоследствии можно вызвать методы в модуле MyFilter путем поиска службы TextFilter.


=== Создание модуля

В этом упражнении выполняется создание модуля *MyFilter*. Для создания модуля необходимо выполнить действия, которые были выполнены при создании модуля TextFilter.


[start=1]
1. Выберите в меню "Файл" команду "Новый проект" (CTRL+SHIFT+N).

[start=2]
1. Выберите модуль Maven NetBeans в категории Maven. Нажмите кнопку "Далее".

[start=3]
1. Введите текст *MyFilter* в качестве имени проекта.

[start=4]
1. Нажмите кнопку "Обзор" для установки местоположения проекта и найдите каталог *MavenPlatformWordApp*. Нажмите кнопку "Готово".

[start=5]
1. Добавьте модуль MyFilter в качестве зависимости проекта *MavenPlatformWordApp - приложение на базе платформы NetBeans*.


=== Добавление модуля TextFilter в качестве зависимости

В этом упражнении выполняется добавление модуля TextFilter в качестве зависимости модуля MyFilter.


[start=1]
1. Щелкните правой кнопкой мыши узел "Библиотеки" проекта *MyFilter* и выберите команду "Добавить зависимость".

[start=2]
1. Выберите вкладку "Открыть проекты" в диалоговом окне "Добавить зависимость".

[start=3]
1. Выберите модуль *TextFilter*. Нажмите кнопку "ОК".


=== Изменение модуля MyFilter

В этом упражнении выполняется добавление класса Java с отдельным методом с именем  ``process`` , преобразующим буквы строки в прописные. Также указывается выполнение реализации интерфейса TextFilter классом. Для указания, что TextFilter является службой, которая будет зарегистрирована во время компиляции, используется аннотация  ``@ServiceProvider`` .


[start=1]
1. Щелкните модуль *MyFilter* правой кнопкой мыши и выберите "Создать" > "Класс Java".

[start=2]
1. Введите текст *UpperCaseFilter* в качестве имени класса.

[start=3]
1. Выберите в раскрывающемся списке "Пакет" элемент *com.mycompany.myfilter*. Нажмите кнопку "Готово".

[start=4]
1. Измените класс для добавления следующего кода. Сохраните изменения.

[source,java]
----

package com.mycompany.myfilter;

import com.mycompany.textfilter.TextFilter;
import org.openide.util.lookup.ServiceProvider;

*@ServiceProvider(service=TextFilter.class)*
public class UpperCaseFilter *implements TextFilter {

    public String process(String s) {
        return s.toUpperCase();
    }*
}
----

Обратите внимание на принцип использования аннотации для определения поставщика служб. Для получения дополнительных сведений об аннотации  ``@ServiceProvider``  и поведении механизма ServiceLoader в пакете JDK 6 обратитесь к документации по интерфейсу API для утилит.


=== Изменение модуля MavenWordEngine

В этом упражнении выполняется изменение обработчика событий в оконном компоненте "Text" для использования поиска в целях вызова интерфейса TextFilter и получения доступа к методу MyFilter. До добавления кода в обработчик событий необходимо объявить зависимость от модуля TextFilter.


[start=1]
1. Щелкните узел "Библиотеки" модуля *MavenWordEngine* правой кнопкой мыши и добавьте зависимость от модуля TextFilter.

[start=2]
1. Разверните узел "Пакеты с исходными файлами" модуля *MavenWordEngine* и откройте  ``TextTopComponent``  в редакторе исходного кода.

[start=3]
1. Отредактируйте метод обработчика кнопки  ``jButton1ActionPerformed``  для добавления следующего кода. Сохраните изменения.

[source,java]
----

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    String s = text.getText();
    *TextFilter filter = Lookup.getDefault().lookup(TextFilter.class);
    if (filter != null) {
        s = filter.process(s);
    }*
    text.setText(s);
}
----

Для удобства работы с кодом используйте автозавершение кода.

Теперь можно проверить правильность работы приложения. Далее выполняется добавление нового оконного компонента, отображающего историю текста, обработанного при помощи фильтра.


== Добавление объектов LookupListener и InstanceContent в оконный компонент "Text"

В этом упражнении выполняется добавление слушателя и поля для сохранения содержимого текстовой области при нажатии кнопки "Filter!" .


[start=1]
1. Добавьте в модуль *MavenWordEngine* объект  ``InstanceContent``  и измените конструктор  ``TextTopComponent``  путем добавления следующего кода.

[source,java]
----

public final class TextTopComponent extends TopComponent {
    *private InstanceContent content;*

    public TextTopComponent() {
        initComponents();
        setName(NbBundle.getMessage(TextTopComponent.class, "CTL_TextTopComponent"));
        setToolTipText(NbBundle.getMessage(TextTopComponent.class, "HINT_TextTopComponent"));
        //        setIcon(Utilities.loadImage(ICON_PATH, true));

        *content = new InstanceContent();
        associateLookup(new AbstractLookup(content));*
    }
----


[start=2]
1. Измените метод  ``jButton1ActionPerformed``  для добавления старого значения текста в объект  ``InstanceContent``  при нажатии кнопки.

[source,java]
----

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
     String s = text.getText();
     TextFilter filter = Lookup.getDefault().lookup(TextFilter.class);
     if (filter != null) {
         *content.add(s);*
         s = filter.process(s);
     }
     text.setText(s);
 }
----


== Создание модуля History

В этом разделе выполняется создание модуля с именем *History*, отображающего значение  ``InstanceContent`` . Для создания модуля необходимо выполнить действия, которые были выполнены при создании модулей TextFilter и MyFilter.


[start=1]
1. Выберите в меню "Файл" команду "Новый проект" (CTRL+SHIFT+N).

[start=2]
1. Выберите модуль Maven NetBeans в категории Maven. Нажмите кнопку "Далее".

[start=3]
1. Введите текст *History* в качестве имени проекта.

[start=4]
1. Нажмите кнопку "Обзор" для установки местоположения проекта и найдите каталог MavenPlatformWordApp. Нажмите кнопку "Готово".

[start=5]
1. Добавьте модуль History в качестве зависимости проекта *MavenPlatformWordApp - приложение на базе платформы NetBeans*.


=== Создание оконного компонента в модуле History

В этом упражнении используется мастер добавления оконного компонента в модуль.


[start=1]
1. Щелкните *модуль History NetBeans* в окне "Проекты" правой кнопкой мыши и выберите команду "Создать" > "Прочее" для открытия диалогового окна "Новый файл".

[start=2]
1. Выберите "Окно" в категории "Разработка модулей". Нажмите кнопку "Далее".

[start=3]
1. Выберите элемент *Редактор* в раскрывающемся списке "Позиция окна". Нажмите кнопку "Далее".

[start=4]
1. Введите текст *History* в поле "Префикс имени класса". Нажмите кнопку "Готово". Выводится список создаваемых и изменяемых файлов.


=== Изменение оконного компонента History

Теперь выполняется добавление в оконный компонент элемента текстовой области, отображающего отфильтрованные строки.


[start=1]
1. Выберите в редакторе вкладку "Проектировщик" класса  ``TextTopComponent.java`` .

[start=2]
1. Перетащите текстовую область из палитры в окно.

[start=3]
1. Щелкните текстовую область правой кнопкой мыши и выберите команду "Изменить имя переменной", а затем введите текст *historyText* в качестве имени.

[start=4]
1. Добавьте  ``private``  поле  ``result``  и следующий код в конструктор объекта  ``HistoryTopComponent``  для прослушивания поиска класса String текущего активного окна и отображения всех извлеченных объектов String в текстовой области.

[source,java]
----

      *private Lookup.Result result;*

      public HistoryTopComponent() {
          initComponents();
          ...

          *result = org.openide.util.Utilities.actionsGlobalContext().lookupResult(String.class);
          result.addLookupListener(new LookupListener() {
              public void resultChanged(LookupEvent e) {
                  historyText.setText(result.allInstances().toString());
              }
          });*
      }
----


== Построение и запуск приложения

Теперь можно протестировать приложение


[start=1]
1. Щелкните правой кнопкой мыши узел проекта *Приложение MavenPlatformWordApp на базе платформы NetBeans* и выберите команду "Очистить".

[start=2]
1. Щелкните правой кнопкой мыши узел проекта *Приложение MavenPlatformWordApp на базе платформы NetBeans* и выберите команду "Построить вместе с зависимостями".

[start=3]
1. Щелкните правой кнопкой мыши узел проекта *Приложение MavenPlatformWordApp на базе платформы NetBeans * и выберите команду "Выполнить".

При выборе команды "Выполнить" среда IDE запускает приложение платформы NetBeans. Окна "History" и "Text" можно открыть в меню "Окно".

image::images/maven-quickstart_maven-final-app.png[title="Снимок экрана: готовое приложение платформы NetBeans"]

При вводе текста в окно "Text" и нажатии кнопки "Filter!" буквы текста преобразуются в прописные и текст добавляется в содержимое окна "History".

Данное краткое руководство демонстрирует незначительность различий между способами создания приложения платформы NetBeans с использованием Maven и способами создания приложения с использованием Ant. Главным отличием является принцип управления сборкой приложения при помощи Maven POM. Дополнительные примеры построения приложений и модулей на платформе NetBeans приведены в учебных курсах  link:https://netbeans.apache.org/kb/docs/platform_ru.html[Учебной карты по платформе NetBeans].


== Дополнительные сведения

Дополнительные сведения о создании и разработке приложений приведены в следующих ресурсах.

*  link:https://netbeans.apache.org/kb/docs/platform_ru.html[Учебная карта по платформе NetBeans]
*  link:http://bits.netbeans.org/dev/javadoc/[Документация Javadoc по интерфейсам API в среде NetBeans]

При возникновении вопросов о платформе NetBeans обратитесь к списку рассылки dev@platform.netbeans.org или к  link:https://mail-archives.apache.org/mod_mbox/netbeans-dev/[архиву списка рассылки по платформе NetBeans].

