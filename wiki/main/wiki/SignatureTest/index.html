<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>SignatureTest</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Use from Maven">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="../../../../_/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="../../../../_/css/highlight-11.9.0.default.min.css">
    <link rel="stylesheet" href="../../../../_/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../_/images/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../_/images/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../_/images/fav/favicon-16x16.png">
    <link rel="manifest" href="../../../../_/images/fav/site.webmanifest">
    <link rel="mask-icon" href="../../../../_/images/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="../../../../_/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="../../../../index.html"><img src='../../../../_/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <input id="search-input" type="text" placeholder="Search the docs"> </li>
            <li> <a href="../../../../front/main/community">Community</a> </li>
            <li> <a href="../../../../front/main/participate">Participate</a> </li>
            <li> <a href="../../../../front/main/blogs">Blog</a></li>
            <li> <a href="../../../../front/main/help">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="../../../../front/main/download">Download</a> </li>
        </ul>
    </div>
</div>

    <!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 22</h1>
            <p><a class="button success" href="../../../../front/main/download/nb22">Download</a></p>
        </div>
    </div>
</section>
    <div class='grid-container main-content'>
      <article class="doc">
      <h1 style="visibily: hidden">SignatureTest</h1>
      <div class='aside' style='text-align: center; padding: 20px;'>
    <a href="../../../../wiki/main/wiki" title="Apache NetBeans WIKI">Apache NetBeans Wiki Index</a>
    <p><b>Note:</b> These pages are being reviewed.</p>
</div>
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#Use_from_Maven">Use from Maven</a></li>
<li><a href="#Consistency_Check">Consistency Check</a></li>
<li><a href="#Continuous_Check_for_Changes">Continuous Check for Changes</a></li>
<li><a href="#At_the_time_of_release">At the time of release</a></li>
<li><a href="#Check_for_Incompatible_Changes_Since_Previous_Version">Check for Incompatible Changes Since Previous Version</a>
<ul class="sectlevel2">
<li><a href="#Who_needs_the_Golden_Signature_File">Who needs the Golden Signature File</a></li>
</ul>
</li>
<li><a href="#Checking_for_all_changes_from_previous_release">Checking for all changes from previous release</a>
<ul class="sectlevel2">
<li><a href="#apitest_tool">apitest tool</a></li>
<li><a href="#Other_NetBeans_Tests">Other NetBeans Tests</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Signature tests verify that public and protected members of non-private classes
in each module do not change or remain compatible with previous version. These
tests are part of the build or the
<a href="http://deadlock.netbeans.org/hudson/">continuous build process</a>. The
testing infrastructure is currently based on <a href="../APITest/" class="xref page">APITest</a>, an
extension and temporary fork of <a href="http://sigtest.java.net/">sigtest tool</a>
which is used as part of the <a href="http://www.jcp.org/">JCP</a> test compatibility
kits to verify that the API exposed by a JSR implementation does not diverge
from the reference implementation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Use_from_Maven"><a class="anchor" href="#Use_from_Maven"></a>Use from Maven</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="../SigTest/" class="xref page">SigTest</a> for the details.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Consistency_Check"><a class="anchor" href="#Consistency_Check"></a>Consistency Check</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Turned on Nov 7, 2012</strong>:</p>
</div>
<div class="paragraph">
<p>For a while the <a href="../VersioningPolicy/" class="xref page">VersioningPolicy</a> prescribes how
to properly version modules and their API changes. However the policy has for a
long time only been applied to modules with stable API. From time to time this
leads to <em>no such method or class</em> errors like {{iz|186233 which need to be
evaluated by <em>platform/module system</em> component owner.</p>
</div>
<div class="paragraph">
<p>Moreover the introduction of incremental binary build
<a href="../AutoUpdateTask/" class="xref page">AutoUpdateTask</a> requires more proper attitude to
versioning. Only then one can be sure that incremental binary build really
links properly.</p>
</div>
<div class="paragraph">
<p>For the above reasons ita consistency check that verifies minimal versioning
consistency has been introduced. The
<a href="../HgParallelProjectIntegration/" class="xref page">HgParallelProjectIntegration</a> runs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Check on all modules exposing non-private packages</p>
</li>
<li>
<p>Compares the spec version.</p>
<div class="ulist">
<ul>
<li>
<p>If the new spec is the same as previous, the check fails if there is some API change (method or class)</p>
</li>
<li>
<p>If the new spec is higher, the check will pass regardless of any API changes.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The check is integral part of push-* jobs and if it detects a failure, the push job fails. <strong>To recover</strong> you are supposed to increment spec version of your module whenever you change its API. Increment spec versions of modules that depend on your API change as well (not enforced right now). Run following command to simulate the check locally:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># first of all make sure your system is built OK
# Then either:
# generate appropriate JUnit testing report for all modules:
$ ant check-sigtests-version
#
# or run the 'version' check for a single module
$ ant -f your.module/build.xml check-sigtest -Dsigtest.check.type=versioncheck</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Continuous_Check_for_Changes"><a class="anchor" href="#Continuous_Check_for_Changes"></a>Continuous Check for Changes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="http://deadlock.netbeans.org/hudson/">continuous build process</a> runs a sigtest build that compares APIs in a new build with APIs of the one of the previous build. Whenever there is a change (either compatible or incompatible) a mail is sent:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if the module has public packages - to the <a href="mailto:api-changes@netbeans.org">api-changes@netbeans.org</a> mailing list</p>
</li>
<li>
<p>if the module has friends in other clusters - to the <a href="mailto:api-changes@netbeans.org">api-changes@netbeans.org</a> mailing list</p>
</li>
<li>
<p>if the module has friends only in the same cluster - to appropriate <strong>cvs@&lt;module&gt;.netbeans.org</strong> mailing list</p>
</li>
<li>
<p>if the module has neither friends, neither public packages - it is skipped from the check</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Appropriate owners of each module and tech leads of each area are expected to review the change and prevent or revert unintentional changes.</p>
</div>
<div class="paragraph">
<p>The <a href="http://deadlock.netbeans.org/hudson/job/nbms-and-javadoc/lastSuccessfulBuild/artifact/nbbuild/build/sigtest/snapshot/">signature golden files</a> are generated by</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ant -f nbbuild/build.xml gen-sigtests</code></pre>
</div>
</div>
<div class="paragraph">
<p>and compared by</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ant -f nbbuild/build.xml gen-sigtests</code></pre>
</div>
</div>
<div class="paragraph">
<p>A module can configure sigtest behavior by modifying its <strong>project.properties</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># redefine the email where reports are sent
sigtest.mail=<a href="mailto:your.name@your.org">your.name@your.org</a>
# don't fail if the generation of the report fails
sigtest.gen.fail.on.error=false</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="At_the_time_of_release"><a class="anchor" href="#At_the_time_of_release"></a>At the time of release</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When doing a release it is important to record the actual signatures of <em>stable</em> modules (and to some extend also <em>under development</em> ones), so we know what to keep <a href="http://wiki.apidesign.org/wiki/BackwardCompatibility">backward compatibility</a> with. To generate these signatures we used to do following, but since <a href="https://github.com/apache/incubator-netbeans/pull/1064">Apache NetBeans is in Git</a>, it is better to follow the <a href="https://github.com/apache/incubator-netbeans/pull/1064">PR-1064 steps</a>. Anyway here is the old recipe:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ hg update -C releaseXY_fcs
$ ant clean
$ ant build
$ ant gen-sigtests-release
$ hg st|cut -c 3-| xargs zip /tmp/sig.zip</code></pre>
</div>
</div>
<div class="paragraph">
<p>The last target will modify a lot of module/nbproject/*.sig files and possibly generate some new. These files shall be integrated into trunk build. For example by:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ cd &lt;team-repository&gt;
$ hg update -c default
$ unzip /tmp/sig.zip
$ hg add .
$ hg ci -m "Signatures as of release X.Y"
$ hg push</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Check_for_Incompatible_Changes_Since_Previous_Version"><a class="anchor" href="#Check_for_Incompatible_Changes_Since_Previous_Version"></a>Check for Incompatible Changes Since Previous Version</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There is another check for API signature compliance: A check that the APIs are compatible with a previous released version. This check is available to every module, which can make it part of its build by generating its API snapshot by:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ant netbeans gen-sigtest</code></pre>
</div>
</div>
<div class="paragraph">
<p>This creates a file nbproject/org-netbeans-module-name.sig which can be checked into the version control system as a reference point. This check is part of continuous build as well: every module with its golden file in nbproject/org-netbeans-module-name.sig is checked for backward compatibility and failures are included in continuous build <a href="http://deadlock.netbeans.org/hudson/job/trunk/lastBuild/testReport/">test results</a>. To run the same test for one module on local computer just use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ant netbeans check-sigtest</code></pre>
</div>
</div>
<div class="paragraph">
<p>in your module directory and API of your module will be verified. Of course, only if the signature file exists.</p>
</div>
<div class="sect2">
<h3 id="Who_needs_the_Golden_Signature_File"><a class="anchor" href="#Who_needs_the_Golden_Signature_File"></a>Who needs the Golden Signature File</h3>
<div class="paragraph">
<p>Not every module with an API needs this golden file; currently only those modules that produced a stable API in release 6.1 have it. The plan is to update these golden files with a new version as soon as it is released, so future checks are done against latest released version.</p>
</div>
<div class="paragraph">
<p>If an incompatible change is made (discouraged and subject to <a href="http://openide.netbeans.org/tutorial/reviews">API review process</a>) the golden file needs to be edited by hand to remove the element that is no longer present in the API.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Checking_for_all_changes_from_previous_release"><a class="anchor" href="#Checking_for_all_changes_from_previous_release"></a>Checking for all changes from previous release</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In case you have the sig file in nbproject directory generated at the time of previour release (all public APIs have it), you can see all changes since that time by:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ant -f yourmodule/build.xml check-sigtest -Dsigtest.check.type=strictcheck</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="apitest_tool"><a class="anchor" href="#apitest_tool"></a>apitest tool</h3>
<div class="paragraph">
<p>This check for incompatibilities is done by <a href="../APITest/" class="xref page">NetBeans' own version</a> of an OpenJDK tools. This adds a standard Ant task to check for binary backward compatibility, mutual signature compatibility. The binary compatibility check ignores generic types. Its <a href="http://hg.netbeans.org/apitest/">sources</a> are distributed together with its Mercurial repository and are available under GPL version 2. Builds are available from our <a href="http://deadlock.netbeans.org/hudson/job/apitest/">hudson builder</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Other_NetBeans_Tests"><a class="anchor" href="#Other_NetBeans_Tests"></a>Other NetBeans Tests</h3>
<div class="ulist">
<ul>
<li>
<p><a href="../FindBugsTest/" class="xref page">FindBugsTest</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
      <section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        <li><a href="https://github.com/apache/netbeans-antora-wiki/edit/main/modules/ROOT/pages/wiki/SignatureTest.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>
      </article>
    </div>
        <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="../../../../_/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/about">About</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/who">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/community">Community</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/mailing-lists">Mailing lists</a></li>
              <li><a href="../../../../front/main/community/committer">Becoming a committer</a></li>
              <li><a href="../../../../front/main/community/events">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/participate">Participate</a></h1>
            <ul>
              <li><a href="../../../../front/main/participate/submit-pr">Submitting Pull Requests</a></li>
              <li><a href="../../../../front/main/participate/report-issue">Reporting Issues</a></li>
              <li><a href="../../../../front/main/participate/#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/help">Get Help</a></h1>
            <ul>
              <li><a href="../../../../front/main/help/#documentation">Documentation</a></li>
              <li><a href="../../../../wiki/main/wiki">Wiki</a></li>
              <li><a href="../../../../front/main/help/#support">Community Support</a></li>
              <li><a href="../../../../front/main/help/commercial-support">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/download">Download</a></h1>
            <ul>
              <li><a href="../../../../front/main/download">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="../../../../front/main/download/#_daily_builds_and_building_from_source">Building from source</a></li>
              <li><a href="../../../../front/main/download/#_older_releases">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2024 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
      </div>
    </div>

    
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
    <script src="../../../../_/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../../../_/js/vendor/what-input.js"></script>
    <script src="../../../../_/js/vendor/foundation.min.js"></script>
    <script src="../../../../_/js/vendor/jquery.colorbox-min.js"></script>
    <script src="../../../../_/js/netbeans.js"></script>
    <script>
       $(function(){ $(document).foundation(); });
    </script>
    <script src="../../../../_/js/vendor/highlight-11.9.0.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', (event) => {
         document.querySelectorAll('pre code').forEach((el) => {
         hljs.highlightElement(el);
        });
      });
    </script>
  </body>
</html>
