<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>What is a Lookup?</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Apache NetBeans wiki DevFaqLookup">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans wiki DevFaqLookup">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="../../../../_/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    <link rel="stylesheet" href="../../../../_/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../_/images/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../_/images/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../_/images/fav/favicon-16x16.png">
    <link rel="manifest" href="../../../../_/images/fav/site.webmanifest">
    <link rel="mask-icon" href="../../../../_/images/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="../../../../_/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="../../../../index.html"><img src='../../../../_/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <input id="search-input" type="text" placeholder="Search the docs"> </li>
            <li> <a href="../../../../front/main/community">Community</a> </li>
            <li> <a href="../../../../front/main/participate">Participate</a> </li>
            <li> <a href="../../../../front/main/blogs">Blog</a></li>
            <li> <a href="../../../../front/main/help">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="../../../../front/main/download">Download</a> </li>
        </ul>
    </div>
</div>

    <!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="../../../../front/main/download/nb19">Download</a></p>
        </div>
    </div>
</section>
    <div class='grid-container main-content'>
      <article class="doc">
      <h1 class="sect1">What is a Lookup?</h1>
      <div class='aside' style='text-align: center; padding: 20px;'>
    <a href="../../../../wiki/main/wiki" title="Apache NetBeans WIKI">Apache NetBeans Wiki Index</a>
    <p><b>Note:</b> These pages are being reviewed.</p>
</div>
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_what_if_multiple_objects_of_the_same_type_should_be_available">What if multiple objects of the same type should be available?</a></li>
<li><a href="#_apache_migration_information">Apache Migration Information</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://bits.netbeans.org/dev/javadoc/org-openide-util-lookup/org/openide/util/Lookup.html">Lookup</a> is a mechanism for finding instances of objects.  It is pervasively used in NetBeans APIs.  The general pattern is that you pass a Class object and get back an instance of that class or null.  See the Javadoc for links to articles describing its inspiration and purpose.</p>
</div>
<div class="paragraph">
<p>The simplest way to think of <code>Lookup</code> is that it is a <code>Map</code> where the keys are <code>Class</code> objects and the value for each key is an instance of the key class.</p>
</div>
<div class="paragraph">
<p>There is the <a href="../DevFaqLookupDefault/" class="xref page">global lookup</a> which is used to find objects (often, but not always, singletons) that are registered throughout the system.  Also, many types of objects have a method getLookup() that enables other code to get things specific to that object.  In particular, <code><a href="../DevFaqWhatIsANode/" class="xref page">Node</a>`s and `Project</code> objects have a <code>Lookup</code>.</p>
</div>
<div class="paragraph">
<p>The primary purpose of Lookup is decoupling - it makes it possible to use generic objects to get very specific information, without having to cast objects to a specific type.  Confused yet?  It&#8217;s simple.  Take the example of <a href="https://bits.netbeans.org/dev/javadoc/org-openide-awt/org/netbeans/api/actions/Openable.html">Openable</a> - it has one method, <code>open()</code> that will open a file in the editor.</p>
</div>
<div class="paragraph">
<p>Say that I want to write some code that will open the selected file when the user does something.  It could be an Action, a button, or maybe my code has just created a file and I want to open it.  This is what I will do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Lookup selectedContext = Utilities.actionsGlobalContext();
Openable o = selectedContext.lookup(Openable.class);
if (o != null) {
  o.open();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The power of all this is in the level of decoupling it provides:  My code that wants to open the file does not have to know anything at all about what happens when the file is opened, or what kind of file it is, or what module supports opening it.  And the module that supports opening it does not need to know anything about who is going to open it.  They both simply share a dependency on the abstract interface <code>Openable</code>.  So either one can be replaced without affecting the other at all.</p>
</div>
<div class="paragraph">
<p>This brings the <a href="http://wiki.apidesign.org/wiki/MVC">MVC</a> design pattern into <a href="http://wiki.apidesign.org/wiki/DCI">modular loosely coupled</a> world.</p>
</div>
<div class="paragraph">
<p>A good example of this is in the <a href="../../../../tutorial/main/tutorials/nbm-povray-1/" class="xref page">POV-Ray tutorial</a>.  It launches an external process that generates a <code>.png</code> file.  When the process ends, it wants to open it, so it does the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">FileObject fob = FileUtil.toFileObject(new File(pathWePassedToProcess));
if (fob != null) {  //the process succeeded
   DataObject dob = DataObject.find(fob);
   Openable oc = dob.getLookup().lookup(Openable.class);
   if (oc != null) { //the Image module is installed
      oc.open();
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The fact is that it is the Image module that makes it possible to open <code>.png</code> files in <a href="../" class="xref page">NetBeans</a>.  But the POV-Ray tutorial does not need to know or care that the Image module exists, or what it does - it simply says "open this".</p>
</div>
<div class="paragraph">
<p>The common pattern you&#8217;ll see for Lookup usage is one where there are three components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Module A is pure <a href="../API_Design/" class="xref page">API</a> - it provides some interfaces</p>
</li>
<li>
<p>Module B depends on A and implements those interfaces, providing them from a Node or Project or such</p>
</li>
<li>
<p>Module C wants to display some UI or do something with objects that implement those interfaces.  It also depends on A, but does not need to know about B at all; either can be replaced independently, and the other will still function.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For global services, the model is more simple - typically there will be some singleton object, implemented as an abstract class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public abstract class GlobalService {
   public abstract void doSomething(Something arg);
   public static GlobalService getDefault() {
     GlobalService result = Lookup.getDefault().lookup(GlobalService.class);
     if (result == null) {
        result = new NoOpGlobalService();
     }
     return result;
   }
   private static class NoOpGlobalService extends GlobalService {
      public void doSomething(Something arg) {}
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Some other module entirely actually registers an implementation of this interface in the <a href="../DevFaqLookupDefault/" class="xref page">default Lookup</a>.  <a href="https://bits.netbeans.org/dev/javadoc/org-openide-awt/org/openide/awt/StatusDisplayer.html">StatusDisplayer</a> is a good example of this pattern.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_if_multiple_objects_of_the_same_type_should_be_available"><a class="anchor" href="#_what_if_multiple_objects_of_the_same_type_should_be_available"></a>What if multiple objects of the same type should be available?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <code>Lookup</code> is not limited to containing one singleton of any type.  If there may be more than one of a given type in a Lookup, the syntax is slightly different:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Collection&lt;? extends SomeIface&gt; c = Lookup.getDefault().lookupAll(SomeIface.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Note:</strong> In NetBeans versions prior to 6.0 you need to use <code>Lookup.Template</code> and <code>Lookup.Result.allInstances()</code>, because the <code>lookupAll()</code> method was not created until 6.0.</p>
</div>
<div class="paragraph">
<p>The <code>Lookup.Result</code> can be listened on for changes in the result of the query.  It is often useful to think of a Lookup as a <em>space</em> in which objects appear and disappear, and your code can respond as that happens (the following code uses the NB 6.0 <code>lookupResult</code> method - just use the pattern above with the <code>Lookup.Template</code> for NetBeans 5):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">class ObjectInterestedInFooObjects implements LookupListener {
   final Lookup.Result&lt;Foo&gt; result;  //result object is weakly referenced inside Lookup
   ObjectInterestedInFooObjects() {
        result = someLookup.lookupResult(Foo.class);
        result.addLookupListener(this);
        resultChanged(null);
    }
    public void resultChanged(LookupEvent evt) {
        Collection&lt;? extends Foo&gt; c = result.allInstances();
        // do something with the result
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another question is, on the side that&#8217;s providing the lookup, if you <em>have</em> a collection already, how can you expose that in a <code>Lookup</code>.  For that, you can create your own <code>AbstractLookup</code> and use <code>InstanceContent</code> to provide the collection of objects that belong in your <code>Lookup</code>.</p>
</div>
<div class="paragraph">
<p>If you need to merge together more than one lookup (for example, the lookup provided from <code>Node.getCookieSet().getLookup()</code> and one of your own which you will add and remove objects from), you can simply use [<a href="https://bits.netbeans.org/dev/javadoc/org-openide-util-lookup/org/openide/util/lookup/ProxyLookup.html">http://bits.netbeans.org/dev/javadoc/org-openide-util-lookup/org/openide/util/lookup/ProxyLookup.html</a> <code>ProxyLookup</code>] - i.e. <code>new ProxyLookup (lookup1, lookup2, Lookups.singleton(someObject), &#8230;&#8203;)</code></p>
</div>
<div class="paragraph">
<p>Objects in a <code>Lookup</code> often are not instantiated until the first time they are requested;  depending on the implementation, they may be weakly referenced, so that if an object is not used for a while, it can be garbage collected to save memory. So <code>Lookup</code> additionally enables lazy instantiation of objects, which is useful for performance reasons.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_apache_migration_information"><a class="anchor" href="#_apache_migration_information"></a>Apache Migration Information</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The content in this page was kindly donated by Oracle Corp. to the
Apache Software Foundation.</p>
</div>
<div class="paragraph">
<p>This page was exported from <a href="http://wiki.netbeans.org/DevFaqLookup">http://wiki.netbeans.org/DevFaqLookup</a> ,
that was last modified by NetBeans user Skygo
on 2013-12-14T17:13:46Z.</p>
</div>
<div class="paragraph">
<p><strong>NOTE:</strong> This document was automatically converted to the AsciiDoc format on 2018-02-07, and needs to be reviewed.</p>
</div>
</div>
</div>
      <section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        <li><a href="https://github.com/apache/netbeans-antora-wiki/edit/main/modules/ROOT/pages/wiki/DevFaqLookup.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>
      </article>
    </div>
        <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="../../../../_/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/about">About</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/who">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/community">Community</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/mailing-lists">Mailing lists</a></li>
              <li><a href="../../../../front/main/community/committer">Becoming a committer</a></li>
              <li><a href="../../../../front/main/community/events">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/participate">Participate</a></h1>
            <ul>
              <li><a href="../../../../front/main/participate/submit-pr">Submitting Pull Requests</a></li>
              <li><a href="../../../../front/main/participate/report-issue">Reporting Issues</a></li>
              <li><a href="../../../../front/main/participate/#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/help">Get Help</a></h1>
            <ul>
              <li><a href="../../../../front/main/help/#documentation">Documentation</a></li>
              <li><a href="../../../../wiki/main/wiki">Wiki</a></li>
              <li><a href="../../../../front/main/help/#support">Community Support</a></li>
              <li><a href="../../../../front/main/help/commercial-support">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/download">Download</a></h1>
            <ul>
              <li><a href="../../../../front/main/download">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="../../../../front/main/download/#_daily_builds_and_building_from_source">Building from source</a></li>
              <li><a href="../../../../front/main/download/#_older_releases">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
      </div>
    </div>

    
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
    <script src="../../../../_/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../../../_/js/vendor/what-input.js"></script>
    <script src="../../../../_/js/vendor/foundation.min.js"></script>
    <script src="../../../../_/js/vendor/jquery.colorbox-min.js"></script>
    <script src="../../../../_/js/netbeans.js"></script>
    <script>
       $(function(){ $(document).foundation(); });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
      $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); });
    </script>
  </body>
</html>
