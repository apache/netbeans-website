<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans APIs in a Nutshell</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans APIs in a Nutshell">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="../../../../_/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="../../../../_/css/highlight-11.9.0.default.min.css">
    <link rel="stylesheet" href="../../../../_/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../_/images/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../_/images/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../_/images/fav/favicon-16x16.png">
    <link rel="manifest" href="../../../../_/images/fav/site.webmanifest">
    <link rel="mask-icon" href="../../../../_/images/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="../../../../_/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="../../../../index.html"><img src='../../../../_/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <input id="search-input" type="text" placeholder="Search the docs"> </li>
            <li> <a href="../../../../front/main/community">Community</a> </li>
            <li> <a href="../../../../front/main/participate">Participate</a> </li>
            <li> <a href="../../../../front/main/blogs">Blog</a></li>
            <li> <a href="../../../../front/main/help">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="../../../../front/main/download">Download</a> </li>
        </ul>
    </div>
</div>

    <!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 21</h1>
            <p><a class="button success" href="../../../../front/main/download/nb21">Download</a></p>
        </div>
    </div>
</section>
    <div class='grid-container main-content'>
      <article class="doc">
      <h1 style="visibily: hidden">NetBeans APIs in a Nutshell</h1>
      <div class='aside' style='text-align: center; padding: 20px;'>
    <a href="../../../../wiki/main/wiki" title="Apache NetBeans WIKI">Apache NetBeans Wiki Index</a>
    <p><b>Note:</b> These pages are being reviewed.</p>
</div>
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#FileSystems">FileSystems</a>
<ul class="sectlevel2">
<li><a href="#Differences_Between_java.io.File_and_FileObjects">Differences Between java.io.File and FileObjects</a></li>
<li><a href="#What_FileSystems_Are_Used_For">What FileSystems Are Used For</a></li>
<li><a href="#XML_Layers">XML Layers</a></li>
</ul>
</li>
<li><a href="#DataLoaders_and_DataObjects">DataLoaders and DataObjects</a>
<ul class="sectlevel2">
<li><a href="#Using_DataObjects">Using DataObjects</a></li>
<li><a href="#Putting_it_Together:_Why_.instance_Files_Work">Putting it Together: Why .instance Files Work</a></li>
</ul>
</li>
<li><a href="#Nodes:_The_Presentation_Layer">Nodes: The Presentation Layer</a>
<ul class="sectlevel2">
<li><a href="#Nodes.2C_DataObjects_and_lookup_Patterns">Nodes, DataObjects and lookup Patterns</a></li>
</ul>
</li>
<li><a href="#Lookup">Lookup</a>
<ul class="sectlevel2">
<li><a href="#The_Default_Lookup">The Default Lookup</a></li>
<li><a href="#Summary">Summary</a></li>
</ul>
</li>
<li><a href="#Interconverting_between_Files.2C_DataObjects.2C_FileObjects_and_Nodes">Interconverting between Files, DataObjects, FileObjects and Nodes</a></li>
<li><a href="#Other_Things_Worth_Mentioning...">Other Things Worth Mentioning&#8230;&#8203;</a>
<ul class="sectlevel2">
<li><a href="#Explorer_Views">Explorer Views</a></li>
<li><a href="#The_Window_System">The Window System</a></li>
</ul>
</li>
<li><a href="#When_Youre_Wondering_Where_Something_is_Implemented">When You&#8217;re Wondering Where Something is Implemented</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This overview will quickly familiarize you with how NetBeans modules interact
with the NetBeans Platform and with each other. It is not intended as a
comprehensive document—the
<a href="https://bits.netbeans.org/dev/javadoc/index.html">NetBeans API List</a>, the
<a href="../../../../tutorial/main/kb/docs/platform/" class="xref page">NetBeans Platform Learning Trail</a>, and the video series
"<a href="../../../../tutorial/main/tutorials/nbm-10-top-apis/" class="xref page">Top 10 NetBeans APIs</a> go into greater detail—but should serve as a guide to
understanding the basic concepts of NetBeans module development.</p>
</div>
<div class="paragraph">
<p>The key to understanding the NetBeans Platform is to realize that very often
the same API or infrastructure does double-duty—playing one role in dealing
with the user&#8217;s files on disk, and another role when it comes to configuration
information and runtime data. For example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <a href="https://bits.netbeans.org/dev/javadoc/org-openide-filesystems/org/openide/filesystems/FileSystem.html">FileSystem</a> represents the
user&#8217;s files, but the <a href="../../../../tutorial/main/tutorials/nbm-glossary/" class="xref page">System Filesystem</a> represents the IDE&#8217;s configuration data.</p>
</li>
<li>
<p>A <a href="https://bits.netbeans.org/dev/javadoc/org-openide-loaders/org/openide/loaders/DataObject.html">DataObject</a> represents the
parsed content of a Java or other file, but DataObjects also are used to instantiate a Java object installed by a module.</p>
</li>
<li>
<p><a href="https://bits.netbeans.org/dev/javadoc/org-openide-util-lookup/org/openide/util/Lookup.html#getDefault--">Lookup.getDefault()</a> is the way you
access global services and singletons, but you also call <a href="https://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/nodes/Node.html#getLookup--">Node.getLookup()</a> to find services specific to an individual file or object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is this reuse that has led some to say the NetBeans APIs are confusing, and it is the purpose of this overview to rapidly familiarize you with what these things are and how they are used in both roles.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="FileSystems"><a class="anchor" href="#FileSystems"></a>FileSystems</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In NetBeans 3.x, adding items to the classpath was accomplished by "mounting" FileSystems - a FileSystem had a root directory and everything under it amounted to a virtual namespace in which files lived.</p>
</div>
<div class="paragraph">
<p>Since NetBeans 4.0, the "mounting" is gone, and FileSystems are not a concept that users are exposed to in the UI - but the infrastructure behind FileSystems - <a href="https://bits.netbeans.org/dev/javadoc/org-openide-filesystems/org/openide/filesystems/FileSystem.html">org.openide.filesystems.FileSystem</a> is alive and well under the hood. In coding NetBeans modules, you will typically interact with instances of <a href="https://bits.netbeans.org/dev/javadoc/org-openide-filesystems/org/openide/filesystems/FileObject.html">org.openide.filesystems.FileObject</a>, not <a href="https://docs.oracle.com/javase/1.5.0/docs/api/java/io/File.html">java.io.File</a>.</p>
</div>
<div class="sect2">
<h3 id="Differences_Between_java.io.File_and_FileObjects"><a class="anchor" href="#Differences_Between_java.io.File_and_FileObjects"></a>Differences Between java.io.File and FileObjects</h3>
<div class="paragraph">
<p>The main differences between them are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You get FileObjects from a FileSystem, rather than create them with a constructor.</p>
</li>
<li>
<p>Typically you don&#8217;t have FileObjects which represent something that doesn&#8217;t exist (as you can with new File ("some/place/that/doesnt/exist")).</p>
</li>
<li>
<p>You can listen for changes on FileObjects, including listening on folders for changes that happen anywhere underneath them</p>
</li>
<li>
<p>FileObjects don&#8217;t necessarily represent actual files on disk</p>
</li>
<li>
<p>FileObjects can have <em>attributes</em> which are essentially key-value pairs that can be associated with a file. An attribute might be a string, or a serialized object (note that use of attributes on user files on disk is discouraged as of NetBeans 4.0, but they are still commonly used in configuration files).</p>
</li>
<li>
<p>The path separator for FileObjects is always /, no conversions with File.separator are needed</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="What_FileSystems_Are_Used_For"><a class="anchor" href="#What_FileSystems_Are_Used_For"></a>What FileSystems Are Used For</h3>
<div class="paragraph">
<p>FileSystems are used in two basic but very distinct ways in NetBeans. The first is representing the user&#8217;s files on disk. To get a FileObject for some path in NetBeans, just call, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">FileObject text = FileUtil.toFileObject(new File("/.../myFile.txt"));</code></pre>
</div>
</div>
<div class="paragraph">
<p>The second usage is to represent configuration data - this is the "System Filesystem", which is where modules can install their files. Folders in the System Filesystem act as "extension points" - there are some which have predefined meanings (for example, NetBeans' main menu is a tree of folders you will place special "files" into to add menu items); modules are free to create their own folders and do as they wish with the contents.</p>
</div>
<div class="paragraph">
<p>How does all this work? Well, once you have the concept of a virtualized FileSystem full of FileObjects, it&#8217;s relatively easy to imagine a FileSystem which took several other FileSystems as arguments, and presented a merged view of the sub-filesystems as if all the data lived in one tree.</p>
</div>
<div class="paragraph">
<p>Add into this the notion that the "files" in a FileSystem don&#8217;t actually have to be physical files on disk at all - anything that can be made to walk and talk like a file will do. So you could have an XML "filesystem" where the contents of files lived in an XML document, not a bunch of files on disk.</p>
</div>
</div>
<div class="sect2">
<h3 id="XML_Layers"><a class="anchor" href="#XML_Layers"></a>XML Layers</h3>
<div class="paragraph">
<p>That is what the NetBeans Platform does: Each module can define an XML "layer" file, which contains some virtual "files" and folders that are merged into the System Filesystem. In this way modules add their configuration data to the system. And because the System Filesystem is composed from discrete XML fragments from modules, when a module is disabled or unloaded, its XML layer is simply removed. FileObjects for the various folders that had files removed from them fire changes indicating some files were deleted, so the UI can get rid of any objects that represented the now-unloaded module&#8217;s files. This is why you can uninstall and reload modules at runtime.</p>
</div>
<div class="paragraph">
<p>In its jar manifest, a module will contain a line such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">OpenIDE-Module-Layer: org/netbeans/modules/mymodule/layer.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is a pointer to an XML file inside the module jar (meaning that you simply create this file somewhere in your sources so it will be compiled into the jar when your module is built). In its simplest form, that could contain something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;filesystem&gt;
  &lt;folder name="myFolder"&gt;
    &lt;file name="myFile.txt" url="resources/aTextFile.txt"/&gt;
  &lt;/folder&gt;
&lt;/filesystem&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The url attribute is important: It says where the contents of myFile.txt lives in the module&#8217;s jar file. This path is relative to the location of the layer file. So, if the layer file is org/netbeans/modules/mymodule/layer.xml, then in the module jar there should also be a text file org/netbeans/modules/mymodule/resources/aTextFile.txt. When some code requests an InputStream for myFolder/myFile.txt, that text file in the module jar is what will actually be read.</p>
</div>
<div class="paragraph">
<p>Of course, this particular fragment doesn&#8217;t do much of anything, but it is useful to illustrate what can be done here. Since myFolder has no predefined purpose to NetBeans, it is up to the module defining that folder to do something with its contents. But one could imagine a module that provided myFolder, let other modules add more files to that folder, and provided one menu item for each file, letting the user view them.</p>
</div>
<div class="paragraph">
<p>Accessing this file programmatically is quite simple:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">FileObject myFile = FileUtil.getConfigFile("myFolder/myFile.txt");
InputStream in = myFile.getInputStream();
//...do something with it</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="Providing_Java_Objects_through_Module_Layers"><a class="anchor" href="#Providing_Java_Objects_through_Module_Layers"></a>Providing Java Objects through Module Layers</h4>
<div class="paragraph">
<p>Just being able to install text files isn&#8217;t terribly interesting. Where the system of layers gets its power is in the ability to make files act as factories for Java objects. This is made possible using the same infrastructure that recognizes user data on disk, which will be discussed in more detail in the section on Loaders. Effectively, there is a specific file-extension registered in the system, .instance which identifies a file that actually represents a Java object and can create the actual object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;filesystem&gt;
  &lt;folder name="Menu"&gt;
    &lt;folder name="File"&gt;
      &lt;file name="org-netbeans-modules-mymodule-MyAction.instance"/&gt;
    &lt;/folder&gt;
  &lt;/folder&gt;
&lt;/filesystem&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above module layer actually adds a Swing Action (implemented by the class org.netbeans.modules.mymodule.MyAction) into the File menu on the main menu bar in NetBeans. The NetBeans core defines the folder Menu, and provides the infrastructure that listens on these folders and keeps the GUI up-to-date if things are added or removed. Toolbars work in a similar fashion, as do many other things in NetBeans.</p>
</div>
</div>
<div class="sect3">
<h4 id="Hiding_Files_in_the_System_Filesystem"><a class="anchor" href="#Hiding_Files_in_the_System_Filesystem"></a>Hiding Files in the System Filesystem</h4>
<div class="paragraph">
<p>The System Filesystem also allows one module to remove what another module adds. The semantics are extremely simple - for example, if you wanted to delete the File menu in NetBeans when your module is enabled, simply put the following into your module layer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;filesystem&gt;
  &lt;folder name="Menu"&gt;
    &lt;folder name="File_hidden"/&gt;
  &lt;/folder&gt;
&lt;/filesystem&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="The_System_Filesystem_is_Read-Write"><a class="anchor" href="#The_System_Filesystem_is_Read-Write"></a>The System Filesystem is Read-Write</h4>
<div class="paragraph">
<p>If it were all just static XML fragments, it wouldn&#8217;t be possible to actually store configuration changes the user has made - but of course, this is possible. Recall that we have the notion of a filesystem composed of merging multiple other filesystems - and that we know that we have an implementation of FileSystem over actual files on disk, which is how a user&#8217;s data files are accessed.</p>
</div>
<div class="paragraph">
<p>The top layer to the system filesystem is the config/ subdirectory of the user&#8217;s settings directory - typically this lives in the user&#8217;s home directory under the directory .netbeans. So when a user makes changes (like rearranging menu items), the diff of the changes is written to disk in the settings directory; since this layer lives at the top of the stack, whatever changes are there (such as hiding files, as discussed above), override anything a module has in its layer file.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DataLoaders_and_DataObjects"><a class="anchor" href="#DataLoaders_and_DataObjects"></a>DataLoaders and DataObjects</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://bits.netbeans.org/dev/javadoc/org-openide-loaders/org/openide/loaders/DataObject.html">DataObject</a><a href="https://bits.netbeans.org/dev/javadoc/org-openide-loaders/org/openide/loaders/DataObject.html">s</a> are wrappers for FileObjects. A FileObject simply represents a file-like entity; DataObjects are the level at which the system understands what the contents of a file are. So a module that implements handling for a particular file type provides its own subclass of DataObject and a factory which can create an instance of that DataObject type when it is passed a FileObject. DataObjects are what provide programmatic access to the contents of a file - such as parsing a file and providing a model for its content.</p>
</div>
<div class="paragraph">
<p>The factory for these objects, which a module installs, is called a
<a href="https://bits.netbeans.org/dev/javadoc/org-openide-loaders/org/openide/loaders/DataLoader.html">DataLoader</a>.</p>
</div>
<div class="paragraph">
<p>Unless you are writing support for a language or file-type, typically you will be using, not creating, DataObjects. Getting the DataObject for a file is simple: Just call <a href="https://bits.netbeans.org/dev/javadoc/org-openide-loaders/org/openide/loaders/DataObject.html#find(org.openide.filesystems.FileObject-">DataObject.find(someFileObject)</a>.</p>
</div>
<div class="sect2">
<h3 id="Using_DataObjects"><a class="anchor" href="#Using_DataObjects"></a>Using DataObjects</h3>
<div class="paragraph">
<p>DataObjects don&#8217;t do a lot in and of themselves - that is, it is almost always a mistake to be casting a DataObject as a particular subclass. The way to do most interesting interaction with DataObjects is via the method <a href="https://bits.netbeans.org/dev/javadoc/org-openide-loaders/org/openide/loaders/DataObject.html#getLookup--">getLookup()</a>. The pattern, which we will see in more detail in the section on <a href="#Lookup">Lookup</a> is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">OpenCookie open = someDataObject.getLookup().lookup(OpenCookie.class);
open.open();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above code will actually open a file in the editor. The key here is that, rather than providing programmatic access to a file&#8217;s content as a bunch of instance methods on itself (which would quickly lead to a tangled mess of inheritance issues), you <em>ask</em> a DataObject for an instance of some known interface that does what you need. This is accomplished by passing a Class object to lookup(), which will return that object if possible, or null if not.</p>
</div>
<div class="paragraph">
<p>As another example, determining if an opened file has unsaved changes is as simple as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">boolean needsSaving = someDataObject.getLookup().lookup(SaveCookie.class) != null;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Modules can provide their own public interfaces, and make instances of those objects available via lookup. So, for example, a DataObject for an XML file might make a DOM tree or some other structural representation of the file available via lookup for other modules to use to manipulate the file&#8217;s contents. Some common interfaces modules will typically use via lookup can be found in the package <a href="https://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/cookies/package-summary.html">org.openide.cookies</a>.</p>
</div>
<div class="paragraph">
<p>Note that the term "cookie" in this context has nothing to do with the web browser concept of cookies.</p>
</div>
</div>
<div class="sect2">
<h3 id="Putting_it_Together:_Why_.instance_Files_Work"><a class="anchor" href="#Putting_it_Together:_Why_.instance_Files_Work"></a>Putting it Together: Why .instance Files Work</h3>
<div class="paragraph">
<p>To illustrate the power of loaders and DataObjects, recall that loaders are registered against a file type. And recall that modules can install actual Java objects via .instance files. What&#8217;s going on here?</p>
</div>
<div class="paragraph">
<p>What is actually happening is that the very same infrastructure (DataLoaders) that lets NetBeans recognize a user&#8217;s .java file on disk and create an appropriate DataObject is what recognizes .instance files - after all, the System Filesystem is a filesystem too. There is simply a DataLoader registered in the system that claims all files with the .instance extension.</p>
</div>
<div class="paragraph">
<p>Under the hood, what&#8217;s really happening is that the DataObject for a .instance file provides an <a href="https://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/cookies/InstanceCookie.html">InstanceCookie</a>. So to get the actual object in question manually, you would do something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">FileObject file = FileUtil.getConfigFile("someFolder/com-foo-mymodule-MyClass.instance");
DataObject dob = DataObject.find(file);
InstanceCookie cookie = dob.getLookup().lookup(InstanceCookie.class);
MyClass theInstance = (MyClass) cookie.instanceCreate();</code></pre>
</div>
</div>
<div class="paragraph">
<p>or more simply:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">MyClass theInstance = FileUtil.getConfigObject("someFolder/com-foo-mymodule-MyClass.instance");</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Nodes:_The_Presentation_Layer"><a class="anchor" href="#Nodes:_The_Presentation_Layer"></a>Nodes: The Presentation Layer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You&#8217;ve probably noticed that there are quite a few tree components in NetBeans - the Files and Projects tabs, and others. The <a href="https://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/nodes/doc-files/api.html">Nodes API</a> is what provides the contents to those trees. Think of DataObjects as being the data model; a Node is where interacting with the user comes in.</p>
</div>
<div class="paragraph">
<p>A <a href="https://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/nodes/Node.html">Node</a> provides human-visible things like an icon and a (possibly localized) display name to DataObjects. And a Node provides a list of <a href="https://bits.netbeans.org/dev/javadoc/org-openide-awt/org/openide/awt/Actions.html">Actions</a> that can appear in a popup menu for that node.</p>
</div>
<div class="paragraph">
<p>Nodes define <em>context</em> for NetBeans - at any given moment, there is usually one or more <em>activated nodes</em> which determine what menu and toolbar actions are enabled - they are the clue to the rest of the system as to what the user is doing. Each UI component (such as the Files tab or the Editor) provides an array of Nodes which are activated - selected. In a tree component, it is rather obvious how this works; but even when editing in the editor, the activated node triggers what actions are enabled, depending on where the caret is - if the caret is inside the body of a method, the activated node is actually the same node you would find if you expanded the structure tree of that java class in the Projects tab.</p>
</div>
<div class="paragraph">
<p>So, to get the Node corresponding to a DataObject, simply call someDataObject.<a href="https://bits.netbeans.org/dev/javadoc/org-openide-loaders/org/openide/loaders/DataObject.html#getNodeDelegate()">getNodeDelegate()</a>.</p>
</div>
<div class="sect2">
<h3 id="Nodes.2C_DataObjects_and_lookup_Patterns"><a class="anchor" href="#Nodes.2C_DataObjects_and_lookup_Patterns"></a>Nodes, DataObjects and lookup Patterns</h3>
<div class="paragraph">
<p>Nodes use the same pattern as DataObject - they have a getLookup() method that can be used as described above. Nodes that represent DataObjects will typically delegate to their DataObject&#8217;s getLookup() method.</p>
</div>
<div class="paragraph">
<p>Note that all Nodes do not represent DataObjects - the Nodes API is useful in and of itself for creating tree like hierarchies.</p>
</div>
<div class="paragraph">
<p>There are a number of UI components that can represent a tree of nodes as trees, combo boxes, lists, etc. - so typically when one needs to display a UI with a list or tree in it, the natural choice is to use the Nodes API, and simply create the appropriate component and set the root node appropriately.</p>
</div>
<div class="paragraph">
<p>A key thing to remember is that Nodes are intended as a presentation layer for an underlying data model (which might be files on disk, or whatever you want). If you find you&#8217;re putting a lot of logic into your Node subclass, consider that your model is what needs enhancing - Nodes should be lightweight and simple, and the model should do the heavy lifting.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Lookup"><a class="anchor" href="#Lookup"></a>Lookup</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://bits.netbeans.org/dev/javadoc/org-openide-util-lookup/org/openide/util/Lookup.html">org.openide.util.Lookup</a> is NetBeans' form of the "service locator" and "adapter" patterns. As with DataObjects and FileObjects, it has two common usages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Local lookup</em> - asking an object for an instance of some interface, as we saw above with Node.getLookup().lookup(SomeClass.class)</p>
</li>
<li>
<p><em>Global lookup</em> - services - often singleton instances of some class - can be registered into the <em>default lookup</em>.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="The_Default_Lookup"><a class="anchor" href="#The_Default_Lookup"></a>The Default Lookup</h3>
<div class="paragraph">
<p>The default lookup is an instance of Lookup returned by calling Lookup.getDefault(). The NetBeans APIs define a number of abstract service classes which allow you to get an instance of some object that is of general use - for example, <a href="https://bits.netbeans.org/dev/javadoc/org-openide-dialogs/org/openide/DialogDisplayer.html">org.openide.DialogDisplayer</a>, which displays dialogs to the user. These are typically things that there only needs to be one of in the system, so they are effectively singleton objects. To get an instance of DialogDisplayer, you could do as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">DialogDisplayer d = Lookup.getDefault().lookup(DialogDisplayer.class);
d.notify(...);</code></pre>
</div>
</div>
<div class="paragraph">
<p>In practice this code is a little clunky to ask people to write all the time, so most such abstract classes will have their own method getDefault() implemented as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public abstract class MyService {
   public static MyService getDefault() {
      MyService result = Lookup.getDefault().lookup(MyService.class);
      if (result == null) {
         result = new TrivialImplementationOfMyService();
      }
      return result;
   }
   public abstract void doSomething(...);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Modules can register their own objects into the default lookup using the @ServiceProvider annotation.</p>
</div>
<div class="paragraph">
<p>While we won&#8217;t go into this in detail here, it is also possible to register multiple instances of an interface into the default lookup, retrieve all of them and even listen for changes on the result of that query.</p>
</div>
<div class="paragraph">
<p>A very thorough discussion of Lookup can be found <a href="http://openide.netbeans.org/lookup/">here</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Summary"><a class="anchor" href="#Summary"></a>Summary</h3>
<div class="paragraph">
<p>The salient points to remember are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>FileObjects wrap files (and sometimes other things)</p>
</li>
<li>
<p>DataObjects wrap FileObjects and understand what&#8217;s in a file</p>
</li>
<li>
<p>You typically don&#8217;t call methods on a DataObject, you ask it for objects via getLookup().lookup(&#8230;&#8203;)</p>
</li>
<li>
<p>Configuration information is just another filesystem you can get DataObjects out of</p>
</li>
<li>
<p>Nodes wrap DataObjects and provide human-displayable information - actions, icons, names</p>
</li>
<li>
<p>Nodes are a presentation layer, not the place to put lots of logic</p>
</li>
<li>
<p>Lookup is how you get globally registered services</p>
</li>
<li>
<p>Lookup is also how you ask individual objects (Nodes, DataObjects, Projects) for the objects that do real work</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Interconverting_between_Files.2C_DataObjects.2C_FileObjects_and_Nodes"><a class="anchor" href="#Interconverting_between_Files.2C_DataObjects.2C_FileObjects_and_Nodes"></a>Interconverting between Files, DataObjects, FileObjects and Nodes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Very often you may be integrating an external tool that wants to be passed instances of java.io.File; also there are many cases where you need to interconvert between the various types NetBeans offers which in some way or other represent files.</p>
</div>
<div class="paragraph">
<p>Here are the typical ways to interconvert between all of the above:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">//Find a file on disk
FileObject f = FileUtil.toFileObject(new File("/some/folder/someFile.txt"));
//Turn a FileObject into a File (may fail for virtual filesystems)
File f = FileUtil.toFile(someFileObject);
//Get the DataObject for a FileObject
DataObject obj = DataObject.find(someFileObject);
//Get the FileObject a DataObject represents
FileObject file = someDataObject.getPrimaryFile();
//Get the Node that represents a FileObject
Node n = someDataObject.getNodeDelegate();
//Get the DataObject a Node represents (if any)
DataObject obj = someNode.getLookup().lookup(DataObject.class);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Other_Things_Worth_Mentioning..."><a class="anchor" href="#Other_Things_Worth_Mentioning..."></a>Other Things Worth Mentioning&#8230;&#8203;</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Below we go through two other critical pieces of NetBeans APIs which complete
the basic picture of things modules typically interact with; they don&#8217;t have
the type of dual-use issues that the previous topics do, but are included for
completeness.</p>
</div>
<div class="sect2">
<h3 id="Explorer_Views"><a class="anchor" href="#Explorer_Views"></a>Explorer Views</h3>
<div class="paragraph">
<p>Nodes provide a hierarchy of objects; the Explorer API provides Swing UI
components that display a Node and its children. There are a large variety of
Explorer view classes which can variously represent a hierarchy of Nodes as a
JList, a JMenu, a JComboBox, a JTree, a JTable and more. Typically when you
want to display some hierarchical data structure in NetBeans, you locate or
implement the appropriate Node, create an appropriate Explorer component for
it, and set the Explorer view&#8217;s root node to be the node you want to display.</p>
</div>
<div class="paragraph">
<p>In older versions of NetBeans, the place where the Files and Projects tabs live
was a separate window with the title "Explorer" - you will see the phrase "open
in the Explorer" in older documentation.</p>
</div>
</div>
<div class="sect2">
<h3 id="The_Window_System"><a class="anchor" href="#The_Window_System"></a>The Window System</h3>
<div class="paragraph">
<p>The API of the Window System is found in <a href="https://bits.netbeans.org/dev/javadoc/org-openide-windows/org/openide/windows/package-summary.html">org.openide.windows</a>. A basic overview is that in NetBeans, you don&#8217;t deal with JFrames or JDialogs - rather, you supply components which are displayed, and NetBeans window management system decides where and how they appear in terms of top-level frames. The main thing to know is that all components in NetBeans are subclasses or usages of <a href="https://bits.netbeans.org/dev/javadoc/org-openide-windows/org/openide/windows/TopComponent.html">org.openide.windows.TopComponent</a>. TopComponent has relatively self-explanatory methods such as <a href="https://bits.netbeans.org/dev/javadoc/org-openide-windows/org/openide/windows/TopComponent.html#open()">open()</a> and <a href="https://bits.netbeans.org/dev/javadoc/org-openide-windows/org/openide/windows/TopComponent.html#requestActive()">requestActive()</a>. TopComponents live in <em>docking modes</em> (the somewhat confusingly named <a href="https://bits.netbeans.org/dev/javadoc/org-openide-windows/org/openide/windows/Mode.html">org.openide.windows.Mode</a>). A Mode is a container for multiple TopComponents - a thing that has Tabs. Mode itself is not a GUI component, it is an abstract class that acts as a controller.</p>
</div>
<div class="paragraph">
<p>TopComponents can be instantiated and opened on the fly, but typically a module installs its UI components via several XML files inside its JAR file and pointers to those files in the module&#8217;s XML layer file.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="When_Youre_Wondering_Where_Something_is_Implemented"><a class="anchor" href="#When_Youre_Wondering_Where_Something_is_Implemented"></a>When You&#8217;re Wondering Where Something is Implemented</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sometimes you just want to go read the code - but it&#8217;s a jungle of jars out there. Here are some of the things people often want to track down - the locations are the actual directories in a checkout of NetBeans sources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Where are the standard menus defined?</strong> - core.ui</p>
</li>
<li>
<p><strong>Where is dialog and windowing handled?</strong> - core.windows</p>
</li>
<li>
<p><strong>Where is the tab control NetBeans uses for tabs?</strong> - o.n.swing.tabcontrol</p>
</li>
<li>
<p><strong>What sets the fonts for NetBeans?</strong> - o.n.swing.plaf</p>
</li>
</ul>
</div>
</div>
</div>
      <section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        <li><a href="https://github.com/apache/netbeans-antora-wiki/edit/main/modules/ROOT/pages/wiki/NbmIdioms.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>
      </article>
    </div>
        <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="../../../../_/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/about">About</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/who">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/community">Community</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/mailing-lists">Mailing lists</a></li>
              <li><a href="../../../../front/main/community/committer">Becoming a committer</a></li>
              <li><a href="../../../../front/main/community/events">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/participate">Participate</a></h1>
            <ul>
              <li><a href="../../../../front/main/participate/submit-pr">Submitting Pull Requests</a></li>
              <li><a href="../../../../front/main/participate/report-issue">Reporting Issues</a></li>
              <li><a href="../../../../front/main/participate/#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/help">Get Help</a></h1>
            <ul>
              <li><a href="../../../../front/main/help/#documentation">Documentation</a></li>
              <li><a href="../../../../wiki/main/wiki">Wiki</a></li>
              <li><a href="../../../../front/main/help/#support">Community Support</a></li>
              <li><a href="../../../../front/main/help/commercial-support">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/download">Download</a></h1>
            <ul>
              <li><a href="../../../../front/main/download">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="../../../../front/main/download/#_daily_builds_and_building_from_source">Building from source</a></li>
              <li><a href="../../../../front/main/download/#_older_releases">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2024 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
      </div>
    </div>

    
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
    <script src="../../../../_/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../../../_/js/vendor/what-input.js"></script>
    <script src="../../../../_/js/vendor/foundation.min.js"></script>
    <script src="../../../../_/js/vendor/jquery.colorbox-min.js"></script>
    <script src="../../../../_/js/netbeans.js"></script>
    <script>
       $(function(){ $(document).foundation(); });
    </script>
    <script src="../../../../_/js/vendor/highlight-11.9.0.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', (event) => {
         document.querySelectorAll('pre code').forEach((el) => {
         hljs.highlightElement(el);
        });
      });
    </script>
  </body>
</html>
