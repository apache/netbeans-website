<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>How can I profile NetBeans?</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Apache NetBeans wiki DevFaqProfiling">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans wiki DevFaqProfiling">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="../../../../_/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    <link rel="stylesheet" href="../../../../_/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../_/images/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../_/images/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../_/images/fav/favicon-16x16.png">
    <link rel="manifest" href="../../../../_/images/fav/site.webmanifest">
    <link rel="mask-icon" href="../../../../_/images/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="../../../../_/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="../../../../index.html"><img src='../../../../_/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <input id="search-input" type="text" placeholder="Search the docs"> </li>
            <li> <a href="../../../../front/main/community">Community</a> </li>
            <li> <a href="../../../../front/main/participate">Participate</a> </li>
            <li> <a href="../../../../front/main/blogs">Blog</a></li>
            <li> <a href="../../../../front/main/help">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="../../../../front/main/download">Download</a> </li>
        </ul>
    </div>
</div>

    <!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="../../../../front/main/download/nb19">Download</a></p>
        </div>
    </div>
</section>
    <div class='grid-container main-content'>
      <article class="doc">
      <h1 class="sect1">How can I profile NetBeans?</h1>
      <div class='aside' style='text-align: center; padding: 20px;'>
    <a href="../../../../wiki/main/wiki" title="Apache NetBeans WIKI">Apache NetBeans Wiki Index</a>
    <p><b>Note:</b> These pages are being reviewed.</p>
</div>
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_netbeans_profiler">NetBeans profiler</a></li>
<li><a href="#_analyzer">Analyzer</a>
<ul class="sectlevel2">
<li><a href="#_download_and_install_analyzer_tool">Download and install Analyzer tool</a></li>
<li><a href="#_run_the_analyzer">Run the Analyzer</a></li>
<li><a href="#_profiling_hints">Profiling hints</a></li>
</ul>
</li>
<li><a href="#_other_tools">Other tools</a></li>
<li><a href="#_tips_and_trick">Tips and trick</a></li>
<li><a href="#_how_to_measure_performanceresponsiveness">How to measure performance/responsiveness?</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>There are many possibilities how to profile Java applications and that can be applied to NetBeans profiling.
For different task it can be good to select different ways because each of them has its strengths and weaknesses.</p>
</div>
<div class="paragraph">
<p>See also: <a href="../DevFaqMemoryLeaks/" class="xref page">DevFaqMemoryLeaks</a></p>
</div>
<div class="paragraph">
<p>To be able to profile an application it is usually needed to start it with a modified command
that typically adds some (JVMPI or JVMTI) libraries, some classes to (boot)classpath, specifies
options for profiling and often initializes profiling support before the application starts to run its code.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_netbeans_profiler"><a class="anchor" href="#_netbeans_profiler"></a>NetBeans profiler</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The NB module development support is integrated with the NB Profiler.
Just select a module and click <strong>Profile</strong> to start.</p>
</div>
<div class="paragraph">
<p><em>Want to cover some typical activities like:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>action execution (invoked from menu or by shortcut)</p>
</li>
<li>
<p>window/dialog opening/closing</p>
</li>
<li>
<p>use of editor including tracking what happens in background</p>
</li>
<li>
<p>startup</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_analyzer"><a class="anchor" href="#_analyzer"></a>Analyzer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is a sampling profiler working on Solaris and Linux (with limited functionality) that collects data during runtime.
These data are later available for offline processing.</p>
</div>
<div class="paragraph">
<p>It provides some capabilities that are not available in other Java profilers namely timeline view.
This view shows timeline for each thread visualizing if the thread actually executes some code or not.</p>
</div>
<div class="sect2">
<h3 id="_download_and_install_analyzer_tool"><a class="anchor" href="#_download_and_install_analyzer_tool"></a>Download and install Analyzer tool</h3>
<div class="paragraph">
<p>Performance Analyzer that is part of Sun Studio tools and can be downloaded
from the <a href="http://developers.sun.com/sunstudio/downloads/express.jsp">developers' site</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_run_the_analyzer"><a class="anchor" href="#_run_the_analyzer"></a>Run the Analyzer</h3>
<div class="ulist">
<ul>
<li>
<p>Set the environment. <code>PATH</code> should contain <code>bin</code> directory of Analyzer installation. <code>LD_LIBRARY_PATH</code> should similarly contain <code>lib</code> dir (and also <code>/usr/lib/lwp</code> if you want to run it on Solaris 2.8). Optionally you can also set <code>MAN_PATH</code>. Set the <code>_NB_PROFILE_CMD</code>:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>export _NB_PROFILE_CMD='collect -p 1 -j on -S off -g NetBeans.erg  -y 38 -d /export/home/radim/analyzer</pre>
</div>
</div>
<div class="paragraph">
<p>-p <em>num</em> stands for sampling period (<em>on</em>, <em>hi</em>, <em>lo</em> are also accepted), -j on turns on Java profiling, -y <em>num</em> determines the signal to trigger profiling on/off. -y <em>num</em>,r means that profiling will be resumed at the begining. Use <code>man collect</code> to get detailed explanation of all options.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>mkdir /export/home/radim/analyzer</code> (It is only need first time. Next experiments will be added.)</p>
</li>
<li>
<p>Install &amp; start the IDE</p>
</li>
<li>
<p>Send signal 38 to Java process to start data collecting (<code>kill -38 $pid</code>). Or use another signal like PROF (this works well on Linux).</p>
</li>
<li>
<p>Perform the analyzed activity</p>
</li>
<li>
<p>Send the signal again to stop profiling (there can be more evaluated periods during one run).</p>
</li>
<li>
<p>Shut down the IDE.</p>
</li>
<li>
<p>Run the analyzer to evaluate the experiment in GUI environment: <code>analyzer /export/home/radim/analyzer/NetBeans.x.er</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_profiling_hints"><a class="anchor" href="#_profiling_hints"></a>Profiling hints</h3>
<div class="paragraph">
<p>Startup: start with profiling enabled, send a signal when startup is completed.
When sampling every 1ms it takes 70 seconds instead of 40.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_other_tools"><a class="anchor" href="#_other_tools"></a>Other tools</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quite simple way how to measure time spent in some code is to wrap the code with</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">long t0 = System.nanoTime();
try {
  ... measured code
} finally {
  long t1 = System.nanoTime();
  System.out.println("action took "+(t1-t0)/1000000+"ms");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>JVMTI</em> is powerful interface that allows to write custom libraries that will track behavior of application.</p>
</div>
<div class="paragraph">
<p><a href="http://www.opensolaris.org/os/community/dtrace/">DTrace</a> is a comprehensive dynamic tracing framework for the Solarisâ„¢ Operating Environment.
It is one of the few tools that allows to track activities running deeply in the system and analyze the system.
Because there are also probes provided by Java VM and function like <code>jstack</code> it is also possible to map
observed actions to parts of Java code in running application.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tips_and_trick"><a class="anchor" href="#_tips_and_trick"></a>Tips and trick</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Node pop-ups: interesting starting point is <code>o.o.awt.MouseUtils$PopupMouseAdapter.mousePressed()</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_measure_performanceresponsiveness"><a class="anchor" href="#_how_to_measure_performanceresponsiveness"></a>How to measure performance/responsiveness?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="http://performance.netbeans.org/responsiveness/whatisresponsiveness.html">What is UI responsiveness</a> for overview.</p>
</div>
<div class="paragraph">
<p>Older <a href="http://performance.netbeans.org/">Performance</a> web page contains few links to documentation of one possible approach
how to measure and profile responsiveness.
This is based on use of modified event queue and patches classes from JDK.</p>
</div>
<div class="paragraph">
<p>Recently we changed the support a bit to avoid modifications of core JDK&#8217;s classes and and use small utility library
available in Hg.
This is used in current automated testing and can be used for manual checks too.
To run such test:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Build <code>performance</code> project.</p>
</li>
<li>
<p>Copy the JAR file to <code>netbeans/platform/core</code></p>
</li>
<li>
<p>Start the IDE with <code>-J-Dnetbeans.mainclass=org.netbeans.performance.test.guitracker.Main -J-Dguitracker.mainclass=org.netbeans.core.startup.Main</code></p>
</li>
<li>
<p>&#8230;&#8203; watch process output when you perform an action</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Applies to: NetBeans 6.5 and above</p>
</div>
<div class="paragraph">
<p><a href="#./Category:Performance:HowTo.adoc" class="xref unresolved">Category:Performance:HowTo</a></p>
</div>
</div>
</div>
      <section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        <li><a href="https://github.com/apache/netbeans-antora-wiki/edit/main/modules/ROOT/pages/wiki/DevFaqProfiling.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>
      </article>
    </div>
        <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="../../../../_/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/about">About</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/who">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/community">Community</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/mailing-lists">Mailing lists</a></li>
              <li><a href="../../../../front/main/community/committer">Becoming a committer</a></li>
              <li><a href="../../../../front/main/community/events">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/participate">Participate</a></h1>
            <ul>
              <li><a href="../../../../front/main/participate/submit-pr">Submitting Pull Requests</a></li>
              <li><a href="../../../../front/main/participate/report-issue">Reporting Issues</a></li>
              <li><a href="../../../../front/main/participate/#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/help">Get Help</a></h1>
            <ul>
              <li><a href="../../../../front/main/help/#documentation">Documentation</a></li>
              <li><a href="../../../../wiki/main/wiki">Wiki</a></li>
              <li><a href="../../../../front/main/help/#support">Community Support</a></li>
              <li><a href="../../../../front/main/help/commercial-support">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/download">Download</a></h1>
            <ul>
              <li><a href="../../../../front/main/download">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="../../../../front/main/download/#_daily_builds_and_building_from_source">Building from source</a></li>
              <li><a href="../../../../front/main/download/#_older_releases">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
      </div>
    </div>

    
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
    <script src="../../../../_/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../../../_/js/vendor/what-input.js"></script>
    <script src="../../../../_/js/vendor/foundation.min.js"></script>
    <script src="../../../../_/js/vendor/jquery.colorbox-min.js"></script>
    <script src="../../../../_/js/netbeans.js"></script>
    <script>
       $(function(){ $(document).foundation(); });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
      $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); });
    </script>
  </body>
</html>
