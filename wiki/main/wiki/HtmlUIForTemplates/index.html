<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>HtmlUIForTemplates</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Goals">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="../../../../_/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    <link rel="stylesheet" href="../../../../_/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../_/images/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../_/images/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../_/images/fav/favicon-16x16.png">
    <link rel="manifest" href="../../../../_/images/fav/site.webmanifest">
    <link rel="mask-icon" href="../../../../_/images/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="../../../../_/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="../../../../index.html"><img src='../../../../_/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <input id="search-input" type="text" placeholder="Search the docs"> </li>
            <li> <a href="../../../../front/main/community">Community</a> </li>
            <li> <a href="../../../../front/main/participate">Participate</a> </li>
            <li> <a href="../../../../front/main/blogs">Blog</a></li>
            <li> <a href="../../../../front/main/help">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="../../../../front/main/download">Download</a> </li>
        </ul>
    </div>
</div>

    <!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="../../../../front/main/download/nb19">Download</a></p>
        </div>
    </div>
</section>
    <div class='grid-container main-content'>
      <article class="doc">
      <h1 style="visibily: hidden">HtmlUIForTemplates</h1>
      <div class='aside' style='text-align: center; padding: 20px;'>
    <a href="../../../../wiki/main/wiki" title="Apache NetBeans WIKI">Apache NetBeans Wiki Index</a>
    <p><b>Note:</b> These pages are being reviewed.</p>
</div>
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_goals">Goals</a></li>
<li><a href="#Your_Portable_HTML5_Wizard">Your Portable HTML5 Wizard</a></li>
<li><a href="#Your_Portable_Html4Java_Wizard">Your Portable Html4Java Wizard</a>
<ul class="sectlevel2">
<li><a href="#Inception_Review">Inception Review</a></li>
<li><a href="#Final_Review">Final Review</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="#./Html4Java.adoc" class="xref unresolved">Html4Java</a> allows us to easily use HTML based UI in
NetBeans. This page describes how to build on that ability and enhance our
template <a href="../API_Design/" class="xref page">API</a>s to allow rich, yet Swing independent UI
for the template creation wizards.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_goals"><a class="anchor" href="#_goals"></a>Goals</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Play well with 247926 - e.g. templates independent from data loaders</p>
</li>
<li>
<p>Be able to use the wizard values in templating engines - e.g. freemarker</p>
</li>
<li>
<p>Plug into NetBeans wizard API</p>
</li>
<li>
<p>Be embeddable into browser based environment</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Your_Portable_HTML5_Wizard"><a class="anchor" href="#Your_Portable_HTML5_Wizard"></a>Your Portable HTML5 Wizard</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To register your HTML based wizard with your template, use  <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-api-templates/org/netbeans/api/templates/TemplateRegistration.html">@TemplateRegistration</a> annotation and provide reference to your HTML page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class X {
    @TemplateRegistration(
        page = "cz/xelfi/test/x.html",
        scriptEngine = "freemarker",
        displayName = "JS Wizard",
        folder = "Other",
        content = "x.fmk"
    )
    public static String jsWizard() {
        return "init();";
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>the return value of the annotated method should of type String and its content should be snippet of JavaScript code to execute inside of your specified HTML page (e.g. <strong>x.html</strong>) to create an instance of <a href="#./KnockoutJS.adoc" class="xref unresolved">KnockoutJS</a> model to drive the wizard. Here is the sample of the model:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">   function init() {
        var ok = ko.observable(false);
        var msg = ko.observable('');
        var current = ko.observable('Init');
        var data = {
            'errorCode': ko.computed(function() {
                if ('Init' == current()) return 0;
                if (!ok()) return 1;
                if (msg()) return 0;
                return 2;
            }),
            'steps': ko.observableArray([ 'Init', 'Info', 'Summary']),
            'current': current,
            'ok': ok,
            'msg' : msg
        }
        return data;
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>it defines wizard composed of three panels (observable <strong>steps</strong>) and a verification function (registered as <strong>errorCode</strong>) to check if everything is OK. In addition to that it defines proprietary text value <strong>msg</strong> which is going to be filled by the wizard and cannot be empty.</p>
</div>
<div class="paragraph">
<p>Each page of the wizard is registered as a <a href="#./KnockoutJS.adoc" class="xref unresolved">KnockoutJS</a> template named according to the name of the specified step. A dummy initial page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;script type="text/html" id="Init"&gt;
    &lt;h1&gt;This is Initial Page&lt;/h1&gt;
    &lt;p&gt;
        JavaScript will ask you few questions about your mood.
    &lt;/p&gt;
&lt;/script&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>an interactive page with checkbox and an input field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;script type="text/html" id="Info"&gt;
    &lt;h1&gt;This is Query Page&lt;/h1&gt;
    &lt;p&gt;
    Is everything OK?
    &lt;/p&gt;
    &lt;input type="checkbox" data-bind="checked: ok"/&gt;
    &lt;p&gt;How do you feel?
    &lt;/p&gt;
    &lt;input type='text' data-bind="value: msg"/&gt;
&lt;/script&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and a simple summary page showing the specified values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;script type="text/html" id="Summary"&gt;
    &lt;h1&gt;This is Summary Page&lt;/h1&gt;
    &lt;p&gt;
        You are feeling &lt;span data-bind="text: msg"&gt;&lt;/span&gt;!
    &lt;/p&gt;
&lt;/script&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Next/Finish buttons can be controlled by the <strong>errorCode</strong> property. If it is non-zero, there is an error and these buttons are disabled. Also once can use that inside of the HTML page to display user related errors:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;div data-bind="visible: errorCode() == 1"&gt;
    &lt;span style="color: red"&gt;Please check you are OK!&lt;/span&gt;
&lt;/div&gt;

&lt;div data-bind="visible: errorCode() == 2"&gt;
    &lt;span style="color: red"&gt;Tell us how do you feel!&lt;/span&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The L10N of the wizard is done on the level of HTML pages. The whole page gets translated into different language with appropriate suffix <em>x_cs.html</em> and it is then selected instead of the default one, when user runs in such locale.</p>
</div>
<div class="paragraph">
<p>When the wizard is successfully finished, all the values specified in the model are transfered to the templating engine, so they can influence the content of created files. Here is a sample <em>x.fmt</em> content which reuses the <strong>msg</strong> value provided by the wizard:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hi,
I am Freemarker.
I feel ${wizard.msg}.</code></pre>
</div>
</div>
<div class="paragraph">
<p>System of this kind is portable between existing NetBeans infrastructure (see branch <a href="http://hg.netbeans.org/ergonomics/shortlog/62491883f7a0">WizardFor247926</a> in ergonomics repository) as well as demo of embedding the same wizard into browser (see <a href="http://xelfi.cz/htmlwizard/">on-line demo</a>).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Your_Portable_Html4Java_Wizard"><a class="anchor" href="#Your_Portable_Html4Java_Wizard"></a>Your Portable <a href="#./Html4Java.adoc" class="xref unresolved">Html4Java</a> Wizard</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some people prefer JavaScript, some would rather stick with Java. There is a way to provide the same model for the HTML wizard in Java, just use NetBeans <a href="#./Html4Java.adoc" class="xref unresolved">Html4Java</a> <a href="#./API.adoc" class="xref unresolved">API</a>s:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Model(className = "Y", properties = {
    @Property(name = "steps", type = String.class, array = true),
    @Property(name = "current", type = String.class),
    @Property(name = "ok", type = boolean.class),
    @Property(name = "msg", type = String.class)
})
public class YCntrl {
    @ComputedProperty static int errorCode(
        String current, boolean ok, String msg
    ) {
        if ("Init".equals(current)) return 0;
        if (!ok) return 1;
        if (msg == null || msg.isEmpty()) return 2;
        return 0;
    }


    @TemplateRegistration(
        page = "cz/xelfi/test/x.html",
        scriptEngine = "freemarker",
        displayName = "HTML/Java Wizard",
        folder = "Java",
        content = "x.fmk"
    )
    public static Y jsWizard() {
        return new Y("Init", false, "",
          "Init", "Info", "Summary"
        );
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The HTML page remains the same (just remove the JavaScript code) and the application logic is written in Java. Here is a picture showing how the most interactive page looks like when embedded into NetBeans:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../_images/wiki/HtmlWizard.png" alt="HtmlWizard"></span></p>
</div>
<div class="paragraph">
<p>The picture is identical to the one generated by pure JavaScript driven wizard. Yet one can code and test in a type-safe Java. The result still remains portable as, thanks to <a href="http://wiki.apidesign.org/wiki/Bck2Brwsr">Bck2Brwsr</a> and other virtual machines like <a href="http://wiki.apidesign.org/wiki/TeaVM">TeaVM</a>, we are capable to run such code in a browser as well.</p>
</div>
<div class="sect2">
<h3 id="Inception_Review"><a class="anchor" href="#Inception_Review"></a>Inception Review</h3>
<div class="paragraph">
<p>The issue is tracked as 248418 and inception review happened on Dec 1, 2014. The following TCRs and TCAs were raised and fixed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Avoid knockout templates - uses custom ko binding: <a href="http://hg.netbeans.org/ergonomics/rev/c5ec0030bd76">http://hg.netbeans.org/ergonomics/rev/c5ec0030bd76</a></p>
</li>
<li>
<p>Filter control data - done as <a href="http://hg.netbeans.org/ergonomics/rev/31f42048137a">http://hg.netbeans.org/ergonomics/rev/31f42048137a</a></p>
</li>
<li>
<p>Support for progress bar - this has evolved into supporting validation - done as <a href="http://hg.netbeans.org/ergonomics/rev/3c0135fb4681">http://hg.netbeans.org/ergonomics/rev/3c0135fb4681</a></p>
</li>
<li>
<p>Do not depend on JavaFX - done <a href="https://hg.netbeans.org/ergonomics/rev/6576fe363d45">https://hg.netbeans.org/ergonomics/rev/6576fe363d45</a></p>
</li>
<li>
<p>Prepare Technology Compatibility Kit - done <a href="http://hg.netbeans.org/ergonomics/rev/c2fce646315b">http://hg.netbeans.org/ergonomics/rev/c2fce646315b</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Final_Review"><a class="anchor" href="#Final_Review"></a>Final Review</h3>
<div class="paragraph">
<p>We went through all the previous requirements on Dec 18, 2014 and found their implementation sufficient from an architecture perspective. In addition to that we also got a showcase of apisupport wizard to generate the new wizard: <a href="http://hg.netbeans.org/ergonomics/rev/c46aa831443d">http://hg.netbeans.org/ergonomics/rev/c46aa831443d</a></p>
</div>
<div class="paragraph">
<p>The whole project seem to be ready for use by NetBeans platform users and was approved for integration, given following is done:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>arch.xml is enhanced with usecases which are currently in the wiki</p>
</li>
<li>
<p>keep in mind the 'global initialization' issue.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Early adopters (like the JBossForge guys) may start testing this technology by end of 2014.</p>
</div>
<div class="sect3">
<h4 id="Global_Initialization_Issue"><a class="anchor" href="#Global_Initialization_Issue"></a>Global Initialization Issue</h4>
<div class="paragraph">
<p>Currently the JavaScript version of the wizard initializes itself in the HTML page. While this is OK for NetBeans, it may not be acceptable for other (browser with requirejs) environments. Such global initialization might cause name clashes and we need a way to avoid them.</p>
</div>
<div class="paragraph">
<p>It has been demonstrated that one can avoid it by returning the whole JavaScript initialization code from the method annotated by @TemplateRegistration. So solution exists.</p>
</div>
<div class="paragraph">
<p>Of course it is not suitable for browser like environment as they may not have the Java method at all. But we will only see once we prototype such browser solutions. Then we will update the "wizard generating the HTML/JS wizard" to layout files more properly so sharing between different environments gets even smoother.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The content in this page was kindly donated by Oracle Corp. to the
Apache Software Foundation.</p>
</div>
<div class="paragraph">
<p>This page was exported from <a href="http://wiki.netbeans.org/HtmlUIForTemplates">http://wiki.netbeans.org/HtmlUIForTemplates</a> ,
that was last modified by NetBeans user Jtulach
on 2014-12-22T10:15:41Z.</p>
</div>
<div class="paragraph">
<p>This document was automatically converted to the AsciiDoc format on 2020-03-12, and needs to be reviewed.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
      <section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        <li><a href="https://github.com/apache/netbeans-antora-wiki/edit/main/modules/ROOT/pages/wiki/HtmlUIForTemplates.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>
      </article>
    </div>
        <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="../../../../_/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/about">About</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/who">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/community">Community</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/mailing-lists">Mailing lists</a></li>
              <li><a href="../../../../front/main/community/committer">Becoming a committer</a></li>
              <li><a href="../../../../front/main/community/events">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/participate">Participate</a></h1>
            <ul>
              <li><a href="../../../../front/main/participate/submit-pr">Submitting Pull Requests</a></li>
              <li><a href="../../../../front/main/participate/report-issue">Reporting Issues</a></li>
              <li><a href="../../../../front/main/participate/#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/help">Get Help</a></h1>
            <ul>
              <li><a href="../../../../front/main/help/#documentation">Documentation</a></li>
              <li><a href="../../../../wiki/main/wiki">Wiki</a></li>
              <li><a href="../../../../front/main/help/#support">Community Support</a></li>
              <li><a href="../../../../front/main/help/commercial-support">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/download">Download</a></h1>
            <ul>
              <li><a href="../../../../front/main/download">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="../../../../front/main/download/#_daily_builds_and_building_from_source">Building from source</a></li>
              <li><a href="../../../../front/main/download/#_older_releases">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
      </div>
    </div>

    
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
    <script src="../../../../_/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../../../_/js/vendor/what-input.js"></script>
    <script src="../../../../_/js/vendor/foundation.min.js"></script>
    <script src="../../../../_/js/vendor/jquery.colorbox-min.js"></script>
    <script src="../../../../_/js/netbeans.js"></script>
    <script>
       $(function(){ $(document).foundation(); });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
      $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); });
    </script>
  </body>
</html>
