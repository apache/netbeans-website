<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Using NbModuleSuite &amp; friends</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Apache NetBeans wiki DevFaqUsingSimpletests">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans wiki DevFaqUsingSimpletests">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="../../../../_/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    <link rel="stylesheet" href="../../../../_/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../_/images/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../_/images/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../_/images/fav/favicon-16x16.png">
    <link rel="manifest" href="../../../../_/images/fav/site.webmanifest">
    <link rel="mask-icon" href="../../../../_/images/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="../../../../_/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="../../../../index.html"><img src='../../../../_/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <input id="search-input" type="text" placeholder="Search the docs"> </li>
            <li> <a href="../../../../front/main/community">Community</a> </li>
            <li> <a href="../../../../front/main/participate">Participate</a> </li>
            <li> <a href="../../../../front/main/blogs">Blog</a></li>
            <li> <a href="../../../../front/main/help">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="../../../../front/main/download">Download</a> </li>
        </ul>
    </div>
</div>

    <!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 21</h1>
            <p><a class="button success" href="../../../../front/main/download/nb21">Download</a></p>
        </div>
    </div>
</section>
    <div class='grid-container main-content'>
      <article class="doc">
      <h1 class="sect1">Using NbModuleSuite &amp; friends</h1>
      <div class='aside' style='text-align: center; padding: 20px;'>
    <a href="../../../../wiki/main/wiki" title="Apache NetBeans WIKI">Apache NetBeans Wiki Index</a>
    <p><b>Note:</b> These pages are being reviewed.</p>
</div>
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_nbmodulesuite">NbModuleSuite</a></li>
<li><a href="#_junit_version">JUnit Version</a></li>
<li><a href="#_code_coverage">Code Coverage</a></li>
<li><a href="#_setting_up_functional_tests_for_a_platform_application">Setting up functional tests for a Platform Application</a></li>
<li><a href="#_todo">TODO</a></li>
<li><a href="#_notes">NOTES</a></li>
<li><a href="#_converting_tests_for_applications_which_previously_used_xtest">Converting Tests for Applications Which Previously Used XTest</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>During development of the 6.5 series, an effort was made to improve testing by inherent support for tests in NetBeans build scripts (also known as the <em>build harness</em>).  Therefore, unit and functional tests for platform applications are now supported <em>out of the box</em> in NetBeans 6.5 and later.  This effort is sometimes called "simpletests" because it greatly simplifies the work necessary to do such tests on your application.  <a href="#./FitnessTestsWithoutX.adoc" class="xref unresolved">More information about simpletests</a> can be found in the Wiki.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_nbmodulesuite"><a class="anchor" href="#_nbmodulesuite"></a>NbModuleSuite</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Right <a href="../API_Design/" class="xref page">API</a> for starting the test inside <a href="http://wiki.apidesign.org/wiki/NetBeans_Runtime_Container">NetBeans Runtime Container</a> is provided in form of <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-nbjunit/org/netbeans/junit/NbModuleSuite.html">NbModuleSuite</a>. Add <strong>suite</strong> method into your test class to fully emulate <a href="../" class="xref page">NetBeans</a> environment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">   public static Test suite() {
     return NbModuleSuite.create(YourTest.class);
   }</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_junit_version"><a class="anchor" href="#_junit_version"></a>JUnit Version</h2>
<div class="sectionbody">
<div class="paragraph">
<p>NetBeans 6.5 now supports JUnit 4.x, via the <code>JUnit 4</code> module in the <code>platform</code> cluster.  If you&#8217;re not familiar with the difference, this <a href="http://www.ociweb.com/jnb/jnbAug2007.html">helpful article explains the changes from JUnit 3 and JUnit 4</a>.  Put simply, the main difference from a user&#8217;s point of view is is one of syntax and style.  The tests you&#8217;ve already written against 3.x will continue to run under 4.x.  And although you could continue writing new tests using the 3.x syntax if you wanted, it&#8217;s much easier to have NetBeans generate the test stubs for you (Tools &#8594; Create JUnit Tests or <code>Ctrl+Shift+U</code>).  Starting with NetBeans 6.5, any new tests will be generated using the JUnit 4.x style.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_code_coverage"><a class="anchor" href="#_code_coverage"></a>Code Coverage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="../CodeCoverage/" class="xref page">Code Coverage</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_up_functional_tests_for_a_platform_application"><a class="anchor" href="#_setting_up_functional_tests_for_a_platform_application"></a>Setting up functional tests for a Platform Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The testing libraries are included as modules in the build harness, so you will need to include the harness cluster in your application before you can support tests.  This is easily done through the IDE:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Right click your suite&#8217;s node in the project view</p>
</li>
<li>
<p>Choose "Properties"</p>
</li>
<li>
<p>Click "Libraries" on the left</p>
</li>
<li>
<p>Check the "harness" box and add the entire harness cluster.</p>
</li>
<li>
<p>Now click the platform cluster (was platform&lt;number&gt; for 6.8 and older releases)</p>
</li>
<li>
<p>Check the boxes against the MultiView Windows and Visual Library API.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now you must set up the structure under your module:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Go to the 'file' view, and expand your modules node</p>
</li>
<li>
<p>In the test folder, create a folder named 'qa-functional'.  Underneate that, create the folder src.</p>
</li>
<li>
<p>Under the test dir you should now have two folders, unit and qa-functional.  Under each of those should be an src folder.</p>
</li>
<li>
<p>Restart the IDE, there should now be two new Nodes in that Module’s Project Tab: Functional Test Packages and Functional Test Libraries</p>
</li>
<li>
<p>Right-click the Functional Test Libraries –&gt; Add Functional Test Dependencies, then add jemmy, nbjunit, jellytools platform, jellytools and junit4</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It should now be possible to run a class that extends JellyTestCase, and for the IDE to display this correctly.</p>
</div>
<div class="paragraph">
<p>Support for functional tests on Maven-based NetBeans applications should be present from 7.0, with the resolution of <a href="https://bz.apache.org/netbeans/show_bug.cgi?id=190992">https://bz.apache.org/netbeans/show_bug.cgi?id=190992</a> For more information, see <a href="http://netbeans.dzone.com/nb-mvn-functional-tests">http://netbeans.dzone.com/nb-mvn-functional-tests</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_todo"><a class="anchor" href="#_todo"></a>TODO</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Describe how to set up a new unit test from scratch</p>
</li>
<li>
<p>Describe how to set up a new functional test from scratch</p>
</li>
<li>
<p>Describe adding support for external testing libraries (e.g. FIT, TestNG or marathon)</p>
</li>
<li>
<p>Describe how to set up additional test types (e.g. performance)</p>
</li>
<li>
<p>Describe how to configure suite <code>build.xml</code> to remove <code>harness</code> from ZIP distribution</p>
</li>
<li>
<p>Describe how to run tests under automated build using Hudson</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_notes"><a class="anchor" href="#_notes"></a>NOTES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>MockLookup and other <a href="#./UsefulTestClassesInModules.adoc" class="xref unresolved">classes mentioned on the Useful Test Classes in Modules</a> are not available in the platform.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can add additional libraries needed for unit tests by setting the <code>test.unit.cp.extra</code> property (e.g. in the module&#8217;s project.properties file) to point to those libraries.  It does not matter where these libraries (JAR files) reside, and you can refer to them using a hardcoded path (BAD) or via a relative path&#8201;&#8212;&#8201;even using <code>$suite.dir</code> as a starting point in case they&#8217;re used by multiple modules in the suite.  In the latter case, you can define the test.unit.cp.extra property in the suite&#8217;s platform.properties (NOT project.properties) file.  Be aware that this may limit your ability to define additional things at the individual module level, so it might be better to define a standard suite-wide property like <code>standard.unit.test.libs</code> to point to things used throughout the suite, then have individual modules define <code>test.unit.cp.extra</code> to include this plus potentially some other things.  Items defined in the <code>test.unit.cp.extra</code> property are used at both compile time and runtime, it seems.</p>
</li>
<li>
<p>The <code>test.qa-functional.cp.extra</code> property works the same way for functional tests.</p>
</li>
<li>
<p>There is a property <code>extra.test.libs.dir</code> tersely described in the harness README that makes it sound like a great way to define a place for extra testing libraries that will be picked up automatically during tests, but I could not get it to work.  Or at least things in that directory were not found at compile time.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_converting_tests_for_applications_which_previously_used_xtest"><a class="anchor" href="#_converting_tests_for_applications_which_previously_used_xtest"></a>Converting Tests for Applications Which Previously Used XTest</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Essentially, you need only remove the XTest build and configuration files from your modules and replace them with a few lines of code in your tests' <code>suite()</code> method.  More information is available in the <a href="#XTestReplacementCookBook.adoc" class="xref unresolved">XTest Replacement Cookbook</a></p>
</div>
</div>
</div>
      <section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        <li><a href="https://github.com/apache/netbeans-antora-wiki/edit/main/modules/ROOT/pages/wiki/DevFaqUsingSimpletests.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>
      </article>
    </div>
        <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="../../../../_/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/about">About</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/who">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/community">Community</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/mailing-lists">Mailing lists</a></li>
              <li><a href="../../../../front/main/community/committer">Becoming a committer</a></li>
              <li><a href="../../../../front/main/community/events">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/participate">Participate</a></h1>
            <ul>
              <li><a href="../../../../front/main/participate/submit-pr">Submitting Pull Requests</a></li>
              <li><a href="../../../../front/main/participate/report-issue">Reporting Issues</a></li>
              <li><a href="../../../../front/main/participate/#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/help">Get Help</a></h1>
            <ul>
              <li><a href="../../../../front/main/help/#documentation">Documentation</a></li>
              <li><a href="../../../../wiki/main/wiki">Wiki</a></li>
              <li><a href="../../../../front/main/help/#support">Community Support</a></li>
              <li><a href="../../../../front/main/help/commercial-support">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/download">Download</a></h1>
            <ul>
              <li><a href="../../../../front/main/download">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="../../../../front/main/download/#_daily_builds_and_building_from_source">Building from source</a></li>
              <li><a href="../../../../front/main/download/#_older_releases">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2024 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
      </div>
    </div>

    
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
    <script src="../../../../_/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../../../_/js/vendor/what-input.js"></script>
    <script src="../../../../_/js/vendor/foundation.min.js"></script>
    <script src="../../../../_/js/vendor/jquery.colorbox-min.js"></script>
    <script src="../../../../_/js/netbeans.js"></script>
    <script>
       $(function(){ $(document).foundation(); });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
      $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); });
    </script>
  </body>
</html>
