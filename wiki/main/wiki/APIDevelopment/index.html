<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>API_Development</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="API Development">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="../../../../_/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    <link rel="stylesheet" href="../../../../_/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../_/images/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../_/images/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../_/images/fav/favicon-16x16.png">
    <link rel="manifest" href="../../../../_/images/fav/site.webmanifest">
    <link rel="mask-icon" href="../../../../_/images/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="../../../../_/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="../../../../index.html"><img src='../../../../_/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <input id="search-input" type="text" placeholder="Search the docs"> </li>
            <li> <a href="../../../../front/main/community">Community</a> </li>
            <li> <a href="../../../../front/main/participate">Participate</a> </li>
            <li> <a href="../../../../front/main/blogs">Blog</a></li>
            <li> <a href="../../../../front/main/help">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="../../../../front/main/download">Download</a> </li>
        </ul>
    </div>
</div>

    <!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="../../../../front/main/download/nb19">Download</a></p>
        </div>
    </div>
</section>
    <div class='grid-container main-content'>
      <article class="doc">
      <h1 style="visibily: hidden">API_Development</h1>
      <div class='aside' style='text-align: center; padding: 20px;'>
    <a href="../../../../wiki/main/wiki" title="Apache NetBeans WIKI">Apache NetBeans Wiki Index</a>
    <p><b>Note:</b> These pages are being reviewed.</p>
</div>
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#Overview">Overview</a>
<ul class="sectlevel2">
<li><a href="#Describing_APIs">Describing APIs</a></li>
<li><a href="#Setting_up_the_infrastructure">Setting up the infrastructure</a></li>
<li><a href="#Writing_the_documentation">Writing the documentation</a></li>
<li><a href="#Publishing_Javadoc">Publishing Javadoc</a></li>
<li><a href="#Javadoc_Tips">Javadoc Tips</a></li>
</ul>
</li>
<li><a href="#Reviewing_APIs">Reviewing APIs</a>
<ul class="sectlevel2">
<li><a href="#Why">Why?</a></li>
<li><a href="#What">What?</a></li>
<li><a href="#When">When?</a></li>
<li><a href="#How">How?</a></li>
</ul>
</li>
<li><a href="#Testing_APIs">Testing APIs</a>
<ul class="sectlevel2">
<li><a href="#Why_2">Why?</a></li>
<li><a href="#sigtests">Signature Tests</a></li>
<li><a href="#Unit_Tests">Unit Tests</a></li>
</ul>
</li>
<li><a href="#Deploying_the_APIs">Deploying the APIs</a>
<ul class="sectlevel2">
<li><a href="#Publishing_New_Versions">Publishing New Versions</a></li>
</ul>
</li>
<li><a href="#Stabilize_the_APIs">Stabilize the APIs</a>
<ul class="sectlevel2">
<li><a href="#Official_APIs_Restrictions">Official APIs Restrictions</a></li>
<li><a href="#Support_for_Early_Adoption">Support for Early Adoption</a></li>
</ul>
</li>
</ul>
</div>
<div class="sect1">
<h2 id="Overview"><a class="anchor" href="#Overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="../../../../front/main/" class="xref page">NetBeans</a> project provides a rich set of
<a href="https://bits.netbeans.org/dev/javadoc/">APIs</a> that is being developed as
part of work of various groups. By distributing development of the
<a href="../API_Design/" class="xref page">API</a>s to multiple people we can increase the amount of designed,
reviewed, implemented, tuned and maintained contracts but as each module is
developed by a different person, there is a challenge in providing
<a href="../API_Design/" class="xref page">API</a>s of the same quality, designed by using the same patterns
and documented in a common way. This document describes the practices that
should be used during the <a href="../API_Design/" class="xref page">API</a> development, so
<a href="../" class="xref page">NetBeans</a> can produce <a href="../API_Design/" class="xref page">API</a>s that will stand
the test of time and preserve investments made by its customers.</p>
</div>
<div class="sect2">
<h3 id="Describing_APIs"><a class="anchor" href="#Describing_APIs"></a>Describing APIs</h3>
<div class="paragraph">
<p>We understand the APIs as every aspect another piece of system can depend on and not just method signature. That is why providing documentation in form of javadoc is not usually be enough. Instead NetBeans projects use document generated from answers to Architecture Questions as main entry point. The questions provide guidance to the module owner and help him investigate architecture of his own module. By answering them the owner is supposed to realize and discover various aspects that others might depend on and remove them or document them. Based on the detailed answers (especially the <code>&lt;api/&gt;</code> tag) we generate overview tables like the one shown below that are incorporated into the Javadoc.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Interface Name</th>
<th class="tableblock halign-left valign-top">Stability Classification</th>
<th class="tableblock halign-left valign-top">Specified in What Document?</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ProviderRegistrationRemoval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../API_Design/#devel" class="xref page">Under Development</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://bits.netbeans.org/dev/javadoc/org-openide-util/org/openide/util/doc-files/api.html#service-lookup">api.html</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LookupAPI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../API_Design/#official" class="xref page">Official</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://bits.netbeans.org/dev/javadoc/org-openide-util/org/openide/util/doc-files/api.html#lookup">[lookup</a>]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LookupSPI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../API_Design/#official" class="xref page">Official</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://bits.netbeans.org/dev/javadoc/org-openide-util/org/openide/util/lookup/package-frame.html">package-frame.html</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set of property APIs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Individual</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://bits.netbeans.org/dev/javadoc/org-openide-util/architecture-summary.html#group-property">table with definitions</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="Setting_up_the_infrastructure"><a class="anchor" href="#Setting_up_the_infrastructure"></a>Setting up the infrastructure</h3>
<div class="paragraph">
<p>If you write a NetBeans module you may want to setup the right layout of files
first.</p>
</div>
<div class="paragraph">
<p>The default infrastructure (<a href="https://github.com/apache/netbeans/blob/master/nbbuild/templates/common.xml">nbbuild/templates/common.xml</a>
and <a href="https://github.com/apache/netbeans/blob/master/nbbuild/templates/projectized.xml">nbbuild/templates/projectized.xml</a>)
let you do various tweaks, but usually it is easier to just use the expected
default layout (currently described in
<a href="https://github.com/apache/netbeans/blob/master/harness/apisupport.harness/release/README">harness/apisupport.harness/release/README</a>).</p>
</div>
<div class="paragraph">
<p>The documentation related files shall be organized as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">module_dir/src/                  - directory with your sources
module_dir/src/<strong>/package.html   - description of each package
module_dir/src/</strong>/doc-files/     - directory for special javadoc files
module_dir/arch.xml              - answers to architecture questions (see bellow)
module_dir/apichanges.xml        - description of the history of changes
module_dir/nbproject/project.xml - project file with dependencies and other informations</code></pre>
</div>
</div>
<div class="paragraph">
<p>The locations of arch.xml and apichanges.xml moreover has to be specified in
<a href="https://github.com/apache/netbeans/blob/master/ide/projectapi/nbproject/project.properties">nbproject/project.properties</a>
as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">javadoc.arch=${basedir}/arch.xml
javadoc.apichanges=${basedir}/apichanges.xml</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Writing_the_documentation"><a class="anchor" href="#Writing_the_documentation"></a>Writing the documentation</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Generate arch.xml</strong> - open your project in NetBeans and select &lt;em&gt;Generate Architecture Description&lt;/em&gt; from a context menu in projects tab. An empty, skeleton file will be generated. You can always reinvoke this target, if your answers are old, unanswered questions will be generated to the end of the file (the file shall stay well formated). When editing the file you can use &lt;b&gt;HTML tags&lt;/b&gt;. Some of the answers may have autogenerated default answers (currently arch-where and dep-nb) for cases where the information is already recorded anywhere else (for example in project.xml file). They may or may not be accurate. You can &lt;b&gt;accept&lt;/b&gt; the generated answer while surrounding it with your additional comments or you can &lt;b&gt;suppress&lt;/b&gt; it. Just include <code>&lt;defaultanswer generate='here' /&gt;</code> or <code>&lt;defaultanswer generate='none' /&gt;</code> in the answer of for your question. If you do not use the <code>&lt;defaultanswer/&gt;</code> element at all the default answer is &lt;b&gt;apended&lt;/b&gt; to your own answer. If you generate the defaultanswer, the source code for it is put into the comments in the html file, so if you are not satisified with the defaults, you can easily copy the output modify it and <code>&lt;defaultanswer generate='none' /&gt;</code>.</p>
</li>
<li>
<p><strong>Use &lt;api/&gt; tag</strong> - this tag is one of the most important in the architecture file. Each use of the &lt;api&amp;gt tags generates new item into a table of API interfaces. This is the main entry point to the documentation, so use the tag a lot. Not just for a description of javadoc interfaces, but for everything. Remember that an api is <a href="../API_Design/" class="xref page">any feature that someone else rely on</a>. Describe DTDs, properties, files or layers you read, formats or protocols that you communicate, etc. The <code>&lt;api/&gt;</code> tag syntax is described by its DTD and consists of:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>name</strong> - the name of the API, DTD or property</p>
</li>
<li>
<p><strong>group</strong> - the group that this API belongs. For example "property", "java", "dtd", "layer" and possibly others. As we are writing in java the attribute can be omitted and the default value is "java".</p>
</li>
<li>
<p><strong>type</strong> - you can either use someone else API ("import") or offer someone else dependency on your behavior ("export").</p>
</li>
<li>
<p><strong>category</strong> - shall contain a name from the enumeration (<code>official</code>, <code>stable</code>, <code>devel</code>, <code>third</code>, <code>standard</code>, <code>friend</code>, <code>private</code>, <code>deprecated</code>) in the meaning described <a href="../API_Design/#categories" class="xref page">here</a>.</p>
</li>
<li>
<p><strong>url</strong> - shall refer to a document describing the API, if available otherwise one can insert additional comments into the body between the <code>&lt;api&gt;</code> and <code>&lt;/api&gt;</code>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>An example is available here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;api name="identification"
     group="dtd"
     type="import or export"
     category="stable"
     url="where is the description"&gt;
  Possibly some additional description to the API which may be skipped.
&lt;/api&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The interfaces in the table are grouped by the group of the API and marked in
the HTML text as <code>&lt;a name="group-name" /&gt;</code> so a reference to these tables can
be made by using <code>&lt;a href="#group-name" /&gt;</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Use &lt;usecase&gt; tag</strong> - when answering "arch-usecases" question, surround the
paragraphs describing the way to use your API with <code>&lt;usecase name="&#8230;&#8203;"
id="&#8230;&#8203;"&gt;</code> and <code>&lt;/usecase&gt;</code>. That way your paragraph will get correct heading
in the <a href="https://bits.netbeans.org/dev/javadoc/usecases.html">How to use
certain NetBeans APIs</a> page.  . <strong>Answer "arch-what"</strong> - the first sentence of
your answer to "arch-what" is used as a short description in the
<a href="https://bits.netbeans.org/dev/javadoc/overview-summary.html">overview page</a>
so write it meaningfully. The full answer is then used in
<a href="https://bits.netbeans.org/dev/javadoc/overview-summary.html#def-api-Terminal%20Emulator">the
details</a> section, so again, make it real and useful description of your module.</p>
</li>
<li>
<p><strong>Link between documents</strong> - important part of documentation is the description
of context. It is not enough to say: "find this interfacein lookup". The reader
may not know what "lookup" is, so it is better to hyperlink to its definition.
You can use regular <code>&lt;a href&gt;</code> tag to link to other documents, for root of your
javadoc use <strong>@TOP@</strong>. So link to lookup would be
<code>@TOP@/org/openide/util/Lookup.html</code>.</p>
</li>
<li>
<p><strong>Link between classes</strong> - consider making the prose section part of
<code>package.html</code> file. Then you can use <strong>@{link classname}</strong> to address any class
of your module or from modules you depend on.</p>
</li>
<li>
<p><strong>Link between Javadoc sets</strong> - the context is often split between multiple
modules. To allow links between them, the root of each module javadoc can be
referred to as <strong>@org-netbeans-the-module-code-base-name@</strong>. So to link to lookup
from another module one can use
<code>@org-openide-util@/org/openide/util/Lookup.html</code> (the list of all currently
known module name substitutions is available at
<a href="https://github.com/apache/netbeans/blob/master/nbbuild/javadoctools/replaces.xml?content-type=text/plain">nbbuild/javadoctools/replaces.xml</a>).</p>
</li>
<li>
<p><strong>Use Relative Links</strong> - please remove as much as possible of usages of
non-relative links like
<a href="https://bits.netbeans.org/dev/javadoc/">https://bits.netbeans.org/dev/javadoc/</a>
and replace them with <strong>@TOP@</strong>, <strong>@org-netbeans-module-name@</strong> or <strong>@JDK@</strong> root
points. The javadoc is being scanned for allowed and disallowed links (defined
in
<a href="https://github.com/apache/netbeans/blob/master/nbbuild/javadoctools/disallowed-links.xml">nbbuild/javadoctools/disallowed-links.xml</a>)
and violations cause the build run from IDE to fail. It is generally not
recommended to refer to NetBeans website as the documentation shall be self
contained, but if you find a URL that makes sence, feel free to add it to the
<a href="https://github.com/apache/netbeans/blob/master/nbbuild/javadoctools/disallowed-links.xml">nbbuild/javadoctools/disallowed-links.xml</a>)
yourself. Btw. it seems better to use such pseudo root point than directly
relative link as for example content of package.html is usually duplicated into
more directories.</p>
</li>
<li>
<p><strong>Create apichanges</strong> - important part of any api is history of its changes.
That is why create and maintain the
<a href="https://github.com/apache/netbeans/blob/master/platform/openide.loaders/apichanges.xml">apichanges.xml</a>
as described in NetBeans <a href="../VersioningPolicy/" class="xref page">VersioningPolicy</a>. When you
refer to a class that no longer exists inside an API change, you can use <code>&lt;class &#8230;&#8203; link="no"/&gt;</code>.</p>
</li>
<li>
<p><strong>Validate your documentation</strong> - make sure the documentation format is correct
(links point to valid places, XML files has valid syntax, etc.). This can be
checked by invoking "Generate Javadoc" from the context menu. This builds the
Javadoc and (in addition to invoking <code>ant javadoc</code> from command line) also
checks for broken links and fails if there any - so make sure all Javadoc of
modules you are referring to has already been generated.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Publishing_Javadoc"><a class="anchor" href="#Publishing_Javadoc"></a>Publishing Javadoc</h3>
<div class="paragraph">
<p>All NetBeans project Javadoc sets are being daily regenerated and uploaded to
the central <a href="https://bits.netbeans.org/dev/javadoc/">NetBeans API List</a>.
When your module can successfully build javadoc as described in previous
section, it is time to consider adding it to the API list as well.</p>
</div>
<div class="paragraph">
<p>To add it, you have to modify
<a href="https://github.com/apache/netbeans/blob/master/nbbuild/build.properties">nbbuild/build.properties</a>
and add own module into <code>config.fixedmodules.javadoc</code> property.</p>
</div>
<div class="paragraph">
<p>Use</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ant -f nbbuild/build.xml check-module-configs
cvs -q diff nbbuild</code></pre>
</div>
</div>
<div class="paragraph">
<p>to review your changes. Then verify that everything works correctly by rebuilding all Javadoc:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ant -f nbbuild/build.xml build-javadoc`</code></pre>
</div>
</div>
<div class="paragraph">
<p>and if the build succeeds and really contains your module, prepare for
committing your changes into CVS (check in the new <code>moduleconfigs.txt</code> too).
Please note that three files in <code>nbbuild/javadoctools</code> shall be modified by
addition of references to your module root. Verify that the additions are sane
(e.g. contain no local references and look like the other lines in the files)
and then commit the modified
<a href="https://github.com/apache/netbeans/blob/master/nbbuild/build.properties">nbbuild/build.properties</a>,
<a href="https://github.com/apache/netbeans/blob/master/nbbuild/javadoctools/replaces.xml">nbbuild/javadoctools/replaces.xml</a>,
<a href="https://github.com/apache/netbeans/blob/master/nbbuild/javadoctools/links.xml">nbbuild/javadoctools/links.xml</a> and
<a href="https://github.com/apache/netbeans/blob/master/nbbuild/javadoctools/properties.xml">nbbuild/javadoctools/properties.xml</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Javadoc_Tips"><a class="anchor" href="#Javadoc_Tips"></a>Javadoc Tips</h3>
<div class="paragraph">
<p>By default the basic overview page is generated based on content of your
<a href="https://github.com/apache/netbeans/blob/master/apisupport/apisupport.project/arch.xml">arch.xml</a>,
<a href="https://github.com/apache/netbeans/blob/master/apisupport/apisupport.project/apichanges.xml">apichanges.xml</a> and
<a href="https://github.com/apache/netbeans/blob/master/apisupport/apisupport.project/nbproject/project.xml">project.xml</a>.</p>
</div>
<div class="paragraph">
<p>To see an example, check the <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-spi-palette/overview-summary.html">overview page of component palette api</a>,
that has the following structure:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Title and description</strong> is taken from the <code>arch.xml</code> 's answer to question <code>arch-overall</code>.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>List of javadoc packages</strong> is added by the default javadoc doclet.</p>
</li>
<li>
<p><strong>what is new section</strong> lists five recent api changes listed in <code>apichanges.xml</code>. Always add at least one change as this document is used to generate what is <a href="https://bits.netbeans.org/dev/javadoc/apichanges.html">new for the whole release</a>.</p>
</li>
<li>
<p><strong>List of usecases</strong> is taken from the <code>arch.xml</code> answer to <code>arch-usecases</code> question. It shall contain the main introduction into the meaning and usage of the API. Links to javadoc classes and methods are welcomed. Also notice that the answer contributed to <a href="https://bits.netbeans.org/dev/javadoc/usecases.html">global page with usecases</a> for all NetBeans APIs.</p>
</li>
<li>
<p><strong>Implementation details</strong> close the summary page. The contain answer to <code>arch-where</code> question, which shall contain link to NetBeans WebCVS with the module sources like <a href="https://github.com/apache/netbeans/blob/master/java/project/">https://github.com/apache/netbeans/blob/master/java/project/</a> for the <a href="https://github.com/apache/netbeans/blob/master/java/project/">java/project</a> module. Also an answer to <code>deploy-dependencies</code> arch question is generated so other modules know how to express dependency on this one.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>XXX</strong> need to describe: <code>{@link &#8230;&#8203;}</code>, what <code>package.html</code> can and cannot do, <code>@inheritDoc</code>, etc.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Reviewing_APIs"><a class="anchor" href="#Reviewing_APIs"></a>Reviewing APIs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to ensure good enough quality of produced APIs there is a service
provided to module writers - they can ask for an API review.</p>
</div>
<div class="paragraph">
<p>It is required that every new API will be reviewed prior to integration into
trunk. The exception from this rule is a <code>friend</code> API that is used only by
modules within the same cluster (the module has to explicitly list its
friends). In this case the review is recommended but not required.</p>
</div>
<div class="sect2">
<h3 id="Why"><a class="anchor" href="#Why"></a>Why?</h3>
<div class="paragraph">
<p>The short answer to question why you should be interested in an architecture review is "because it will be useful". Useful to you, as you discover new possible solutions to your problems or mistakes in your design, that might appear later, when integrated together with the whole system or even in later versions, when problems with maintainability and extensibility can show up. It will be useful to the whole system as it will be composed from more stable components integrated in better ways. It will be useful to whole your project as it will get better.</p>
</div>
<div class="paragraph">
<p>Nobody knows everything, but there is a lot of knowledge spread around. Architecture review is a way to get the people with pieces of knowledge together and cooperate in preventing us from repeating known mistakes and solving problems in the wrong way.</p>
</div>
<div class="paragraph">
<p>Ask for advice through architecture review. It cannot hurt and it is likely going to be useful.</p>
</div>
</div>
<div class="sect2">
<h3 id="What"><a class="anchor" href="#What"></a>What?</h3>
<div class="paragraph">
<p>It is unlikely that the review team will do some coding for you. It is also unlikely that the reviewers are going to become domain experts and help you understand your users or your requirements. This is your task and you have to prepare these materials for the reviewers, as it is very likely they will ask you about these questions in order to verify that your way of solving problems of your users is really the right one.</p>
</div>
<div class="paragraph">
<p>As a result of architecture review you can expect advices and help in identification of</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../API_Design/#api" class="xref page">apis</a> that someone else could depend on,</p>
</li>
<li>
<p>design or implementation that might have performance problems,</p>
</li>
<li>
<p>influences of your solution on existing products or</p>
</li>
<li>
<p>influences of other products on your solution in future,</p>
</li>
<li>
<p>solutions that are solving something different than was the original goal and</p>
</li>
<li>
<p>other projects or efforts going around that might help you in solving your problems.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>More or less expect "just" a high level help.</p>
</div>
</div>
<div class="sect2">
<h3 id="When"><a class="anchor" href="#When"></a>When?</h3>
<div class="paragraph">
<p>Whenever you need architecture advice or clarification and because the charter of the team is mostly high level, it is reasonable to come for the initial opinion  as soon as the architecture is visible so it can be reviewed. This usually means after answering the first (more general) set of the architecture questions which should be done before the actual start of implementation.&nbsp; At this point the high level advices are of some use, later it is always hard to change implementation that has been written.</p>
</div>
<div class="paragraph">
<p>Of course things are likely change during implementation, but the high level direction given during this <em>inception</em> stage are likely not going to be questioned then and only the newly discovered facts and differences from the original suggestions are going to be evaluated during the <em>before-commit</em> review.</p>
</div>
</div>
<div class="sect2">
<h3 id="How"><a class="anchor" href="#How"></a>How?</h3>
<div class="paragraph">
<p>For details about the process see the Architecture Review Steps document or check the list of all reviews.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Testing_APIs"><a class="anchor" href="#Testing_APIs"></a>Testing APIs</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Why_2"><a class="anchor" href="#Why_2"></a>Why?</h3>
<div class="paragraph">
<p>If an API is supposed to stand the test of time it has to preserve the functionality that others are using, it has to be backward compatible. Some tests for compatibility are easy, some require more work, but the testing is necessary otherwise nobody can guarantee quality when the API is evolving.</p>
</div>
<div class="paragraph">
<p><a href="#sigtests">Signature tests</a> are simple starting point, <a href="#unittests">unit tests</a> are very good for verifying the "contract" between a public API and its clients.  Some people claim that unit tests are poorly named since they imply that they are QA&#8217;s responsibility, but the development engineer is the one that really
benefits with several advantages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the tests provide an example of how the developer expects the API to be used.</p>
</li>
<li>
<p>Another is that when you run code coverage against a unit test suite, it shows surprising areas where there is code that isn&#8217;t necessary to support the API, so one can easily remove those extra bits</p>
</li>
<li>
<p>Another interesting feature of unit tests is support of arrogance (which is part of all good programmers). So here&#8217;s the best, most compelling reason for creating and relying on unit tests: you can much more confidently tell another engineer how wrong he is when he claims your code is breaking his!</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Read more about possible test patterns that we use and how they can contribute to improvements in quality of your module.</p>
</div>
</div>
<div class="sect2">
<h3 id="sigtests"><a class="anchor" href="#sigtests"></a>Signature Tests</h3>
<div class="paragraph">
<p>There is an automated verification task that is executed after every daily build that checks signature of classes and their fields and methods and sends reports to <a href="http://netbeans.org/projects/www/lists/api-changes/archive">api-changes</a> mailing list. Its reports contain both incompatible and compatible changes. So one gets notified not only when something is broken, but also in case of accidental API change like addition of a method by forgetting to make it
<code>private</code>.</p>
</div>
<div class="paragraph">
<p>By default the tests check all classes in <a href="../API_Design/#official" class="xref page">official</a> packages. E.g.
<code>org.openide.<strong></code>, <code>org.netbeans.api.</strong></code> and <code>org.netbeans.spi.*</code> and recently
also <code>org.netbeans.jmi</code> that are part of modules included in daily build of
standard IDE and also those that are daily uploaded to <em>Alpha Update Center</em>.</p>
</div>
<div class="paragraph">
<p>That is why in order to have these tests running on own module one
has to package the API into one of the official package (or
<a href="mailto:dev@netbeans.apache.org">request</a> his own package to be added into
the test) and make the module part alpha autoupdate configuration.</p>
</div>
<div class="paragraph">
<p>Any questions related to the sigtest framework can be either sent to
<a href="mailto:dev@netbeans.apache.org">the dev mailing list</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Unit_Tests"><a class="anchor" href="#Unit_Tests"></a>Unit Tests</h3>
<div class="paragraph">
<p>Very important verification of quality of an API is an automated test suite.
Most of NetBeans modules uses our test harness called
<a href="http://xtest.netbeans.org">xtest</a> which is based on
<a href="http://www.junit.org">JUnit</a> and enhances it with a few additional features
(tests should inherit from
<a href="https://github.com/apache/netbeans/blob/master/xtest/nbjunit/src/org/netbeans/junit/NbTestCase.java">NbTestCase</a>)
and configuration framework.</p>
</div>
<div class="paragraph">
<p>The simplest way how to make your module testable is to copy the <code>test</code>
directory from a small modules that already provide some tests and modify it
(e.g. <a href="http://www.netbeans.org/source/browse/html/test/">html</a>). The needed
changes include classpath modifications for compilation and execution in
<code>build.xml</code>, correcting the list of tests in <code>cfg-unit.xml</code> and of course the
placing your own tests into <code>unit/src</code> directory.</p>
</div>
<div class="paragraph">
<p>The last step is to include the suite in daily execution of unit tests. For that it is enough to modify the
<a href="https://github.com/apache/netbeans/blob/master/xtest/instance/master-config.xml">xtest/instance/master-config.xml</a> to include your module in the <strong>unit-nb</strong> test config. Verify that you have done everything correctly by running&lt;pre&gt;ant -f nbbuild/build.xml unit-validation&lt;/pre&gt;</p>
</div>
<div class="paragraph">
<p>and checking that your tests were successfully executed. Since then make sure that your module tests really run and pass, as since then other people start to use these tests to verify validity of their own commits. And you should not cause false alarms by problems in your code.</p>
</div>
<div class="paragraph">
<p>Also consider to subscribe to <a href="http://beetle.czech:8080/unittest/">notification framework</a> to get email notifications about automatic failures, if you can reach the URL.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Deploying_the_APIs"><a class="anchor" href="#Deploying_the_APIs"></a>Deploying the APIs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The important part in a <a href="../API_Design/#life" class="xref page">life cycle</a> of an API (as well as any other product) is the feedback from the users. In order to get it one should let your users know that there is an API and allow they to try it. For that purpose NetBeans use its "Alpha Update Center". Curious users may enable it and
that way be informed about latest development achievements.</p>
</div>
<div class="paragraph">
<p>To get a module into the "Alpha Update Center" one needs to make sure that the module&#8217;s <code>build.xml</code> file has <code>netbeans</code>, <code>clean</code>, and <code>nbm</code> targets that work in the normal way - normally this is accomplished trivially by making a projectized module and not overriding any targets from the default build harness.Then one can add entries for the new module to <code>nbbuild/build.properties</code> in the list <code>config.modules.daily-alpha-nbms</code>. Use&lt;pre&gt;
ant -f nbbuild/build.xml check-module-configs
cvs diff ide/golden/moduleconfigs.txt
&lt;/pre&gt;to review your changes (check in the new <code>moduleconfigs.txt</code> too).</p>
</div>
<div class="paragraph">
<p>One should test the NBM building process on local disk by making sure you have everything of interest checked out from CVS, opening <code>nbbuild</code> as a project in the IDE, and selecting <strong>Build Daily Alpha NBMs</strong> from its context menu. If something is messed up, mail gets sent to <code>broken_builds@netbeans.org</code> so it can be corrected. It is a good idea to notify
<a href="mailto:aumasters@netbeans.org?subject=FYI:%20adding/updating%20daily%20alpha%20NBMs"><code>aumasters@netbeans.org</code></a> too.</p>
</div>
<div class="sect2">
<h3 id="Publishing_New_Versions"><a class="anchor" href="#Publishing_New_Versions"></a>Publishing New Versions</h3>
<div class="paragraph">
<p>The content of "Alpha Update Center" is refreshed every day. The new version of module NBM is build from trunk and specification version in its module manifest is compared to the specification version of already uploaded module. If the new one is greater, the new version of the module replaces the old one.</p>
</div>
<div class="paragraph">
<p>This means that one can consciously and automatically upload new versions of an API from trunk to its users just by increasing the specification version in the CVS manifest file.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Stabilize_the_APIs"><a class="anchor" href="#Stabilize_the_APIs"></a>Stabilize the APIs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Usually an attempt to produce an API requires longer development time and it is useful to mark it as not being finished yet. NetBeans use a set of <a href="../API_Design/#life" class="xref page">stability categories</a> for that.</p>
</div>
<div class="paragraph">
<p>The expected scenario is that a module with an API starts its development in a CVS sandbox (<a href="http://www.netbeans.org/community/contribute/modules.html">contrib.netbeans.org</a>) or as a regular <strong>netbeans.org</strong> project (like <a href="http://xml.netbeans.org">xml.netbeans.org</a>) but is not part of  the regular build. Then it is offered on Alpha or Beta AutoUpdate (early access mode) and one can work on its finalization. As the module is not part of a stable release, it can be modified in incompatible way. As soon as one thinks that the API is fine and it satisfies <a href="http://qa.netbeans.org/processes/stabe_module_criteria_process.html">quality criteria</a>, it can be put on "Stable Update Center" or even find its way into standard distribution.</p>
</div>
<div class="sect2">
<h3 id="Official_APIs_Restrictions"><a class="anchor" href="#Official_APIs_Restrictions"></a>Official APIs Restrictions</h3>
<div class="paragraph">
<p>There is however one restriction. In order to make it easy for API users to find out what is stable API we have come with a simple description: "If a class is in <code>org.netbeans.api.<strong></code> or <code>org.netbeans.spi.</strong></code> packages, and is part of a stable release, then it is <a href="../API_Design/#stable" class="xref page">stable</a>". Such API is then called NetBeans <a href="../API_Design/#official" class="xref page">Official</a> API.</p>
</div>
<div class="paragraph">
<p>This rule is not meant to block anyone in producing APIs. One can always create an API in less prominent package (say <a href="https://bits.netbeans.org/dev/javadoc/#def-api-ant">org.netbeans.modules.ant.api</a>), publish it on netbeans.org as <a href="../API_Design/#stable" class="xref page">stable</a> one and use all the infrastructure for API development that is available. Moreover this approach is not as strict and allows the API to be part of a release even if it has not reached enough stability for unlimited amount of time.</p>
</div>
</div>
<div class="sect2">
<h3 id="Support_for_Early_Adoption"><a class="anchor" href="#Support_for_Early_Adoption"></a>Support for Early Adoption</h3>
<div class="paragraph">
<p>There can be situations when strictly following the "official namespace restriction" may cause a lot of troubles to early adopters and hurt NetBeans acceptance and competitiveness. Sometimes one needs to provide an API quickly, cannot guarantee that it is that <a href="../API_Design/#stable" class="xref page">stable</a>, but is strongly willing to stabilize it in &lt;em&gt;close future&lt;/em&gt;. In such case it may be acceptable to release the API in official packages, mark it as <a href="../API_Design/#devel" class="xref page">under development</a> (by warning in javadoc and special name of the module) and stabilize it in next release. In such cases it may be possible to allow a temporary release of an API <a href="../API_Design/" class="xref page">under development</a> in official namespace if following is guaranteed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the API is intended to become <a href="../API_Design/#stable" class="xref page">stable</a></p>
</li>
<li>
<p>making it <a href="../API_Design/#stable" class="xref page">stable</a> has been agreed to be the highest priority for next release</p>
</li>
<li>
<p>the API is of "nearly stable" quality - documented, tested, published and successfully reviewed</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The purpose of this "temporary release" is to encourage early adopters to test the APIs in real world and provide feedback to make them better. The publishers of the APIs in return promise to stabilize them soon and do that carefully considering the user impact. As a result NetBeans should be able to deliver important APIs as soon as possible, offer them to early adopters and increase API quality by incorporating the feedback. The adopters could be sure that the APIs will be stabilized in a given time frame and that they will not need to do major changes (like repackaging of all import statements, which was the current strategy) when the API becomes stable. In order to clearly communicate the exceptional state of the APIs, there should be a visible and non-ignorable stamp that such APIs are  <a href="../API_Design/#devel" class="xref page">under development</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the javadoc documentation headers shall contain visible warnings</p>
</li>
<li>
<p>the module name shall indicate that it is not stable yet. This shall be done using "/0" in module name, for example <code>org.netbeans.api.projects.ant/0</code>. As this string has to be used by every module writer to specify module dependency it forms appropriate warning. When stable version of the module is produced and is incompatible with the "/0" version, the name should change to <code>org.netbeans.api.projects.ant/2</code>. If the stable version remains compatible the name of the module should be <code>org.netbeans.api.projects.ant/1</code> and appropriate <a href="https://bits.netbeans.org/dev/javadoc/org-openide-modules/org/openide/modules/doc-files/api.html#refactoring">ModuleAutoDeps</a> shall be provided to upgrade dependencies of modules that used the "/0" version.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These suggestions shall ensure that the right balance is achieved between produces and consumers of any NetBeans API. It should however be stated that nobody shall be restricted by "Official namespace restriction" or bound by a time limit of the "temporary release", because if one does not want to create stable API, one does not have to. Contributing to <a href="../API_Design/#official" class="xref page">official</a> API set shall be a privilege as such effort requires more attention and increased amount of work that only those who really care are willing to invest.</p>
</div>
<div class="paragraph">
<p>Comments or corrections to <a href="mailto:dev@netbeans.apache.org">dev@netbeans.apache.org</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The content in this page was kindly donated by Oracle Corp. to the Apache Software Foundation.</p>
</div>
<div class="paragraph">
<p>that was last modified by NetBeans user Jtulach on 2014-01-06T11:46:32Z.</p>
</div>
<div class="paragraph">
<p>This document was automatically converted to the AsciiDoc format on 2020-03-12, and needs to be reviewed.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
      <section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        <li><a href="https://github.com/apache/netbeans-antora-wiki/edit/main/modules/ROOT/pages/wiki/APIDevelopment.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>
      </article>
    </div>
        <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="../../../../_/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/about">About</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/who">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/community">Community</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/mailing-lists">Mailing lists</a></li>
              <li><a href="../../../../front/main/community/committer">Becoming a committer</a></li>
              <li><a href="../../../../front/main/community/events">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/participate">Participate</a></h1>
            <ul>
              <li><a href="../../../../front/main/participate/submit-pr">Submitting Pull Requests</a></li>
              <li><a href="../../../../front/main/participate/report-issue">Reporting Issues</a></li>
              <li><a href="../../../../front/main/participate/#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/help">Get Help</a></h1>
            <ul>
              <li><a href="../../../../front/main/help/#documentation">Documentation</a></li>
              <li><a href="../../../../wiki/main/wiki">Wiki</a></li>
              <li><a href="../../../../front/main/help/#support">Community Support</a></li>
              <li><a href="../../../../front/main/help/commercial-support">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/download">Download</a></h1>
            <ul>
              <li><a href="../../../../front/main/download">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="../../../../front/main/download/#_daily_builds_and_building_from_source">Building from source</a></li>
              <li><a href="../../../../front/main/download/#_older_releases">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
      </div>
    </div>

    
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
    <script src="../../../../_/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../../../_/js/vendor/what-input.js"></script>
    <script src="../../../../_/js/vendor/foundation.min.js"></script>
    <script src="../../../../_/js/vendor/jquery.colorbox-min.js"></script>
    <script src="../../../../_/js/netbeans.js"></script>
    <script>
       $(function(){ $(document).foundation(); });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
      $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); });
    </script>
  </body>
</html>
