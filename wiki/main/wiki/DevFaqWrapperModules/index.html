<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>What is a library wrapper module and how do I use it?</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Apache NetBeans wiki DevFaqWrapperModules">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans wiki DevFaqWrapperModules">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="../../../../_/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    <link rel="stylesheet" href="../../../../_/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../_/images/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../_/images/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../_/images/fav/favicon-16x16.png">
    <link rel="manifest" href="../../../../_/images/fav/site.webmanifest">
    <link rel="mask-icon" href="../../../../_/images/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="../../../../_/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="../../../../index.html"><img src='../../../../_/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <input id="search-input" type="text" placeholder="Search the docs"> </li>
            <li> <a href="../../../../front/main/community">Community</a> </li>
            <li> <a href="../../../../front/main/participate">Participate</a> </li>
            <li> <a href="../../../../front/main/blogs">Blog</a></li>
            <li> <a href="../../../../front/main/help">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="../../../../front/main/download">Download</a> </li>
        </ul>
    </div>
</div>

    <!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="../../../../front/main/download/nb19">Download</a></p>
        </div>
    </div>
</section>
    <div class='grid-container main-content'>
      <article class="doc">
      <h1 class="sect1">What is a library wrapper module and how do I use it?</h1>
      <div class='aside' style='text-align: center; padding: 20px;'>
    <a href="../../../../wiki/main/wiki" title="Apache NetBeans WIKI">Apache NetBeans Wiki Index</a>
    <p><b>Note:</b> These pages are being reviewed.</p>
</div>
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_using_a_wrapper_module_for_an_existing_project">Using a wrapper module for an existing project</a>
<ul class="sectlevel2">
<li><a href="#_method_1">Method 1</a></li>
<li><a href="#_method_2">Method 2</a></li>
</ul>
</li>
<li><a href="#_how_do_i_include_native_libraries_so_or_dll_in_my_library_wrapper_module">How do I include native libraries (<code><strong>.so</code> or <code></strong>.dll</code>) in my library wrapper module?</a></li>
<li><a href="#_how_do_i_include_more_that_one_jar_in_my_library_wrapper_module">How do I include more that one jar in my library wrapper module?</a></li>
<li><a href="#_apache_migration_information">Apache Migration Information</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>If your module uses some external library,
you will probably use a wrapper module to make classes from that library available to your module at runtime.</p>
</div>
<div class="paragraph">
<p>A wrapper module is a module that contains no code;
really the only significant thing about it is its manifest, which does two significant things,
in addition to the standard module unique ID/version/etc.:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Has a <code>Class-Path</code> entry for one or more JARs, conventionally in the subdirectory <code>ext/</code> of the directory where the module is.</p>
</li>
<li>
<p>Declares <code>OpenIDE-Module-Public-Packages</code> followed by a list of the packages from the library that other modules should be able to use.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can use <strong>File &gt; New Project &gt; NetBeans Modules &gt; Library Wrapper Module</strong> to make a library wrapper.</p>
</div>
<div class="paragraph">
<p>So a wrapper module acts as a proxy to turn a library into a NB module.
Since you can&#8217;t modify the NetBeans classpath directly (<a href="../DevFaqNetBeansClasspath/" class="xref page">DevFaqNetBeansClasspath</a>),
nor would you want to,
this is the way you let your code use third-party libraries.
It serves the same function that running with <code>java -cp</code> or setting <code>CLASSPATH</code>
would do in a smaller Java application.</p>
</div>
<div class="paragraph">
<p>There are other options for packaging libraries described in <a href="../DevFaqWhenUseWrapperModule/" class="xref page">DevFaqWhenUseWrapperModule</a>.</p>
</div>
<div class="paragraph">
<p>If the above was confusing, read <a href="../DevFaqModuleDependencies/" class="xref page">DevFaqModuleDependencies</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_a_wrapper_module_for_an_existing_project"><a class="anchor" href="#_using_a_wrapper_module_for_an_existing_project"></a>Using a wrapper module for an existing project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you are developing the library yourself, but decide you want to
keep the library project separate from any NB module project, you can
do so. Just make a plain Java project for the library and build it;
and also create a library wrapper module from its JAR output. Here are
two ways to hook them up. The first modifies the project so that when
the project is built, it copies the jar to the wrapper module. The
second modifies the wrapper module so that the wrapper cleans, builds
and picks up the jar.</p>
</div>
<div class="sect2">
<h3 id="_method_1"><a class="anchor" href="#_method_1"></a>Method 1</h3>
<div class="paragraph">
<p>To hook them up (since the library wrapper module wizard just
copies the JAR you select), you can make the plain Java SE project
build into the wrapper. Say your Java SE project is in
e.g.<code>/src/suite/libs/foo</code> and your NBM wrapper is in
<code>/src/suite/foo-wrapper</code>; just edit
<code>/src/suite/libs/foo/nbproject/project.properties</code> to specify e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">dist.jar=../../foo-wrapper/release/modules/ext/foo.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you can just build the Java SE project and it will update the
wrapper&#8217;s JAR file. Also code completion on anything that compiles
against the foo library should "see" sources in
<code>/src/suite/libs/foo/src</code> (so long as the Java SE project is open).</p>
</div>
</div>
<div class="sect2">
<h3 id="_method_2"><a class="anchor" href="#_method_2"></a>Method 2</h3>
<div class="paragraph">
<p>Here&#8217;s how to have the wrapper module build/clean the Java SE project
and then pick
up the JAR from the Java SE project&#8217;s original location. This method provides
source association (even if the Java SE project is not open!). You
modify a few things in the wrapper project</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>project.xml</code>
adjust the <code>&lt;class-path-extension&gt;</code></p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><code>project.properties</code>
specify <code>extra.module.files</code></p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>remove the wrapper&#8217;s release directory</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p><code>build.xml</code>
to override the <code>release</code> target</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The following example demonstrates these steps.
<code>harness/README</code> gives the details.
See also , which would make it easier.</p>
</div>
<div class="sect3">
<h4 id="_example_using_method_2_having_the_wrapper_module_clean_and_build_the_project"><a class="anchor" href="#_example_using_method_2_having_the_wrapper_module_clean_and_build_the_project"></a>Example using method 2: Having the wrapper module clean and build the project</h4>
<div class="paragraph">
<p>With these changes to a wrapper module, build/clean on the
wrapper, or on the module suite that contains the wrapper, also does
build/clean on the project.</p>
</div>
<div class="paragraph">
<p>For this example, <code>my-wrapper</code> is a library wrapper module for the JAR file
produced by the regular Java project called <code>my-project</code>.
<code>my-project</code> and <code>my-wrapper</code> are in the same directory; this only
affects relative path specifications and is not a general requirement.
This example was created on NetBeans 5.5. If you have jars from
multiple projects in a wrapper, then this example is extended by using
<code>&lt;antsub&gt;</code> instead of <code>&lt;ant&gt;</code> and a <code>FileSet</code> in the <code>release</code>
target&#8217;s <code>&lt;copy&gt;</code> task.</p>
</div>
<div class="paragraph">
<p><em>Only the <code>my-wrapper</code> project needs modification.</em></p>
</div>
</div>
<div class="sect3">
<h4 id="_first"><a class="anchor" href="#_first"></a>First</h4>
<div class="paragraph">
<p>In <code>my-wrapper/nbproject/project.xml</code>, change
<code>&lt;class-path-extension&gt;&#8217;s `&lt;binary-origin&gt;</code> to
reference the jar created by <code>my-project</code>. This change gives
code completion with Javadoc and Go to Source when referencing
<code>my-project</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;binary-origin&gt;../my-project/dist/my-project.jar&lt;/binary-origin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>''Make sure a <code>../src</code> directory (relative to the JAR location) containing the corresponding sources of the
library exists if you want Go to Source functionality to work.''</p>
</div>
</div>
<div class="sect3">
<h4 id="_second"><a class="anchor" href="#_second"></a>Second</h4>
<div class="paragraph">
<p>In <code>my-wrapper/nbproject/project.properties</code> specify where
<code>my-project&#8217;s JAR file is installed in the suite&#8217;s cluster. This
puts `my-project.jar</code> in the wrapper&#8217;s NBM; it is needed since the
wrapper&#8217;s release directory is no longer used as a staging area.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">extra.module.files=modules/ext/my-project.jar</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_third"><a class="anchor" href="#_third"></a>Third</h4>
<div class="paragraph">
<p>Delete the directory <code>my-wrapper/release</code>. The original JAR file was
copied here when the wrapper was created.
<em>It will interfere if it is left around.</em></p>
</div>
</div>
<div class="sect3">
<h4 id="_fourth"><a class="anchor" href="#_fourth"></a>Fourth</h4>
<div class="paragraph">
<p>In <code>my-wrapper/build.xml</code> add the following.  Customize the first
two properties' <code>value=</code> to specify your project&#8217;s relative location and JAR.
The <code>release</code> target is replaced; now it builds <code>my-project</code> then
copies the JAR to the suite&#8217;s cluster.  The clean target
first cleans as usual, then cleans <code>my-project</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;property name="original.project.dir" value="../my-project"/&gt;
&lt;property name="original.project.jar"
          value="${original.project.dir}/dist/my-project.jar"/&gt;

&lt;target name="release"&gt;
    &lt;echo message="Building ${original.project.dir}"/&gt;
    &lt;ant dir="${original.project.dir}" usenativebasedir="true"
         target="jar" inheritall="false" inheritrefs="false"/&gt;
    &lt;echo message="Done building ${original.project.dir}"/&gt;

    &lt;copy todir="${cluster}/modules/ext"
          file="${original.project.jar}"/&gt;
&lt;/target&gt;


&lt;target name="clean" depends="projectized-common.clean"&gt;
    &lt;echo message="Cleaning ${original.project.dir}"/&gt;
    &lt;ant dir="${original.project.dir}" usenativebasedir="true"
         target="clean" inheritall="false" inheritrefs="false"/&gt;
    &lt;echo message="Done cleaning ${original.project.dir}"/&gt;
&lt;/target&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_do_i_include_native_libraries_so_or_dll_in_my_library_wrapper_module"><a class="anchor" href="#_how_do_i_include_native_libraries_so_or_dll_in_my_library_wrapper_module"></a>How do I include native libraries (<code><strong>.so</code> or <code></strong>.dll</code>) in my library wrapper module?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some libraries come with a native counterpart.
The current Library Wrapper wizard doesn&#8217;t cater to this.
As per the JNI section in <a href="https://bits.netbeans.org/dev/javadoc/org-openide-modules/org/openide/modules/doc-files/api.html#jni">this document</a>,
you simply need to create a <code>lib</code> directory under <code>&lt;my-wrapper&gt;/release/modules</code>
(which gets created by the wizard),
alongside the <code>ext</code> directory mentioned earlier in this document.
This directory is where you place your native libraries.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_do_i_include_more_that_one_jar_in_my_library_wrapper_module"><a class="anchor" href="#_how_do_i_include_more_that_one_jar_in_my_library_wrapper_module"></a>How do I include more that one jar in my library wrapper module?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With the library wrapper creation wizard it&#8217;s possible to choose more than one jar (use the CTRL key to select more than one file in the file dialog). Or enter absolute file paths divided by the path separator (e.g. ; for windows systems) into the (very small) file input field.</p>
</div>
<div class="paragraph">
<p>To add later more, use the project&#8217;s properties dialog.</p>
</div>
<div class="paragraph">
<p>Applies to: NetBeans 6.8 and later</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_apache_migration_information"><a class="anchor" href="#_apache_migration_information"></a>Apache Migration Information</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The content in this page was kindly donated by Oracle Corp. to the
Apache Software Foundation.</p>
</div>
<div class="paragraph">
<p>This page was exported from <a href="http://wiki.netbeans.org/DevFaqWrapperModules">http://wiki.netbeans.org/DevFaqWrapperModules</a> ,
that was last modified by NetBeans user Mwisnicki
on 2010-11-29T15:53:52Z.</p>
</div>
<div class="paragraph">
<p><strong>NOTE:</strong> This document was automatically converted to the AsciiDoc format on 2018-02-07, and needs to be reviewed.</p>
</div>
</div>
</div>
      <section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        <li><a href="https://github.com/apache/netbeans-antora-wiki/edit/main/modules/ROOT/pages/wiki/DevFaqWrapperModules.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>
      </article>
    </div>
        <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="../../../../_/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/about">About</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/who">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/community">Community</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/mailing-lists">Mailing lists</a></li>
              <li><a href="../../../../front/main/community/committer">Becoming a committer</a></li>
              <li><a href="../../../../front/main/community/events">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/participate">Participate</a></h1>
            <ul>
              <li><a href="../../../../front/main/participate/submit-pr">Submitting Pull Requests</a></li>
              <li><a href="../../../../front/main/participate/report-issue">Reporting Issues</a></li>
              <li><a href="../../../../front/main/participate/#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/help">Get Help</a></h1>
            <ul>
              <li><a href="../../../../front/main/help/#documentation">Documentation</a></li>
              <li><a href="../../../../wiki/main/wiki">Wiki</a></li>
              <li><a href="../../../../front/main/help/#support">Community Support</a></li>
              <li><a href="../../../../front/main/help/commercial-support">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/download">Download</a></h1>
            <ul>
              <li><a href="../../../../front/main/download">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="../../../../front/main/download/#_daily_builds_and_building_from_source">Building from source</a></li>
              <li><a href="../../../../front/main/download/#_older_releases">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
      </div>
    </div>

    
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
    <script src="../../../../_/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../../../_/js/vendor/what-input.js"></script>
    <script src="../../../../_/js/vendor/foundation.min.js"></script>
    <script src="../../../../_/js/vendor/jquery.colorbox-min.js"></script>
    <script src="../../../../_/js/netbeans.js"></script>
    <script>
       $(function(){ $(document).foundation(); });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
      $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); });
    </script>
  </body>
</html>
