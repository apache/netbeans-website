

<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>DevFaqWhatIsACluster</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Apache NetBeans wiki DevFaqWhatIsACluster">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans wiki DevFaqWhatIsACluster">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="/plugins/index.html">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate" style='margin-bottom: 2em'>
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Just released!</div>
            <h1>Apache NetBeans 9.0 Beta</h1>
            <p><a class="button success" href="/download/nb90/nb90-beta.html">Read more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content'>
            
<div class='aside' style='text-align: center; padding: 20px;'>
    <a href="/wiki/index.asciidoc" title="Apache NetBeans WIKI">Apache NetBeans Wiki Index</a>
    <p><b>Note:</b> These pages are being reviewed.</p>
</div>

            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel2">
<li><a href="#_what_is_a_cluster">What is a Cluster?</a></li>
<li><a href="#_apache_migration_information">Apache Migration Information</a></li>
</ul>
</div>
<div class="sect2">
<h3 id="_what_is_a_cluster">What is a Cluster?</h3>
<div class="paragraph">
<p>A cluster is a directory on disk.  A cluster contains <a href="DevFaqWhatIsAModule.asciidoc">modules</a>.  If you are writing a small NetBeans-based application, you probably do not need to be too concerned about clusters, although you may encounter the concept if you need to bundle additional files (native executables, for example) with a module.  Clusters become important if you are writing an extensible application (or multiple applications) of your own, where you are sharing some common modules between multiple applications.</p>
</div>
<div class="paragraph">
<p>The NetBeans launcher is passed a list of <em>cluster directories</em> on startup (see <code>$NB_HOME/etc/netbeans.clusters</code> in the IDE - the names in this file are relative paths from the IDE install directory - but they could also be absolute paths on disk).  The launcher looks for the modules (JAR files) which it should load in those &quot;cluster directories&quot;.  A NetBeans-based application typically consists of, at a minimum, the <code>platform</code> cluster and at least one application-specific cluster which contains modules that implement the business logic of that application.</p>
</div>
<div class="paragraph">
<p><em>Cluster directories are not necessarily all located under the same parent directory. They just happen to be in a typical NetBeans IDE install.</em></p>
</div>
<div class="paragraph">
<p>The NetBeans platform expects cluster directories to have a certain minimal structure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>There will be a <code>modules/</code> subdirectory containing module JAR files</p>
</li>
<li>
<p>There will be a <code>config/Modules/</code> subdirectory containing XML files that describe if/when each module should be enabled</p>
</li>
<li>
<p>There will be an <code>update_tracking/</code> subdirectory which contains metadata that allows the module system to determine if another version of each module is newer than, older than, or the same as the one in this cluster, using dates and checksums</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A cluster may contain additional files and folders as needed.  For example, it is common for modules which bundle 3rd-party libraries to include those JAR files in <code>modules/ext/</code>.  A cluster can contain whatever other files a module needs at runtime - for example, a module that installs a mobile phone emulator would probably include the native emulator executable.</p>
</div>
<div class="paragraph">
<p>To include additional files in your cluster, simply create a directory <code>release/</code> underneath your module&#8217;s project directory (<em>not</em> the <code>src/</code> directory for your module, but its parent folder - the one that <em>is</em> your module project).  Anything under <code>$PROJECT/release/</code> will be copied into your cluster by the build process.  To find the file at runtime, use <a href="http://bits.netbeans.org/dev/javadoc/org-openide-modules/org/openide/modules/InstalledFileLocator.html">InstalledFileLocator</a>, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">File emulatorBinary = InstalledFileLocator.getDefault().locate(
  "phone/bin/emulator.exe", "com.foo.my.module.code.name", false);</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_suites_vs_clusters">Suites vs. Clusters</h4>
<div class="paragraph">
<p>The <em>result of</em> compiling a module suite is typically a cluster. A cluster is something the runtime understands; a suite is a a project you develop.  For more information see <a href="DevFaqSuitesVsClusters.asciidoc">the suite-versus-cluster FAQ</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_why_have_clusters">Why Have Clusters?</h4>
<div class="paragraph">
<p>Here&#8217;s the history of clusters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Originally, NetBeans didn&#8217;t have "clusters"&mdash;there was just $NB_HOME/modules/, a bunch of JAR files, and some XML files saying what was enabled and what was not.  You looked up the installation directory using <code>System.getProperty(&quot;netbeans.home&quot;)</code></p>
</li>
<li>
<p>Modules are libraries - like any other library or DLL or <code>.so</code> used by applications - and it is normal for multiple applications to use the same copy of some library</p>
</li>
<li>
<p>Sun had a number of NetBeans-based applications. So might anyone creating a <a href="http://platform.netbeans.org">NetBeans Platform-based application</a>.  The platform is the same for all of them;  so are some other parts depending on what modules those applications use.</p>
</li>
<li>
<p>Some operating systems will <em>not allow</em> you to distribute native OS packages that will clutter up a user&#8217;s disk with extra copies of files the user already has.  The guidelines for Solaris, Debian, Ubuntu and other operating systems, all request or require that, if a library already exists on the target machine, you should use that library in-place, not install your own copy of it.  If we wanted Ubuntu and Debian users to be able to type <code>apt get netbeans</code>, we needed to solve this problem for the NetBeans IDE and other NetBeans-based applications.</p>
</li>
<li>
<p>The platform, and other parts of NetBeans therefore should be able to be shared among multiple applications and used by them at the same time.</p>
</li>
<li>
<p>Therefore, a NetBeans-based application should not assume that all of its parts ("clusters" of modules which interdepend) are underneath the same directory on disk&mdash;the platform might be in one directory, while the Java modules are someplace else entirely.</p>
</li>
<li>
<p>Before this, a typical way to find a file underneath a NetBeans install was new File(System.getProperty("netbeans.home")) to get the NB install directory;  then you could try to find a file somewhere under that directory.</p>
</li>
<li>
<p>If there is not necessarily an "install directory" at all, then you need something like <a href="http://bits.netbeans.org/dev/javadoc/org-openide-modules/org/openide/modules/InstalledFileLocator.html">InstalledFileLocator</a>, which knows about the cluster directories being used in the running application, and can look in all of them.  That is much cleaner than you having to write the code to figure out where all of those directories are and look in each one.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In short, while it is typical for all of the parts of an application to be under a common parent directory, that is neither required nor guaranteed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_what_does_a_cluster_look_like">What Does A Cluster Look Like?</h4>
<div class="paragraph">
<p>Here is the structure of the (comparatively small - it contains only one module) <code>ergonomics</code> cluster in a NetBeans 6.9 development build.</p>
</div>
<div class="paragraph">
<p>&lt;ul&gt;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml"> &lt;li&gt;`*ergonomics/* &lt;font color="gray"&gt;&lt;i&gt;The cluster directory&lt;/i&gt;&lt;/font&gt;`
 &lt;ul&gt;
   &lt;li&gt;`.lastModified &lt;font color="gray"&gt;&lt;i&gt;An empty file used as a timestamp so NetBeans can cache information about the cluster for performance, but know if its cache is out-of-date&lt;/i&gt;&lt;/font&gt;`&lt;/li&gt;
   &lt;li&gt;`*config/* &lt;font color="gray"&gt;&lt;i&gt;Contains metadata about module state&lt;/i&gt;&lt;/font&gt;`
   &lt;ul&gt;
     &lt;li&gt;`*Modules/* &lt;font color="gray"&gt;&lt;i&gt;Contains files which tell NetBeans some things about the module, mostly relating to if/when it should be enabled&lt;/i&gt;&lt;/font&gt;`
     &lt;ul&gt;
       &lt;li&gt;`org-netbeans-modules-ide-ergonomics.xml &lt;font color="gray"&gt;&lt;i&gt;Metadata about the Ergonomics module, whose code-name is org.netbeans.modules.ide.ergonomics&lt;/i&gt;&lt;/font&gt;`&lt;/li&gt;
     &lt;/ul&gt;&lt;/li&gt;
   &lt;/ul&gt;&lt;/li&gt;
   &lt;li&gt;`*modules/* &lt;font color="gray"&gt;&lt;i&gt;Directory that contains the actual (multiple) module JAR files and any 3rd-party libraries they include&lt;/i&gt;&lt;/font&gt;`
   &lt;ul&gt;
     &lt;li&gt;`org-netbeans-modules-ide-ergonomics.jar &lt;font color="gray"&gt;&lt;i&gt;This is the actual JAR file of the Ergonomics module's classes&lt;/i&gt;&lt;/font&gt;`&lt;/li&gt;
   &lt;/ul&gt;&lt;/li&gt;
   &lt;li&gt;`*update_tracking/* &lt;font color="gray"&gt;&lt;i&gt;Contains metadata about the module which is needed by Tools &gt; Plugins&lt;/i&gt;&lt;/font&gt;`
   &lt;ul&gt;
     &lt;li&gt;`org-netbeans-modules-ide-ergonomics.xml &lt;font color="gray"&gt;&lt;i&gt; Contains installation date, version and CRC checksums of module JAR and enablement data&lt;/i&gt;&lt;/font&gt;`&lt;/li&gt;
   &lt;/ul&gt;&lt;/li&gt;
 &lt;/ul&gt;&lt;/li&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>&lt;/ul&gt;</p>
</div>
<div class="paragraph">
<p>In a larger cluster, all of the child directories described above would contain one file for each module (i.e. module JAR file, etc.).</p>
</div>
<div class="sect4">
<h5 id="_metadata">Metadata</h5>
<div class="paragraph">
<p>The metadata in <code>$CLUSTER/config/Modules/$MODULE.xml</code> is fairly simple and straightforward - it enables the NetBeans module-system to determine when a module should be loaded:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&gt;
&lt;!DOCTYPE module PUBLIC &amp;quot;-//NetBeans//DTD Module Status 1.0//EN&amp;quot;
                        &amp;quot;link:http://www.netbeans.org/dtds/module-status-1_0.dtd&amp;quot;&amp;gt[http://www.netbeans.org/dtds/module-status-1_0.dtd&amp;amp;quot;&amp;amp;gt];
&lt;module name=&amp;quot;org.netbeans.modules.ide.ergonomics&amp;quot;&gt;
    &lt;param name=&amp;quot;autoload&amp;quot;&gt;false&lt;/param&gt;
    &lt;param name=&amp;quot;eager&amp;quot;&gt;false&lt;/param&gt;
    &lt;param name=&amp;quot;enabled&amp;quot;&gt;true&lt;/param&gt;
    &lt;param name=&amp;quot;jar&amp;quot;&gt;modules/org-netbeans-modules-ide-ergonomics.jar&lt;/param&gt;
    &lt;param name=&amp;quot;reloadable&amp;quot;&gt;false&lt;/param&gt;
&lt;/module&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similarly, the metadata in <code>$CLUSTER/update_tracking/$MODULE.xml</code> contains data about the module generated when it is installed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&gt;
&lt;module codename=&amp;quot;org.netbeans.modules.ide.ergonomics&amp;quot;&gt;
    &lt;module_version install_time=&amp;quot;1266357743218&amp;quot; last=&amp;quot;true&amp;quot;
                    origin=&amp;quot;installer&amp;quot; specification_version=&amp;quot;1.7&amp;quot;&gt;
        &lt;file crc=&amp;quot;3871934416&amp;quot;
              name=&amp;quot;config/Modules/org-netbeans-modules-ide-ergonomics.xml&amp;quot;/&gt;
        &lt;file crc=&amp;quot;1925067367&amp;quot;
              name=&amp;quot;modules/org-netbeans-modules-ide-ergonomics.jar&amp;quot;/&gt;
    &lt;/module_version&gt;
&lt;/module&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This data allows the <strong>Tools &gt; Plugins</strong> updater functionality to determine if the version of the module on an update server is a newer version than the copy which the user has installed, so that it can decide if it should offer an update.  More importantly, since this is done with checksums, it can do this check without sending data about what is on the user&#8217;s machine to a remote server, users privacy is maintained.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_clusters_and_compatibility">Clusters and Compatibility</h4>
<div class="paragraph">
<p>A <em>cluster</em> is a compatibility unit and has a version. It is set of modules that is developed by the same group of people, built and released at one time.</p>
</div>
<div class="paragraph">
<p>Most of the reasoning that lead to creation of the concept can be found in:
<a href="http://platform.netbeans.org/articles/installation.html">Installation Structure</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_apache_migration_information">Apache Migration Information</h3>
<div class="paragraph">
<p>The content in this page was kindly donated by Oracle Corp. to the
Apache Software Foundation.</p>
</div>
<div class="paragraph">
<p>This page was exported from <a href="http://wiki.netbeans.org/DevFaqWhatIsACluster">http://wiki.netbeans.org/DevFaqWhatIsACluster</a> ,
that was last modified by NetBeans user Jglick
on 2010-06-14T19:56:39Z.</p>
</div>
<div class="paragraph">
<p><strong>NOTE:</strong> This document was automatically converted to the AsciiDoc format on 2018-02-07, and needs to be reviewed.</p>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/incubator-netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://netbeans.signup.team/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/incubator-netbeans-website/blob/master/netbeans.apache.org/src/content/wiki/DevFaqWhatIsACluster.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in github.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell'>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1>About</h1>
                <ul>
                    <li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="http://www.apache.org/security/">Security</a></li>
                    <li><a href="http://incubator.apache.org/projects/netbeans.html">Incubation Status</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a commiter</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="/community/who.html">Who is who</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/netcat.html">NetCAT - Community Acceptance Testing</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/index.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html#releases">Releases</a></li>
                    <ul>
                        <li><a href="/download/nb90/index.html">Apache NetBeans 9.0 (beta)</a></li>
                    </ul>
                    <li><a href="/plugins/index.html">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2018 the <a href="//www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the <a href="//www.apache.org/licenses/">Apache Software License, version 2.0.</a></p>
        <p><a href="https://incubator.apache.org/" alt="Apache Incubator"><img src='/images/incubator_feather_egg_logo_bw_crop.png' title='Apache Incubator'></img></a></p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache NetBeans is an effort undergoing incubation at The Apache Software Foundation</a> (ASF).</p>
            <p>Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner
            consistent with other successful ASF projects.</p>
            <p>While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the Apache Software Foundation.</p>
            <p>Apache Incubator, Apache, the Apache feather logo, and the Apache Incubator project logo are trademarks of <a href="//www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>


        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
    </body>
</html>
