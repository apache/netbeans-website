
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans IDE 中的标注处理程序支持，第二部分：在 IDE 中使用自己的定制标注处理程序</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans IDE 中的标注处理程序支持，第二部分：在 IDE 中使用自己的定制标注处理程序 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, NetBeans IDE 中的标注处理程序支持，第二部分：在 IDE 中使用自己的定制标注处理程序">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">NetBeans IDE 中的标注处理程序支持，第二部分：在 IDE 中使用自己的定制标注处理程序</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/java/annotations-custom_zh_CN.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_定义标注与创建标注处理程序">定义标注与创建标注处理程序</a></li>
<li><a href="#_在_ide_中使用标注处理程序">在 IDE 中使用标注处理程序</a></li>
<li><a href="#_另请参见">另请参见</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><em>编写人：Jesse Glick，编写和维护人：Irina Filippova</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>在 IDE 中使用自己的定制标注处理程序</strong></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../images_www/articles/71/netbeans-stamp-71-72-73.png" alt="netbeans stamp 71 72 73">
</div>
<div class="title">Figure 1. 此页上的内容适用于 NetBeans IDE 7.0、7.1、7.2 和 7.3</div>
</div>
<div class="paragraph">
<p>在本教程的此部分，您会了解到如何在 IDE 中将自创的定制标注处理程序添加到项目中。本教程的目的并不在于教授如何编写标注处理程序。它解释如何将其添加到 NetBeans IDE 项目中。</p>
</div>
<div class="paragraph">
<p>此部分使用的样例应用程序由 Jesse Glick 创建，并作为早期发行版本的 IDE 的<a href="http://wiki.netbeans.org/FaqApt">常见问题解答条目</a>发布。</p>
</div>
<div class="paragraph">
<p>用作示例的标注处理程序为标注类生成父类。生成的父类还包含从标注类中调用的方法。请按照下面有关如何创建定制标注处理程序并将其添加到 IDE 项目的说明进行操作。</p>
</div>
<div class="paragraph">
<p><strong>要学完本教程，您需要具备以下软件和资源。</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">软件或资源</th>
<th class="tableblock halign-left valign-top">要求的版本</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7.0, 7.1, 7.2, 7.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java 开发工具包 (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">版本 6 或 7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://code.google.com/p/projectlombok/downloads/list">lombok.jar</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">v1.12.4 或更新版本</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_定义标注与创建标注处理程序">定义标注与创建标注处理程序</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在本练习中，将创建类库项目。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>选择 "File"（文件）&gt; "New Project"（新建项目），然后在 "Java" 类别中选择 "Java Class Library"（Java 类库）项目类型。单击 "Next"（下一步）。</p>
</li>
<li>
<p>键入 * <code>AnnProcessor</code> * 作为项目名称，并为项目指定位置。单击 "Finish"（完成）。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>单击 "Finish"（完成），此时 IDE 将创建类库项目，并在 "Projects"（项目）窗口中列出该项目。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在 "Projects"（项目）窗口中，右键单击 AnnProcessor 项目节点，然后选择 "Properties"（属性）。</p>
</li>
<li>
<p>在 "Sources"（源）类别中，确认将 JDK 6 或 JDK 7 指定为源代码/二进制格式。</p>
</li>
<li>
<p>选择 "Libraries"（库）标签，然后确认将 Java 平台设置为 "JDK 1.6" 或 "JDK 1.7"。单击 "OK"（确定），以关闭 "Project Properties"（项目属性）窗口。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>在本练习中，将创建两个 Java 包，并在每个包中创建一个 Java 类。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>右键单击 "AnnProcessor" 项目下的 "Source Packages"（源包）节点，然后选择 "New"（新建）&gt; "Java Package"（Java 包）。</p>
</li>
<li>
<p>为 "Package Name"（包名）键入 * <code>ann</code> *，然后单击 "Finish"（完成）创建新的 Java 包。</p>
</li>
<li>
<p>重复执行前面的两个步骤，以创建一个名为 * <code>proc</code> * 的 Java 包。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>创建了这两个 Java 包后，项目结构应类似于下图。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/packages.png" alt="packages">
</div>
<div class="title">Figure 2. 标注处理程序项目的结构。</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>右键单击  <code>ann</code>  Java 包，然后选择 "New"（新建）&gt; "Java Class"（Java 类）。</p>
</li>
<li>
<p>键入 * <code>Handleable</code> * 作为类名。单击 "Finish"（完成）。</p>
</li>
<li>
<p>修改新的  <code>Handleable.java</code>  文件，进行如下更改。保存该文件。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package ann;

public *@interface* Handleable {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>这是一种标注声明方式，与接口声明十分类似。区别在于  <code>at</code>  符号 (@) 必须置于  <code>interface</code>  关键字之前。此标注名为  <code>Handleable</code> 。</p>
</div>
<div class="paragraph">
<p>*其他信息。*在标注声明中，还可以指定其他参数，例如，可以标注哪些类型的元素（类或方法等）。可以通过为类添加  <code>@Target(value = {ElementType.TYPE})</code>  和添加  <code>@Target(value = {ElementType.METHOD})</code>  来实现此目的。因此，标注声明使用 <em>meta-annotations</em> 标注自身。</p>
</div>
<div class="paragraph">
<p>现在，您需要为标注处理程序添加处理  <code>Handleable</code>  标注的代码。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>右键单击 * <code>proc</code> * Java 包，然后选择 "New"（新建）&gt; "Java Class"（Java 类）。</p>
</li>
<li>
<p>键入 * <code>HandleableProcessor</code> * 作为类名。单击 "Finish"（完成）。</p>
</li>
<li>
<p>修改  <code>HandleableProcessor.java</code>  类，以添加如下代码。保存所做的更改。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>注：</strong> <code>@SupportedSourceVersion</code>  的值（<strong>粗体</strong>）将依赖于您正在使用的 JDK 版本，将为  <code>(SourceVersion.RELEASE_7)</code>  或  <code>(SourceVersion.RELEASE_6)</code> 。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package proc;

import ann.Handleable;
import java.io.IOException;
import java.io.PrintWriter;
import java.io.Writer;
import java.util.Set;
import javax.annotation.processing.AbstractProcessor;
import javax.annotation.processing.RoundEnvironment;
import javax.annotation.processing.SupportedAnnotationTypes;
import javax.annotation.processing.SupportedSourceVersion;
import javax.lang.model.SourceVersion;
import javax.lang.model.element.Element;
import javax.lang.model.element.ElementKind;
import javax.lang.model.element.TypeElement;
import javax.lang.model.type.TypeMirror;
import javax.tools.Diagnostic;
import javax.tools.JavaFileObject;

@SupportedAnnotationTypes("ann.Handleable")
@SupportedSourceVersion(*SourceVersion.RELEASE_7*)
public class HandleableProcessor extends AbstractProcessor {

    /** public for ServiceLoader */
    public HandleableProcessor() {
    }

    public boolean process(Set&lt;? extends TypeElement&gt; annotations,
            RoundEnvironment roundEnv) {
        for (Element e : roundEnv.getElementsAnnotatedWith(Handleable.class)) {
            if (e.getKind() != ElementKind.FIELD) {
                processingEnv.getMessager().printMessage(
                        Diagnostic.Kind.WARNING,
                        "Not a field", e);
                continue;
            }
            String name = capitalize(e.getSimpleName().toString());
            TypeElement clazz = (TypeElement) e.getEnclosingElement();
            try {
                JavaFileObject f = processingEnv.getFiler().
                        createSourceFile(clazz.getQualifiedName() + "Extras");
                processingEnv.getMessager().printMessage(Diagnostic.Kind.NOTE,
                        "Creating " + f.toUri());
                Writer w = f.openWriter();
                try {
                    PrintWriter pw = new PrintWriter(w);
                    pw.println("package "
                            + clazz.getEnclosingElement().getSimpleName() + ";");
                    pw.println("public abstract class "
                            + clazz.getSimpleName() + "Extras {");
                    pw.println("    protected " + clazz.getSimpleName()
                            + "Extras() {}");
                    TypeMirror type = e.asType();
                    pw.println("    /** Handle something. */");
                    pw.println("    protected final void handle" + name
                            + "(" + type + " value) {");
                    pw.println("        System.out.println(value);");
                    pw.println("    }");
                    pw.println("}");
                    pw.flush();
                } finally {
                    w.close();
                }
            } catch (IOException x) {
                processingEnv.getMessager().printMessage(Diagnostic.Kind.ERROR,
                        x.toString());
            }
        }
        return true;
    }

    private static String capitalize(String name) {
        char[] c = name.toCharArray();
        c[0] = Character.toUpperCase(c[0]);
        return new String(c);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>让我们详细了解构成标注处理程序代码的主要部分（请注意，为方便起见，我们仅提供了部分代码）。</p>
</div>
<div class="paragraph">
<p>首先，您指定标注处理程序支持的标注类型（通过  <code>@SupportedAnnotationTypes</code> ）以及支持的源文件版本（通过  <code>@SupportedSourceVersion</code> ）；在本示例中，版本为 JDK 6：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@SupportedAnnotationTypes("ann.Handleable")
@SupportedSourceVersion(SourceVersion.RELEASE_6)</code></pre>
</div>
</div>
<div class="paragraph">
<p>然后，为处理程序声明一个公共类，以扩展  <code>javax.annotation.processing</code>  包中的  <code>AbstractProcessor</code>  类。 <code>AbstractProcessor</code>  是具体标注处理程序的标准超类，它包含处理标注所需的方法。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class HandleableProcessor extends AbstractProcessor {
...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>现在，您需要为该类提供一个公共构造函数。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class HandleableProcessor extends AbstractProcessor {
*    public HandleableProcessor() {
    }*
...

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>然后，调用父  <code>AbstractProcessor</code>  类的  <code>process()</code>  方法。通过此方法，提供可用于处理的标注。此外，此方法包含有关处理舍入的信息。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class HandleableProcessor extends AbstractProcessor {*
   *...
*     public boolean process(Set&lt;? extends TypeElement&gt; annotations,
            RoundEnvironment roundEnv) {
     ...
     }
*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>标注处理程序的逻辑包含在  <code>AbstractProcessor</code>  类的  <code>process()</code>  方法中。注：通过  <code>AbstractProcessor</code> ，还可以访问  <code>ProcessingEnvironment</code>  接口，该接口允许标注处理程序使用多个有用的工具，如 Filer（使标注处理程序可以创建新文件的 Filer 处理程序）和 Messager（标注处理程序报告错误的一种方式）。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class HandleableProcessor extends AbstractProcessor {*
   *...
     public boolean process(Set&lt;? extends TypeElement&gt; annotations,
            RoundEnvironment roundEnv) {//For each element annotated with the Handleable annotation
            *for (Element e : roundEnv.getElementsAnnotatedWith(Handleable.class)) {

*//Check if the type of the annotated element is not a field. If yes, return a warning*.
if (e.getKind() != ElementKind.FIELD) {
processingEnv.getMessager().printMessage(
Diagnostic.Kind.WARNING,
"Not a field", e);
continue;
}
            *//Define the following variables: name and clazz*.**
String name = capitalize(e.getSimpleName().toString());
TypeElement clazz = (TypeElement) e.getEnclosingElement();
*//Generate a source file with a specified class name. *
            try {
JavaFileObject f = processingEnv.getFiler().
createSourceFile(clazz.getQualifiedName() + "Extras");
processingEnv.getMessager().printMessage(Diagnostic.Kind.NOTE,
"Creating " + f.toUri());
Writer w = f.openWriter();
*//Add the content to the newly generated file*.
                    try {
PrintWriter pw = new PrintWriter(w);
pw.println("package "
+ clazz.getEnclosingElement().getSimpleName() + ";");
pw.println("public abstract class "
+ clazz.getSimpleName() + "Extras {");
pw.println("    protected " + clazz.getSimpleName()
+ "Extras() {}");
TypeMirror type = e.asType();
pw.println("    /** Handle something. */");
pw.println("    protected final void handle" + name
+ "(" + type + " value) {");
pw.println("        System.out.println(value);");
pw.println("    }");
pw.println("}");
pw.flush();
} finally {
w.close();
}
} catch (IOException x) {
processingEnv.getMessager().printMessage(Diagnostic.Kind.ERROR,
x.toString());
}
}*return true;
    * }*
...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>此代码的最后一段代码块声明了  <code>capitalize</code>  方法，该方法用于大写标注的元素的名称。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class HandleableProcessor extends AbstractProcessor {*
   *...*

  private static String capitalize(String name) {
char[] c = name.toCharArray();
c[0] = Character.toUpperCase(c[0]);
return new String(c);
}
*}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>右键单击  <code>AnnProcessor</code>  项目，然后选择 "Build"（构建）以构建项目。</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_在_ide_中使用标注处理程序">在 IDE 中使用标注处理程序</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在本部分中，将创建一个 Java 应用程序项目，以便在其中使用标注处理程序。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>选择 "File"（文件）&gt; "New Project"（新建项目），然后在 "Java" 类别中选择 "Java Application"（Java 应用程序）项目类型。单击 "Next"（下一步）。</p>
</li>
<li>
<p>在 "Name and Location"（名称和位置）页中，键入 * <code>Demo</code> * 作为项目名称，并指定项目位置。</p>
</li>
<li>
<p>在 "Create Main Class"（创建主类）字段中，键入 * <code>demo.Main</code> *。单击 "Finish"（完成）。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/demo-project-wizard.png" alt="demo project wizard" width="Demo"（演示）项目。"">
</div>
<div class="title">Figure 3. 在新建项目向导中创建 </div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>打开 "Project Properties"（项目属性）窗口，确认在 "Sources"（源）面板中选择 "JDK 6" 或 "JDK 7" 作为源代码/二进制格式，然后确认在 "Libraries"（库）面板中将 Java 平台设置为 "JDK 1.6" 或 "JDK 1.7"。</p>
</li>
<li>
<p>修改  <code>Main.java</code>  类，以添加如下代码。保存所做的更改。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package demo;

*import ann.Handleable;*

public class Main *extends MainExtras* {

    *@Handleable
    private String stuff;*

    *public static void main(String[] args) {
        new Main().handleStuff("hello");
    }*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>此代码包含以下元素：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>定制标注处理程序  <code>ann.Handleable</code>  的 import 语句</p>
</li>
<li>
<p>扩展  <code>MainExtras</code>  类（ <code>MainExtras</code>  应由标注处理程序在编译期间生成）的公共类  <code>Main</code></p>
</li>
<li>
<p>一个名为  <code>stuff</code>  的私有字段，它使用  <code>@Handleable</code>  标注进行标注</p>
</li>
<li>
<p>调用  <code>handleStuff</code>  方法的  <code>main</code>  方法，后者在自动生成的  <code>MainExtras</code>  类中声明</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>在这个简单示例中， <code>handleStuff</code>  方法仅输出当前值。可以修改此方法以执行其他任务。</p>
</div>
<div class="paragraph">
<p>保存  <code>Main.java</code>  代码后，您会看到 IDE 报告多个编译错误。这是由于标注处理程序尚未添加到项目中。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在 "Projects"（项目）窗口中，右键单击  <code>Demo</code>  项目节点，选择 "Properties"（属性），然后在 "Project Properties"（项目属性）窗口中选择 "Libraries"（库）类别。</p>
</li>
<li>
<p>在 "Compile"（编译）标签中，单击 "Add Project"（添加项目），然后找到  <code>AnnProcessor</code>  项目。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/demo-properties-compile.png" alt="demo properties compile" width="Properties"（属性）窗口 "Libraries"（库）类别中的 "Compile"（编译）标签"">
</div>
<div class="title">Figure 4. 项目的 </div>
</div>
<div class="paragraph">
<p>"Compile"（编译）标签对应于 <a href="http://download.oracle.com/javase/6/docs/technotes/tools/windows/javac.html#options">Java 编译器</a>的  <code>-classpath</code>  选项。由于标注处理程序是包含标注定义和标注处理程序的单一 JAR 文件，因此，应在 "Compile"（编译）标签中将其添加到项目的类路径中。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在 "Project Properties"（项目属性）窗口中选择 "Compiling"（编译）类别，然后选中 "Enable Annotation Processing"（启用标注处理）和 "Enable Annotation Processing in Editor"（在编辑器中启用标注处理）复选框。</p>
</li>
<li>
<p>单击 "Annotation Processors"（标注处理程序）文本区域旁边的 "Add"（添加）按钮，然后在 "Annotation Processor FQN"（标注处理程序 FQN）字段中键入 * <code>proc.HandleableProcessor</code> * 以指定要运行的标注处理程序。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/demo-processor-fqn.png" alt="demo processor fqn" width="Annotation Processor FQN"（标注处理程序 FQN）对话框"">
</div>
<div class="title">Figure 5. </div>
</div>
<div class="paragraph">
<p>"Project Properties"（项目属性）窗口中的 "Compiling"（编译）类别应如下图所示。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/demo-properties-compiling.png" alt="demo properties compiling" width="Properties"（项目属性）窗口中的 "Compiling"（编译）类别"">
</div>
<div class="title">Figure 6. 项目 </div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在 "Properties"（属性）窗口中单击 "OK"（确定）。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>*注：*在  <code>Main.java</code>  文件中，仍可能会看到一些编译错误。这是由于 IDE 仍然找不到声明  <code>handleStuff</code>  方法的  <code>MainExtras.java</code>  文件。首次构建 Demo 项目后，将构建  <code>MainExtras.java</code>  文件。如果为项目启用了 "Compile On Save"（在保存时编译）功能，则在保存  <code>Main.java</code>  时，IDE 将编译项目。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>右键单击 "Demo" 项目，然后选择 "Build"（构建）。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>在构建项目后，如果在 "Projects"（项目）窗口中查看该项目，则可以看到包含  <code>demo/MainExtras.java</code>  文件的新  <code>Generated Sources</code> （构建的源文件）节点。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/demo-generated-sources.png" alt="demo generated sources" width="Generated Sources"（生成的源文件）的 "Projects"（项目）窗口"">
</div>
<div class="title">Figure 7. 带有 </div>
</div>
<div class="paragraph">
<p>如果您查看生成的  <code>MainExtras.java</code>  文件内容，则可以看到标注处理程序生成了包含  <code>handleStuff</code>  方法的  <code>MainExtras</code>  类。 <code>handleStuff</code>  方法是通过标注的  <code>Main.java</code>  文件调用的。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package demo;
public abstract class MainExtras {
    protected MainExtras() {}
    /** Handle something. */
    protected final void handleStuff(java.lang.String value) {
        System.out.println(value);
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>右键单击 "Demo" 项目，然后选择 "Run"（运行）。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>单击 "Run"（运行）时，"Output"（输出）窗口中应显示以下内容。Demo 项目编译并打印该信息。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/demo-run.png" alt="demo run" width="Generated Sources"（生成的源文件）的 "Projects"（项目）窗口"">
</div>
<div class="title">Figure 8. 带有 </div>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Using%20the%20Annotation%20Processors%20Support%20in%20NetBeans%20IDE">发送有关此教程的反馈意见</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_另请参见">另请参见</h2>
<div class="sectionbody">
<div class="paragraph">
<p>有关 Java 应用程序中标注的详细信息，请参见以下资源：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Java SE 文档 - <a href="http://download.oracle.com/javase/6/docs/technotes/guides/language/annotations.html">标注</a></p>
</li>
<li>
<p>Java SE 教程 - <a href="http://download.oracle.com/javase/tutorial/java/javaOO/annotations.html">标注</a></p>
</li>
<li>
<p><a href="http://download.oracle.com/javase/6/docs/technotes/tools/windows/javac.html#processing">Java 编译器：标注处理选项</a></p>
</li>
<li>
<p><a href="http://blogs.oracle.com/darcy/">Joseph D. Darcy 的博客</a> - 来自 JSR-269 规范负责人的有用提示</p>
</li>
</ul>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/java/annotations-custom_zh_CN.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
