
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Java SwingアプリケーションでのHibernateの使用</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Java SwingアプリケーションでのHibernateの使用 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Java SwingアプリケーションでのHibernateの使用">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans (incubating)</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="/plugins/index.html">Plugins</a> </li>
            <li> <a href="/download/nb100/nb100.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Just released!</div>
            <h1 syle='font-size: 2rem'>Apache NetBeans 10.0</h1>
            <p><a class="button success" href="/download/nb100/nb100.html">Read more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">Java SwingアプリケーションでのHibernateの使用</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. You can <a href="/kb/docs/contributing.html">help us review it.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_データベースの作成">データベースの作成</a></li>
<li><a href="#_java_swingアプリケーション_プロジェクトの作成">Java Swingアプリケーション・プロジェクトの作成</a></li>
<li><a href="#_プロジェクトへのhibernateサポートの追加">プロジェクトへのHibernateサポートの追加</a>
<ul class="sectlevel2">
<li><a href="#_hibernate構成ファイルの作成">Hibernate構成ファイルの作成</a></li>
<li><a href="#_hibernate構成ファイルの変更">Hibernate構成ファイルの変更</a></li>
<li><a href="#_code_hibernateutil_java_code_ヘルパー_ファイルの作成"><code>HibernateUtil.java</code> ヘルパー・ファイルの作成</a></li>
</ul>
</li>
<li><a href="#_hibernateのマッピング_ファイルおよびjavaクラスの生成">Hibernateのマッピング・ファイルおよびJavaクラスの生成</a>
<ul class="sectlevel2">
<li><a href="#_リバース_エンジニアリング_ファイルの作成">リバース・エンジニアリング・ファイルの作成</a></li>
<li><a href="#_データベースからのhibernateのマッピング_ファイルとpojoの作成">データベースからのHibernateのマッピング・ファイルとPOJOの作成</a></li>
</ul>
</li>
<li><a href="#_アプリケーションguiの作成">アプリケーションGUIの作成</a>
<ul class="sectlevel2">
<li><a href="#_jframeフォームの作成">JFrameフォームの作成</a></li>
<li><a href="#_要素のフォームへの追加">要素のフォームへの追加</a></li>
</ul>
</li>
<li><a href="#_hql問合せエディタでの問合せの作成">HQL問合せエディタでの問合せの作成</a></li>
<li><a href="#_問合せのフォームへの追加">問合せのフォームへの追加</a></li>
<li><a href="#_プロジェクトの実行">プロジェクトの実行</a>
<ul class="sectlevel2">
<li><a href="#_ソリューション_プロジェクトのダウンロード">ソリューション・プロジェクトのダウンロード</a></li>
</ul>
</li>
<li><a href="#_個別のpojoおよびマッピング_ファイルの作成">個別のPOJOおよびマッピング・ファイルの作成</a></li>
<li><a href="#_関連項目">関連項目</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>このチュートリアルでは、NetBeans IDEを使用して、データベースからのデータを表示するJava Swingアプリケーションを作成し、デプロイします。このアプリケーションではHibernateフレームワークを持続性レイヤーとして使用し、リレーショナル・データベースからPOJO (plain old Java objects)を取得します。</p>
</div>
<div class="paragraph">
<p>Hibernateは、ORM (object relational mapping)のためのツールを提供するフレームワークです。このチュートリアルでは、IDEに含まれるHibernateフレームワークのサポートと、必要なHibernateファイルを作成するためのウィザードの使用方法を示します。Javaオブジェクトを作成し、Hibernateを使用するようにアプリケーションを構成した後、データを検索および表示するGUIインタフェースを作成します。</p>
</div>
<div class="paragraph">
<p>このチュートリアルでビルドするアプリケーションは、<a href="../web/hibernate-webapp.html">DVDストアWebアプリケーション</a>の関係管理アプリケーションです。このチュートリアルでは、俳優のプロ・フィールを姓または名の一致に基づいて問い合せるアプリケーションの作成方法を取り上げます。必要に応じて、映画の詳細の問合せ、項目の追加、更新、削除ができるように、アプリケーションを拡張することもできます。このチュートリアルでは、MySQLデータベースとSakilaデータベースを使用しますが、Hibernateアプリケーションでサポートされるデータベース・サーバーであれば、どれでも使用できます。Sakilaデータベースは、MySQLのサイトからダウンロードできるサンプル・データベースです。Sakila DBの設定に関する情報は、後続の各項で説明します。</p>
</div>
<div class="paragraph">
<p>このチュートリアルを開始する前に、必要に応じて次のドキュメントをお読みください。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.hibernate.org/">hibernate.org</a>のHibernateドキュメント</p>
</li>
<li>
<p><a href="gui-functionality.html">GUIビルドの概要</a></p>
</li>
<li>
<p><a href="../ide/mysql.html">MySQLデータベースへの接続</a>のチュートリアル</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Mavenを使用してこのアプリケーションをビルドするには、<a href="maven-hib-java-se.html">Hibernateを使用したMaven Swingアプリケーションの作成</a>を参照してください。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-80-74-73.png" alt="netbeans stamp 80 74 73">
</div>
<div class="title">Figure 1. このページの内容は、NetBeans IDE 7.2、7.3、7.4および8.0に適用されます</div>
</div>
<div class="paragraph">
<p><strong>このチュートリアルに従うには、次のソフトウェアとリソースが必要です。</strong></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ソフトウェアまたはリソース</th>
<th class="tableblock halign-left valign-top">必須バージョン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7.2、7.3、7.4、8.0、Java</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://java.sun.com/javase/downloads/index.jsp">Java Development Kit (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">バージョン7または8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.mysql.com/">MySQLデータベース・サーバー</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">バージョン5.x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sakilaデータベース</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">更新センターから入手できるプラグイン</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a href="https://netbeans.org/projects/samples/downloads/download/Samples/Java/DVDStoreAdmin-Ant.zip">終了したプロジェクトのZIPアーカイブ</a>はダウンロードできます。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_データベースの作成">データベースの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>このチュートリアルでは、 <code>sakila</code> という名前のMySQLデータベースを使用します。IDEのインストールにはサンプル・データベースが含まれていないため、このチュートリアルを開始する前に、まずデータベースを作成する必要があります。</p>
</div>
<div class="paragraph">
<p>Sakilaデータベースは、MySQLのサイトから入手できる、無料のMySQLサンプル・データベースです。sakilaデータベースを作成するには、プラグイン・マネージャを使用してSakilaサンプル・データベース・プラグインをダウンロードしてインストールできます。プラグインのインストール後、「サービス」ウィンドウからSakilaデータベースを作成できます。Sakilaデータベースは、「MySQLデータベースの作成」ダイアログ・ボックスのデータベース一覧に追加されます。</p>
</div>
<div class="paragraph">
<p>MySQLを操作するためのIDEの構成については、<a href="../ide/mysql.html">MySQLデータベースへの接続</a>のチュートリアルを参照してください。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>プラグイン・マネージャを開き、Sakilaサンプル・データベース・プラグインをインストールします。</p>
</li>
<li>
<p>プラグインをインストールした後、「サービス」ウィンドウで「データベース」ノードを展開し、「MySQLサーバー」ノードを右クリックして「起動」を選択して、MySQLデータベース・サーバーを起動します。</p>
</li>
<li>
<p>「MySQLサーバー」ノードを右クリックし、「データベースを作成」を選択します。</p>
</li>
<li>
<p>「MySQLデータベースの作成」ダイアログ・ボックスで「新規データベース名」ドロップダウン・リストから「Sakilaデータベース」を選択します。「OK」をクリックします。
image::images/create-sakila-mysql.png[title="「MySQLデータベースの作成」ダイアログのスクリーンショット"]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「OK」をクリックすると、「MySQLサーバー」ノードの下に「Sakila」ノードが表示されます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「Sakila」ノードを右クリックし、「接続」を選択します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「接続」をクリックすると、「Sakila」データベースのデータベース接続のノード( <code>jdbc:mysql://localhost:3306/sakila [デフォルトの_ユーザー名_]</code> )が「データベース」ノードに一覧表示されます。接続が開いたら、接続ノードを展開してデータベースのデータを表示できます。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_java_swingアプリケーション_プロジェクトの作成">Java Swingアプリケーション・プロジェクトの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この課題では、DVDStoreAdminという名前の単純なJava Swingアプリケーション・プロジェクトを作成します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「ファイル」&gt;「新規プロジェクト」([Ctrl]-[Shift]-[N])を選択します。「Java」カテゴリから「Javaアプリケーション」を選択し、「次」をクリックします。</p>
</li>
<li>
<p>プロジェクト名に「<strong>DVDStoreAdmin</strong>」と入力し、プロジェクトの場所を設定します。</p>
</li>
<li>
<p>専用フォルダを使用するオプションが選択されている場合は選択を解除します。
このチュートリアルでは、ライブラリを他のユーザーと共有する必要がないので、プロジェクト・ライブラリを専用のフォルダにコピーする理由はほとんどありません。</p>
</li>
<li>
<p>「メイン・クラスの作成」の選択を解除します。「終了」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「終了」をクリックすると、IDEでJavaアプリケーション・プロジェクトが作成されます。このプロジェクトにはメイン・クラスが設定されていません。フォームを作成し、このフォームをメイン・クラスとして設定します。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_プロジェクトへのhibernateサポートの追加">プロジェクトへのHibernateサポートの追加</h2>
<div class="sectionbody">
<div class="paragraph">
<p>HibernateサポートをJ2SEプロジェクトに追加するには、Hibernateライブラリをプロジェクトに追加する必要があります。HibernateライブラリはIDEに含まれており、「プロジェクト」ウィンドウで「ライブラリ」ノードを右クリックして「ライブラリの追加」を選択し、「ライブラリの追加」ダイアログ・ボックスで「Hibernate」ライブラリを選択することで、任意のプロジェクトに追加できます。</p>
</div>
<div class="paragraph">
<p>IDEには、プロジェクトに必要なHibernateファイルの作成に役立つウィザードが複数用意されています。IDEのウィザードを使用し、Hibernate構成ファイルとユーティリティ・ヘルパー・クラスを作成できます。ウィザードを使用してHibernate構成ファイルを作成すると、IDEでHibernateライブラリがプロジェクトに自動的に追加されます。</p>
</div>
<div class="sect2">
<h3 id="_hibernate構成ファイルの作成">Hibernate構成ファイルの作成</h3>
<div class="paragraph">
<p>Hibernate構成ファイル( <code>hibernate.cfg.xml</code> )には、データベース接続、リソース・マッピング、およびその他の接続プロパティに関する情報が格納されます。ウィザードを使用してHibernate構成ファイルを作成する場合、IDEに登録されているデータベース接続のリストからデータベース接続を指定します。構成ファイルを生成すると、IDEでは接続の詳細および選択したデータベース接続に基づくダイアレクト情報が自動的に追加されます。また、IDEは、プロジェクトのクラスパスにHibernateライブラリを自動的に追加します。構成ファイルの作成後、ファイルはマルチビュー・エディタを使用して編集するか、またはXMLエディタで直接XMLを編集できます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウで「ソース・パッケージ」ノードを右クリックし、「新規」&gt;「その他」を選択して新規ファイル・ウィザードを開きます。</p>
</li>
<li>
<p>「Hibernate」カテゴリから「Hibernate構成ウィザード」を選択します。「次」をクリックします。</p>
</li>
<li>
<p><code>src</code> ディレクトリにファイルを作成する場合は、「名前と場所」ペインをデフォルト設定のままにします。「次」をクリックします。</p>
</li>
<li>
<p>Sakila接続を「データベース接続」ドロップダウン・リストから選択します。「終了」をクリックします。
image::images/hib-config.png[title="データベース接続を選択するダイアログ"]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「終了」をクリックすると、IDEではソース・エディタで <code>hibernate.cfg.xml</code> が開きます。IDEでは、アプリケーションのコンテキスト・クラスパスのルートに構成ファイルが作成されます(「ファイル」ウィンドウのWEB-INF/クラス)。「プロジェクト」ウィンドウで、ファイルは <code>&lt;デフォルト・パッケージ&gt;</code> ソース・パッケージに保存されます。構成ファイルには、単一のデータベースに関する情報が含まれます。複数のデータベースに接続する場合、複数の構成ファイルをプロジェクト内に作成できます。構成ファイルはデータベース・サーバーごとに1つですが、デフォルトで、ヘルパー・ユーティリティ・クラスはルートの場所にある <code>hibernate.cfg.xml</code> ファイルを使用します。</p>
</div>
<div class="paragraph">
<p>「プロジェクト」ウィンドウの「ライブラリ」ノードを展開すると、必須のHibernate JARファイルとMySQLコネクタJARがIDEによって追加されたことがわかります。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-libraries-config.png" alt="hib libraries config">
</div>
<div class="title">Figure 2. Hibernateライブラリが表示された「プロジェクト」ウィンドウのスクリーンショット</div>
</div>
<div class="paragraph">
<p>*注意:*NetBeans IDE 8.0にはHibernate 4ライブラリがバンドルされます。旧バージョンのIDEには、Hibernate 3がバンドルされていました。</p>
</div>
</div>
<div class="sect2">
<h3 id="_hibernate構成ファイルの変更">Hibernate構成ファイルの変更</h3>
<div class="paragraph">
<p>この課題では、 <code>hibernate.cfg.xml</code> で指定されたデフォルト・プロパティを、SQL文のデバッグ・ロギングが有効になるように編集します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「デザイン」タブで <code>hibernate.cfg.xml</code> を開きます。このファイルを開くには、「プロジェクト」ウィンドウでプロジェクトの「構成ファイル」ノードを展開し、 <code>hibernate.cfg.xml</code> をダブルクリックします。</p>
</li>
<li>
<p>「オプションのプロパティ」の下の「構成プロパティ」ノードを展開します。</p>
</li>
<li>
<p>「追加」をクリックして「Hibernateのプロパティの追加」ダイアログ・ボックスを開きます。</p>
</li>
<li>
<p>このダイアログ・ボックスで、「 <code>hibernate.show_sql</code> 」プロパティを選択し、値を「 <code>true</code> 」に設定します。「OK」をクリックします。これにより、SQL文のデバッグ・ロギングが有効になります。
image::images/add-property-showsql.png[title="hibernate.show_sqlプロパティの設定値が表示された「Hibernateのプロパティの追加」ダイアログ・ボックス"]</p>
</li>
<li>
<p>「その他のプロパティ」ノードの下にある「追加」をクリックし、「プロパティ名」ドロップダウン・リストで「 <code>hibernate.query.factory_class</code> 」を選択します。</p>
</li>
<li>
<p>プロパティ値として*org.hibernate.hql.internal.classic.ClassicQueryTranslatorFactory*を入力します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>これは、IDEにバンドルされているHibernate 4で使用されるトランスレータ・ファクトリ・クラスです。</p>
</div>
<div class="paragraph">
<p>「OK」をクリックします。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-property-factoryclass-4.png" alt="add property factoryclass 4">
</div>
<div class="title">Figure 3. hibernate.query.factory_classプロパティの設定値が表示された「Hibernateのプロパティの追加」ダイアログ・ボックス</div>
</div>
<div class="paragraph">
<p>NetBeans IDE 7.4以前を使用している場合は、ダイアログ・ボックスでプロパティ値として*org.hibernate.hql.classic.ClassicQueryTranslatorFactory*を選択する必要があります。NetBeans IDE 7.4以前では、Hibernate 3がバンドルされていました。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-property-factoryclass.png" alt="add property factoryclass">
</div>
<div class="title">Figure 4. hibernate.query.factory_classプロパティの設定値が表示された「Hibernateのプロパティの追加」ダイアログ・ボックス</div>
</div>
<div class="paragraph">
<p>エディタの「XML」タブをクリックすると、ファイルがXMLビューに表示されます。ファイルの内容は次のようになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;hibernate-configuration&gt;
    &lt;session-factory name="session1"&gt;
        &lt;property name="hibernate.dialect"&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;
        &lt;property name="hibernate.connection.driver_class"&gt;com.mysql.jdbc.Driver&lt;/property&gt;
        &lt;property name="hibernate.connection.url"&gt;jdbc:mysql://localhost:3306/sakila&lt;/property&gt;
        &lt;property name="hibernate.connection.username"&gt;root&lt;/property&gt;
        &lt;property name="hibernate.connection.password"&gt;######&lt;/property&gt;
        &lt;property name="hibernate.show_sql"&gt;true&lt;/property&gt;
        &lt;property name="hibernate.query.factory_class"&gt;org.hibernate.hql.internal.classic.ClassicQueryTranslatorFactory&lt;/property&gt;
    &lt;/session-factory&gt;
&lt;/hibernate-configuration&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>変更内容をファイルに保存します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>フォームを作成してメイン・クラスとして設定した後に、プロジェクトを実行すると、IDEの出力ウィンドウにSQL問合せが表示されます。</p>
</div>
</div>
<div class="sect2">
<h3 id="_code_hibernateutil_java_code_ヘルパー_ファイルの作成"><code>HibernateUtil.java</code> ヘルパー・ファイルの作成</h3>
<div class="paragraph">
<p>Hibernateを使用するには、起動を処理し、Hibernateの <code>SessionFactory</code> にアクセスしてセッション・オブジェクトを取得するヘルパー・クラスを作成する必要があります。このクラスは、Hibernateの <code>configure()</code> メソッドをコールし、 <code>hibernate.cfg.xml</code> 構成ファイルをロードし、次に <code>SessionFactory</code> をビルドしてセッション・オブジェクトを取得します。</p>
</div>
<div class="paragraph">
<p>この項では、新規ファイル・ウィザードを使用してヘルパー・クラスである <code>HibernateUtil.java</code> を作成します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「ソース・パッケージ」ノードを右クリックし、「新規」&gt;「その他」を選択して新規ファイル・ウィザードを開きます。</p>
</li>
<li>
<p>「カテゴリ」の一覧から「Hibernate」を選択し、「ファイル・タイプ」の一覧から「HibernateUtil.java」を選択します。「次」をクリックします。
image::images/hib-util.png[title="HibernateUtilの作成方法を示す新規ファイル・ウィザード"]</p>
</li>
<li>
<p>クラス名として「<strong>HibernateUtil</strong>」を入力し、パッケージ名として「<strong>sakila.util</strong>」を入力します。「終了」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「終了」をクリックすると、 <code>HibernateUtil.java</code> がエディタに表示されます。このファイルは、編集する必要がないため閉じてかまいません。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hibernateのマッピング_ファイルおよびjavaクラスの生成">Hibernateのマッピング・ファイルおよびJavaクラスの生成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>このチュートリアルでは、POJO (Plain Old Java Object)である <code>Actor.java</code> を使用してデータベース内のACTOR表のデータを表示します。このクラスは、表内の列のフィールドを指定し、データを取得および書込みするための単純な取得メソッドおよび設定メソッドを使用します。 <code>Actor.java</code> をACTOR表にマップするには、Hibernateのマッピング・ファイルを使用するか、クラスの注釈を使用します。</p>
</div>
<div class="paragraph">
<p>リバース・エンジニアリング・ウィザード、およびデータベースからのHibernateのマッピング・ファイルとPOJOウィザードを使用して、選択するデータベース表に基づいて複数のPOJOとマッピング・ファイルを作成できます。かわりに、IDEのウィザードを使用して個別のPOJOとマッピング・ファイルを最初から作成することもできます。</p>
</div>
<div class="paragraph">
<p><strong>注意:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>複数の表に対するファイルを作成する場合は、このウィザードを使用すると便利です。このチュートリアルでは、POJOを1つとマッピング・ファイルを1つのみ作成する必要があるため、ファイルを個々に作成する方法が簡単です。<a href="#10">POJOとマッピング・ファイルを個別に作成する</a>手順については、このチュートリアルの最後に紹介します。</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_リバース_エンジニアリング_ファイルの作成">リバース・エンジニアリング・ファイルの作成</h3>
<div class="paragraph">
<p>リバース・エンジニアリング・ファイル( <code>hibernate.reveng.xml</code> )はXMLファイルであり、 <code>hibernate.cfg.xml</code> で指定したデータベースのメタデータからHibernateファイルを生成するときに使用されるデフォルト設定を変更するために使用できます。このウィザードは、基本的なデフォルト設定でファイルを生成します。このファイルを変更して、使用されるデータベース・スキーマを明示的に指定したり、使用を禁止する表を除外したり、JDBCタイプとHibernateタイプのマッピング関係を指定したりできます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「ソース・パッケージ」ノードを右クリックし、「新規」&gt;「その他」を選択して新規ファイル・ウィザードを開きます。</p>
</li>
<li>
<p>「カテゴリ」の一覧から「Hibernate」を選択し、「ファイル・タイプ」の一覧から「Hibernateリバース・エンジニアリング・ウィザード」を選択します。「次」をクリックします。</p>
</li>
<li>
<p>ファイル名に「<strong>hibernate.reveng</strong>」と入力します。</p>
</li>
<li>
<p>場所としてデフォルトの* <code>src</code> *をそのまま使用します。「次」をクリックします。</p>
</li>
<li>
<p>「使用可能な表」ペインで*actor*を選択し、「追加」をクリックします。「終了」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>このウィザードにより <code>hibernate.reveng.xml</code> リバース・エンジニアリング・ファイルが生成されます。リバース・エンジニアリング・ファイルは、編集する必要がないため閉じてかまいません。</p>
</div>
</div>
<div class="sect2">
<h3 id="_データベースからのhibernateのマッピング_ファイルとpojoの作成">データベースからのHibernateのマッピング・ファイルとPOJOの作成</h3>
<div class="paragraph">
<p>データベースからのHibernateのマッピング・ファイルとPOJOウィザードでデータベース内の表に基づいてファイルを生成します。ウィザードを使用すると、IDEにより、 <code>hibernate.reveng.xml</code> で指定されたデータベース表に基づいてPOJOとマッピング・ファイルが生成され、マッピング・エントリが <code>hibernate.cfg.xml</code> に追加されます。ウィザードを使用する場合、たとえばPOJOのみにするなど、IDEで生成するファイルを選択でき、また、たとえばEJB 3注釈を使用するコードの生成するなど、コード生成オプションを選択できます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウで「ソース・パッケージ」ノードを右クリックし、「新規」&gt;「その他」を選択して新規ファイル・ウィザードを開きます。</p>
</li>
<li>
<p>「データベースからのHibernateのマッピング・ファイルとPOJO」を「Hibernate」カテゴリから選択します。「次」をクリックします。</p>
</li>
<li>
<p>選択されていない場合、 <code>hibernate.cfg.xml</code> を「Hibernate構成ファイル」ドロップダウン・リストから選択します。</p>
</li>
<li>
<p>選択されていない場合、 <code>hibernate.reveng.xml</code> を「Hibernateリバース・エンジニアリング・ファイル」ドロップダウン・リストから選択します。</p>
</li>
<li>
<p>「<strong>ドメイン・コード</strong>」および「<strong>Hibernate XMLのマッピング</strong>」オプションが選択されていることを確認します。</p>
</li>
<li>
<p>パッケージ名に「<strong>sakila.entity</strong>」と入力します。「終了」をクリックします。
image::images/mapping-pojos-wizard-ant.png[title="「Hibernateのマッピング・ファイルとPOJOの生成」ウィザード"]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「終了」をクリックすると、IDEでPOJOの <code>Actor.java</code> がすべての必須フィールドとともに生成され、Hibernateマッピング・ファイルが生成され、マッピング・エントリが <code>hibernate.cfg.xml</code> に追加されます。</p>
</div>
<div class="paragraph">
<p>これで、POJOと必要なHibernate関連ファイルが準備できたので、アプリケーションの単純なJava GUIフロント・エンドを作成できます。また、データベースを問い合せてデータを取得するHQL問合せを作成し、追加できます。また、このプロセスで、HQLエディタを使用して問合せをビルドおよびテストします。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_アプリケーションguiの作成">アプリケーションGUIの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この課題では、データを入力および表示するためのフィールドを含む、単純なJFrameフォームを作成します。また、データを取得するためのデータベース問合せをトリガーするボタンを追加します。</p>
</div>
<div class="paragraph">
<p>GUIビルダーを使用したフォームの作成に慣れていない場合は、<a href="gui-functionality.html">GUIビルドの概要</a>のチュートリアルを見直すことをお薦めします。</p>
</div>
<div class="sect2">
<h3 id="_jframeフォームの作成">JFrameフォームの作成</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウでプロジェクト・ノードを右クリックし、「新規」&gt;「その他」を選択して新規ファイル・ウィザードを開きます。</p>
</li>
<li>
<p>JFrameフォームを「Swing GUIフォーム」カテゴリから選択します。「次」をクリックします。</p>
</li>
<li>
<p>クラス名に「<strong>DVDStoreAdmin</strong>」と入力し、パッケージ名に「<strong>sakila.ui</strong>」と入力します。「終了」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「終了」をクリックすると、IDEでクラスが作成され、JFrameフォームがエディタの「デザイン」ビューに開きます。</p>
</div>
</div>
<div class="sect2">
<h3 id="_要素のフォームへの追加">要素のフォームへの追加</h3>
<div class="paragraph">
<p>次に、UI要素をフォームに追加する必要があります。エディタの「デザイン」ビューにフォームが表示されると、IDEの左側に「パレット」が表示されます。要素をフォームに追加するには、要素をパレットからフォーム領域にドラッグします。要素をフォームに追加した後、その要素の「変数名」プロパティのデフォルト値を変更する必要があります。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「ラベル」要素をパレットからドラッグし、テキストを「<strong>俳優のプロ・フィール</strong>」に変更します。</p>
</li>
<li>
<p>「ラベル」要素をパレットからドラッグし、「<strong>名</strong>」のテキストを変更します。</p>
</li>
<li>
<p>「テキスト・フィールド」要素を「名」ラベルの隣にドラッグし、デフォルトのテキストを削除します。</p>
</li>
<li>
<p>「ラベル」要素をパレットからドラッグし、「<strong>姓</strong>」のテキストを変更します。</p>
</li>
<li>
<p>「テキスト・フィールド」要素を「姓」ラベルの隣にドラッグし、デフォルトのテキストを削除します。</p>
</li>
<li>
<p>「ボタン」要素をパレットからドラッグし、テキストを「<strong>問合せ</strong>」に変更します。</p>
</li>
<li>
<p>「表」要素をパレットからフォームにドラッグします。</p>
</li>
<li>
<p>次のUI要素の「変数名」の値を、次の表の値に従って変更します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>要素の「変数名」の値は、その要素を「デザイン」ビューの中で右クリックし、「変数名を変更」を選択することで変更できます。または、「変数名」を「インスペクタ」ウィンドウで直接変更することもできます。</p>
</div>
<div class="paragraph">
<p>「変数名」値を「ラベル」要素に割り当てる必要はありません。</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">要素</th>
<th class="tableblock halign-left valign-top">変数名</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">「名」テキスト・フィールド</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>firstNameTextField</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">「姓」テキスト・フィールド</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lastNameTextField</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">「問合せ」ボタン</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>queryButton</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">表</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>resultTable</code></p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>変更を保存します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>デザイン・ビューのフォームは、次のイメージのような外観になります。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-jframe-form.png" alt="hib jframe form">
</div>
<div class="title">Figure 5. エディタの「デザイン」ビューのGUIフォーム</div>
</div>
<div class="paragraph">
<p>これで、フォーム要素にイベントを割り当てるためのコードを作成するフォームが準備できました。次の課題では、Hibernate問合せ言語に基づいて、データを取得する問合せを構築します。問合せの構築後、「問合せ」ボタンを押したときに適切な問合せを呼び出すメソッドをフォームに追加します。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hql問合せエディタでの問合せの作成">HQL問合せエディタでの問合せの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>IDEで、HQL問合せエディタを使用してHibernate問合せ言語(HQL)に基づく問合せを構築およびテストできます。問合せを入力すると、それに相当する(変換された) SQL問合せがエディタに表示されます。ツールバーの「HQL問合せの実行」ボタンをクリックすると、IDEが問合せを実行し、エディタ下部に結果が表示されます。</p>
</div>
<div class="paragraph">
<p>この課題では、HQLエディタを使用して、姓または名の一致に基づいて俳優の詳細リストを取得する、単純なHQL問合せを構築します。問合せをクラスに追加する前に、HQL問合せエディタを使用して、接続が正しく動作し、問合せで目的の結果が生成されることをテストします。この問合せを実行するには、まずアプリケーションをコンパイルする必要があります。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>プロジェクト・ノードを右クリックし、「ビルド」を選択します。</p>
</li>
<li>
<p>「プロジェクト」ウィンドウで、&lt;デフォルト・パッケージ&gt; ソース・パッケージ・ノードを展開します。</p>
</li>
<li>
<p>「 <code>hibernate.cfg.xml</code> 」を右クリックし、「HQL問合せの実行」を選択してHQL問合せエディタを開きます。</p>
</li>
<li>
<p>HQL問合せエディタに「 <code>from Actor</code> 」と入力して、接続をテストします。ツールバーの「HQL問合せの実行」ボタン(image::images/run_hql_query_16.png[title="「HQL問合せの実行」ボタン"])をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「HQL問合せの実行」をクリックすると、問合せ結果がHQL問合せエディタの下のペインに表示されるはずです。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-query-hqlresults.png" alt="hib query hqlresults">
</div>
<div class="title">Figure 6. HQL問合せ結果が表示されたHQL問合せエディタ</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>検索文字列が「PE」の場合、次の問合せをHQL問合せエディタに入力して「HQL問合せの実行」をクリックし、問合せ結果を確認します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">from Actor a where a.firstName like 'PE%'</code></pre>
</div>
</div>
<div class="paragraph">
<p>問合せによって名前が「PE」で始まる俳優の詳細リストが返されます。</p>
</div>
<div class="paragraph">
<p>結果の上にある「SQL」ボタンをクリックすると、次のようなSQL問合せが表示されるはずです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">select actor0_.actor_id as col_0_0_ from sakila.actor actor0_ where (actor0_.first_name like 'PE%' )</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>新しいHQL問合せエディタのタブを開き、次の問合せをエディタ・ペインに入力します。「HQL問合せの実行」をクリックします。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">from Actor a where a.lastName like 'MO%'</code></pre>
</div>
</div>
<div class="paragraph">
<p>問合せによって姓が「MO」で始まる俳優の詳細リストが返されます。</p>
</div>
<div class="paragraph">
<p>問合せをテストすると、その問合せが目的の結果を返すことがわかります。次の手順では、フォームで「問合せ」ボタンをクリックすると適切な問合せが呼び出されるように、問合せをアプリケーションに実装します。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_問合せのフォームへの追加">問合せのフォームへの追加</h2>
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre>``DVDStoreAdmin.java`` を変更して、問合せ文字列を追加し、入力変数を組み込む問合せを構築して呼び出すメソッドを作成する必要があります。また、ボタン・イベント・ハンドラを変更して、正しい問合せを呼び出し、問合せ結果を表に表示するメソッドを追加する必要があります。</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>DVDStoreAdmin.java</code> を開き、「ソース」タブをクリックします。</p>
</li>
<li>
<p>このクラスに、次の問合せ文字列(太字部分)を追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public DVDStoreAdmin() {
    initComponents();
}

*private static String QUERY_BASED_ON_FIRST_NAME="from Actor a where a.firstName like '";
private static String QUERY_BASED_ON_LAST_NAME="from Actor a where a.lastName like '";*</code></pre>
</div>
</div>
<div class="paragraph">
<p>問合せをHQL問合せエディタのタブからファイルにコピーし、コードを変更できます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>次のメソッドを追加し、ユーザー入力文字列に基づく問合せを作成します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private void runQueryBasedOnFirstName() {
    executeHQLQuery(QUERY_BASED_ON_FIRST_NAME + firstNameTextField.getText() + "%'");
}

private void runQueryBasedOnLastName() {
    executeHQLQuery(QUERY_BASED_ON_LAST_NAME + lastNameTextField.getText() + "%'");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>このメソッドは、 <code>executeHQLQuery()</code> というメソッドをコールし、問合せ文字列をユーザーが入力した検索文字列と組み合せて問合せを作成します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>executeHQLQuery()</code> メソッドを追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private void executeHQLQuery(String hql) {
    try {
        Session session = HibernateUtil.getSessionFactory().openSession();
        session.beginTransaction();
        Query q = session.createQuery(hql);
        List resultList = q.list();
        displayResult(resultList);
        session.getTransaction().commit();
    } catch (HibernateException he) {
        he.printStackTrace();
    }
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>``executeHQLQuery()`` メソッドは、Hibernateをコールして、選択した問合せを実行します。このメソッドは、 ``HibernateUtil.java`` ユーティリティ・クラスを使用してHibernateセッションを取得します。</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>エディタを右クリックして「インポートを修正」([Ctrl]-[Shift]-[I]、Macの場合は[⌘]-[Shift]-[I])を選択し、Hibernateライブラリ( <code>org.hibernate.Query</code> 、 <code>org.hibernate.Session</code> )および <code>java.util.List</code> に対するインポート文を生成します。変更を保存します。</p>
</li>
<li>
<p>デザイン・ビューに切り替えて「問合せ」ボタンをダブルクリックすることで、「問合せ」ボタン・イベント・ハンドラを作成します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>IDEで <code>queryButtonActionPerformed</code> メソッドが作成され、このメソッドがソース・ビューに表示されます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ユーザーがボタンをクリックすると問合せが実行されるように、ソース・ビューの <code>queryButtonActionPerformed</code> メソッドに次のコードを追加して変更します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private void queryButtonActionPerformed(java.awt.event.ActionEvent evt) {
    *if(!firstNameTextField.getText().trim().equals("")) {
        runQueryBasedOnFirstName();
    } else if(!lastNameTextField.getText().trim().equals("")) {
        runQueryBasedOnLastName();
    }*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>次のメソッドを追加し、結果がJTableに表示されるようにします。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private void displayResult(List resultList) {
    Vector&lt;String&gt; tableHeaders = new Vector&lt;String&gt;();
    Vector tableData = new Vector();
    tableHeaders.add("ActorId");
    tableHeaders.add("FirstName");
    tableHeaders.add("LastName");
    tableHeaders.add("LastUpdated");

    for(Object o : resultList) {
        Actor actor = (Actor)o;
        Vector&lt;Object&gt; oneRow = new Vector&lt;Object&gt;();
        oneRow.add(actor.getActorId());
        oneRow.add(actor.getFirstName());
        oneRow.add(actor.getLastName());
        oneRow.add(actor.getLastUpdate());
        tableData.add(oneRow);
    }
    resultTable.setModel(new DefaultTableModel(tableData, tableHeaders));
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>エディタを右クリックして「インポートを修正」([Ctrl]-[Shift]-[I]、Macの場合は[⌘]-[Shift]-[I])を選択し、 <code>java.util.Vector</code> と <code>java.util.List</code> に対するインポート文を生成します。変更を保存します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>フォームの保存後、プロジェクトを実行できます。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_プロジェクトの実行">プロジェクトの実行</h2>
<div class="sectionbody">
<div class="paragraph">
<p>これでコーディングが終了したので、アプリケーションを起動できます。プロジェクトを実行する前に、プロジェクトのプロパティのダイアログ・ボックスでアプリケーションのメイン・クラスを指定する必要があります。メイン・クラスが指定されていない場合は、アプリケーションの初回起動時にメイン・クラスを設定するよう求められます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウでプロジェクトのノードを右クリックし、「プロパティ」を選択します。</p>
</li>
<li>
<p>「プロジェクト・プロパティ」ダイアログ・ボックスで「実行」カテゴリを選択します。</p>
</li>
<li>
<p>「メイン・クラス」に「<strong>sakila.ui.DVDStoreAdmin</strong>」と入力します。「OK」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>または、「参照」ボタンをクリックし、ダイアログ・ボックスでメイン・クラスを選択できます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/browse-main-class.png" alt="browse main class">
</div>
<div class="title">Figure 7. 「メイン・クラスの参照」ダイアログでのメイン・クラスの設定</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>メイン・ツールバーの「プロジェクトの実行」をクリックし、アプリケーションを起動します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>検索文字列を「名」または「姓」テキスト・フィールドに入力し、「問合せ」をクリックして俳優を検索し、詳細を確認します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/application-run.png" alt="application run">
</div>
<div class="title">Figure 8. 結果が表示されたDVDStoreAdminアプリケーション</div>
</div>
<div class="paragraph">
<p>IDEの「出力」ウィンドウを見ると、表示された結果を取得したSQL問合せを確認できます。</p>
</div>
<div class="sect2">
<h3 id="_ソリューション_プロジェクトのダウンロード">ソリューション・プロジェクトのダウンロード</h3>
<div class="paragraph">
<p>次の方法で、このチュートリアルにソリューションをプロジェクトとしてダウンロードできます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://netbeans.org/projects/samples/downloads/download/Samples/Java/DVDStoreAdmin-Ant.zip">終了したプロジェクトのZIPアーカイブ</a>をダウンロードします。</p>
</li>
<li>
<p>次の手順を実行して、プロジェクト・ソースをNetBeansのサンプルからチェックアウトします。</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>メイン・メニューから「チーム」&gt;「Subversion」&gt;「チェックアウト」を選択します。</p>
</li>
<li>
<p>「チェックアウト」ダイアログ・ボックスで次のリポジトリURLを入力します。
 <code><a href="https://svn.netbeans.org/svn/samples~samples-source-code" class="bare">https://svn.netbeans.org/svn/samples~samples-source-code</a></code>
「次」をクリックします。</p>
</li>
<li>
<p>「参照」をクリックして「リポジトリ・フォルダを参照」ダイアログ・ボックスを開きます。</p>
</li>
<li>
<p>ルート・ノードを展開し、*samples/java/DVDStoreAdmin-Ant*を選択します。「OK」をクリックします。</p>
</li>
<li>
<p>ソースのローカル・フォルダを指定します(ローカル・フォルダは空である必要があります)。</p>
</li>
<li>
<p>「終了」をクリックします。</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>「終了」をクリックすると、IDEではローカル・フォルダがSubversionリポジトリとして初期化され、プロジェクト・ソースがチェックアウトされます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>チェックアウトが完了するときに表示されるダイアログで、「プロジェクトを開く」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>*注意:*ソースをチェックアウトするには、Subversionクライアントが必要です。Subversionのインストールの詳細は、<a href="../ide/subversion.html">NetBeans IDEでのSubversionガイド</a>の<a href="../ide/subversion.html#settingUp">Subversionの設定</a>の項を参照してください。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_個別のpojoおよびマッピング_ファイルの作成">個別のPOJOおよびマッピング・ファイルの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>POJOは単純なJavaクラスのため、新規Javaクラス・ウィザードを使用してクラスを作成し、そのクラスをソース・エディタで編集して、必要なフィールド、取得メソッドおよび設定メソッドを追加できます。POJOの作成後、ウィザードを使用してHibernateマッピング・ファイルを作成し、そのクラスを表にマップしてマッピング情報を <code>hibernate.cfg.xml</code> に追加します。マッピング・ファイルを最初から作成する場合、XMLエディタでフィールドを列にマップする必要があります。</p>
</div>
<div class="paragraph">
<p>*注意:*この課題はオプションで、「データベースからのHibernateのマッピング・ファイルとPOJO」ウィザードを使用して作成したPOJOおよびマッピング・ファイルの作成方法を説明します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウの「ソース・パッケージ」ノードを右クリックし、「新規」&gt;「Javaクラス」を選択して新規Javaクラス・ウィザードを開きます。</p>
</li>
<li>
<p>このウィザードで、クラス名に「<strong>Actor</strong>」と入力し、パッケージに「<strong>sakila.entity</strong>」と入力します。「終了」をクリックします。</p>
</li>
<li>
<p>次の太字で表示されている変更をクラスに加え、シリアライズ可能なインタフェースを実装して、表の列のフィールドを追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class Actor *implements Serializable* {
    *private Short actorId;
    private String firstName;
    private String lastName;
    private Date lastUpdate;*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>エディタを右クリックして「コードを挿入」([Alt]-[Insert]、Macの場合は[Ctrl]-[I])を選択し、ポップアップ・メニューから「取得メソッドおよび設定メソッド」を選択して、フィールドに対する取得メソッドと設定メソッドを生成します。</p>
</li>
<li>
<p>「取得メソッドおよび設定メソッドの生成」ダイアログ・ボックスですべてのフィールドを選択し、「生成」をクリックします。
image::images/getters-setters.png[title="「取得メソッドおよび設定メソッドの生成」ダイアログ・ボックス"]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「取得メソッドおよび設定メソッドの生成」ダイアログ・ボックスでは、キーボードの[↑]を使用して、選択した項目を「Actor」ノードまで移動してから、[Space]バーを押してActor内のすべてのフィールドを選択できます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>インポートを修正して変更内容を保存します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>表のためのPOJOの作成後、 <code>Actor.java</code> のHibernateマッピング・ファイルを作成します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウで「 <code>sakila.entity</code> 」ノードを右クリックし、「新規」&gt;「その他」を選択して新規ファイル・ウィザードを開きます。</p>
</li>
<li>
<p>「Hibernate」カテゴリの「Hibernateのマッピング・ファイル」を選択します。「次」をクリックします。</p>
</li>
<li>
<p>「ファイル名」に「<strong>Actor.hbm</strong>」と入力し、フォルダが「<strong>src/sakila/entity</strong>」であることを確認します。「次」をクリックします。</p>
</li>
<li>
<p>「マップするクラス」に「<strong>sakila.entity.Actor</strong>」と入力し、「データベース表」ドロップダウン・リストから「<strong>actor</strong>」を選択します。「終了」をクリックします。
image::images/mapping-wizard.png[title="「Hibernateのマッピング・ファイルの生成」ウィザード"]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「終了」をクリックすると、 <code>Actor.hbm.xml</code>  Hibernateのマッピング・ファイルがソース・エディタで開きます。また、IDEでマッピング・リソースに対するエントリが <code>hibernate.cfg.xml</code> に自動的に追加されます。このエントリの詳細は、 <code>hibernate.cfg.xml</code> のデザイン・ビューで「マッピング」ノードを展開するか、またはXMLビューで表示できます。XMLビューの <code>mapping</code> エントリは、次のようになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">        &lt;mapping resource="sakila/entity/Actor.hbm.xml"/&gt;
    &lt;/session-factory&gt;
&lt;/hibernate-configuration&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>次の太字部分の変更を <code>Actor.hbm.xml</code> に加えて、 <code>Actor.java</code> のフィールドをACTOR表の列にマップします。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;hibernate-mapping&gt;
  &lt;class name="sakila.entity.Actor" *table="actor"&gt;
    &lt;id name="actorId" type="java.lang.Short"&gt;
      &lt;column name="actor_id"/&gt;
      &lt;generator class="identity"/&gt;
    &lt;/id&gt;
    &lt;property name="firstName" type="string"&gt;
      &lt;column length="45" name="first_name" not-null="true"/&gt;
    &lt;/property&gt;
    &lt;property name="lastName" type="string"&gt;
      &lt;column length="45" name="last_name" not-null="true"/&gt;
    &lt;/property&gt;
    &lt;property name="lastUpdate" type="timestamp"&gt;
      &lt;column length="19" name="last_update" not-null="true"/&gt;
    &lt;/property&gt;
  &lt;/class&gt;*
&lt;/hibernate-mapping&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>エディタでコード補完を使用すると、マッピング・ファイルの変更時に値を補完できます。</p>
</div>
<div class="paragraph">
<p><strong>注意:</strong> デフォルトでは、生成される <code>class</code> 要素には終了タグがあります。開始と終了の <code>class</code> 要素タグの間にプロパティ要素を追加する必要があるため、次の変更(太字で表示)を加えます。変更後、 <code>class</code> タグの間でコード補完を使用できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;hibernate-mapping&gt;
  &lt;class name="sakila.entity.Actor" *table="actor"&gt;
  &lt;/class&gt;*
&lt;/hibernate-mapping&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ツールバーの「XMLの検証」ボタンをクリックし、変更内容を保存します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>POJOとHibernateのマッピング・ファイルを個別に作成すると、アプリケーションをさらにカスタマイズするときに役立つ場合があります。</p>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Using%20Hibernate%20in%20a%20Java%20Swing%20Application">このチュートリアルに関するご意見をお寄せください</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_関連項目">関連項目</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Swing GUIアプリケーションの作成に関する追加情報は、次のチュートリアルを参照してください。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="quickstart-gui.html">NetBeans IDEでのSwing GUIのデザイン</a></p>
</li>
<li>
<p><a href="gui-functionality.html">GUIビルドの概要</a></p>
</li>
<li>
<p><a href="../../trails/matisse.html">Java GUIアプリケーションの学習</a></p>
</li>
</ul>
</div>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/incubator-netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/incubator-netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/java/hibernate-java-se_ja.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1>About</h1>
                <ul>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                    <li><a href="https://incubator.apache.org/projects/netbeans.html">Incubation Status</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                    <li><a href="/community/who.html">Who is who</a></li>
                    <li><a href="/community/nekobean.html">NekoBean</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/netcat.html">NetCAT - Community Acceptance Testing</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/help/getting-started.html">Platform videos</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb100/nb100.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html#releases">Releases</a></li>
                    <ul>
                        <li><a href="/download/nb100/nb100.html">Apache NetBeans 10.0</a></li>
                        <li><a href="/download/nb90/nb90.html">Apache NetBeans 9.0</a></li>
                    </ul>
                    <li><a href="/plugins/index.html">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2019 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <p><a href="https://incubator.apache.org/" alt="Apache Incubator"><img src='/images/incubator_feather_egg_logo_bw_crop.png' title='Apache Incubator'></img></a></p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache NetBeans is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</p>
            <p>Apache Incubator, Apache, Apache NetBeans, NetBeans, the Apache feather logo, the Apache NetBeans logo, and the Apache Incubator project logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
