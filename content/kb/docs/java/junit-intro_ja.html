
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans IDEでのJunitテストの記述</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans IDEでのJunitテストの記述 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, NetBeans IDEでのJunitテストの記述">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">NetBeans IDEでのJunitテストの記述</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/java/junit-intro_ja.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_プロジェクトの作成">プロジェクトの作成</a>
<ul class="sectlevel2">
<li><a href="#_javaクラスライブラリプロジェクトの作成">Javaクラス・ライブラリ・プロジェクトの作成</a></li>
<li><a href="#_ソリューションプロジェクトのダウンロード">ソリューション・プロジェクトのダウンロード</a></li>
<li><a href="#_javaクラスの作成">Javaクラスの作成</a></li>
</ul>
</li>
<li><a href="#_junit_3単体テストの記述">JUnit 3単体テストの記述</a>
<ul class="sectlevel2">
<li><a href="#_vectors_java_用のテストクラスの作成"><code>Vectors.java</code> 用のテスト・クラスの作成</a></li>
<li><a href="#_vectors_java_用のテストメソッドの記述"><code>Vectors.java</code> 用のテスト・メソッドの記述</a></li>
<li><a href="#_utils_java_用のテストクラスの作成"><code>Utils.java</code> 用のテスト・クラスの作成</a></li>
<li><a href="#_utils_java_用のテストメソッドの記述"><code>Utils.java</code> 用のテスト・メソッドの記述</a></li>
<li><a href="#_テストの実行">テストの実行</a></li>
</ul>
</li>
<li><a href="#_junit_4テストの記述">JUnit 4テストの記述</a>
<ul class="sectlevel2">
<li><a href="#_vectors_java_用のテストクラスの作成_2"><code>Vectors.java</code> 用のテスト・クラスの作成</a></li>
<li><a href="#_vectors_java_用のテストメソッドの記述_2"><code>Vectors.java</code> 用のテスト・メソッドの記述</a></li>
<li><a href="#_utils_java_用のテストクラスの作成_2"><code>Utils.java</code> 用のテスト・クラスの作成</a></li>
<li><a href="#_utils_java_用のテストメソッドの記述_2"><code>Utils.java</code> 用のテスト・メソッドの記述</a></li>
<li><a href="#_テストの実行_2">テストの実行</a></li>
</ul>
</li>
<li><a href="#_テストスイートの作成">テスト・スイートの作成</a>
<ul class="sectlevel2">
<li><a href="#_junit_3テストスイートの作成">JUnit 3テスト・スイートの作成</a></li>
<li><a href="#_junit_4テストスイートの作成">JUnit 4テスト・スイートの作成</a></li>
<li><a href="#_テストスイートの実行">テスト・スイートの実行</a></li>
</ul>
</li>
<li><a href="#_サマリー">サマリー</a></li>
<li><a href="#_関連項目">関連項目</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>このチュートリアルでは、NetBeans IDEでJUnit単体テストを記述および実行するための基本情報を紹介します。アプリケーションのテストは開発サイクルに不可欠な部分であり、単体テストの記述および管理はソース・コード内の個々のメソッドが正しく動作することを確実にするために役立ちます。JUnit単体テスト・フレームワークに対するIDEの統合サポートにより、JUnitテストとテスト・スイートを迅速かつ容易に作成することができます。</p>
</div>
<div class="paragraph">
<p>このチュートリアルでは、Javaクラス・ライブラリ・プロジェクト用の、JUnit 3およびJUnit 4という単純な単体テストとテスト・スイートを作成します。チュートリアルの第一部では、JUnit 3でテストを作成する方法を説明します。第二部では、JUnitの注釈を使用して同じテストをJUnit 4で作成する方法を説明します。テストは同じであるためチュートリアルの両方の部分を完了する必要はありませんが、両方のバージョンでのテストの記述方法を見ることにより、JUnit 4で導入された変更のいくつかを確認できます。</p>
</div>
<div class="paragraph">
<p>JUnitの使用方法の詳細は、<a href="http://www.junit.org">www.junit.org</a>を参照してください。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-80-74-73.png" alt="netbeans stamp 80 74 73">
</div>
<div class="title">Figure 1. このページの内容は、NetBeans IDE 7.2、7.3、7.4および8.0に適用されます</div>
</div>
<div class="paragraph">
<p><strong>このチュートリアルに従うには、次のソフトウェアとリソースが必要です。</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ソフトウェアまたはリソース</th>
<th class="tableblock halign-left valign-top">必須バージョン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7.2, 7.3, 7.4, 8.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java Development Kit (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">バージョン7または8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JUnitSampleSolプロジェクト</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/projects/samples/downloads/download/Samples/Java/JUnitSampleSol.zip">ダウンロード</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>このチュートリアルで手順を実行するには、アップデート・センターからJUnitをインストールする必要があります。IDEのインストール時にプラグインをインストールしていない場合は、プラグイン・マネージャでJUnitプラグインをインストールできます。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_プロジェクトの作成">プロジェクトの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>このチュートリアルを完了するには、最初にJUnit-SampleというJavaクラス・ライブラリ・プロジェクトを作成します。プロジェクトを作成した後、サンプル・プロジェクトJUnitSampleSolの2つのクラスを、プロジェクトJUnit-Sampleにコピーします。</p>
</div>
<div class="sect2">
<h3 id="_javaクラスライブラリプロジェクトの作成">Javaクラス・ライブラリ・プロジェクトの作成</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>メイン・メニューから「ファイル」&gt;「新規プロジェクト」を選択します。</p>
</li>
<li>
<p>「Java」カテゴリから「Javaクラス・ライブラリ」を選択し、「次」をクリックします。</p>
</li>
<li>
<p>プロジェクトとして「<strong>JUnit-Sample</strong>」と入力し、プロジェクトの場所を設定します。</p>
</li>
<li>
<p>専用フォルダを使用するオプションが選択されている場合は選択を解除します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>このチュートリアルでは、ライブラリを他のユーザーまたはプロジェクトと共有する必要がないので、プロジェクト・ライブラリを専用のフォルダにコピーする理由はほとんどありません。</p>
</div>
<div class="paragraph">
<p>「終了」をクリックします。</p>
</div>
<div class="paragraph">
<p>JUnitテストを初めて作成すると、IDEからバージョンを選択するよう求められ、その後に「テスト・ライブラリ」ノードとJUnitライブラリが追加されます。</p>
</div>
</div>
<div class="sect2">
<h3 id="_ソリューションプロジェクトのダウンロード">ソリューション・プロジェクトのダウンロード</h3>
<div class="paragraph">
<p>このチュートリアルで使用するプロジェクトJUnitSampleSolは、次の方法でダウンロードできます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://netbeans.org/projects/samples/downloads/download/Samples/Java/JUnitSampleSol.zip">終了したプロジェクトのZIPアーカイブ</a>をダウンロードします。</p>
</li>
<li>
<p>次の手順を実行して、プロジェクト・ソースをNetBeansのサンプルからチェックアウトします。</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>メイン・メニューから「チーム」&gt;「Subversion」&gt;「チェックアウト」を選択します。</p>
</li>
<li>
<p>「チェックアウト」ダイアログ・ボックスで次のリポジトリURLを入力します。
 <code><a href="https://svn.netbeans.org/svn/samples~samples-source-code" class="bare">https://svn.netbeans.org/svn/samples~samples-source-code</a></code>
「次」をクリックします。</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「チェックアウトするフォルダ」パネルで、「参照」をクリックして「リポジトリ・フォルダを参照」ダイアログ・ボックスを開きます。</p>
</li>
<li>
<p>ルート・ノードを展開し、*samples/java/JUnitSampleSol*を選択します。「OK」をクリックします。</p>
</li>
<li>
<p>ソースのローカル・フォルダを指定します。「終了」をクリックします。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>「終了」をクリックすると、IDEではローカル・フォルダがSubversionリポジトリとして初期化され、プロジェクト・ソースがチェックアウトされます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>チェックアウトが完了するときに表示されるダイアログで、「プロジェクトを開く」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Subversionのインストールの詳細は、<a href="../ide/subversion.html">NetBeans IDEでのSubversionガイド</a>の<a href="../ide/subversion.html#settingUp">Subversionの設定</a>の項を参照してください。</p>
</div>
<div class="paragraph">
<p>*注意:*IDEのインストール時にJUnitプラグインをインストールしなかった場合は、NetBeansプロジェクトを開いたときに、JUnitライブラリへの参照を解決するためにJUnitプラグインをインストールするように求められます。</p>
</div>
</div>
<div class="sect2">
<h3 id="_javaクラスの作成">Javaクラスの作成</h3>
<div class="paragraph">
<p>この課題では、JUnitSampleSolサンプル・プロジェクトから <code>Utils.java</code> ファイルおよび <code>Vectors.java</code> ファイルを、作成したクラス・ライブラリ・プロジェクトにコピーします。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウで、*JUnit-Sample*プロジェクトの「ソース・パッケージ」ノードを右クリックし、ポップアップ・メニューから「新規」&gt;「Javaパッケージ」を選択します。</p>
</li>
<li>
<p>パッケージ名として「<strong>sample</strong>」と入力します。「終了」をクリックします。</p>
</li>
<li>
<p>*JUnitSampleSol*プロジェクトを開き(まだ開いていない場合)、「プロジェクト」ウィンドウで「ソース・パッケージ」ノードを展開します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projects-window.png" alt="projects window">
</div>
<div class="title">Figure 2. 「プロジェクト」ウィンドウ内のJUnit-SampleおよびJUnitSampleSolプロジェクト</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>JUnitSampleSolプロジェクト内のクラス <code>Utils.java</code> と <code>Vectors.java</code> をコピーし、それらをJUnit-Sample内の <code>sample</code> ソース・パッケージに貼り付けます。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>クラスのソース・コードを見ると、 <code>Utils.java</code> に3つのメソッド( <code>computeFactorial</code> 、 <code>concatWords</code> 、および <code>normalizeWord</code> )があり、 <code>Vectors.java</code> に2つのメソッド( <code>equal</code> および <code>scalarMultiplication</code> )があることがわかります。次の手順では、各クラス用のテスト・クラスを作成し、メソッド用にいくつかのテスト・クラスを記述します。</p>
</div>
<div class="paragraph">
<p>*注意:*JUnitSampleSolプロジェクトは必要がなくなったため閉じてかまいません。JUnitSampleSolプロジェクトには、このドキュメントで説明されているすべてのテストが含まれています。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_junit_3単体テストの記述">JUnit 3単体テストの記述</h2>
<div class="sectionbody">
<div class="paragraph">
<p>チュートリアルのこの部分では、 <code>Vectors.java</code> クラスおよび <code>Utils.java</code> クラス用の基本的なJUnit 3単体テストを作成します。IDEを使用して、プロジェクト内のクラスに基づいたスケルトン・テスト・クラスを作成します。次に、生成されたテスト・メソッドを変更し、新しいテスト・メソッドを追加します。</p>
</div>
<div class="paragraph">
<p>IDEを使用して初めてプロジェクト用のテストを作成する場合、JUnitバージョンの選択を求めるメッセージが表示されます。選択したバージョンがデフォルトのJUnitバージョンになり、以降のすべてのテストおよびテスト・スイートがそのバージョンで生成されます。</p>
</div>
<div class="sect2">
<h3 id="_vectors_java_用のテストクラスの作成"><code>Vectors.java</code> 用のテスト・クラスの作成</h3>
<div class="paragraph">
<p>この課題では、 <code>Vectors.java</code> 用のJUnitテスト・スケルトンを作成します。また、テスト・フレームワークとして「JUnit」を、バージョンとして「JUnit 3」を選択します。</p>
</div>
<div class="paragraph">
<p>*注意:*7.1以前のNetBeans IDEを使用している場合は、JUnitがデフォルトで指定されるため、テスト・フレームワークを指定する必要はありません。NetBeans IDE 7.2では、テスト・フレームワークとしてJUnitまたはTestNGを指定するオプションがあります。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>Vectors.java</code> を右クリックし、「ツール」&gt;「テストを作成」を選択します。</p>
</li>
<li>
<p>「テストを作成」ダイアログで、テスト・クラスの名前を*VectorsJUnit3Test*に変更します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>テスト・クラスの名前を変更するときは、名前が変更されることを警告するメッセージが表示されます。デフォルト名は、テスト対象のクラス名をベースに、末尾に「Test」を追加したものです。たとえば、 <code>MyClass.java</code> クラスの場合、テスト・クラスのデフォルト名は「 <code>MyClassTest.java</code> 」です。通常はデフォルト名をそのまま使用するのが最適ですが、このチュートリアルでは、JUnit 4テストも同じパッケージ内に作成し、テスト・クラスの名前は一意にする必要があるため、名前を変更します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「フレームワーク」ドロップダウン・リストで「JUnit」を選択します。</p>
</li>
<li>
<p>「テスト初期化」および「テスト終了」を選択解除します。「OK」をクリックします。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/junit3-vectors-createtests.png" alt="junit3 vectors createtests">
</div>
<div class="title">Figure 3. 「JUnitのバージョンを選択」ダイアログ・ボックス</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「JUnitのバージョンを選択」ダイアログ・ボックスで「JUnit 3.x」を選択します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/junit3-select-version.png" alt="junit3 select version">
</div>
<div class="title">Figure 4. 「JUnitのバージョンを選択」ダイアログ・ボックス</div>
</div>
<div class="paragraph">
<p>JUnit 3.xを選択すると、プロジェクトにJUnit 3ライブラリが追加されます。</p>
</div>
<div class="paragraph">
<p>「選択」をクリックすると、IDEによって、「プロジェクト」ウィンドウ内の「テスト・パッケージ」ノードの下にある <code>sample</code> パッケージ内に <code>VectorsJUnit3Test.java</code> テスト・クラスが作成されます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projects-window2.png" alt="projects window2">
</div>
<div class="title">Figure 5. 「プロジェクト」ウィンドウ内のJUnit-Sampleプロジェクトの構造</div>
</div>
<div class="paragraph">
<p>プロジェクトには、テストを作成するためのテスト・パッケージ用ディレクトリが必要です。テスト・パッケージ・ディレクトリのデフォルトの場所はプロジェクトのルート・レベルですが、プロジェクトのタイプに応じて、プロジェクトの「プロパティ」ダイアログでディレクトリに別の場所を指定できます。</p>
</div>
<div class="paragraph">
<p>生成したテスト・クラス <code>VectorsJUnit3Test.java</code> をエディタで表示すると、次のテスト・クラスが <code>equal</code> メソッドと <code>scalarMultiplication</code> メソッドに対するテスト・メソッドとともに生成されたことがわかります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class VectorsJUnit3Test extends TestCase {
    /**
     * Test of equal method, of class Vectors.
     */
    public void testEqual() {
        System.out.println("equal");
        int[] a = null;
        int[] b = null;
        boolean expResult = false;
        boolean result = Vectors.equal(a, b);
        assertEquals(expResult, result);
        // TODO review the generated test code and remove the default call to fail.
        fail("The test case is a prototype.");
    }

    /**
     * Test of scalarMultiplication method, of class Vectors.
     */
    public void testScalarMultiplication() {
        System.out.println("scalarMultiplication");
        int[] a = null;
        int[] b = null;
        int expResult = 0;
        int result = Vectors.scalarMultiplication(a, b);
        assertEquals(expResult, result);
        // TODO review the generated test code and remove the default call to fail.
        fail("The test case is a prototype.");
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>生成された各テストのメソッド本体は、ガイドとしてのみ用意されており、実際のテスト・ケースにするには変更する必要があります。コードを生成しない場合は、「テストを作成」ダイアログの「デフォルトのメソッド本体」を選択解除します。</p>
</div>
<div class="paragraph">
<p>IDEがテスト・メソッドの名前を生成する場合、各メソッド名の先頭に「 <code>test</code> 」が付加されます。これは、JUnit 3ではテストを識別するために命名規則とリフレクションが使用されるためです。テスト・メソッドを識別するために、各テスト・メソッドは「 <code>test_&lt;NAME&gt;_</code> 」という構文に従う必要があります。</p>
</div>
<div class="paragraph">
<p>*注意:*JUnit 4では注釈を使用してテスト・メソッドを識別できるため、このテスト・メソッドの命名構文を使用する必要がなくなり、テスト・クラスは <code>TestCase</code> を拡張する必要がなくなりました。</p>
</div>
</div>
<div class="sect2">
<h3 id="_vectors_java_用のテストメソッドの記述"><code>Vectors.java</code> 用のテスト・メソッドの記述</h3>
<div class="paragraph">
<p>この課題では、生成したテスト・メソッドを変更してテストが機能するようにし、デフォルトの出力メッセージを変更します。テストを実行するために出力メッセージを変更する必要はありませんが、「JUnitテスト結果」出力ウィンドウに表示される結果を識別するのに役立つよう、出力を変更します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>エディタで <code>VectorsJUnit3Test.java</code> を開きます。</p>
</li>
<li>
<p><code>println</code> の値を変更し、生成された変数を除去することによって、 <code>testScalarMultiplication</code> のテスト・スケルトンを変更します。テスト・メソッドは次のようになるはずです(太字部分が変更箇所)。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void testScalarMultiplication() {
    System.out.println("** VectorsJUnit3Test: testScalarMultiplication()*");
    assertEquals(expResult, result);
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ここで、メソッドをテストするためのアサーションを追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void testScalarMultiplication() {
    System.out.println("* VectorsJUnit3Test: testScalarMultiplication()");
    *assertEquals(  0, Vectors.scalarMultiplication(new int[] { 0, 0}, new int[] { 0, 0}));
    assertEquals( 39, Vectors.scalarMultiplication(new int[] { 3, 4}, new int[] { 5, 6}));
    assertEquals(-39, Vectors.scalarMultiplication(new int[] {-3, 4}, new int[] { 5,-6}));
    assertEquals(  0, Vectors.scalarMultiplication(new int[] { 5, 9}, new int[] {-9, 5}));
    assertEquals(100, Vectors.scalarMultiplication(new int[] { 6, 8}, new int[] { 6, 8}));*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>このテスト・メソッドでは、JUnitの <code>assertEquals</code> メソッドが使用されます。アサーションを使用するには、入力変数と、期待する結果を指定します。テストに合格するには、テスト済メソッドを実行したときに、テスト・メソッドが供給した変数に基づいて、期待されるすべての結果を正常に返す必要があります。様々な考えられる並べ替えを実行するため、十分な数のアサーションを追加するようにしてください。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>生成されたメソッド本体を削除し、次の <code>println</code> を追加することによって、 <code>testEqual</code> のテスト・スケルトンを変更します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    *System.out.println("* VectorsJUnit3Test: testEqual()");*</code></pre>
</div>
</div>
<div class="paragraph">
<p>テスト・メソッドは次のようになるはずです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void testEqual() {
    System.out.println("* VectorsJUnit3Test: testEqual()");
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>次のアサーションを追加することによって <code>testEqual</code> メソッドを変更します(太字部分が変更箇所)。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void testEqual() {
    System.out.println("* VectorsJUnit3Test: testEqual()");
    *assertTrue(Vectors.equal(new int[] {}, new int[] {}));
    assertTrue(Vectors.equal(new int[] {0}, new int[] {0}));
    assertTrue(Vectors.equal(new int[] {0, 0}, new int[] {0, 0}));
    assertTrue(Vectors.equal(new int[] {0, 0, 0}, new int[] {0, 0, 0}));
    assertTrue(Vectors.equal(new int[] {5, 6, 7}, new int[] {5, 6, 7}));

    assertFalse(Vectors.equal(new int[] {}, new int[] {0}));
    assertFalse(Vectors.equal(new int[] {0}, new int[] {0, 0}));
    assertFalse(Vectors.equal(new int[] {0, 0}, new int[] {0, 0, 0}));
    assertFalse(Vectors.equal(new int[] {0, 0, 0}, new int[] {0, 0}));
    assertFalse(Vectors.equal(new int[] {0, 0}, new int[] {0}));
    assertFalse(Vectors.equal(new int[] {0}, new int[] {}));

    assertFalse(Vectors.equal(new int[] {0, 0, 0}, new int[] {0, 0, 1}));
    assertFalse(Vectors.equal(new int[] {0, 0, 0}, new int[] {0, 1, 0}));
    assertFalse(Vectors.equal(new int[] {0, 0, 0}, new int[] {1, 0, 0}));
    assertFalse(Vectors.equal(new int[] {0, 0, 1}, new int[] {0, 0, 3}));*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>このテストはJUnitの <code>assertTrue</code> メソッドと <code>assertFalse</code> メソッドを使用して、考えられる様々な結果をテストします。このメソッドのテストに合格するには、 <code>assertTrue</code> がすべてtrue、 <code>assertFalse</code> がすべてfalseである必要があります。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>変更を保存します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>比較: <a href="#Exercise_32"><code>Vectors.java</code> 用のテスト・メソッドの記述(JUnit 4)</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_utils_java_用のテストクラスの作成"><code>Utils.java</code> 用のテスト・クラスの作成</h3>
<div class="paragraph">
<p>ここで、 <code>Utils.java</code> のテスト・スケルトンを作成します。前の課題でテストを作成したとき、JUnitのバージョンを確認するメッセージが表示されました。今回はバージョンの選択を求めるメッセージは表示されません。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>Utils.java</code> を右クリックし、「ツール」&gt;「テストを作成」を選択します。</p>
</li>
<li>
<p>「フレームワーク」ドロップダウン・リストで「JUnit」が選択されていない場合は選択します。</p>
</li>
<li>
<p>ダイアログ・ボックスで「テスト初期化」および「テスト終了」が選択されていない場合は選択します。</p>
</li>
<li>
<p>「テストを作成」ダイアログ・ボックスで、テスト・クラスの名前を*UtilsJUnit3Test*に変更します。「OK」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「OK」をクリックすると、「テスト・パッケージ」のsamplesディレクトリに、テスト・ファイル <code>UtilsJUnit3Test.java</code> が作成されます。 <code>Utils.java</code> 内にあるメソッド用に <code>testComputeFactorial</code> 、 <code>testConcatWords</code> 、および <code>testNormalizeWord</code> のテスト・スケルトンを作成する以外に、テスト初期化メソッド <code>setUp</code> およびテスト終了メソッド <code>tearDown</code> も作成されます。</p>
</div>
</div>
<div class="sect2">
<h3 id="_utils_java_用のテストメソッドの記述"><code>Utils.java</code> 用のテスト・メソッドの記述</h3>
<div class="paragraph">
<p>この課題では、共通のJUnitテスト要素の一部を示す、いくつかのテスト・ケースを追加します。一部のメソッドはデフォルトで出力をプリントしないため、 <code>println</code> もメソッドに追加します。 <code>println</code> をメソッドに追加することで、メソッドが実行されたかどうか、どの順番でメソッドが実行されたかを、後でJUnitテスト結果ウィンドウで確認できます。</p>
</div>
<div class="sect3">
<h4 id="_テスト初期化およびテスト終了">テスト初期化およびテスト終了</h4>
<div class="literalblock">
<div class="content">
<pre>``setUp`` メソッドおよび ``tearDown`` メソッドは、テスト条件を初期化および終了するために使用されます。 ``Utils.java`` のテストに ``setUp`` メソッドと ``tearDown`` メソッドは必要ありませんが、ここではこれらのメソッドの機能を示すために使用します。</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>``setUp`` メソッドはテスト初期化メソッドであり、テスト・クラスの各テスト・ケースの前に実行されます。テストの実行にテスト初期化メソッドは必須ではありませんが、テストの実行前に一部の変数を初期化する必要がある場合は、テスト初期化メソッドを使用します。</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>``tearDown`` メソッドはテスト終了メソッドであり、テスト・クラスの各テスト・ケースの後に実行されます。テストの実行にテスト終了メソッドは必須ではありませんが、テスト・ケースの実行時に求められたデータをクリーン・アップするために終了メソッドが必要になる場合があります。</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>次の変更(太字で表示)を実行して、各メソッドに <code>println</code> を追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Override
protected void setUp() throws Exception {
    super.setUp();
    *System.out.println("* UtilsJUnit3Test: setUp() method");*
}

@Override
protected void tearDown() throws Exception {
    super.tearDown();
    *System.out.println("* UtilsJUnit3Test: tearDown() method");*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>テストを実行すると、各メソッドの <code>println</code> テキストが「JUnitテスト結果」出力ウィンドウに表示されます。 <code>println</code> を追加しないと、メソッドが実行されたことを示す出力は表示されません。</p>
</div>
</div>
<div class="sect3">
<h4 id="_単純なアサーションを使用したテスト">単純なアサーションを使用したテスト</h4>
<div class="paragraph">
<p>この単純なテスト・ケースでは、 <code>concatWords</code> メソッドをテストします。生成されたテスト・メソッドの <code>testConcatWords</code> を使用するかわりに、単一の単純なアサーションを使用してメソッドが文字列を正しく連結するかどうかをテストする、 <code>testHelloWorld</code> という新しいテスト・メソッドを追加します。テスト・ケースの <code>assertEquals</code> では、予想した結果と実際の結果が同じであるかどうかをテストするために、構文 <code>assertEquals(<em>EXPECTED_RESULT, ACTUAL_RESULT</em>)</code> が使用されます。この例では、 <code>concatWords</code> メソッドへの入力が「 <code>Hello</code> 」、「 <code>,</code> 」、「 <code>world</code> 」および「 <code>!</code> 」の場合、予想結果は「 <code>Hello, world!</code> 」と同じになるはずです。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>UtilsJUnit3Test.java</code> 内の生成されたテスト・メソッド <code>testConcatWords</code> を削除します。</p>
</li>
<li>
<p><code>concatWords</code> メソッドをテストするため、次のメソッドを追加します。<strong>public void testHelloWorld() {
    assertEquals("Hello, world!", Utils.concatWords("Hello", ", ", "world", "!"));
}</strong></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>テストに関するテキストを「JUnitテスト結果」ウィンドウに表示するため、 <code>println</code> 文を追加します。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void testHelloWorld() {
    *System.out.println("* UtilsJUnit3Test: test method 1 - testHelloWorld()");*
    assertEquals("Hello, world!", Utils.concatWords("Hello", ", ", "world", "!"));</code></pre>
</div>
</div>
<div class="paragraph">
<p>比較: <a href="#Exercise_342">単純なアサーションを使用したテスト(JUnit 4)</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_タイムアウトを使用したテスト">タイム・アウトを使用したテスト</h4>
<div class="paragraph">
<p>このテストでは、メソッドの完了までに時間がかかりすぎているかどうかを確認する方法を示します。メソッドの時間がかかりすぎている場合は、テスト・スレッドが割込みされ、テストは失敗します。テストでは時間制限を指定できます。</p>
</div>
<div class="paragraph">
<p>テスト・メソッドにより、 <code>Utils.java</code> の <code>computeFactorial</code> メソッドが呼び出されます。 <code>computeFactorial</code> メソッドは正しいと想定できますが、ここでテストするのは、計算が1000ミリ秒以内に完了するかどうかです。 <code>computeFactorial</code> スレッドおよびテスト・スレッドは同時に開始されます。テスト・スレッドは1000ミリ秒後に停止し、 <code>computeFactorial</code> スレッドが先に完了しないかぎり、 <code>TimeoutException</code> をスローします。メッセージを追加すると、 <code>TimeoutException</code> がスローされたときにメッセージが表示されます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>生成されたテスト・メソッド <code>testComputeFactorial</code> を削除します。</p>
</li>
<li>
<p>ランダムに生成された数字の階乗を計算する <code>testWithTimeout</code> メソッドを追加します。*public void testWithTimeout() throws InterruptedException, TimeoutException {
final int factorialOf = 1 + (int) (30000 * Math.random());
System.out.println("computing " + factorialOf + '!');</p>
<div class="literalblock">
<div class="content">
<pre>    Thread testThread = new Thread() {
        public void run() {
            System.out.println(factorialOf + "! = " + Utils.computeFactorial(factorialOf));
        }
    };
}*</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>java.util.concurrent.TimeoutException</code> をインポートするために、インポートを修正します。</p>
</li>
<li>
<p>テストの実行に時間がかかりすぎる場合にスレッドが割込みされてメッセージが表示されるように、次のコード(太字で表示)をメソッドに追加します。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    Thread testThread = new Thread() {
        public void run() {
            System.out.println(factorialOf + "! = " + Utils.computeFactorial(factorialOf));
        }
    };

    *testThread.start();
    Thread.sleep(1000);
    testThread.interrupt();

    if (testThread.isInterrupted()) {
        throw new TimeoutException("the test took too long to complete");
    }*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>タイム・アウトがスローされる前にミリ秒の数字を変更するには、 <code>Thread.sleep</code> 行を変更します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>テストに関するテキストを「JUnitテスト結果」ウィンドウに出力するには、次の <code>println</code> (太字で表示)を追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void testWithTimeout() throws InterruptedException, TimeoutException {
    *System.out.println("* UtilsJUnit3Test: test method 2 - testWithTimeout()");*
    final int factorialOf = 1 + (int) (30000 * Math.random());
    System.out.println("computing " + factorialOf + '!');</code></pre>
</div>
</div>
<div class="paragraph">
<p>比較: <a href="#Exercise_343">タイム・アウトを使用したテスト(JUnit 4)</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_予想される例外のテスト">予想される例外のテスト</h4>
<div class="paragraph">
<p>このテストでは、予想される例外のテスト方法を示します。このメソッドは、予想される指定の例外がスローされない場合、失敗します。この例では、入力変数が負の数(-5)の場合に、 <code>computeFactorial</code> メソッドが <code>IllegalArgumentException</code> をスローするかどうかをテストします。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>computeFactorial</code> メソッドを呼び出す次の <code>testExpectedException</code> メソッドを、-5の入力とともに追加します。<strong>public void testExpectedException() {
    try {
        final int factorialOf = -5;
        System.out.println(factorialOf + "! = " + Utils.computeFactorial(factorialOf));
        fail("IllegalArgumentException was expected");
    } catch (IllegalArgumentException ex) {
    }
}</strong></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>テストに関するテキストを「JUnitテスト結果」ウィンドウに出力するには、次の <code>println</code> (太字で表示)を追加します。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void testExpectedException() {
    *System.out.println("* UtilsJUnit3Test: test method 3 - testExpectedException()");*
    try {</code></pre>
</div>
</div>
<div class="paragraph">
<p>比較: <a href="#Exercise_344">予想される例外のテスト(JUnit 4)</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_テストの無効化">テストの無効化</h4>
<div class="paragraph">
<p>このテストでは、テスト・メソッドを一時的に無効にする方法を示します。JUnit 3では、名前の先頭が <code>test</code> でないメソッドはテスト・メソッドとして認識されません。この例では、テスト・メソッドの名前の前に <code>DISABLED_</code> を付加して無効にします。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>生成されたテスト・メソッド <code>testNormalizeWord</code> を削除します。</p>
</li>
<li>
<p>次のテスト・メソッドをテスト・クラスに追加します。<strong>public void testTemporarilyDisabled() throws Exception {
    System.out.println("</strong> UtilsJUnit3Test: test method 4 - checkExpectedException()");
    assertEquals("Malm\u00f6", Utils.normalizeWord("Malmo\u0308"));
}*</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>テスト・クラスを実行すると、テスト・メソッド <code>testTemporarilyDisabled</code> が実行されます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>テスト・メソッドの名前の先頭に <code>DISABLED_</code> (太字で表示)を付加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void *DISABLED_*testTemporarilyDisabled() throws Exception {
    System.out.println("* UtilsJUnit3Test: test method 4 - checkExpectedException()");
    assertEquals("Malm\u00f6", Utils.normalizeWord("Malmo\u0308"));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>比較: <a href="#Exercise_345">テストの無効化(JUnit 4)</a></p>
</div>
<div class="paragraph">
<p>これでテストが記述されたので、テストを実行し、テスト出力を「JUnitテスト結果」ウィンドウで確認できます。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_テストの実行">テストの実行</h3>
<div class="paragraph">
<p>JUnitテストを実行すると、結果がIDEの「テスト結果」ウィンドウに表示されます。個々のJUnitテスト・クラスを実行するか、またはメイン・メニューから「実行」&gt;「_PROJECT_NAME_のテスト」を選択して、プロジェクトのすべてのテストを実行できます。「実行」&gt;「テスト」を選択すると、「テスト・パッケージ」フォルダにあるすべてのテスト・クラスが実行されます。個々のテスト・クラスを実行するには、「テスト・パッケージ」ノードのテスト・クラスを右クリックし、「ファイルを実行」を選択します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>メイン・メニューで「実行」&gt;「メイン・プロジェクトとして設定」を選択し、JUnit-Sampleプロジェクトを選択します。</p>
</li>
<li>
<p>メイン・メニューから「実行」&gt;「プロジェクト(JUnit-Sample)をテスト」を選択します。</p>
</li>
<li>
<p>「ウィンドウ」&gt;「IDEツール」&gt;「テスト結果」を選択して、「テスト結果」ウィンドウを開きます。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>テストの実行時、「JUnitテスト結果」ウィンドウに次の結果のいずれかが表示されます。</p>
</div>
<div class="openblock feature">
<div class="content">
<div class="paragraph">
<p><span class="image left"><a class="image" href="images/junit3-test-pass.png"><img src="images/junit3-test-pass-sm.png" alt="junit3 test pass sm"></a></span></p>
</div>
</div>
</div>
<div class="paragraph">
<p>このイメージ(大きいイメージを表示するにはイメージをクリック)では、プロジェクトがすべてのテストに合格したことがわかります。左ペインには個々のテスト・メソッドの結果が表示され、右ペインにはテスト出力が表示されます。出力を確認すると、テストが実行された順序がわかります。各テスト・メソッドに追加した <code>println</code> により、テストの名前が出力ウィンドウに出力されます。 <code>UtilJUnit3Test</code> では、各テスト・メソッドの前に <code>setUp</code> メソッドが実行されたこと、および各メソッドの後に <code>tearDown</code> メソッドに実行されたことも確認できます。</p>
</div>
<div class="openblock feature">
<div class="content">
<div class="paragraph">
<p><span class="image left"><a class="image" href="images/junit3-test-fail.png"><img src="images/junit3-test-fail-sm.png" alt="junit3 test fail sm"></a></span></p>
</div>
</div>
</div>
<div class="paragraph">
<p>このイメージ(大きいイメージを表示するにはイメージをクリック)では、プロジェクトがテストの1つに失敗したことがわかります。 <code>testTimeout</code> メソッドの完了に時間がかかりすぎ、テスト・スレッドが割込みされたため、テストが失敗しました。ランダムに生成された数字(22991)の階乗の計算に1000ミリ秒以上かかりました。</p>
</div>
<div class="paragraph">
<p>単体テスト・クラス作成後の次の手順は、テスト・スイートの作成です。指定されたテストをグループとして実行し、各テストを個々に実行しなくて済むようにする方法については、<a href="#Exercise_41">JUnit 3テスト・スイートの作成</a>を参照してください。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_junit_4テストの記述">JUnit 4テストの記述</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この課題では、 <code>Vectors.java</code> クラスと <code>Utils.java</code> クラス用のJUnit 4単体テストを作成します。JUnit 4のテスト・ケースはJUnit 3のテスト・ケースと同じですが、テストを記述する構文が簡素化されています。</p>
</div>
<div class="paragraph">
<p>IDEのウィザードを使用して、プロジェクト内のクラスに基づき、テスト・スケルトンを作成します。テスト・スケルトンを作成するためにIDEを初めて使用する際は、JUnitのバージョンを選択するよう求められます。</p>
</div>
<div class="paragraph">
<p>*注意:*テストのデフォルト・バージョンとしてすでにJUnit 3.xを選択している場合は、デフォルト・バージョンをJUnit 4.xに変更する必要があります。JUnitのデフォルト・バージョンを変更するには、「テスト・ライブラリ」ノードを展開し、JUnitライブラリを右クリックして「除去」を選択します。これで、「ライブラリの追加」ダイアログ・ボックスを使用してJUnit 4ライブラリを明示的に追加するか、または新しいテストの作成時にJUnitバージョンの選択を求められたときにバージョン4.xを選択することができます。JUnit 3テストを実行することは可能ですが、新しく作成されるテストではJUnit 4が使用されます。</p>
</div>
<div class="sect2">
<h3 id="_vectors_java_用のテストクラスの作成_2"><code>Vectors.java</code> 用のテスト・クラスの作成</h3>
<div class="paragraph">
<p>この課題では、 <code>Vectors.java</code> 用のJUnitテスト・スケルトンを作成します。</p>
</div>
<div class="paragraph">
<p>*注意:*7.1以前のNetBeans IDEを使用している場合は、JUnitがデフォルトで指定されるため、テスト・フレームワークを指定する必要はありません。NetBeans IDE 7.2では、テスト・フレームワークとしてJUnitまたはTestNGを指定するオプションがあります。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>Vectors.java</code> を右クリックし、「ツール」&gt;「テストを作成」を選択します。</p>
</li>
<li>
<p>「テストを作成」ダイアログで、テスト・クラスの名前を*VectorsJUnit4Test*に変更します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>テスト・クラスの名前を変更するときは、名前が変更されることを警告するメッセージが表示されます。デフォルト名は、テスト対象のクラス名をベースに、末尾に「Test」を追加したものです。たとえば、 <code>MyClass.java</code> クラスの場合、テスト・クラスのデフォルト名は「 <code>MyClassTest.java</code> 」です。JUnit 3とは異なり、JUnit 4ではテスト名の末尾に「Test」を付ける必要はありません。通常はデフォルト名をそのまま使用するのが最適ですが、このチュートリアルでは、すべてのJUnitテストを同じパッケージ内に作成するため、テスト・クラスの名前は一意にします。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「フレームワーク」ドロップダウン・リストで「JUnit」を選択します。</p>
</li>
<li>
<p>「テスト初期化」および「テスト終了」を選択解除します。「OK」をクリックします。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/junit4-vectors-createtests.png" alt="junit4 vectors createtests">
</div>
<div class="title">Figure 6. JUnit 4の「テストを作成」ダイアログ・ボックス</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「JUnitのバージョンを選択」ダイアログ・ボックスで「JUnit 4.x」を選択します。「選択」をクリックします。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/junit4-select-version.png" alt="junit4 select version">
</div>
<div class="title">Figure 7. 「JUnitのバージョンを選択」ダイアログ・ボックス</div>
</div>
<div class="paragraph">
<p>「OK」をクリックすると、IDEによって、「プロジェクト」ウィンドウ内の「テスト・パッケージ」ノードの下にある <code>sample</code> パッケージ内に <code>VectorsJUnit4Test.java</code> テスト・クラスが作成されます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projects-window3.png" alt="projects window3">
</div>
<div class="title">Figure 8. JUnit 3およびJUnit 4テスト・クラスを含むJUnit-Sampleプロジェクトの構造</div>
</div>
<div class="paragraph">
<p>*注意:*プロジェクトには、テストを作成するためのテスト・パッケージ用ディレクトリが必要です。テスト・パッケージ・ディレクトリのデフォルトの場所は、プロジェクトのルート・レベルですが、プロジェクトの「プロパティ」ダイアログでディレクトリ用の別の場所を指定することもできます。</p>
</div>
<div class="paragraph">
<p>エディタで <code>VectorsJUnit3Test.java</code> を表示すると、テスト・メソッドの <code>testEqual</code> と <code>testScalarMultiplication</code> が生成されていることがわかります。 <code>VectorsJUnit4Test.java</code> では、各テスト・メソッドに <code>@Test</code> という注釈が付きます。 <code>Vectors.java</code> 内のメソッド名に基づいてテスト・メソッドの名前が生成されますが、テスト・メソッドの名前の先頭に <code>test</code> を付加する必要はありません。生成された各テスト・メソッドのデフォルトの本体はガイドとしてのみ用意され、実際のテスト・ケースになるように変更する必要があります。</p>
</div>
<div class="paragraph">
<p>メソッドの本体を生成しないようにするには、「テストを作成」ダイアログの「デフォルトのメソッド本体」を選択解除します。</p>
</div>
<div class="paragraph">
<p>また、次のテスト・クラスの初期化メソッドと終了メソッドが生成されました。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@BeforeClass
public static void setUpClass() throws Exception {
}

@AfterClass
public static void tearDownClass() throws Exception {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>JUnit 4のテスト・クラスを作成するときに、クラスの初期化メソッドと終了メソッドがデフォルトで生成されます。注釈 <code>@BeforeClass</code> および <code>@AfterClass</code> は、テスト・クラスの実行前後に実行する必要があるメソッドをマークするために使用されます。メソッドを使用して <code>Vectors.java</code> をテストする必要はないため、これらのメソッドは削除してかまいません。</p>
</div>
<div class="paragraph">
<p>「オプション」ウィンドウでJUnitオプションを構成することにより、デフォルトで生成されるメソッドを構成できます。</p>
</div>
<div class="paragraph">
<p><strong>注意:*JUnit 4テストでは、IDEによって、 <code>org.junit.Assert.</strong></code> のための静的なインポート宣言がデフォルトで追加されることに注意してください。</p>
</div>
</div>
<div class="sect2">
<h3 id="_vectors_java_用のテストメソッドの記述_2"><code>Vectors.java</code> 用のテスト・メソッドの記述</h3>
<div class="paragraph">
<p>この課題では、JUnit <code>assert</code> メソッドを使用してメソッドをテストし、テスト・メソッドの名前を変更するため、生成された各テスト・メソッドを変更します。JUnit 4では、テスト・メソッドが <code>@Test</code> 注釈で示され、テスト・メソッド名の先頭に <code>test</code> を付ける必要がないため、テスト・メソッド名を柔軟に指定できます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>エディタで <code>VectorsJUnit4Test.java</code> を開きます。</p>
</li>
<li>
<p>メソッド名を変更し、 <code>println</code> の値を変更して生成された変数を除去することによって、 <code>testScalarMultiplication</code> のテスト・メソッドを変更します。テスト・メソッドは次のようになるはずです(太字部分が変更箇所)。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Test
public void *ScalarMultiplicationCheck*() {
    System.out.println("** VectorsJUnit4Test: ScalarMultiplicationCheck()*");
    assertEquals(expResult, result);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>*注意:*テストを記述する際に、プリントされた出力を変更する必要はありません。これはこの課題で行うため、テスト結果を出力ウィンドウで確認しやすくなります。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ここで、メソッドをテストするためのアサーションを追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Test
public void ScalarMultiplicationCheck() {
    System.out.println("* VectorsJUnit4Test: ScalarMultiplicationCheck()");
    *assertEquals(  0, Vectors.scalarMultiplication(new int[] { 0, 0}, new int[] { 0, 0}));
    assertEquals( 39, Vectors.scalarMultiplication(new int[] { 3, 4}, new int[] { 5, 6}));
    assertEquals(-39, Vectors.scalarMultiplication(new int[] {-3, 4}, new int[] { 5,-6}));
    assertEquals(  0, Vectors.scalarMultiplication(new int[] { 5, 9}, new int[] {-9, 5}));
    assertEquals(100, Vectors.scalarMultiplication(new int[] { 6, 8}, new int[] { 6, 8}));*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>このテスト・メソッドでは、JUnit <code>assertEquals</code> メソッドを使用します。アサーションを使用するには、入力変数と、期待する結果を指定します。テストに合格するには、テスト済メソッドを実行したときに、テスト・メソッドが供給した変数に基づいて、期待されるすべての結果を正常に返す必要があります。様々な考えられる並べ替えを実行するため、十分な数のアサーションを追加するようにしてください。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>testEqual</code> テスト・メソッドの名前を <code>equalsCheck</code> に変更します。</p>
</li>
<li>
<p><code>equalsCheck</code> テスト・メソッドの生成されたメソッドの本文を削除します。</p>
</li>
<li>
<p>次の <code>println</code> を <code>equalsCheck</code> テスト・メソッドに追加します。<strong>System.out.println("</strong> VectorsJUnit4Test: equalsCheck()");*</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>テスト・メソッドは次のようになるはずです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Test
public void equalsCheck() {
    System.out.println("* VectorsJUnit4Test: equalsCheck()");
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>次のアサーション(太字で表示)を追加することによって、 <code>equalsCheck</code> メソッドを変更します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Test
public void equalsCheck() {
    System.out.println("* VectorsJUnit4Test: equalsCheck()");
    *assertTrue(Vectors.equal(new int[] {}, new int[] {}));
    assertTrue(Vectors.equal(new int[] {0}, new int[] {0}));
    assertTrue(Vectors.equal(new int[] {0, 0}, new int[] {0, 0}));
    assertTrue(Vectors.equal(new int[] {0, 0, 0}, new int[] {0, 0, 0}));
    assertTrue(Vectors.equal(new int[] {5, 6, 7}, new int[] {5, 6, 7}));

    assertFalse(Vectors.equal(new int[] {}, new int[] {0}));
    assertFalse(Vectors.equal(new int[] {0}, new int[] {0, 0}));
    assertFalse(Vectors.equal(new int[] {0, 0}, new int[] {0, 0, 0}));
    assertFalse(Vectors.equal(new int[] {0, 0, 0}, new int[] {0, 0}));
    assertFalse(Vectors.equal(new int[] {0, 0}, new int[] {0}));
    assertFalse(Vectors.equal(new int[] {0}, new int[] {}));

    assertFalse(Vectors.equal(new int[] {0, 0, 0}, new int[] {0, 0, 1}));
    assertFalse(Vectors.equal(new int[] {0, 0, 0}, new int[] {0, 1, 0}));
    assertFalse(Vectors.equal(new int[] {0, 0, 0}, new int[] {1, 0, 0}));
    assertFalse(Vectors.equal(new int[] {0, 0, 1}, new int[] {0, 0, 3}));*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>このテストはJUnitの <code>assertTrue</code> メソッドと <code>assertFalse</code> メソッドを使用して、考えられる様々な結果をテストします。このメソッドのテストに合格するには、 <code>assertTrue</code> がすべてtrue、 <code>assertFalse</code> がすべてfalseである必要があります。</p>
</div>
<div class="paragraph">
<p>比較: <a href="#Exercise_22"><code>Vectors.java</code> 用のテスト・メソッドの記述(JUnit 3)</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_utils_java_用のテストクラスの作成_2"><code>Utils.java</code> 用のテスト・クラスの作成</h3>
<div class="paragraph">
<p>ここで、 <code>Utils.java</code> のJUnitテスト・メソッドを作成します。前の課題でテスト・クラスを作成したとき、JUnitのバージョンを確認するメッセージが表示されました。すでにJUnitバージョンを選択したため、以降に作成されたすべてのJUnitテストはそのバージョンなので、今回はバージョンの選択を求めるメッセージは表示されません。</p>
</div>
<div class="paragraph">
<p>*注意:*バージョンとしてJUnit 4を選択してもJUnit 3のテストを記述して実行することはできますが、テスト・スケルトンの生成にはJUnit 4のテンプレートが使用されます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>Utils.java</code> を右クリックし、「ツール」&gt;「テストを作成」を選択します。</p>
</li>
<li>
<p>「フレームワーク」ドロップダウン・リストで「JUnit」が選択されていない場合は選択します。</p>
</li>
<li>
<p>ダイアログ・ボックスで「テスト初期化」および「テスト終了」が選択されていない場合は選択します。</p>
</li>
<li>
<p>「テストを作成」ダイアログ・ボックスで、テスト・クラスの名前を*UtilsJUnit4Test*に変更します。「OK」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「OK」をクリックすると、IDEによって、「テスト・パッケージ」のsampleディレクトリ内にテスト・ファイル <code>UtilsJUnit4Test.java</code> が作成されます。 <code>Utils.java</code> 内にあるメソッド用に、 <code>testComputeFactorial</code> 、 <code>testConcatWords</code> 、 <code>testNormalizeWord</code> の各テスト・メソッドが生成されたことがわかります。テストおよびテスト・クラスに対して初期化メソッドと終了メソッドも生成されます。</p>
</div>
</div>
<div class="sect2">
<h3 id="_utils_java_用のテストメソッドの記述_2"><code>Utils.java</code> 用のテスト・メソッドの記述</h3>
<div class="paragraph">
<p>この課題では、JUnitで共通のテスト要素の一部を示すテスト・ケースを追加します。一部のメソッドは、メソッドが実行されたことやメソッドがテストに合格したことを示す出力を「JUnitテスト結果」ウィンドウにプリントしないため、メソッドに <code>println</code> も追加します。 <code>println</code> をメソッドに追加することで、メソッドが実行されたかどうか、およびどの順番でメソッドが実行されたかを確認できます。</p>
</div>
<div class="sect3">
<h4 id="_テスト初期化およびテスト終了_2">テスト初期化およびテスト終了</h4>
<div class="literalblock">
<div class="content">
<pre>``Utils.java`` 用のテスト・クラスを作成するとき、注釈付きの初期化メソッドと終了メソッドが生成されます。メソッド名には必須の命名規則がないため、任意の名前を付けることができます。</pre>
</div>
</div>
<div class="paragraph">
<p><strong>注意:</strong> <code>Utils.java</code> のテストに初期化メソッドと終了メソッドは必要ありませんが、このチュートリアルではそれらの機能を示すために含めます。</p>
</div>
<div class="paragraph">
<p>JUnit 4では、次のタイプの初期化メソッドと終了メソッドをマークするために注釈を使用できます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>テスト・クラス初期化。</strong> <code>@BeforeClass</code> 注釈により、メソッドがテスト・クラス初期化メソッドとしてマークされます。テスト・クラス初期化メソッドは、テスト・クラス内の他のメソッドの前に、1回のみ実行されます。たとえば、テスト初期化でデータベース接続を作成したり、各テスト・メソッドの前に新しい接続を作成するかわりに、テストを実行する前にテスト・クラス初期化を使用して接続を開きます。続いて、テスト・クラス終了を使用して接続を閉じます。</p>
</li>
<li>
<p><strong>テスト・クラス終了。</strong> <code>@AfterClass</code> 注釈により、メソッドがテスト・クラス終了メソッドとしてマークされます。テスト・クラス終了メソッドは、テスト・クラス内の他のすべてのメソッドが終了した後、1回のみ実行されます。</p>
</li>
<li>
<p><strong>テスト初期化。</strong> <code>@Before</code> 注釈により、メソッドがテスト初期化メソッドとしてマークされます。テスト初期化メソッドは、テスト・クラスの各テスト・ケースの前に実行されます。テストの実行にテスト初期化メソッドは必須ではありませんが、テストの実行前に一部の変数を初期化する必要がある場合は、テスト初期化メソッドを使用します。</p>
</li>
<li>
<p><strong>テスト終了。</strong> <code>@After</code> 注釈により、メソッドがテスト終了メソッドとしてマークされます。テスト終了メソッドは、テスト・クラスの各テスト・ケースの後に実行されます。テストの実行にテスト終了メソッドは必須ではありませんが、テスト・ケースの実行時に求められたデータをクリーン・アップするために終了メソッドが必要になる場合があります。</p>
<div class="literalblock">
<div class="content">
<pre>``UtilsJUnit4Test.java`` で、次の変更(太字で表示されています)を行います。</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@BeforeClass
public static void setUpClass() throws Exception {
    *System.out.println("* UtilsJUnit4Test: @BeforeClass method");*
}

@AfterClass
public static void tearDownClass() throws Exception {
    *System.out.println("* UtilsJUnit4Test: @AfterClass method");*
}

@Before
public void setUp() {
    *System.out.println("* UtilsJUnit4Test: @Before method");*
}

@After
public void tearDown() {
    *System.out.println("* UtilsJUnit4Test: @After method");*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>比較: <a href="#Exercise_241">テストの初期化および終了(JUnit 3)</a></p>
</div>
<div class="paragraph">
<p>テスト・クラスを実行すると、追加した <code>println</code> テキストが「JUnitテスト結果」ウィンドウの出力ペインに表示されます。 <code>println</code> を追加しない場合、初期化メソッドと終了メソッドが実行されたことを示す出力は表示されません。</p>
</div>
</div>
<div class="sect3">
<h4 id="_単純なアサーションを使用したテスト_2">単純なアサーションを使用したテスト</h4>
<div class="paragraph">
<p>この単純なテスト・ケースでは、 <code>concatWords</code> メソッドをテストします。生成されたテスト・メソッドの <code>testConcatWords</code> を使用するかわりに、単一の単純なアサーションを使用してメソッドが文字列を正しく連結するかどうかをテストする、 <code>helloWorldCheck</code> という新しいテスト・メソッドを追加します。テスト・ケースの <code>assertEquals</code> では、予想した結果と実際の結果が同じであるかどうかをテストするために、構文 <code>assertEquals(<em>EXPECTED_RESULT, ACTUAL_RESULT</em>)</code> が使用されます。この例では、 <code>concatWords</code> メソッドへの入力が「 <code>Hello</code> 」、「 <code>,</code> 」、「 <code>world</code> 」および「 <code>!</code> 」の場合、予想結果は「 <code>Hello, world!</code> 」と同じになるはずです。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>生成された <code>testConcatWords</code> テスト・メソッドを削除します。</p>
</li>
<li>
<p><code>Utils.concatWords</code> をテストするため、次の <code>helloWorldCheck</code> メソッドを追加します。<strong>@Test
public void helloWorldCheck() {
    assertEquals("Hello, world!", Utils.concatWords("Hello", ", ", "world", "!"));
}</strong></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>テストに関するテキストを「JUnitテスト結果」ウィンドウに表示するため、 <code>println</code> 文を追加します。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Test
public void helloWorldCheck() {
    *System.out.println("* UtilsJUnit4Test: test method 1 - helloWorldCheck()");*
    assertEquals("Hello, world!", Utils.concatWords("Hello", ", ", "world", "!"));</code></pre>
</div>
</div>
<div class="paragraph">
<p>比較: <a href="#Exercise_242">単純なアサーションを使用したテスト(JUnit 3)</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_タイムアウトを使用したテスト_2">タイム・アウトを使用したテスト</h4>
<div class="paragraph">
<p>このテストでは、メソッドの完了までに時間がかかりすぎているかどうかを確認する方法を示します。メソッドの時間がかかりすぎている場合は、テスト・スレッドが割込みされ、テストは失敗します。テストでは時間制限を指定できます。</p>
</div>
<div class="paragraph">
<p>テスト・メソッドにより、 <code>Utils.java</code> の <code>computeFactorial</code> メソッドが呼び出されます。 <code>computeFactorial</code> メソッドは正しいと想定できますが、ここでテストするのは、計算が1000ミリ秒以内に完了するかどうかです。これは、1000ミリ秒後にテスト・スレッドが割込みされることによって行います。スレッドが割込みされると、テスト・メソッドは <code>TimeoutException</code> をスローします。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>生成されたテスト・メソッド <code>testComputeFactorial</code> を削除します。</p>
</li>
<li>
<p>ランダムに生成された数字の階乗を計算する <code>testWithTimeout</code> メソッドを追加します。<strong>@Test
public void testWithTimeout() {
    final int factorialOf = 1 + (int) (30000 * Math.random());
    System.out.println("computing " + factorialOf + '!');
    System.out.println(factorialOf + "! = " + Utils.computeFactorial(factorialOf));
}</strong></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>タイム・アウトを設定し、メソッドの実行に時間がかかりすぎる場合にスレッドが割込みされるようにするには、次のコード(太字で表示)を追加します。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Test*(timeout=1000)*
public void testWithTimeout() {
    final int factorialOf = 1 + (int) (30000 * Math.random());</code></pre>
</div>
</div>
<div class="paragraph">
<p>タイム・アウトが1000ミリ秒に設定されていることがわかります。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>テストに関するテキストを「JUnitテスト結果」ウィンドウに出力するには、次の <code>println</code> (太字で表示)を追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Test(timeout=1000)
public void testWithTimeout() {
    *System.out.println("* UtilsJUnit4Test: test method 2 - testWithTimeout()");*
    final int factorialOf = 1 + (int) (30000 * Math.random());
    System.out.println("computing " + factorialOf + '!');</code></pre>
</div>
</div>
<div class="paragraph">
<p>比較: <a href="#Exercise_243">タイム・アウトを使用したテスト(JUnit 3)</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_予想される例外のテスト_2">予想される例外のテスト</h4>
<div class="paragraph">
<p>このテストでは、予想される例外のテスト方法を示します。このメソッドは、予想される指定の例外がスローされない場合、失敗します。この例では、入力変数が負の数(-5)の場合に、 <code>computeFactorial</code> メソッドが <code>IllegalArgumentException</code> をスローするかどうかをテストします。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>computeFactorial</code> メソッドを呼び出す次の <code>testExpectedException</code> メソッドを、-5の入力とともに追加します。<strong>@Test
public void checkExpectedException() {
    final int factorialOf = -5;
    System.out.println(factorialOf + "! = " + Utils.computeFactorial(factorialOf));
}</strong></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>テストが <code>IllegalArgumentException</code> をスローするように指定するには、次のプロパティ(太字で表示)を <code>@Test</code> 注釈に追加します。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Test*(expected=IllegalArgumentException.class)*
public void checkExpectedException() {
    final int factorialOf = -5;
    System.out.println(factorialOf + "! = " + Utils.computeFactorial(factorialOf));
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>テストに関するテキストを「JUnitテスト結果」ウィンドウに出力するには、次の <code>println</code> (太字で表示)を追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Test (expected=IllegalArgumentException.class)
public void checkExpectedException() {
    *System.out.println("* UtilsJUnit4Test: test method 3 - checkExpectedException()");*
    final int factorialOf = -5;
    System.out.println(factorialOf + "! = " + Utils.computeFactorial(factorialOf));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>比較: <a href="#Exercise_244">予想される例外のテスト(JUnit 3)</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_テストの無効化_2">テストの無効化</h4>
<div class="paragraph">
<p>このテストでは、テスト・メソッドを一時的に無効にする方法を示します。JUnit 4でテストを無効にするには、単純に <code>@Ignore</code> 注釈を追加します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>生成されたテスト・メソッド <code>testNormalizeWord</code> を削除します。</p>
</li>
<li>
<p>次のテスト・メソッドをテスト・クラスに追加します。<strong>@Test
public void temporarilyDisabledTest() throws Exception {
    System.out.println("</strong> UtilsJUnit4Test: test method 4 - checkExpectedException()");
    assertEquals("Malm\u00f6", Utils.normalizeWord("Malmo\u0308"));
}*</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>テスト・クラスを実行すると、テスト・メソッド <code>temporarilyDisabledTest</code> が実行されます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>テストを無効にするには、 <code>@Test</code> の上に <code>@Ignore</code> 注釈(太字で表示)を追加します。<strong>@Ignore</strong></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Test
public void temporarilyDisabledTest() throws Exception {
    System.out.println("* UtilsJUnit4Test: test method 4 - checkExpectedException()");
    assertEquals("Malm\u00f6", Utils.normalizeWord("Malmo\u0308"));
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>org.junit.Ignore</code> をインポートするために、インポートを修正します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>比較: <a href="#Exercise_245">テストの無効化(JUnit 3)</a></p>
</div>
<div class="paragraph">
<p>これでテストが記述されたので、テストを実行し、テスト出力を「JUnitテスト結果」ウィンドウで確認できます。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_テストの実行_2">テストの実行</h3>
<div class="paragraph">
<p>アプリケーション全体または個々のファイルでJUnitテストを実行し、結果をIDEで確認できます。プロジェクトのすべての単体テストを最も簡単な方法で実行するには、メイン・メニューから「実行」&gt;「_&lt;プロジェクト名&gt;_のテスト」を選択します。この方法を選択すると、「テスト・パッケージ」内のすべてのテストが実行されます。個々のテスト・クラスを実行するには、「テスト・パッケージ」ノードのテスト・クラスを右クリックし、「ファイルを実行」を選択します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウで <code>UtilsJUnit4Test.java</code> を右クリックします。</p>
</li>
<li>
<p>「ファイルをテスト」を選択します。</p>
</li>
<li>
<p>「ウィンドウ」&gt;「IDEツール」&gt;「テスト結果」を選択して、「テスト結果」ウィンドウを開きます。</p>
<div class="literalblock">
<div class="content">
<pre>``UtilsJUnit4Test.java`` を実行するときは、テスト・クラス内のテストのみが実行されます。クラスがすべてのテストに合格すると、次のイメージに似た内容が「JUnitテスト結果」ウィンドウに表示されます。</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="openblock feature">
<div class="content">
<div class="paragraph">
<p><span class="image left"><a class="image" href="images/junit4-utilstest-pass.png"><img src="images/junit4-utilstest-pass-sm.png" alt="junit4 utilstest pass sm"></a></span></p>
</div>
</div>
</div>
<div class="paragraph">
<p>このイメージ(大きいイメージを表示するにはイメージをクリック)では、IDEにより <code>Utils.java</code> でJUnitテストが実行されたこと、およびクラスがすべてのテストに合格したことがわかります。左ペインには個々のテスト・メソッドの結果が表示され、右ペインにはテスト出力が表示されます。出力を確認すると、テストが実行された順序がわかります。各テスト・メソッドに追加した <code>println</code> により、テストの名前が「テスト結果」ウィンドウおよび「出力」ウィンドウに出力されます。</p>
</div>
<div class="literalblock">
<div class="content">
<pre>``UtilsJUnit4Test`` で、 ``@BeforeClass`` という注釈が付いたテスト・クラス初期化メソッドが、他のメソッドより先に1回のみ実行されたことがわかります。 ``@AfterClass`` という注釈が付いたテスト・クラス終了メソッドが、クラス内の他のすべてのメソッドが実行された後で最後に実行されました。 ``@Before`` という注釈が付いたテスト初期化メソッドが各テスト・メソッドより先に実行されました。</pre>
</div>
</div>
<div class="paragraph">
<p>「テスト結果」ウィンドウの左側にあるコントロールを使用すると、テストを簡単に再実行できます。フィルタを使用すると、すべてのテスト結果の表示と失敗したテストのみの表示を切り替えることができます。矢印を使用して、次の失敗または前の失敗にスキップできます。</p>
</div>
<div class="paragraph">
<p>「テスト結果」ウィンドウでテスト結果を右クリックすると、ポップアップ・メニューを使用してテストのソースに移動したり、テストを再度実行したり、テストをデバッグしたりできます。</p>
</div>
<div class="paragraph">
<p>単体テスト・クラス作成後の次の手順は、テスト・スイートの作成です。指定されたテストをグループとして実行し、各テストを個々に実行しなくて済むようにする方法については、<a href="#Exercise_42">JUnit 4テスト・スイートの作成</a>を参照してください。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_テストスイートの作成">テスト・スイートの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>プロジェクト用のテストを作成するときは通常、多数のテスト・クラスができます。テスト・クラスを個別に実行することも、プロジェクト内のすべてのテストをまとめて実行することもできます。多くの場合、テストのサブセットを実行するか、特定の順序でテストを実行します。これは、1つまたは複数のテスト・スイートを作成することで実現できます。たとえば、コードの特定の側面または特定の条件をテストするテスト・スイートを作成できます。</p>
</div>
<div class="paragraph">
<p>テスト・スイートとは、基本的にメソッドを持つクラスであり、特定のテスト・クラス、テスト・クラス内のテスト・メソッド、およびその他のテスト・スイートなどの指定したテスト・ケースを起動します。テスト・スイートはテスト・クラスの一部として含めることができますが、ベスト・プラクティスとしては、個々のテスト・スイート・クラスを作成することをお薦めします。</p>
</div>
<div class="paragraph">
<p>プロジェクト用のJUnit 3およびJUnit 4のテスト・スイートは、手動で作成することも、IDEが生成することもできます。IDEを使用してテスト・スイートを生成すると、デフォルトで、同じパッケージ内のすべてのテスト・クラスをテスト・スイートとして呼び出すコードが生成されます。テスト・スイートを作成した後、スイートの一部として実行するテストを指定するようにクラスを変更できます。</p>
</div>
<div class="sect2">
<h3 id="_junit_3テストスイートの作成">JUnit 3テスト・スイートの作成</h3>
<div class="paragraph">
<p>テストのバージョンとしてJUnit 3を選択した場合、IDEではテスト・パッケージのテスト・クラスに基づいてJUnit 3テスト・スイートが生成されます。JUnit 3では、 <code>TestSuite</code> のインスタンスを作成し、各テストに対して <code>addTest</code> メソッドを使用することによって、テスト・スイートに含めるテスト・クラスを指定します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウで「<strong>JUnit-Sample</strong>」プロジェクト・ノードを右クリックし、「新規」&gt;「その他」を選択して新規ファイル・ウィザードを開きます。</p>
</li>
<li>
<p>「単体テスト」カテゴリで「テスト・スイート」を選択します。「次」をクリックします。</p>
</li>
<li>
<p>「クラス名」に「<strong>JUnit3TestSuite</strong>」と入力します。</p>
</li>
<li>
<p>テスト・スイートを作成するため、テスト・パッケージ・フォルダのサンプル・フォルダにある <code>sample</code> パッケージを選択します。</p>
</li>
<li>
<p>「テスト初期化」および「テスト終了」を選択解除します。「終了」をクリックします。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/junit-testsuite-wizard.png" alt="junit testsuite wizard">
</div>
<div class="title">Figure 9. JUnitのテスト・スイート・ウィザード</div>
</div>
<div class="paragraph">
<p>「終了」をクリックすると、 <code>sample</code> パッケージにテスト・スイート・クラスが作成され、クラスがエディタに表示されます。このテスト・スイートには次のコードが含まれます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class JUnit3TestSuite extends TestCase {
    public JUnit3TestSuite(String testName) {
        super(testName);
    }

    public static Test suite() {
        TestSuite suite = new TestSuite("JUnit3TestSuite");
        return suite;
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>suite()</code> メソッドを変更して、このスイートの一部として実行されるテスト・クラスを追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public JUnit3TestSuite(String testName) {
    super(testName);
}

public static Test suite() {
    TestSuite suite = new TestSuite("JUnit3TestSuite");
    *suite.addTest(new TestSuite(sample.VectorsJUnit3Test.class));
    suite.addTest(new TestSuite(sample.UtilsJUnit3Test.class));*
    return suite;
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>変更を保存します。</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_junit_4テストスイートの作成">JUnit 4テスト・スイートの作成</h3>
<div class="paragraph">
<p>テストのバージョンとしてJUnit 4を選択した場合、IDEではJUnit 4テスト・スイートを生成できます。JUnit 4は下位互換性があるので、JUnit 4とJUnit 3のどちらのテストを含むJUnit 4テスト・スイートも実行できます。JUnit 4のテスト・スイートでは、テスト・スイートに含めるテスト・クラスを <code>@Suite</code> 注釈の値として指定します。</p>
</div>
<div class="paragraph">
<p>*注意:*JUnit 3のテスト・スイートをJUnit 4のテスト・スイートとして実行するには、JUnit 4.4以上が必要です。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウでプロジェクト・ノードを右クリックし、「新規」&gt;「その他」を選択して新規ファイル・ウィザードを開きます。</p>
</li>
<li>
<p>「単体テスト」カテゴリで「テスト・スイート」を選択します。「次」をクリックします。</p>
</li>
<li>
<p>ファイル名に「<strong>JUnit4TestSuite</strong>」と入力します。</p>
</li>
<li>
<p>テスト・スイートを作成するため、テスト・パッケージ・フォルダのサンプル・フォルダにある <code>sample</code> パッケージを選択します。</p>
</li>
<li>
<p>「テスト初期化」および「テスト終了」を選択解除します。「終了」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「終了」をクリックすると、 <code>sample</code> パッケージにテスト・スイート・クラスが作成され、クラスがエディタに表示されます。このテスト・スイートには次のようなコードが含まれます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@RunWith(Suite.class)
@Suite.SuiteClasses(value={UtilsJUnit4Test.class, VectorsJUnit4Test.class})
public class JUnit4TestSuite {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>このテスト・スイートを実行すると、IDEによって各テスト・クラスが、リストされている順序で実行されます。</p>
</div>
</div>
<div class="sect2">
<h3 id="_テストスイートの実行">テスト・スイートの実行</h3>
<div class="paragraph">
<p>テスト・スイートは、個々のテスト・クラスを実行する場合と同じ方法で実行します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウで「テスト・パッケージ」ノードを展開します。</p>
</li>
<li>
<p>テスト・スイート・クラスを右クリックし、「ファイルをテスト」を選択します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>テスト・スイートを実行すると、スイートに含まれるテストが一覧表示された順に実行されます。結果は「JUnitテスト結果」ウィンドウに表示されます。</p>
</div>
<div class="openblock feature">
<div class="content">
<div class="paragraph">
<p><span class="image left"><a class="image" href="images/junit3-suite-results.png"><img src="images/junit3-suite-results-sm.png" alt="junit3 suite results sm"></a></span></p>
</div>
</div>
</div>
<div class="paragraph">
<p>このイメージ(大きいイメージを表示するにはイメージをクリック)では、JUnit 3テスト・スイートのテスト結果がわかります。テスト・スイートにより <code>UtilsJUnit3Test</code> テスト・クラスと <code>VectorsJUnit3Test</code> テスト・クラスが単一のテストとして実行され、単一テストの結果として、テスト結果が左ペインに表示されました。右ペインの出力は、テストを個別に実行した場合と同じ内容です。</p>
</div>
<div class="openblock feature">
<div class="content">
<div class="paragraph">
<p><span class="image left"><a class="image" href="images/junit4-suite-results.png"><img src="images/junit4-suite-results-sm.png" alt="junit4 suite results sm"></a></span></p>
</div>
</div>
</div>
<div class="paragraph">
<p>このイメージ(大きいイメージを表示するにはイメージをクリック)では、JUnit 4テスト・スイートのテスト結果がわかります。テスト・スイートにより <code>UtilsJUnit4Test</code> テスト・クラスと <code>VectorsJUnit4Test</code> テスト・クラスが単一のテストとして実行され、単一のテストの結果としてテスト結果が左ペインに表示されました。右ペインの出力は、テストを個別に実行した場合と同じ内容です。</p>
</div>
<div class="openblock feature">
<div class="content">
<div class="paragraph">
<p><span class="image left"><a class="image" href="images/junitmix3and4-suite-results.png"><img src="images/junitmix3and4-suite-results-sm.png" alt="junitmix3and4 suite results sm"></a></span></p>
</div>
</div>
</div>
<div class="paragraph">
<p>このイメージ(大きいイメージを表示するにはイメージをクリック)では、混合型のテスト・スイートのテスト結果がわかります。このテスト・スイートにはJUnit 4テスト・スイートとJUnit 3のテスト・クラスのうち1つが含まれています。テスト・スイートにより <code>UtilsJUnit3Test.java</code> テスト・クラスと <code>JUnit4TestSuite.java</code> テスト・クラスが単一のテストとして実行され、単一のテストの結果としてテスト結果が左ペインに表示されました。右ペインの出力は、テストを個別に実行した場合と同じ内容です。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_サマリー">サマリー</h2>
<div class="sectionbody">
<div class="paragraph">
<p>このチュートリアルでは、NetBeans IDEでJUnit単体テストとテスト・スイートを作成するための基本を紹介しました。IDEではJUnit 3およびJUnit 4がサポートされており、このドキュメントでは、テストの作成および実行をより簡素化するように設計されているJUnit 4での変更点をいくつか示しました。</p>
</div>
<div class="paragraph">
<p>このチュートリアルで示されているように、JUnit 4での主な改善点の1つは注釈のサポートです。JUnit 4では、注釈を使用して次を行うことができます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>命名規則のかわりに <code>@Test</code> 注釈を使用してテストを識別する</p>
</li>
<li>
<p><code>@Before</code> 注釈および <code>@After</code> 注釈を使用して、 <code>setUp</code> メソッドおよび <code>tearDown</code> メソッドを識別する</p>
</li>
<li>
<p>テスト・クラス全体に適用する <code>setUp</code> メソッドおよび <code>tearDown</code> メソッドを識別する。 <code>@BeforeClass</code> という注釈が付いたメソッドは、クラス内の任意のテスト・メソッドが実行される前に、1回のみ実行されます。 <code>@AfterClass</code> という注釈が付いたメソッドも、すべてのテスト・メソッドが終了した後に、1回のみ実行されます。</p>
</li>
<li>
<p>予期している例外を識別する</p>
</li>
<li>
<p><code>@Ignore</code> 注釈を使用して省略するテストを識別する</p>
</li>
<li>
<p>テストのタイム・アウト・パラメータを指定する</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>JUnitの使用およびJUnit 4でのその他の変更点に関する詳細は、次のリソースを参照してください。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://tech.groups.yahoo.com/group/junit/">YahooグループのJUnitグループ</a></p>
</li>
<li>
<p><a href="http://www.junit.org">www.junit.org</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>コードのテストは、コードにわずかな変更を加えてもアプリケーションが壊れないことを確認するのに役立ちます。JUnitなどの自動テスト・ツールを使用するとテストのプロセスを合理化でき、テストを頻繁に行うことでコード・エラーを早期に発見できます。</p>
</div>
<div class="paragraph">
<p><a href="https://netbeans.org/about/contact_form.html?to=3&amp;subject=Feedback:%20Writing%20JUnit%20Tests%20in%20NetBeans%20IDE">このチュートリアルに関するご意見をお寄せください</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_関連項目">関連項目</h2>
<div class="sectionbody">
<div class="paragraph">
<p>NetBeans IDEを使用したJavaアプリケーションの開発方法の詳細は、次のリソースを参照してください。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>_NetBeans IDEによるアプリケーションの開発_の<a href="http://www.oracle.com/pls/topic/lookup?ctx=nb8000&amp;id=NBDAG366">Javaプロジェクトの作成</a></p>
</li>
<li>
<p><a href="../../trails/java-se.html">基本的なIDEおよびJavaプログラミングの学習</a></p>
</li>
</ul>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/java/junit-intro_ja.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
