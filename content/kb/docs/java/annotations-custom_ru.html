
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Поддержка обработчиков аннотаций в IDE NetBeans (часть II) Использование пользовательских обработчиков аннотаций в IDE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Поддержка обработчиков аннотаций в IDE NetBeans (часть II) Использование пользовательских обработчиков аннотаций в IDE - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Поддержка обработчиков аннотаций в IDE NetBeans (часть II) Использование пользовательских обработчиков аннотаций в IDE">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 12.6</h1>
            <p><a class="button success" href="/download/nb126/nb126.html">Download</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">Поддержка обработчиков аннотаций в IDE NetBeans (часть II) Использование пользовательских обработчиков аннотаций в IDE</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/java/annotations-custom_ru.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_определение_аннотации_и_создание_обработчика_аннотаций">Определение аннотации и создание обработчика аннотаций</a></li>
<li><a href="#_работа_с_обработчиком_аннотаций_в_среде_ide">Работа с обработчиком аннотаций в среде IDE</a></li>
<li><a href="#_дополнительные_сведения">Дополнительные сведения</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>_Составитель:, автор и редактор: Ирина Филиппова (Irina Filippova) _</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Использование пользовательских обработчиков аннотаций в среде IDE</strong></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../images_www/articles/71/netbeans-stamp-71-72-73.png" alt="netbeans stamp 71 72 73">
</div>
<div class="title">Figure 1. Содержимое этой страницы применимо к IDE NetBeans 7.0, 7.1, 7.2 и 7.3</div>
</div>
<div class="paragraph">
<p>В этом разделе учебного курса описываются способы добавления собственного обработчика особых аннотаций в проект в среде IDE. Написание обработчика не входит в круг задач данного учебного курса. Здесь описывается добавление его к проекту IDE NetBeans.</p>
</div>
<div class="paragraph">
<p>Образец приложения, используемый в этом приложении, был создан Джесси Глик (Jesse Glick) и опубликован как <a href="http://wiki.netbeans.org/FaqApt">Часто задаваемые вопросы по вводу</a> для предыдущих выпусков IDE.</p>
</div>
<div class="paragraph">
<p>Обработчик аннотаций, используемый в качестве примера, создает родительский класс для аннотированного класса. Созданный родительский класс также содержит метод, вызываемый из аннотированного класса. Следуйте указаниям по созданию и добавлению обработчика особых аннотаций в проект среды IDE, приведенным ниже.</p>
</div>
<div class="paragraph">
<p><strong>Для работы с этим учебным курсом требуются программное обеспечение и ресурсы, перечисленные ниже.</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Программное обеспечение или материал</th>
<th class="tableblock halign-left valign-top">Требуемая версия</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">IDE NetBeans</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7.0, 7.1, 7.2, 7.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Комплект для разработчика на языке Java (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">версия 6 или 7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://code.google.com/p/projectlombok/downloads/list">lombok.jar</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">версия 1.12.4 и более поздние</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_определение_аннотации_и_создание_обработчика_аннотаций">Определение аннотации и создание обработчика аннотаций</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом упражнении мы создадим проект библиотеки классов.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите File ("Файл") &gt; New Project ("Создать проект") и выберите тип проекта Java Class Library ("Библиотека классов Java") в категории Java. Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Введите * <code>AnnProcessor</code> * в поле "Имя проекта" и укажите местоположение для проекта. Нажмите кнопку "Завершить".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Готово" среда IDE создаст проект библиотеки классов, который появится в окне Projects ("Проекты").</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел проекта AnnProcessor в окне Projects ("Проекты") и выберите Properties ("Свойства").</p>
</li>
<li>
<p>В категории "Источники" подтвердите, что для JDK 6 или JDK 7 указан формат исходного кода/двоичный формат.</p>
</li>
<li>
<p>Выберите вкладку "Библиотеки" и подтвердите, что платформой Java является JDK 1.6 или JDK 1.7. Нажмите кнопку "ОК", чтобы закрыть окно Project Properties ("Свойства проекта").</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>В этом упражнении мы создадим несколько пакетов Java и по одному классу Java в каждом из пакетов.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В проекте 'AnnProcessor' щелкните правой кнопкой мыши узел 'Пакеты исходных кодов' и выберите 'Создать &gt; Пакет Java'.</p>
</li>
<li>
<p>Введите * <code>ann</code> * в поле "Имя пакета" и нажмите кнопку "Готово" для создания нового пакета Java.</p>
</li>
<li>
<p>Повторите два предыдущих действия, чтобы создать пакет Java под названием * <code>proc</code> *.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>После создания двух пакетов Java структура проекта должна быть подобной изображенной ниже.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/packages.png" alt="packages">
</div>
<div class="title">Figure 2. Структура проекта для обработчика аннотаций.</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши пакет Java  <code>ann</code>  и выберите New ("Создать") &gt; Java class ("Класс Java").</p>
</li>
<li>
<p>Введите * <code>Handleable</code> * в поле Class Name ("Имя класса"). Нажмите кнопку "Завершить".</p>
</li>
<li>
<p>Измените файл  <code>Handleable.java</code> , добавив приведенный ниже код. Сохраните файл.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package ann;

public *@interface* Handleable {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Так объявляются аннотации&#8201;&#8212;&#8201;совершенно аналогично объявлению интерфейса. Различием является то, что ключевому слову  <code>interface</code>  должен предшествовать знак  <code>@</code> . Эта аннотация именуется  <code>Handleable</code>  (обрабатываемой).</p>
</div>
<div class="paragraph">
<p><strong>Дополнительные сведения.</strong> В объявлениях аннотаций можно указать дополнительные параметры, например, типы элементов, к которым можно добавить аннотации, например, классы или методы. Для этого добавляется  <code>@Target(value = {ElementType.TYPE})</code>  для классов и  <code>@Target(value = {ElementType.METHOD}).</code>  Таким образом, объявление аннотаций становится автоматическим с помощью <em>мета-аннотаций</em>.</p>
</div>
<div class="paragraph">
<p>Теперь необходимо добавить к обработчику аннотаций код для обработки аннотации  <code>Handleable</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши пакет* <code> Java </code> proc* и выберите New ("Создать") &gt; Java class ("Класс Java").</p>
</li>
<li>
<p>Введите * <code>HandleableProcessor</code> * в поле Class Name ("Имя класса"). Нажмите кнопку "Завершить".</p>
</li>
<li>
<p>Измените класс  <code>HandleableProcessor.java</code> , добавив нижеприведенный код. Сохраните изменения.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> Значение  <code>@SupportedSourceVersion</code>  (выделено <strong>жирным шрифтом</strong>) зависит от используемой версии JDK и может быть двух вариантов:  <code>(SourceVersion.RELEASE_7)</code>  или  <code>(SourceVersion.RELEASE_6)</code> .</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package proc;

import ann.Handleable;
import java.io.IOException;
import java.io.PrintWriter;
import java.io.Writer;
import java.util.Set;
import javax.annotation.processing.AbstractProcessor;
import javax.annotation.processing.RoundEnvironment;
import javax.annotation.processing.SupportedAnnotationTypes;
import javax.annotation.processing.SupportedSourceVersion;
import javax.lang.model.SourceVersion;
import javax.lang.model.element.Element;
import javax.lang.model.element.ElementKind;
import javax.lang.model.element.TypeElement;
import javax.lang.model.type.TypeMirror;
import javax.tools.Diagnostic;
import javax.tools.JavaFileObject;

@SupportedAnnotationTypes("ann.Handleable")
@SupportedSourceVersion(*SourceVersion.RELEASE_7*)
public class HandleableProcessor extends AbstractProcessor {

    /** public for ServiceLoader */
    public HandleableProcessor() {
    }

    public boolean process(Set&lt;? extends TypeElement&gt; annotations,
            RoundEnvironment roundEnv) {
        for (Element e : roundEnv.getElementsAnnotatedWith(Handleable.class)) {
            if (e.getKind() != ElementKind.FIELD) {
                processingEnv.getMessager().printMessage(
                        Diagnostic.Kind.WARNING,
                        "Not a field", e);
                continue;
            }
            String name = capitalize(e.getSimpleName().toString());
            TypeElement clazz = (TypeElement) e.getEnclosingElement();
            try {
                JavaFileObject f = processingEnv.getFiler().
                        createSourceFile(clazz.getQualifiedName() + "Extras");
                processingEnv.getMessager().printMessage(Diagnostic.Kind.NOTE,
                        "Creating " + f.toUri());
                Writer w = f.openWriter();
                try {
                    PrintWriter pw = new PrintWriter(w);
                    pw.println("package "
                            + clazz.getEnclosingElement().getSimpleName() + ";");
                    pw.println("public abstract class "
                            + clazz.getSimpleName() + "Extras {");
                    pw.println("    protected " + clazz.getSimpleName()
                            + "Extras() {}");
                    TypeMirror type = e.asType();
                    pw.println("    /** Handle something. */");
                    pw.println("    protected final void handle" + name
                            + "(" + type + " value) {");
                    pw.println("        System.out.println(value);");
                    pw.println("    }");
                    pw.println("}");
                    pw.flush();
                } finally {
                    w.close();
                }
            } catch (IOException x) {
                processingEnv.getMessager().printMessage(Diagnostic.Kind.ERROR,
                        x.toString());
            }
        }
        return true;
    }

    private static String capitalize(String name) {
        char[] c = name.toCharArray();
        c[0] = Character.toUpperCase(c[0]);
        return new String(c);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Давайте рассмотрим внимательнее основные части кода, образующие обработчик аннотаций (обратите внимание, что для удобства рассмотрения код приведен здесь лишь частично).</p>
</div>
<div class="paragraph">
<p>Сперва следует указать типы аннотаций, поддерживаемые обработчиком аннотаций (используя  <code>@SupportedAnnotationTypes</code> ) и поддерживаемую версию исходных файлов (используя  <code>@SupportedSourceVersion</code> ). В данном случае версией является JDK 6:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@SupportedAnnotationTypes("ann.Handleable")
@SupportedSourceVersion(SourceVersion.RELEASE_6)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Затем следует объявить общедоступный класс для обработчика, расширяющий класс <code>AbstractProcessor</code>  из пакета  <code>javax.annotation.processing</code> .  <code>AbstractProcessor</code>  является стандартным надклассом для обработчиков конкретных аннотаций и содержит необходимые методы для обработки аннотаций.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class HandleableProcessor extends AbstractProcessor {
...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Теперь необходимо предоставить общедоступный конструктор для данного класса.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class HandleableProcessor extends AbstractProcessor {
*    public HandleableProcessor() {
    }*
...

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Затем следует вызвать метод  <code>process</code> () родительского класса  <code>AbstractProcessor</code> . Посредством этого метода предоставляются аннотации, доступные для обработки. Кроме того, этот метод содержит данные о цикле обработки.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class HandleableProcessor extends AbstractProcessor {*
   *...
*     public boolean process(Set&lt;? extends TypeElement&gt; annotations,
            RoundEnvironment roundEnv) {
     ...
     }
*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Логика обработчика аннотаций содержится внутри метода  <code>process()</code>  класса  <code>AbstractProcessor</code> . Обратите внимание, что при помощи класса  <code>AbstractProcessor</code>  также можно получить доступ к интерфейсу  <code>ProcessingEnvironment</code> , позволяющему обработчикам аннотаций использовать несколько полезных функций, например средство для работы с файловой системой (обработчик файловой системы, позволяющий обработчикам аннотаций создавать файлы) и средство вывода сообщений (способ предупреждения об ошибках обработчиков аннотаций).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class HandleableProcessor extends AbstractProcessor {*
   *...
     public boolean process(Set&lt;? extends TypeElement&gt; annotations,
            RoundEnvironment roundEnv) {//For each element annotated with the Handleable annotation
            *for (Element e : roundEnv.getElementsAnnotatedWith(Handleable.class)) {

*//Check if the type of the annotated element is not a field. If yes, return a warning*.
if (e.getKind() != ElementKind.FIELD) {
processingEnv.getMessager().printMessage(
Diagnostic.Kind.WARNING,
"Not a field", e);
continue;
}
            *//Define the following variables: name and clazz*.**
String name = capitalize(e.getSimpleName().toString());
TypeElement clazz = (TypeElement) e.getEnclosingElement();
*//Generate a source file with a specified class name. *
            try {
JavaFileObject f = processingEnv.getFiler().
createSourceFile(clazz.getQualifiedName() + "Extras");
processingEnv.getMessager().printMessage(Diagnostic.Kind.NOTE,
"Creating " + f.toUri());
Writer w = f.openWriter();
*//Add the content to the newly generated file*.
                    try {
PrintWriter pw = new PrintWriter(w);
pw.println("package "
+ clazz.getEnclosingElement().getSimpleName() + ";");
pw.println("public abstract class "
+ clazz.getSimpleName() + "Extras {");
pw.println("    protected " + clazz.getSimpleName()
+ "Extras() {}");
TypeMirror type = e.asType();
pw.println("    /** Handle something. */");
pw.println("    protected final void handle" + name
+ "(" + type + " value) {");
pw.println("        System.out.println(value);");
pw.println("    }");
pw.println("}");
pw.flush();
} finally {
w.close();
}
} catch (IOException x) {
processingEnv.getMessager().printMessage(Diagnostic.Kind.ERROR,
x.toString());
}
}*return true;
    * }*
...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>В последнем блоке этого кода объявляется метод  <code>capitalize</code> , используемый для написания имени аннотированного элемента с заглавной буквы.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class HandleableProcessor extends AbstractProcessor {*
   *...*

  private static String capitalize(String name) {
char[] c = name.toCharArray();
c[0] = Character.toUpperCase(c[0]);
return new String(c);
}
*}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Создайте проект, щелкнув правой кнопкой мыши проект  <code>AnnProcessor</code>  и выбрав 'Сборка'.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_работа_с_обработчиком_аннотаций_в_среде_ide">Работа с обработчиком аннотаций в среде IDE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе мы создадим приложение Java, в котором будет использоваться обработчик аннотаций.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите File ("Файл") &gt; New Project ("Создать проект") и выберите тип проекта Java Application ("Приложение Java") в категории Java. Нажмите кнопку "Далее".</p>
</li>
<li>
<p>На странице "Имя и расположение" введите * <code>Demo</code> * в поле "Имя проекта" и укажите расположение проекта.</p>
</li>
<li>
<p>Введите * <code>demo.Main</code> * в поле Create Main Class ("Создать главный класс"). Нажмите кнопку "Завершить".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/demo-project-wizard.png" alt="demo project wizard">
</div>
<div class="title">Figure 3. Создание проекта Demo в мастере создания проектов.</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Откройте окно 'Свойства проекта' и убедитесь, что JDK 6 или JDK 7 выбран как двоичный формат/формат исходного кода на панели "Исходные коды", а также что JDK 1.6 or JDK 1.7 установлен как платформа Java на панели "Библиотеки".</p>
</li>
<li>
<p>Измените класс  <code>Main.java</code> , добавив приведенный ниже код. Сохраните изменения.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package demo;

*import ann.Handleable;*

public class Main *extends MainExtras* {

    *@Handleable
    private String stuff;*

    *public static void main(String[] args) {
        new Main().handleStuff("hello");
    }*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Данный код содержит следующие элементы:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>оператор импорта для обработчика особых аннотаций  <code>ann.Handleable</code> ;</p>
</li>
<li>
<p>общедоступный класс  <code>Main</code> , расширяющий класс  <code>MainExtras</code>  ( <code>MainExtras</code>  должен быть создан обработчиком аннотаций во время компиляции);</p>
</li>
<li>
<p>закрытое поле под названием  <code>stuff</code> , с аннотацией  <code>@Handleable</code> ;</p>
</li>
<li>
<p>метод  <code>main</code> , вызывающий метод  <code>handleStuff</code> , который объявляется в автоматически создаваемом классе  <code>MainExtras</code> .</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>В этом простом примере метод  <code>handleStuff</code>  только распечатывает текущее значение. Назначение метода можно изменить.</p>
</div>
<div class="paragraph">
<p>После сохранения кода  <code>Main.java</code>  можно увидеть, что среда IDE сообщает о ряде ошибок компиляции. Это происходит, поскольку обработчик аннотаций еще не добавлен в проект.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел проекта  <code>Demo</code>  в окне "Проекты", выберите "Свойства", затем выберите категорию "Библиотеки" в окне 'Свойства проекта'.</p>
</li>
<li>
<p>На вкладке Compile ("Компиляция") щелкните Add Project ("Добавить проект") и найдите проект  <code>AnnProcessor</code> .</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/demo-properties-compile.png" alt="demo properties compile">
</div>
<div class="title">Figure 4. Вкладка 'Компилировать' в категории 'Библиотеки' окна свойств проекта</div>
</div>
<div class="paragraph">
<p>Вкладка "Компиляция" соответствует параметру  <code>-classpath</code>  <a href="http://download.oracle.com/javase/6/docs/technotes/tools/windows/javac.html#options">компилятора Java</a>. Поскольку обработчик аннотаций является единым файлом JAR, который содержит как определение аннотаций, так и обработчик аннотаций, его следует добавить к пути классов для проекта, которым является вкладка Compile ("Компиляция").</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите категорию "Компиляция" в окне "Свойства проекта" и установите флажки "Разрешить обработку аннотаций" и "Разрешить обработку аннотаций в редакторе".</p>
</li>
<li>
<p>Укажите, какой обработчик аннотаций должен быть запущен, нажав кнопку Add ("Добавить") рядом с текстовой областью обработчиков аннотаций и введя * <code>proc.HandleableProcessor</code> * в поле FQN ("Полностью определенное имя") обработчика аннотаций.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/demo-processor-fqn.png" alt="demo processor fqn">
</div>
<div class="title">Figure 5. Диалоговое окно 'FQN обработчика аннотаций'</div>
</div>
<div class="paragraph">
<p>Категория Compiling ("Компиляция") в окне Project Properties ("Свойства проекта") должна выглядеть, как на приведенном ниже изображении.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/demo-properties-compiling.png" alt="demo properties compiling">
</div>
<div class="title">Figure 6. Категория &quot;Компиляция&quot; в окне &quot;Свойства проекта&quot;.</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Нажмите кнопку OK в окне Properties ("Свойства").</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> В файле  <code>Main.java</code>  все еще могут отображаться ошибки компиляции. Это происходит, поскольку в среде IDE еще не определено местоположение файла  <code>MainExtras.java</code> , в котором объявляется метод  <code>handleStuff</code> . После первого создания проекта Demo будет создан файл  <code>MainExtras.java</code> . Если для проекта включено режим Compile On Save ("Компилировать при сохранении"), среда IDE компилирует проект при сохранении  <code>Main.java</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши проект Demo и выберите Build ("Сборка").</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Если после сборки проекта взглянуть на него в окне Projects ("Проекты"), то можно будет увидеть новый узел  <code>Generated Sources</code>  с файлом  <code>demo/MainExtras.java</code> .</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/demo-generated-sources.png" alt="demo generated sources">
</div>
<div class="title">Figure 7. В окне 'Проекты' отображаются созданные источники</div>
</div>
<div class="paragraph">
<p>При просмотре содержимого созданного файла  <code>MainExtras.java</code>  можно увидеть, что обработчик аннотаций создал класс  <code>MainExtras</code>  с методом  <code>handleStuff</code> . Метод  <code>handleStuff</code>  и является методом, вызываемым из аннотированного файла  <code>Main.java</code> .</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package demo;
public abstract class MainExtras {
    protected MainExtras() {}
    /** Handle something. */
    protected final void handleStuff(java.lang.String value) {
        System.out.println(value);
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши проект Demo и выберите Run ("Запустить").</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При щелчке Run ("Запустить") в окне вывода можно будет увидеть следующее. Выполняется компиляция проекта Demo, и на экран выводится сообщение.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/demo-run.png" alt="demo run">
</div>
<div class="title">Figure 8. В окне 'Проекты' отображаются созданные источники</div>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Using%20the%20Annotation%20Processors%20Support%20in%20NetBeans%20IDE">Отправить отзыв по этому учебному курсу</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_дополнительные_сведения">Дополнительные сведения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ознакомьтесь со следующими ресурсами для получения дополнительных сведений об аннотациях в приложениях Java:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Документация Java SE - <a href="http://download.oracle.com/javase/6/docs/technotes/guides/language/annotations.html">Аннотации</a></p>
</li>
<li>
<p>Учебный курс Java SE - <a href="http://download.oracle.com/javase/tutorial/java/javaOO/annotations.html">Аннотации</a></p>
</li>
<li>
<p><a href="http://download.oracle.com/javase/6/docs/technotes/tools/windows/javac.html#processing">Компилятор Java: параметры обработки аннотаций</a></p>
</li>
<li>
<p><a href="http://blogs.oracle.com/darcy/">Блог Джозефа Д. Дарси (Joseph D. Darcy)</a> - полезные рекомендации от ведущего специалиста по спецификации JSR-269</p>
</li>
</ul>
</div>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/java/annotations-custom_ru.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1><a href="/about/index.html">About</a></h1>
                <ul>
                    <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb110/nb110.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2020 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
