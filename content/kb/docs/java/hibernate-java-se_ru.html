
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Использование библиотеки Hibernate в приложении Java на базе Swing</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Использование библиотеки Hibernate в приложении Java на базе Swing - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Использование библиотеки Hibernate в приложении Java на базе Swing">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 12.4</h1>
            <p><a class="button success" href="/download/nb124/nb124.html">Find out more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">Использование библиотеки Hibernate в приложении Java на базе Swing</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/java/hibernate-java-se_ru.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_создание_базы_данных">Создание базы данных</a></li>
<li><a href="#_создание_проекта_приложения_java_на_базе_swing">Создание проекта приложения Java на базе Swing</a></li>
<li><a href="#_добавление_поддержки_библиотеки_hibernate_к_проекту">Добавление поддержки библиотеки Hibernate к проекту</a>
<ul class="sectlevel2">
<li><a href="#_создание_файла_настройки_библиотеки_hibernate">Создание файла настройки библиотеки Hibernate</a></li>
<li><a href="#_изменение_файла_настройки_библиотеки_hibernate">Изменение файла настройки библиотеки Hibernate</a></li>
<li><a href="#_создание_вспомогательного_файла_hibernateutil_java">Создание вспомогательного файла  <code>HibernateUtil.java</code></a></li>
</ul>
</li>
<li><a href="#_создание_файлов_сопоставления_библиотеки_hibernate_и_классов_java">Создание файлов сопоставления библиотеки Hibernate и классов Java</a>
<ul class="sectlevel2">
<li><a href="#_создание_файла_обратного_проектирования">Создание файла обратного проектирования</a></li>
<li><a href="#_создание_файлов_сопоставления_библиотеки_hibernate_и_объектов_pojo_на_основе_базы_данных">Создание файлов сопоставления библиотеки Hibernate и объектов POJO на основе базы данных</a></li>
</ul>
</li>
<li><a href="#_создание_графического_интерфейса_пользователя_приложения">Создание графического интерфейса пользователя приложения</a>
<ul class="sectlevel2">
<li><a href="#_создание_формы_jframe">Создание формы Jframe</a></li>
<li><a href="#_добавление_элементов_к_форме">Добавление элементов к форме</a></li>
</ul>
</li>
<li><a href="#_создание_запроса_в_редакторе_запросов_hql_query_editor">Создание запроса в редакторе запросов HQL Query Editor</a></li>
<li><a href="#_добавление_запроса_к_форме">Добавление запроса к форме</a></li>
<li><a href="#_выполнение_проекта">Выполнение проекта</a>
<ul class="sectlevel2">
<li><a href="#_загрузка_проекта_решения">Загрузка проекта решения</a></li>
</ul>
</li>
<li><a href="#_создание_объектов_pojo_и_файлов_сопоставления_по_отдельности">Создание объектов POJO и файлов сопоставления по отдельности</a></li>
<li><a href="#_дополнительные_сведения">Дополнительные сведения</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>В этом учебном руководстве IDE NetBeans используется для создания и развертывания приложения Swing Java, в котором отображаются данные из базы данных. Приложение использует библиотеку Hibernate в качестве слоя сохранения состояния для извлечения POJO (простых объектов Java) из реляционной базы данных.</p>
</div>
<div class="paragraph">
<p>Библиотека Hibernate предоставляет средства для объектно-реляционного сопоставления (ORM). В руководстве демонстрируется поддержка библиотеки Hibernate в среде IDE и использование мастеров для создания необходимых файлов Hibernate. После создания объектов Java и настройки приложения для использования Hibernate создается графический пользовательский интерфейс для поиска и отображения данных.</p>
</div>
<div class="paragraph">
<p>Приложение, создаваемое в этом курсе, представляет собой средство администрирования, дополняющее <a href="../web/hibernate-webapp.html">веб-приложение "DVD Store"</a>. В данном руководстве описывается создание приложения, позволяющего запрашивать подробные данные актера на основе соответствия имени или фамилии. При необходимости приложение можно расширить путем добавления функциональных возможностей запроса подробных данных о фильме, а также добавления/обновления/удаления объектов. В рамках руководства используется СУБД MySQL и база данных "Sakila", однако в приложениях Hibernate допускается использование любого поддерживаемого сервера базы данных. База данных "Sakila" представляет собой типовую базу данных, которая может быть загружена с сайта MySQL. Информация о настройке базы данных "Sakila" приведена в следующих разделах.</p>
</div>
<div class="paragraph">
<p>Перед изучением этого учебного курса можно ознакомиться со следующей документацией:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Документация по библиотеке Hibernate по адресу <a href="http://www.hibernate.org/">hibernate.org</a></p>
</li>
<li>
<p><a href="gui-functionality.html">+Введение в разработку графического интерфейса +</a></p>
</li>
<li>
<p>Учебный курс <a href="../ide/mysql.html">Подключение к базе данных MySQL</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Сведения о создании этого приложения с помощью Maven см. в разделе <a href="maven-hib-java-se.html">Создание приложения Maven Swing с помощью Hibernate</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-80-74-73.png" alt="netbeans stamp 80 74 73">
</div>
<div class="title">Figure 1. Содержимое этой страницы применимо к IDE NetBeans 7.2, 7.3, 7.4 и 8.0</div>
</div>
<div class="paragraph">
<p><strong>Для работы с этим учебным курсом требуется следующее программное обеспечение и ресурсы.</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Программное обеспечение или материал</th>
<th class="tableblock halign-left valign-top">Требуемая версия</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">IDE NetBeans</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7.2, 7.3, 7.4, 8.0, Java</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://java.sun.com/javase/downloads/index.jsp">Комплект для разработчика на языке Java (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">версия 7 или 8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.mysql.com/">Сервер базы данных MySQL</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">версия 5.x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">База данных "Sakila"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">подключаемый модуль, который можно получить в центре обновления</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Можно загрузить <a href="https://netbeans.org/projects/samples/downloads/download/Samples/Java/DVDStoreAdmin-Ant.zip">готовый проект в виде архива ZIP</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_базы_данных">Создание базы данных</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом учебном курсе используется база данных MySQL с названием  <code>sakila</code> . Пример базы данных не входит в устанавливаемую в среду IDE, поэтому перед изучением этого учебного курса необходимо создать базу данных.</p>
</div>
<div class="paragraph">
<p>База данных "Sakila" представляет собой свободно распространяемый пример базы данных, который можно загрузить с сайта MySQL. Для создания базы данных "Sakila" можно загрузить и установить подключаемый модуль "Sakila Sample Database" с использованием диспетчера подключаемых модулей. После установки подключаемого модуля можно создать базу данных "Sakila" в окне "Services". База данных "Sakila" будет добавлена к списку баз данных в диалоговом окне "Create MySQL database".</p>
</div>
<div class="paragraph">
<p>Для получения дополнительной информации о настройке среды IDE для работы с MySQL см. учебный курс <a href="../ide/mysql.html">Подключение к базе данных MySQL</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Откройте диспетчер подключаемых модулей и установите подключаемый модуль "Sakila Sample Database".</p>
</li>
<li>
<p>После установки подключаемого модуля, запустите сервера MySQL базы данных путем расширения узла 'Базы данных' в окне 'Службы', щелкните правой кнопкой мыши узел MySQL Server и выберите 'Запустить'.</p>
</li>
<li>
<p>Щелкните правой кнопкой мыши узел сервера MySQL и выберите Create Database ("Создать базу данных").</p>
</li>
<li>
<p>Выберите базу данных "Sakila"из раскрывающегося списка "New Database Name" в диалоговом окне "Create MySQL Database". Нажмите кнопку "ОК".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/create-sakila-mysql.png" alt="create sakila mysql">
</div>
<div class="title">Figure 2. Снимок диалогового окна создания базы данных MySQL</div>
</div>
<div class="paragraph">
<p>При нажатии кнопки "OK" узел "Sakila" появится под узлом "MySQL Server".</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел "Sakila" и выберите "Connect".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>После нажатия кнопки "Connect a database" под узлом "Databases" отобразится узел подключения к базе данных "Sakila" ( <code>jdbc:mysql://localhost:3306/sakila [<em>username</em> on Default]</code> ). При открытом подключении для просмотра данных в базе данных разверните этот узел подключения.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_проекта_приложения_java_на_базе_swing">Создание проекта приложения Java на базе Swing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом упражнении будет создан простой проект приложения Java на базе Swing с именем "DVDStoreAdmin".</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите команду "Файл" &gt; "Создать проект" (CTRL+SHIFT+N). Выберите приложение Java из категории Java и нажмите "Next".</p>
</li>
<li>
<p>Введите <strong>DVDStoreAdmin</strong> в качестве имени проекта и укажите местоположение проекта.</p>
</li>
<li>
<p>Снимите флажок "Использовать отдельную папку", если он установлен.
В рамках этого руководства копирование библиотек проекта в выделенную папку лишено смысла, поскольку совместное использование библиотек с другими пользователями не потребуется.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Снимите флажок "Create Main Class". Нажмите кнопку "Завершить".</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Finish" в среде IDE будет создан проект приложения Java. В проекте нет главного класса. Следует создать форму и установить ее в качестве главного класса.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_добавление_поддержки_библиотеки_hibernate_к_проекту">Добавление поддержки библиотеки Hibernate к проекту</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Для добавления поддержки библиотеки Hibernate к проекту J2SE необходимо добавить библиотеку Hibernate в проект. Библиотека Hibernate входит в состав IDE и может быть добавлена к любому проекту. Для этого щелкните правой кнопкой мыши узел 'Библиотеки' в окне 'Проекты', выберите 'Добавить библиотеку', а затем выберите библиотеку Hibernate в диалоговом окне 'Добавить библиотеку'.</p>
</div>
<div class="paragraph">
<p>В среде IDE содержатся мастеры, упрощающие создание файлов библиотеки Hibernate, которые потребуются в проекте. Мастеры, включенные в среду IDE, могут использоваться для создания файла настройки библиотеки Hibernate и вспомогательного служебного класса. Если файл настройки библиотеки Hibernate создан с использованием мастера, библиотеки Hibernate автоматически добавляются к проекту.</p>
</div>
<div class="sect2">
<h3 id="_создание_файла_настройки_библиотеки_hibernate">Создание файла настройки библиотеки Hibernate</h3>
<div class="paragraph">
<p>Файл настройки библиотеки Hibernate ( <code>hibernate.cfg.xml</code> ) содержит информацию о подключении к базе данных, сопоставлениях ресурсов и других свойствах подключения. При создании файла настройки Hibernate с использованием мастера подключение к базе данных определяется путем выбора из списка подключений, зарегистрированных в среде IDE. В ходе создания файла настройки подробная информация о подключении и сведения о диалекте добавляются автоматически в соответствии с выбранным подключением к базе данных. В среде IDE библиотека Hibernate также автоматически добавляется в путь класса проекта. После создания файла настройки можно изменить файл с использованием редактора с несколькими представлениями или внести изменения в код XML непосредственно в редакторе XML.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел "Source Packages" в окне "Projects" и выберите "New &gt; Other" для открытия мастера "New File".</p>
</li>
<li>
<p>Выберите элемент "Hibernate Configuration Wizard" из категории "Hibernate". Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Оставьте значения по умолчанию на панели "Имя и местоположение" (создается файл в каталоге  <code>src</code> ). Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Выберите подключение "sakila" из раскрывающегося списка "Database Connection". Нажмите кнопку "Завершить".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-config.png" alt="hib config">
</div>
<div class="title">Figure 3. Диалоговое окно для выбора подключения к базе данных</div>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Finish" файл  <code>hibernate.cfg.xml</code>  откроется в редакторе исходного кода в среде IDE. В среде IDE файл настройки создается в корне контекстного пути к классам приложения (в окне "Files", "WEB-INF/classes"). В окне 'Проекты' файл находится в исходном пакете  <code>&lt;пакет, заданный по умолчанию&gt;</code> . Файл настройки содержит информацию об отдельной базе данных. Если планируется подключение к нескольким базам данных, в проекте можно создать несколько файлов настройки (по одному для каждого сервера базы данных), но по умолчанию во вспомогательном служебном классе будет использоваться файл  <code>hibernate.cfg.xml</code> , расположенный в корневом каталоге.</p>
</div>
<div class="paragraph">
<p>После разворачивания узла "Libraries" в окне "Projects" видно, что к проекту добавлены требуемые архивы JAR библиотеки Hibernate и архив JAR соединителя MySQL.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-libraries-config.png" alt="hib libraries config">
</div>
<div class="title">Figure 4. Снимок окна 'Проекты', в котором отображаются библиотеки Hibernate</div>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> В среду NetBeans IDE 8.0 входят библиотеки Hibernate 4. Старые версии IDE, связанные с Hibernate 3.</p>
</div>
</div>
<div class="sect2">
<h3 id="_изменение_файла_настройки_библиотеки_hibernate">Изменение файла настройки библиотеки Hibernate</h3>
<div class="paragraph">
<p>В этом упражнении будут изменены свойства по умолчанию, указанные в  <code>hibernate.cfg.xml</code> , для включения функции протоколирования отладки для операторов SQL.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Откройте  <code>hibernate.cfg.xml</code>  на вкладке "Проект". Для открытия файла можно развернуть узел "Configuration Files" в окне "Projects" и дважды щелкнуть  <code>hibernate.cfg.xml</code> .</p>
</li>
<li>
<p>Разверните узел "Configuration Properties" в области "Optional Properties".</p>
</li>
<li>
<p>Нажмите кнопку "Add" для открытия диалогового окна "Add Hibernate Property".</p>
</li>
<li>
<p>В диалоговом окне выберите свойство  <code>hibernate.show_sql</code>  и установите значение  <code>true</code> . Нажмите кнопку "ОК". Это приведет ко включению протоколирования отладки операторов SQL.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-property-showsql.png" alt="add property showsql">
</div>
<div class="title">Figure 5. Диалоговое окно 'Добавить свойство Hibernate', в котором отображаются значения настроек для свойства hibernate.show_sql</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните "Добавить" в узле "Различные свойства" и выберите  <code>hibernate.query.factory_class</code>  в раскрывающемся списке "Имя свойства".</p>
</li>
<li>
<p>Введите <strong>org.hibernate.hql.internal.classic.ClassicQueryTranslatorFactory</strong> в качестве значения свойства.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Класс 'translator factory' используется в библиотеке Hibernate 4, связанной с IDE.</p>
</div>
<div class="paragraph">
<p>Нажмите кнопку "ОК".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-property-factoryclass-4.png" alt="add property factoryclass 4">
</div>
<div class="title">Figure 6. Диалоговое окно 'Добавить свойство Hibernate', в котором отображаются значения настроек для свойства hibernate.query.factory_class property</div>
</div>
<div class="paragraph">
<p>При использовании NetBeans IDE 7.4 или более ранней версии необходимо выбрать <strong>org.hibernate.hql.classic.ClassicQueryTranslatorFactory</strong> в качестве значения свойства в диалоговом окне. NetBeans IDE 7.4 и более ранние версии, связанные с библиотекой Hibernate 3.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-property-factoryclass.png" alt="add property factoryclass">
</div>
<div class="title">Figure 7. Диалоговое окно 'Добавить свойство Hibernate', в котором отображаются значения настроек для свойства hibernate.query.factory_class property</div>
</div>
<div class="paragraph">
<p>При выборе вкладки "XML" в редакторе можно просмотреть файл в режиме XML. Файл должен выглядеть следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;hibernate-configuration&gt;
    &lt;session-factory name="session1"&gt;
        &lt;property name="hibernate.dialect"&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;
        &lt;property name="hibernate.connection.driver_class"&gt;com.mysql.jdbc.Driver&lt;/property&gt;
        &lt;property name="hibernate.connection.url"&gt;jdbc:mysql://localhost:3306/sakila&lt;/property&gt;
        &lt;property name="hibernate.connection.username"&gt;root&lt;/property&gt;
        &lt;property name="hibernate.connection.password"&gt;######&lt;/property&gt;
        &lt;property name="hibernate.show_sql"&gt;true&lt;/property&gt;
        &lt;property name="hibernate.query.factory_class"&gt;org.hibernate.hql.internal.classic.ClassicQueryTranslatorFactory&lt;/property&gt;
    &lt;/session-factory&gt;
&lt;/hibernate-configuration&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Сохраните измененный файл.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>После создания формы и настройки ее в качестве основного класса, вы сможете увидеть SQL запросов, выведенные на печать в окне вывода IDE при выполнении проекта.</p>
</div>
</div>
<div class="sect2">
<h3 id="_создание_вспомогательного_файла_hibernateutil_java">Создание вспомогательного файла  <code>HibernateUtil.java</code></h3>
<div class="paragraph">
<p>Для использования библиотеки Hibernate необходимо создать вспомогательный класс для обработки запуска и обращения к  <code>SessionFactory</code>  библиотеки Hibernate для получения объекта "Session". Класс обеспечивает вызов метода  <code>configure()</code>  библиотеки Hibernate, загрузку файла настройки  <code>hibernate.cfg.xml</code>  и последующую сборку  <code>SessionFactory</code>  для получения объекта "Session".</p>
</div>
<div class="paragraph">
<p>В этом разделе для создания вспомогательного класса  <code>HibernateUtil.java</code>  используется мастер создания файла.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел "Source Packages" и выберите "New &gt; Other" для открытия мастера "New File".</p>
</li>
<li>
<p>Выберите "Hibernate" из списка "Categories" и "HibernateUtil.java" из списка "File Types". Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-util.png" alt="hib util">
</div>
<div class="title">Figure 8. Описание создания HibernateUtil с помощью мастера создания файлов</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Введите <strong>HibernateUtil</strong> в качестве имени класса и <strong>sakila.util</strong> в качестве имени пакета. Нажмите кнопку "Завершить".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>После нажатия кнопки "Finish" в редакторе откроется класс  <code>HibernateUtil.java</code> . Файл можно закрыть, т.к. необходимость в его изменении отсутствует.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_файлов_сопоставления_библиотеки_hibernate_и_классов_java">Создание файлов сопоставления библиотеки Hibernate и классов Java</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом руководстве для отображения данных в таблице "ACTOR" базы данных используется простой старый объект Java (POJO)  <code>Actor.java</code> . Класс указывает поля для столбцов в таблицах и использует простые методы установки и получения значений для извлечения и записи данных. Для сопоставления  <code>Actor.java</code>  с таблицей "ACTOR" можно использовать файл сопоставления библиотеки Hibernate или аннотации в классе.</p>
</div>
<div class="paragraph">
<p>Мастер обратного проектирования, файлы отображения библиотеки Hibernate и объекты POJO могут использоваться в мастере "Database" для создания нескольких объектов POJO и файлов отображения на основе выбранных таблиц базы данных. Кроме того, в среде IDE можно использовать мастеры для упрощения создания отдельных объектов POJO и файлов сопоставления "с нуля".</p>
</div>
<div class="paragraph">
<p><strong>Примечания.</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>При создании нескольких таблиц целесообразно использовать мастер. Однако в этом учебном курсе будет создан только один объект POJO и один файл отображения, поэтому можно создать эти файлы по отдельности. Действия по <a href="#10">созданию объектов POJO и файлов сопоставления по отдельности</a> приведены в конце данного учебного курса.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_создание_файла_обратного_проектирования">Создание файла обратного проектирования</h3>
<div class="paragraph">
<p>Файл обратного проектирования ( <code>hibernate.reveng.xml</code> ) является файлом XML, который можно использовать для изменения настроек по умолчанию, примененных при создании файлов Hibernate из метаданных базы данных, определенной в  <code>hibernate.cfg.xml</code> . Мастер создает файл с основными настройками по умолчанию. Можно изменить файл и явным образом указать используемую схему базы данных, отфильтровать таблицы, которые не следует использовать, а также указать, как типы JDBC сопоставляются с типами Hibernate.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел "Source Packages" и выберите "New &gt; Other" для открытия мастера "New File".</p>
</li>
<li>
<p>В списке "Categories" выберите "Hibernate", а в списке "File Types" выберите "Hibernate Reverse Engineering Wizard". Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Введите имя файла <strong>hibernate.reveng</strong>.</p>
</li>
<li>
<p>В качестве местоположения оставьте значение по умолчанию * <code>src</code> *. Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Выберите элемент <strong>actor</strong> на панели "Available Tables" и нажмите кнопку "Add". Нажмите кнопку "Завершить".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Мастер создает файл обратного проектирования  <code>hibernate.reveng.xml</code> . Файл обратного проектирования можно закрыть, поскольку его изменение не требуется.</p>
</div>
</div>
<div class="sect2">
<h3 id="_создание_файлов_сопоставления_библиотеки_hibernate_и_объектов_pojo_на_основе_базы_данных">Создание файлов сопоставления библиотеки Hibernate и объектов POJO на основе базы данных</h3>
<div class="paragraph">
<p>Мастер создания файлов сопоставления библиотеки Hibernate и объектов POJO на основе базы данных создает файлы на основе таблиц, содержащихся в базе данных. При использовании этого мастера среда IDE создает объекты POJO и файлы отображения на основе таблиц базы данных, указанных в  <code>hibernate.reveng.xml</code> , а затем добавляет записи отображения в файл  <code>hibernate.cfg.xml</code> . При применении мастера можно выбрать файлы, которые должны быть созданы в среде IDE (например, только объекты POJO), и установить свойства создания кода (например, создание кода, использующего аннотации EJB 3).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел "Source Packages" в окне "Projects" и выберите "New &gt; Other" для открытия мастера "New File".</p>
</li>
<li>
<p>Выберите "Hibernate Mapping Files and POJOs from a Database" в категории "Hibernate". Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Выберите файл  <code>hibernate.cfg.xml</code>  из раскрывающегося списка "Hibernate Configuration File", если он еще не выбран.</p>
</li>
<li>
<p>Выберите файл  <code>hibernate.cfg.xml</code>  из раскрывающегося списка "Hibernate Reverse Engineering File", если он еще не выбран.</p>
</li>
<li>
<p>Убедитесь в том, что выбраны пункты <strong>Domain Code</strong> и <strong>Hibernate XML Mappings</strong>.</p>
</li>
<li>
<p>Введите <strong>sakila.entity</strong> в качестве имени пакета в поле "Package". Нажмите кнопку "Завершить".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/mapping-pojos-wizard-ant.png" alt="mapping pojos wizard ant">
</div>
<div class="title">Figure 9. Мастер создания файлов сопоставления Hibernate и POJO</div>
</div>
<div class="paragraph">
<p>После нажатия кнопки "Finish" в среде IDE создается объект POJO  <code>Actor.java</code>  со всеми необходимыми полями и файл сопоставления библиотеки Hibernate; кроме того, в файл  <code>hibernate.cfg.xml</code>  добавляется запись сопоставления.</p>
</div>
<div class="paragraph">
<p>Теперь при наличии объектов POJO и необходимых файлов, связанных с библиотекой Hibernate для приложения можно создать простой внешний графический интерфейс пользователя на Java. Также необходимо создать, а затем добавить запрос HQL, обеспечивающий извлечение данных из базы данных. В рамках этого процесса для построения и тестирования запроса будет использован редактор HQL.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_графического_интерфейса_пользователя_приложения">Создание графического интерфейса пользователя приложения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом упражнении будет создана простая форма JFrame с определенными полями для ввода и отображения данных. Также будет добавлена кнопка, инициирующая запрос к базе данных для извлечения данных.</p>
</div>
<div class="paragraph">
<p>При отсутствии знаний об использовании GUI Builder для создания форм можно ознакомиться с учебным курсом <a href="gui-functionality.html">Введение в разработку графического интерфейса</a>.</p>
</div>
<div class="sect2">
<h3 id="_создание_формы_jframe">Создание формы Jframe</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел проекта в окне "Projects" и выберите "New &gt; Other" для открытия мастера создания файла.</p>
</li>
<li>
<p>Выберите шаблон "JFrame Form" из категории "Swing GUI Forms". Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Введите <strong>DVDStoreAdmin</strong> в поле "Class Name" и <strong>sakila.ui</strong> в поле "Package". Нажмите кнопку "Завершить".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>После нажатия кнопки "Готово" в среде IDE создается класс, а в представлении "Дизайн" редактора открывается форма JFrame.</p>
</div>
</div>
<div class="sect2">
<h3 id="_добавление_элементов_к_форме">Добавление элементов к форме</h3>
<div class="paragraph">
<p>Теперь необходимо добавить элементы пользовательского интерфейса к форме. При открытии формы в режиме проектирования в редакторе в левой части рабочей области среды IDE появляется палитра. Для добавления элемента к форме перетащите элемент с палитры в область формы. После добавления элемента к форме необходимо изменить значение по умолчанию свойства "Variable Name" для этого элемента.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Перетащите элемент "Label" из палитры и измените текст на <strong>Actor Profile</strong>.</p>
</li>
<li>
<p>Перетащите элемент "Label" с палитры и измените текст на <strong>First Name</strong>.</p>
</li>
<li>
<p>Перетащите элемент "Text Field", поместите его рядом с меткой "First Name" и удалите текст по умолчанию.</p>
</li>
<li>
<p>Перетащите элемент "Label" с палитры и измените текст на <strong>Last Name</strong>.</p>
</li>
<li>
<p>Перетащите элемент "Text Field", поместите его рядом с меткой "Last Name" и удалите текст по умолчанию.</p>
</li>
<li>
<p>Перетащите элемент "Button" с палитры и измените текст на <strong>Query</strong>.</p>
</li>
<li>
<p>Перетащите элемент "Table" с палитры в форму.</p>
</li>
<li>
<p>Измените значения "Variable Name" следующих элементов пользовательского интерфейса в соответствии со значениями, приведенными в следующей таблице.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Вы можете изменить значение 'Имя переменной' для элемента, щелкнув правой кнопкой мыши элемент в представлении конструктора и выбрав 'Изменить имя переменной'. Кроме того, значение "Variable Name" можно изменить непосредственно в окне "Inspector".</p>
</div>
<div class="paragraph">
<p>Присвоение значений "Variable Name" элементам "Label" не требуется.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Элемент</th>
<th class="tableblock halign-left valign-top">Имя переменной</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Текстовое поле "First Name"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>firstNameTextField</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Текстовое поле "Last Name"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lastNameTextField</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Кнопка "Query"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>queryButton</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Таблица</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>resultTable</code></p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Сохраните изменения.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>В режиме проектирования внешний вид формы выглядит так, как показано на следующем рисунке.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-jframe-form.png" alt="hib jframe form">
</div>
<div class="title">Figure 10. Форма графического интерфейса пользователя в представлении проектирования редактора</div>
</div>
<div class="paragraph">
<p>На этом этапе уже создана форма, и теперь необходимо создать код, обеспечивающий присваивание событий элементам формы. В следующем упражнении будут созданы запросы для извлечения данных на основе языка Hibernate Query Language. После создания запросов к форме будут добавлены методы, обеспечивающие вызов соответствующего запроса при нажатии кнопки "Query".</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_запроса_в_редакторе_запросов_hql_query_editor">Создание запроса в редакторе запросов HQL Query Editor</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В среде IDE создание и тестирование запросов на основе языка Hibernate Query Language (HQL) может осуществляться с использованием редактора запросов HQL Query Editor. После ввода запроса в редакторе отображается эквивалентный (переведенный) запрос SQL. При нажатии кнопки "Run HQL Query" на панели инструментов в среде IDE запрос выполняется, а результаты отображаются в нижней области редактора.</p>
</div>
<div class="paragraph">
<p>В этом упражнении редактор HQL Editor применяется для создания простых запросов HQL, позволяющих извлекать список подробных данных актеров на основе соответствия имени или фамилии. Перед добавлением запроса к классу редактор HQL Query Editor должен использоваться для проверки правильной работы подключения и корректности результатов запроса. Перед выполнением запроса необходимо скомпилировать приложение.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Правой кнопкой мыши щелкните узел проекта и выберите команду "Построить".</p>
</li>
<li>
<p>Разверните исходный узел пакета &lt;default package&gt; в окне "Projects".</p>
</li>
<li>
<p>Щелкните правой кнопкой мыши файл  <code>hibernate.cfg.xml</code>  и выберите "Run HQL Query" для открытия редактора HQL Editor.</p>
</li>
<li>
<p>Протестируйте подключение путем ввода  <code>from Actor</code>  в редакторе запросов HQL Query Editor. Нажмите кнопку 'Выполнить запрос HQL' ( <span class="image"><img src="images/run_hql_query_16.png" alt="run hql query 16" title="Кнопка 'Выполнить запрос HQL'"></span> ) на панели инструментов.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Run HQL Query" результаты запроса должны отображаться в нижней области редактора запросов HQL Query Editor.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-query-hqlresults.png" alt="hib query hqlresults">
</div>
<div class="title">Figure 11. Редактор запросов HQL с отображением результатов запроса HQL</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Введите следующий запрос в редактор запросов HQL Query Editor и нажмите кнопку "Выполнить запрос HQL" для проверки результатов запроса при вводе значения "PE" в строку поиска.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">from Actor a where a.firstName like 'PE%'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Запрос возвращает список подробных данных тех актеров, чьи имена начинаются с символов "PE".</p>
</div>
<div class="paragraph">
<p>При нажатии кнопки "SQL", размещенной над результатами, на экране должен отобразиться соответствующий эквивалентный запрос SQL.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">select actor0_.actor_id as col_0_0_ from sakila.actor actor0_ where (actor0_.first_name like 'PE%' )</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Откройте новую вкладку редактора HQL Query Editor и введите следующий запрос на панели редактирования. Нажмите кнопку "Run HQL Query".</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">from Actor a where a.lastName like 'MO%'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Запрос возвращает список подробных данных актеров, чьи фамилии начинаются с символов "МО".</p>
</div>
<div class="paragraph">
<p>Тестирование запросов показывает, что запросы возвращают требуемые результаты. Теперь необходимо внедрить запросы в приложение и обеспечить вызов соответствующего запроса путем нажатия кнопки "Query" в форме.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_добавление_запроса_к_форме">Добавление запроса к форме</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Теперь необходимо изменить  <code>DVDStoreAdmin.java</code>  для добавления строк запроса и создания методов, позволяющих формировать и вызывать запрос, включающий входные переменные. Также требуется изменить обработчик событий нажатия кнопок для вызова соответствующего запроса и добавить метод, обеспечивающий отображение результатов запроса в таблице.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Откройте  <code>DVDStoreAdmin.java</code>  и выберите вкладку "Source".</p>
</li>
<li>
<p>Добавьте следующие строки запроса (выделенные полужирным шрифтом) к классу.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public DVDStoreAdmin() {
    initComponents();
}

*private static String QUERY_BASED_ON_FIRST_NAME="from Actor a where a.firstName like '";
private static String QUERY_BASED_ON_LAST_NAME="from Actor a where a.lastName like '";*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Запросы можно скопировать из вкладок редактора запросов HQL Query Editor в файл, а затем изменить код.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте следующие методы для создания запроса на основе строки со вводимой пользователем информацией.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private void runQueryBasedOnFirstName() {
    executeHQLQuery(QUERY_BASED_ON_FIRST_NAME + firstNameTextField.getText() + "%'");
}

private void runQueryBasedOnLastName() {
    executeHQLQuery(QUERY_BASED_ON_LAST_NAME + lastNameTextField.getText() + "%'");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Эти методы обеспечивают вызов метода с именем  <code>executeHQLQuery()</code>  и создание запроса путем объединения строки запроса с информацией пользователя, вводимой в строку поиска.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте метод  <code>executeHQLQuery()</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private void executeHQLQuery(String hql) {
    try {
        Session session = HibernateUtil.getSessionFactory().openSession();
        session.beginTransaction();
        Query q = session.createQuery(hql);
        List resultList = q.list();
        displayResult(resultList);
        session.getTransaction().commit();
    } catch (HibernateException he) {
        he.printStackTrace();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Метод  <code>executeHQLQuery()</code>  обеспечивает вызов библиотеки Hibernate для выполнения выбранного запроса. В этом методе служебный класс  <code>HibernateUtil.java</code>  применяется для получения объекта Hibernate "Session".</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши в редакторе и выберите 'Исправить выражения импорта' (Ctrl-Shift-I; ⌘-Shift-I в Mac) для создания операторов импорта для библиотек Hibernate ( <code>org.hibernate.Query</code> ,  <code>org.hibernate.Session</code> ) и  <code>java.util.List</code> . Сохраните изменения.</p>
</li>
<li>
<p>Создайте обработчик событий для кнопки "Query", переключившись в режим проектирования и дважды нажав кнопку "Query".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>В среде IDE будет создан метод  <code>queryButtonActionPerformed</code> , который затем отобразится в режиме просмотра исходного кода.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Измените метод  <code>queryButtonActionPerformed</code>  в режиме просмотра исходного кода путем добавления следующего кода, обеспечивающего выполнение запроса при нажатии кнопки пользователем.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private void queryButtonActionPerformed(java.awt.event.ActionEvent evt) {
    *if(!firstNameTextField.getText().trim().equals("")) {
        runQueryBasedOnFirstName();
    } else if(!lastNameTextField.getText().trim().equals("")) {
        runQueryBasedOnLastName();
    }*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте следующий метод для просмотра результатов в "JTable".</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private void displayResult(List resultList) {
    Vector&lt;String&gt; tableHeaders = new Vector&lt;String&gt;();
    Vector tableData = new Vector();
    tableHeaders.add("ActorId");
    tableHeaders.add("FirstName");
    tableHeaders.add("LastName");
    tableHeaders.add("LastUpdated");

    for(Object o : resultList) {
        Actor actor = (Actor)o;
        Vector&lt;Object&gt; oneRow = new Vector&lt;Object&gt;();
        oneRow.add(actor.getActorId());
        oneRow.add(actor.getFirstName());
        oneRow.add(actor.getLastName());
        oneRow.add(actor.getLastUpdate());
        tableData.add(oneRow);
    }
    resultTable.setModel(new DefaultTableModel(tableData, tableHeaders));
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши в редакторе и выберите 'Исправить выражения импорта' (Ctrl-Shift-I; ⌘-Shift-I в Mac) для создания оператора импорта для  <code>java.util.Vector</code>  и  <code>java.util.List</code> . Сохраните изменения.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>После сохранения формы можно запустить проект.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_выполнение_проекта">Выполнение проекта</h2>
<div class="sectionbody">
<div class="paragraph">
<p>После завершения создания кода можно запустить приложение. Перед выполнением проекта необходимо указать главный класс приложения в диалоговом окне свойств проекта. Если главный класс не указан, при первом запуске приложения отобразится запрос на его установку.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел проекта в окне "Проекты" и выберите команду "Свойства".</p>
</li>
<li>
<p>Выберите категорию 'Выполнить' в диалоговом окне 'Свойства проекта'.</p>
</li>
<li>
<p>Введите <strong>sakila.ui.DVDStoreAdmin</strong> в поле "Main Class". Нажмите кнопку "ОК".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>В качестве альтернативы можно нажать кнопку "Browse" и выбрать главный класс в диалоговом окне.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/browse-main-class.png" alt="browse main class">
</div>
<div class="title">Figure 12. Установка главного класса в диалоговом окне 'Обзор главных классов'</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Нажмите кнопку "Run Project" на главной панели инструментов для запуска приложения.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Введите информацию в строке поиска для текстовых полей "First Name" или "Last Name" и нажмите кнопку "Query" для поиска актера и просмотра подробных данных.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/application-run.png" alt="application run">
</div>
<div class="title">Figure 13. Приложение DVDStoreAdmin с отображением результатов</div>
</div>
<div class="paragraph">
<p>При вызове окна "Output" в среде IDE можно просмотреть запрос SQL, инициировавший извлечение представленных результатов.</p>
</div>
<div class="sect2">
<h3 id="_загрузка_проекта_решения">Загрузка проекта решения</h3>
<div class="paragraph">
<p>Решение для данного учебного курса в виде проекта можно загрузить несколькими способами.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Загрузите <a href="https://netbeans.org/projects/samples/downloads/download/Samples/Java/DVDStoreAdmin-Ant.zip">архив завершенного проекта в формате zip</a>.</p>
</li>
<li>
<p>Выполните проверку исходных файлов проекта на выходе из примеров NetBeans, выполнив перечисленные ниже действия.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите в главном меню "Группа &gt; Subversion &gt; Проверить".</p>
</li>
<li>
<p>В диалоговом окне "Проверка" введите следующий URL-адрес репозитория:
 <code><a href="https://svn.netbeans.org/svn/samples~samples-source-code" class="bare">https://svn.netbeans.org/svn/samples~samples-source-code</a></code>
Нажмите кнопку "Далее".</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Нажмите кнопку "Обзор" для открытия диалогового окна "Обзор папок репозитория".</p>
</li>
<li>
<p>Разверните корневой узел и выберите <strong>samples/java/DVDStoreAdmin-Ant</strong>. Нажмите кнопку "ОК".</p>
</li>
<li>
<p>Укажите локальную папку для исходных файлов (папка должна быть пустой).</p>
</li>
<li>
<p>Нажмите кнопку "Завершить".</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>После нажатия кнопки "Готово" среда IDE инициализирует локальную папку в качестве репозитория Subversion и выполняет проверку исходных файлов проекта на выходе.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните команду "Открыть проект" в диалоговом окне, которое появится после завершения проверки.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> Для получения исходных файлов на редактирование требуется клиент Subversion. Дополнительные сведения об установке Subversion см. в разделе <a href="../ide/subversion.html#settingUp">Настройка Subversion</a> в <a href="../ide/subversion.html">Руководстве по Subversion в IDE NetBeans</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_объектов_pojo_и_файлов_сопоставления_по_отдельности">Создание объектов POJO и файлов сопоставления по отдельности</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Поскольку POJO представляет собой простой класс Java, вы можете использовать мастер создания классов Java, чтобы создать класс, а затем изменить класс в редакторе исходного кода, чтобы добавить необходимые поля и методы получения и установки. После создания объекта POJO мастер также можно использовать для создания файла сопоставления библиотеки Hibernate, обеспечивающего сопоставления класса с таблицей, и добавления информации о сопоставлении в файл  <code>hibernate.cfg.xml</code> . При создании файла сопоставления "с нуля" необходимо сопоставить поля и столбцы в редакторе XML.</p>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> Это упражнение является необязательным и описывает создание POJO и файла сопоставления, созданных с помощью файлов сопоставления библиотеки Hibernate и POJO из мастера баз данных.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел "Source Packages" в окне "Projects" и выберите "New &gt; Java Class" для открытия мастера создания класса Java.</p>
</li>
<li>
<p>В мастере введите <strong>Actor</strong> в качестве имени класса и <strong>sakila.entity</strong> в качестве имени пакета. Нажмите кнопку "Завершить".</p>
</li>
<li>
<p>Внесите в класс следующие изменения (выделены полужирным шрифтом) для реализации интерфейса "Serializable" и добавьте поля для столбцов таблицы.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class Actor *implements Serializable* {
    *private Short actorId;
    private String firstName;
    private String lastName;
    private Date lastUpdate;*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши в редакторе и выберите 'Вставить код' (Alt-Insert, Ctrl-I на Mac) и выберите методы получения и установки в контекстном меню для создания методов получения и установки для полей.</p>
</li>
<li>
<p>В диалоговом окне "Generate Getters and Setters" выберите все поля и нажмите кнопку "Generate".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/getters-setters.png" alt="getters setters">
</div>
<div class="title">Figure 14. Диалоговое окно 'Создание методов получения и установки'</div>
</div>
<div class="paragraph">
<p>В диалоговом окне "Generate Getters and Setters" можно использовать стрелку вверх на клавиатуре для перемещения выбранного элемента к узлу "Actor", а затем нажать клавишу "пробел" и выбрать все поля "Actor".</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Исправьте операторы импорта и сохраните измененные данные.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>После создания объекта POJO для таблицы необходимо создать файл сопоставления библиотеки Hibernate для класса  <code>Actor.java</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел исходных файлов  <code>sakila.entity</code>  в окне "Projects" и выберите "New &gt; Other" для открытия мастера создания файла "New File".</p>
</li>
<li>
<p>Выберите "Hibernate Mapping File" в категории "Hibernate". Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Введите <strong>Actor.hbm</strong> в поле "File Name" и убедитесь в том, что выбрана папка <strong>src/sakila/entity</strong>. Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Введите <strong>sakila.entity.Actor</strong> в поле "Class to Map" и выберите <strong>actor</strong> из раскрывающегося списка "Database Table". Нажмите кнопку "Завершить".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/mapping-wizard.png" alt="mapping wizard">
</div>
<div class="title">Figure 15. Мастер создания файлов сопоставления Hibernate</div>
</div>
<div class="paragraph">
<p>После выбора 'Готово' файл сопоставления Hibernate  <code>Actor.hbm.xml</code>  открывается в редакторе исходного кода. Также в среде IDE выполняется автоматическое добавление записи для ресурса сопоставления в  <code>hibernate.cfg.xml</code> . В целях просмотра подробных данных разверните узел "Mapping" в режиме проектирования  <code>hibernate.cfg.xml</code>  или в режиме XML. Запись  <code>mapping</code>  в обзоре XML будет выглядеть следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">        &lt;mapping resource="sakila/entity/Actor.hbm.xml"/&gt;
    &lt;/session-factory&gt;
&lt;/hibernate-configuration&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Сопоставьте поля в  <code>Actor.java</code>  со столбцами в таблице "ACTOR" путем внесения следующих изменений (выделены полужирным шрифтом) в  <code>Actor.hbm.xml</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;hibernate-mapping&gt;
  &lt;class name="sakila.entity.Actor" *table="actor"&gt;
    &lt;id name="actorId" type="java.lang.Short"&gt;
      &lt;column name="actor_id"/&gt;
      &lt;generator class="identity"/&gt;
    &lt;/id&gt;
    &lt;property name="firstName" type="string"&gt;
      &lt;column length="45" name="first_name" not-null="true"/&gt;
    &lt;/property&gt;
    &lt;property name="lastName" type="string"&gt;
      &lt;column length="45" name="last_name" not-null="true"/&gt;
    &lt;/property&gt;
    &lt;property name="lastUpdate" type="timestamp"&gt;
      &lt;column length="19" name="last_update" not-null="true"/&gt;
    &lt;/property&gt;
  &lt;/class&gt;*
&lt;/hibernate-mapping&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Для заполнения значений при изменении файла сопоставления можно использовать функцию автозавершения кода.</p>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> По умолчанию у созданного элемента  <code>class</code>  имеется закрывающий тег. Поскольку элементы свойства необходимо добавить между открывающим и закрывающим тегами элемента  <code>class</code> , следует внести следующие изменения (выделены полужирным шрифтом). После внесения изменений можно использовать функцию автозавершения кода между тегами  <code>class</code> .</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;hibernate-mapping&gt;
  &lt;class name="sakila.entity.Actor" *table="actor"&gt;
  &lt;/class&gt;*
&lt;/hibernate-mapping&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Нажмите кнопку "Validate XML" на панели инструментов и сохраните изменения.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Создание объектов POJO и файлов сопоставления библиотеки Hibernate может эффективно использоваться для дальнейшей настройки приложения.</p>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Using%20Hibernate%20in%20a%20Java%20Swing%20Application">Отправить отзыв по этому учебному курсу</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_дополнительные_сведения">Дополнительные сведения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Для получения дополнительных сведений о создании приложений с графическим интерфейсом пользователя на базе Swing см. следующие учебные курсы.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="quickstart-gui.html">Разработка Swing GUI в IDE NetBeans</a></p>
</li>
<li>
<p><a href="gui-functionality.html">+Введение в разработку графического интерфейса +</a></p>
</li>
<li>
<p><a href="../../trails/matisse.html">+Учебная карта по приложениям с графическим интерфейсом Java +</a></p>
</li>
</ul>
</div>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/java/hibernate-java-se_ru.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1><a href="/about/index.html">About</a></h1>
                <ul>
                    <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb110/nb110.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2020 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
