
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Adding Java Management Extensions (JMX) Instrumentation to a Java Application</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Adding Java Management Extensions (JMX) Instrumentation to a Java Application - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Adding Java Management Extensions (JMX) Instrumentation to a Java Application">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Adding Java Management Extensions (JMX) Instrumentation to a Java Application</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/java/jmx-tutorial.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_tutorial_exercises">Tutorial exercises</a>
<ul class="sectlevel2">
<li><a href="#_prerequisites">Prerequisites</a></li>
<li><a href="#_software_needed_for_the_tutorial">Software Needed for the Tutorial</a></li>
<li><a href="#_resources">Resources</a></li>
</ul>
</li>
<li><a href="#_exercise_1_creating_the_netbeans_sample_anagram_game_project">Exercise 1: Creating the NetBeans sample Anagram Game project</a></li>
<li><a href="#_exercise_2_creating_the_anagramsstats_jmx_standard_mbean_and_its_management_interface">Exercise 2: Creating the AnagramsStats JMX Standard MBean and its Management interface</a></li>
<li><a href="#_exercise_3_adding_attributes_operation_and_notification_to_the_anagramsstats_jmx_standard_mbean">Exercise 3: Adding attributes, operation and notification to the AnagramsStats JMX Standard MBean</a></li>
<li><a href="#_exercise_4_adding_implementation_code_to_the_anagramsstats_jmx_standard_mbean">Exercise 4: Adding implementation code to the AnagramsStats JMX Standard MBean</a></li>
<li><a href="#_exercise_5_connecting_management_and_the_application_together">Exercise 5: Connecting Management and the Application Together</a>
<ul class="sectlevel2">
<li><a href="#_best_practice_for_naming_your_mbeans">Best practice for naming your MBeans</a></li>
</ul>
</li>
<li><a href="#_exercise_6_running_the_application_with_jconsole">Exercise 6: Running the Application with JConsole</a></li>
<li><a href="#_see_also">See Also</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><strong>Expected duration: 60 minutes</strong></p>
</div>
<div class="paragraph">
<p>The NetBeans JMX Wizard Module integrates JMX technology right into your workflow in the NetBeans IDE. This module allows you to quickly develop management applications, add management to existing applications, develop manager applications, and monitor the state of the Virtual Machine.</p>
</div>
<div class="paragraph">
<p>This tutorial shows you how to add management to an existing application (the NetBeans sample Anagrams Game application). You will first create a non-manageable Anagram Java Project. You will then use JMX Wizards to generate 90% of the management. Then you will implement the management behavior specific to the application. You will finally use the Run/Debug project with JConsole to visualize the Anagram MBeans.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tutorial_exercises">Tutorial exercises</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-80-74-73.png" alt="netbeans stamp 80 74 73">
</div>
<div class="title">Figure 1. Content on this page applies to the NetBeans IDE 7.2, 7.3, 7.4 and 8.0</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Exercise_1">Exercise 1: Creating the NetBeans sample Anagram Game project</a></p>
</li>
<li>
<p><a href="#Exercise_2">Exercise 2: Creating the AnagramsStats JMX Standard MBean and its Management interface</a></p>
</li>
<li>
<p><a href="#Exercise_3">Exercise 3: Adding attributes, operation and notification to the AnagramsStats JMX Standard MBean</a></p>
</li>
<li>
<p><a href="#Exercise_4">Exercise 4: Adding implementation code to the AnagramsStats JMX Standard MBean</a></p>
</li>
<li>
<p><a href="#Exercise_5">Exercise 5: Connecting the management and the application together</a></p>
</li>
<li>
<p><a href="#Exercise_6">Exercise 6: Running the Anagram Game with JConsole</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_prerequisites">Prerequisites</h3>
<div class="paragraph">
<p>This tutorial assumes you have some basic knowledge of, or programming experience with, the following technologies.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JMX technology: <a href="http://download.oracle.com/javase/6/docs/technotes/guides/jmx/index.html">+ JMX online documentation+</a></p>
</li>
<li>
<p>Java technology: <a href="http://www.oracle.com/technetwork/java/javase/tech/index.html">+ Java SE Technologies at a Glance+</a></p>
</li>
<li>
<p>NetBeans IDE</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You will also benefit from having some knowledge on <a href="http://download.oracle.com/javase/6/docs/technotes/guides/management/index.html">+ Monitoring and Management for the Java Platform+</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_software_needed_for_the_tutorial">Software Needed for the Tutorial</h3>
<div class="paragraph">
<p>For this tutorial you need to have the following software installed on your computer:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Software or Resource</th>
<th class="tableblock halign-left valign-top">Version Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../../../download/index.html">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7.2, 7.3, 7.4, 8.0, Java version</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java Development Kit (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">version 7 or 8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMX plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Available from NetBeans Update Center</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JConsole plugin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Available from NetBeans Update Center</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To install the <strong>JMX</strong> and <strong>JConsole</strong> plugins, choose Tools &gt; Plugins and download the module from the NetBeans Update Center.</p>
</div>
</div>
<div class="sect2">
<h3 id="_resources">Resources</h3>
<div class="ulist">
<ul>
<li>
<p>NetBeans help contents (Help &gt; Help Contents &gt; JMX). This help is also available from Wizards.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exercise_1_creating_the_netbeans_sample_anagram_game_project">Exercise 1: Creating the NetBeans sample Anagram Game project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The goal of this exercise is to create a runnable Java Project. The Anagram game is a Swing Application that displays a scrambled word to the user and waits for the user to solve the anagram.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Choose File &gt; New Project (Ctrl-Shift-N).</p>
</li>
<li>
<p>Select the Samples &gt; Java category.</p>
</li>
<li>
<p>Select the Anagram Game project. Click Next.</p>
</li>
<li>
<p>In the Project Name and Location panel, set the project location or keep the default value if it suits you. Select "Set as Main Project" checkbox if not selected because it will make subsequent actions easier. Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you click Finish the IDE creates the Anagram Game project and displays the project in the Projects window.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click the AnagramGame project and select Properties.</p>
</li>
<li>
<p>Select the Sources category and confirm that the Source/Binary format is set to JDK 7 or JDK 8. Click OK.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Note.</strong> To select JDK 7 or JDK 8, the Java Platform for the AnagramGame project must also be at least JDK 7 or JDK 8, respectively. You can change the Java Platform for the AnagramGame in the Libraries category in the Properties window.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click the Anagram Game project node and choose Run.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you choose Run, the IDE builds and launches the Anagram Game application.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exercise_2_creating_the_anagramsstats_jmx_standard_mbean_and_its_management_interface">Exercise 2: Creating the AnagramsStats JMX Standard MBean and its Management interface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The goal of this exercise is to create a skeleton JMX Standard MBean, which is composed of its implementation class and its management interface.</p>
</div>
<div class="paragraph">
<p>Perform the following steps to create the JMX Standard MBean.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Confirm that the Anagram Game project is set as the main project.</p>
</li>
<li>
<p>Choose File &gt; New File (Ctrl-N).</p>
</li>
<li>
<p>From the JMX category, select Standard MBean. Click Next.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jmx-newfile.png" alt="jmx newfile">
</div>
<div class="title">Figure 2. Standard MBean file type in New File Wizard</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enter the following information Name and Location panel:</p>
<div class="ulist">
<ul>
<li>
<p>Class Name:  <code>AnagramsStats</code></p>
</li>
<li>
<p>Location: Source Packages (default)</p>
</li>
<li>
<p>Package:  <code>com.toy.anagrams.mbeans</code></p>
</li>
<li>
<p>Description:  <code>Monitoring and Management of the Anagrams Game</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jmx-newmbean.png" alt="jmx newmbean">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you click Finish the  <code>AnagramsStats</code>  MBean class and  <code>AnagramsStatsMBean</code>  MBean interface are generated in the  <code>com.toy.anagrams.mbeans</code>  package of the AnagramGame project. These are now several empty skeletons that you will populate in the next exercise.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exercise_3_adding_attributes_operation_and_notification_to_the_anagramsstats_jmx_standard_mbean">Exercise 3: Adding attributes, operation and notification to the AnagramsStats JMX Standard MBean</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The goal of this exercise is to populate the generated MBean skeleton, so that it monitors the time spent by the user to solve a new anagram and a JMX notification is sent each time an anagram is solved.</p>
</div>
<div class="paragraph">
<p>The MBean will contain the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Two Attributes named  <code>LastThinkingTime</code>  and  <code>NumResolvedAnagrams</code></p>
</li>
<li>
<p>An Operation named  <code>resetAll</code> .</p>
</li>
<li>
<p>A notification of type  <code>AttributeChangeNotification</code> . This notification is emitted when  <code>LastThinkingTime</code>  is updated.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Perform the following steps to populate the MBean skeleton.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the  <code>AnagramsStats.java</code>  MBean implementation file in the NetBeans editor.</p>
</li>
<li>
<p>Right-click in the source editor and select <strong>JMX &gt; Add MBean Attributes</strong> in the popup menu.</p>
</li>
<li>
<p>Add the  <code>LastThinkingTime</code>  attribute by clicking the Add Attribute button and supplying the following information.</p>
<div class="ulist">
<ul>
<li>
<p>Attribute Name:  <code>LastThinkingTime</code></p>
</li>
<li>
<p>Type: int</p>
</li>
<li>
<p>Access: ReadOnly</p>
</li>
<li>
<p>Description:  <code>Elapsed time to solve last anagram</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Note.</strong> Do not click OK yet!</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click Add Attribute again and add the following  <code>NumSolvedAnagrams</code>  attribute. Click OK.</p>
<div class="ulist">
<ul>
<li>
<p>Attribute Name:  <code>NumSolvedAnagrams</code></p>
</li>
<li>
<p>Type: int</p>
</li>
<li>
<p>Access: ReadOnly</p>
</li>
<li>
<p>Description:  <code>Number of solved anagrams</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jmx-addattribute.png" alt="jmx addattribute">
</div>
</div>
<div class="paragraph">
<p>The necessary code to expose the read only  <code>LastThinkingTime</code>  and  <code>NumSolvedAnagrams</code>  attributes is generated in both the  <code>AnagramsStats</code>  MBean class and its interface.</p>
</div>
<div class="paragraph">
<p>You can see the private fields declaration and the public getter methods. More precisely, looking at the members view and at the generated code, you will notice that the  <code>getLastThinkingTime</code>  and  <code>getNumSolvedAnagrams</code>  methods are generated both in the  <code>AnagramsStats</code>  class and in its  <code>AnagramsStatsMBean</code>  interface. The private fields  <code>lastThinkingTime</code>  and  <code>numSolvedAnagrams</code>  of type  <code>int</code>  were also generated and will be used to store the actual attribute values.</p>
</div>
<div class="paragraph">
<p>Next you will add three more attributes to keep track of the minimum and maximum thinking time the user took, and of the current anagram being proposed to the user.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click in the source editor and select <strong>JMX &gt; Add MBean Attributes</strong> in the popup menu.</p>
</li>
<li>
<p>Click the Add Attribute button and add the following attributes.</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attribute Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MinThinkingTime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadOnly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum elapsed time to solve an anagram</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MaxThinkingTime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadOnly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum elapsed time to solve an anagram</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CurrentAnagram</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ReadOnly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Current anagram to solve</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The dialog box should be similar to the following image.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jmx-addattribute2.png" alt="jmx addattribute2">
</div>
<div class="title">Figure 3. Add Attribute dialog after adding 3 more attributes</div>
</div>
<div class="paragraph">
<p><strong>Note.</strong> Notice that the attributes that you already created are listed in the dialog box.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click OK and save your changes.</p>
</li>
<li>
<p>Right-click in the source editor and select <strong>JMX &gt; Add MBeans Operations</strong> in the popup menu.</p>
</li>
<li>
<p>Click Add Operation and add the  <code>resetAll()</code>  operation and specify the following details. Click OK.</p>
<div class="ulist">
<ul>
<li>
<p>Operation Name:  <code>resetAll</code></p>
</li>
<li>
<p>Return Type:  <code>void</code></p>
</li>
<li>
<p>Parameters: (leave empty)</p>
</li>
<li>
<p>Exceptions: (leave empty)</p>
</li>
<li>
<p>Description:  <code>Reset MBean state</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jmx-addoperation.png" alt="jmx addoperation">
</div>
<div class="title">Figure 4. Adding resetAll operation in Add Operation dialog</div>
</div>
<div class="paragraph">
<p>After you click OK you can see that the necessary code to expose the  <code>resetAll</code>  operation was generated in both the  <code>AnagramsStats</code>  MBean class and its interface.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click in the source editor and select the <strong>JMX &gt; Implement NotificationEmitter interface</strong> in the popup menu.</p>
</li>
<li>
<p>Specify the following details in the Implement NotificationEmitter interface dialog box.</p>
<div class="ulist">
<ul>
<li>
<p><strong>Select Generate Delegation to Broadcaster.</strong> All methods declared by the  <code>NotificationEmitter</code>  interface will be implemented by delegating to a notification broadcaster. A notification broadcaster simplifies the way the MBean will send notifications.</p>
</li>
<li>
<p><strong>Select Generate Private Seq Number and Accessor.</strong> Some code will be generated to handle the unique sequence number value that must be added to each notification that is sent.</p>
</li>
<li>
<p><strong>Click Add Notification.</strong> Specify the following details in the Notifications table.</p>
</li>
<li>
<p>Notification Class:  <code>javax.management.AttributeChangeNotification</code></p>
</li>
<li>
<p>Notification Type: (it is automatically set to  <code>ATTRIBUTE_CHANGE</code> )</p>
</li>
<li>
<p>Description:  <code>Anagram is Solved</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jmx-changenotification.png" alt="jmx changenotification">
</div>
<div class="title">Figure 5. Adding change notification in Implement NotificationEmitter dialog</div>
</div>
<div class="paragraph">
<p>Click OK.</p>
</div>
<div class="paragraph">
<p>You can see that the necessary code to implement the  <code>NotificationEmitter</code>  interface was generated in the  <code>AnagramsStats</code>  MBean class. You can see how the generated implementation delegates the handling of notifications to the  <code>NotificationBroadcasterSupport</code>  class.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Save your changes.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In this exercise you learned how to add attributes, operations and notifications emission to an MBean using the JMX Wizard module. The steps needed to populate your MBean with the necessary infrastructure to expose the management information you want are now finished. You now need to add internal logic to the  <code>AnagramsStats</code>  MBean class implementation, then build the bridge between the MBean and the Anagram Game application.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exercise_4_adding_implementation_code_to_the_anagramsstats_jmx_standard_mbean">Exercise 4: Adding implementation code to the AnagramsStats JMX Standard MBean</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this exercise you will add some internal logic to the  <code>AnagramsStats</code>  MBean class implementation.</p>
</div>
<div class="paragraph">
<p>Perform the following steps to add the implementation code.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The attributes already have their private fields declared, and nothing needs to be added to their getter methods.</p>
</li>
<li>
<p>The  <code>resetAll()</code>  method needs to be implemented. The generated body is empty. When  <code>resetAll()</code>  is called, we simply set all counters to 0. Add the following lines of code (in bold) in the  <code>resetAll()</code>  method body:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void resetAll() {
    *minThinkingTime = 0;
    maxThinkingTime = 0;
    lastThinkingTime = 0;
    numSolvedAnagrams = 0;*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You also need to add some implementation code that will do the following:</p>
<div class="ulist">
<ul>
<li>
<p>calculate the thinking time the user took to solve the last anagram,</p>
</li>
<li>
<p>calculate the minimum and maximum thinking times,</p>
</li>
<li>
<p>increment the counter of solved anagrams,</p>
</li>
<li>
<p>know wich is the current anagram,</p>
</li>
<li>
<p>create and send a notification when an anagram is solved.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>For that purpose you will add a private field  <code>startTime</code>  to store the time at which the last anagram was presented to the user, two methods  <code>startThinking()</code>  and  <code>stopThinking()</code>  to perform the operations listed above, and a  <code>setCurrentAnagram()</code>  method.</p>
</div>
<div class="paragraph">
<p>Add the following code to  <code>AnagramsStats.java</code> , e.g. at the end of the class implementation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">/*
 * Methods exposed to Anagrams application to feed management with data.
 */

//Stores the time at which a new anagram is proposed to the user.
private long startTime;

/**
 * A new Anagram is proposed to the user: store current time.
 */
public void startThinking() {
    startTime = System.currentTimeMillis();
}

/**
 * An Anagram has been resolved.
 */
public void stopThinking() {

    //Update the number of resolved anagrams
    numSolvedAnagrams++;

    // Compute last, min and max thinking times
    lastThinkingTime = (int) (System.currentTimeMillis() - startTime) / 1000 ;
    minThinkingTime = (lastThinkingTime &lt; minThinkingTime || minThinkingTime == 0) ?
                      lastThinkingTime :
                      minThinkingTime;
    maxThinkingTime = (lastThinkingTime &gt; maxThinkingTime) ?
                      lastThinkingTime :
                      maxThinkingTime;

    //Create a JMX Notification
    Notification notification = new Notification(AttributeChangeNotification.ATTRIBUTE_CHANGE,
            this,
            getNextSeqNumber(),
            "Anagram solved: " + currentAnagram);

    // Send a JMX notification.
    broadcaster.sendNotification(notification);
}

/**
 * Set latest anagram which has been computed by the Anagram application
 */
public void setCurrentAnagram(String currentAnagram) {
    this.currentAnagram = currentAnagram;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the three methods  <code>startThinking()</code> ,  <code>stopThinking()</code>  and  <code>setCurrentAnagram()</code>  are not part of the MBean management interface, because they are not declared in the  <code>AnagramsStatsMBean</code>  interface, but they are public because they will be called by the Anagram Game application to tell the MBean each time that a new anagram is presented to the user and when it is solved, and which is the current anagram. So, they are a necessary part of the bridge between the application and our MBean.</p>
</div>
<div class="paragraph">
<p>Notice also how a JMX notification of type  <code>ATTRIBUTE_CHANGE</code>  is sent each time an anagram is solved.</p>
</div>
<div class="paragraph">
<p>You are now done with the MBean implementation. In this section you added code and methods to allow the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>internal MBean state updates</p>
</li>
<li>
<p>calls from the application</p>
</li>
<li>
<p>sending of JMX notifications</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exercise_5_connecting_management_and_the_application_together">Exercise 5: Connecting Management and the Application Together</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this exercise, we will add code to the Anagram Game application so that it can access the MBean to pass management information.</p>
</div>
<div class="paragraph">
<p>Perform the following steps to</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open  <code>Anagrams.java</code>  in the editor.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The  <code>Anagrams</code>  class in the  <code>com.toy.anagrams.ui</code>  package is the  <code>main</code>  class of the Anagram Game application. The file opens in the Editor&#8217;s Design view because the  <code>Anagrams</code>  class is also the User Interface class.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the Source button at the top of the Editor window to edit the class in the Source view.</p>
</li>
<li>
<p>Add the following empty  <code>initManagement()</code>  private method to the  <code>Anagrams</code>  class: after the  <code>Anagrams</code>  constructor.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">/**
 * JMX initialization:
 * Create and register Anagrams MBean in Platform MBeanServer.
 * Initialize thinking time and current anagram.
 */
private void initManagement() throws Exception {

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the following call to the  <code>initManagement()</code>  method at the end of the  <code>Anagrams</code>  class constructor before the enclosing curly brace marking the end of the constructor.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">//JMX Management initialization
initManagement();</code></pre>
</div>
</div>
<div class="paragraph">
<p>You also need to add a  <code>throws Exception</code>  clause to the  <code>Anagrams()</code>  constructor and surround the statement  <code>new Anagrams().setVisible(true);</code>  with a try-catch in the  <code>Main()</code>  method to compile. You can see the suggestion glyph in the left margin of the editor. You can place your insert cursor in the line in the code and type Alt-Enter to invoke the code hint in the source editor.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jmx-initmanagement-try.png" alt="jmx initmanagement try">
</div>
<div class="title">Figure 6. Code hint to add try-catch</div>
</div>
<div class="paragraph">
<p>Here is what you should see at this stage [click to view larger image]:</p>
</div>
<div class="openblock feature">
<div class="content">
<div class="paragraph">
<p><span class="image left"><a class="image" href="images/jmx-initmanagement.png"><img src="images/jmx-initmanagement-sm.png" alt="jmx initmanagement sm"></a></span></p>
</div>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>We now add the MBean registration code to the  <code>initManagement()</code>  method, using the JMX Module MBean registration wizard:</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the  <code>Anagrams.java</code>  source editor window, right-click <strong>inside</strong> the  <code>initManagement()</code>  method body, select the JMX submenu and then the "Generate MBean Registration&#8230;&#8203;" action. In the "Instantiate and Register MBean" panel that shows up, keep the "Register Existing MBean" radio-button selected, click the Browse button, choose the  <code>AnagramsStats</code>  MBean class and click OK in the Browse panel. You should now see:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jmx-registermbeandialog.png" alt="jmx registermbeandialog">
</div>
</div>
<div class="paragraph">
<p>No need to change the automatically specified MBean Object Name and Constructor. Click OK, and you will see the generated MBean registration code in the  <code>initManagement()</code>  method body.</p>
</div>
<div class="sect2">
<h3 id="_best_practice_for_naming_your_mbeans">Best practice for naming your MBeans</h3>
<div class="ulist">
<ul>
<li>
<p>When naming your MBean, use the " <code>type=</code> " key in the Object Name. The value of this key should be the MBean class (in our case  <code>AnagramsStats</code> ).</p>
</li>
<li>
<p>In the case of a singleton MBean (an MBean that has a single instance within your application), having this unique key is sufficient for naming purposes.</p>
</li>
<li>
<p>Avoid creating too many domain names. Use your application Java package names. You can also use the default domain name: not specifying a domain before the  <code>ObjectName</code>  " <code>:</code> " separator implicitly references the default domain.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Applying best practices will make the way you name your MBeans more formalized.</p>
</div>
<div class="paragraph">
<p>So, the  <code>ObjectName</code>  created by default in our case above is:  <code>com.toy.anagrams.mbeans:type=AnagramsStats</code></p>
</div>
<div class="paragraph">
<p>In the context of this tutorial, an extra step is required. You want the application to have access to the class implementing the management interface ( <code>AnagramsStats</code> ). This is not a general rule but it can be useful when your application needs to push data to an MBean. In this case, the  <code>startThinking()</code> ,  <code>stopThinking()</code>  and  <code>setCurrentAnagram()</code>  methods are not management methods but are used by the Anagrams Game application to notify the MBean that some events have occured. In turn, the MBean updates its state. In order to make  <code>AnagramsStats</code>  accessible from the  <code>Anagrams</code>  UI class, we need the  <code>Anagrams</code>  class to keep a direct reference to the instance of the  <code>AnagramsStats</code>  MBean.</p>
</div>
<div class="paragraph">
<p>Therefore, you need to make the following changes to the code of the  <code>Anagrams.java</code>  file.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the following private field to the  <code>Anagrams</code>  class.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    // Reference to the AnagramsStats MBean
    private AnagramsStats mbean;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Initialize the reference to the  <code>AnagramsStats</code>  MBean in the  <code>initManagement()</code>  method by modifying the generated MBean Registration code so that it reads:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private void initManagement() throws Exception {
    try { // Register MBean in Platform MBeanServer
         *mbean = new AnagramsStats();*
         ManagementFactory.getPlatformMBeanServer().
                registerMBean(*mbean*,
                new ObjectName("com.toy.anagrams.mbeans:type=AnagramsStats"));
    } catch (JMException ex) {
        *ex.printStackTrace();*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Initialize the  <code>AnagramsStats</code>  MBean state: when the Anagrams Game application starts up, an anagram is immediately displayed, so we need to pass to the MBean the anagram string value and to start computing thinking time. Copy and paste the lines below at the end of the  <code>initManagement()</code>  method:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">       // When the Anagrams game is first displayed, a word is proposed to the user.
       // We must start time computing and set the current anagram
       mbean.startThinking();
       mbean.setCurrentAnagram(wordLibrary.getScrambledWord(wordIdx));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is what you should see at this stage [click to view larger image]:</p>
</div>
<div class="openblock feature">
<div class="content">
<div class="paragraph">
<p><span class="image left"><a class="image" href="images/jmx-initmanagement2.png"><img src="images/jmx-initmanagement2-sm.png" alt="jmx initmanagement2 sm"></a></span></p>
</div>
</div>
</div>
<div class="paragraph">
<p>You now need to add code to track the user&#8217;s anagram solving experience.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Locate the  <code>nextTrialActionPerformed()</code>  method and paste the following code at the end of the  <code>nextTrialActionPerformed()</code>  method.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    //Update management statistics and values
    try {
        mbean.setCurrentAnagram(wordLibrary.getScrambledWord(wordIdx));
        mbean.startThinking();
        } catch (Exception e) {e.printStackTrace();}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each time that a new anagram is proposed to the user, the code tells the MBean which anagram it is and to start counting the user thinking time.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Locate the  <code>guessedWordActionPerformed()</code>  method and add the following lines to the code. Save your changes.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    //Update management stats
    try {
        mbean.stopThinking();
    } catch(Exception e) {e.printStackTrace();}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The  <code>stopThinking()</code>  method in the MBean is called each time that an anagram is guessed correctly.</p>
</div>
<div class="paragraph">
<p>You should now see the following in the editor [click to view larger image]:</p>
</div>
<div class="openblock feature">
<div class="content">
<div class="paragraph">
<p><span class="image left"><a class="image" href="images/jmx-stopthinking.png"><img src="images/jmx-stopthinking-sm.png" alt="jmx stopthinking sm"></a></span></p>
</div>
</div>
</div>
<div class="paragraph">
<p>You have now finished linking the JMX management layer to the application layer. In the next section you will build and run the Anagrams Game application and look at the exposed management information through the JConsole GUI.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exercise_6_running_the_application_with_jconsole">Exercise 6: Running the Application with JConsole</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this exercise, you will learn how to build and run your project, and connect JConsole to visualize the JVM state, as well as the application MBeans.</p>
</div>
<div class="paragraph">
<p>Perform the following steps to run the application and view the management information.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A single step performs these three tasks: simply click the "Run Main Project with Monitoring and Management" button in the toolbar (  <span class="image"><img src="images/run-project24.png" alt="run project24" title="Run Main Project with Monitoring and Management button"></span>)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can also invoke the action from the Run menu in the main menu.</p>
</div>
<div class="paragraph">
<p><strong>Note.</strong> The first time that you build and run the application the IDE displays a warning dialog that informs you that the  <code>build.xml</code>  files will be updated. You can click OK in the dialog.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jmx-firsttime.png" alt="jmx firsttime">
</div>
<div class="title">Figure 7. Warning dialog when monitoring application for the first time</div>
</div>
<div class="paragraph">
<p>You can follow the execution in the Output window.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jmx-compiling.png" alt="jmx compiling">
</div>
<div class="title">Figure 8. Output window displaying process</div>
</div>
<div class="paragraph">
<p>The IDE will build and launch the Anagram game and will automatically open the JConsole window.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jmx-anagram.png" alt="jmx anagram">
</div>
<div class="title">Figure 9. Anagram Game</div>
</div>
<div class="paragraph">
<p><strong>Notes.</strong> You might see a Connection Failed warning in the Java Monitoring &amp; Management Console when the console attempts to connect to the Anagram Game process. For this tutorial you can click Insecure when you are prompted to authorize the connection.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select the MBeans tab in the JConsole window.</p>
</li>
<li>
<p>In the tree layout in the left pane, expand all the nodes under  <code>com.toy.anagrams.mbeans</code> .</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jmx-jconsole-mbeans1.png" alt="jmx jconsole mbeans1">
</div>
<div class="title">Figure 10. MBeans tab showing AnagramsStats node</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select the Notifications node and click on the Subscribe button at the bottom so that JConsole will receive a new notification each time an anagram is solved.</p>
</li>
<li>
<p>In the Anagrams Game window, and solve the first three or four anagrams.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The solutions to the anagrams (abstraction, ambiguous, arithmetic, backslash,&#8230;&#8203;) are contained in the  <code>WordLibrary</code>  class.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the JConsole window, and notice that it received notifications for each of the solutions.</p>
</li>
</ol>
</div>
<div class="openblock">
<div class="content">
<div class="imageblock left">
<div class="content">
<a class="image" href="images/jmx-jconsole-mbeans2.png"><img src="images/jmx-jconsole-mbeans2-sm.png" alt="jmx jconsole mbeans2 sm"></a>
</div>
</div>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click on the Attributes node and notice the attributes values are updated:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jmx-jconsole-mbeans3.png" alt="jmx jconsole mbeans3">
</div>
<div class="title">Figure 11. MBeans tab showing AnagramsStats node</div>
</div>
<div class="paragraph">
<p>You can experiment with the JConsole interface and the Anagrams Game. For example, if you invoke the management operation  <code>resetAll()</code>  you will see that the MBean attribute values are reset to 0.</p>
</div>
<div class="paragraph">
<p>*And now, you are done! You did a really good job, congratulations! *</p>
</div>
<div class="paragraph">
<p><a href="../../../community/mailing-lists.html">Send Us Your Feedback</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also">See Also</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information, see the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="jmx-getstart.html">Getting Started with JMX Monitoring in NetBeans IDE</a></p>
</li>
</ul>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/java/jmx-tutorial.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
