
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>通过 Web 服务传递二进制数据，第 4 部分：修改方案文件和 WSDL 文件</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="通过 Web 服务传递二进制数据，第 4 部分：修改方案文件和 WSDL 文件 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, 通过 Web 服务传递二进制数据，第 4 部分：修改方案文件和 WSDL 文件">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">通过 Web 服务传递二进制数据，第 4 部分：修改方案文件和 WSDL 文件</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/websvc/flower_wsdl_schema_zh_CN.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_修改方案文件和_wsdl_文件以传递二进制数据">修改方案文件和 WSDL 文件以传递二进制数据</a></li>
<li><a href="#_后续步骤">后续步骤：</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>在本课中，将向 Web 应用程序中添加 WSDL 文件和方案文件。然后修改方案文件，以将字节数组转换为图像。还将编辑 Web 服务源代码以正确地找到方案和 WSDL 文件。在此过程中，将向您介绍 IDE 中的各种工具，帮助您处理 WSDL 和方案文件。</p>
</div>
<div class="paragraph">
<p>您可以将此部分介绍的过程应用于任何 JAX-WS Web 服务，以便将任何 MIME 类型作为二进制数据进行传递。您将从传递二进制数据的 Web 服务（已在第 2 和第 3 课中创建）着手，定制该服务的 WSDL 和 XML 方案。在定制的 XML 方案文件中，您将在二进制数据的返回元素中添加  <code>expectedContentTypes="<em>mime_type</em>"</code>  属性。此属性通知客户端，它应将二进制数据映射到 Java 类型（按照从 MIME 到 Java 类型的映射），而不是字节数组。在本教程中，您将二进制数据映射到  <code>java.awt.Image</code> ；不过，您也可以将二进制数据映射到 JAXB 2.0 规范中给定的任何 Java 类型，如 <a href="http://jax-ws.dev.java.net/nonav/2.1.4/docs/mtom-swaref.html">JAX-WS Users Guide</a>（JAX-WS 用户指南）中所述。</p>
</div>
<div class="paragraph">
<p><strong>本教程中的课程</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-80-74-73.png" alt="netbeans stamp 80 74 73">
</div>
<div class="title">Figure 1. 此页上的内容适用于 NetBeans IDE 7.2、7.3、7.4 和 8.0</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="./flower_overview.html">概述</a></p>
</li>
<li>
<p><a href="./flower_ws.html">创建 Web 服务</a></p>
</li>
<li>
<p><a href="./flower-code-ws.html">对 Web 服务进行编码和测试</a></p>
</li>
<li>
<p>&#8658; 修改方案文件和 WSDL 文件以传递二进制数据</p>
</li>
<li>
<p><a href="./flower_swing.html">创建 Swing 客户端</a></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_修改方案文件和_wsdl_文件以传递二进制数据">修改方案文件和 WSDL 文件以传递二进制数据</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在以下步骤中，将为您在以前的教程中创建的 Web 服务创建修改过的 WSDL 和 XML 方案文件。修改的 WSDL 和方案文件使 Web 服务以及使用它的客户端能够解析以二进制数据传递的 JPEG 图像数据。</p>
</div>
<div class="paragraph">
<p><strong>修改 WSDL 文件和方案文件：</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在 "Projects"（项目）窗口中，展开 "FlowerService" Web 应用程序节点，直至到达  <code>WEB-INF</code>  节点。右键单击  <code>WEB-INF</code>  文件夹，然后选择 "New"（新建）&gt; "Folder"（文件夹）。（可能需要选择 "New"（新建）&gt; "Other"（其他），然后选择 "Other"（其他）类别）。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/new-file-wiz-folder.png" alt="new file wiz folder">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>单击 "Next"（下一步）。"Name and Location"（名称和位置）页打开。将该文件夹命名为  <code>wsdl</code> 。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wsdl-folder-name-location.png" alt="wsdl folder name location">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>单击 "Finish"（完成）。"Projects"（项目）窗口中将显示文件夹  <code>wsdl</code> 。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wsdl-folder.png" alt="wsdl folder">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>展开 "Web Services"（Web 服务）节点，然后右键单击 "FlowerService" 节点。选择 "Generate and Copy WSDL&#8230;&#8203;"（生成和复制 WSDL&#8230;&#8203;）。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>"Generate and Copy WSDL"（生成和复制 WSDL）对话框打开，其中包含一个导航树。导航至您创建的  <code>wsdl</code>  文件夹 ("FlowerAlbumService" &gt; "web" &gt; "WEB-INF" &gt; "wsdl")，然后单击 "OK"（确定）。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>现在，您将在  <code>wsdl</code>  节点中看到  <code>FlowerService.wsdl</code>  和  <code>FlowerService_schema1.xsd</code> 。还将看到 "Generated Sources"（生成的源文件）(jax-ws) 的新节点。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/generated-wsdl-and-schema.png" alt="generated wsdl and schema">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>明确指定应用服务器使用您自己的 WSDL 文件版本。否则，应用服务器将生成其自身的 WSDL 文件。打开  <code>FlowerService.java</code>  并找到  <code>@WebService</code>  标注。在此标注中添加参数  <code>wsdlLocation="WEB-INF/wsdl/FlowerService.wsdl"</code> ，如下所示：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@WebService(serviceName = "FlowerService"*, wsdlLocation = "WEB-INF/wsdl/FlowerService.wsdl")*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>修改方案文件  <code>FlowerService_schema1.xsd</code> ，使其指定返回元素的所需内容类型。要在方案文件中标识返回元素，请打开该方案文件，然后找到复杂类型  <code>getThumbnailResponse</code>  和  <code>getFlowerResponse</code> ：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;xs:complexType name="getThumbnailsResponse"&gt;&lt;xs:sequence&gt;&lt;xs:element name="return" type="xs:base64Binary" minOccurs="0" maxOccurs="unbounded"/&gt;&lt;/xs:sequence&gt;&lt;/xs:complexType&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;xs:complexType name="getFlowerResponse"&gt;&lt;xs:sequence&gt;&lt;xs:element name="return" type="xs:base64Binary" minOccurs="0"/&gt; &lt;/xs:sequence&gt;&lt;/xs:complexType&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>在两个返回元素 ( <code>&lt;xs:element name="return"&#8230;&#8203;/&gt;</code> ) 中添加以下属性。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">xmime:expectedContentTypes="image/jpeg" xmlns:xmime="http://www.w3.org/2005/05/xmlmime"</code></pre>
</div>
</div>
<div class="paragraph">
<p>现在，您应该在相同的行中看到以下内容。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;xs:complexType name="getThumbnailsResponse"&gt;&lt;xs:sequence&gt;&lt;xs:element name="return" type="xs:base64Binary" minOccurs="0" maxOccurs="unbounded"
                xmime:expectedContentTypes="image/jpeg" xmlns:xmime="http://www.w3.org/2005/05/xmlmime"/&gt;&lt;/xs:sequence&gt;&lt;/xs:complexType&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;xs:complexType name="getFlowerResponse"&gt;&lt;xs:sequence&gt;&lt;xs:element name="return" type="xs:base64Binary" minOccurs="0"
            xmime:expectedContentTypes="image/jpeg" xmlns:xmime="http://www.w3.org/2005/05/xmlmime"/&gt; &lt;/xs:sequence&gt;&lt;/xs:complexType&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>现在，向测试器应用程序重新部署 Web 服务并调用其中的一项操作时，您会看到正确返回图像：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ws-tester-goodschema.png" alt="ws tester goodschema">
</div>
</div>
<div class="paragraph">
<p>由于 Tester 应用程序已经确保正确返回图像，所以可以创建一个 Swing 客户端来检索和显示图像。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_后续步骤">后续步骤：</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="./flower_swing.html">创建 Swing 客户端</a></p>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Flower%20WSDL%20EE6">发送有关此教程的反馈意见</a></p>
</div>
<div class="paragraph">
<p>要发送意见和建议、获得支持以及随时了解 NetBeans IDE Java EE 开发功能的最新开发情况，请<a href="../../../community/lists/top.html">加入 nbj2ee@netbeans.org 邮件列表</a>。</p>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/websvc/flower_wsdl_schema_zh_CN.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
