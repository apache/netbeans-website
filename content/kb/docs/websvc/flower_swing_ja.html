
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>バイナリ・データを渡すWebサービス(パート5): Swingクライアントの作成</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="バイナリ・データを渡すWebサービス(パート5): Swingクライアントの作成 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, バイナリ・データを渡すWebサービス(パート5): Swingクライアントの作成">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="/plugins/index.html">Plugins</a> </li>
            <li> <a href="/download/nb110/nb110.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Just released!</div>
            <h1 syle='font-size: 2rem'>Apache NetBeans 11.0</h1>
            <p><a class="button success" href="/download/nb110/nb110.html">Read more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">バイナリ・データを渡すWebサービス(パート5): Swingクライアントの作成</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/incubator-netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/websvc/flower_swing_ja.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_クライアント_アプリケーションの作成">クライアント・アプリケーションの作成</a></li>
<li><a href="#design-jframe">JFrameフォームのデザイン</a></li>
<li><a href="#_jframeコンポーネントのバインディング">JFrameコンポーネントのバインディング</a>
<ul class="sectlevel2">
<li><a href="#_a_id_コンポーネントの初期化_a"><a id="コンポーネントの初期化"></a></a></li>
<li><a href="#_a_id_花の表示_a"><a id="花の表示"></a></a></li>
</ul>
</li>
<li><a href="#_メイン_クラスのコーディング">[[メイン・クラスのコーディング]]</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>この課題の目標は、すでに作成、デプロイしたWebサービスのクライアントを作成し、そのクライアントにGUIインタフェースを追加することです。このインタフェースには、Webサービスがバイナリ・データとして渡すイメージが表示されます。</p>
</div>
<div class="paragraph">
<p>クライアントの完全版サンプルは、<a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FWeb%2520Services%252FWeb%2520Service%2520Passing%2520Binary%2520Data%2520--%2520EE6%252FFlowerClient.zip">NetBeansサンプル・カタログ</a>からダウンロードできます。</p>
</div>
<div class="paragraph">
<p><strong>このチュートリアルのレッスン</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-74-73-72.png" alt="netbeans stamp 74 73 72">
</div>
<div class="title">Figure 1. このページの内容は、NetBeans IDE 7.2、7.3および7.4に適用されます</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="./flower_overview.html">概要</a></p>
</li>
<li>
<p><a href="./flower_ws.html">Webサービスの作成</a></p>
</li>
<li>
<p><a href="./flower-code-ws.html">Webサービスのコーディングおよびテスト</a></p>
</li>
<li>
<p><a href="./flower_wsdl_schema.html">バイナリ・データを渡すためのスキーマとWSDLファイルの変更</a></p>
</li>
<li>
<p>&#8658; Swingクライアントの作成</p>
</li>
<li>
<p><a href="#create-client-app">クライアント・アプリケーションの作成</a></p>
</li>
<li>
<p><a href="#design-jframe">JFrameのデザイン</a>
3.
<a href="#bind-jframe">JFrameコンポーネントのバインディング</a></p>
</li>
<li>
<p><a href="#code-main-class">メイン・クラスのコーディング</a></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_クライアント_アプリケーションの作成">クライアント・アプリケーションの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この項では、Webアプリケーションを作成します。このアプリケーション内で、前のチュートリアルで作成および変更したWebサービスを使用するクライアントを作成します。</p>
</div>
<div class="paragraph">
<p><strong>クライアント・アプリケーションを作成するには:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「ファイル」&gt;「新規プロジェクト」(LinuxおよびWindowsでは[Ctrl]-[Shift]-[N]、MacOSでは[⌘]-[Shift]-[N])を選択します。新規プロジェクト・ウィザードが表示されます。</p>
</li>
<li>
<p>「Java」カテゴリから「Javaアプリケーション」を選択します。「次」をクリックします。新規Javaアプリケーション・ウィザードが表示されます。「プロジェクト名」に「 <code>FlowerClient</code> 」と入力します。プロジェクトの場所を選択し、「終了」をクリックします。IDEにより新しいJavaアプリケーション・プロジェクトが作成されます。</p>
</li>
<li>
<p>「 <code>FlowerClient</code> 」プロジェクト・ノードを右クリックし、コンテキスト・メニューから「新規」&gt;「Webサービス・クライアント」を選択します。新規Webサービス・クライアント・ウィザードが開きます。</p>
</li>
<li>
<p>「WSDL URL」ラジオ・ボタンを選択し、WSDLファイルのURLをそのフィールドに貼り付けます。デフォルトでは、URLは <code><a href="http://localhost:8080/FlowerAlbumService/FlowerServiceService?wsdl" class="bare">http://localhost:8080/FlowerAlbumService/FlowerServiceService?wsdl</a></code> です。ブラウザでURLを見つけるには、Webサービスをテストし、URLの末尾を <code>?Tester</code> から <code>?wsdl</code> に置き換えます。空のパッケージ名を含め、他のデフォルト値をすべて受け入れます。
image::images/ws-client-wiz.png[]</p>
</li>
<li>
<p>「終了」をクリックします。IDEによりWSDLファイルがダウンロードされ、Webサービスと対話するためのクライアント・スタブが追加され、Javaアプリケーション・プロジェクトの「プロジェクト」ウィンドウにノードが追加されます。
image::images/client-generated-sources.png[title="新しいWebサービス・クライアントが表示された「プロジェクト」ビュー"]</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="design-jframe">JFrameフォームのデザイン</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この項では、 <code>JFrame</code> をWebアプリケーションに追加し、Swingコンポーネントを使用してJFrame内にGUIインタフェースをデザインします。最後に、SwingコンポーネントをWebサービス・クライアント・コードにバインドします。</p>
</div>
<div class="paragraph">
<p>自分でJFrameフォームをデザインしない場合は、すでにデザインされたJFrame Javaファイルを<a href="https://netbeans.org/projects/www/downloads/download/webservices%252FFlowerFrame.java">ここから</a>ダウンロードできます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「 <code>FlowerClient</code> 」ノードを右クリックし、「新規」&gt;「JFrameフォーム」を選択します。フレームに「 <code>FlowerFrame</code> 」という名前を付けます。このフレームを <code>flowerclient</code> パッケージに配置します。</p>
</li>
<li>
<p><code>FlowerFrame</code> がエディタに表示されます。パレットが開かれていない場合は、パレットを開きます。フレームの下部の境界線をおよそ3分の1まで拡げます。
image::images/opened-flowerform.png[]</p>
</li>
<li>
<p>パレットの「Swingコンテナ」セクションからJPanelを <code>FlowerFrame</code> にドラッグします。 <code>FlowerFrame</code> 全体を埋めるように拡げます。
image::images/add-panel.png[]</p>
</li>
<li>
<p>「デザイン」ビューでこのパネルを右クリックします。コンテキスト・メニューから「変数名を変更&#8230;&#8203;」を選択します。パネルに「 <code>gardenFlowersPanel</code> 」という名前を付けます。</p>
</li>
<li>
<p>パレットからJLabelを <code>gardenFlowersPanel</code> の上にドラッグします。ラベルを右クリックし、ラベルの変数名を <code>titleLabel</code> に変更します。「 <code>titleLabel</code> 」を再度右クリックし、「テキストを編集」を選択します。テキストを「Garden Flowers」に変更します。必要に応じて、 <code>titleLabel</code> のプロパティを表示して、目立つフォントに変更します。</p>
</li>
<li>
<p>「ボタン・グループ」を「デザイン」ビューにドラッグします。ボタン・グループの変数名はデフォルトの <code>buttonGroup1</code> のままにします。</p>
</li>
<li>
<p>4つの「ラジオ・ボタン」を、 <code>titleLabel</code> の真下に横一列に並ぶようにドラッグします。各ボタンのプロパティで、 <code>buttonGroup1</code> のメンバーとして設定します。これらのボタンの他のプロパティは、次のとおりです。</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">buttonGroup1のラジオ・ボタン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">変数名</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">選択状態</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">テキスト</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">asterRadioButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aster</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">honeysuckleRadioButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Honeysuckle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">roseRadioButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rose</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sunflowerRadioButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sunflower</p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「スクロール・ペイン」をラジオ・ボタンの下にドラッグします。横のスペースのすべて、および縦のスペースのおよそ3分の2を埋めるようにスクロール・ペインを拡げます。スクロール・ペインの変数名を <code>mainScrollPane</code> に変更します。</p>
</li>
<li>
<p>「パネル」を <code>mainScrollPane</code> にドラッグします。パネルの変数名を <code>mainPanel</code> に変更します。</p>
</li>
<li>
<p>「デザイン」ビューで <code>mainPanel</code> を右クリックし、「レイアウトを設定」&gt;「境界線レイアウト」を選択します。</p>
</li>
<li>
<p>「ボタン」を <code>mainPanel</code> にドラッグします。 <code>mainPanel</code> に境界線レイアウトが設定されているため、ボタンはパネル全体を埋めるように自動的に拡げられます。ボタンの変数名を <code>mainPictureButton</code> に、ボタンのテキストを「Waiting for picture&#8230;&#8203;」に変更します。</p>
</li>
<li>
<p>もう1つの「スクロール・ペイン」を <code>mainScrollPane</code> の下のスペースにドラッグします。残りの全スペースを埋めるように、このスクロール・ペインを拡げます。新しいスクロール・ペインの変数名を <code>thumbnailScrollPane</code> に変更します。</p>
</li>
<li>
<p>「パネル」を <code>thumbnailScrollPane</code> にドラッグします。このパネルの変数名を <code>thumbnailPanel</code> に変更します。 <code>thumbnailPanel</code> のレイアウトを「グリッド・レイアウト」に設定します。</p>
</li>
<li>
<p>4つの「ボタン」を <code>thumbnailPanel</code> にドラッグします。 <code>thumbnailPanel</code> にグリッド・レイアウトが設定されているため、すべてのボタンが自動的に同じサイズになり、パネル全体を埋めるように拡げられます。これらのボタンのプロパティは、次のとおりです。 thumbnailPanelのボタン</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">変数名</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">テキスト</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">asterButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">待機中&#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">honeysuckleButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">待機中&#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">roseButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">待機中</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sunflowerButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">待機中&#8230;&#8203;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>これでJFrameフォームのデザインは完成です。この段階で、 <code>FlowerFrame</code> は次のように表示されます。
image::images/designed-form.png[title="イメージのかわりにボタンのテキストが表示された、完成したFlowerFrame"]</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jframeコンポーネントのバインディング">JFrameコンポーネントのバインディング</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この項では、コンストラクタでコンポーネントを初期化し、そのコンポーネントをリスナーにバインドします。リスナーは、花のイメージを表示するコードをコールします。</p>
</div>
<div class="sect2">
<h3 id="_a_id_コンポーネントの初期化_a"><a id="コンポーネントの初期化"></a></h3>
<div class="paragraph">
<p>[[この項では、 <code>FlowerFrame</code> コンストラクタを記述します。</p>
</div>
<div class="paragraph">
<p>]]</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>エディタの「ソース」ビューに変更します。 <code>FlowerFrame</code> クラス本文の先頭と <code>FlowerFrame</code> コンストラクタを探します。
image::images/ff-empty-constructor.png[]</p>
</li>
<li>
<p>コンストラクタの前にある <code>FlowerFrame</code> のクラス本文の先頭に、すべての花の名前の文字列配列を作成します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">protected static final String[] FLOWERS = {"aster", "honeysuckle", "rose", "sunflower"};</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>FLOWERS文字列配列とコンストラクタの間に、 <code>flowers</code> という名前の <code><a href="http://download.oracle.com/javase/6/docs/api/java/util/Map.html">java.util.Map</a></code> を初期化する行を追加します。このマップは <code>String</code> を取って <code>Image</code> にマップします。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private Map&lt;String, Image&gt; flowers;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>java.util.Map</code> と <code>java.awt.Image</code> のインポート文を追加します。</p>
</li>
<li>
<p><code>flowers</code> マップの特定のインスタンスで特定の <code>Image</code> を特定の <code>String</code> に関連付けるコードを、 <code>FlowerFrame</code> コンストラクタに追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public FlowerFrame(Map&lt;String, Image&gt; flowers) {

    this.flowers = flowers;
    for (String flower:FLOWERS) {
        flowers.put(flower,null);
    }

    initComponents();
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ラジオ・ボタン用の <code>ItemListener</code> と4つの花のボタン用の <code>ActionListener</code> を初期化し、デフォルトのタイトルを設定します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public FlowerFrame(Map&lt;String, Image&gt; flowers) {

    this.flowers = flowers;
    for (String flower:FLOWERS) {
        flowers.put(flower,null);
    }

    initComponents();

    setTitle("Garden Flowers [waiting for picture]");

    ItemListener rbListener = new RBListener();
    asterRadioButton.addItemListener(rbListener);
    honeysuckleRadioButton.addItemListener(rbListener);
    roseRadioButton.addItemListener(rbListener);
    sunflowerRadioButton.addItemListener(rbListener);

    ActionListener bListener = new ButtonListener();
    asterButton.addActionListener(bListener);
    honeysuckleButton.addActionListener(bListener);
    roseButton.addActionListener(bListener);
    sunflowerButton.addActionListener(bListener);
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code><a href="http://download.oracle.com/javase/6/docs/api/java/awt/event/ItemListener.html">java.awt.event.ItemListener</a></code> と <code><a href="http://download.oracle.com/javase/6/docs/api/java/awt/event/ActionListener.html">java.awt.event.ActionListener</a></code> のインポート文を追加します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>これでコンストラクタは完成しました。ただし、コードに <code>RBListener</code> クラスと <code>ButtonListener</code> クラスが含まれていないため、コンパイル・エラーの警告が表示されます。この2つのクラスは、それぞれ <code>ItemListener</code> と <code>ActionListener</code> のカスタム実装です。この2つのクラスの記述は、次の項で行います。</p>
</div>
</div>
<div class="sect2">
<h3 id="_a_id_花の表示_a"><a id="花の表示"></a></h3>
<div class="paragraph">
<p>[[この項では、ラジオ・ボタンと花のボタンのカスタム・リスナーを記述します。また、ボタンによって選択された花を判断し、その花の <code>Image</code> を <code>flowers</code> マップから取得するメソッドを記述します。最後に、 <code>Main</code> クラスによってコールされ、各サムネイルの <code>Image</code> を取得するメソッドを記述します。</p>
</div>
<div class="paragraph">
<p>]]</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>FlowerFrame</code> のクラス本文で <code>public static void main(String args[])</code> メソッドを探します。このメソッドとそのドキュメントを削除します。このアプリケーションでは、かわりに <code>Main</code> クラスを使用します。</p>
</li>
<li>
<p><code>main</code> メソッドのかわりに、カスタム <code>ItemListener</code> をラジオ・ボタン用に記述します。このリスナーは、ラジオ・ボタンが選択されたときに新しい花のイメージを表示します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private class RBListener implements ItemListener {
    public void itemStateChanged(ItemEvent e) {
        showFlower();
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code><a href="http://download.oracle.com/javase/6/docs/api/java/awt/event/ItemEvent.html">java.awt.event.ItemEvent</a></code> のインポート文を追加します。</p>
</li>
<li>
<p>カスタム <code>ItemListener</code> の下に、カスタム <code>ActionListener</code> を4つの花のボタン用に記述します。ボタンがクリックされると、リスナーは関連するラジオ・ボタンを選択します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private class ButtonListener implements ActionListener {

    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == asterButton) asterRadioButton.setSelected(true);
        else if (e.getSource() == honeysuckleButton) honeysuckleRadioButton.setSelected(true);
        else if (e.getSource() == roseButton) roseRadioButton.setSelected(true);
        else if (e.getSource() == sunflowerButton) sunflowerRadioButton.setSelected(true);
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code><a href="http://download.oracle.com/javase/6/docs/api/java/awt/event/ActionEvent.html">java.awt.event.ActionEvent</a></code> のインポート文を追加します。</p>
</li>
<li>
<p>カスタム <code>ActionListener</code> の下に <code>showFlower</code> メソッドを記述します。このメソッドは、選択されているラジオ・ボタンを判断し、対応する花の <code>Image</code> を <code>flowers</code> マップから取得します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">void showFlower() {
    Image img = null;
    if (asterRadioButton.isSelected()) {
        img = flowers.get("aster");
        if (img != null) {
            mainPictureButton.setIcon(new ImageIcon(img));
            setTitle("Garden Flowers [Aster]");
        }
    } else if (honeysuckleRadioButton.isSelected()) {
        img = flowers.get("honeysuckle");
        if (img != null) {
            mainPictureButton.setIcon(new ImageIcon(img));
            setTitle("Garden Flowers [Honeysuckle]");
        }

    } else if (roseRadioButton.isSelected()) {
        img = flowers.get("rose");
        if (img != null) {
            mainPictureButton.setIcon(new ImageIcon(img));
            setTitle("Garden Flowers [Rose]");
        }
    } else if (sunflowerRadioButton.isSelected()) {
        img = flowers.get("sunflower");
        if (img != null) {
            mainPictureButton.setIcon(new ImageIcon(img));
            setTitle("Garden Flowers [Sunflower]");
        }
    }
    if (img == null) {
        mainPictureButton.setIcon(null);
        setTitle("Garden Flowers [waiting for picture]");
    } else mainPictureButton.setText("");
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code><a href="http://download.oracle.com/javase/6/docs/api/javax/swing/ImageIcon.html">javax.swing.ImageIcon</a></code> のインポート文を追加します。</p>
</li>
<li>
<p><code>setThumbnails</code> メソッドを記述します。このメソッドは、各サムネイルのイメージを <code>flowers</code> マップから取得します。 <code>Main</code> クラスがこのメソッドをコールします。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">void setThumbnails(Map&lt;String, Image&gt; thumbs) {
    Image img = thumbs.get("aster");
    if (img != null) {
        asterButton.setIcon(new ImageIcon(img));
        asterButton.setText("");
    }
    img = thumbs.get("honeysuckle");
    if (img != null) {
        honeysuckleButton.setIcon(new ImageIcon(img));
        honeysuckleButton.setText("");
    }
    img = thumbs.get("rose");
    if (img != null) {
        roseButton.setIcon(new ImageIcon(img));
        roseButton.setText("");
    }
    img = thumbs.get("sunflower");
    if (img != null) {
        sunflowerButton.setIcon(new ImageIcon(img));
        sunflowerButton.setText("");
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>FlowerFrame</code> のコードに貼り付けたときにインポートを修正していない場合は、インポートを修正します。エディタで右クリックし、コンテキスト・メニューから「インポートを修正」を選択すると、すべてのインポートを一度に修正できます。完成した一連のインポート文は次のようになります。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">import java.awt.Image;import java.awt.event.ActionEvent;import java.awt.event.ActionListener;import java.awt.event.ItemEvent;import java.awt.event.ItemListener;import java.util.Map;import javax.swing.ImageIcon;</code></pre>
</div>
</div>
<div class="paragraph">
<p>これで <code>FlowerFrame</code> は完成しました。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_メイン_クラスのコーディング">[[メイン・クラスのコーディング]]</h2>
<div class="sectionbody">
<div class="paragraph">
<p>[[この項では、 <code>Main</code> クラスを完成させ、 <code>FlowerFrame</code> の表示、Webサービスへの接続、およびWebサービスの操作のコールを実行できるようにします。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>Main.java</code> クラスをエディタで開きます。
image::images/main-empty.png[]</p>
</li>
<li>
<p>クラス本文の <code>main</code> メソッドの前で、ダウンロードした写真の数を示す <code>int</code> 変数を初期化します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java"> private static int downloadedPictures;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>main</code> メソッドの本文で、4つの花用の <code>HashMap</code> と、4つのサムネイル用に別の <code>HashMap</code> を作成します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">final Map&lt;String,Image&gt; flowers = new HashMap&lt;String,Image&gt;(4);
final Map&lt;String,Image&gt; thumbs = new HashMap&lt;String,Image&gt;(4);</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>java.awt.Image</code> 、 <code>java.util.Map</code> および <code>java.util.HashMap</code> のインポート文を追加します。</p>
</li>
<li>
<p><code>main</code> メソッドの本文で、 <code>FlowerFrame</code> を表示するコードを追加します。<strong>// Show the FlowerFrame.</strong></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">final FlowerFrame frame = new FlowerFrame(flowers);
frame.setVisible(true);</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>main</code> メソッドの本文で、クライアントをサービスに接続するコードを追加します。<strong>// The client connects to the service with this code.</strong></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">FlowerServiceService service = new FlowerServiceService();
final FlowerService port = service.getFlowerServicePort();</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>org.flower.service.FlowerService</code> と <code>org.flower.service.FlowerServiceService</code> のインポート文を追加します。</p>
</li>
<li>
<p><code>main</code> メソッドの本文で、4つの <code>Runnable</code> スレッドの配列を作成し、Webサービスの <code>getFlower</code> 操作をスレッドごとに一度コールするコードを追加します。*// The web service getFlower operation</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Runnable[] tasks = new Runnable[4];

for (int i=0; i&lt;4;i++) {
    final int index = i;
    tasks[i] = new Runnable() {
        public void run() {
            try {

                *// Call the getFlower operation
                // on the web service:*
                Image img = port.getFlower(FlowerFrame.FLOWERS[index]);
                System.out.println("picture downloaded: "+FlowerFrame.FLOWERS[index]);

                *// Add strings to the hashmap:*
                flowers.put(FlowerFrame.FLOWERS[index],img);

                *// Call the showFlower operation
                // on the FlowerFrame:*
                frame.showFlower();

            } catch (IOException_Exception ex) {
                ex.printStackTrace();
            }
            downloadedPictures++;
        }
    };
    new Thread(tasks[i]).start();
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>org.flower.service.IOException_Exception</code> のインポート文を追加します。</p>
</li>
<li>
<p>the <code>main</code> メソッドの本文で、Webサービスの <code>getThumbnails</code> 操作を別スレッドでコールするコードを追加します。*// The web service getThumbnails operation is called</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Runnable thumbsTask = new Runnable() {
    public void run() {
        try {
            while (downloadedPictures &lt; 4) {
                try {Thread.sleep(100);} catch (InterruptedException ex) {}
            }

            *// Call the getThumbnails operation
            // on the web service:*
            List&lt;Image&gt; images = port.getThumbnails();
            System.out.println("thumbs downloaded");

            if (images != null &amp;amp;&amp;amp; images.size() == 4) {
                for (int i=0;i&lt;4;i++) {
                    thumbs.put(FlowerFrame.FLOWERS[i],images.get(i));
                }
                frame.setThumbnails(thumbs);
            }
        } catch (IOException_Exception ex) {
            ex.printStackTrace();
        }
    }
};
new Thread(thumbsTask).start();</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>Main.java</code> のコードに貼り付けたときにインポートを修正していない場合は、インポートを修正します。エディタで右クリックし、コンテキスト・メニューから「インポートを修正」を選択すると、すべてのインポートを一度に修正できます。インポートするListクラスの選択肢が表示されたら、「 <code>java.util.List</code> 」を選択します。完成した一連のインポート文は次のようになります。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">import flower.album.FlowerService;import flower.album.FlowerService_Service;import flower.album.IOException_Exception;import java.awt.Image;import java.util.HashMap;import java.util.List;import java.util.Map;</code></pre>
</div>
</div>
<div class="paragraph">
<p>これで <code>Main</code> クラスは完成しました。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class Main {

     private static int downloadedPictures;

     public static void main(String[] args) {

        final Map&lt;String,Image&gt; flowers = new HashMap&lt;String,Image&gt;(4);
        final Map&lt;String,Image&gt; thumbs = new HashMap&lt;String,Image&gt;(4);

        *// Show the FlowerFrame.*
        final FlowerFrame frame = new FlowerFrame(flowers);
        frame.setVisible(true);
        *        // The client connects to the service with this code.*
        FlowerService_Service service = new FlowerService_Service();
        final FlowerService port = service.getFlowerServicePort();

        Runnable[] tasks = new Runnable[4];

        *// The web service getFlower operation
        // is called 4 times, each in a separate thread.
        // When the operation finishes the picture is shown in
        // a specific button.*
        for (int i=0; i&lt;4;i++) {
            final int index = i;
            tasks[i] = new Runnable() {
                public void run() {
                    try {

                        *// Call the getFlower operation
                        // on the web service:*
                        Image img = port.getFlower(FlowerFrame.FLOWERS[index]);
                        System.out.println("picture downloaded: "+FlowerFrame.FLOWERS[index]);

                        *// Add strings to the hashmap:*
                        flowers.put(FlowerFrame.FLOWERS[index],img);

                        *// Call the showFlower operation
                        // on the FlowerFrame:*
                        frame.showFlower();

                    } catch (IOException_Exception ex) {
                        ex.printStackTrace();
                    }
                    downloadedPictures++;
                }
            };
            new Thread(tasks[i]).start();
        }
        *// The web service getThumbnails operation is called
        // in a separate thread, just after the previous four threads finish.
        // When the images are downloaded, the thumbnails are shown at
        // the bottom of the frame.*
        Runnable thumbsTask = new Runnable() {
            public void run() {
                try {
                    while (downloadedPictures &lt; 4) {
                        try {Thread.sleep(100);} catch (InterruptedException ex) {}
                    }

                    *// Call the getThumbnails operation
                    // on the web service:*
                    List&lt;Image&gt; images = port.getThumbnails();
                    System.out.println("thumbs downloaded");

                    if (images != null &amp;amp;&amp;amp; images.size() == 4) {
                        for (int i=0;i&lt;4;i++) {
                            thumbs.put(FlowerFrame.FLOWERS[i],images.get(i));
                        }
                        frame.setThumbnails(thumbs);
                    }
                } catch (IOException_Exception ex) {
                    ex.printStackTrace();
                }
            }
        };
        new Thread(thumbsTask).start();
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>これでクライアント・アプリケーションは完了です。EJBモジュールに委譲してそのイメージを公開するWebサービスと対話するコードを作成しました。クライアントを右クリックし、「実行」を選択します。Swingアプリケーションが起動し、しばらくするとWebサービスから受信されるイメージが表示されます。表示されないイメージがある場合は、FlowerServiceプロジェクトを消去およびビルドしてから、再度実行します。メイン・フレームに表示されるイメージは、ラジオ・ボタンを選択するか、サムネイルをクリックすることによって変更できることに注意してください。</p>
</div>
<div class="paragraph">
<p>]]</p>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Flower%20Swing%20Client%20EE6">このチュートリアルに関するご意見をお寄せください</a></p>
</div>
<div class="paragraph">
<p><a href="../../../community/lists/top.html">nbj2ee@netbeans.orgメーリング・リスト</a>に登録することによって、NetBeans IDE Java EE開発機能に関するご意見やご提案を送信したり、サポートを受けたり、最新の開発情報を入手したりできます。</p>
</div>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/incubator-netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/incubator-netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/websvc/flower_swing_ja.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1>About</h1>
                <ul>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                    <li><a href="https://incubator.apache.org/projects/netbeans.html">Incubation Status</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb110/nb110.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="/plugins/index.html">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2019 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
