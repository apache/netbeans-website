
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>通过 Web 服务传递二进制数据，第 5 部分：创建 Swing 客户端</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="通过 Web 服务传递二进制数据，第 5 部分：创建 Swing 客户端 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, 通过 Web 服务传递二进制数据，第 5 部分：创建 Swing 客户端">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>

  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">通过 Web 服务传递二进制数据，第 5 部分：创建 Swing 客户端</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/websvc/flower_swing_zh_CN.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_创建客户端应用程序">创建客户端应用程序</a></li>
<li><a href="#design-jframe">设计 JFrame 窗体</a></li>
<li><a href="#_绑定_jframe_组件">绑定 JFrame 组件</a>
<ul class="sectlevel2">
<li><a href="#"></a></li>
<li><a href="#_2"></a></li>
</ul>
</li>
<li><a href="#_对_main_类进行编码">[[对 Main 类进行编码]]</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>本练习的目的在于为您以前创建和部署的 Web 服务创建一个客户端，然后给该客户端添加一个 GUI 界面。该界面显示 Web 服务以二进制数据传递的图像。</p>
</div>
<div class="paragraph">
<p><strong>本教程中的课程</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-74-73-72.png" alt="netbeans stamp 74 73 72">
</div>
<div class="title">Figure 1. 此页上的内容适用于 NetBeans IDE 7.2、7.3 和 7.4</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="./flower_overview.html">概述</a></p>
</li>
<li>
<p><a href="./flower_ws.html">创建 Web 服务</a></p>
</li>
<li>
<p><a href="./flower-code-ws.html">对 Web 服务进行编码和测试</a></p>
</li>
<li>
<p><a href="./flower_wsdl_schema.html">修改方案文件和 WSDL 文件以传递二进制数据</a></p>
</li>
<li>
<p>&#8658; 创建 Swing 客户端</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>本课内容</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><a href="#create-client-app">创建客户端应用程序</a></p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><a href="#design-jframe">设计 JFrame</a></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>.
<a href="#bind-jframe">绑定 JFrame 组件</a></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p><a href="#code-main-class">对 Main 类进行编码</a></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_创建客户端应用程序">创建客户端应用程序</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在此部分，将创建一个 Web 应用程序。在此应用程序内，将创建一个客户端，该客户端使用您在以前的教程中创建并修改的 Web 服务。</p>
</div>
<div class="paragraph">
<p><strong>创建客户端应用程序：</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>选择 "File"（文件）&gt; "New Project"（新建项目）（在 Linux/Windows 上为 Ctrl-Shift-N 组合键，在 MacOS 上为 ⌘-Shift-N 组合键）。此时将打开新建项目向导。</p>
</li>
<li>
<p>选择 "Java" 类别中的 "Java Application"（Java 应用程序）选项。单击 "Next"（下一步）。此时将显示新建 Java 应用程序向导。在 "Project Name"（项目名称）中键入  <code>FlowerClient</code> 。选择项目的位置，然后单击 "Finish"（完成）。IDE 创建一个新的 Java 应用程序项目。</p>
</li>
<li>
<p>右键单击  <code>FlowerClient</code>  项目节点，然后从上下文菜单选择 "New"（新建）&gt; "Web Service Client"（Web 服务客户端）。此时将打开新建 Web 服务客户端向导。</p>
</li>
<li>
<p>选择 WSDL URL 单选按钮，并将 WSDL 文件的 URL 粘贴到该字段。（默认情况下，该 URL 为  <code><a href="http://localhost:8080/FlowerAlbumService/FlowerServiceService?wsdl" class="bare">http://localhost:8080/FlowerAlbumService/FlowerServiceService?wsdl</a></code> 。在浏览器中查找 URL，方法是测试 Web 服务，然后将 URL 末尾的  <code>?Tester</code>  替换为  <code>?wsdl</code> 。）接受其他所有默认值，包括空的包名称。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ws-client-wiz.png" alt="ws client wiz">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>单击 "Finish"（完成）。IDE 将下载该 WSDL 文件，添加与 Web 服务交互的客户端桩模块，并在 "Projects"（项目）窗口的 Java 应用程序项目中添加节点。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/client-generated-sources.png" alt="client generated sources">
</div>
<div class="title">Figure 2. 显示新建 Web 服务客户端的项目视图</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="design-jframe">设计 JFrame 窗体</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在此部分，向该 Web 应用程序添加一个  <code>JFrame</code> ，并在其中使用 Swing 组件设计一个 GUI 界面。最后，将该 Swing 组件绑定到该 Web 服务客户端代码。</p>
</div>
<div class="paragraph">
<p>如果不想亲自设计 JFrame 窗体，可以从<a href="https://netbeans.org/projects/www/downloads/download/webservices%252FFlowerFrame.java">此处</a>下载预先设计的 JFrame Java 文件。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>右键单击  <code>FlowerClient</code>  节点，然后选择 "New"（新建）&gt; "JFrame Form"（JFrame 窗体）。将该窗体命名为  <code>FlowerFrame</code> 。并且，将其置于  <code>flowerclient</code>  包中。</p>
</li>
<li>
<p><code>FlowerFrame</code>  在编辑器中打开。如果 "Palette"（组件面板）尚未打开，请将其打开。扩展框架的底边框大约三分之一。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/opened-flowerform.png" alt="opened flowerform">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>将 JPanel 从 "Palette"（组件面板）的 "Swing Container"（Swing 容器）部分拖至  <code>FlowerFrame</code> 。扩展该而板以填充整个  <code>FlowerFrame</code> 。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-panel.png" alt="add panel">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>右键单击 "Design"（设计）视图中的 "Panel"（面板）。从上下文菜单中选择 "Change Variable Name&#8230;&#8203; "（更改变量名称&#8230;&#8203;）。将该面板命名为  <code>gardenFlowersPanel</code> 。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>将 JLabel 从 "Palette"（组件面板）拖至  <code>gardenFlowersPanel</code>  的顶部。右键单击标签，然后将标签的变量名称更改为  <code>titleLabel</code> 。再次右键单击  <code>titleLabel</code>  然后选择 "Edit Text"（编辑文本）。将文本更改为 "Garden Flowers"。可能希望浏览  <code>titleLabel</code>  的属性，并为其设置一个醒目的字体。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>将 "Button Group"（按钮组）拖至设计视图中。接受按钮组的默认变量名称  <code>buttonGroup1</code> 。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>将四个单选按钮拖至  <code>titleLabel</code>  下面的水平行中。在每个按钮的属性中，将其设置为  <code>buttonGroup1</code>  的成员。按钮的其他属性如下：</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">buttonGroup1 中的单选按钮</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">变量名称</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">已选定</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">文本</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">asterRadioButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">紫苑</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">honeysuckleRadioButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">金银花</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">roseRadioButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">玫瑰</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sunflowerRadioButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">向日葵</p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>将 "Scroll Pane"（滚动窗格）拖至单选按钮的下方。扩展该窗格以填充全部水平空间以及大约三分之二的空余垂直空间。将滚动窗格的变量名称更改为  <code>mainScrollPane</code> 。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>将 "Panel"（面板）拖至  <code>mainScrollPane</code>  中。将面板的变量名称更改为  <code>mainPanel</code> 。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>在 "Design"（设计）视图中，右键单击  <code>mainPanel</code>  然后选择 "Set Layout"（设置布局）&gt; "Border Layout"（边框式布局）。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="11">
<li>
<p>将 "Button"（按钮）拖至  <code>mainPanel</code>  中。因为  <code>mainPanel</code>  具有边框式布局，所以按钮将自动填充整个面板。将按钮的变量名称更改为  <code>mainPictureButton</code>  并将按钮的文本更改为 "Waiting for picture&#8230;&#8203;"</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="12">
<li>
<p>再将一个滚动窗格拖至  <code>mainScrollPane</code>  下面的空间中。扩展新滚动窗格以填满全部剩余空间。将新滚动窗格的变量名称更改为  <code>thumbnailScrollPane</code> 。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="13">
<li>
<p>将 "Panel"（面板）拖至  <code>thumbnailScrollPane</code>  中。将面板的变量名称更改为  <code>thumbnailPanel</code> 。将  <code>thumbnailPanel</code>  的布局设置为 "Grid Layout"（网格式布局）。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="14">
<li>
<p>将四个 "Buttons"（按钮）拖至  <code>thumbnailPanel</code>  中。因为  <code>thumbnailPanel</code>  具有网格式布局，所以按钮将自动变为相同大小并且完全填满面板。按钮的属性如下： thumbnailPanel 中的按钮</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">变量名称</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">文本</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">asterButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">正在等待&#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">honeysuckleButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">正在等待&#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">roseButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">等待</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sunflowerButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">正在等待&#8230;&#8203;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>现在 JFrame 窗体已经完全设计好了。此时， <code>FlowerFrame</code>  将如下所示。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/designed-form.png" alt="designed form" width="Flower"（鲜花）框架"">
</div>
<div class="title">Figure 3. 显示按钮文本而不是图像的已完成 </div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_绑定_jframe_组件">绑定 JFrame 组件</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在此部分，将在构造函数中初始化组件，然后将这些组件绑定到监听程序。监听程序将调用用于显示鲜花图像的代码。</p>
</div>
<div class="sect2">
<h3 id=""><a id="初始化组件"></a></h3>
<div class="paragraph">
<p>[[在此部分，将填充  <code>FlowerFrame</code>  构造函数</p>
</div>
<div class="paragraph">
<p>]]</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>切换到编辑器的 "Source"（源）视图。找到  <code>FlowerFrame</code>  类主体的开头以及  <code>FlowerFrame</code>  构造函数。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ff-empty-constructor.png" alt="ff empty constructor">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在  <code>FlowerFrame</code>  类主体的顶部，并且在构造函数之前，创建一个用于表示每种花名称的字符串数组。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">protected static final String[] FLOWERS = {"aster", "honeysuckle", "rose", "sunflower"};</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在 FLOWERS 字符串数组和构造函数之间，添加一行代码以初始化名为  <code>flowers</code>  的  <code><a href="http://download.oracle.com/javase/6/docs/api/java/util/Map.html">+java.util.Map+</a></code> 。该映射使用一个  <code>String</code>  并将其映射到某个  <code>Image</code> 。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private Map&lt;String, Image&gt; flowers;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>为  <code>java.util.Map</code>  和  <code>java.awt.Image</code>  添加导入语句。</p>
</li>
<li>
<p>向  <code>FlowerFrame</code>  构造函数添加代码，以将特定的  <code>Image</code>  与  <code>flowers</code>  映射特定实例的特定  <code>String</code>  相关联</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public FlowerFrame(Map&lt;String, Image&gt; flowers) {

    this.flowers = flowers;
    for (String flower:FLOWERS) {
        flowers.put(flower,null);
    }

    initComponents();
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>初始化单选按钮的  <code>ItemListener</code>  以及四个花形按钮的  <code>ActionListener</code> ，然后设置默认标题。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public FlowerFrame(Map&lt;String, Image&gt; flowers) {

    this.flowers = flowers;
    for (String flower:FLOWERS) {
        flowers.put(flower,null);
    }

    initComponents();

    setTitle("Garden Flowers [waiting for picture]");

    ItemListener rbListener = new RBListener();
    asterRadioButton.addItemListener(rbListener);
    honeysuckleRadioButton.addItemListener(rbListener);
    roseRadioButton.addItemListener(rbListener);
    sunflowerRadioButton.addItemListener(rbListener);

    ActionListener bListener = new ButtonListener();
    asterButton.addActionListener(bListener);
    honeysuckleButton.addActionListener(bListener);
    roseButton.addActionListener(bListener);
    sunflowerButton.addActionListener(bListener);
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>为  <code><a href="http://download.oracle.com/javase/6/docs/api/java/awt/event/ItemListener.html">+java.awt.event.ItemListener+</a></code>  和  <code><a href="http://download.oracle.com/javase/6/docs/api/java/awt/event/ActionListener.html">+java.awt.event.ActionListener+</a></code>  添加导入语句。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>现在已完成构造函数。代码中出现了编译错误警告，这是因为代码未包含类  <code>RBListener</code>  和  <code>ButtonListener</code> 。这两个类分别是  <code>ItemListener</code>  和  <code>ActionListener</code>  的定制实现。将在下一部分中编写这两个类。</p>
</div>
</div>
<div class="sect2">
<h3 id="_2"><a id="显示鲜花"></a></h3>
<div class="paragraph">
<p>[[在此部分，将为单选按钮和花形按钮编写定制监听程序。还会编写一个方法，该方法用于确定按钮选择的是哪一种花，并通过  <code>flowers</code>  映射获取此花的  <code>Image</code> 。最后，编写一个由  <code>Main</code>  类调用的方法，该方法将获取每个缩略图的  <code>Image</code> 。</p>
</div>
<div class="paragraph">
<p>]]</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在  <code>FlowerFrame</code>  类主体中找到  <code>public static void main(String args[])</code>  方法。删除此方法及其文档。（应用程序将改用  <code>Main</code>  类。）</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>为单选按钮编写定制  <code>ItemListener</code>  以代替  <code>main</code>  方法。当选择某个单选按钮时，该监听程序会显示新的鲜花图像。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private class RBListener implements ItemListener {
    public void itemStateChanged(ItemEvent e) {
        showFlower();
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>为  <code><a href="http://download.oracle.com/javase/6/docs/api/java/awt/event/ItemEvent.html">+java.awt.event.ItemEvent+</a></code>  添加一条导入语句。</p>
</li>
<li>
<p>在定制  <code>ItemListener</code>  的下面，为 4 个鲜花按钮编写定制  <code>ActionListener</code> 。当单击某个按钮时，监听程序会选择相关的单选按钮：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private class ButtonListener implements ActionListener {

    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == asterButton) asterRadioButton.setSelected(true);
        else if (e.getSource() == honeysuckleButton) honeysuckleRadioButton.setSelected(true);
        else if (e.getSource() == roseButton) roseRadioButton.setSelected(true);
        else if (e.getSource() == sunflowerButton) sunflowerRadioButton.setSelected(true);
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>为  <code><a href="http://download.oracle.com/javase/6/docs/api/java/awt/event/ActionEvent.html">+java.awt.event.ActionEvent+</a></code>  添加一条导入语句。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>在定制  <code>ActionListener</code>  的下面，编写  <code>showFlower</code>  方法。该方法用于确定哪一个单选按钮已选中并从  <code>flowers</code>  映射中获取相应鲜花的  <code>Image</code> 。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">void showFlower() {
    Image img = null;
    if (asterRadioButton.isSelected()) {
        img = flowers.get("aster");
        if (img != null) {
            mainPictureButton.setIcon(new ImageIcon(img));
            setTitle("Garden Flowers [Aster]");
        }
    } else if (honeysuckleRadioButton.isSelected()) {
        img = flowers.get("honeysuckle");
        if (img != null) {
            mainPictureButton.setIcon(new ImageIcon(img));
            setTitle("Garden Flowers [Honeysuckle]");
        }

    } else if (roseRadioButton.isSelected()) {
        img = flowers.get("rose");
        if (img != null) {
            mainPictureButton.setIcon(new ImageIcon(img));
            setTitle("Garden Flowers [Rose]");
        }
    } else if (sunflowerRadioButton.isSelected()) {
        img = flowers.get("sunflower");
        if (img != null) {
            mainPictureButton.setIcon(new ImageIcon(img));
            setTitle("Garden Flowers [Sunflower]");
        }
    }
    if (img == null) {
        mainPictureButton.setIcon(null);
        setTitle("Garden Flowers [waiting for picture]");
    } else mainPictureButton.setText("");
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>为  <code><a href="http://download.oracle.com/javase/6/docs/api/javax/swing/ImageIcon.html">+javax.swing.ImageIcon+</a></code>  添加一条导入语句。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>编写  <code>setThumbnails</code>  方法。此方法从  <code>flowers</code>  映射为每个缩略图获取图像。 <code>Main</code>  类将调用此方法。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">void setThumbnails(Map&lt;String, Image&gt; thumbs) {
    Image img = thumbs.get("aster");
    if (img != null) {
        asterButton.setIcon(new ImageIcon(img));
        asterButton.setText("");
    }
    img = thumbs.get("honeysuckle");
    if (img != null) {
        honeysuckleButton.setIcon(new ImageIcon(img));
        honeysuckleButton.setText("");
    }
    img = thumbs.get("rose");
    if (img != null) {
        roseButton.setIcon(new ImageIcon(img));
        roseButton.setText("");
    }
    img = thumbs.get("sunflower");
    if (img != null) {
        sunflowerButton.setIcon(new ImageIcon(img));
        sunflowerButton.setText("");
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>在  <code>FlowerFrame</code>  中修复导入（如果在代码中粘贴导入内容时未对其进行修复）。通过在编辑器中单击鼠标右键，然后从上下文菜单中选择 "Fix Imports"（修复导入），可以一次性修复所有导入内容。下面是完整的导入语句集：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import java.awt.Image;import java.awt.event.ActionEvent;import java.awt.event.ActionListener;import java.awt.event.ItemEvent;import java.awt.event.ItemListener;import java.util.Map;import javax.swing.ImageIcon;</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>``FlowerFrame``  现在已完成。</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_对_main_类进行编码">[[对 Main 类进行编码]]</h2>
<div class="sectionbody">
<div class="paragraph">
<p>[[在此部分，将完成  <code>Main</code>  类，以使其显示  <code>FlowerFrame</code> ，连接到 Web 服务，并调用 Web 服务操作。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在编辑器中打开  <code>Main.java</code>  类。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/main-empty.png" alt="main empty">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>在类主体中的  <code>main</code>  方法之前，为已下载的图片数初始化一个  <code>int</code>  变量。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java"> private static int downloadedPictures;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>在  <code>main</code>  方法主体中，创建四种花的  <code>HashMap</code>  以及四张缩略图的另一个  <code>HashMap</code> 。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">final Map&lt;String,Image&gt; flowers = new HashMap&lt;String,Image&gt;(4);
final Map&lt;String,Image&gt; thumbs = new HashMap&lt;String,Image&gt;(4);</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>为  <code>java.awt.Image</code> 、 <code>java.util.Map</code>  和  <code>java.util.HashMap</code>  添加导入语句。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>在  <code>main</code>  方法主体中，添加代码以显示  <code>FlowerFrame</code> 。<strong>// Show the FlowerFrame.</strong></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">final FlowerFrame frame = new FlowerFrame(flowers);
frame.setVisible(true);</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>在  <code>main</code>  方法主体中，添加代码以将客户端连接到服务。<strong>// The client connects to the service with this code.</strong></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">FlowerServiceService service = new FlowerServiceService();
final FlowerService port = service.getFlowerServicePort();</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>为  <code>org.flower.service.FlowerService</code>  和  <code>org.flower.service.FlowerServiceService</code>  添加导入语句。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>在  <code>main</code>  方法主体中，添加代码，创建一个具有四个  <code>Runnable</code>  线程的数组，并在每个线程中调用一次 Web 服务的  <code>getFlower</code>  操作。*// The web service getFlower operation</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Runnable[] tasks = new Runnable[4];

for (int i=0; i&lt;4;i++) {
    final int index = i;
    tasks[i] = new Runnable() {
        public void run() {
            try {

                *// Call the getFlower operation
                // on the web service:*
                Image img = port.getFlower(FlowerFrame.FLOWERS[index]);
                System.out.println("picture downloaded: "+FlowerFrame.FLOWERS[index]);

                *// Add strings to the hashmap:*
                flowers.put(FlowerFrame.FLOWERS[index],img);

                *// Call the showFlower operation
                // on the FlowerFrame:*
                frame.showFlower();

            } catch (IOException_Exception ex) {
                ex.printStackTrace();
            }
            downloadedPictures++;
        }
    };
    new Thread(tasks[i]).start();
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>为  <code>org.flower.service.IOException_Exception</code>  添加一条导入语句。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>在  <code>main</code>  方法主体中，添加代码以在单独的线程中调用 Web 服务的  <code>getThumbnails</code>  操作。*// The web service getThumbnails operation is called</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Runnable thumbsTask = new Runnable() {
    public void run() {
        try {
            while (downloadedPictures &lt; 4) {
                try {Thread.sleep(100);} catch (InterruptedException ex) {}
            }

            *// Call the getThumbnails operation
            // on the web service:*
            List&lt;Image&gt; images = port.getThumbnails();
            System.out.println("thumbs downloaded");

            if (images != null &amp;amp;&amp;amp; images.size() == 4) {
                for (int i=0;i&lt;4;i++) {
                    thumbs.put(FlowerFrame.FLOWERS[i],images.get(i));
                }
                frame.setThumbnails(thumbs);
            }
        } catch (IOException_Exception ex) {
            ex.printStackTrace();
        }
    }
};
new Thread(thumbsTask).start();</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="11">
<li>
<p>在  <code>Main.java</code>  中修复导入（如果在代码中粘贴导入内容时未对其进行修复）。通过在编辑器中单击鼠标右键，然后从上下文菜单中选择 "Fix Imports"（修复导入），可以一次性修复所有导入内容。您可以选择要导入的 List 类；请选择  <code>java.util.List</code> 。下面是完整的导入语句集：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import flower.album.FlowerService;import flower.album.FlowerService_Service;import flower.album.IOException_Exception;import java.awt.Image;import java.util.HashMap;import java.util.List;import java.util.Map;</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>``Main``  类现在已完成。</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class Main {

     private static int downloadedPictures;

     public static void main(String[] args) {

        final Map&lt;String,Image&gt; flowers = new HashMap&lt;String,Image&gt;(4);
        final Map&lt;String,Image&gt; thumbs = new HashMap&lt;String,Image&gt;(4);

        *// Show the FlowerFrame.*
        final FlowerFrame frame = new FlowerFrame(flowers);
        frame.setVisible(true);
        *        // The client connects to the service with this code.*
        FlowerService_Service service = new FlowerService_Service();
        final FlowerService port = service.getFlowerServicePort();

        Runnable[] tasks = new Runnable[4];

        *// The web service getFlower operation
        // is called 4 times, each in a separate thread.
        // When the operation finishes the picture is shown in
        // a specific button.*
        for (int i=0; i&lt;4;i++) {
            final int index = i;
            tasks[i] = new Runnable() {
                public void run() {
                    try {

                        *// Call the getFlower operation
                        // on the web service:*
                        Image img = port.getFlower(FlowerFrame.FLOWERS[index]);
                        System.out.println("picture downloaded: "+FlowerFrame.FLOWERS[index]);

                        *// Add strings to the hashmap:*
                        flowers.put(FlowerFrame.FLOWERS[index],img);

                        *// Call the showFlower operation
                        // on the FlowerFrame:*
                        frame.showFlower();

                    } catch (IOException_Exception ex) {
                        ex.printStackTrace();
                    }
                    downloadedPictures++;
                }
            };
            new Thread(tasks[i]).start();
        }
        *// The web service getThumbnails operation is called
        // in a separate thread, just after the previous four threads finish.
        // When the images are downloaded, the thumbnails are shown at
        // the bottom of the frame.*
        Runnable thumbsTask = new Runnable() {
            public void run() {
                try {
                    while (downloadedPictures &lt; 4) {
                        try {Thread.sleep(100);} catch (InterruptedException ex) {}
                    }

                    *// Call the getThumbnails operation
                    // on the web service:*
                    List&lt;Image&gt; images = port.getThumbnails();
                    System.out.println("thumbs downloaded");

                    if (images != null &amp;amp;&amp;amp; images.size() == 4) {
                        for (int i=0;i&lt;4;i++) {
                            thumbs.put(FlowerFrame.FLOWERS[i],images.get(i));
                        }
                        frame.setThumbnails(thumbs);
                    }
                } catch (IOException_Exception ex) {
                    ex.printStackTrace();
                }
            }
        };
        new Thread(thumbsTask).start();
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>现在该客户端应用程序完整了，具有与 Web 服务交互的代码，该 Web 服务委托给了 EJB 模块，以公开其图像。右键单击客户端，然后选择 "Run"（运行）。将启动 Swing 应用程序，并且之后会填充从 Web 服务接收到的图像。如果图像没有全部出现，请清理并构建 FlowerService 项目，然后再次运行。请注意，可以通过选择单选按钮或者单击缩略图来更改主框架中显示的图像。</p>
</div>
<div class="paragraph">
<p>]]</p>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Flower%20Swing%20Client%20EE6">发送有关此教程的反馈意见</a></p>
</div>
<div class="paragraph">
<p>要发送意见和建议、获得支持以及随时了解 NetBeans IDE Java EE 开发功能的最新开发情况，请<a href="../../../community/lists/top.html">加入 nbj2ee@netbeans.org 邮件列表</a>。</p>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/websvc/flower_swing_zh_CN.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
