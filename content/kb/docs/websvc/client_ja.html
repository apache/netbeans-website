
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>JAX-WS Webサービス・クライアントの開発</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="JAX-WS Webサービス・クライアントの開発 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, JAX-WS Webサービス・クライアントの開発">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">JAX-WS Webサービス・クライアントの開発</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/websvc/client_ja.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_spell_checker_webサービスの使用">Spell Checker Webサービスの使用</a>
<ul class="sectlevel2">
<li><a href="#_クライアントの作成">クライアントの作成</a></li>
<li><a href="#_クライアントの開発">クライアントの開発</a></li>
<li><a href="#_クライアントのデプロイ">クライアントのデプロイ</a></li>
</ul>
</li>
<li><a href="#asynch">非同期Webサービス・クライアント</a>
<ul class="sectlevel2">
<li><a href="#asynch-swing">Swingフォームの作成</a></li>
<li><a href="#asynch-creatingtheclient">非同期クライアントの有効化</a></li>
<li><a href="#asynch-addcode">非同期クライアント・コードの追加</a></li>
</ul>
</li>
<li><a href="#_応用">応用</a></li>
<li><a href="#_関連項目">関連項目</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>このチュートリアルでは、NetBeans IDEが提供するWebサービス機能を使用して、「Spell Checker」というWebサービスを分析してから、このサービスと連動するWebクライアントをビルドします。クライアントはサーブレット・クラスとWebページを使用します。ユーザーはWebページからサーブレットに情報を渡します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-80-74-73.png" alt="netbeans stamp 80 74 73">
</div>
<div class="title">Figure 1. このページの内容は、NetBeans IDE 7.2、7.3、7.4および8.0に適用されます</div>
</div>
<div class="paragraph">
<p><strong>このチュートリアルに従うには、次のソフトウェアとリソースが必要です。</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ソフトウェアまたはリソース</th>
<th class="tableblock halign-left valign-top">必須バージョン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java EEダウンロード・バンドル</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java Development Kit (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">バージョン7またはバージョン8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java EE互換のWebサーバーまたはアプリケーション・サーバー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tomcat Webサーバー7.0
GlassFish Server Open Source Edition
Oracle WebLogic Server</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>*注意: *JDK 6を使用している場合は、JDK 6 Update 7以降が必要です。</p>
</div>
<div class="paragraph">
<p>TomcatおよびGlassFishサーバーは、どちらもNetBeans IDEのWebおよびJava EEの配布とともにインストールできます。または、<a href="https://glassfish.java.net/download.html">GlassFishサーバーのダウンロード・ページ</a>か<a href="http://tomcat.apache.org/download-60.cgi">Apache Tomcatのダウンロード・ページ</a>からダウンロードすることもできます。</p>
</div>
<div class="paragraph">
<p>*重要: *Java EEプロジェクトには、Tomcat 7.x、GlassFish ServerまたはOracle WebLogic Server 12cが必要です。</p>
</div>
<div class="paragraph">
<p>クライアントは次のようなもので、データはすべてWebサービスで取得しています。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jaxwsc-spellchecker-report.png" alt="jaxwsc spellchecker report">
</div>
<div class="title">Figure 2. Spell Checkerのレポート</div>
</div>
<div class="paragraph">
<p>このチュートリアルを終えると、このアプリケーションで行うのが、チェック対象のテキストの入力、Webサービス上での操作の呼出し、および結果のレンダリングのみであることがわかります。Webサービスへの接続とテキストの送信に必要なコードは、IDEがすべて生成します。スペル・チェッカのWebサービスが残りを引き受けます。これはスペル・ミスの単語を識別し、代替の単語を提案します。</p>
</div>
<div class="paragraph">
<p>このチュートリアルで使用するSpell Checker Webサービスは、<a href="http://www.cdyne.com/account/home.aspx">CDYNE社</a>が提供しています。CDYNEは、データ拡張、データ品質、およびデータ分析の各Webサービスと、ビジネス・インテリジェンスを統合する、包括的なスイートを開発、販売およびサポートしています。スペル・チェッカのWebサービスは、CDYNEが提供するWebサービスの1つです。1つまたは複数のWebサービスに基づくアプリケーションの堅牢さは、Webサービスの可用性と信頼性によって決まることに注意してください。ただし、CDYNEの<a href="http://www.cdyne.com/company/faqs.aspx">FAQ</a>では、CDYNEが「100%の可用性を目標」とし、「自然災害、テロ、その他の災害時に、Webサービスのトラフィックはセカンダリ・データ・センターに転送される」とあります。CDYNEのおかげでこのチュートリアルを執筆できました。サービスの開発のサポートに感謝します。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spell_checker_webサービスの使用">Spell Checker Webサービスの使用</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ネットワークを介してWebサービスを使用、つまり「消費」するには、Webサービス・クライアントを作成する必要があります。Webサービス・クライアントの作成のために、NetBeans IDEにはクライアント作成機能が用意されており、これは、Webサービス検索用のコードを生成するWebサービス・クライアント・ウィザードです。また、作成したWebサービス・クライアントを開発する機能もあり、これは「プロジェクト」ウィンドウ上の複数のノードからなる作業領域で行います。これらの機能はNetBeans IDEのインストールのEEバンドルの一部です。これらはそのままの状態で使用でき、プラグインは不要です。</p>
</div>
<div class="sect2">
<h3 id="_クライアントの作成">クライアントの作成</h3>
<div class="paragraph">
<p>この項では、ウィザードを使用して、WebサービスのWSDLファイルからJavaオブジェクトを生成します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「ファイル」&gt;「新規プロジェクト」(WindowsおよびLinuxでは[Ctrl]-[Shift]-[N]、MacOSでは[⌘]-[Shift]-[N])を選択します。「カテゴリ」から「Java Web」を選択します。「プロジェクト」から「Webアプリケーション」を選択します。「次」をクリックします。プロジェクト名を「 <code>SpellCheckService</code> 」とし、ターゲット・サーバーに適切なサーバーを指定していることを確認します。詳細は、入門の項を参照してください。その他のオプションはデフォルトのままにし、「終了」をクリックします。</p>
</li>
<li>
<p>「プロジェクト」ウィンドウで、 <code>SpellCheckService</code> プロジェクト・ノードを右クリックし、「新規」&gt;「その他」を選択して、新規ファイル・ウィザードの「Webサービス」カテゴリで「Webサービス・クライアント」を選択します。「次」をクリックします。</p>
</li>
<li>
<p>「WSDL URL」を選択し、Webサービスに次のURLを指定します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a href="http://wsf.cdyne.com/SpellChecker/check.asmx?wsdl">http://wsf.cdyne.com/SpellChecker/check.asmx?wsdl</a></p>
</div>
<div class="paragraph">
<p>ファイアウォールを使用している場合は、プロキシ・サーバーの指定が必要になることがあり、指定しないと、WSDLファイルをダウンロードできません。プロキシ・サーバーを指定するには、ウィザードの「プロキシを設定」をクリックします。IDEの「オプション」ウィンドウが開き、IDEのプロキシを汎用的に設定できます。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>パッケージ名は空白にしておきます。デフォルトでは、クライアント・クラスのパッケージ名はWSDLから取得されます。今回のケースでは <code>com.cdyne.ws</code> です。「終了」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>「プロジェクト」ウィンドウの「Webサービス参照」ノードは、次のようになります。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ws-refs.png" alt="ws refs">
</div>
<div class="title">Figure 3. Webサービス参照を示す「プロジェクト」ウィンドウ</div>
</div>
<div class="paragraph">
<p>この「プロジェクト」ウィンドウは、「check」というWebサービスにより、アプリケーションでいくつかの「CheckTextBody」および「CheckTextBodyV2」操作が利用可能になっていることを示しています。これらの操作は、文字列をチェックしてスペル・ミスを発見し、クライアントで処理するデータを返します。サービスのV2バージョンでは認証を必要としません。このチュートリアル全体では、 <code>checkSoap.CheckTextBodyV2</code> 操作を使用します。</p>
</div>
<div class="paragraph">
<p>「 <code>生成したソース</code> 」ノード内に、JAX-WSのWebサービス・クライアント・ウィザードで生成されたクライアント・スタブが表示されます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gen-files.png" alt="gen files">
</div>
<div class="title">Figure 4. Buildノードのパッケージ構造を示す「ファイル」ビュー</div>
</div>
<div class="paragraph">
<p>「WEB-INF」ノード、「wsdl」サブノードを展開します。WSDLファイルのローカル・コピーである <code>check.asmx.wsdl</code> があります。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/web-inf.png" alt="web inf">
</div>
</div>
<div class="paragraph">
<p>クライアントの作成に使用したWSDLのURLが、 <code>jax-ws-catalog.xml</code> 内でWSDLのローカル・コピーにマップされています。ローカル・コピーへのマップにはいくつかの利点があります。WSDLのリモート・コピーがなくてもクライアントを実行できます。また、リモートのWSDLファイルを解析する必要がないため、クライアントの処理が高速になります。そして、移植性の実現が簡単です。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jax-ws-catalog.png" alt="jax ws catalog">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_クライアントの開発">クライアントの開発</h3>
<div class="paragraph">
<p>Webサービス・クライアントを実装する方法はいくつもあります。WebサービスのWSDLファイルは、Webサービスに送信できる情報のタイプを制限するとともに、逆に受け取る情報のタイプも制限します。ただし、WSDLファイルは、必要となる情報を送信する_方法_や、ユーザー・インタフェースを構成する_内容_には制限を設けません。次にビルドするクライアント実装は、ユーザーがテキストを入力してチェックできるようにするWebページと、そのテキストをWebサービスに渡した後結果レポートを生成するサーブレットで構成されます。</p>
</div>
<div class="sect3">
<h4 id="_webページのコーディング">Webページのコーディング</h4>
<div class="paragraph">
<p>このWebページは、ユーザーがテキストを入力するテキスト領域と、そのテキストをWebサービスに送信するボタンで構成されます。ターゲット・サーバーとして選択したサーバーのバージョンに応じて、アプリケーションのindexページとして <code>index.html</code> または <code>index.jsp</code> が生成されます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウで、「 <code>SpellCheckService</code> 」プロジェクトの「Webページ」ノードを展開してindexページ( <code>index.html</code> または <code>index.jsp</code> )をダブルクリックすると、そのファイルがソース・エディタで開きます。</p>
</li>
<li>
<p>次のコードをコピーし、indexページの <code>&lt;body&gt;</code> タグに貼り付けます。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;body&gt;
  &lt;form name="Test" method="post" action="SpellCheckServlet"&gt;
     &lt;p&gt;Enter the text you want to check:&lt;/p&gt;
     &lt;p&gt;
     &lt;p&gt;&lt;textarea rows="7" name="TextArea1" cols="40" ID="Textarea1"&gt;&lt;/textarea&gt;&lt;/p&gt;
     &lt;p&gt;
     &lt;input type="submit" value="Spell Check" name="spellcheckbutton"&gt;
  &lt;/form&gt;
&lt;/body&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>前出のコードでは、送信ボタンがクリックされるときに、 <code>textarea</code> の内容が <code>SpellCheckServlet</code> というサーブレットに送信されることが指定されています。</p>
</div>
</div>
<div class="sect3">
<h4 id="_サーブレットの作成およびコーディング">サーブレットの作成およびコーディング</h4>
<div class="paragraph">
<p>この項では、Webサービスと相互作用するサーブレットを作成します。ただし、相互作用を実行するコードはIDEが提供します。結果として、開発者が処理する必要があるのはビジネス・ロジックのみ、つまり、送信するテキストの準備と結果の処理のみです。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウで「 <code>SpellCheckService</code> 」プロジェクト・ノードを右クリックし、「新規」&gt;「その他」を選択し、次に、「Web」&gt;「サーブレット」を選択します。「次」をクリックして新規サーブレット・ウィザードを開きます。</p>
</li>
<li>
<p>サーブレットの名前を <code>SpellCheckServlet</code> とし、「パッケージ」のドロップダウンに「 <code>clientservlet</code> 」と入力します。「次」をクリックします。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/name-servlet.png" alt="name servlet">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「サーブレット・デプロイメントを構成」パネルで、このサーブレットのURLマッピングが <code>/SpellCheckServlet</code> であることを確認します。デフォルトを受け入れ、「終了」をクリックします。ソース・エディタでサーブレットが開きます。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jaxwsc-servlet.png" alt="jaxwsc servlet">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>ソース・エディタ内の <code>SpellCheckServlet.java</code> の <code>processRequest</code> メソッドの本体内にカーソルを置き、メソッドの直前に新しい行をいくつか加えます。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>前のステップで作成したスペースで右クリックし、「コードを挿入」&gt;「Webサービス操作をコール」を選択します。次に示すように、「呼び出す操作を選択」ダイアログ・ボックスで「 <code>checkSoap.CheckTextBodyV2</code> 」操作をクリックします。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/insert-ws-ops.png" alt="insert ws ops">
</div>
<div class="title">Figure 5. Webサービス参照を示す「プロジェクト」ウィンドウ</div>
</div>
<div class="paragraph">
<p>「OK」をクリックします。</p>
</div>
<div class="paragraph">
<p><strong>注意:</strong> このダイアログをコールするかわりに、操作のノードを「プロジェクト」ウィンドウからエディタに直接ドラッグ・アンド・ドロップすることもできます。</p>
</div>
<div class="literalblock">
<div class="content">
<pre>``SpellCheckServlet`` クラスの末尾に、SpellCheckerV2サービスをコールし、 ``com.cdyne.ws.DocumentSummary`` オブジェクトを返すプライベート・メソッドが表示されます。</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private DocumentSummary checkTextBodyV2(java.lang.String bodyText) {com.cdyne.ws.CheckSoap port = service.getCheckSoap();return port.checkTextBodyV2(bodyText);}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Webサービスの操作を呼び出すのに必要なのはこのメソッドのみです。また、クラスの先頭で次のコード行(太字部分)が宣言されます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class SpellCheckServlet extends HttpServlet {
    *@WebServiceRef(wsdlLocation = "http://wsf.cdyne.com/SpellChecker/check.asmx?WSDL")
    private Check service;*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p><code>processRequest()</code> メソッドの <code>try</code> ブロックを次のコードに置き換えます。コード内のコメントは、各行の目的を説明しています。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">try (PrintWriter out = response.getWriter()) {
*    //Get the TextArea from the web page*String TextArea1 = request.getParameter("TextArea1");*//Initialize WS operation arguments*
    java.lang.String bodyText = TextArea1;

    *//Process result*
    com.cdyne.ws.DocumentSummary doc = checkTextBodyV2(bodyText);
    String allcontent = doc.getBody();

    *//From the retrieved document summary,
    //identify the number of wrongly spelled words:*
    int no_of_mistakes = doc.getMisspelledWordCount();

    *//From the retrieved document summary,
    //identify the array of wrongly spelled words:*
    List allwrongwords = doc.getMisspelledWord();

    out.println("&lt;html&gt;");
    out.println("&lt;head&gt;");

    *//Display the report's name as a title in the browser's titlebar:*
    out.println("&lt;title&gt;Spell Checker Report&lt;/title&gt;");
    out.println("&lt;/head&gt;");
    out.println("&lt;body&gt;");

    *//Display the report's name as a header within the body of the report:*
    out.println("&lt;h2&gt;&lt;font color='red'&gt;Spell Checker Report&lt;/font&gt;&lt;/h2&gt;");

    *//Display all the content (correct as well as incorrectly spelled) between quotation marks:*
    out.println("&lt;hr&gt;&lt;b&gt;Your text:&lt;/b&gt; \"" + allcontent + "\"" + "&lt;p&gt;");

    *//For every array of wrong words (one array per wrong word),
    //identify the wrong word, the number of suggestions, and
    //the array of suggestions. Then display the wrong word and the number of suggestions and
    //then, for the array of suggestions belonging to the current wrong word, display each
    //suggestion:*
    for (int i = 0; i &lt; allwrongwords.size(); i++) {
        String onewrongword = ((Words) allwrongwords.get(i)).getWord();
        int onewordsuggestioncount = ((Words) allwrongwords.get(i)).getSuggestionCount();
        List allsuggestions = ((Words) allwrongwords.get(i)).getSuggestions();
        out.println("&lt;hr&gt;&lt;p&gt;&lt;b&gt;Wrong word:&lt;/b&gt;&lt;font color='red'&gt; " + onewrongword + "&lt;/font&gt;");
        out.println("&lt;p&gt;&lt;b&gt;" + onewordsuggestioncount + " suggestions:&lt;/b&gt;&lt;br&gt;");
        for (int k = 0; k &lt; allsuggestions.size(); k++) {
            String onesuggestion = (String) allsuggestions.get(k);
            out.println(onesuggestion);
        }
    }

    *//Display a line after each array of wrong words:*
    out.println("&lt;hr&gt;");

    *//Summarize by providing the number of errors and display them:*
    out.println("&lt;font color='red'&gt;&lt;b&gt;Summary:&lt;/b&gt; " + no_of_mistakes + " mistakes (");
    for (int i = 0; i &lt; allwrongwords.size(); i++) {
        String onewrongword = ((Words) allwrongwords.get(i)).getWord();
        out.println(onewrongword);
    }

    out.println(").");
    out.println("&lt;/font&gt;");
    out.println("&lt;/body&gt;");
    out.println("&lt;/html&gt;");

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>見つからないクラスを通知するエラー・バーや警告アイコンが表示されます。コードの貼付け後にインポートを修正するには、[Ctrl]-[Shift]-[I] (Macの場合は[⌘]-[Shift]-[I])を押すか、任意の場所を右クリックしてコンテキスト・メニューを開き、「インポートを修正」を選択します。(インポートするListクラスを選択できます。デフォルトのjava.util.Listを受け入れます。)インポートされるクラスの一覧は、次のとおりです。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import com.cdyne.ws.Check;
import com.cdyne.ws.Words;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.List;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.xml.ws.WebServiceRef;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>注意: * <code>com.cdyne.</strong></code> クラスが見つからないという警告が表示されても、気にしないでください。この問題は、プロジェクトをビルドし、WSDLファイルが解析されてクラスが検出されると解決されます。</p>
</div>
<div class="paragraph">
<p>このコードでは、エラー処理が行われていないことに注意してください。詳細は、<a href="#applyingwhatyouhavelearned">応用</a>を参照してください。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_クライアントのデプロイ">クライアントのデプロイ</h3>
<div class="paragraph">
<p>IDEは、Antビルド・スクリプトを使用して、アプリケーションをビルドおよび実行します。IDEは、プロジェクト作成時にユーザーが入力したオプションに基づいて、ビルド・スクリプトを生成します。このオプションは、プロジェクトの「プロジェクト・プロパティ」ダイアログ・ボックス(「プロジェクト」ウィンドウでプロジェクト・ノードを右クリックし、「プロパティ」を選択)で微調整できます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>プロジェクトのノードを右クリックし、「実行」を選択します。しばらくすると、アプリケーションがデプロイされ、前の項でコード入力したWebページが表示されます。</p>
</li>
<li>
<p>テキストを入力します。誤ったスペルの単語が含まれるようにします。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jaxwsc-spellchecker-form.png" alt="jaxwsc spellchecker form">
</div>
<div class="title">Figure 6. チェックするテキストが入力されたJSPページ</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「Spell Check」をクリックして結果を確認します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jaxwsc-spellchecker-report.png" alt="jaxwsc spellchecker report">
</div>
<div class="title">Figure 7. 誤りを表示するSpell Checkerのレポート</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="asynch">非同期Webサービス・クライアント</h2>
<div class="sectionbody">
<div class="paragraph">
<p>デフォルトでは、NetBeans IDEで作成されたJAX-WSクライアントは同期クライアントです。同期クライアントは、サービスでリクエストを呼び出し、そのレスポンスを待つ間は処理を一時停止します。ただし、レスポンスを待たずに、クライアントで他の処理を続ける場合もあります。たとえば、サービスがリクエストを処理するのに膨大な時間がかかるような場合です。サービスからのレスポンスを待たずに処理を続行するWebサービス・クライアントは、「非同期」と呼ばれます。</p>
</div>
<div class="paragraph">
<p>非同期クライアントは、サービスに対してリクエストを開始すると、そのレスポンスを待たずに処理を再開します。サービスはクライアント・リクエストを処理し、レスポンスを返します。その時点で、クライアントがレスポンスを取得して処理を続行します。</p>
</div>
<div class="paragraph">
<p>非同期クライアントは、「ポーリング」方式または「コールバック」方式でWebサービスを消費します。「ポーリング」方式では、Webサービス・メソッドを呼び出して、結果を繰返し要求します。ポーリングは、コール側スレッドをブロックするため、ブロッキング操作であることから、GUIアプリケーションでは使用しません。「コールバック」方式では、Webサービス・メソッドの呼出し中にコールバック・ハンドラを渡します。結果が入手可能になると、ハンドラの <code>handleResponse()</code> メソッドがコールされます。この方式ではレスポンスを待つ必要がないため、GUIアプリケーションに適しています。たとえば、GUIイベント・ハンドラからコールを行うとすぐに制御が戻り、ユーザー・インタフェースがレスポンス可能な状態に保持されます。ポーリング方式には、レスポンスがキャッチされた後で消費されても、キャッチされたことを確認するためにポーリングする必要があるという欠点があります。</p>
</div>
<div class="paragraph">
<p>NetBeans IDEでは、Webサービス参照の「Webサービス属性を編集」GUIでボックスをクリックすることで、非同期クライアントに対するサポートをWebサービス・クライアント・アプリケーションに追加します。その他のクライアント開発は同期クライアントの場合と同じですが、Webサービスをポーリングするメソッドまたはコールバック・ハンドラを渡して結果を待機するメソッドがある点が異なります。</p>
</div>
<div class="paragraph">
<p>この項の以降の部分では、Swingグラフィカル・インタフェースを作成し、その中に非同期JAX-WSクライアントを埋め込む方法について説明します。</p>
</div>
<div class="sect2">
<h3 id="asynch-swing">Swingフォームの作成</h3>
<div class="paragraph">
<p>この項では、Swingアプリケーションを設計します。自分でSwing GUIを設計しない場合、<a href="https://netbeans.org/projects/www/downloads/download/webservices%252FAsynchSpellCheckForm.zip">設計済のJFrameをダウンロード</a>して、<a href="#asynch-creatingtheclient">非同期クライアントの作成</a>の項に進んでください。</p>
</div>
<div class="paragraph">
<p>Swingクライアントは、ユーザーが入力したテキストを取得してサービスに送信し、誤りの数と、誤った単語の一覧を返します。また、このクライアントは、誤った単語とその修正候補を、一度に1つずつ表示します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/asynch-swing-client.png" alt="asynch swing client">
</div>
</div>
<div class="paragraph">
<p><strong>Swingクライアントを作成するには:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>新しいJavaアプリケーション・プロジェクトを作成します。「 <code>AsynchSpellCheckClient</code> 」という名前を付けます。このプロジェクトの <code>Main</code> クラスは作成しないでください。</p>
</li>
<li>
<p>「プロジェクト」ビューで、「 <code>AsynchSpellCheckClient</code> 」プロジェクト・ノードを右クリックし、「新規」&gt;「JFrameフォーム&#8230;&#8203;」を選択します。</p>
</li>
<li>
<p>フォームの名前を「 <code>MainForm</code> 」にして、 <code>org.me.forms</code> パッケージに配置します。</p>
</li>
<li>
<p>JFrameの作成後、プロジェクトのプロパティを開きます。「実行」カテゴリで、 <code>MainForm</code> をメイン・クラスとして設定します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/asynch-main-class.png" alt="asynch main class">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>エディタで、 <code>MainForm.java</code> の「デザイン」ビューを開きます。「パレット」から3つのスクロール・ペインを <code>MainForm</code> にドラッグ・アンド・ドロップします。スクロール・ペインを配置してサイズ変更します。ここには、チェック対象の入力テキスト、誤った単語すべて、および誤った単語1つに対する修正候補のためのテキスト・フィールドが保持されます。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>5つのテキスト・フィールドを <code>MainForm</code> にドラッグ・アンド・ドロップします。その中の3つを3つのスクロール・ペインにドロップします。次のように変更します。</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">テキスト・フィールド</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">変数名</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">スクロール・ペイン内ですか。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">編集可能ですか。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tfYourText</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tfNumberMistakes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">N</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">N</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tfWrongWords</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">N</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tfWrongWord1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">N</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">N</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tfSuggestions1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">N</p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>進捗バーを <code>MainForm</code> にドラッグ・アンド・ドロップします。変数に <code>pbProgress</code> という名前を付けます。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>2つのボタンを <code>MainForm</code> にドラッグ・アンド・ドロップします。最初のボタンに <code>btCheck</code> という名前を付け、そのテキストを「Check Text」または「Check Spelling」に変更します。2番目のボタンに <code>btNextWrongWord</code> という名前を付け、そのテキストを「Next Wrong Word」に変更し、無効にします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>いくつかのラベルを <code>MainForm</code> にドラッグ・アンド・ドロップし、アプリケーションにタイトルを付けたり、テキスト・フィールドを説明したりします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>JFrameの外観を好みにあわせて調整し、保存します。次に、Webサービス・クライアントの機能を追加します。</p>
</div>
</div>
<div class="sect2">
<h3 id="asynch-creatingtheclient">非同期クライアントの有効化</h3>
<div class="paragraph">
<p><a href="#creatingtheclient">クライアントの作成</a>の説明に従ってWebサービス参照を追加します。次に、非同期クライアントを有効にするようにWebサービスの属性を編集します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウで「 <code>AsynchSpellCheckClient</code> 」プロジェクト・ノードを右クリックし、「新規」&gt;「その他」を選択します。新規ファイル・ウィザードで、「Webサービス」&gt;「Webサービス・クライアント」を選択します。Webサービス・クライアント・ウィザードで、次に示すWebサービスへのURLを指定します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a href="http://wsf.cdyne.com/SpellChecker/check.asmx?wsdl">http://wsf.cdyne.com/SpellChecker/check.asmx?wsdl</a>。デフォルトをすべて受け入れ、「終了」をクリックします。これは、<a href="#creatingtheclient">クライアントの作成</a>のステップ2以降で説明されている手順と同じです。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「Webサービス参照」ノードを展開し、「 <code>check</code> 」サービスを右クリックします。コンテキスト・メニューが開きます。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/asynch-edit-ws-attrib.png" alt="asynch edit ws attrib">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>コンテキスト・メニューから「Webサービス属性を編集」を選択します。「Webサービス属性」ダイアログが開きます。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「WSDLカスタマイズ」タブを選択します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>「ポート・タイプ操作」ノードを展開します。<strong>最初の</strong> <code>CheckTextBodyV2</code> ノードを展開し、「非同期クライアントを有効にする」を選択します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/enable-async-client.png" alt="enable async client">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>「OK」をクリックします。ダイアログが終了し、Webサービス属性を変更するとクライアント・ノードがリフレッシュされることを示す警告が表示されます。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/asynch-refresh-node-warning.png" alt="asynch refresh node warning">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>「OK」をクリックします。警告が閉じ、クライアント・ノードがリフレッシュされます。「Webサービス参照」の <code>check</code> ノードを展開すると、 <code>CheckTextBody</code> 操作のポーリングとコールバックのバージョンがあることがわかります。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/asynch-ws-refs.png" alt="asynch ws refs">
</div>
</div>
<div class="paragraph">
<p>これでSpellCheckサービスの非同期Webサービス・クライアントが、アプリケーションで有効になりました。</p>
</div>
</div>
<div class="sect2">
<h3 id="asynch-addcode">非同期クライアント・コードの追加</h3>
<div class="paragraph">
<p>これで、非同期Webサービス操作が可能になったので、非同期操作を <code>MainForm.java</code> に追加します。</p>
</div>
<div class="paragraph">
<p><strong>非同期クライアント・コードを追加するには:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>MainForm</code> で、「ソース」ビューに変更し、次のメソッドを最後の閉じ括弧の直前に追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void callAsyncCallback(String text){

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「プロジェクト」ウィンドウで、 <code>AsynchSpellCheckClient</code> の「Webサービス参照」ノードを展開し、 <code>checkSoap.CheckTextBodyV2 [非同期コールバック]</code> 操作を探します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p><code>CheckTextBodyV2 [非同期コールバック]</code> 操作を空の <code>callAsyncCallback</code> メソッド本体にドラッグします。次の <code>try</code> ブロックが生成されます。この生成されたコードを、同期クライアント用に生成されたコードと比較します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try { // Call Web Service Operation(async. callback)
      com.cdyne.ws.Check service = new com.cdyne.ws.Check();
      com.cdyne.ws.CheckSoap port = service.getCheckSoap();
      // TODO initialize WS operation arguments here
      java.lang.String bodyText = "";
      javax.xml.ws.AsyncHandler&lt;com.cdyne.ws.CheckTextBodyV2Response&gt; asyncHandler =
              new javax.xml.ws.AsyncHandler&lt;com.cdyne.ws.CheckTextBodyV2Response&gt;() {
            public void handleResponse(javax.xml.ws.Response&lt;com.cdyne.ws.CheckTextBodyV2Response&gt; response) {
                  try {
                        // TODO process asynchronous response here
                        System.out.println("Result = "+ response.get());
                  } catch(Exception ex) {
                        // TODO handle exception
                  }
            }
      };
      java.util.concurrent.Future&lt;? extends java.lang.Object&gt; result = port.checkTextBodyV2Async(bodyText, asyncHandler);
      while(!result.isDone()) {
            // do something
            Thread.sleep(100);
      }
      } catch (Exception ex) {
      // TODO handle custom exceptions here
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>このコードでは、Webサービスの呼出しとともに、SpellCheckサービスからのレスポンスが <code>AsynchHandler</code> オブジェクトを介して処理されることがわかります。一方、 <code>Future</code> オブジェクトは、結果が返されたかどうかを確認し、その結果が完了するまでスレッドをスリープします。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「デザイン」ビューに戻ります。「Check Spelling」ボタンをダブルクリックします。ボタンにActionListenerが自動的に追加され、「ソース」ビューに切り替わり、カーソルは空の <code>btCheckActionPerformed</code> メソッドに置かれます。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p><code>btCheckActionPerformed</code> メソッドの本体に次のコードを追加します。このコードは、 <code>tfYourText</code> フィールドに入力されたテキストを取得して、サーバーを待機していることを示すメッセージを進捗バーに表示し、 <code>btCheck</code> ボタンを無効にして、非同期コールバック・メソッドをコールします。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private void btCheckActionPerformed(java.awt.event.ActionEvent evt) {
    *String text = tfYourText.getText();
    pbProgress.setIndeterminate(true);
    pbProgress.setString("waiting for server");
    btCheck.setEnabled(false);
    callAsyncCallback(text);*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p><code>MainForm</code> クラスの先頭で、 <code>nextWord</code> という名前の <code>ActionListener</code> プライベート・フィールドをインスタンス化します。この <code>ActionListener</code> は、誤った単語のリスト内で単語を1つ進み、その単語と修正候補を表示する、「Next Wrong Word」ボタン用です。ここでプライベート・フィールドを作成すると、 <code>ActionListener</code> がすでに定義されている場合に登録解除できます。そうしないと、新しいテキストを確認するたびに、追加リスナーを追加するため、複数のリスナーが <code>actionPerformed()</code> を何度もコールする結果になります。アプリケーションが正しく動作しなくなる可能性があります。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class MainForm extends javax.swing.JFrame {

    private ActionListener nextWord;
    ...</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p><code>callAsyncCallback</code> メソッド全体を次のコードで置き換えます。最も外側の <code>try</code> ブロックは除去されることに注意してください。このブロックが必要ないのは、より具体的な <code>try</code> ブロックがメソッド内に追加されるためです。コードに対するその他の変更は、コード・コメントで説明します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void callAsyncCallback(String text) {


    com.cdyne.ws.Check service = new com.cdyne.ws.Check();
    com.cdyne.ws.CheckSoap port = service.getCheckSoap();
    // initialize WS operation arguments here
    java.lang.String bodyText = text;

    javax.xml.ws.AsyncHandler&lt;com.cdyne.ws.CheckTextBodyV2Response&gt; asyncHandler = new javax.xml.ws.AsyncHandler&lt;com.cdyne.ws.CheckTextBodyV2Response&gt;() {

        public void handleResponse(final javax.xml.ws.Response&lt;com.cdyne.ws.CheckTextBodyV2Response&gt; response) {
            SwingUtilities.invokeLater(new Runnable() {

                public void run() {

                    try {
                        // Create a DocumentSummary object containing the response.
                        // Note that getDocumentSummary() is called from the Response object
                        // unlike the synchronous client, where it is called directly from
                        // com.cdyne.ws.CheckTextBodycom.cdyne.ws.DocumentSummary doc = response.get().getDocumentSummary();
//From the retrieved DocumentSummary,
                        //identify and display the number of wrongly spelled words:
final int no_of_mistakes = doc.getMisspelledWordCount();
                        String number_of_mistakes = Integer.toString(no_of_mistakes);
                        tfNumberMistakes.setText(number_of_mistakes);
// Check to see if there are any mistakes
                        if (no_of_mistakes &gt; 0) {
//From the retrieved document summary,
                            //identify the array of wrongly spelled words, if any:
final List&lt;com.cdyne.ws.Words&gt; allwrongwords = doc.getMisspelledWord();
//Get the first wrong word
                            String firstwrongword = allwrongwords.get(0).getWord();
//Build a string of all wrong words separated by commas, then display this in tfWrongWords
StringBuilder wrongwordsbuilder = new StringBuilder(firstwrongword);

                            for (int i = 1; i &lt; allwrongwords.size(); i++) {
                                String onewrongword = allwrongwords.get(i).getWord();
                                wrongwordsbuilder.append(", ");
                                wrongwordsbuilder.append(onewrongword);
                            }
                            String wrongwords = wrongwordsbuilder.toString();
                            tfWrongWords.setText(wrongwords);
//Display the first wrong word
                            tfWrongWord1.setText(firstwrongword);
//See how many suggestions there are for the wrong word
                            int onewordsuggestioncount = allwrongwords.get(0).getSuggestionCount();
//Check to see if there are any suggestions.
                            if (onewordsuggestioncount &gt; 0) {
//Make a list of all suggestions for correcting the first wrong word, and build them into a String.
                                //Display the string of concactenated suggestions in the tfSuggestions1 text field
List&lt;String&gt; allsuggestions = ((com.cdyne.ws.Words) allwrongwords.get(0)).getSuggestions();

                                String firstsuggestion = allsuggestions.get(0);
                                StringBuilder suggestionbuilder = new StringBuilder(firstsuggestion);
                                for (int i = 1; i &lt; onewordsuggestioncount; i++) {
                                    String onesuggestion = allsuggestions.get(i);
                                    suggestionbuilder.append(", ");
                                    suggestionbuilder.append(onesuggestion);
                                }
                                String onewordsuggestions = suggestionbuilder.toString();
                                tfSuggestions1.setText(onewordsuggestions);

                            } else {
                                // No suggestions for this mistake
                                tfSuggestions1.setText("No suggestions");
                            }
                            btNextWrongWord.setEnabled(true);
// See if the ActionListener for getting the next wrong word and suggestions
                            // has already been defined. Unregister it if it has, so only one action listener
                            // will be registered at one time.
if (nextWord != null) {
                                btNextWrongWord.removeActionListener(nextWord);
                            }
// Define the ActionListener (already instantiated as a private field)
                            nextWord = new ActionListener() {
//Initialize a variable to track the index of the allwrongwords list

                                int wordnumber = 1;

                                public void actionPerformed(ActionEvent e) {
                                    if (wordnumber &lt; no_of_mistakes) {
// get wrong word in index position wordnumber in allwrongwords
                                        String onewrongword = allwrongwords.get(wordnumber).getWord();
//next part is same as code for first wrong word
tfWrongWord1.setText(onewrongword);
                                        int onewordsuggestioncount = allwrongwords.get(wordnumber).getSuggestionCount();
                                        if (onewordsuggestioncount &gt; 0) {
                                            List&lt;String&gt; allsuggestions = allwrongwords.get(wordnumber).getSuggestions();
                                            String firstsuggestion = allsuggestions.get(0);
                                            StringBuilder suggestionbuilder = new StringBuilder(firstsuggestion);
                                            for (int j = 1; j &lt; onewordsuggestioncount; j++) {
                                                String onesuggestion = allsuggestions.get(j);
                                                suggestionbuilder.append(", ");
                                                suggestionbuilder.append(onesuggestion);
                                            }
                                            String onewordsuggestions = suggestionbuilder.toString();
                                            tfSuggestions1.setText(onewordsuggestions);
                                        } else {
                                            tfSuggestions1.setText("No suggestions");
                                        }
// increase i by 1
                                        wordnumber++;
} else {
                                        // No more wrong words! Disable next word button
                                        // Enable Check button
                                        btNextWrongWord.setEnabled(false);
                                        btCheck.setEnabled(true);
                                    }
                                }
                            };
// Register the ActionListener
                            btNextWrongWord.addActionListener(nextWord);
} else {
                            // The text has no mistakes
                            // Enable Check button
                            tfWrongWords.setText("No wrong words");
                            tfSuggestions1.setText("No suggestions");
                            tfWrongWord1.setText("--");
                            btCheck.setEnabled(true);

                        }
                    } catch (Exception ex) {
                        ex.printStackTrace();
                    }
// Clear the progress bar
                    pbProgress.setIndeterminate(false);
                    pbProgress.setString("");
                }
            });

        }
    };

    java.util.concurrent.Future result = port.checkTextBodyV2Async(bodyText, asyncHandler);
    while (!result.isDone()) {
        try {
//Display a message that the application is waiting for a response from the server
            tfWrongWords.setText("Waiting...");
            Thread.sleep(100);
        } catch (InterruptedException ex) {
            Logger.getLogger(MainForm.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>[Ctrl]-[Shift]-[I] (Macの場合は[⌘]-[Shift]-[I])を押してインポートを修正します。次のインポート文が追加されます。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.SwingUtilities;</code></pre>
</div>
</div>
<div class="paragraph">
<p>これで、アプリケーションをビルドし、実行できます。このサービスは処理が非常に早いため、サーバーからのレスポンスに大幅な遅延が起こったときにどうなるか、残念ながら確認できません。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_応用">応用</h2>
<div class="sectionbody">
<div class="paragraph">
<p>これで、初めてのWebサービス・クライアントをIDEで完成しました。さらにスキルを伸ばし、目的にあうアプリケーションになるよう改良してみましょう。次に着手できそうなタスクを2つ提案します。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>サーブレットにエラー処理のコードを追加する。</p>
</li>
<li>
<p>Webサービスから返されたデータとユーザーが対話できるように、クライアントのコードを書き直す。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20JAX-WS%20Clients%20in%20NetBeans%20IDE">このチュートリアルに関するご意見をお寄せください</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_関連項目">関連項目</h2>
<div class="sectionbody">
<div class="paragraph">
<p>NetBeans IDEを使用したJava EEアプリケーションの開発方法の詳細は、次のリソースを参照してください。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="jax-ws.html">JAX-WS Webサービスについて</a></p>
</li>
<li>
<p><a href="rest.html">RESTful Webサービスについて</a></p>
</li>
<li>
<p><a href="wsit.html">高度なWebサービス相互運用性</a></p>
</li>
<li>
<p><a href="../../trails/web.html">Webサービスの学習</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="../../../community/lists/top.html">nbj2ee@netbeans.orgメーリング・リスト</a>に登録することによって、NetBeans IDE Java EE開発機能に関するご意見やご提案を送信したり、サポートを受けたり、最新の開発情報を入手したりできます。</p>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/websvc/client_ja.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
