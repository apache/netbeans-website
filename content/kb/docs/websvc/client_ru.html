
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Разработка клиентов веб-служб JAX-WS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Разработка клиентов веб-служб JAX-WS - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Разработка клиентов веб-служб JAX-WS">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 12.1</h1>
            <p><a class="button success" href="/download/nb121/index.html">Find out more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">Разработка клиентов веб-служб JAX-WS</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/websvc/client_ru.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_Применение_веб_службы_проверки_орфографии">[[Применение веб-службы проверки орфографии]]</a>
<ul class="sectlevel2">
<li><a href="#_Создание_клиента">Создание клиента</a></li>
<li><a href="#_Разработка_клиента">Разработка клиента</a></li>
<li><a href="#_Развертывание_клиента">Развертывание клиента</a></li>
</ul>
</li>
<li><a href="#asynch">Асинхронные клиенты веб-служб</a>
<ul class="sectlevel2">
<li><a href="#asynch-swing">Создание формы Swing</a></li>
<li><a href="#asynch-creatingtheclient">Включение асинхронных клиентов</a></li>
<li><a href="#asynch-addcode">Добавление кода асинхронного клиента</a></li>
</ul>
</li>
<li><a href="#_Закрепление_материала_на_практике">Закрепление материала на практике</a></li>
<li><a href="#_Дополнительные_сведения">Дополнительные сведения</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>В этом учебном курсе используются функции веб-служб, предоставленные IDE NetBeans, для анализа веб-службы Spell Checker, после чего создается веб-клиент, взаимодействующий со службой. Клиент использует класс сервлетов и веб-страницу. Пользователь передает информацию сервлету с веб-страницы.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-80-74-73.png" alt="netbeans stamp 80 74 73">
</div>
<div class="title">Figure 1. Содержимое этой страницы применимо к IDE NetBeans 7.2, 7.3, 7.4 и 8.0</div>
</div>
<div class="paragraph">
<p><strong>Для работы с этим учебным курсом требуется следующее программное обеспечение и ресурсы.</strong></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Программное обеспечение или материал</th>
<th class="tableblock halign-left valign-top">Требуемая версия</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">IDE NetBeans</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Пакетная загрузка Java EE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Комплект для разработчика на языке Java (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">версия 7 или 8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Веб-сервер или сервер приложений, совместимый с Java EE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Веб-сервер Tomcat 7.0
GlassFish Server Open Source Edition
Сервер Oracle WebLogic</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>*Предостережение. *В случае использования пакета JDK 6 необходим пакет JDK 6 Update 7 или более поздний.</p>
</div>
<div class="paragraph">
<p>Можно установить и сервер Tomcat, и GlassFish, при распространении IDE NetBeans через Интернет и с помощью Java EE. Также можно воспользоваться <a href="https://glassfish.java.net/download.html">страницей загрузок GlassFish Server</a> или <a href="http://tomcat.apache.org/download-60.cgi">страницей загрузок Apache Tomcat</a>.</p>
</div>
<div class="paragraph">
<p>*Важно! *Для работы с проектами Java EE требуются Tomcat 7.x, GlassFish Server или Oracle WebLogic Server 12c.</p>
</div>
<div class="paragraph">
<p>Ниже представлен внешний вид клиента со всеми данными, полученными от веб-службы:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jaxwsc-spellchecker-report.png" alt="jaxwsc spellchecker report">
</div>
<div class="title">Figure 2. Отчет о работе средства проверки орфографии</div>
</div>
<div class="paragraph">
<p>По окончании данного учебного курса вы обнаружите, что ваш единственный вклад в приложение состоит из предоставления текста на проверку, вызова веб-службы и вывода результата. Весь код, необходимый для взаимодействия с веб-службой и для передачи текста, создается в среде IDE автоматически. Веб-служба проверки орфографии позаботится обо всем остальном. Она определяет неправильно написанные слова и предоставляет список предлагаемых альтернатив.</p>
</div>
<div class="paragraph">
<p>Используемая в этом учебном курсе веб-служба проверки орфографии предоставлена <a href="http://www.cdyne.com/account/home.aspx">CDYNE Corporation.</a> Компания CDYNE занимается разработкой, продажей и поддержкой полного набора веб-служб расширения данных, качества данных и анализа данных, а также интеграцию решений по бизнес-информации и аналитике. Веб-служба проверки орфографии является одной из веб-служб, предоставляемых компанией CDYNE. Следует отметить, что стабильность приложений на основе одной или более веб-служб зависит от доступности и надежности веб-служб. Однако в разделе <a href="http://www.cdyne.com/company/faqs.aspx">Часто задаваемые вопросы</a> CDYNE, указывается, что задана "задача достижения доступности со значением 100%" и что в случае "стихийных бедствий, террористических актов и других катастроф трафик веб-служб передается на дополнительный центр управления данными". NetBeans благодарит CDYNE за возможность написания этого учебного курса и за помощь в его разработке.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Применение_веб_службы_проверки_орфографии">[[Применение веб-службы проверки орфографии]]</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Для использования веб-службы в сети (иначе называемого "потреблением веб-службы") необходимо создать клиент веб-службы. Для создания клиентов веб-служб IDE NetBeans обеспечивает функцию создания клиентов, представляющую собой мастер клиента веб-служб, создающий код для поиска веб-службы. Также предоставляются средства для разработки создаваемого клиента веб-службы – рабочая область, состоящая из узлов в окне "Проекты". Эти функции являются частью комлекта EE установки IDE NetBeans. Они доступны сразу после установки, дополнительные модули не требуются.</p>
</div>
<div class="sect2">
<h3 id="_Создание_клиента">Создание клиента</h3>
<div class="paragraph">
<p>Этот раздел посвящен работе с мастером для создания исходных объектов Java из файла WSDL веб-службы.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите 'Файл' &gt; 'Создать проект' (Ctrl-Shift-N в Windows и Linux, ⌘-Shift-N в ОС Mac). В разделе "Категории" выберите "Java Web". В области "Проекты" выберите "Веб-приложение". Нажмите кнопку "Далее". Назовите проект  <code>SpellCheckService</code>  и убедитесь, что в качестве целевого сервера указан соответствующий сервер. (Обратитесь к разделу "Начало работы" для получения дополнительных сведений). Оставьте значения остальных параметров по умолчанию и нажмите кнопку "Готово".</p>
</li>
<li>
<p>В окне 'Проекты' щелкните правой кнопкой мыши узел проекта  <code>SpellCheckService</code>  и выберите Создать &gt; Другие, затем выберите 'Клиент веб-службы' в категории 'Веб-службы' мастера создания файлов. Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Выберите 'URL-адрес WSDL' и укажите следующий URL-адрес веб-службы:</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a href="http://wsf.cdyne.com/SpellChecker/check.asmx?wsdl">http://wsf.cdyne.com/SpellChecker/check.asmx?wsdl</a></p>
</div>
<div class="paragraph">
<p>Если компьютер защищен брандмауэром, то может потребоваться указать прокси-сервер, т.к. в противном случае загрузить файл WSDL будет невозможно. Чтобы указать прокси-сервер, нажмите в мастере кнопку "Настроить прокси". Открывается окно настроек среды IDE, в котором можно указать общий прокси-сервер для среды IDE.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Название пакета указывать не следует. По умолчанию имя пакета класса клиента берется из WSDL. В данном случае это  <code>com.cdyne.ws</code> . Нажмите 'Готово'.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>В окне "Проекты" в узле "Web Service References" должно быть представлено следующее:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ws-refs.png" alt="ws refs">
</div>
<div class="title">Figure 3. Окно проекта, в котором показываются ссылки на веб-службу</div>
</div>
<div class="paragraph">
<p>В окне "Проекты" видно, что веб-служба под названием "check" сделала доступными для вашего приложения несколько операций "CheckTextBody" и "CheckTextBodyV2". В этих операциях строка проверяется на ошибки орфографии, и данные возвращаются для обработки клиентом. Версия службы V2 не требует проверки подлинности. В данном учебном курсе будет использоваться операция  <code>checkSoap.CheckTextBodyV2</code> .</p>
</div>
<div class="paragraph">
<p>В узле  <code>Generated Sources </code>  показаны клиентские заглушки, автоматически созданные мастером создания клиента веб-службы JAX-WS.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gen-files.png" alt="gen files">
</div>
<div class="title">Figure 4. Представление файлов, в котором отображается структура пакета узла 'Сборка'</div>
</div>
<div class="paragraph">
<p>Разверните узел "WEB-INF" и нижележащий узел "wsdl". На экран будет выведена локальная копия файла WSDL с именем  <code>check.asmx.wsdl</code> .</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/web-inf.png" alt="web inf">
</div>
</div>
<div class="paragraph">
<p>URL-адрес файла WSDL, используемого для создания клиента, привязан к локальной копии файла WSDL в файле  <code>jax-ws-catalog.xml</code> . Привязка к локальной копии имеет ряд преимуществ. Удаленная копия файла WSDL не обязательно должна быть доступна для выполнения клиента. Клиент выполняется быстрее, так как отсутствует потребность в анализе удаленного файла WSDL. Кроме того, упрощается переносимость.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jax-ws-catalog.png" alt="jax ws catalog">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_Разработка_клиента">Разработка клиента</h3>
<div class="paragraph">
<p>Существует много способов реализации клиента веб-службы. Файл WSDL веб-службы ограничивает тип данных, отправляемых в веб-службу, а также тип данных, получаемых в ответ. Однако файл WSDL не устанавливает ограничений ни на <em>способ передачи _ требуемой информации, ни на _компоненты</em> пользовательского интерфейса. Эта реализация клиента состоит из веб-страницы, позволяющей пользователю вводить текст для проверки, и сервлета, передающего текст в веб-службу и затем отображающего отчет с результатами.</p>
</div>
<div class="sect3">
<h4 id="_Написание_кода_веб_страницы">Написание кода веб-страницы</h4>
<div class="paragraph">
<p>Создаваемая веб-страница состоит из текстовой области, в которой пользователь может ввести текст, и из кнопки для передачи текста в веб-службу. В зависимости от версии выбранного целевого сервера среда IDE создает либо файл  <code>index.html</code> , либо файл  <code>index.jsp</code>  в качестве страницы индекса для приложения.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В окне 'Проекты' разверните узел 'Веб-страницы' проекта  <code>SpellCheckService</code>  и дважды щелкните страницу индекса ( <code>index.html</code>  или  <code>index.jsp</code> ), чтобы открыть соответствующий файл в редакторе исходного кода.</p>
</li>
<li>
<p>Скопируйте следующий код и вставьте его на страницу индекса поверх тегов  <code>&lt;body&gt;</code> :</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;body&gt;
  &lt;form name="Test" method="post" action="SpellCheckServlet"&gt;
     &lt;p&gt;Enter the text you want to check:&lt;/p&gt;
     &lt;p&gt;
     &lt;p&gt;&lt;textarea rows="7" name="TextArea1" cols="40" ID="Textarea1"&gt;&lt;/textarea&gt;&lt;/p&gt;
     &lt;p&gt;
     &lt;input type="submit" value="Spell Check" name="spellcheckbutton"&gt;
  &lt;/form&gt;
&lt;/body&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Описанный выше код указывает, что при нажатии кнопки передачи запроса содержимое области  <code>textarea</code>  передается методом POST в сервлет  <code>SpellCheckServlet</code> .</p>
</div>
</div>
<div class="sect3">
<h4 id="_Создание_и_написание_кода_для_сервлета">Создание и написание кода для сервлета</h4>
<div class="paragraph">
<p>В этом разделе описано создание сервлета, взаимодействующего с веб-службой. При этом код, выполняющий взаимодействие, предоставляется средой IDE. В результате необходимо работать только с бизнес-логикой, т.е. с подготовкой передаваемого текста и обработкой результата.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел проекта  <code>SpellCheckService</code>  в окне "Проекты", выберите команду "Создать &gt; Прочее", а затем "Веб &gt; Сервлет". Нажмите 'Далее', чтобы открыть мастер создания сервлетов.</p>
</li>
<li>
<p>Назовите сервлет  <code>SpellCheckServlet</code>  и введите  <code>clientservlet</code>  в раскрывающемся списке "Пакет". Нажмите 'Далее'.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/name-servlet.png" alt="name servlet">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Обратите внимание, что сопоставление URL-адреса на панели 'Настройки развертывания сервлета' для данного сервлета имеет значение  <code>/SpellCheckServlet</code> . Примите параметры по умолчанию и нажмите кнопку "Готово". Сервлет открывается в редакторе исходного кода.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jaxwsc-servlet.png" alt="jaxwsc servlet">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Поместите указатель мыши в тело метода  <code>processRequest</code>  в проекте  <code>SpellCheckServlet.java</code>  и добавьте несколько новых строк прямо в верхней части метода.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Щелкните правой кнопкой мыши область, созданную в предыдущем действии, и выберите "Вставить код &gt; Вызвать операцию веб-службы". Выберите операцию  <code>checkSoap.CheckTextBodyV2</code>  в диалоговом окне "Выбор вызываемой операции", как указано ниже:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/insert-ws-ops.png" alt="insert ws ops">
</div>
<div class="title">Figure 5. Окно проекта, в котором показываются ссылки на веб-службу</div>
</div>
<div class="paragraph">
<p>Нажмите кнопку "ОК".</p>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> Также можно перетащить узел операции напрямую из окна 'Проекты' в редактор, а не открывать диалоговое окно, показанное выше.</p>
</div>
<div class="paragraph">
<p>В конце класса  <code>SpellCheckServlet</code>  виден закрытый метод вызова службы SpellCheckerV2 и возвращения объекта  <code>com.cdyne.ws.DocumentSummary</code> .</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private DocumentSummary checkTextBodyV2(java.lang.String bodyText) {com.cdyne.ws.CheckSoap port = service.getCheckSoap();return port.checkTextBodyV2(bodyText);}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Этого метода вполне достаточно для вызова операций веб-службы. Кроме того, в верхней части класса объявлены следующие строки кода (выделены жирным шрифтом):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class SpellCheckServlet extends HttpServlet {
    *@WebServiceRef(wsdlLocation = "http://wsf.cdyne.com/SpellChecker/check.asmx?WSDL")
    private Check service;*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Замените блок  <code>try</code>  в методе  <code>processRequest()</code>  следующим кодом. Встроенные комментарии в коде объясняют назначение каждой строки.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">try (PrintWriter out = response.getWriter()) {
*    //Get the TextArea from the web page*String TextArea1 = request.getParameter("TextArea1");*//Initialize WS operation arguments*
    java.lang.String bodyText = TextArea1;

    *//Process result*
    com.cdyne.ws.DocumentSummary doc = checkTextBodyV2(bodyText);
    String allcontent = doc.getBody();

    *//From the retrieved document summary,
    //identify the number of wrongly spelled words:*
    int no_of_mistakes = doc.getMisspelledWordCount();

    *//From the retrieved document summary,
    //identify the array of wrongly spelled words:*
    List allwrongwords = doc.getMisspelledWord();

    out.println("&lt;html&gt;");
    out.println("&lt;head&gt;");

    *//Display the report's name as a title in the browser's titlebar:*
    out.println("&lt;title&gt;Spell Checker Report&lt;/title&gt;");
    out.println("&lt;/head&gt;");
    out.println("&lt;body&gt;");

    *//Display the report's name as a header within the body of the report:*
    out.println("&lt;h2&gt;&lt;font color='red'&gt;Spell Checker Report&lt;/font&gt;&lt;/h2&gt;");

    *//Display all the content (correct as well as incorrectly spelled) between quotation marks:*
    out.println("&lt;hr&gt;&lt;b&gt;Your text:&lt;/b&gt; \"" + allcontent + "\"" + "&lt;p&gt;");

    *//For every array of wrong words (one array per wrong word),
    //identify the wrong word, the number of suggestions, and
    //the array of suggestions. Then display the wrong word and the number of suggestions and
    //then, for the array of suggestions belonging to the current wrong word, display each
    //suggestion:*
    for (int i = 0; i &lt; allwrongwords.size(); i++) {
        String onewrongword = ((Words) allwrongwords.get(i)).getWord();
        int onewordsuggestioncount = ((Words) allwrongwords.get(i)).getSuggestionCount();
        List allsuggestions = ((Words) allwrongwords.get(i)).getSuggestions();
        out.println("&lt;hr&gt;&lt;p&gt;&lt;b&gt;Wrong word:&lt;/b&gt;&lt;font color='red'&gt; " + onewrongword + "&lt;/font&gt;");
        out.println("&lt;p&gt;&lt;b&gt;" + onewordsuggestioncount + " suggestions:&lt;/b&gt;&lt;br&gt;");
        for (int k = 0; k &lt; allsuggestions.size(); k++) {
            String onesuggestion = (String) allsuggestions.get(k);
            out.println(onesuggestion);
        }
    }

    *//Display a line after each array of wrong words:*
    out.println("&lt;hr&gt;");

    *//Summarize by providing the number of errors and display them:*
    out.println("&lt;font color='red'&gt;&lt;b&gt;Summary:&lt;/b&gt; " + no_of_mistakes + " mistakes (");
    for (int i = 0; i &lt; allwrongwords.size(); i++) {
        String onewrongword = ((Words) allwrongwords.get(i)).getWord();
        out.println(onewrongword);
    }

    out.println(").");
    out.println("&lt;/font&gt;");
    out.println("&lt;/body&gt;");
    out.println("&lt;/html&gt;");

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Появятся панели ошибок и предупреждающие значки, указывающие на классы, которые не найдены. Чтобы исправить выражения импорта после вставки кода нажмите Ctrl-Shift-I (⌘-Shift-I в Mac) или щелкните правой кнопкой мыши в любом местоположении, после чего откроется контекстное меню и выберите 'Исправить выражения импорта'. Можно выбрать класс из списка классов List для импорта. Примите класс по умолчанию java.util.List. Ниже приведен полный список импортированных классов:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">import com.cdyne.ws.Check;
import com.cdyne.ws.Words;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.List;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.xml.ws.WebServiceRef;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Примечание. *Если отображается предупреждение, что классы  <code>com.cdyne.</strong></code>  не могут быть найдены, не беспокойтесь. Эта проблема решается при сборке проекта, когда среда IDE анализирует файлы WSDL и обнаруживает классы.</p>
</div>
<div class="paragraph">
<p>Следует отметить, что в приведенный выше код не входит обработка ошибок. Дополнительные сведения приведены в документе <a href="#applyingwhatyouhavelearned">Закрепление материала на практике</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_Развертывание_клиента">Развертывание клиента</h3>
<div class="paragraph">
<p>Для сборки и выполнения веб-приложений в среде IDE используется сценарий сборки Ant. Этот сценарий сборки создается средой IDE на основе параметров, указанных при создании проекта. Можно настроить эти параметры в диалоговом окне 'Свойства проекта' (щелкните правой кнопкой мыши узел проекта в окне 'Проекты' и выберите 'Свойства').</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел проекта и выберите "Выполнить". Через некоторое время приложение должно развернуть и отобразить веб-страницу, код которой был написан по инструкциям в предыдущем разделе.</p>
</li>
<li>
<p>Введите произвольный текст, убедившись, что часть текста написана с ошибками:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jaxwsc-spellchecker-form.png" alt="jaxwsc spellchecker form">
</div>
<div class="title">Figure 6. Страница JSP с текстом для проверки</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Нажмите кнопку "Проверка орфографии" и посмотрите результат:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jaxwsc-spellchecker-report.png" alt="jaxwsc spellchecker report">
</div>
<div class="title">Figure 7. Отчет о работе средства проверки орфографии</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="asynch">Асинхронные клиенты веб-служб</h2>
<div class="sectionbody">
<div class="paragraph">
<p>По умолчанию клиенты JAX-WS, создаваемые IDE NetBeans являются синхронизированными. Синхронные клиенты посылают запрос в веб-службу и затем приостанавливают обработку до получения ответа. Однако в некоторых случаях необходимо продолжить выполнение каких-либо других действий, а не ожидать ответа. Например, в некоторых случаях для обработки запроса службой требуется значительное время. Клиенты веб-служб, которые продолжают работу без ожидания ответа службы, называются "асинхронными".</p>
</div>
<div class="paragraph">
<p>Асинхронные клиенты инициируют запрос службы и немедленно продолжают работу, не ожидая получения ответа. Службой обрабатывается запрос клиента, и по истечении некоторого времени отправляется ответ, который затем обрабатывается клиентом.</p>
</div>
<div class="paragraph">
<p>Асинхронные клиенты используют веб-службы как в режиме опроса, так и в режиме обратного вызова. При использовании метода опроса происходит вызов метода веб-службы и многократно запрашивается результат. Опрос занимает поток вызова и тем самым блокирует работу, что делает нежелательным его использование в приложениях с графическим интерфейсом пользователя. В режиме обратного вызова в момент вызова метода веб-службы в веб-службу передается обработчик обратного вызова. После получения результата вызывается метод обработчика  <code>handleResponse()</code> . Данный режим подходит для приложений с графическим интерфейсом пользователя, поскольку при этом нет необходимости ожидать ответа. Например, если вызов осуществляется из обработчика событий графического интерфейса пользователя, то управление немедленно возвращается приложению, что позволяет предотвратить "зависание" интерфейса пользователя. Недостатком метода опроса является тот факт, что даже если ответ используется после получения, необходимо запросить его и узнать, что он получен.</p>
</div>
<div class="paragraph">
<p>В IDE NetBeans добавляется поддержка для асинхронных клиентов к клиентскому приложению веб-служб путем установки флажка в разделе редактирования GUI атрибутов веб-служб для ссылок на веб-службы. Все прочие аспекты разработки клиентов совпадают со случаем синхронных клиентов, за исключением наличия методов опроса веб-служб и методов обратного вызова с ожиданием результата.</p>
</div>
<div class="paragraph">
<p>В остальной части данного раздела детально описывается создание графических интерфейсов Swing и внедрение в них асинхронных клиентов JAX-WS.</p>
</div>
<div class="sect2">
<h3 id="asynch-swing">Создание формы Swing</h3>
<div class="paragraph">
<p>В этом разделе описывается создание приложения Swing. Можно не выполнять разработку пользовательского графического интерфейса Swing самостоятельно, а просто <a href="https://netbeans.org/projects/www/downloads/download/webservices%252FAsynchSpellCheckForm.zip">загрузить предварительно разработанную форму JFrame</a> и перейти к разделу <a href="#asynch-creatingtheclient">Создание асинхронного клиента</a>.</p>
</div>
<div class="paragraph">
<p>В клиент Swing передается набираемый на клавиатуре текст, который затем отправляется в службу, которая в свою очередь возвращает количество ошибок и список всех слов с ошибками. Кроме того, этот клиент также выводит каждое неправильно написанное слово и предлагает варианты его замены (слова с ошибками обрабатываются по одному).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/asynch-swing-client.png" alt="asynch swing client">
</div>
</div>
<div class="paragraph">
<p><strong>Создание клиента Swing:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Создайте новый проект приложения Java. Назовите его  <code>AsynchSpellCheckClient</code>  НЕ создавайте класс  <code>Main</code>  для проекта.</p>
</li>
<li>
<p>В представлении 'Проекты' щелкните правой кнопкой мыши узел проекта  <code>AsynchSpellCheckClient</code>  и выберите 'Создать' &gt; 'Форма JFrame&#8230;&#8203;'</p>
</li>
<li>
<p>Присвойте форме имя  <code>MainForm</code>  и разместите ее в пакете  <code>org.me.forms</code> .</p>
</li>
<li>
<p>После создания формы JFrame откройте свойства проекта. В категории "Выполнить" укажите  <code>MainForm</code>  в качестве главного класса.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/asynch-main-class.png" alt="asynch main class">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Откройте режим проектирования для  <code>MainForm.java</code>  в редакторе. Перетащите с палитры три элемента "панель прокрутки" на  <code>MainForm</code> . Задайте положение и размер панелей прокрутки. В них будут размещены поля с набираемым текстом, который требуется проверить, слова с ошибками и предложения по замене очередного неправильно написанного слова.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Перетащите пять текстовых полей на форму  <code>MainForm</code> . Три их них разместите на панелях прокрутки. Измените их следующим образом:</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Текстовые поля</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Имя переменной</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">На панели прокрутки?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Доступно для редактирования?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tfYourText</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Да</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Да</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tfNumberMistakes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Нет</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Нет</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tfWrongWords</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Да</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Нет</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tfWrongWord1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Нет</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Нет</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tfSuggestions1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Да</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Нет</p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Перетащите индикатор выполнения на  <code>MainForm</code> . Назовите переменную  <code>pbProgress</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Перетащите две Кнопки на  <code>MainForm</code> . Назовите первую кнопку  <code>btCheck</code>  и замените ее текст на "Проверить текст" или "Проверить правописание". Назовите вторую кнопку  <code>btNextWrongWord</code> , измените ее текст на "Следующее слово с ошибкой" и сделайте ее неактивной.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Перетащите несколько Ярлыков на  <code>MainForm</code> , чтобы озаглавить ваше приложение и описать текстовые поля.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Настройте внешний вид JFrame в соответствии с предпочтениям и сохраните его. Затем добавьте функциональные возможности клиента веб-службы.</p>
</div>
</div>
<div class="sect2">
<h3 id="asynch-creatingtheclient">Включение асинхронных клиентов</h3>
<div class="paragraph">
<p>Добавьте ссылки на веб-службу, как описано в разделе <a href="#creatingtheclient">Создание клиента</a>. Затем измените атрибуты веб-служб для включения асинхронных клиентов.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В окне 'Проекты', щелкните правой кнопкой мыши узел проекта  <code>AsynchSpellCheckClient</code>  и выберите 'Создать' &gt; 'Другие'. В мастере создания файла выберите "Веб-службы" &gt; "Клиент веб-службы". В мастере "Клиент веб-службы" укажите URL-адрес веб-службы:</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a href="http://wsf.cdyne.com/SpellChecker/check.asmx?wsdl">http://wsf.cdyne.com/SpellChecker/check.asmx?wsdl</a>. Примите параметры по умолчанию и нажмите кнопку "Готово". Используйте ту же процедуру, что и в разделе <a href="#creatingtheclient">Создание клиента</a>, начиная с пункта 2.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Разверните 'Ссылки на веб-службы' и щелкните правой кнопкой мыши службу  <code>check</code> . Откроется контекстное меню.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/asynch-edit-ws-attrib.png" alt="asynch edit ws attrib">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>В контекстном меню выберите "Правка атрибутов веб-службы". Откроется диалоговое окно "Атрибуты веб-службы".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Перейдите на вкладку "Настройка WSDL".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Разверните узел "Операции типа порта". Разверните узел <strong>first</strong>  <code>CheckTextBodyV2</code>  и выберите пункт "Включить асинхронный клиент".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/enable-async-client.png" alt="enable async client">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Нажмите кнопку "ОК". Диалоговое окно закроется, и появится предупреждение о том, что изменение атрибутов веб-службы приведет к обновлению узла клиента.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/asynch-refresh-node-warning.png" alt="asynch refresh node warning">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Нажмите кнопку "ОК". Окно предупреждения закроется, и узел клиента будет обновлен. Если развернуть узел  <code>check</code>  в узле "Ссылки на веб-службы", появятся два варианта работы  <code>CheckTextBody</code> : "Опрос" и "Обратный вызов".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/asynch-ws-refs.png" alt="asynch ws refs">
</div>
</div>
<div class="paragraph">
<p>Теперь для приложения включены асинхронные клиенты веб-службы SpellCheck.</p>
</div>
</div>
<div class="sect2">
<h3 id="asynch-addcode">Добавление кода асинхронного клиента</h3>
<div class="paragraph">
<p>Теперь, когда есть асинхронные операции веб-служб, добавьте асинхронную операцию к  <code>MainForm.java</code> .</p>
</div>
<div class="paragraph">
<p><strong>Добавление кода асинхронного клиента</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В  <code>MainForm</code>  перейдите к представлению исходного кода и добавьте следующий метод перед окончательной закрывающей скобкой.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public void callAsyncCallback(String text){

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>В окне 'Проекты' разверните узел 'Ссылки на веб-службы'  <code>AsynchSpellCheckClient</code>  и найдите операцию  <code>checkSoap.CheckTextBodyV2 [Asynch Callback]</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Перетащите операцию  <code>CheckTextBodyV2 [Asynch Callback]</code>  в пустое тело метода  <code>callAsyncCallback</code> . Создается следующий блок  <code>try</code> . Сравните этот сгенерированный код с кодом, который генерируется для синхронных клиентов.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">try { // Call Web Service Operation(async. callback)
      com.cdyne.ws.Check service = new com.cdyne.ws.Check();
      com.cdyne.ws.CheckSoap port = service.getCheckSoap();
      // TODO initialize WS operation arguments here
      java.lang.String bodyText = "";
      javax.xml.ws.AsyncHandler&lt;com.cdyne.ws.CheckTextBodyV2Response&gt; asyncHandler =
              new javax.xml.ws.AsyncHandler&lt;com.cdyne.ws.CheckTextBodyV2Response&gt;() {
            public void handleResponse(javax.xml.ws.Response&lt;com.cdyne.ws.CheckTextBodyV2Response&gt; response) {
                  try {
                        // TODO process asynchronous response here
                        System.out.println("Result = "+ response.get());
                  } catch(Exception ex) {
                        // TODO handle exception
                  }
            }
      };
      java.util.concurrent.Future&lt;? extends java.lang.Object&gt; result = port.checkTextBodyV2Async(bodyText, asyncHandler);
      while(!result.isDone()) {
            // do something
            Thread.sleep(100);
      }
      } catch (Exception ex) {
      // TODO handle custom exceptions here
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>В этом коде, помимо вызова веб-службы, с помощью объекта  <code>AsynchHandler</code>  обрабатывается ответ от службы SpellCheck. В то же время объект  <code>Future</code>  проверяет, был ли возвращен результат, и приостанавливает работу потока до получения результата.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Перейдите обратно к представлению проектирования. Дважды нажмите кнопку "Проверить правописание". При этом к кнопке автоматически добавляется действие ActionListener, и выполняется переход к представлению "Исходный код", причем курсор устанавливается в пустое тело метода  <code>btCheckActionPerformed</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Добавьте следующий код к телу метода  <code>btCheckActionPerformed</code> . Данный код получает текст, набираемый в поле  <code>tfYourText</code> , отображает индикатор выполнения и сообщение "ожидание сервера", отключает кнопку  <code>btCheck</code>  и вызывает асинхронный метод с обратным вызовом.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private void btCheckActionPerformed(java.awt.event.ActionEvent evt) {
    *String text = tfYourText.getText();
    pbProgress.setIndeterminate(true);
    pbProgress.setString("waiting for server");
    btCheck.setEnabled(false);
    callAsyncCallback(text);*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>В начале класса  <code>MainForm</code>  используйте закрытое поле  <code>ActionListener</code>  с именем  <code>nextWord</code> . Данный  <code>ActionListener</code>  предназначено для кнопки "Следующее слово с ошибкой", которая добавляет одно слово в список неправильно написанных слов и отображает возможные варианты его исправления. Создается частное поле, поэтому если действие  <code>ActionListener</code>  уже было определено, можно отменить его регистрацию. В противном случае каждый раз при проверке нового текста потребуется добавлять дополнительный прослушивающий процесс, что в свою очередь приведет к многократному вызову  <code>actionPerformed()</code> . Приложение будет работать некорректно.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class MainForm extends javax.swing.JFrame {

    private ActionListener nextWord;
    ...</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Замените весь метод  <code>callAsyncCallback</code> следующим кодом. Обратите внимание, что крайний снаружи блок  <code>try</code> удален. В нем нет необходимости, поскольку внутри метода добавлены более конкретные блоки  <code>try</code> . Другие изменения в коде объяснены в комментариях к коду.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public void callAsyncCallback(String text) {


    com.cdyne.ws.Check service = new com.cdyne.ws.Check();
    com.cdyne.ws.CheckSoap port = service.getCheckSoap();
    // initialize WS operation arguments here
    java.lang.String bodyText = text;

    javax.xml.ws.AsyncHandler&lt;com.cdyne.ws.CheckTextBodyV2Response&gt; asyncHandler = new javax.xml.ws.AsyncHandler&lt;com.cdyne.ws.CheckTextBodyV2Response&gt;() {

        public void handleResponse(final javax.xml.ws.Response&lt;com.cdyne.ws.CheckTextBodyV2Response&gt; response) {
            SwingUtilities.invokeLater(new Runnable() {

                public void run() {

                    try {
                        // Create a DocumentSummary object containing the response.
                        // Note that getDocumentSummary() is called from the Response object
                        // unlike the synchronous client, where it is called directly from
                        // com.cdyne.ws.CheckTextBodycom.cdyne.ws.DocumentSummary doc = response.get().getDocumentSummary();
//From the retrieved DocumentSummary,
                        //identify and display the number of wrongly spelled words:
final int no_of_mistakes = doc.getMisspelledWordCount();
                        String number_of_mistakes = Integer.toString(no_of_mistakes);
                        tfNumberMistakes.setText(number_of_mistakes);
// Check to see if there are any mistakes
                        if (no_of_mistakes &gt; 0) {
//From the retrieved document summary,
                            //identify the array of wrongly spelled words, if any:
final List&lt;com.cdyne.ws.Words&gt; allwrongwords = doc.getMisspelledWord();
//Get the first wrong word
                            String firstwrongword = allwrongwords.get(0).getWord();
//Build a string of all wrong words separated by commas, then display this in tfWrongWords
StringBuilder wrongwordsbuilder = new StringBuilder(firstwrongword);

                            for (int i = 1; i &lt; allwrongwords.size(); i++) {
                                String onewrongword = allwrongwords.get(i).getWord();
                                wrongwordsbuilder.append(", ");
                                wrongwordsbuilder.append(onewrongword);
                            }
                            String wrongwords = wrongwordsbuilder.toString();
                            tfWrongWords.setText(wrongwords);
//Display the first wrong word
                            tfWrongWord1.setText(firstwrongword);
//See how many suggestions there are for the wrong word
                            int onewordsuggestioncount = allwrongwords.get(0).getSuggestionCount();
//Check to see if there are any suggestions.
                            if (onewordsuggestioncount &gt; 0) {
//Make a list of all suggestions for correcting the first wrong word, and build them into a String.
                                //Display the string of concactenated suggestions in the tfSuggestions1 text field
List&lt;String&gt; allsuggestions = ((com.cdyne.ws.Words) allwrongwords.get(0)).getSuggestions();

                                String firstsuggestion = allsuggestions.get(0);
                                StringBuilder suggestionbuilder = new StringBuilder(firstsuggestion);
                                for (int i = 1; i &lt; onewordsuggestioncount; i++) {
                                    String onesuggestion = allsuggestions.get(i);
                                    suggestionbuilder.append(", ");
                                    suggestionbuilder.append(onesuggestion);
                                }
                                String onewordsuggestions = suggestionbuilder.toString();
                                tfSuggestions1.setText(onewordsuggestions);

                            } else {
                                // No suggestions for this mistake
                                tfSuggestions1.setText("No suggestions");
                            }
                            btNextWrongWord.setEnabled(true);
// See if the ActionListener for getting the next wrong word and suggestions
                            // has already been defined. Unregister it if it has, so only one action listener
                            // will be registered at one time.
if (nextWord != null) {
                                btNextWrongWord.removeActionListener(nextWord);
                            }
// Define the ActionListener (already instantiated as a private field)
                            nextWord = new ActionListener() {
//Initialize a variable to track the index of the allwrongwords list

                                int wordnumber = 1;

                                public void actionPerformed(ActionEvent e) {
                                    if (wordnumber &lt; no_of_mistakes) {
// get wrong word in index position wordnumber in allwrongwords
                                        String onewrongword = allwrongwords.get(wordnumber).getWord();
//next part is same as code for first wrong word
tfWrongWord1.setText(onewrongword);
                                        int onewordsuggestioncount = allwrongwords.get(wordnumber).getSuggestionCount();
                                        if (onewordsuggestioncount &gt; 0) {
                                            List&lt;String&gt; allsuggestions = allwrongwords.get(wordnumber).getSuggestions();
                                            String firstsuggestion = allsuggestions.get(0);
                                            StringBuilder suggestionbuilder = new StringBuilder(firstsuggestion);
                                            for (int j = 1; j &lt; onewordsuggestioncount; j++) {
                                                String onesuggestion = allsuggestions.get(j);
                                                suggestionbuilder.append(", ");
                                                suggestionbuilder.append(onesuggestion);
                                            }
                                            String onewordsuggestions = suggestionbuilder.toString();
                                            tfSuggestions1.setText(onewordsuggestions);
                                        } else {
                                            tfSuggestions1.setText("No suggestions");
                                        }
// increase i by 1
                                        wordnumber++;
} else {
                                        // No more wrong words! Disable next word button
                                        // Enable Check button
                                        btNextWrongWord.setEnabled(false);
                                        btCheck.setEnabled(true);
                                    }
                                }
                            };
// Register the ActionListener
                            btNextWrongWord.addActionListener(nextWord);
} else {
                            // The text has no mistakes
                            // Enable Check button
                            tfWrongWords.setText("No wrong words");
                            tfSuggestions1.setText("No suggestions");
                            tfWrongWord1.setText("--");
                            btCheck.setEnabled(true);

                        }
                    } catch (Exception ex) {
                        ex.printStackTrace();
                    }
// Clear the progress bar
                    pbProgress.setIndeterminate(false);
                    pbProgress.setString("");
                }
            });

        }
    };

    java.util.concurrent.Future result = port.checkTextBodyV2Async(bodyText, asyncHandler);
    while (!result.isDone()) {
        try {
//Display a message that the application is waiting for a response from the server
            tfWrongWords.setText("Waiting...");
            Thread.sleep(100);
        } catch (InterruptedException ex) {
            Logger.getLogger(MainForm.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Нажмите Ctrl-Shift-I (⌘-Shift-I в Mac) и исправьте выражения импорта. Это приведет к добавлению следующих операторов импорта:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.SwingUtilities;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Теперь приложение можно собрать и запустить. По всей вероятности, однако, уследить за событиями в течение ожидания ответа от сервера не удастся, поскольку служба работает достаточно быстро.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Закрепление_материала_на_практике">Закрепление материала на практике</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Теперь, после завершения создания клиента веб-службы в среде IDE, пришло время приобрести дополнительные навыки и сделать из приложения то, ради чего оно задумывалось. Ниже приведены две подходящие для начала задачи.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Добавление в сервлет кода обработки ошибок.</p>
</li>
<li>
<p>Переработка клиента таким образом, чтобы пользователь мог взаимодействовать с возвращенными из веб-службы данными..</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20JAX-WS%20Clients%20in%20NetBeans%20IDE">Отправить отзыв по этому учебному курсу</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Дополнительные_сведения">Дополнительные сведения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Дополнительные сведения об использовании IDE NetBeans для разработки приложений Java EE см. следующие ресурсы:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="jax-ws.html">Начало работы с веб-службами JAX-WS</a></p>
</li>
<li>
<p><a href="rest.html">Начало работы с веб-службами RESTful</a></p>
</li>
<li>
<p><a href="wsit.html">Расширенные возможности взаимодействия веб-служб</a></p>
</li>
<li>
<p><a href="../../trails/web.html">Учебная карта по веб-службам</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Для отправки комментариев и предложений, получения поддержки и новостей о последних разработках, связанных с Java EE IDE NetBeans <a href="../../../community/lists/top.html">присоединяйтесь к списку рассылки nbj2ee@netbeans.org</a>.</p>
</div>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/websvc/client_ru.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1><a href="/about/index.html">About</a></h1>
                <ul>
                    <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb110/nb110.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="/plugins/index.html">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2020 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
