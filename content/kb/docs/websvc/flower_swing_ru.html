
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Передача двоичных данных с помощью приложения веб-службы, часть 5: создание клиента Swing</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Передача двоичных данных с помощью приложения веб-службы, часть 5: создание клиента Swing - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Передача двоичных данных с помощью приложения веб-службы, часть 5: создание клиента Swing">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>

  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="/download/nb19/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Передача двоичных данных с помощью приложения веб-службы, часть 5: создание клиента Swing</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/websvc/flower_swing_ru.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_создание_клиента_приложения">Создание клиента приложения</a></li>
<li><a href="#design-jframe">Разработка формы JFrame</a></li>
<li><a href="#_привязка_компонентов_jframe">Привязка компонентов JFrame</a>
<ul class="sectlevel2">
<li><a href="#_инициализация_компонентов">[[Инициализация компонентов]]</a></li>
<li><a href="#_изображения_с_цветами">[[Изображения с цветами]]</a></li>
</ul>
</li>
<li><a href="#_создание_кода_класса_main">[[Создание кода класса Main]]</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Целью этого упражнения является создание клиента для веб-службы, которая была создана и развернута ранее, с последующим добавлением графического интерфейса пользователя в этот клиент. Интерфейс служит для вывода на экран изображений, переданных веб-службой в качестве двоичных данных.</p>
</div>
<div class="paragraph">
<p>Полную версию клиента можно загрузить из <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FWeb%2520Services%252FWeb%2520Service%2520Passing%2520Binary%2520Data%2520--%2520EE6%252FFlowerClient.zip">каталога примеров NetBeans</a>.</p>
</div>
<div class="paragraph">
<p><strong>Уроки, представленные в этом учебном курсе</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-74-73-72.png" alt="netbeans stamp 74 73 72">
</div>
<div class="title">Figure 1. Содержимое этой страницы применимо к IDE NetBeans 7.2, 7.3 и 7.4</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="./flower_overview.html">Обзор</a></p>
</li>
<li>
<p><a href="./flower_ws.html">Создание веб-службы</a></p>
</li>
<li>
<p><a href="./flower-code-ws.html">Написание кода веб-службы и ее тестирование</a></p>
</li>
<li>
<p><a href="./flower_wsdl_schema.html">Изменение схемы и файлов WSDL для передачи двоичных данных</a></p>
</li>
<li>
<p>&#8658; Создание клиента Swing</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><a href="#create-client-app">Создание приложения клиента</a></p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><a href="#design-jframe">Проектирование JFrame</a></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>.
<a href="#bind-jframe">Привязка компонентов JFrame</a></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p><a href="#code-main-class">Написание кода главного класса</a></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_клиента_приложения">Создание клиента приложения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе рассматривается создание веб-приложения. В рамках приложения выполняется создание клиента, потребляющего веб-службу, которая была создана и изменена в предыдущих учебных курсах.</p>
</div>
<div class="paragraph">
<p><strong>Создание приложения</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите 'Файл' &gt; 'Создать проект' (Ctrl-Shift-N в Windows и Linux, ⌘-Shift-N в ОС Mac). Откроется мастер создания проекта.</p>
</li>
<li>
<p>Выберите "Приложение Java" в категории "Java". Нажмите кнопку "Далее". Появится мастер создания приложения Java. Введите текст  <code>FlowerClient</code>  в поле "Имя проекта". Выберите папку проекта и нажмите кнопку "Готово". В среде IDE будет создан новый проект приложения на Java.</p>
</li>
<li>
<p>Щелкните правой кнопкой мыши узел проекта  <code>FlowerClient</code>  и последовательно выберите в контекстном меню команды "Создать" &gt; "Клиент веб-службы". Появится мастер создания клиента веб-службы.</p>
</li>
<li>
<p>Выберите переключатель "URL-адрес WSDL" и вставьте в соответствующее поле URL-адрес файла WSDL. По умолчанию URL-адресом является  <code><a href="http://localhost:8080/FlowerAlbumService/FlowerServiceService?wsdl" class="bare">http://localhost:8080/FlowerAlbumService/FlowerServiceService?wsdl</a></code> . URL-адрес можно найти в браузере, выполнив тестирование веб-службы и заменив текст  <code>?Tester</code>  на  <code>?wsdl</code>  в конце URL-адреса. Примите все прочие значения по умолчанию, включая пустое имя пакета.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ws-client-wiz.png" alt="ws client wiz">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Нажмите кнопку "Завершить". В среде IDE выполняется загрузка файла WSDL, добавление заглушек клиента для взаимодействия с веб-службой, а также добавление узлов в проект приложения на Java в окне "Проекты".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/client-generated-sources.png" alt="client generated sources">
</div>
<div class="title">Figure 2. Представление проекта, в котором отображается новый клиент веб-службы</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="design-jframe">Разработка формы JFrame</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе рассматривается добавление формы  <code>JFrame</code>  в веб-приложение и проектирование в рамках этого приложения графического интерфейса пользователя с использованием компонентов Swing. В заключение описывается привязка компонентов Swing к коду клиента веб-службы.</p>
</div>
<div class="paragraph">
<p>При отсутствии необходимости самостоятельного проектирования формы JFrame можно загрузить готовый файл JFrame Java <a href="https://netbeans.org/projects/www/downloads/download/webservices%252FFlowerFrame.java">здесь</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел  <code>FlowerClient</code>  и выберите пункт "Создать", а затем – "Форма JFrame". Присвойте фрейму имя  <code>FlowerFrame</code> . Разместите его в пакете  <code>flowerclient</code> .</p>
</li>
<li>
<p>Фрейм  <code>FlowerFrame</code>  будет открыт в редакторе. Откройте палитру (если она еще не открыта). Растяните нижнюю границу фрейма приблизительно на одну треть.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/opened-flowerform.png" alt="opened flowerform">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Перетащите панель JPanel из раздела "Контейнеры Swing" на палитре в фрейм  <code>FlowerFrame</code> . Разверните панель, чтобы она заполнила все пространство фрейма  <code>FlowerFrame</code> .</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-panel.png" alt="add panel">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Щелкните правой кнопкой мыши панель в представлении "Проектирование". Выберите в контекстном меню пункт "Изменить имя переменной&#8230;&#8203;". Присвойте панели имя  <code>gardenFlowersPanel</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Перетащите метку JLabel из палитры в верхнюю область панели  <code> gardenFlowersPanel</code> . Щелкните метку правой кнопкой мыши и измените имя переменной метки на  <code>titleLabel</code> . Снова щелкните правой кнопкой мыши метку  <code>titleLabel</code>  и выберите пункт "Изменить текст". Измените текст на "Garden Flowers". Можно также изучить свойства  <code>titleLabel</code>  и увеличить шрифт.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Перетащите группу кнопок в представление "Проектирование". Примите имя группы кнопок  <code>buttonGroup1</code> , заданное по умолчанию.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Перетащите четыре переключателя в горизонтальный ряд под меткой  <code>titleLabel</code> . В свойствах каждого переключателя укажите, что он является компонентом группы кнопок  <code>buttonGroup1</code> . Для других свойств переключателей действительны следующие свойства:</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Переключатели в группе кнопок buttonGroup1</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Имя переменной</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Выбрано</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Текст</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">asterRadioButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aster</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">honeysuckleRadioButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Honeysuckle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">roseRadioButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rose</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sunflowerRadioButton</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sunflower</p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Перетащите панель с прокруткой в область под переключателями. Разверните панель, чтобы она заполнила всю область по горизонтали и приблизительно две трети свободной области по вертикали. Измените имя переменной панели с прокруткой на  <code>mainScrollPane</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Перетащите панели на панель  <code>mainScrollPane</code> . Измените имя переменной панели на  <code>mainPanel</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>В представление 'Конструирование' щелкните правой кнопкой мыши  <code>mainPanel</code>  и выберите 'Настроить макет' &gt; 'Макет границ'.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="11">
<li>
<p>Перетащите кнопку на панель  <code>mainPanel</code> . Поскольку панель  <code>mainPanel</code>  имеет границы, кнопка автоматически заполняет все пространство панели. Измените имя переменной кнопки на  <code>mainPictureButton</code> , и введите для кнопки текст "Waiting for picture&#8230;&#8203;"</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="12">
<li>
<p>Перетащите еще одну панель с прокруткой в область под панелью  <code>mainScrollPane</code> . Разверните новую панель с прокруткой, чтобы она заполнила все свободное пространство. Измените имя переменной новой панели с прокруткой на  <code>thumbnailScrollPane</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="13">
<li>
<p>Перетащите панель из палитры на панель  <code>thumbnailScrollPane</code> . Измените имя переменной панели на  <code>thumbnailPanel</code> . Установите в качестве формата панели  <code>thumbnailPanel</code>  формат сетки.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="14">
<li>
<p>Перетащите четыре кнопки на панель  <code>thumbnailPanel</code> . Поскольку панель  <code>thumbnailPanel</code>  имеет формат сетки, кнопки автоматически становятся одинакового размера и полностью заполняют панель. Свойства кнопок Кнопки на панели thumbnailPanel</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Имя переменной</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Текст</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">asterButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ожидание&#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">honeysuckleButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ожидание&#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">roseButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ожидание</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sunflowerButton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ожидание</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Форма JFrame готова. На данный момент файл  <code>FlowerFrame</code>  выглядит следующим образом.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/designed-form.png" alt="designed form">
</div>
<div class="title">Figure 3. Завершенный фрейм Flower, в которой отображается текст кнопок вместо изображений</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_привязка_компонентов_jframe">Привязка компонентов JFrame</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе рассматривается инициализация компонентов в конструкторе и привязка компонентов к прослушивателям. Прослушиватели используются для вызова кода, который отвечает за отображение цветов.</p>
</div>
<div class="sect2">
<h3 id="_инициализация_компонентов">[[Инициализация компонентов]]</h3>
<div class="paragraph">
<p>[[В этом разделе описывается заполнение конструктора  <code>FlowerFrame</code></p>
</div>
<div class="paragraph">
<p>]]</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Перейдите в представление "Исходный код" в редакторе. Найдите начало тела класса  <code>FlowerFrame</code>  и конструктор  <code>FlowerFrame</code> .</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ff-empty-constructor.png" alt="ff empty constructor">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В верхней части тела класса фрейма  <code>FlowerFrame</code>  создайте над строкой конструктора массив строк с названиями всех цветов.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">protected static final String[] FLOWERS = {"aster", "honeysuckle", "rose", "sunflower"};</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте между массивом строк FLOWERS и конструктором строку, инициализирующую элемент  <code><a href="http://download.oracle.com/javase/6/docs/api/java/util/Map.html">+java.util.Map+</a></code>  с именем <code>flowers</code> . Карта ссылок принимает объект  <code>String</code>  и устанавливает его соответствие с объектом  <code>Image</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private Map&lt;String, Image&gt; flowers;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте операторы импорта для  <code>java.util.Map</code>  и  <code>java.awt.Image</code> .</p>
</li>
<li>
<p>Добавьте код в конструктор  <code>FlowerFrame</code> , чтобы связать определенный объект  <code>Image</code>  с определенным объектом  <code>String</code>  для определенного экземпляра карты ссылок  <code>flowers</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public FlowerFrame(Map&lt;String, Image&gt; flowers) {

    this.flowers = flowers;
    for (String flower:FLOWERS) {
        flowers.put(flower,null);
    }

    initComponents();
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Инициализируйте прослушиватели  <code>ItemListener</code>  для переключателей, а также прослушиватели  <code>ActionListener</code>  для четырех кнопок цветов и установите заголовок по умолчанию.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public FlowerFrame(Map&lt;String, Image&gt; flowers) {

    this.flowers = flowers;
    for (String flower:FLOWERS) {
        flowers.put(flower,null);
    }

    initComponents();

    setTitle("Garden Flowers [waiting for picture]");

    ItemListener rbListener = new RBListener();
    asterRadioButton.addItemListener(rbListener);
    honeysuckleRadioButton.addItemListener(rbListener);
    roseRadioButton.addItemListener(rbListener);
    sunflowerRadioButton.addItemListener(rbListener);

    ActionListener bListener = new ButtonListener();
    asterButton.addActionListener(bListener);
    honeysuckleButton.addActionListener(bListener);
    roseButton.addActionListener(bListener);
    sunflowerButton.addActionListener(bListener);
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Добавьте операторы импорта для  <code><a href="http://download.oracle.com/javase/6/docs/api/java/awt/event/ItemListener.html">+java.awt.event.ItemListener+</a></code>  и  <code><a href="http://download.oracle.com/javase/6/docs/api/java/awt/event/ActionListener.html">+java.awt.event.ActionListener+</a></code> .</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Конструктор готов. В коде выводятся сообщения об ошибках, поскольку код не содержит классы  <code>RBListener</code>  и  <code>ButtonListener</code> . Эти два класса представляют собой реализации прослушивателей  <code>ItemListener</code>  и  <code>ActionListener</code> , соответственно. Запись этих классов в код рассматривается в следующем разделе.</p>
</div>
</div>
<div class="sect2">
<h3 id="_изображения_с_цветами">[[Изображения с цветами]]</h3>
<div class="paragraph">
<p>[[В этом разделе рассматривается написание пользовательских прослушивателей для переключателей и кнопок цветов. Также рассматривается написание метода, который определяет цветок, выбираемый при нажатии кнопки, и получает объект  <code>Image</code>  цветка на карте ссылок  <code>flowers</code> . В завершение описывается создание метода, который вызывается посредством класса  <code>Main</code>  и получает объект  <code>Image</code>  для каждого эскиза.</p>
</div>
<div class="paragraph">
<p>]]</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Найдите метод  <code>public static void main(String args[])</code>  в теле класса  <code>FlowerFrame</code> . Удалите этот метод и его документацию. (Вместо него в приложении будет использован класс  <code>Main</code> .)</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Напишите вместо метода  <code>main</code>  пользовательский прослушиватель  <code>ItemListener</code>  для переключателей. Этот прослушиватель служит для отображения нового изображения цветка при выборе переключателя.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private class RBListener implements ItemListener {
    public void itemStateChanged(ItemEvent e) {
        showFlower();
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте оператор импорта для  <code><a href="http://download.oracle.com/javase/6/docs/api/java/awt/event/ItemEvent.html">+java.awt.event.ItemEvent+</a></code> .</p>
</li>
<li>
<p>Запишите под пользовательским прослушивателем  <code>ItemListener</code>  пользовательский прослушиватель  <code>ActionListener</code>  для четырех кнопок цветов. При нажатии кнопки прослушиватель выбирает соответствующий переключатель:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private class ButtonListener implements ActionListener {

    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == asterButton) asterRadioButton.setSelected(true);
        else if (e.getSource() == honeysuckleButton) honeysuckleRadioButton.setSelected(true);
        else if (e.getSource() == roseButton) roseRadioButton.setSelected(true);
        else if (e.getSource() == sunflowerButton) sunflowerRadioButton.setSelected(true);
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Добавьте оператор импорта для  <code><a href="http://download.oracle.com/javase/6/docs/api/java/awt/event/ActionEvent.html">+java.awt.event.ActionEvent+</a></code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Напишите под пользовательским прослушивателем  <code>ActionListener</code>  метод  <code>showFlower</code> . Этот метод определяет выбранный переключатель и получает объект  <code>Image</code>  для соответствующего цветка из карты ссылок  <code>flowers</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">void showFlower() {
    Image img = null;
    if (asterRadioButton.isSelected()) {
        img = flowers.get("aster");
        if (img != null) {
            mainPictureButton.setIcon(new ImageIcon(img));
            setTitle("Garden Flowers [Aster]");
        }
    } else if (honeysuckleRadioButton.isSelected()) {
        img = flowers.get("honeysuckle");
        if (img != null) {
            mainPictureButton.setIcon(new ImageIcon(img));
            setTitle("Garden Flowers [Honeysuckle]");
        }

    } else if (roseRadioButton.isSelected()) {
        img = flowers.get("rose");
        if (img != null) {
            mainPictureButton.setIcon(new ImageIcon(img));
            setTitle("Garden Flowers [Rose]");
        }
    } else if (sunflowerRadioButton.isSelected()) {
        img = flowers.get("sunflower");
        if (img != null) {
            mainPictureButton.setIcon(new ImageIcon(img));
            setTitle("Garden Flowers [Sunflower]");
        }
    }
    if (img == null) {
        mainPictureButton.setIcon(null);
        setTitle("Garden Flowers [waiting for picture]");
    } else mainPictureButton.setText("");
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Добавьте оператор импорта для  <code><a href="http://download.oracle.com/javase/6/docs/api/javax/swing/ImageIcon.html">+javax.swing.ImageIcon+</a></code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Напишите метод  <code>setThumbnails</code> . Этот метод получает изображение для каждого эскиза из карты ссылок  <code>flowers</code> . Метод вызывается посредством класса  <code>Main</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">void setThumbnails(Map&lt;String, Image&gt; thumbs) {
    Image img = thumbs.get("aster");
    if (img != null) {
        asterButton.setIcon(new ImageIcon(img));
        asterButton.setText("");
    }
    img = thumbs.get("honeysuckle");
    if (img != null) {
        honeysuckleButton.setIcon(new ImageIcon(img));
        honeysuckleButton.setText("");
    }
    img = thumbs.get("rose");
    if (img != null) {
        roseButton.setIcon(new ImageIcon(img));
        roseButton.setText("");
    }
    img = thumbs.get("sunflower");
    if (img != null) {
        sunflowerButton.setIcon(new ImageIcon(img));
        sunflowerButton.setText("");
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Исправьте операторы импорта  <code>FlowerFrame</code> , если они не были исправлены ранее при вставке в код. Можно исправить все ошибки одновременно, щелкнув правой кнопкой мыши в редакторе и выберите 'Исправить выражения импорта' в контекстном меню. Ниже представлен полный список операторов импорта:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import java.awt.Image;import java.awt.event.ActionEvent;import java.awt.event.ActionListener;import java.awt.event.ItemEvent;import java.awt.event.ItemListener;import java.util.Map;import javax.swing.ImageIcon;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Конструктор  <code>FlowerFrame</code>  готов.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_кода_класса_main">[[Создание кода класса Main]]</h2>
<div class="sectionbody">
<div class="paragraph">
<p>[[В этом разделе описывается завершение кода класса  <code>Main</code>  для отображения  <code>FlowerFrame</code> , подключения к веб-службе и вызова операций веб-службы.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Откройте класс  <code>Main.java</code>  в редакторе.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/main-empty.png" alt="main empty">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>В теле класса инициализируйте переменную  <code>int</code>  перед методом  <code>main</code>  для числа загруженных изображений.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java"> private static int downloadedPictures;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Создайте в теле метода  <code>main</code>  хранилище  <code>HashMap</code>  для четырех изображений цветов и второе хранилище  <code>HashMap</code>  для четырех эскизов.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">final Map&lt;String,Image&gt; flowers = new HashMap&lt;String,Image&gt;(4);
final Map&lt;String,Image&gt; thumbs = new HashMap&lt;String,Image&gt;(4);</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Добавьте операторы импорта  <code>java.awt.Image</code> ,  <code>java.util.Map</code>  и  <code>java.util.HashMap</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Добавьте в тело метода  <code>main</code>  код для отображения  <code>FlowerFrame</code> .<strong>// Show the FlowerFrame.</strong></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">final FlowerFrame frame = new FlowerFrame(flowers);
frame.setVisible(true);</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Добавьте в тело метода  <code>main</code>  код для подключения клиента к веб-службе.<strong>// The client connects to the service with this code.</strong></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">FlowerServiceService service = new FlowerServiceService();
final FlowerService port = service.getFlowerServicePort();</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Добавьте операторы импорта для  <code>org.flower.service.FlowerService</code>  и  <code>org.flower.service.FlowerServiceService</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Добавьте в тело метода  <code>main</code>  код для создания массива четырех потоков  <code>Runnable</code>  и вызова операции  <code>getFlower</code>  веб-службы в каждом потоке.*// The web service getFlower operation</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Runnable[] tasks = new Runnable[4];

for (int i=0; i&lt;4;i++) {
    final int index = i;
    tasks[i] = new Runnable() {
        public void run() {
            try {

                *// Call the getFlower operation
                // on the web service:*
                Image img = port.getFlower(FlowerFrame.FLOWERS[index]);
                System.out.println("picture downloaded: "+FlowerFrame.FLOWERS[index]);

                *// Add strings to the hashmap:*
                flowers.put(FlowerFrame.FLOWERS[index],img);

                *// Call the showFlower operation
                // on the FlowerFrame:*
                frame.showFlower();

            } catch (IOException_Exception ex) {
                ex.printStackTrace();
            }
            downloadedPictures++;
        }
    };
    new Thread(tasks[i]).start();
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Добавьте оператор импорта для  <code>org.flower.service.IOException_Exception</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>Добавьте в тело метода  <code>main</code>  код для вызова операции  <code>getThumbnails</code>  веб-службы в отдельном потоке.*// The web service getThumbnails operation is called</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Runnable thumbsTask = new Runnable() {
    public void run() {
        try {
            while (downloadedPictures &lt; 4) {
                try {Thread.sleep(100);} catch (InterruptedException ex) {}
            }

            *// Call the getThumbnails operation
            // on the web service:*
            List&lt;Image&gt; images = port.getThumbnails();
            System.out.println("thumbs downloaded");

            if (images != null &amp;amp;&amp;amp; images.size() == 4) {
                for (int i=0;i&lt;4;i++) {
                    thumbs.put(FlowerFrame.FLOWERS[i],images.get(i));
                }
                frame.setThumbnails(thumbs);
            }
        } catch (IOException_Exception ex) {
            ex.printStackTrace();
        }
    }
};
new Thread(thumbsTask).start();</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="11">
<li>
<p>Исправьте операторы импорта в  <code>Main.java</code> , если они не были исправлены при вставке в код. Можно исправить все ошибки одновременно, щелкнув правой кнопкой мыши в редакторе и выберите 'Исправить выражения импорта' в контекстном меню. Будет предоставлен список классов List для импорта; выберите  <code>java.util.List</code> . Ниже представлен полный список операторов импорта:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import flower.album.FlowerService;import flower.album.FlowerService_Service;import flower.album.IOException_Exception;import java.awt.Image;import java.util.HashMap;import java.util.List;import java.util.Map;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Класс  <code>Main</code>  готов.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class Main {

     private static int downloadedPictures;

     public static void main(String[] args) {

        final Map&lt;String,Image&gt; flowers = new HashMap&lt;String,Image&gt;(4);
        final Map&lt;String,Image&gt; thumbs = new HashMap&lt;String,Image&gt;(4);

        *// Show the FlowerFrame.*
        final FlowerFrame frame = new FlowerFrame(flowers);
        frame.setVisible(true);
        *        // The client connects to the service with this code.*
        FlowerService_Service service = new FlowerService_Service();
        final FlowerService port = service.getFlowerServicePort();

        Runnable[] tasks = new Runnable[4];

        *// The web service getFlower operation
        // is called 4 times, each in a separate thread.
        // When the operation finishes the picture is shown in
        // a specific button.*
        for (int i=0; i&lt;4;i++) {
            final int index = i;
            tasks[i] = new Runnable() {
                public void run() {
                    try {

                        *// Call the getFlower operation
                        // on the web service:*
                        Image img = port.getFlower(FlowerFrame.FLOWERS[index]);
                        System.out.println("picture downloaded: "+FlowerFrame.FLOWERS[index]);

                        *// Add strings to the hashmap:*
                        flowers.put(FlowerFrame.FLOWERS[index],img);

                        *// Call the showFlower operation
                        // on the FlowerFrame:*
                        frame.showFlower();

                    } catch (IOException_Exception ex) {
                        ex.printStackTrace();
                    }
                    downloadedPictures++;
                }
            };
            new Thread(tasks[i]).start();
        }
        *// The web service getThumbnails operation is called
        // in a separate thread, just after the previous four threads finish.
        // When the images are downloaded, the thumbnails are shown at
        // the bottom of the frame.*
        Runnable thumbsTask = new Runnable() {
            public void run() {
                try {
                    while (downloadedPictures &lt; 4) {
                        try {Thread.sleep(100);} catch (InterruptedException ex) {}
                    }

                    *// Call the getThumbnails operation
                    // on the web service:*
                    List&lt;Image&gt; images = port.getThumbnails();
                    System.out.println("thumbs downloaded");

                    if (images != null &amp;amp;&amp;amp; images.size() == 4) {
                        for (int i=0;i&lt;4;i++) {
                            thumbs.put(FlowerFrame.FLOWERS[i],images.get(i));
                        }
                        frame.setThumbnails(thumbs);
                    }
                } catch (IOException_Exception ex) {
                    ex.printStackTrace();
                }
            }
        };
        new Thread(thumbsTask).start();
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Приложение клиента готово. Код приложения взаимодействует с веб-службой, делегируемой в модуль EJB для вывода соответствующих изображений. Щелкните приложение правой кнопкой и выберите команду "Выполнить". Приложение Swing откроется, и через некоторое время диалоговое окно приложения заполнится изображениями, полученными из веб-службы. Если появляются не все изображения, необходимо очистить и построить проект FlowerService, а затем снова запустить его . Обратите внимание, что изображение в основном фрейме можно заменить, выбрав переключатель или нажав на эскиз.</p>
</div>
<div class="paragraph">
<p>]]</p>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Flower%20Swing%20Client%20EE6">Отправить отзыв по этому учебному курсу</a></p>
</div>
<div class="paragraph">
<p>Для отправки комментариев и предложений, получения поддержки и новостей о последних разработках, связанных с Java EE IDE NetBeans <a href="../../../community/lists/top.html">присоединяйтесь к списку рассылки nbj2ee@netbeans.org</a>.</p>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/websvc/flower_swing_ru.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
