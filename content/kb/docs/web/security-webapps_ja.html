
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans IDEでのWebアプリケーションのセキュリティ保護</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans IDEでのWebアプリケーションのセキュリティ保護 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, NetBeans IDEでのWebアプリケーションのセキュリティ保護">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>

  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="/download/nb19/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">NetBeans IDEでのWebアプリケーションのセキュリティ保護</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/security-webapps_ja.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_作業環境のインストールと構成">作業環境のインストールと構成</a></li>
<li><a href="#_webアプリケーションの作成">Webアプリケーションの作成</a>
<ul class="sectlevel2">
<li><a href="#_セキュリティ保護されたディレクトリの作成">セキュリティ保護されたディレクトリの作成</a></li>
<li><a href="#_jspのインデックスページの作成">JSPのインデックス・ページの作成</a></li>
<li><a href="#_ログインフォームの作成tomcatでは必須glassfishまたはweblogicサーバーではオプション">ログイン・フォームの作成(Tomcatでは必須、GlassFishまたはWebLogicサーバーではオプション)</a></li>
</ul>
</li>
<li><a href="#_ターゲットサーバーでのユーザーの作成">ターゲット・サーバーでのユーザーの作成</a>
<ul class="sectlevel2">
<li><a href="#_glassfish_serverでのユーザーの定義">GlassFish Serverでのユーザーの定義</a></li>
<li><a href="#_tomcat_webサーバーでのロールとユーザーの定義">Tomcat Webサーバーでのロールとユーザーの定義</a></li>
<li><a href="#_weblogicサーバーでのユーザーとグループの定義">WebLogicサーバーでのユーザーとグループの定義</a></li>
</ul>
</li>
<li><a href="#_ログイン方法の構成">ログイン方法の構成</a>
<ul class="sectlevel2">
<li><a href="#_基本的なログイン">基本的なログイン</a></li>
<li><a href="#_フォームによるログイン">フォームによるログイン</a></li>
</ul>
</li>
<li><a href="#_サーバーのデプロイメントディスクリプタの構成">サーバーのデプロイメント・ディスクリプタの構成</a>
<ul class="sectlevel2">
<li><a href="#_glassfish_serverのデプロイメントディスクリプタの構成">[[GlassFish Serverのデプロイメント・ディスクリプタの構成]]</a></li>
<li><a href="#_weblogicサーバーのデプロイメントディスクリプタの構成">WebLogicサーバーのデプロイメント・ディスクリプタの構成</a></li>
</ul>
</li>
<li><a href="#_アプリケーションのデプロイと実行">アプリケーションのデプロイと実行</a></li>
<li><a href="#_サマリー">サマリー</a></li>
<li><a href="#_関連項目">関連項目</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>執筆: Dan Kolar、管理: James Branam、Jeff Rubinoff</p>
</div>
<div class="paragraph">
<p>このドキュメントでは、Oracle GlassFish Open Source Edition、Oracle WebLogicまたはApache TomcatサーバーにデプロイされるWebアプリケーションにセキュリティを追加する基本的な手順を学ぶことができます。</p>
</div>
<div class="paragraph">
<p>このドキュメントでは、基本的なログイン・ウィンドウとWebページのログイン・フォームを使用してセキュリティ認証を構成する方法を説明します。このドキュメントでは、TomcatサーバーおよびGlassFishサーバーでユーザーを作成する手順を学習できます。ユーザーを作成した後、デプロイメント・ディスクリプタでセキュリティ・プロパティを設定してセキュリティ・ロールを作成します。このドキュメントでは、GlassFishサーバーにデプロイするときに、JDBC認証を使用してアプリケーションのセキュリティ保護を行う方法も説明します。</p>
</div>
<div class="paragraph">
<p><strong>予測される所要時間: _40_分</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-80-74-73.png" alt="netbeans stamp 80 74 73">
</div>
<div class="title">Figure 1. このページの内容は、NetBeans IDE 7.2、7.3、7.4および8.0に適用されます</div>
</div>
<div class="paragraph">
<p><strong>このチュートリアルに従うには、次のソフトウェアとリソースが必要です。</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ソフトウェアまたはリソース</th>
<th class="tableblock halign-left valign-top">必須バージョン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java EEバージョン</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java Developer Kit (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">バージョン7または8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java EEプラットフォーム</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java EE 6または7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Travelデータベース</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">オプション</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java EE互換のWebサーバーまたはアプリケーション・サーバー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tomcat Webサーバー7.xまたは8.x、Oracle WebLogic 11g、または
GlassFish Server Open Source Edition 4.x</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_作業環境のインストールと構成">作業環境のインストールと構成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>NetBeans IDEをインストールし、起動します。このチュートリアルは、バンドルされたTomcatサーバーまたはGlassFishサーバーを使用して実行できます。</p>
</div>
<div class="paragraph">
<p>サーバーがインストールされ、サーバー・インスタンスがIDEに登録されていることを確認します。サーバー・マネージャを使用して、インストール済のサーバー・インスタンスを登録できます。(「ツール」&gt;「サーバー」&gt;「サーバーを追加」を選択します。「GlassFish Server &lt;バージョン番号&gt;」または「Tomcat &lt;バージョン番号&gt;」を選択し、「次」をクリックします。「参照」をクリックし、アプリケーション・サーバーのインストール・ディレクトリを探します。「終了」をクリックします。)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_webアプリケーションの作成">Webアプリケーションの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この課題では、まずWebアプリケーション・プロジェクトとディレクトリ構造を作成します。次に、セキュリティ保護された各ディレクトリで、単純な <code>html</code> ファイルをいくつか作成します。Webアプリケーションは、セキュリティ保護されたディレクトリへのアクセスに、基本的なログイン認証を使用します。認証にログイン・フォームを使用する場合は、フォームがある <code>jsp</code> ページを追加できます。</p>
</div>
<div class="sect2">
<h3 id="_セキュリティ保護されたディレクトリの作成">セキュリティ保護されたディレクトリの作成</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「ファイル」&gt;「新規プロジェクト」([Ctrl]-[Shift]-[N])を選択し、「Java Web」カテゴリから「Webアプリケーション」を選択して「次」をクリックします。</p>
</li>
<li>
<p>プロジェクトに <code>WebApplicationSecurity</code> という名前を付けます。デフォルトの設定を受け入れます。</p>
</li>
<li>
<p>(オプション)「ライブラリの格納用に専用フォルダを使用」チェックボックスを選択し、ライブラリ・フォルダの場所を指定します。このオプションの詳細は、_NetBeans IDEによるアプリケーションの開発_の<a href="http://www.oracle.com/pls/topic/lookup?ctx=nb8000&amp;id=NBDAG455">他のユーザーとのライブラリの共有</a>を参照してください。</p>
</li>
<li>
<p>「次」をクリックします。</p>
</li>
<li>
<p>アプリケーションをデプロイするサーバーを選択します。表示されるのは、IDEに登録されているサーバーのみです。「次」をクリックします。</p>
</li>
<li>
<p>フレームワークを追加する必要はないので、「終了」をクリックします。</p>
</li>
<li>
<p>EE 6アプリケーションを作成した場合は、IDEの「プロジェクト」ウィンドウに移動してプロジェクトのノードを右クリックし、「新規」&gt;「その他」&gt;「Web」&gt;「標準のデプロイメント・ディスクリプタ(web.xml)」を選択します。デフォルト設定をすべて受け入れてクリックしてウィザードを進めます。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>注意:</strong> このチュートリアルではデプロイメント・ディスクリプタでセキュリティを構成する方法を示しますが、EE 6およびEE 7アプリケーションはデフォルトでデプロイメント・ディスクリプタのかわりに注釈を使用します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>GlassFishまたはWebLogicサーバーとNetBeans IDE 7.0.1以降を使用している場合は、サーバー固有のディスクリプタを生成する必要があります。プロジェクトのノードを右クリックし、「新規」&gt;「その他」&gt;「GlassFish」&gt;「GlassFishディスクリプタ」または「新規」&gt;「その他」&gt;「WebLogic」&gt;「WebLogicディスクリプタ」を選択します。「サーバー固有のディスクリプタを作成」ダイアログが開きます。デフォルトをすべて受け入れ、「終了」をクリックします。 <code>glassfish-web.xml</code> または <code>weblogic.xml</code> という名前の、サーバー固有のディスクリプタが、プロジェクトの「構成ファイル」フォルダに表示されます。</p>
</li>
<li>
<p>IDEの「プロジェクト」ウィンドウで「Webページ」を右クリックし、「新規」&gt;「その他」を選択します。</p>
</li>
<li>
<p>新規ファイル・ウィザードで、「カテゴリ」に「その他」を選択し、「ファイル・タイプ」に「フォルダ」を選択します。「次」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>.
新規フォルダ・ウィザードでフォルダに「secureAdmin」という名前を付け、「終了」をクリックします。</p>
</div>
<div class="paragraph">
<p>「プロジェクト」ウィンドウの「Webページ」フォルダに、secureAdminフォルダが表示されます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>前の3つの手順を繰り返して、secureUserという名前の別のフォルダを作成します。</p>
</li>
<li>
<p>「プロジェクト」ウィンドウで、secureUserフォルダを右クリックして「新規」&gt;「その他」を選択し、secureUserフォルダ内に新しい <code>html</code> ファイルを作成します。</p>
</li>
<li>
<p>「その他」カテゴリで「HTML」ファイル・タイプを選択します。「次」をクリックします。</p>
</li>
<li>
<p>新しいファイルにpageUという名前を付け、「終了」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「終了」をクリックすると、ソース・エディタでファイル <code>pageU.html</code> が開きます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ソース・エディタで、 <code>pageU.html</code> 内の既存コードを次のコードに置き換えます。<span class="html-tag">&lt;html&gt;
&lt;head&gt;
   &lt;title&gt;</span></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">User secure area[html-tag]#&lt;/title&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;h1&gt;#User Secure Area[html-tag]#&lt;/h1&gt;
   &lt;/body&gt;
&lt;/html&gt;#</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>secureAdminフォルダを右クリックし、pageAという名前の新しい <code>html</code> ファイルを作成します。</p>
</li>
<li>
<p>ソース・エディタで、 <code>pageA.html</code> 内の既存コードを次のコードに置き換えます。<span class="html-tag">&lt;html&gt;
&lt;head&gt;
   &lt;title&gt;</span></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">Admin secure area[html-tag]#&lt;/title&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;h1&gt;#Admin secure area[html-tag]#&lt;/h1&gt;
   &lt;/body&gt;
&lt;/html&gt;#</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jspのインデックスページの作成">JSPのインデックス・ページの作成</h3>
<div class="paragraph">
<p>セキュリティ保護された領域へのリンクを含むJSPのインデックス・ページを作成します。ユーザーがリンクをクリックすると、ユーザー名とパスワードの入力が求められます。基本的なログインを使用している場合は、デフォルト・ブラウザのログイン・ウィンドウが表示されます。ログイン・フォーム・ページを使用する場合、ユーザーはフォームにユーザー名とパスワードを入力します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ソース・エディタで <code>index.jsp</code> を開き、次の <code>pageA.html</code> および <code>pageU.html</code> へのリンクを追加します。<span class="jsp-html-tag">&lt;p&gt;</span></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">Request a secure Admin page [jsp-html-tag]#&lt;a# [jsp-html-argument]#href=#[jsp-xml-value]#"secureAdmin/pageA.html"#[jsp-html-tag]#&gt;#here![jsp-html-tag]#&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;#Request a secure User page [jsp-html-tag]#&lt;a# [jsp-html-argument]#href=#[jsp-xml-value]#"secureUser/pageU.html"# [jsp-html-tag]#&gt;#here![jsp-html-tag]#&lt;/a&gt;&lt;/p&gt;#</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>変更を保存します。</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_ログインフォームの作成tomcatでは必須glassfishまたはweblogicサーバーではオプション">ログイン・フォームの作成(Tomcatでは必須、GlassFishまたはWebLogicサーバーではオプション)</h3>
<div class="paragraph">
<p>基本的なログインのかわりにログイン・フォームを使用する場合、フォームを含む <code>jsp</code> ページを作成できます。<a href="#Basic_login_config">ログイン方法を構成</a>するときに、ログイン・ページとエラー・ページを指定します。</p>
</div>
<div class="paragraph">
<p><strong>重要:</strong> Tomcatユーザーはログイン・フォームを作成する必要があります。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウで「Webページ」フォルダを右クリックし、「新規」&gt;「JSP」を選択します。</p>
</li>
<li>
<p>ファイルに <code>login</code> という名前を付け、その他のフィールドはデフォルトの値のままにし、「終了」をクリックします。</p>
</li>
<li>
<p>ソース・エディタで、 <code>login.jsp</code> の <code>&lt;body&gt;</code> タグの間に次のコードを挿入します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;[jsp-html-tag]#form# [jsp-html-argument]#action=#[jsp-xml-value]#"j_security_check"# [jsp-html-argument]#method=#[jsp-xml-value]#"POST"#[jsp-html-tag]#&gt;#
   Username:[jsp-html-tag]#&lt;input# [jsp-html-argument]#type=#[jsp-xml-value]#"text"# [jsp-html-argument]#name=#[jsp-xml-value]#"j_username"#[jsp-html-tag]#&gt;&lt;br&gt;#
   Password:[jsp-html-tag]#&lt;input# [jsp-html-argument]#type=#[jsp-xml-value]#"password"# [jsp-html-argument]#name=#[jsp-xml-value]#"j_password"#[jsp-html-tag]#&gt;
   &lt;input# [jsp-html-argument]#type=#[jsp-xml-value]#"submit"# [jsp-html-argument]#value=#[jsp-xml-value]#"Login"#[jsp-html-tag]#&gt;
&lt;/form&gt;#</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>loginError.html</code> という名前の新しい <code>html</code> ファイルを「Webページ」フォルダに作成します。これは、単純なエラー・ページです。</p>
</li>
<li>
<p>ソース・エディタで、 <code>loginError.html</code> 内の既存コードを次のコードに置き換えます。<span class="html-tag">&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;</span></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">Login Test: Error logging in[html-tag]#&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;#Error Logging In[html-tag]#&lt;/h1&gt;
        &lt;br/&gt;
    &lt;/body&gt;
&lt;/html&gt;#</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ターゲットサーバーでのユーザーの作成">ターゲット・サーバーでのユーザーの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Webアプリケーションで、基本的なログインまたはフォームに基づくログインのユーザーおよびパスワードの認証セキュリティを使用できるようにするには、ユーザーとその適切なロールがターゲット・サーバーに対して定義されている必要があります。サーバーにログインするには、そのサーバーにユーザー・アカウントが存在している必要があります。</p>
</div>
<div class="paragraph">
<p>ユーザーとロールの定義方法は、指定したターゲット・サーバーに応じて異なります。このチュートリアルでは、セキュリティの設定をテストするために、 <code>admin</code> ユーザーと <code>user</code> ユーザーを使用します。これらのユーザーがそれぞれのサーバーに存在し、適切なロールがユーザーに割り当てられていることを確認する必要があります。</p>
</div>
<div class="sect2">
<h3 id="_glassfish_serverでのユーザーの定義">GlassFish Serverでのユーザーの定義</h3>
<div class="paragraph">
<p>このシナリオでは、GlassFishサーバーの管理コンソールを使用して、 <code>user</code> と <code>admin</code> という名前の2つの新しいユーザーを作成する必要があります。 <code>user</code> という名前のユーザーにはアプリケーションへのアクセス権を制限し、 <code>admin</code> には管理権限を付与します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>IDEの「サービス」ウィンドウに移動して「サーバー」&gt;「GlassFish Server」を右クリックし、「ドメイン管理コンソールの表示」を選択して管理コンソールを開きます。GlassFishサーバーのログイン・ページがブラウザ・ウィンドウで開きます。管理コンソールにアクセスするには、adminのユーザー名とパスワードを使用してログインする必要があります。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>注意:</strong> 管理コンソールにアクセスする前に、Application Serverを起動している必要があります。サーバーを起動するには、GlassFishサーバーのノードを右クリックし、「起動」を選択します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>管理コンソールで、「構成」&gt;「server-config」&gt;「セキュリティ」&gt;「レルム」&gt;「file」の順に展開します。「レルムを編集」パネルが開きます。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/edit-realm.png" alt="edit realm">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「レルムを編集」パネルの上部にある「ユーザーを管理」ボタンをクリックします。「ファイル・ユーザー」パネルが開きます。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/file-users.png" alt="file users">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「新規」をクリックします。新規ファイル・レルム・ユーザー・パネルが開きます。「ユーザーID」に「 <code>user</code> 」、パスワードに「 <code>userpw01</code> 」と入力します。「OK」をクリックします。</p>
</li>
<li>
<p>前の手順に従って、名前が <code>admin</code> 、パスワードが <code>adminpw1</code> のユーザーを <code>file</code> レルムに作成します。</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_tomcat_webサーバーでのロールとユーザーの定義">Tomcat Webサーバーでのロールとユーザーの定義</h3>
<div class="paragraph">
<p>Tomcat 7では、サーバーをNetBeans IDEに登録するときに、manager-scriptロールのユーザーとそのユーザーのパスワードを作成します。</p>
</div>
<div class="paragraph">
<p>Tomcatサーバーの基本的なユーザーとロールは、 <code>tomcat-users.xml</code> に記述されています。 <code>tomcat-users.xml</code> は、 <code><em>&lt;CATALINA_BASE&gt;</em>\conf</code> ディレクトリにあります。</p>
</div>
<div class="paragraph">
<p><strong>注意:</strong> CATALINA_BASEの場所は、「サービス」ウィンドウでTomcatサーバーのノードを右クリックし、「プロパティ」を選択して調べることができます。サーバーのプロパティが表示されます。CATALINA_BASEの場所は「接続」タブに示されます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tomcat-properties.png" alt="] image::images/catalina-base.png[">
</div>
</div>
<div class="paragraph">
<p><strong>注意:</strong> 以前のバージョンのIDEにバンドルされていたTomcat 6を使用する場合、このサーバーに存在する <code>ide</code> ユーザーには、パスワードと、管理者およびマネージャのロールが定義されています。ユーザー <code>ide</code> のパスワードは、Tomcat 6がインストールされるときに生成されます。ユーザー <code>ide</code> のパスワードは変更できます。つまり、 <code>tomcat-users.xml</code> にパスワードをコピーできます。</p>
</div>
<div class="paragraph">
<p><strong>ユーザーをTomcatに追加するには:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code><em>&lt;CATALINA_BASE&gt;</em>/conf/tomcat-users.xml</code> をエディタで開きます。</p>
</li>
<li>
<p><code>AdminRole</code> という名前のロールを追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;role rolename="AdminRole"/&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>UserRole</code> という名前のロールを追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;role rolename="UserRole"/&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>名前が <code>admin</code> 、パスワードが <code>adminpw1</code> 、ロールが <code>AdminRole</code> のユーザーを追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;user username="admin" password="adminpw1" roles="AdminRole"/&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>名前が <code>user</code> 、パスワードが <code>userpw01</code> 、ロールが <code>UserRole</code> のユーザーを追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;user username="user" password="userpw01" roles="UserRole"/&gt;</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>``tomcat-users.xml`` ファイルは次のようになります。</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;tomcat-users&gt;
&lt;!--
  &lt;role rolename="tomcat"/&gt;
  &lt;role rolename="role1"/&gt;
  &lt;user username="tomcat" password="tomcat" roles="tomcat"/&gt;
  &lt;user username="both" password="tomcat" roles="tomcat,role1"/&gt;
  &lt;user username="role1" password="tomcat" roles="role1"/&gt;
--&gt;
...
&lt;role rolename="AdminRole"/&gt;
&lt;role rolename="UserRole"/&gt;
&lt;user username="user" password="userpw01" roles="UserRole"/&gt;
&lt;user username="admin" password="adminpw1" roles="AdminRole"/&gt;
[User with manager-script role, defined when Tomcat 7 was registered with the IDE]
...
&lt;/tomcat-users&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_weblogicサーバーでのユーザーとグループの定義">WebLogicサーバーでのユーザーとグループの定義</h3>
<div class="paragraph">
<p>このシナリオでは、まずWebLogicサーバーの管理コンソールを使用して、 <code>user</code> と <code>admin</code> という名前の2つの新しいユーザーを作成する必要があります。これらのユーザーを、それぞれ <code>userGroup</code> グループと <code>adminGroup</code> グループに追加します。後で、これらのグループにセキュリティ・ロールを割り当てます。 <code>userGroup</code> にはアプリケーションへのアクセス権を制限し、 <code>adminGroup</code> には管理権限を付与します。</p>
</div>
<div class="paragraph">
<p>WebLogicサーバーにユーザーとグループを追加する一般的な手順については、WebLogic<a href="http://download.oracle.com/docs/cd/E21764_01/apirefs.1111/e13952/taskhelp/security/ManageUsersAndGroups.html">管理コンソール・オンライン・ヘルプ</a>を参照してください。</p>
</div>
<div class="paragraph">
<p><strong>「user」および「admin」のユーザーとグループをWebLogicに追加するには:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>IDEの「サービス」ウィンドウに移動して「サーバー」&gt;「WebLogic Server」を右クリックし、「管理コンソールを表示」を選択して管理コンソールを開きます。GlassFishサーバーのログイン・ページがブラウザ・ウィンドウで開きます。管理コンソールにアクセスするには、adminのユーザー名とパスワードを使用してログインする必要があります。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>注意:</strong> 管理コンソールにアクセスする前に、Application Serverを起動している必要があります。サーバーを起動するには、WebLogicサーバーのノードを右クリックし、「起動」を選択します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>左ペインで、「セキュリティ・レルム」を選択します。セキュリティ・レルムのサマリー・ページが開きます。</p>
</li>
<li>
<p>セキュリティ・レルムのサマリー・ページで、レルムの名前を選択します(デフォルト・レルムは「myrealm」)。レルム名の設定ページが開きます。</p>
</li>
<li>
<p>レルム名の設定ページで、「ユーザー」を選択し、「グループ」&gt;「ユーザー」を選択します。「ユーザー」表が表示されます。</p>
</li>
<li>
<p>「ユーザー」表で「新規」をクリックします。新規ユーザーを作成ページが開きます。</p>
</li>
<li>
<p>名前に「user」、パスワードに「userpw01」と入力します。必要に応じて、説明を入力します。デフォルトの認証プロバイダを受け入れます。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wl-admin-newuser.png" alt="wl admin newuser">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「OK」をクリックします。「ユーザー」表に戻ります。</p>
</li>
<li>
<p>「新規」をクリックし、名前が「admin」、パスワードが「admin1」のユーザーを追加します。</p>
</li>
<li>
<p>「グループ」タブを開きます。「グループ」表が表示されます。</p>
</li>
<li>
<p>「新規」をクリックします。「新規グループを作成」ウィンドウが開きます。</p>
</li>
<li>
<p>グループにuserGroupという名前を付けます。デフォルトのプロバイダを受け入れ、「OK」をクリックします。「グループ」表に戻ります。</p>
</li>
<li>
<p>「新規」をクリックし、adminGroupというグループを作成します。</p>
</li>
<li>
<p>次の手順のために「ユーザー」タブを開きます。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>次に、 <code>admin</code> ユーザーを <code>adminGroup</code> 、 <code>user</code> ユーザーを <code>userGroup</code> に追加します。</p>
</div>
<div class="paragraph">
<p><strong>ユーザーをグループに追加するには:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「ユーザー」タブで <code>admin</code> ユーザーをクリックします。ユーザーの設定ページが開きます。</p>
</li>
<li>
<p>設定ページで「グループ」タブを開きます。</p>
</li>
<li>
<p>「親グループ:」「使用可能:」表で、 <code>adminGroup</code> を選択します。</p>
</li>
<li>
<p>右矢印(&gt;)をクリックします。「親グループ: 選択:」表に <code>adminGroup</code> が表示されます。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wl-admin-usersettings.png" alt="wl admin usersettings">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「保存」をクリックします。</p>
</li>
<li>
<p>「ユーザー」タブに戻ります。</p>
</li>
<li>
<p><code>user</code> ユーザーをクリックし、 <code>userGroup</code> に追加します。</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ログイン方法の構成">ログイン方法の構成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>アプリケーションのログイン方法を構成するには、基本的なログイン認証用のブラウザによって提供されるログイン・ウィンドウを使用できます。または、ログイン・フォームがあるWebページを作成できます。両方のタイプのログイン構成は、ユーザーおよびパスワードによる認証に基づいています。</p>
</div>
<div class="paragraph">
<p>ログインを構成するには、_セキュリティ制約_を作成し、ロールをこれらのセキュリティ制約に割り当てます。セキュリティ制約では一連のファイルを定義します。ロールを制約に割り当てると、そのロールを持つユーザーは、制約によって定義された一連のファイルにアクセスできるようになります。たとえば、このチュートリアルでは、AdminRoleをAdminConstraintに、UserRoleとAdminRoleをUserConstraintに割り当てます。これは、AdminRoleを持つユーザーはAdminファイルとUserファイルの両方にアクセスでき、UserRoleを持つユーザーはUserファイルのみにアクセスできることを意味します。</p>
</div>
<div class="paragraph">
<p><strong>注意:</strong> ユーザー・ファイルに個別の管理者ロール・アクセス権を割り当てることは、一般的な使用方法ではありません。別の方法としては、UserRoleのみをUserConstraintに割り当て、サーバー側で、管理者でもある特定の*users*にAdminRoleを付与します。アクセス権をどのように付与するかは、個々の場合に応じて決定してください。</p>
</div>
<div class="literalblock">
<div class="content">
<pre>``web.xml`` を構成することによって、アプリケーションのログイン方法を構成できます。 ``web.xml`` ファイルは、「プロジェクト」ウィンドウの「構成ファイル」ディレクトリにあります。</pre>
</div>
</div>
<div class="sect2">
<h3 id="_基本的なログイン">基本的なログイン</h3>
<div class="paragraph">
<p>基本的なログイン構成を使用する場合は、ログイン・ウィンドウがブラウザに表示されます。セキュリティ保護されたコンテンツにアクセスするには、有効なユーザー名とパスワードが必要です。</p>
</div>
<div class="paragraph">
<p>次の手順は、GlassFishサーバーとWebLogicサーバーの基本的なログインの構成方法を示します。Tomcatユーザーは<a href="#form-login">フォームによるログイン</a>を使用する必要があります。</p>
</div>
<div class="paragraph">
<p><strong>基本的なログインを構成するには:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウで、プロジェクトの「構成ファイル」ノードを展開し、 <code>web.xml</code> をダブルクリックします。ビジュアル・エディタで <code>web.xml</code> ファイルが開きます。</p>
</li>
<li>
<p>ツールバーの「セキュリティ」をクリックし、セキュリティ・ビューでファイルを開きます。</p>
</li>
<li>
<p>「ログイン構成」ノードを展開し、「ログイン構成」を「基本」に設定します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>注意:</strong> フォームを使用する場合は、「基本」のかわりに「フォーム」を選択し、ログイン・ページおよびログイン・エラー・ページを指定します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>サーバーに応じたレルム名を入力します。</p>
<div class="ulist">
<ul>
<li>
<p><strong>GlassFish:</strong> 「レルム名」に「 <code>file</code> 」と入力します。これは、GlassFishサーバーでユーザーを作成した場所のデフォルト・レルム名です。</p>
</li>
<li>
<p><strong>Tomcat:</strong> レルム名は入力しないでください。</p>
</li>
<li>
<p><strong>WebLogic:</strong> 自分のレルム名を入力します。デフォルト・レルムは <code>myrealm</code> です。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/security-roles.png" alt="security roles">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「セキュリティ・ロール」ノードを展開し、「追加」をクリックしてロール名を追加します。</p>
</li>
<li>
<p>次のセキュリティ・ロールを追加します。</p>
<div class="ulist">
<ul>
<li>
<p><code>AdminRole</code> 。このロールに追加したユーザーは、サーバーの <code>secureAdmin</code> ディレクトリへのアクセス権を持ちます。</p>
</li>
<li>
<p><code>UserRole</code> 。このロールに追加したユーザーは、サーバーの <code>secureUser</code> ディレクトリへのアクセス権を持ちます。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>注意:</strong> GlassFishのロール名は先頭が大文字である必要があります。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>次の手順に従って、 <code>AdminConstraint</code> という名前のセキュリティ制約を作成および構成します。</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「セキュリティ制約を追加」をクリックします。新しいセキュリティ制約のセクションが表示されます。</p>
</li>
<li>
<p>新しいセキュリティ制約の「表示名」に「 <code>AdminConstraint</code> 」と入力します。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/admin-constraint.png" alt="admin constraint">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「追加」をクリックします。「Webリソースを追加」ダイアログが開きます。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>.
「Webリソースを追加」ダイアログで「リソース名」に「 <code>Admin</code> 」、「URLパターン」に「 <code>/secureAdmin/*</code> 」を設定し、「OK」をクリックします。ダイアログが閉じます。</p>
</div>
<div class="paragraph">
<p><strong>注意:</strong> アスタリスク(*)を使用すると、そのフォルダにあるすべてのファイルに対するユーザー・アクセス権を与えることになります。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/addwebresource.png" alt="addwebresource">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「認証制約を有効にする」を選択し、「編集」をクリックします。「ロール名を編集」ダイアログが開きます。</p>
</li>
<li>
<p>「ロール名を編集」ダイアログ・ボックスで左ペインの「AdminRole」を選択して「追加」をクリックし、「OK」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>前述の手順を完了すると、次の図に示すような結果になるはずです。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/constraints.png" alt="constraints">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>次の手順に従って、 <code>UserConstraint</code> という名前のセキュリティ制約を作成および構成します。</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「セキュリティ制約を追加」をクリックして新しいセキュリティ制約を作成します。</p>
</li>
<li>
<p>新しいセキュリティ制約の「表示名」に「 <code>UserConstraint</code> 」と入力します。</p>
</li>
<li>
<p>「追加」をクリックしてWebリソース・コレクションを追加します。</p>
</li>
<li>
<p>「Webリソースを追加」ダイアログ・ボックスで「リソース名」に「 <code>User</code> 」、「URLパターン」に「 <code>/secureUser/*</code> 」を設定し、「OK」をクリックします。</p>
</li>
<li>
<p>「認証制約を有効にする」を選択して「編集」をクリックし、「ロール名」フィールドを編集します。</p>
</li>
<li>
<p>「ロール名を編集」ダイアログ・ボックスで左ペインの「AdminRole」および「UserRole」を選択して「追加」をクリックし、「OK」をクリックします。
注意: web.xmlでセッションのタイム・アウトも設定できます。タイム・アウトを設定するには、ビジュアル・エディタの「一般」タブをクリックし、セッションの持続時間を指定します。デフォルトは30分です。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_フォームによるログイン">フォームによるログイン</h3>
<div class="paragraph">
<p>ログイン用のフォームを使用すると、ログイン・ページおよびエラー・ページの内容をカスタマイズできます。フォームを使用して認証を構成する手順は、作成した<a href="#loginform">ログイン・ページおよびエラー・ページ</a>を指定する以外は基本的なログイン構成と同じです。</p>
</div>
<div class="paragraph">
<p>次の手順は、ログイン・フォームを構成する方法を示しています</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウで「 <code>Webページ/WEB-INF</code> 」ディレクトリにある <code>web.xml</code> をダブルクリックし、ビジュアル・エディタでファイルを開きます。</p>
</li>
<li>
<p>ツールバーの「セキュリティ」をクリックし、セキュリティ・ビューでファイルを開き、「ログイン構成」ノードを展開します。</p>
</li>
<li>
<p>「ログイン構成」を「フォーム」に設定します。</p>
</li>
<li>
<p>「参照」をクリックして <code>login.jsp</code> を検索し、フォームのログイン・ページを設定します。
5.
「参照」をクリックして <code>loginError.html</code> を検索し、フォームのエラー・ページを設定します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/login-forms.png" alt="login forms">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>サーバーに応じたレルム名を入力します。</p>
<div class="ulist">
<ul>
<li>
<p><strong>GlassFish:</strong> 「レルム名」に「 <code>file</code> 」と入力します。これは、GlassFishサーバーでユーザーを作成した場所のデフォルト・レルム名です。</p>
</li>
<li>
<p><strong>Tomcat:</strong> レルム名は入力しないでください。</p>
</li>
<li>
<p><strong>WebLogic:</strong> 自分のレルム名を入力します。デフォルト・レルムは <code>myrealm</code> です。</p>
</li>
</ul>
</div>
</li>
<li>
<p>「セキュリティ・ロール」ノードを展開し、「追加」をクリックしてロール名を追加します。</p>
</li>
<li>
<p>次のセキュリティ・ロールを追加します。</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">サーバー・ロール</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">説明</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AdminRole</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">このロールに追加したユーザーは、サーバーの <code>secureAdmin</code> ディレクトリへのアクセス権を持ちます。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UserRole</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">このロールに追加したユーザーは、サーバーの <code>secureUser</code> ディレクトリへのアクセス権を持ちます。</p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>次の手順に従って、 <code>AdminConstraint</code> という名前のセキュリティ制約を作成および構成します。</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「セキュリティ制約を追加」をクリックして新しいセキュリティ制約を作成します。</p>
</li>
<li>
<p>新しいセキュリティ制約の「表示名」に「 <code>AdminConstraint</code> 」と入力します。</p>
</li>
<li>
<p>「追加」をクリックしてWebリソース・コレクションを追加します。
4.
「Webリソースを追加」ダイアログ・ボックスで「リソース名」に「 <code>Admin</code> 」、「URLパターン」に「 <code>/secureAdmin/*</code> 」を設定し、「OK」をクリックします。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>注意:</strong> アスタリスク(*)を使用すると、そのフォルダにあるすべてのファイルに対するユーザー・アクセス権を与えることになります。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/addwebresource.png" alt="addwebresource">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「認証制約を有効にする」を選択し、「編集」をクリックします。「ロール名を編集」ダイアログが開きます。</p>
</li>
<li>
<p>「ロール名を編集」ダイアログ・ボックスで左ペインの「AdminRole」を選択して「追加」をクリックし、「OK」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>前述の手順を完了すると、次の図に示すような結果になるはずです。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/constraints.png" alt="constraints">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>次の手順に従って、 <code>UserConstraint</code> という名前のセキュリティ制約を作成および構成します。</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「セキュリティ制約を追加」をクリックして新しいセキュリティ制約を作成します。</p>
</li>
<li>
<p>新しいセキュリティ制約の「表示名」に「 <code>UserConstraint</code> 」と入力します。</p>
</li>
<li>
<p>「追加」をクリックしてWebリソース・コレクションを追加します。</p>
</li>
<li>
<p>「Webリソースを追加」ダイアログ・ボックスで「リソース名」に「 <code>User</code> 」、「URLパターン」に「 <code>/secureUser/*</code> 」を設定し、「OK」をクリックします。</p>
</li>
<li>
<p>「認証制約を有効にする」を選択して「編集」をクリックし、「ロール名」フィールドを編集します。</p>
</li>
<li>
<p>「ロール名を編集」ダイアログ・ボックスで左ペインの「AdminRole」および「UserRole」を選択して「追加」をクリックし、「OK」をクリックします。
注意: web.xmlでセッションのタイム・アウトも設定できます。タイム・アウトを設定するには、ビジュアル・エディタの「一般」タブをクリックし、セッションの持続時間を指定します。デフォルトは30分です。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_サーバーのデプロイメントディスクリプタの構成">サーバーのデプロイメント・ディスクリプタの構成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>アプリケーションをGlassFishサーバーまたはWebLogicサーバーにデプロイメントする場合、 <code>web.xml</code> に定義されたセキュリティ・ロールをマッピングするため、サーバーのデプロイメント・ディスクリプタを構成する必要があります。サーバーのデプロイメント・ディスクリプタは、「プロジェクト」ウィンドウのプロジェクトの「構成ファイル」ノードの下に表示されます。</p>
</div>
<div class="sect2">
<h3 id="_glassfish_serverのデプロイメントディスクリプタの構成">[[GlassFish Serverのデプロイメント・ディスクリプタの構成]]</h3>
<div class="paragraph">
<p>GlassFishサーバーのデプロイメント・ディスクリプタの名前は <code>glassfish-web.xml</code> です。サーバーのデプロイメント・ディスクリプタは「構成ファイル」フォルダにあります。そこにない場合は、プロジェクトのノードを右クリックし、「新規」&gt;「その他」&gt;「GlassFish」&gt;「GlassFishデプロイメント・ディスクリプタ」に移動して作成します。すべてのデフォルトを受け入れます。</p>
</div>
<div class="literalblock">
<div class="content">
<pre>``web.xml`` に入力した値は、 ``glassfish-web.xml`` に表示されます。IDEはこれらの値を ``web.xml`` から取得します。</pre>
</div>
</div>
<div class="paragraph">
<p><strong>GlassFishデプロイメント・ディスクリプタを構成するには:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウで、プロジェクトの「構成ファイル」ノードを展開し、 <code>glassfish-web.xml</code> をダブルクリックします。GlassFishデプロイメント・ディスクリプタ用の特別なタブ付きエディタで <code>glassfish-web.xml</code> デプロイメント・ディスクリプタが開きます。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>注意:</strong> 3.1よりも古いバージョンのGlassFishサーバーでは、このファイルの名前は <code>sun-web.xml</code> です。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「セキュリティ」タブを選択し、セキュリティ・ロールを表示します。</p>
</li>
<li>
<p>AdminRoleのセキュリティ・ロール・ノードを選択し、「セキュリティ・ロールのマッピング」ペインを開きます。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>.
「プリンシパルの追加」をクリックし、「プリンシパル名」に「 <code>admin</code> 」と入力します。「OK」をクリックします。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-principal.png" alt="add principal">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>UserRoleのセキュリティ・ロール・ノードを選択し、「セキュリティ・ロールのマッピング」ペインを開きます。</p>
</li>
<li>
<p>「プリンシパルの追加」をクリックし、「プリンシパル名」に「 <code>user</code> 」と入力します。「OK」をクリックします。</p>
</li>
<li>
<p><code>glassfish-web.xml</code> に変更を保存します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「XML」タブをクリックして、XMLエディタで <code>glassfish-web.xml</code> を表示および編集することもできます。XMLエディタで <code>glassfish-web.xml</code> を開くと、 <code>glassfish-web.xml</code> に次のセキュリティ・ロールのマッピング情報があることがわかります。</p>
</div>
<div class="paragraph">
<p><span class="xml-tag">&lt;security-role-mapping&gt;
    &lt;role-name&gt;</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">AdminRole[xml-tag]#&lt;/role-name&gt;
    &lt;principal-name&gt;#admin[xml-tag]#&lt;/principal-name&gt;
&lt;/security-role-mapping&gt;
&lt;security-role-mapping&gt;
    &lt;role-name&gt;#UserRole[xml-tag]#&lt;/role-name&gt;
    &lt;principal-name&gt;#user[xml-tag]#&lt;/principal-name&gt;
&lt;/security-role-mapping&gt;#</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_weblogicサーバーのデプロイメントディスクリプタの構成">WebLogicサーバーのデプロイメント・ディスクリプタの構成</h3>
<div class="paragraph">
<p>WebLogicデプロイメント・ディスクリプタの名前は <code>weblogic.xml</code> です。現在、IDEの<a href="#gf-dd">GlassFishデプロイメント・ディスクリプタのサポート</a>は、WebLogicデプロイメント・ディスクリプタまで拡張されていません。したがって、 <code>weblogic.xml</code> の変更はすべて手動で行う必要があります。</p>
</div>
<div class="paragraph">
<p>WebLogicサーバーのデプロイメント・ディスクリプタは「構成ファイル」フォルダにあります。そこにない場合は、プロジェクトのノードを右クリックし、「新規」&gt;「その他」&gt;「WebLogic」&gt;「WebLogicデプロイメント・ディスクリプタ」に移動して作成します。すべてのデフォルトを受け入れます。</p>
</div>
<div class="paragraph">
<p><strong>注意:</strong> 宣言やプログラムによるセキュリティなど、WebLogicでのWebアプリケーションのセキュリティ保護に関する詳細は、<a href="http://download.oracle.com/docs/cd/E21764_01/web.1111/e13711/thin_client.htm">Oracle Fusion Middleware Oracle WebLogic Serverセキュリティのプログラミング</a>を参照してください。</p>
</div>
<div class="paragraph">
<p><strong>WebLogicデプロイメント・ディスクリプタを構成するには:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウで、プロジェクトの「構成ファイル」ノードを展開し、 <code>weblogic.xml</code> をダブルクリックします。 <code>weblogic.xml</code> デプロイメント・ディスクリプタがエディタで開きます。</p>
</li>
<li>
<p><code>&lt;weblogic-web-app&gt;</code> 要素の内部に、次のセキュリティ・ロール割当て要素を入力または貼り付けます。<span class="xml-tag">&lt;security-role-assignment&gt;
&lt;role-name&gt;</span></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">AdminRole[xml-tag]#&lt;/role-name&gt;
    &lt;principal-name&gt;#adminGroup[xml-tag]#&lt;/principal-name&gt;
&lt;/security-role-assignment&gt;
&lt;security-role-assignment&gt;
    &lt;role-name&gt;#UserRole[xml-tag]#&lt;/role-name&gt;
    &lt;principal-name&gt;#userGroup[xml-tag]#&lt;/principal-name&gt;
&lt;/security-role-assignment&gt;#</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>weblogic.xml</code> に変更を保存します。</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_アプリケーションのデプロイと実行">アプリケーションのデプロイと実行</h2>
<div class="sectionbody">
<div class="paragraph">
<p>「プロジェクト」ウィンドウでプロジェクト・ノードを右クリックし、「実行」を選択します。</p>
</div>
<div class="paragraph">
<p><strong>注意:</strong> プロジェクトはデフォルトで「保存時にコンパイル」機能が有効になっている状態で作成されているので、アプリケーションをIDEで実行するときに先にコードをコンパイルする必要はありません。保存時にコンパイル機能の詳細は、_NetBeans IDEによるアプリケーションの開発ユーザー・ガイド_の<a href="http://www.oracle.com/pls/topic/lookup?ctx=nb8000&amp;id=NBDAG510">Javaプロジェクトのビルド</a>を参照してください。</p>
</div>
<div class="paragraph">
<p>アプリケーションをサーバーにビルドおよびデプロイした後、Webブラウザで開始ページが開きます。*admin*または*user*のいずれかをクリックして、アクセスするセキュリティ保護された領域を選択します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/deploy1.png" alt="deploy1">
</div>
</div>
<div class="paragraph">
<p>ユーザーとパスワードを入力した後、考えられる結果は次の3つです。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>このユーザーのパスワードが正しく、ユーザーがセキュリティ保護されたコンテンツに対する権限を持っている場合、セキュリティ保護されたコンテンツ・ページが表示されます。</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/deploy2.png" alt="deploy2">
</div>
</div>
<div class="paragraph">
<p>*
このユーザーのパスワードが間違っている場合、エラー・ページが表示されます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/deploy3.png" alt="deploy3">
</div>
</div>
<div class="paragraph">
<p>*
このユーザーのパスワードは正しいが、ユーザーがセキュリティ保護されたコンテンツへのアクセス権を持っていない場合、ブラウザには、リクエストされたリソースへのアクセスが拒否されたことを示すエラー403が表示されます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/deploy4.png" alt="deploy4">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_サマリー">サマリー</h2>
<div class="sectionbody">
<div class="paragraph">
<p>このチュートリアルでは、セキュリティ保護されたWebアプリケーションを作成しました。web.xmlディスクリプタとglassfish-web.xmlディスクリプタのエディタを使用してセキュリティの設定を編集し、セキュリティ保護されたログインと複数のIDを持つWebページを作成しました。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_関連項目">関連項目</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="quickstart-webapps.html">Webアプリケーション開発入門</a></p>
</li>
<li>
<p><a href="../../trails/java-ee.html">Java EEおよびJava Webの学習</a></p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">link:/about/contact_form.html?to=3&amp;subject=Feedback: Securing a Web Application[このチュートリアルに関するご意見をお寄せください]</p></td>
</tr>
</tbody>
</table>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/security-webapps_ja.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
