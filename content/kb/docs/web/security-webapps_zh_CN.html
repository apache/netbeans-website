
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>在 NetBeans IDE 中保护 Web 应用程序的安全</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="在 NetBeans IDE 中保护 Web 应用程序的安全 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, 在 NetBeans IDE 中保护 Web 应用程序的安全">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 16</h1>
            <p><a class="button success" href="/download/nb16/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">在 NetBeans IDE 中保护 Web 应用程序的安全</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/security-webapps_zh_CN.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_安装和配置工作环境">安装和配置工作环境</a></li>
<li><a href="#_创建_web_应用程序">创建 Web 应用程序</a>
<ul class="sectlevel2">
<li><a href="#_创建安全目录">创建安全目录</a></li>
<li><a href="#_创建_jsp_索引页">创建 JSP 索引页</a></li>
<li><a href="#_创建登录窗体对_tomcat_为必选对_glassfish_或_weblogic_server_为可选">创建“登录窗体”（对 Tomcat 为必选，对 GlassFish 或 WebLogic Server 为可选）</a></li>
</ul>
</li>
<li><a href="#_在目标服务器上创建用户">在目标服务器上创建用户</a>
<ul class="sectlevel2">
<li><a href="#_在_glassfish_server_上定义用户">在 GlassFish Server 上定义用户</a></li>
<li><a href="#_在_tomcat_web_服务器上定义角色和用户">在 Tomcat Web 服务器上定义角色和用户</a></li>
<li><a href="#_在_weblogic_server_上定义用户和组">在 WebLogic Server 上定义用户和组</a></li>
</ul>
</li>
<li><a href="#_配置登录方法">配置登录方法</a>
<ul class="sectlevel2">
<li><a href="#_基本登录">基本登录</a></li>
<li><a href="#_窗体登录">窗体登录</a></li>
</ul>
</li>
<li><a href="#_配置服务器部署描述符">配置服务器部署描述符</a>
<ul class="sectlevel2">
<li><a href="#_配置_glassfish_server_部署描述符">配置 GlassFish Server 部署描述符</a></li>
<li><a href="#_配置_weblogic_server_部署描述符">配置 WebLogic Server 部署描述符</a></li>
</ul>
</li>
<li><a href="#_部署并运行应用程序">部署并运行应用程序</a></li>
<li><a href="#_小结">小结</a></li>
<li><a href="#_另请参见">另请参见</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>由 Dan Kolar 撰稿，James Branam 和 Jeff Rubinoff 维护</p>
</div>
<div class="paragraph">
<p>本文档介绍在部署到 Oracle GlassFish Open Source Edition、Oracle WebLogic 或 Apache Tomcat 服务器的 Web 应用程序中添加安全功能的基础知识。</p>
</div>
<div class="paragraph">
<p>本文档介绍了如何使用基本登录窗口以及 Web 页中的登录窗体配置安全验证。本文档还将指导您完成在 Tomcat 和 GlassFish Server 上创建用户的步骤。创建用户之后，然后可以通过在部署描述符中设置安全属性创建安全角色。本文档还介绍了在将应用程序部署到 GlassFish Server 时，如何使用 JDBC 验证来保护应用程序的安全。</p>
</div>
<div class="paragraph">
<p><strong>预计时间：<em>40</em> 分钟</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-80-74-73.png" alt="netbeans stamp 80 74 73">
</div>
<div class="title">Figure 1. 此页上的内容适用于 NetBeans IDE 7.2、7.3、7.4 和 8.0</div>
</div>
<div class="paragraph">
<p><strong>要学习本教程，您需要具备以下软件和资源。</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">软件或资源</th>
<th class="tableblock halign-left valign-top">要求的版本</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java EE 版本</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java 开发者工具包 (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">版本 7 或 8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java EE 平台</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java EE 6 或 7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Travel 数据库</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无版本要求</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">符合 Java EE 规范的 Web 服务器或应用服务器</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tomcat Web 服务器 7.x 或 8.x、Oracle WebLogic 11g 或
GlassFish Server Open Source Edition 4.x</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_安装和配置工作环境">安装和配置工作环境</h2>
<div class="sectionbody">
<div class="paragraph">
<p>安装并启动 NetBeans IDE。可以使用捆绑的 Tomcat 服务器或 GlassFish Server 完成本教程。</p>
</div>
<div class="paragraph">
<p>确保已安装服务器，并已在 IDE 中注册服务器实例。可以使用服务器管理器来注册已安装的服务器实例。（选择 "Tools"（工具）&gt; "Servers"（服务器）&gt; "Add Server"（添加服务器）。选择 "GlassFish Server &lt;version number&gt;"（GlassFish Server &lt;版本号&gt;）或 "Tomcat &lt;version number&gt;"（Tomcat &lt;版本号&gt;），然后单击 "Next"（下一步）。单击 "Browse"（浏览）并找到该应用服务器的安装目录。单击 "Finish"（完成）。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_创建_web_应用程序">创建 Web 应用程序</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在本练习中，您首先将创建 Web 应用程序项目和目录结构。然后在每个安全目录中创建一些简单的  <code>html</code>  文件。Web 应用程序使用基本登录验证来访问安全目录。如果希望使用登录窗体进行验证，则可以向窗体添加  <code>jsp</code>  页。</p>
</div>
<div class="sect2">
<h3 id="_创建安全目录">创建安全目录</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>选择 "File"（文件）&gt; "New Project"（新建项目）（Ctrl-Shift-N 组合键），从 Java Web 类别中选择 "Web Application"（Web 应用程序），然后单击 "Next"（下一步）。</p>
</li>
<li>
<p>将项目命名为  <code>WebApplicationSecurity</code> 。接受默认设置。</p>
</li>
<li>
<p>（可选）选中“使用专用文件夹存储库”复选框，并指定库文件夹的位置。有关此选项的详细信息，请参见_使用 NetBeans IDE 开发应用程序_中的<a href="http://www.oracle.com/pls/topic/lookup?ctx=nb8000&amp;id=NBDAG455">与其他用户共享库</a>。</p>
</li>
<li>
<p>单击 "Next"（下一步）。</p>
</li>
<li>
<p>选择要在其中部署应用程序的服务器。这里仅列出了已在 IDE 中注册的服务器。单击 "Next"（下一步）。</p>
</li>
<li>
<p>不需要添加框架，因此请单击 "Finish"（完成）。</p>
</li>
<li>
<p>如果创建了一个 EE 6 应用程序，请转到 IDE 的 "Projects"（项目）窗口，右键单击该项目的节点，然后选择 "New"（新建）&gt; "Other"（其他）&gt; "Web" &gt; "Standard Deployment Descriptor (web.xml)"（标准部署描述符 (web.xml)）。接受所有默认值，然后单击相应的按钮以完成向导。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>*注：*本教程介绍了如何在部署描述符中配置安全功能，但 EE 6 和 EE 7 应用程序默认使用标注，而不是部署描述符。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>如果使用 GlassFish 或 WebLogic Server 以及 NetBeans IDE 7.0.1 或更高版本，则需生成特定于服务器的描述符。右键单击项目的节点并选择 "New"（新建）&gt; "Other"（其他）&gt; "GlassFish" &gt; "GlassFish Descriptor"（GlassFish 描述符），或选择 "New"（新建）&gt; "Other"（其他）&gt; "WebLogic" &gt; "WebLogic Descriptor"（WebLogic 描述符）。"Create Server-Specific Descriptor"（创建特定于服务器的描述符）对话框将会打开。接受所有默认值，然后单击 "Finish"（完成）。特定于服务器的描述符（名为  <code>glassfish-web.xml</code>  或  <code>weblogic.xml</code> ）将出现在项目中的 "Configuration Files"（配置文件）文件夹中。</p>
</li>
<li>
<p>在 IDE 的 "Projects"（项目）窗口中，右键单击 "Web Pages"（Web 页），然后选择 "New"（新建）&gt; "Other"（其他）。</p>
</li>
<li>
<p>在新建文件向导中，选择 "Other"（其他）作为类别，选择 "Folder"（文件夹）作为文件类型。单击 "Next"（下一步）。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>.
在新建文件夹向导中，将文件夹命名为 "secureAdmin"，然后单击 "Finish"（完成）。</p>
</div>
<div class="paragraph">
<p>secureAdmin 文件夹将显示在 "Projects"（项目）窗口的 "Web Pages"（Web 页）文件夹中。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>重复前面的 3 个步骤，以创建另一个名为 secureUser 的文件夹。</p>
</li>
<li>
<p>在 secureUser 文件夹中创建一个新的  <code>html</code>  文件，方法是在 "Projects"（项目）窗口中右键单击 secureUser 文件夹，然后选择 "New"（新建）&gt; "Other"（其他）。</p>
</li>
<li>
<p>在 "Other"（其他）类别中选择 "HTML" 文件类型。单击 "Next"（下一步）。</p>
</li>
<li>
<p>将新文件命名为 "pageU"，然后单击 "Finish"（完成）。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>单击 "Finish"（完成），此时将在源代码编辑器中打开  <code>pageU.html</code>  文件。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在源代码编辑器中，将  <code>pageU.html</code>  中的现有代码替换为以下代码。<span class="html-tag">&lt;html&gt;
&lt;head&gt;
   &lt;title&gt;</span></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">User secure area[html-tag]#&lt;/title&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;h1&gt;#User Secure Area[html-tag]#&lt;/h1&gt;
   &lt;/body&gt;
&lt;/html&gt;#</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>右键单击 secureAdmin 文件夹并创建一个新的名为 pageA 的  <code>html</code>  文件。</p>
</li>
<li>
<p>在源代码编辑器中，将  <code>pageA.html</code>  中的现有代码替换为以下代码。<span class="html-tag">&lt;html&gt;
&lt;head&gt;
   &lt;title&gt;</span></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">Admin secure area[html-tag]#&lt;/title&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;h1&gt;#Admin secure area[html-tag]#&lt;/h1&gt;
   &lt;/body&gt;
&lt;/html&gt;#</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_创建_jsp_索引页">创建 JSP 索引页</h3>
<div class="paragraph">
<p>现在可以创建包含指向安全区域的链接的 JSP 索引页。当用户单击链接时，系统将提示他们输入用户名和口令。如果使用的是基本登录，将使用默认浏览器登录窗口进行提示。如果使用的是登录窗体页，则用户将在一个窗体中输入用户名和口令。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在源代码编辑器中打开  <code>index.jsp</code> ，并将以下链接添加到  <code>pageA.html</code>  和  <code>pageU.html</code> ：<span class="jsp-html-tag">&lt;p&gt;</span></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">Request a secure Admin page [jsp-html-tag]#&lt;a# [jsp-html-argument]#href=#[jsp-xml-value]#"secureAdmin/pageA.html"#[jsp-html-tag]#&gt;#here![jsp-html-tag]#&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;#Request a secure User page [jsp-html-tag]#&lt;a# [jsp-html-argument]#href=#[jsp-xml-value]#"secureUser/pageU.html"# [jsp-html-tag]#&gt;#here![jsp-html-tag]#&lt;/a&gt;&lt;/p&gt;#</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>保存所做的更改。</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_创建登录窗体对_tomcat_为必选对_glassfish_或_weblogic_server_为可选">创建“登录窗体”（对 Tomcat 为必选，对 GlassFish 或 WebLogic Server 为可选）</h3>
<div class="paragraph">
<p>如果希望使用登录窗体而不使用基本登录，则可以创建一个包含窗体的  <code>jsp</code>  页。然后在<a href="#Basic_login_config">配置登录方法</a>时指定登录页和错误页。</p>
</div>
<div class="paragraph">
<p>*重要说明：*Tomcat 用户必须创建一个登录窗体。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在 "Projects"（项目）窗口中，右键单击 "Web Pages"（Web 页）文件夹并选择 "New"（新建）&gt; "JSP"。</p>
</li>
<li>
<p>将文件命名为  <code>login</code> ，保留其他字段的默认值，然后单击 "Finish"（完成）。</p>
</li>
<li>
<p>在源代码编辑器中，将以下代码插入到  <code>login.jsp</code>  的  <code>&lt;body&gt;</code>  标记之间。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;[jsp-html-tag]#form# [jsp-html-argument]#action=#[jsp-xml-value]#"j_security_check"# [jsp-html-argument]#method=#[jsp-xml-value]#"POST"#[jsp-html-tag]#&gt;#
   Username:[jsp-html-tag]#&lt;input# [jsp-html-argument]#type=#[jsp-xml-value]#"text"# [jsp-html-argument]#name=#[jsp-xml-value]#"j_username"#[jsp-html-tag]#&gt;&lt;br&gt;#
   Password:[jsp-html-tag]#&lt;input# [jsp-html-argument]#type=#[jsp-xml-value]#"password"# [jsp-html-argument]#name=#[jsp-xml-value]#"j_password"#[jsp-html-tag]#&gt;
   &lt;input# [jsp-html-argument]#type=#[jsp-xml-value]#"submit"# [jsp-html-argument]#value=#[jsp-xml-value]#"Login"#[jsp-html-tag]#&gt;
&lt;/form&gt;#</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在 "Web Pages"（Web 页）文件夹中创建一个新的名为  <code>loginError.html</code>  的  <code>html</code>  文件。这是一个简单的错误页。</p>
</li>
<li>
<p>在源代码编辑器中，将  <code>loginError.html</code>  中的现有代码替换为以下代码。<span class="html-tag">&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;</span></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">Login Test: Error logging in[html-tag]#&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;#Error Logging In[html-tag]#&lt;/h1&gt;
        &lt;br/&gt;
    &lt;/body&gt;
&lt;/html&gt;#</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_在目标服务器上创建用户">在目标服务器上创建用户</h2>
<div class="sectionbody">
<div class="paragraph">
<p>要能够在 Web 应用程序中使用用户/口令验证（基本登录或基于窗体的登录）安全功能，必须为目标服务器定义用户及其相应角色。要登录到服务器，该服务器上必须存在用户帐户。</p>
</div>
<div class="paragraph">
<p>定义用户和角色的方式因指定的目标服务器而异。在本教程中，用户  <code>admin</code>  和  <code>user</code>  用于测试安全设置。您需要确认在相应的服务器上存在这些用户，并为这些用户指定了相应的角色。</p>
</div>
<div class="sect2">
<h3 id="_在_glassfish_server_上定义用户">在 GlassFish Server 上定义用户</h3>
<div class="paragraph">
<p>对于本方案，需要使用 GlassFish Server 的管理控制台创建两个分别名为  <code>user</code>  和  <code>admin</code>  的新用户。名为  <code>user</code>  的用户对应用程序具有有限的访问权限，名为  <code>admin</code>  的用户具有管理权限。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>通过转至 IDE 的 "Services"（服务）窗口并右键单击 "Servers"（服务器）&gt; "GlassFish Server" &gt; "View Domain Admin Console"（查看域管理控制台）打开 "Admin Console"（管理控制台）。GlassFish Server 的登录页将在浏览器窗口中打开。您需要使用管理员用户名和口令进行登录才能访问管理控制台。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>*注：*必须运行应用服务器才能访问管理控制台。要启动服务器，请右键单击 GlassFish Server 节点并选择 "Start"（启动）。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在 "Admin Console"（管理控制台）中，导航至 "Configurations"（配置）&gt; "server-config" &gt; "Security"（安全性）&gt; "Realms"（领域）&gt; "File"（文件）。"Edit Realm"（编辑领域）面板将会打开。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/edit-realm.png" alt="edit realm">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>单击 "Edit Realm"（编辑领域）面板顶部的 "Manage Users"（管理用户）按钮。将打开 "File Users"（文件用户）面板。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/file-users.png" alt="file users">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>单击 "New"（新建）。将打开 "New File Realm User"（新建文件领域用户）面板。键入  <code>user</code>  作为用户 ID，键入  <code>userpw01</code>  作为口令。单击 "OK"（确定）。</p>
</li>
<li>
<p>按照前面的步骤在  <code>file</code>  领域中创建名为  <code>admin</code> 、口令为  <code>adminpw1</code>  的用户。</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_在_tomcat_web_服务器上定义角色和用户">在 Tomcat Web 服务器上定义角色和用户</h3>
<div class="paragraph">
<p>对于 Tomcat 7，在 NetBeans IDE 中注册服务器时，将创建一个角色为 manager-script 的用户，并为该用户创建一个口令。</p>
</div>
<div class="paragraph">
<p>Tomcat 服务器的基本用户和角色在  <code>tomcat-users.xml</code>  中。可以在  <code><em>&lt;CATALINA_BASE&gt;</em>\conf</code>  目录中找到  <code>tomcat-users.xml</code> 。</p>
</div>
<div class="paragraph">
<p>*注：*通过在 "Services"（服务）窗口中右键单击 Tomcat 服务器节点并选择 "Properties"（属性）可以查找 CATALINA_BASE 位置。"Server Properties"（服务器属性）将打开。CATALINA_BASE 的位置在 "Connection"（连接）标签中。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tomcat-properties.png" alt="] image::images/catalina-base.png[">
</div>
</div>
<div class="paragraph">
<p>*注：*如果使用早期版本的 IDE 捆绑的 Tomcat 6，该服务器将定义具有口令以及 administrator 和 manager 角色的  <code>ide</code>  用户。用户  <code>ide</code>  的口令是在安装 Tomcat 6 时生成的。可以更改用户  <code>ide</code>  的口令，或者将该口令复制到  <code>tomcat-users.xml</code>  中。</p>
</div>
<div class="paragraph">
<p><strong>将用户添加到 Tomcat 中：</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在编辑器中打开  <code><em>&lt;CATALINA_BASE&gt;</em>/conf/tomcat-users.xml</code> 。</p>
</li>
<li>
<p>添加一个名为  <code>AdminRole</code>  的角色。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;role rolename="AdminRole"/&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>添加一个名为  <code>UserRole</code>  的角色。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;role rolename="UserRole"/&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>添加一个名为  <code>admin</code>  并具有  <code>adminpw1</code>  口令和  <code>AdminRole</code>  角色的用户。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;user username="admin" password="adminpw1" roles="AdminRole"/&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>添加一个名为  <code>user</code>  并具有  <code>userpw01</code>  口令和  <code>UserRole</code>  角色的用户。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;user username="user" password="userpw01" roles="UserRole"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>现在， <code>tomcat-users.xml</code>  文件显示如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;tomcat-users&gt;
&lt;!--
  &lt;role rolename="tomcat"/&gt;
  &lt;role rolename="role1"/&gt;
  &lt;user username="tomcat" password="tomcat" roles="tomcat"/&gt;
  &lt;user username="both" password="tomcat" roles="tomcat,role1"/&gt;
  &lt;user username="role1" password="tomcat" roles="role1"/&gt;
--&gt;
...
&lt;role rolename="AdminRole"/&gt;
&lt;role rolename="UserRole"/&gt;
&lt;user username="user" password="userpw01" roles="UserRole"/&gt;
&lt;user username="admin" password="adminpw1" roles="AdminRole"/&gt;
[User with manager-script role, defined when Tomcat 7 was registered with the IDE]
...
&lt;/tomcat-users&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_在_weblogic_server_上定义用户和组">在 WebLogic Server 上定义用户和组</h3>
<div class="paragraph">
<p>对于本方案，首先需要使用 WebLogic Server 的管理控制台创建两个分别名为  <code>user</code>  和  <code>admin</code>  的新用户。将这些用户分别添加到  <code>userGroup</code>  和  <code>adminGroup</code>  组中。稍后，将要为这些组指定安全角色。 <code>userGroup</code>  将对应用程序具有有限的访问权限，而  <code>adminGroup</code>  将具有管理权限。</p>
</div>
<div class="paragraph">
<p>WebLogic <a href="http://download.oracle.com/docs/cd/E21764_01/apirefs.1111/e13952/taskhelp/security/ManageUsersAndGroups.html">管理控制台联机帮助</a>中提供了有关向 Web Logic 服务器添加用户和组的一般说明。</p>
</div>
<div class="paragraph">
<p><strong>将 "user" 和 "admin" 用户和组添加到 WebLogic 中：</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>通过转至 IDE 的 "Services"（服务）窗口并右键单击 "Servers"（服务器）&gt; "WebLogic Server" &gt; "View Admin Console"（查看管理控制台）打开 "Admin Console"（管理控制台）。GlassFish Server 的登录页将在浏览器窗口中打开。您需要使用管理员用户名和口令进行登录才能访问管理控制台。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>*注：*必须运行应用服务器才能访问管理控制台。要启动服务器，请右键单击 WebLogic Server 节点并选择 "Start"（启动）。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在左面板中，选择 "Security Realms"（安全领域）。"Summary of Security Realms"（安全领域概要）页将会打开。</p>
</li>
<li>
<p>在 "Summary of Security Realms"（安全领域概要）页中，选择领域的名称（默认领域为 "myrealm"）。"Settings for Realm Name"（领域名称设置）页将会打开。</p>
</li>
<li>
<p>在 "Settings for Realm Name"（领域名称设置）页中，选择 "Users and Groups"（用户和组）&gt; "Users"（用户）。将显示 "Users"（用户）表。</p>
</li>
<li>
<p>在 "Users"（用户）表中，单击 "New"（新建）。"Create New User"（创建新用户）页将会打开。</p>
</li>
<li>
<p>键入名称 "user" 和口令 "userpw01"。还可以键入说明。接受默认的 "Authentication Provider"（验证提供器）。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wl-admin-newuser.png" alt="wl admin newuser">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>单击 "OK"（确定）。您将返回到 "Users"（用户）表。</p>
</li>
<li>
<p>单击 "New"（新建）并添加一个具有名称 "admin" 和口令 "admin1" 的用户。</p>
</li>
<li>
<p>打开 "Groups"（组）标签。将显示 "Groups"（组）表。</p>
</li>
<li>
<p>单击 "New"（新建）。"Create a New Group"（创建新组）窗口将会打开。</p>
</li>
<li>
<p>将组命名为 userGroup。接受默认提供器并单击 "OK"（确定）。您将返回到 "Groups"（组）表。</p>
</li>
<li>
<p>单击 "New"（新建）并创建组 adminGroup。</p>
</li>
<li>
<p>为下一过程打开 "Users"（用户）标签。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>现在，将  <code>admin</code>  用户添加至  <code>adminGroup</code> ，并将  <code>user</code>  用户添加至  <code>userGroup</code> 。</p>
</div>
<div class="paragraph">
<p><strong>将用户添加到组中：</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在 "Users"（用户）标签中，单击  <code>admin</code>  用户。用户的 "Settings"（设置）页将会打开。</p>
</li>
<li>
<p>在 "Settings"（设置）页中，打开 "Groups"（组）标签。</p>
</li>
<li>
<p>在 "Parent Groups: Available:"（父组：可用：）表中，选择  <code>adminGroup</code> 。</p>
</li>
<li>
<p>单击向右箭头 &gt;。 <code>adminGroup</code>  将出现在 "Parent Groups: Chosen:"（父组: 选定:）表中。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wl-admin-usersettings.png" alt="wl admin usersettings">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>单击 "Save"（保存）。</p>
</li>
<li>
<p>返回到 "Users"（用户）标签。</p>
</li>
<li>
<p>单击  <code>user</code>  用户并将其添加至  <code>userGroup</code> 。</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_配置登录方法">配置登录方法</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在为应用程序配置登录方法时，可以使用浏览器提供的登录窗口进行基本登录验证。另外，还可以创建具有登录窗体的 Web 页。这两种登录配置都是基于用户/口令验证的。</p>
</div>
<div class="paragraph">
<p>要配置登录，需创建_安全约束_并为这些安全约束指定角色。安全约束定义一组文件。将角色指定给约束时，拥有该角色的用户可以访问约束定义的文件集。例如，在本教程中，您将 AdminRole 指定给 AdminConstraint，将 UserRole 和 AdminRole 指定给 UserConstraint。这意味着，具有 AdminRole 角色的用户有权访问 Admin 文件和 User 文件，但具有 UserRole 角色的用户只有权访问 User 文件。</p>
</div>
<div class="paragraph">
<p><strong>注：*向单独的管理员角色提供对用户文件的访问权限不是常规用例。替代方法是只将 UserRole 指定给 UserConstraint，并且在服务器端将 AdminRole 赋予也是管理员的特定 *用户</strong>。您应决定如何按用例授予访问权限。</p>
</div>
<div class="paragraph">
<p>通过配置  <code>web.xml</code> ，可以为应用程序配置登录方法。可以在 "Projects"（项目）窗口的 "Configuration Files"（配置文件）目录中找到  <code>web.xml</code>  文件。</p>
</div>
<div class="sect2">
<h3 id="_基本登录">基本登录</h3>
<div class="paragraph">
<p>在使用基本登录配置时，登录窗口由浏览器提供。访问安全内容需要有效的用户名和口令。</p>
</div>
<div class="paragraph">
<p>以下步骤介绍了如何为 GlassFish 和 WebLogic Server 配置基本登录。Tomcat 用户需要使用<a href="#form-login">窗体登录</a>。</p>
</div>
<div class="paragraph">
<p><strong>配置基本登录：</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在 "Projects"（项目）窗口中，展开项目的 "Configuration Files"（配置文件）节点，然后双击  <code>web.xml</code> 。将在可视编辑器中打开  <code>web.xml</code>  文件。</p>
</li>
<li>
<p>单击工具栏中的 "Security"（安全），在 "Security"（安全）视图中打开该文件。</p>
</li>
<li>
<p>展开 "Login Configuration"（登录配置）节点，然后将 "Login Configuration"（登录配置）设置为 "Basic"（基本）。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>*注：*如果希望使用窗体，请选择 "Form"（窗体）而不是 "basic"（基本），并指定登录页和登录错误页。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>根据服务器输入领域名称。</p>
<div class="ulist">
<ul>
<li>
<p>*GlassFish：*输入  <code>file</code>  作为领域名称。这是在 GlassFish Server 上创建用户所在的默认领域名称。</p>
</li>
<li>
<p>*Tomcat：*请勿输入领域名称。</p>
</li>
<li>
<p>*WebLogic：*输入您的领域名称。默认领域是  <code>myrealm</code> 。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/security-roles.png" alt="security roles">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>展开 "Security Roles "（安全角色）节点，然后单击 "Add"（添加）可添加角色名称。</p>
</li>
<li>
<p>添加以下安全角色：</p>
<div class="ulist">
<ul>
<li>
<p><code>AdminRole</code> 。添加到此角色的用户将有权访问服务器的  <code>secureAdmin</code>  目录。</p>
</li>
<li>
<p><code>UserRole</code> 。添加到此角色的用户将有权访问服务器的  <code>secureUser</code>  目录。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>*注：*GlassFish 角色名称必须以大写字母开头。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>通过执行以下操作，创建和配置名为  <code>AdminConstraint</code>  的安全约束：</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>单击 "Add Security Constraint"（添加安全约束）。将显示新安全约束部分。</p>
</li>
<li>
<p>输入  <code>AdminConstraint</code>  作为新安全约束的显示名称。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/admin-constraint.png" alt="admin constraint">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>单击 "ADD"（添加）。将打开 "Add Web Resource"（增加 Web 资源）对话框。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>.
在 "Add Web Resource"（增加 Web 资源）对话框中，将 "Resource Name"（资源名称）设置为  <code>Admin</code> ，将 "URL Pattern"（URL 模式）设置为  <code>/secureAdmin/*</code> ，然后单击 "OK"（确定）。对话框将关闭。</p>
</div>
<div class="paragraph">
<p><strong>注：*如果使用星号 (</strong>)，则会授予用户访问该文件夹中所有文件的权限。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/addwebresource.png" alt="addwebresource">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>选中 "Enable Authentication Constraint"（启用验证约束），然后单击 "Edit"（编辑）。"Edit Role Names"（编辑角色名称）对话框将会打开。</p>
</li>
<li>
<p>在 "Edit Role Names"（编辑角色名称）对话框中，在左窗格中选择 AdminRole，单击 "Add"（添加），然后单击 "OK"（确定）。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>在完成上述步骤之后，结果应如下图所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/constraints.png" alt="constraints">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>通过执行以下操作，创建和配置名为  <code>UserConstraint</code>  的安全约束：</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>单击 "Add Security Constraint"（添加安全约束），创建新的安全约束。</p>
</li>
<li>
<p>输入  <code>UserConstraint</code>  作为新安全约束的显示名称。</p>
</li>
<li>
<p>单击 "Add"（添加），添加 "Web Resource Collection"（Web 资源集合）。</p>
</li>
<li>
<p>在 "Add Web Resource"（增加 Web 资源）对话框中，将 "Resource Name"（资源名称）设置为  <code>User</code> ，将 URL 模式设置为  <code>/secureUser/*</code> ，然后单击 "OK"（确定）。</p>
</li>
<li>
<p>选中 "Enable Authentication Constraint"（启用验证约束），然后单击 "Edit"（编辑）以编辑 "Role Name"（角色名称）字段。</p>
</li>
<li>
<p>在 "Edit Role Names"（编辑角色名称）对话框中，在左窗格中选择 AdminRole 和 UserRole，单击 "Add"（添加），然后单击 "OK"（确定）。
注：还可以在 web.xml 中设置会话的超时时间。要设置超时，请单击可视编辑器的 "General"（常规）标签，然后指定希望会话持续的时间。默认值为 30 分钟。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_窗体登录">窗体登录</h3>
<div class="paragraph">
<p>使用窗体进行登录可以定制登录页和错误页的内容。使用窗体配置验证的步骤与基本登录配置相同，但需要指定您创建的<a href="#loginform">登录页和错误页</a>。</p>
</div>
<div class="paragraph">
<p>以下步骤演示如何配置登录窗体</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在 "Projects"（项目）窗口中，双击位于  <code>Web 页/WEB-INF</code>  目录中的  <code>web.xml</code> ，在可视编辑器中打开该文件。</p>
</li>
<li>
<p>单击工具栏中的 "Security"（安全），在 "Security"（安全）视图中打开该文件，并展开 "Login Configuration"（登录配置）节点。</p>
</li>
<li>
<p>将 "Login Configuration"（登录配置）设置为 "Form"（窗体）。</p>
</li>
<li>
<p>通过单击 "Browse"（浏览）并找到  <code>login.jsp</code>  设置“窗体登录页”。
5.
通过单击 "Browse"（浏览）并找到  <code>loginError.html</code>  设置“窗体错误页”。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/login-forms.png" alt="login forms">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>根据服务器输入领域名称。</p>
<div class="ulist">
<ul>
<li>
<p>*GlassFish：*输入  <code>file</code>  作为领域名称。这是在 GlassFish Server 上创建用户所在的默认领域名称。</p>
</li>
<li>
<p>*Tomcat：*请勿输入领域名称。</p>
</li>
<li>
<p>*WebLogic：*输入您的领域名称。默认领域是  <code>myrealm</code> 。</p>
</li>
</ul>
</div>
</li>
<li>
<p>展开 "Security Roles "（安全角色）节点，然后单击 "Add"（添加）可添加角色名称。</p>
</li>
<li>
<p>添加以下安全角色：</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">服务器角色</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">描述</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AdminRole</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">添加到此角色的用户将有权访问服务器的  <code>secureAdmin</code>  目录。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UserRole</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">添加到此角色的用户将有权访问服务器的  <code>secureUser</code>  目录。</p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>通过执行以下操作，创建和配置名为  <code>AdminConstraint</code>  的安全约束：</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>单击 "Add Security Constraint"（添加安全约束），创建新的安全约束。</p>
</li>
<li>
<p>输入  <code>AdminConstraint</code>  作为新安全约束的显示名称。</p>
</li>
<li>
<p>单击 "Add"（添加），添加 "Web Resource Collection"（Web 资源集合）。
4.
在 "Add Web Resource"（增加 Web 资源）对话框中，将 "Resource Name"（资源名称）设置为  <code>Admin</code> ，将“URL 模式”设置为  <code>/secureAdmin/*</code> ，然后单击 "OK"（确定）。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>注：*如果使用星号 (</strong>)，则会授予用户访问该文件夹中所有文件的权限。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/addwebresource.png" alt="addwebresource">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>选中 "Enable Authentication Constraint"（启用验证约束），然后单击 "Edit"（编辑）。"Edit Role Names"（编辑角色名称）对话框将会打开。</p>
</li>
<li>
<p>在 "Edit Role Names"（编辑角色名称）对话框中，在左窗格中选择 AdminRole，单击 "Add"（添加），然后单击 "OK"（确定）。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>在完成上述步骤之后，结果应如下图所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/constraints.png" alt="constraints">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>通过执行以下操作，创建和配置名为  <code>UserConstraint</code>  的安全约束：</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>单击 "Add Security Constraint"（添加安全约束），创建新的安全约束。</p>
</li>
<li>
<p>输入  <code>UserConstraint</code>  作为新安全约束的显示名称。</p>
</li>
<li>
<p>单击 "Add"（添加），添加 "Web Resource Collection"（Web 资源集合）。</p>
</li>
<li>
<p>在 "Add Web Resource"（增加 Web 资源）对话框中，将 "Resource Name"（资源名称）设置为  <code>User</code> ，将 URL 模式设置为  <code>/secureUser/*</code> ，然后单击 "OK"（确定）。</p>
</li>
<li>
<p>选中 "Enable Authentication Constraint"（启用验证约束），然后单击 "Edit"（编辑）以编辑 "Role Name"（角色名称）字段。</p>
</li>
<li>
<p>在 "Edit Role Names"（编辑角色名称）对话框中，在左窗格中选择 AdminRole 和 UserRole，单击 "Add"（添加），然后单击 "OK"（确定）。
注：还可以在 web.xml 中设置会话的超时时间。要设置超时，请单击可视编辑器的 "General"（常规）标签，然后指定希望会话持续的时间。默认值为 30 分钟。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_配置服务器部署描述符">配置服务器部署描述符</h2>
<div class="sectionbody">
<div class="paragraph">
<p>如果要将应用程序部署到 GlassFish 或 WebLogic Server，则需配置服务器部署描述符，以映射在  <code>web.xml</code>  中定义的安全角色。服务器部署描述符列在 "Projects"（项目）窗口中项目的 "Configuration Files"（配置文件）节点下。</p>
</div>
<div class="sect2">
<h3 id="_配置_glassfish_server_部署描述符">配置 GlassFish Server 部署描述符</h3>
<div class="paragraph">
<p>GlassFish Server 部署描述符名为  <code>glassfish-web.xml</code> 。服务器部署描述符在 "Configuration Files"（配置文件）文件夹中。如果它不在此处，可通过右键单击项目的节点并转至 "New"（新建）&gt; "Other"（其他）&gt; "GlassFish" &gt; "GlassFish Deployment Descriptor"（GlassFish 部署描述符）来创建。接受所有默认设置。</p>
</div>
<div class="paragraph">
<p>请注意，在  <code>web.xml</code>  中输入的值将显示在  <code>glassfish-web.xml</code>  中。IDE 会从  <code>web.xml</code>  中提取这些值。</p>
</div>
<div class="paragraph">
<p><strong>配置 GlassFish 部署描述符：</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在 "Projects"（项目）窗口中，展开项目的 "Configuration Files"（配置文件）节点，然后双击  <code>glassfish-web.xml</code> 。 <code>glassfish-web.xml</code>  部署描述符将在 GlassFish 部署描述符的特殊标签化编辑器中打开。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>*注：*对于早于 3.1 的 GlassFish Server 版本，此文件名为  <code>sun-web.xml</code> 。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>选择 "Security"（安全）标签以显示安全角色。</p>
</li>
<li>
<p>选择 AdminRole 安全角色节点以打开 "Security Role Mapping"（安全角色映射）窗格。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>.
单击 "Add Principal"（添加主用户），并为主用户名称输入  <code>admin</code> 。单击 "OK"（确定）。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-principal.png" alt="add principal">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>选择 UserRole 安全角色节点以打开 "Security Role Mapping"（安全角色映射）窗格。</p>
</li>
<li>
<p>单击 "Add Principal"（添加主用户），并为主用户名称输入  <code>user</code> 。单击 "OK"（确定）。</p>
</li>
<li>
<p>将更改保存到  <code>glassfish-web.xml</code> 。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>此外，也可以通过单击 "XML" 标签，在 XML 编辑器中查看和编辑  <code>glassfish-web.xml</code> 。如果在 XML 编辑器中打开  <code>glassfish-web.xml</code> ，则可以看到  <code>glassfish-web.xml</code>  具有以下安全角色映射信息：</p>
</div>
<div class="paragraph">
<p><span class="xml-tag">&lt;security-role-mapping&gt;
    &lt;role-name&gt;</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">AdminRole[xml-tag]#&lt;/role-name&gt;
    &lt;principal-name&gt;#admin[xml-tag]#&lt;/principal-name&gt;
&lt;/security-role-mapping&gt;
&lt;security-role-mapping&gt;
    &lt;role-name&gt;#UserRole[xml-tag]#&lt;/role-name&gt;
    &lt;principal-name&gt;#user[xml-tag]#&lt;/principal-name&gt;
&lt;/security-role-mapping&gt;#</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_配置_weblogic_server_部署描述符">配置 WebLogic Server 部署描述符</h3>
<div class="paragraph">
<p>WebLogic 部署描述符名为  <code>weblogic.xml</code> 。目前，IDE <a href="#gf-dd">对 GlassFish 部署描述符的支持</a>未扩展至 WebLogic 部署描述符。因此，您需要手动对  <code>weblogic.xml</code>  进行所有更改。</p>
</div>
<div class="paragraph">
<p>WebLogic Server 部署描述符在 "Configuration Files"（配置文件）文件夹中。如果它不在此处，可通过右键单击项目的节点并转至 "New"（新建）&gt; "Other"（其他）&gt; "WebLogic" &gt; "WebLogic Deployment Descriptor"（WebLogic 部署描述符）来创建。接受所有默认设置。</p>
</div>
<div class="paragraph">
<p>*注：*有关确保 WebLogic 中 web 应用程序安全（包括声明和编程安全）的详细信息，请参见<a href="http://download.oracle.com/docs/cd/E21764_01/web.1111/e13711/thin_client.htm">针对 Oracle WebLogic Server 的 Oracle Fusion Middleware 编程安全</a>。</p>
</div>
<div class="paragraph">
<p><strong>配置 WebLogic 部署描述符：</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在 "Projects"（项目）窗口中，展开项目的 "Configuration Files"（配置文件）节点，然后双击  <code>weblogic.xml</code> 。 <code>weblogic.xml</code>  部署描述符在编辑器中打开。</p>
</li>
<li>
<p>在  <code>&lt;weblogic-web-app&gt;</code>  元素内，键入或粘贴以下安全角色指定元素：<span class="xml-tag">&lt;security-role-assignment&gt;
&lt;role-name&gt;</span></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">AdminRole[xml-tag]#&lt;/role-name&gt;
    &lt;principal-name&gt;#adminGroup[xml-tag]#&lt;/principal-name&gt;
&lt;/security-role-assignment&gt;
&lt;security-role-assignment&gt;
    &lt;role-name&gt;#UserRole[xml-tag]#&lt;/role-name&gt;
    &lt;principal-name&gt;#userGroup[xml-tag]#&lt;/principal-name&gt;
&lt;/security-role-assignment&gt;#</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>将更改保存到  <code>weblogic.xml</code> 。</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_部署并运行应用程序">部署并运行应用程序</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在 "Projects"（项目）窗口中，右键单击该项目节点并选择 "Run"（运行）。</p>
</div>
<div class="paragraph">
<p>*注：*默认情况下，将在启用“在保存时编译”功能的情况下创建项目，因此无需先编译代码即可在 IDE 中运行应用程序。有关“在保存时编译”功能的详细信息，请参见 <em>Developing Applications with NetBeans IDE User&#8217;s Guide</em> 中的 <a href="http://www.oracle.com/pls/topic/lookup?ctx=nb8000&amp;id=NBDAG510">Building Java Projects</a>。</p>
</div>
<div class="paragraph">
<p>在构建应用程序并将其部署到服务器之后，将在 Web 浏览器中打开起始页。通过单击 <strong>admin</strong> 或 <strong>user</strong> 选择您要访问的安全区域。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/deploy1.png" alt="deploy1">
</div>
</div>
<div class="paragraph">
<p>在提供用户和口令之后，共有三个可能的结果：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>此用户的口令正确并且用户具有访问安全内容的权限 &#8594; 显示安全内容页</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/deploy2.png" alt="deploy2">
</div>
</div>
<div class="paragraph">
<p>*
此用户的口令不正确 &#8594; 显示错误页</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/deploy3.png" alt="deploy3">
</div>
</div>
<div class="paragraph">
<p>*
此用户的口令正确，但用户没有访问安全内容的权限 &#8594; 浏览器显示 "Error 403 Access to the requested resource has been denied"</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/deploy4.png" alt="deploy4">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_小结">小结</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在本教程中，您创建了一个安全 Web 应用程序。您已经通过使用 web.xml 和 glassfish-web.xml 描述符编辑器，以及创建具有安全登录和多个身份标识的 Web 页，编辑了安全设置。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_另请参见">另请参见</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="quickstart-webapps.html">Web 应用程序开发简介</a></p>
</li>
<li>
<p><a href="../../trails/java-ee.html">Java EE 和 Java Web 学习资源</a></p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">link:/about/contact_form.html?to=3&amp;subject=Feedback: Securing a Web Application[发送有关此教程的反馈意见]</p></td>
</tr>
</tbody>
</table>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/security-webapps_zh_CN.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2022 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
