
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Использование библиотеки Hibernate в веб-приложении</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Использование библиотеки Hibernate в веб-приложении - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Использование библиотеки Hibernate в веб-приложении">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Использование библиотеки Hibernate в веб-приложении</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/hibernate-webapp_ru.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_создание_базы_данных">Создание базы данных</a></li>
<li><a href="#_создание_проекта_веб_приложения">Создание проекта веб-приложения</a></li>
<li><a href="#_изменение_файла_настройки_библиотеки_hibernate">Изменение файла настройки библиотеки Hibernate</a></li>
<li><a href="#_создание_вспомогательного_файла_hibernateutil_java">Создание вспомогательного файла  <code>HibernateUtil.java</code></a></li>
<li><a href="#_создание_файлов_сопоставления_библиотеки_hibernate_и_классов_java">Создание файлов сопоставления библиотеки Hibernate и классов Java</a>
<ul class="sectlevel2">
<li><a href="#_создание_файла_обратного_проектирования_платформы_hibernate">Создание файла обратного проектирования платформы Hibernate</a></li>
<li><a href="#_создание_файлов_отображения_платформы_hibernate_и_объектов_pojo">Создание файлов отображения платформы Hibernate и объектов POJO</a></li>
</ul>
</li>
<li><a href="#_создание_служебного_класса_filmhelper_java">Создание служебного класса  <code>FilmHelper.java</code></a>
<ul class="sectlevel2">
<li><a href="#_создание_класса">Создание класса</a></li>
<li><a href="#_перечисление_названий_фильмов_и_извлечение_актеров_с_помощью_запроса_hql">Перечисление названий фильмов и извлечение актеров с помощью запроса HQL.</a></li>
<li><a href="#_добавление_вспомогательных_служебных_методов">Добавление вспомогательных служебных методов.</a></li>
</ul>
</li>
<li><a href="#_создание_управляемого_компонента_jsf">Создание управляемого компонента JSF</a></li>
<li><a href="#_создание_веб_страниц">Создание веб-страниц</a>
<ul class="sectlevel2">
<li><a href="#_создание_template_xhtml">Создание  <code>template.xhtml</code></a></li>
<li><a href="#_изменение_index_xhtml">Изменение  <code>index.xhtml</code></a></li>
<li><a href="#_создание_browse_xhtml">Создание  <code>browse.xhtml</code></a></li>
</ul>
</li>
<li><a href="#_выполнение_проекта">Выполнение проекта</a>
<ul class="sectlevel2">
<li><a href="#_загрузка_проекта_решения">Загрузка проекта решения</a></li>
<li><a href="#_устранение_проблем">Устранение проблем</a></li>
</ul>
</li>
<li><a href="#_дополнительные_сведения">Дополнительные сведения</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>В этом учебном руководстве IDE NetBeans используется для создания и развертывания веб-приложения, в котором отображаются данные из базы данных. В этом приложении используется платформа Hibernate в качестве уровня сохранения состояния для извлечения и хранения POJO (простых объектов Java) из реляционной базы данных.</p>
</div>
<div class="paragraph">
<p>Библиотека Hibernate предоставляет средства для объектно-реляционного сопоставления (ORM). В учебном курсе демонстрируется добавление поддержки платформы Hibernate к среде IDE и создание необходимых файлов Hibernate. После создания объектов Java и настройки приложения для использования Hibernate необходимо создать управляемый компонент JSF и страницы JSF 2.0 для отображения данных.</p>
</div>
<div class="paragraph">
<p>Перед началом этого учебного курса рекомендуется ознакомиться со следующей документацией:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Документация по Hibernate на сайте <a href="http://www.hibernate.org/">hibernate.org</a>;</p>
</li>
<li>
<p><a href="quickstart-webapps.html">Введение в разработку веб-приложений</a></p>
</li>
<li>
<p><a href="jsf20-intro.html">Введение в JavaServer Faces 2.x</a></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-74-73-72.png" alt="netbeans stamp 74 73 72">
</div>
<div class="title">Figure 1. Содержимое этой страницы применимо к IDE NetBeans 7.2, 7.3 и 7.4</div>
</div>
<div class="paragraph">
<p><strong>Для работы с этим учебным курсом требуется следующее программное обеспечение и ресурсы.</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Программное обеспечение или материал</th>
<th class="tableblock halign-left valign-top">Требуемая версия</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">IDE NetBeans</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Версия 7.1, 7.2, 7.3, 7.4, Java EE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Комплект для разработчика на языке Java (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Версия 6 или 7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GlassFish Server Open Source Edition 3.1.2.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.x или 4.x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.mysql.com/">Сервер базы данных MySQL</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Версия 5.x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">База данных "Sakila"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Подключаемый модуль, который можно получить с помощью центра обновления</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Можно загрузить <a href="https://netbeans.org/projects/samples/downloads/download/Samples/JavaEE/DVDStoreEE6.zip">готовый проект в виде архива ZIP</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_базы_данных">Создание базы данных</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом учебном курсе используется база данных MySQL  <code>sakila</code> , бесплатная типовая база данных MySQL, которую можно загрузить с сайта MySQL. База данных sakila не входит в установочный набор среды IDE, поэтому перед изучением этого учебного курса необходимо создать базу данных.</p>
</div>
<div class="paragraph">
<p>Для создания базы данных "Sakila" можно загрузить и установить подключаемый модуль "Sakila Sample Database" с использованием диспетчера подключаемых модулей. После установки подключаемого модуля база данных "sakila" будет добавлена к списку баз данных в диалоговом окне "Создание базы данных MySQL".</p>
</div>
<div class="paragraph">
<p>Для получения дополнительной информации о настройке среды IDE для работы с MySQL см. учебный курс <a href="../ide/mysql.html">Подключение к базе данных MySQL</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Откройте диспетчер подключаемых модулей и установите подключаемый модуль "Sakila Sample Database".</p>
</li>
<li>
<p>После установки подключаемого модуля, запустите базу данных MySQL, развернув узел 'Базы данных' в окне 'Службы', щелкните правой кнопкой мыши узел MySQL Server и выберите 'Пуск'.</p>
</li>
<li>
<p>Щелкните правой кнопкой мыши узел "MySQL Server" и выберите "Create Database".</p>
</li>
<li>
<p>Выберите базу данных "Sakila"из раскрывающегося списка "New Database Name" в диалоговом окне "Create MySQL Database". Нажмите кнопку "ОК".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/create-sakila-mysql.png" alt="create sakila mysql">
</div>
<div class="title">Figure 2. Снимок диалогового окна создания базы данных MySQL</div>
</div>
<div class="paragraph">
<p>При нажатии кнопки "OK" узел "Sakila" появится под узлом "MySQL Server".</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел "Sakila" и выберите "Connect".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>После нажатия кнопки "Connect a database" под узлом "Databases" отобразится узел подключения к базе данных "Sakila" ( <code>jdbc:mysql://localhost:3306/sakila [<em>username</em> on Default]</code> ). При открытом подключении для просмотра данных в базе данных разверните этот узел подключения.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_проекта_веб_приложения">Создание проекта веб-приложения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом упражнении будет создан проект веб-приложения, к которому будут добавлены библиотеки Hibernate. При создании проекта выберите "Hibernate" на экране "Платформы" в мастере создания проекта и укажите базу данных.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите "Файл &gt; Новый проект" (CTRL+SHIFT+N; &amp;#8984+SHIFT+N в Mac ОС) в главном меню. Выберите "Веб-приложение" из категории "Java Web" и нажмите кнопку "Далее".</p>
</li>
<li>
<p>Введите <strong>DVDStore</strong> в качестве имени проекта и укажите местоположение проекта.</p>
</li>
<li>
<p>Снимите флажок "Использовать отдельную папку", если он установлен. Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>В рамках этого руководства копирование библиотек проекта в выделенную папку лишено смысла, поскольку совместное использование библиотек с другими пользователями не потребуется.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В качестве сервера выберите 'GlassFish Server', а в качестве версии Java EE -'Java EE 6 Web' или 'Java EE 7 Web'. Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Установите флажок 'JavaServer Faces' и используйте стандартные библиотеки JSF 2.x.</p>
</li>
<li>
<p>В списке платформ установите флажок 'Гибернация'.</p>
</li>
<li>
<p>Выберите базу данных "sakila" из раскрывающегося списка "Соединение с базой данных". Нажмите кнопку 'Готово'.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> Если база данных Sakila не доступна в качестве параметра на панели Frameworks мастера, убедитесь, что соединение указано в списке узлов баз данных в окне 'Службы'. При отсутствии подключения следует создать подключение к базе данных.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-newwebapp.png" alt="hib newwebapp">
</div>
<div class="title">Figure 3. Панель 'Платформы' мастера создания проектов, на которой отображается добавление поддержки Hibernate к проекту</div>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Готово" в среде IDE создается проект веб-приложения и открывается файл  <code>hibernate.cfg.xml</code>  и  <code>index.xhtml</code>  в редакторе.</p>
</div>
<div class="paragraph">
<p>После разворачивания узла "Библиотеки" в окне "Проекты" видно, что к проекту добавлены библиотеки Hibernate.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-libraries.png" alt="hib libraries">
</div>
<div class="title">Figure 4. Снимок окна 'Проекты', в котором отображаются библиотеки Hibernate</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_изменение_файла_настройки_библиотеки_hibernate">Изменение файла настройки библиотеки Hibernate</h2>
<div class="sectionbody">
<div class="paragraph">
<p>При создании нового проекта, использующего платформу Hibernate, в среде IDE автоматически создается файл настройки  <code>hibernate.cfg.xml</code>  в корне контекстного пути к классам приложения (в окне "Файлы",  <code>src/java</code> ). Файл располагается в узле  <code>&lt;пакет по умолчанию&gt;</code>  в окне "Проекты" в узле "Исходные файлы". Файл настройки содержит информацию о подключении к базе данных, отображении ресурсов и других свойствах подключения. Этот файл можно изменить с использованием редактора с несколькими представлениями или внести изменения в код XML непосредственно в редакторе XML.</p>
</div>
<div class="paragraph">
<p>В этом упражнении будут изменены свойства по умолчанию, указанные в  <code>hibernate.cfg.xml</code>  для включения функции протоколирования отладки операторов SQL и для включения управления контекстами сеанса платформы Hibernate.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Откройте  <code>hibernate.cfg.xml</code>  на вкладке "Проект". Можно открыть файл, развернув узел  <code>&lt;пакет по умолчанию&gt;</code>  в области "Пакеты исходных файлов" в окне "Проекты" и дважды щелкнув  <code>hibernate.cfg.xml</code> .</p>
</li>
<li>
<p>В редакторе XML с несколькими представлениями разверните узел "Свойства настройки" в области "Необязательные свойства".</p>
</li>
<li>
<p>Нажмите кнопку "Add" для открытия диалогового окна "Add Hibernate Property".</p>
</li>
<li>
<p>В диалоговом окне выберите свойство  <code>hibernate.show_sql</code>  и установите значение  <code>true</code> . Это приведет ко включению протоколирования отладки операторов SQL.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-property-showsql.png" alt="add property showsql">
</div>
<div class="title">Figure 5. Диалоговое окно 'Добавить свойство Hibernate', в котором отображаются значения настроек для свойства hibernate.show_sql</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Разверните узел "Прочие свойства" и нажмите кнопку "Добавить".</p>
</li>
<li>
<p>В диалоговом окне выберите  <code>properties hibernate.current_session_context_class</code>  и установите значение  <code>thread</code>  для включения автоматического управления контекстами сеанса платформы Hibernate.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-property-sessioncontext.png" alt="add property sessioncontext">
</div>
<div class="title">Figure 6. Диалоговое окно 'Добавить свойство Hibernate', в котором отображаются значения настроек для свойства hibernate.current_session_context_class</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Нажмите кнопку "Добавить" еще раз в узле "Разные свойства" и выберите  <code>hibernate.query.factory_class</code>  в раскрывающемся списке "Имя свойства".</p>
</li>
<li>
<p>Выберите <strong>org.hibernate.hql.classic.ClassicQueryTranslatorFactory</strong> как "Значение свойства". Нажмите кнопку "ОК".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-property-factoryclass.png" alt="add property factoryclass">
</div>
<div class="title">Figure 7. Диалоговое окно 'Добавить свойство Hibernate', в котором отображаются значения настроек для свойства hibernate.query.factory_class property</div>
</div>
<div class="paragraph">
<p>При выборе вкладки "XML" в редакторе можно просмотреть файл в режиме XML. Ваш файл должен выглядеть следующим образом (три новые свойства выделены жирным шрифтом):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;hibernate-configuration&gt;
    &lt;session-factory name="session1"&gt;
        &lt;property name="hibernate.dialect"&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;
        &lt;property name="hibernate.connection.driver_class"&gt;com.mysql.jdbc.Driver&lt;/property&gt;
        &lt;property name="hibernate.connection.url"&gt;jdbc:mysql://localhost:3306/sakila&lt;/property&gt;
        &lt;property name="hibernate.connection.username"&gt;root&lt;/property&gt;
        &lt;property name="hibernate.connection.password"&gt;######&lt;/property&gt;
        *&lt;property name="hibernate.show_sql"&gt;true&lt;/property&gt;
        &lt;property name="hibernate.current_session_context_class"&gt;thread&lt;/property&gt;
        &lt;property name="hibernate.query.factory_class"&gt;org.hibernate.hql.classic.ClassicQueryTranslatorFactory&lt;/property&gt;*
    &lt;/session-factory&gt;
&lt;/hibernate-configuration&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Сохраните измененный файл.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Файл можно закрыть, т.к. необходимость в его изменении отсутствует.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_вспомогательного_файла_hibernateutil_java">Создание вспомогательного файла  <code>HibernateUtil.java</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Для использования библиотеки Hibernate необходимо создать вспомогательный класс для обработки запуска и обращения к  <code>SessionFactory</code>  библиотеки Hibernate для получения объекта "Session". Класс обеспечивает вызов  <code>configure()</code> , загрузку файла настройки  <code>hibernate.cfg.xml</code>  и последующую сборку  <code>SessionFactory</code>  для получения объекта "Сеанс".</p>
</div>
<div class="paragraph">
<p>В этом разделе для создания вспомогательного класса  <code>HibernateUtil.java</code>  используется мастер создания файла.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел "Source Packages" и выберите "New &gt; Other" для открытия мастера "New File".</p>
</li>
<li>
<p>Выберите "Hibernate" из списка "Categories" и "HibernateUtil.java" из списка "File Types". Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Введите <strong>HibernateUtil</strong> в качестве имени класса и <strong>dvdrental</strong> в качестве имени пакета. Нажмите кнопку 'Готово'.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hibernate-util-wizard.png" alt="hibernate util wizard">
</div>
<div class="title">Figure 8. моментальный снимок мастера создания HibernateUtil</div>
</div>
<div class="paragraph">
<p>После нажатия кнопки "Finish" в редакторе откроется класс  <code>HibernateUtil.java</code> . Файл можно закрыть, т.к. необходимость в его изменении отсутствует.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_файлов_сопоставления_библиотеки_hibernate_и_классов_java">Создание файлов сопоставления библиотеки Hibernate и классов Java</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом учебном курсе используется POJO (простой старый объект Java) для представления данных в каждой из таблиц используемой базы данных. Класс Java указывает поля для столбцов в таблицах и использует простые методы установки и получения значений для извлечения и записи данных. Для отображения объектов POJO в таблицах можно использовать файл отображения платформы Hibernate или аннотации в классе.</p>
</div>
<div class="paragraph">
<p>Можно использовать файлы отображения платформы Hibernate и объекты POJO в мастере "Базы данных" для создания нескольких объектов POJO и файлов отображения на основе таблиц базы данных. При использовании мастера необходимо выбрать все таблицы, для которых требуются объекты POJO и файлы отображения, после чего в среде IDE создаются файлы на основе таблиц базы данных и добавляются записи отображения в файл  <code>hibernate.cfg.xml</code> . При применении мастера можно выбрать файлы, которые должны быть созданы в среде IDE (например, только объекты POJO), и установить свойства создания кода (например, создание кода, использующего аннотации EJB 3).</p>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> Кроме того, в среде IDE также имеется мастер для создания отдельных объектов POJO и файлов сопоставления "с нуля".</p>
</div>
<div class="sect2">
<h3 id="_создание_файла_обратного_проектирования_платформы_hibernate">Создание файла обратного проектирования платформы Hibernate</h3>
<div class="paragraph">
<p>При необходимости использования файлов отображения платформы Hibernate и объектов POJO в мастере "Базы данных" необходимо сначала создать файл обратного проектирования  <code>hibernate.reveng.xml</code> . Для файлов отображения платформы Hibernate и объектов POJO в мастере "Базы данных" требуются файлы  <code>hibernate.reveng.xml</code>  и  <code>hibernate.cfg.xml</code> .</p>
</div>
<div class="paragraph">
<p>Файл обратного проектирования помогает лучше управлять стратегиями сопоставления баз данных. Мастер "Обратное проектирование Hibernate" создает файл обратного проектирования с параметрами настройки по умолчанию, которые можно изменить в редакторе XML.</p>
</div>
<div class="paragraph">
<p>Для создания файла обратного проектирования платформы Hibernate выполните следующие действия.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел "Source Packages" в окне "Projects" и выберите "New &gt; Other" для открытия мастера "New File".</p>
</li>
<li>
<p>Выберите "Мастер обратного проектирования Hibernate" в категории "Hibernate". Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Укажите  <code>hibernate.reveng</code>  в качестве имени файла и  <code>src/java</code>  в качестве имени папки. Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Выберите  <code>hibernate.cfg.xml</code>  из раскрывающегося списка "Файл конфигурации", если это значение не было выбрано ранее.</p>
</li>
<li>
<p>Выберите следующие таблицы в поле "Доступные таблицы" и нажмите "Добавить" для добавления этих таблиц в область "Выбранные таблицы".</p>
<div class="ulist">
<ul>
<li>
<p>исполнитель</p>
</li>
<li>
<p>категория</p>
</li>
<li>
<p>фильм</p>
</li>
<li>
<p>film_actor</p>
</li>
<li>
<p>film_category</p>
</li>
<li>
<p>язык</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Нажмите кнопку 'Готово'.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hibernate-reveng-wizard.png" alt="hibernate reveng wizard">
</div>
<div class="title">Figure 9. Мастер создания файла обратного проектирования платформы Hibernate</div>
</div>
<div class="paragraph">
<p>Мастер создает файл обратного проектирования  <code>hibernate.reveng.xml</code>  и открывает файл в редакторе. Файл обратного проектирования можно закрыть, поскольку его изменение не требуется.</p>
</div>
<div class="paragraph">
<p>Дополнительные сведения о работе с файлом  <code>hibernate.reveng.xml</code>  можно найти в <a href="http://docs.jboss.org/tools/2.1.0.Beta1/hibernatetools/html/reverseengineering.html">+ главе 5. Управление обратным проектированием ] документа link:http://docs.jboss.org/tools/2.1.0.Beta1/hibernatetools/html/[+Справочник по средствам Hibernate</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_создание_файлов_отображения_платформы_hibernate_и_объектов_pojo">Создание файлов отображения платформы Hibernate и объектов POJO</h3>
<div class="paragraph">
<p>Для создания файлов можно использовать файлы отображения платформы Hibernate и объекты POJO в мастере "Базы данных". Мастер может создать объект POJO и соответствующий файл отображения для каждой таблицы, выбранной в мастере. Файлы отображения являются файлами XML, содержащими данные об отображении столбцов таблиц в полях в объектах POJO. Для использования мастера необходимы файлы  <code>hibernate.reveng.xml</code>  и  <code>hibernate.cfg.xml</code> .</p>
</div>
<div class="paragraph">
<p>Для создания объектов POJO и файлов отображения с помощью мастера выполните следующие шаги.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел "Source Packages" в окне "Projects" и выберите "New &gt; Other" для открытия мастера "New File".</p>
</li>
<li>
<p>Выберите "Hibernate Mapping Files and POJOs from a Database" в категории "Hibernate". Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Убедитесь, что в раскрывающихся списках выбраны файлы  <code>hibernate.cfg.xml</code>  и  <code>hibernate.reveng.xml</code> .</p>
</li>
<li>
<p>Выберите <strong>Функции языка JDK 5</strong> в параметрах "Обычные параметры".</p>
</li>
<li>
<p>Убедитесь в том, что выбраны пункты <strong>Domain Code</strong> и <strong>Hibernate XML Mappings</strong>.</p>
</li>
<li>
<p>Выберите <strong>dvdrental</strong> в качестве имени пакета. Нажмите кнопку 'Готово'.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hibernate-pojo-wizard2.png" alt="hibernate pojo wizard2">
</div>
<div class="title">Figure 10. Мастер создания файлов сопоставления Hibernate и POJO</div>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Готово" в среде IDE создаются объекты POJO и файлы отображения платформы Hibernate где поля отображаются на столбцы, указанные в  <code>hibernate.reveng.xml</code> . Среда IDE добавляет записи отображения в файл  <code>hibernate.cfg.xml</code> .</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;hibernate-configuration&gt;
  &lt;session-factory&gt;
    &lt;property name="hibernate.dialect"&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;
    &lt;property name="hibernate.connection.driver_class"&gt;com.mysql.jdbc.Driver&lt;/property&gt;
    &lt;property name="hibernate.connection.url"&gt;jdbc:mysql://localhost:3306/sakila&lt;/property&gt;
    &lt;property name="hibernate.connection.username"&gt;myusername&lt;/property&gt;
    &lt;property name="hibernate.connection.password"&gt;mypassword&lt;/property&gt;
    &lt;property name="hibernate.show_sql"&gt;true&lt;/property&gt;
    &lt;property name="hibernate.current_session_context_class"&gt;thread&lt;/property&gt;
    &lt;property name="hibernate.query.factory_class"&gt;org.hibernate.hql.classic.ClassicQueryTranslatorFactory&lt;/property&gt;
    &lt;mapping resource="dvdrental/FilmActor.hbm.xml"/&gt;
    &lt;mapping resource="dvdrental/Language.hbm.xml"/&gt;
    &lt;mapping resource="dvdrental/Film.hbm.xml"/&gt;
    &lt;mapping resource="dvdrental/Category.hbm.xml"/&gt;
    &lt;mapping resource="dvdrental/Actor.hbm.xml"/&gt;
    &lt;mapping resource="dvdrental/FilmCategory.hbm.xml"/&gt;
  &lt;/session-factory&gt;
&lt;/hibernate-configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> Убедитесь, что элементы  <code>сопоставления</code>  указаны после элементов  <code>свойств</code>  в файле  <code>hibernate.cfg.xml</code> .</p>
</div>
<div class="paragraph">
<p>Можно развернуть пакет  <code>dvdrental</code>  для просмотра файлов, созданных с помощью мастера.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-projectswindow.png" alt="hib projectswindow">
</div>
<div class="title">Figure 11. В окне 'Проекты' отображаются созданные POJO</div>
</div>
<div class="paragraph">
<p>Можно использовать мастер "Отображение Hibernate" для создания файла отображения платформы Hibernate, отображающего определенную таблицу на определенный класс.</p>
</div>
<div class="paragraph">
<p>Дополнительные сведения о работе с файлом  <code>hibernate.reveng.xml</code>  можно найти в <a href="http://docs.jboss.org/hibernate/core/3.3/reference/en/html/mapping.html">+ главе 5. Отображение O/R ] в link:http://docs.jboss.org/hibernate/stable/core/reference/en/html/[+Справочной документации по Hibernate</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_служебного_класса_filmhelper_java">Создание служебного класса  <code>FilmHelper.java</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Теперь перейдем к созданию в пакете  <code>dvdrental</code>  служебного класса, используемого для выполнения запросов Hibernate в базу данных. Можно использовать редактор языка запросов Hibernate (Hibernate Query Language; HQL) для создания и тестирования запросов на извлечение данных. После тестирования запросов необходимо создать методы в служебном классе, создающем и выполняющем запросы. Затем вызовите методы в служебном классе из управляемого компонента JSF.</p>
</div>
<div class="sect2">
<h3 id="_создание_класса">Создание класса</h3>
<div class="paragraph">
<p>В этом разделе будет использован мастер создания файла для создания служебного класса  <code>FilmHelper.java</code>  в пакете  <code>dvdrental</code> . Будут созданы сеансы Hibernate с помощью вызова  <code>getSessionFactory</code>  в  <code>HibernateUtil.java</code>  и некоторые служебные методы создания запросов для извлечения данных из базы данных. Также будут вызваны служебные методы из страниц JSP.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел исходных файлов  <code>dvdrental</code>  и выберите "Создать &gt; Класс Java" для открытия мастера создания файла.</p>
</li>
<li>
<p>Введите <strong>FilmHelper</strong> в качестве имени класса.</p>
</li>
<li>
<p>Убедитесь в том, что в качестве пакета выбран <strong>dvdrental</strong>. Нажмите кнопку 'Готово'.</p>
</li>
<li>
<p>Добавьте следующий код (выделенный полужирным шрифтом) для создания сеанса Hibernate.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class FilmHelper {

    *Session session = null;

    public FilmHelper() {
        this.session = HibernateUtil.getSessionFactory().getCurrentSession();
    }*

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши в редакторе и выберите команду "Исправить операторы импорта" (ALT+SHIFT+I; &amp;#8984+SHIFT+I на компьютере Mac) для добавления любого необходимого оператора импорта ( <code>org.hibernate.Session</code> ) и сохраните изменения.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Теперь можно изменить класс  <code>FilmHelper.java</code>  для добавления методов, выполняющих запрос данных в БД.</p>
</div>
</div>
<div class="sect2">
<h3 id="_перечисление_названий_фильмов_и_извлечение_актеров_с_помощью_запроса_hql">Перечисление названий фильмов и извлечение актеров с помощью запроса HQL.</h3>
<div class="paragraph">
<p>В этом упражнении будет показано, как создать запрос на языке запросов Hibernate (HQL), обеспечивающий извлечение из базы данных списка названий фильмов из таблицы "Film". Затем добавляется метод, запрашивающий одновременно таблицы "Actor" и "Film_actor" для выбора актеров, снимавшихся в определенном фильме.</p>
</div>
<div class="paragraph">
<p>Таблица "Film" содержит 1000 записей, в связи с чем метод извлечения списка фильмов должен извлекать записи, основываясь на первичном ключе  <code>filmId</code> . Для создания и тестирования запроса HQL необходимо использовать редактор HQL. После создания корректного запроса нужно добавить метод к классу, способному создать соответствующий запрос.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В окне "Проекты" щелкните правой кнопкой мыши и выберите команду "Очистка и сборка".</p>
</li>
<li>
<p>Щелкните правой кнопкой мыши  <code>hibernate.cfg.xml</code>  в окне "Проекты" и выберите "Выполнить запрос HQL" для открытия редактора запросов HQL.</p>
</li>
<li>
<p>Выберите "hibernate.cfg" из раскрывающегося списка на панели инструментов.</p>
</li>
<li>
<p>Проверьте соединение, введя следующее в редакторе и нажав кнопку 'Выполнить запрос HQL' ( <span class="image"><img src="images/run_hql_query_16.png" alt="run hql query 16" title="Кнопка 'Выполнить запрос HQL'"></span> ) на панели инструментов.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">from Film</code></pre>
</div>
</div>
<div class="paragraph">
<p>После нажатия кнопки "Выполнить запрос HQL" результаты выполнения запроса отображаются в нижней части редактора запросов HQL.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hibernate-hqleditor1.png" alt="hibernate hqleditor1">
</div>
<div class="title">Figure 12. Мастер создания файлов сопоставления Hibernate и POJO</div>
</div>
<div class="paragraph">
<p>При нажатии кнопки "SQL" на экране должен отобразиться эквивалентный запрос SQL.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">select film0_.film_id as col_0_0_ from sakila.film film0_</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Введите следующий запрос на извлечение из таблицы "Film" записей, в которых идентификатор фильма находится между 100 и 200.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">from Film as film where film.filmId between 100 and 200</code></pre>
</div>
</div>
<div class="paragraph">
<p>В окне результата отобразится список записей. Теперь, после подтверждения правильности получаемых после выполнения запроса результатов, можно использовать запрос в служебном классе.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте следующий метод  <code>getFilmTitles</code>  к  <code>FilmHelper.java</code>  для извлечения фильмов с идентификатором, находящимся в определенном диапазоне, ограниченном переменными  <code>startID</code>  и  <code>endID</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public List getFilmTitles(int startID, int endID) {
    List&lt;Film&gt; filmList = null;
    try {
        org.hibernate.Transaction tx = session.beginTransaction();
        Query q = session.createQuery ("from Film as film where film.filmId between '"+startID+"' and '"+endID+"'");
        filmList = (List&lt;Film&gt;) q.list();
    } catch (Exception e) {
        e.printStackTrace();
    }
    return filmList;
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте следующий метод  <code>getActorsByID</code>  для извлечения актеров, задействованных в определенном фильме. Для создания запроса в этом методе в качестве входной переменной используется  <code>filmId</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public List getActorsByID(int filmId){
    List&lt;Actor&gt; actorList = null;
    try {
        org.hibernate.Transaction tx = session.beginTransaction();
        Query q = session.createQuery ("from Actor as actor where actor.actorId in (select filmActor.actor.actorId from FilmActor as filmActor where filmActor.film.filmId='" + filmId + "')");
        actorList = (List&lt;Actor&gt;) q.list();

    } catch (Exception e) {
        e.printStackTrace();
    }

    return actorList;
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Исправьте операторы импорта и сохраните измененные данные.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>После исправления параметров импорта выберите  <code>java.util.List</code>  и  <code>org.hibernate.Query</code> .</p>
</div>
</div>
<div class="sect2">
<h3 id="_добавление_вспомогательных_служебных_методов">Добавление вспомогательных служебных методов.</h3>
<div class="paragraph">
<p>Теперь перейдем к добавлению вспомогательных служебных методов, создающих запросы на основе входной переменной. Запросы можно проверить в редакторе запросов HQL.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте следующий метод для извлечения списка категорий согласно  <code>filmId</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public Category getCategoryByID(int filmId){
    List&lt;Category&gt; categoryList = null;
    try {
        org.hibernate.Transaction tx = session.beginTransaction();
        Query q = session.createQuery("from Category as category where category.categoryId in (select filmCat.category.categoryId from FilmCategory as filmCat where filmCat.film.filmId='" + filmId + "')");
        categoryList = (List&lt;Category&gt;) q.list();

    } catch (Exception e) {
        e.printStackTrace();
    }

    return categoryList.get(0);
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте следующий метод для извлечения отдельного фильма согласно  <code>filmId</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public Film getFilmByID(int filmId){

    Film film = null;

    try {
        org.hibernate.Transaction tx = session.beginTransaction();
        Query q = session.createQuery("from Film as film where film.filmId=" + filmId);
        film = (Film) q.uniqueResult();
    } catch (Exception e) {
        e.printStackTrace();
    }

    return film;
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте следующий метод для извлечения языка фильма согласно  <code>langId</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public String getLangByID(int langId){

    Language language = null;

    try {
        org.hibernate.Transaction tx = session.beginTransaction();
        Query q = session.createQuery("from Language as lang where lang.languageId=" + langId);
        language = (Language) q.uniqueResult();
    } catch (Exception e) {
        e.printStackTrace();
    }

    return language.getName();
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Сохраните изменения.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_управляемого_компонента_jsf">Создание управляемого компонента JSF</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом упражнении описано создание управляемого компонента JSF. Методы в управляемом компоненте используются для отображения данных на страницах JSF и для доступа к методам в служебном классе для извлечения записей. Спецификация JSF 2.0 позволяет использовать аннотации в классе компонента для определения класса как управляемого компонента JSF, указания объема и имени компонента.</p>
</div>
<div class="paragraph">
<p>Для создания управляемого компонента выполните следующие шаги.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши исходный узел пакета  <code>dvdrental</code>  и выберите команду "Создать &gt; Прочее".</p>
</li>
<li>
<p>Выберите "Управляемый компонент JSF" из категории "JavaServer Faces". Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Введите <strong>FilmController</strong> в качестве имени класса.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Имя управляемого компонента  <code>filmController</code>  используется в качестве значения для  <code>inputText</code>  и  <code>commandButton</code>  на странице JSF  <code>index.xhtml</code>  во время вызова методов в компоненте.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите <strong>dvdrental</strong> в качестве пакета.</p>
</li>
<li>
<p>Введите <strong>filmController</strong> в качестве имени, используемого для управляемого компонента.</p>
</li>
<li>
<p>Установите для параметра "Контекст" значение "Сеанс". Нажмите кнопку 'Готово'.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-newmanagedbean.png" alt="hib newmanagedbean">
</div>
<div class="title">Figure 13. Мастер создания новых управляемых компонентов JSF</div>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Готово" в среде IDE создается класс компонента, который затем открывается в редакторе. Среда IDE добавила аннотации  <code>@ManagedBean</code>  и  <code>@SessionScoped</code> .</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@ManagedBean
@SessionScoped
public class FilmController {

    /** Creates a new instance of FilmController */
    public FilmController() {
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> Обратите внимание, что имя управляемого компонента не указано явно. По умолчанию имя компонента совпадает с именем класса и начинается со строчной буквы. Если необходимо указать имя компонента, отличное от имени класса, можно указать это имя в качестве параметра примечаний  <code>@ManagedBean</code>  (например  <code>@ManagedBean(name="myBeanName")</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте к классу следующие поля (выделенные полужирным шрифтом).</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@ManagedBean
@SessionScoped
public class FilmController {
    *int startId;
    int endId;
    DataModel filmTitles;
    FilmHelper helper;
    private int recordCount = 1000;
    private int pageSize = 10;

    private Film current;
    private int selectedItemIndex;*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте следующий код (выделенный полужирным шрифтом) для создания экземпляра FilmController и извлечения фильмов.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    /** Creates a new instance of FilmController */
    public FilmController() {
        *helper = new FilmHelper();
        startId = 1;
        endId = 10;
    }

    public FilmController(int startId, int endId) {
        helper = new FilmHelper();
        this.startId = startId;
        this.endId = endId;
    }

    public Film getSelected() {
        if (current == null) {
            current = new Film();
            selectedItemIndex = -1;
        }
        return current;
    }


    public DataModel getFilmTitles() {
        if (filmTitles == null) {
            filmTitles = new ListDataModel(helper.getFilmTitles(startId, endId));
        }
        return filmTitles;
    }

    void recreateModel() {
        filmTitles = null;
    }*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте следующие методы, используемые для отображения таблицы и перехода к страницам.*    public boolean isHasNextPage() {
    if (endId + pageSize &#8656; recordCount) {
        return true;
    }
    return false;
}</p>
<div class="literalblock">
<div class="content">
<pre>public boolean isHasPreviousPage() {
    if (startId-pageSize &gt; 0) {
        return true;
    }
    return false;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public String next() {
    startId = endId+1;
    endId = endId + pageSize;
    recreateModel();
    return "index";
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public String previous() {
    startId = startId - pageSize;
    endId = endId - pageSize;
    recreateModel();
    return "index";
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public int getPageSize() {
    return pageSize;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    public String prepareView(){
        current = (Film) getFilmTitles().getRowData();
        return "browse";
    }
    public String prepareList(){
        recreateModel();
        return "index";
    }
*</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Методы, возвращающие "index" или "browse", запрашивают обработчик переходов JSF для попытки открытия страницы под именем  <code>index.xhtml</code>  или  <code>browse.xhtml</code> . Спецификация JSF 2.0 допускает использование правила неявных переходов в приложениях, использующих технологию Facelets. В таком приложении правила переходов не настраиваются в  <code>faces-config.xml</code> . Вместо этого обработчик переходов пытается найти подходящую страницу в приложении.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте следующие методы для обращения к служебному классу в целях извлечения дополнительных данных о фильме.*    public String getLanguage() {
    int langID = current.getLanguageByLanguageId().getLanguageId().intValue();
    String language = helper.getLangByID(langID);
    return language;
}</p>
<div class="literalblock">
<div class="content">
<pre>public String getActors() {
    List actors = helper.getActorsByID(current.getFilmId());
    StringBuffer totalCast = new StringBuffer();
    for (int i = 0; i &lt; actors.size(); i++) {
        Actor actor = (Actor) actors.get(i);
        totalCast.append(actor.getFirstName());
        totalCast.append(" ");
        totalCast.append(actor.getLastName());
        totalCast.append("  ");
    }
    return totalCast.toString();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public String getCategory() {
    Category category = helper.getCategoryByID(current.getFilmId());
    return  category.getName();
}*</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java"></code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Исправьте операторы импорта (CTRL+SHIFT+I) и сохраните измененные данные.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Можно использовать автозавершение кода в редакторе, упрощающее ввод кода.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_веб_страниц">Создание веб-страниц</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом упражнении будут созданы две веб-страницы для вывода данных. Необходимо изменить созданный средой IDE файл  <code>index.xhtml</code>  и добавить в него таблицу, выводящую фильмы из базы данных. Затем перейдем к созданию файла  <code>browse.xhtml</code>  для отображения подробных сведений о фильме при нажатии ссылки "Просмотр" в таблице. Также будет создан шаблон страницы JSF, используемый файлами  <code>index.xhtml</code>  и  <code>browse.xhtml</code> .</p>
</div>
<div class="paragraph">
<p>Дополнительные сведения об использовании JSF 2.0 и шаблонов Facelets приведены в разделе <a href="jsf20-intro.html">Введение в JavaServer Faces 2.0</a></p>
</div>
<div class="sect2">
<h3 id="_создание_template_xhtml">Создание  <code>template.xhtml</code></h3>
<div class="paragraph">
<p>Сначала необходимо создать шаблон JSF Facelets  <code>template.xhtml</code> , используемый в страницах  <code>index.xhtml</code>  и  <code>browse.xhtml</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните узел проекта DVDStore правой кнопкой мыши в окне "Проекты" и выберите команду "Создать" &gt; "Другое".</p>
</li>
<li>
<p>Выберите "Шаблон Facelets" в категории "JavaServer Faces". Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Введите <strong>template</strong> в качестве имени файла и выберите первый стиль формата CSS.</p>
</li>
<li>
<p>Нажмите кнопку 'Готово'.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Готово" файл  <code>template.xhtml</code>  открывается в редакторе. Шаблон содержит следующий код по умолчанию.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h:body&gt;

    &lt;div id="top" class="top"&gt;
        &lt;ui:insert name="top"&gt;Top&lt;/ui:insert&gt;
    &lt;/div&gt;

    &lt;div id="content" class="center_content"&gt;
        &lt;ui:insert name="content"&gt;Content&lt;/ui:insert&gt;
    &lt;/div&gt;

&lt;/h:body&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Измените элемент  <code>&lt;ui:insert&gt;</code>  для изменения созданного по умолчанию имени на "body".</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div id="content" class="center_content"&gt;
        &lt;ui:insert name="*body*"&gt;Content&lt;/ui:insert&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Сохраните изменения.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Содержимое, заключенное в элементе  <code>&lt;ui:define name="body"&gt;</code>  в файлах  <code>index.xhtml</code>  и  <code>browse.xhtml</code> , будет вставлено в местоположение, определенное в шаблоне с помощью  <code> &lt;ui:insert name="body"&gt;Content&lt;/ui:insert&gt;</code> .</p>
</div>
</div>
<div class="sect2">
<h3 id="_изменение_index_xhtml">Изменение  <code>index.xhtml</code></h3>
<div class="paragraph">
<p>При создании веб-приложения автоматически создается страница  <code>index.xhtml</code> . В этом упражнении страница будет изменена для отображения списка названий фильмов. Страница JSF вызывает методы в управляемом компоненте JSF "FilmController" для извлечения списка фильмов, а затем выводит таблицу с названиями и описаниями фильмов.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Разверните папку "Веб-страницы" в окне "Проекты" и откройте файл  <code>index.xhtml</code>  в редакторе.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Мастер создания нового проекта создает следующую страницу по умолчанию  <code>index.xhtml</code> .</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"&gt;
&lt;h:head&gt;
        &lt;title&gt;Facelet Title&lt;/title&gt;
    &lt;/h:head&gt;
    &lt;h:body&gt;
        Hello from Facelets
    &lt;/h:body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Измените страницу для использования элементов JSF  <code>&lt;ui:composition&gt;</code>  и  <code>&lt;ui:define&gt;</code>  и добавьте элемент  <code>&lt;h:form&gt;</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  *xmlns:ui="http://java.sun.com/jsf/facelets"&gt;
    &lt;ui:composition template="./template.xhtml"&gt;
        &lt;ui:define name="body"&gt;
            &lt;h:form&gt;

            &lt;/h:form&gt;
        &lt;/ui:define&gt;
    &lt;/ui:composition&gt;*
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>При вводе тегов среда IDE добавляет объявление библиотеки тегов  <code>xmlns:ui="http://java.sun.com/jsf/facelets"</code> .</p>
</div>
<div class="paragraph">
<p>Элементы  <code>&lt;ui:composition&gt;</code>  и  <code>&lt;ui:define&gt;</code>  используются в сочетании с созданным шаблоном страницы. Элемент  <code>&lt;ui:composition&gt;</code>  ссылается на местоположение шаблона, используемого этой страницей. Элемент  <code>&lt;ui:define&gt;</code>  ссылается на позицию в шаблоне, занятую вложенным кодом.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте следующие ссылки перехода, вызывающие методы  <code>next</code>  и  <code>previous</code>  в управляемом компоненте JSF.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">    &lt;ui:define name="body"&gt;
            &lt;h:form&gt;
                *&lt;h:commandLink action="#{filmController.previous}" value="Previous #{filmController.pageSize}" rendered="#{filmController.hasPreviousPage}"/&gt; 
                &lt;h:commandLink action="#{filmController.next}" value="Next #{filmController.pageSize}" rendered="#{filmController.hasNextPage}"/&gt; *
            &lt;/h:form&gt;
    &lt;/ui:define&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте следующий элемент (выделенный полужирным шрифтом)  <code>dataTable</code>  для создания таблицы, в которой будут отображены извлеченные элементы.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">            &lt;h:form styleClass="jsfcrud_list_form"&gt;
                &lt;h:commandLink action="#{filmController.previous}" value="Previous #{filmController.pageSize}" rendered="#{filmController.hasPreviousPage}"/&gt; 
                &lt;h:commandLink action="#{filmController.next}" value="Next #{filmController.pageSize}" rendered="#{filmController.hasNextPage}"/&gt; 
                *&lt;h:dataTable value="#{filmController.filmTitles}" var="item" border="0" cellpadding="2" cellspacing="0" rowClasses="jsfcrud_odd_row,jsfcrud_even_row" rules="all" style="border:solid 1px"&gt;
                    &lt;h:column&gt;
                        &lt;f:facet name="header"&gt;
                            &lt;h:outputText value="Title"/&gt;
                        &lt;/f:facet&gt;
                        &lt;h:outputText value="#{item.title}"/&gt;
                    &lt;/h:column&gt;
                    &lt;h:column&gt;
                        &lt;f:facet name="header"&gt;
                            &lt;h:outputText value="Description"/&gt;
                        &lt;/f:facet&gt;
                        &lt;h:outputText value="#{item.description}"/&gt;
                    &lt;/h:column&gt;
                    &lt;h:column&gt;
                        &lt;f:facet name="header"&gt;
                            &lt;h:outputText value=" "/&gt;
                        &lt;/f:facet&gt;
                        &lt;h:commandLink action="#{filmController.prepareView}" value="View"/&gt;
                    &lt;/h:column&gt;
                &lt;/h:dataTable&gt;
                &lt;br/&gt;*
            &lt;/h:form&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Сохраните изменения.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Теперь на начальной странице отображается список названий фильмов из базы данных. Каждая строка в таблице содержит ссылку "Просмотр", вызывающую метод  <code>prepareView</code>  в управляемом компоненте. Метод  <code>prepareView</code>  возвращает "browse" и открывает файл  <code>browse.xhtml</code> .</p>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> При вводе тега  <code>&lt;f:facet&gt;</code>  добавляется объявление библиотеки тегов  <code>xmlns:f="http://java.sun.com/jsf/core</code> . <strong>Убедитесь в том, что в файле объявлена библиотека тегов.</strong></p>
</div>
</div>
<div class="sect2">
<h3 id="_создание_browse_xhtml">Создание  <code>browse.xhtml</code></h3>
<div class="paragraph">
<p>Создадим страницу  <code>browse.xhtml</code>  для отображения дополнительных сведений о выбранном фильме. Для создания страницы на основе созданного шаблона JSF Facelets  <code>template.xhtml</code>  можно использовать мастер создания клиента шаблона Facelets .</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните узел проекта DVDStore правой кнопкой мыши в окне "Проекты" и выберите команду "Создать" &gt; "Другое".</p>
</li>
<li>
<p>Выберите "Клиент шаблона Facelets" в категории "JavaServer Faces". Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-faceletsclient.png" alt="hib faceletsclient">
</div>
<div class="title">Figure 14. Тип файла клиента шаблона Facelets в мастере создания файлов</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Введите <strong>browse</strong> в качестве имени файла.</p>
</li>
<li>
<p>Чтобы найти шаблон для страницы, нажмите кнопку 'Обзор'. В результате откроется диалоговое окно 'Обзор файлов'.</p>
</li>
<li>
<p>Разверните папку "Веб-страницы" и выберите  <code>template.xhtml</code> . Нажмите "Выбрать файл".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-browsetemplate.png" alt="hib browsetemplate">
</div>
<div class="title">Figure 15. Выберите шаблон в диалоговом окне 'Обзор файлов'</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите*&lt;ui:composition&gt;* в качестве созданного тега корня. Нажмите кнопку 'Готово'.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Готово" файл  <code>browse.xhtml</code>  открывается в редакторе со следующим кодом.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
    template="./template.xhtml"&gt;

    &lt;ui:define name="top"&gt;
        top
    &lt;/ui:define&gt;

    &lt;ui:define name="body"&gt;
        body
    &lt;/ui:define&gt;

&lt;/ui:composition&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>В новом файле указан файл  <code>template.xhtml</code> , а тег  <code>&lt;ui:define&gt;</code>  обладает свойством  <code>name="body"</code></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте следующий код (выделенный полужирным шрифтом) между тегами  <code>&lt;ui:define&gt;</code>  для создания формы и вызовите методы в управляемом компоненте "FilmController" для извлечения данных и заполнения формы.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
    template="./template.xhtml"
    *xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"*&gt;

        &lt;ui:define name="top"&gt;
            top
        &lt;/ui:define&gt;

        &lt;ui:define name="body"&gt;
        *
            &lt;h:form&gt;
                &lt;h:panelGrid columns="2"&gt;
                    &lt;h:outputText value="Title:"/&gt;
                    &lt;h:outputText value="#{filmController.selected.title}" title="Title"/&gt;
                    &lt;h:outputText value="Description"/&gt;
                    &lt;h:outputText value="#{filmController.selected.description}" title="Description"/&gt;
                    &lt;h:outputText value="Genre"/&gt;
                    &lt;h:outputText value="#{filmController.category}"/&gt;

                    &lt;h:outputText value="Cast"/&gt;
                    &lt;h:outputText value="#{filmController.actors}"/&gt;


                    &lt;h:outputText value="Film Length"/&gt;
                    &lt;h:outputText value="#{filmController.selected.length} min" title="Film Length"/&gt;

                    &lt;h:outputText value="Language"/&gt;
                    &lt;h:outputText value="#{filmController.language}" title="Film Length"/&gt;

                    &lt;h:outputText value="Release Year"/&gt;
                    &lt;h:outputText value="#{filmController.selected.releaseYear}" title="Release Year"&gt;
                        &lt;f:convertDateTime pattern="MM/dd/yyyy" /&gt;
                    &lt;/h:outputText&gt;
                    &lt;h:outputText value="Rental Duration"/&gt;
                    &lt;h:outputText value="#{filmController.selected.rentalDuration}" title="Rental DUration"/&gt;
                    &lt;h:outputText value="Rental Rate"/&gt;
                    &lt;h:outputText value="#{filmController.selected.rentalRate}" title="Rental Rate"/&gt;
                    &lt;h:outputText value="Replacement Cost"/&gt;
                    &lt;h:outputText value="#{filmController.selected.replacementCost}" title="Replacement Cost"/&gt;
                    &lt;h:outputText value="Rating"/&gt;
                    &lt;h:outputText value="#{filmController.selected.rating}" title="Rating"/&gt;
                    &lt;h:outputText value="Special Features"/&gt;
                    &lt;h:outputText value="#{filmController.selected.specialFeatures}" title="Special Features"/&gt;
                    &lt;h:outputText value="Last Update"/&gt;
                    &lt;h:outputText value="#{filmController.selected.lastUpdate}" title="Last Update"&gt;
                        &lt;f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" /&gt;
                    &lt;/h:outputText&gt;
                &lt;/h:panelGrid&gt;
                &lt;br/&gt;
                &lt;br/&gt;
                &lt;h:commandLink action="#{filmController.prepareList}" value="View All List"/&gt;
                &lt;br/&gt;
            &lt;/h:form&gt;
*
        &lt;/ui:define&gt;
    &lt;/ui:composition&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Файлы  <code>browse.xhtml</code>  и  <code>index.xhtml</code>  используют один и тот же шаблон страницы.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Сохраните изменения.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_выполнение_проекта">Выполнение проекта</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Создание базовых компонентов приложения завершено. Теперь можно запустить приложение для проверки правильности его работы.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните 'Запустить основной проект' на главной панели инструментов или щелкните правой кнопкой мыши узел приложения DVDStore в окне 'Проекты' и выберите 'Выполнить'.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Все измененные файлы сохраняются, приложение собирается и развертывается на сервере приложений. Открывается окно браузера, в котором открывается URL-адрес  <code><a href="http://localhost:8080/DVDStore/" class="bare">http://localhost:8080/DVDStore/</a></code> , где отображается список фильмов.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-browser1.png" alt="hib browser1">
</div>
<div class="title">Figure 16. Снимок браузера, в котором отображается список фильмов на странице индекса</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В браузере нажмите "Просмотр" для загрузки файла  <code>browse.xhtml</code>  для просмотра дополнительных сведений о фильме.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_загрузка_проекта_решения">Загрузка проекта решения</h3>
<div class="paragraph">
<p>Решение для данного учебного курса в виде проекта можно загрузить несколькими способами.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Загрузите <a href="https://netbeans.org/projects/samples/downloads/download/Samples/JavaEE/DVDStoreEE6.zip">архив завершенного проекта в формате zip</a>.</p>
</li>
<li>
<p>Выполните проверку исходных файлов проекта на выходе из примеров NetBeans, выполнив перечисленные ниже действия.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите в главном меню "Группа &gt; Subversion &gt; Проверить".</p>
</li>
<li>
<p>В диалоговом окне "Проверка" введите следующий URL-адрес репозитория:
 <code><a href="https://svn.netbeans.org/svn/samples~samples-source-code" class="bare">https://svn.netbeans.org/svn/samples~samples-source-code</a></code>
Нажмите кнопку "Далее".</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Нажмите кнопку "Обзор" для открытия диалогового окна "Обзор папок репозитория".</p>
</li>
<li>
<p>Разверните корневой узел и выберите <strong>samples/javaee/DVDStoreEE6</strong>. Нажмите кнопку "ОК".</p>
</li>
<li>
<p>Укажите локальную папку для исходных файлов.</p>
</li>
<li>
<p>Нажмите кнопку 'Готово'.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>После нажатия кнопки "Готово" среда IDE инициализирует локальную папку в качестве репозитория Subversion и выполняет проверку исходных файлов проекта на выходе.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните команду "Открыть проект" в диалоговом окне, которое появится после завершения проверки.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Примечания.</strong> Дополнительные сведения об установке Subversion см. в разделе <a href="../ide/subversion.html#settingUp">Настройка Subversion</a> в <a href="../ide/subversion.html">Руководстве по Subversion в IDE NetBeans</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_устранение_проблем">Устранение проблем</h3>
<div class="paragraph">
<p>Большинство проблем в приложении из учебного курса возникают по причине сложностей процесса обмена данными между сервером GlassFish Server Open Source Edition и сервером базы данных MySQL. Если приложение отображается некорректно или появляется сообщение об ошибке сервера, обратитесь к разделу <a href="mysql-webapp.html#troubleshoot">Устранение неполадок</a> руководства <a href="mysql-webapp.html">Создание простого веб-приложения с использованием базы данных MySQL</a> или к руководству <a href="../ide/mysql.html">Подключение к базе данных MySQL</a>.</p>
</div>
<div class="paragraph">
<p>Если загрузить и запустить проект решения, в окне 'Результаты' может отобразиться следующее сообщение об ошибке. Это может произойти при первом развертывании приложения, которое использует базу данных MySQL.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    SEVERE: JDBC Driver class not found: com.mysql.jdbc.Driver
    java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
	at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1509)

        [...]

	at java.lang.Thread.run(Thread.java:680)

    SEVERE: Initial SessionFactory creation failed.org.hibernate.HibernateException: JDBC Driver class not found: com.mysql.jdbc.Driver
    INFO: cleaning up connection pool: null
    INFO: Domain Pinged: stable.glassfish.org</code></pre>
</div>
</div>
<div class="paragraph">
<p>В окне браузера может отображаться ошибка  <code>java.lang.ExceptionInInitializerError</code>  и следующая трассировка стека.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    java.lang.ExceptionInInitializerError
	at dvdrental.HibernateUtil.&lt;clinit&gt;(HibernateUtil.java:28)
	...
    Caused by: org.hibernate.HibernateException: JDBC Driver class not found: com.mysql.jdbc.Driver

	...
    Caused by: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
	...</code></pre>
</div>
</div>
<div class="paragraph">
<p>В сообщении о результате указано, что не обнаружен драйвер JDBC для базы данных MySQL. Скорее всего, потребуется добавить файл драйвера MySQL JDBC в каталог установки сервера GlassFish. Чтобы убедиться, что драйвер действительно отсутствует, перейдите в каталог  <code><em>GLASSFISH-INSTALL</em>/glassfish/domains/domain1/lib</code>  на локальном компьютере (где <em>GLASSFISH-INSTALL</em> - каталог установки GlassFish). Если в каталоге  <code>domain1/lib</code>  отсутствует файл драйвера JDBC (например, <code>mysql-connector-java-5.1.13-bin.jar</code>), необходимо скопировать драйвер JDBC в этот каталог. Драйвер MySQL JDBC не добавляется в каталог установки GlassFish при установке сервера.</p>
</div>
<div class="paragraph">
<p>Чтобы добавить копию драйвера MySQL JDBC в каталог установки GlassFish, выполните следующие действия.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Загрузите драйвер <a href="http://dev.mysql.com/downloads/connector/j/">MySQL Connector/J JDBC</a>.</p>
</li>
<li>
<p>Распакуйте архив и скопируйте файл драйвера (например, <code>mysql-connector-java-5.1.13-bin.jar</code>) в подкаталог  <code>domain1/lib</code>  в каталоге установки GlassFish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Либо, если вы создаете приложение, использующее базу данных MySQL, в среде IDE, среда IDE при необходимости может автоматически скопировать включенный в комплект драйвер MySQL JDBC на сервер GlassFish во время развертывания проекта. Чтобы убедиться, что среда IDE скопирует необходимые драйверы JDBC, выберите Сервис &gt; Серверы в главном меню. В результате откроется диспетчер серверов. Проверьте, что для сервера GlassFish выбран параметр 'Разрешить развертывание драйверов JDBC'.</p>
</div>
<div class="paragraph">
<p>После создания и развертывания веб-приложения, использующего базу данных MySQL, перейдите в подкаталог <code>domain1/lib</code> в каталоге установки GlassFish. Этот каталог будет содержать файл драйвера JDBC.</p>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Using%20Hibernate%20in%20a%20Web%20Application">Отправить отзыв по этому учебному курсу</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_дополнительные_сведения">Дополнительные сведения</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="jsf20-support.html">Поддержка JSF 2.x в IDE NetBeans</a></p>
</li>
<li>
<p><a href="jsf20-intro.html">Введение в JavaServer Faces 2.x</a></p>
</li>
<li>
<p><a href="../../trails/java-ee.html">Учебная карта по Java EE и Java Web</a></p>
</li>
</ul>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/hibernate-webapp_ru.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
