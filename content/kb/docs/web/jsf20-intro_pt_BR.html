
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Introdução ao JavaServer Faces 2.x</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Introdução ao JavaServer Faces 2.x - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Introdução ao JavaServer Faces 2.x">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 12.6</h1>
            <p><a class="button success" href="/download/nb126/nb126.html">Download</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">Introdução ao JavaServer Faces 2.x</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/jsf20-intro_pt_BR.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#support">Adicionando Suporte JSF 2.x a uma Aplicação Web</a></li>
<li><a href="#managedBean">Criando um Bean Gerenciado</a>
<ul class="sectlevel2">
<li><a href="#usingManagedBean">Utilizando o Assistente de Bean Gerenciado</a></li>
<li><a href="#creatingConstructor">Criando um Construtor</a></li>
<li><a href="#addingProperties">Adicionando Propriedades</a></li>
</ul>
</li>
<li><a href="#wire">Conectando Beans Gerenciados às Páginas</a>
<ul class="sectlevel2">
<li><a href="#index">index.xhtml</a></li>
<li><a href="#response">response.xhtml</a></li>
</ul>
</li>
<li><a href="#template">Aplicando um Modelo de Facelets</a>
<ul class="sectlevel2">
<li><a href="#templateFile">Criando o Arquivo de Modelo de Facelets</a></li>
<li><a href="#templateClient">Criando Arquivos de Clientes de Modelo</a></li>
</ul>
</li>
<li><a href="#seealso">Consulte Também</a>
<ul class="sectlevel2">
<li><a href="#_tutoriais_e_artigos_netbeans">Tutoriais e Artigos NetBeans</a></li>
<li><a href="#_recursos_externos">Recursos Externos</a></li>
<li><a href="#_blogs">Blogs</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>O JavaServer Faces (JSF) é um framework de interface de usuário (IU) para aplicações Java Web. Foi projetado para facilitar significativamente a trabalhosa tarefa de escrever e manter os aplicações que são executadas em um servidor de aplicações Java e renderizar as IUs de volta a um cliente de destino. O JSF oferece facilidade de uso das seguintes formas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Facilita a construção de uma IU usando um conjunto de componentes de IU reutilizáveis</p>
</li>
<li>
<p>Simplifica a migração de dados da aplicação para a IU e provenientes dela</p>
</li>
<li>
<p>Ajuda a gerenciar o estado da IU nas solicitações do servidor</p>
</li>
<li>
<p>Oferece um modelo simples para conectar os eventos gerados pelo cliente ao código da aplicação do servidor</p>
</li>
<li>
<p>Permite personalizar os componentes de UI para que sejam facilmente construídos e reutilizados</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Para obter uma descrição mais completa do framework JSF, consulte o <a href="http://docs.oracle.com/javaee/7/tutorial/doc/jsf-develop.htm">Tutorial do Java EE 7, Capítulo 12: Desenvolvendo Tecnologia do JavaServer Faces</a>.</p>
</div>
<div class="paragraph">
<p>Este tutorial demonstra como você pode aplicar o suporte do JSF 2.x a uma aplicação Web utilizando o NetBeans IDE. Comece adicionando o suporte ao framework JSF 2.x a uma aplicação Web básica e continue para executar as seguintes tarefas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>crie um bean gerenciado pelo JSF para manipular os dados solicitados,</p>
</li>
<li>
<p>conecte o bean gerenciado às páginas Web da aplicação e</p>
</li>
<li>
<p>converta as páginas Web em arquivos de modelo de Facelets.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>O NetBeans IDE oferece, há muito tempo, suporte ao JavaServer Faces. A partir da release JSF 2.0 e Java EE 6, O NetBeans IDE oferece suporte para JSF 2.0 e JSF 2.1. Para obter mais informações, consulte <a href="jsf20-support.html">Suporte JSF 2.x no NetBeans IDE</a>.</p>
</div>
<div class="paragraph">
<p>Para concluir este tutorial, você precisa dos seguintes recursos e softwares.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Software ou Recurso</th>
<th class="tableblock halign-left valign-top">Versão Necessária</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pacote Java EE 7.2, 7.3, 7.4, 8.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">JDK (Java Development Kit)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7 ou 8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://glassfish.dev.java.net/">GlassFish Server</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open Source Edition 3.x ou 4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252FjsfDemo.zip">`jsfDemo` projeto de aplicação Web</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/d</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Observações:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>O pacote Java do NetBeans IDE também inclui o GlassFish Server, um servidor compatível com Java EE necessário para este tutorial.</p>
</li>
<li>
<p>Para comparar seu projeto a uma solução que funcione, faça o download do <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252FjsfDemoCompleted.zip">projeto de amostra completo</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="support">Adicionando Suporte JSF 2.x a uma Aplicação Web</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Comece abrindo o <a href="#requiredSoftware"><code>jsfDemo</code> projeto da aplicação Web</a> no IDE. Depois de abrir o projeto no IDE, você pode adicionar suporte ao framework utilizando a janela Propriedades do projeto.</p>
</div>
<div class="paragraph">
<p>O IDE também permite criar novos projetos com o suporte JSF 2.x. Para obter mais informações, consulte <a href="jsf20-support.html#creatingSupport">Criando um Novo Projeto com o Suporte a JSF 2.x</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique no botão ( <span class="image"><img src="images/open-project-btn.png" alt="open project btn"></span> ) para Abrir o Projeto na barra de ferramentas principal do IDE ou pressione Ctrl-Shift-O (⌘-Shift-O no Mac).</p>
</li>
<li>
<p>Na caixa de diálogo Abrir Projeto, navegue até o local do computador onde você armazenou o projeto descompactado do tutorial. Selecione-o e clique em Abrir Projeto para abri-lo no IDE.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Observação.</strong> Você será solicitado a resolver a referência às bibliotecas JUnit quando abrir o projeto NetBeans, caso não tiver instalado o plug-in JUnit quando instalou o IDE.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Execute o projeto para ver como ele é em um browser. Clique com o botão direito do mouse no nó <code>jsfDemo</code> do projeto, na janela Projetos e selecione Executar ou clique no botão ( <span class="image"><img src="images/run-project-btn.png" alt="run project btn"></span> ) Executar Projeto na barra de ferramentas principal. O projeto é encapsulado e implantado no GlassFish Server e o browser é aberto para exibir a página de boas-vindas (<code>index.xhtml</code>).</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/run-project.png" alt="run project">
</div>
<div class="title">Figure 1. Executar o projeto para exibi-lo em um browser</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique no botão Submeter. A página de resposta (<code>response.xhtml</code>) é exibida desta forma:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/response.png" alt="response">
</div>
<div class="title">Figure 2. A página de boas-vindas e de resposta, atualmente, são páginas estáticas</div>
</div>
<div class="paragraph">
<p>No momento, as páginas de boas-vindas e resposta são estáticas e, juntamente com o arquivo <code>stylesheet.css</code> e a imagem <code>duke.png</code>, são os únicos arquivos da aplicação acessíveis do browser.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na janela Projetos (Ctrl-1; ⌘-1 no Mac), clique com o botão direito do mouse no nó do projeto e escolha Propriedades para abrir a janela Propriedades do Projeto.</p>
</li>
<li>
<p>Selecione a categoria Frameworks e, em seguida e clique no botão Adicionar.</p>
</li>
<li>
<p>Selecione JavaServer Faces na caixa de diálogo Adicionar um Framework. Clique em OK.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-framework.png" alt="add framework">
</div>
<div class="title">Figure 3. Adicionar suporte JSF a um projeto existente</div>
</div>
<div class="paragraph">
<p>Após selecionar JavaServer Faces, diversas opções de configuração ficarão disponíveis. Na guia Bibliotecas, você pode especificar como o projeto acessa as bibliotecas JSF 2.x. A versão de JFS disponível dependerá da versão do IDE e do GlassFish Server. A opção default é utilizar as bibliotecas fornecidas com o servidor (o GlassFish Server). No entanto, o IDE também integra as bibliotecas JSF 2.x. (É possível selecionar a opção Bibliotecas Registradas se desejar que seu projeto as utilize.)</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/libraries-tab.png" alt="libraries tab">
</div>
<div class="title">Figure 4. Especificar o acesso a bibliotecas do JSF 2.x</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique na guia Configuração. É possível especificar como o servlet Faces é registrado no descritor de implantação do projeto. Também é possível indicar se você deseja utilizar Facelets ou páginas JSP no projeto.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jsf-configuration.png" alt="jsf configuration">
</div>
<div class="title">Figure 5. Especificar idioma preferencial e opções de servlet do Faces</div>
</div>
<div class="paragraph">
<p>Você também pode configurar facilmente seus projetos para usar vários conjuntos de componentes do JSF, na guia Componentes. Para usar um conjunto de componentes, é preciso fazer o download das bibliotecas necessárias e usar o Gerenciador de bibliotecas Ant para criar uma nova biblioteca contendo as bibliotecas do conjunto de componentes.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jsf-components.png" alt="jsf components">
</div>
<div class="title">Figure 6. Especificar idioma preferencial e opções de servlet do Faces</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique em OK para concluir as alterações e sair da janela Propriedades do Projeto.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Depois de adicionar o suporte JSF ao seu projeto, o descritor de implantação <code>web.xml</code> do projeto é modificado para que tenha a aparência a seguir: (Alterações em <strong>negrito</strong>.)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"&gt;
    *&lt;context-param&gt;
        &lt;param-name&gt;javax.faces.PROJECT_STAGE&lt;/param-name&gt;
        &lt;param-value&gt;Development&lt;/param-value&gt;
    &lt;/context-param&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;
        &lt;servlet-class&gt;javax.faces.webapp.FacesServlet&lt;/servlet-class&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/faces/*&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;*
    &lt;welcome-file-list&gt;
        &lt;welcome-file&gt;*faces/*index.xhtml&lt;/welcome-file&gt;
    &lt;/welcome-file-list&gt;
&lt;/web-app&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Importante:</strong> confirme se <code>web.xml</code> contém só uma entrada <code>&lt;welcome-file&gt;</code> e se a entrada contém &#8216;faces/&#8217; conforme mostrado no exemplo. Isso assegura que a página de boas-vindas do projeto (<code>index.xhtml</code>) passe pelo servlet do Faces antes de ser exibida no browser. Isso é necessário para renderizar apropriadamente os componentes da biblioteca de tags do Facelets.</p>
</div>
<div class="paragraph">
<p>O servlet do Faces é registrado no projeto e a página de boas-vindas <code>index.xhtml</code> passa pelo servlet do Faces quando é solicitada. Observe também que foi adicionada uma entrada no parâmetro de contexto <code>PROJECT_STAGE</code>. A definição desse parâmetro como &#8216;Desenvolvimento&#8217; fornece informações úteis quando a aplicação é depurado. Consulte  <a href="http://blogs.oracle.com/rlubke/entry/jsf_2_0_new_feature2">http://blogs.oracle.com/rlubke/entry/jsf_2_0_new_feature2</a> para obter mais informações.</p>
</div>
<div class="paragraph">
<p>É possível localizar as bibliotecas JSF expandindo o nó Bibliotecas do projeto na janela Projetos. Se você estiver usando as bibliotecas default incluídas com o GlassFish Server 3.1.2 ou GlassFish Server 4, este será o <code>javax.faces.jar</code> visível no nó GlassFish Server. (Se você estiver usando uma versão mais antiga do GlassFish, verá as bibliotecas <code>jsf-api.jar</code> e <code>jsf-impl.jar</code> em vez de <code>javax.faces.jar</code>.)</p>
</div>
<div class="paragraph">
<p>O suporte JSF 2.x do IDE inclui principalmente vários assistentes específicos do JSF e a funcionalidade especial fornecida pelo editor de Facelets. Você ira explorar esses recursos funcionais nas etapas a seguir. Para obter mais informações, consulte <a href="jsf20-support.html">Suporte JSF 2.x no NetBeans IDE</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="managedBean">Criando um Bean Gerenciado</h2>
<div class="sectionbody">
<div class="paragraph">
<p>É possível utilizar os beans gerenciados do JSF para processar dados do usuário e retê-los entre as solicitações. Um bean gerenciado é um <a href="http://en.wikipedia.org/wiki/Plain_Old_Java_Object">POJO</a> (Objeto Java Simples Antigo) que pode ser utilizado para armazenar dados e é gerenciado pelo contêiner (por exemplo, o GlassFish Server) utilizando o framework JSF.</p>
</div>
<div class="paragraph">
<p>Um POJO é essencialmente uma classe Java que contém um construtor público sem argumentos e está em conformidade com as convenções de nomenclatura do <a href="http://download.oracle.com/javase/tutorial/javabeans/">JavaBeans</a> para suas propriedades.</p>
</div>
<div class="paragraph">
<p>Ao observar a <a href="#staticPage">página estática</a> produzida ao executar o projeto, você precisará de um mecanismo que determine que o número inserido pelo usuário corresponde ao número selecionado atualmente e que ele retorne uma view apropriada para esse resultado. Utilize o <a href="jsf20-support.html#managedBean">assistente de Bean Gerenciado</a> para criar um bean gerenciado para essa finalidade. As páginas de Facelets que você criará na próxima seção precisarão acessar o número digitado pelo usuário e a resposta gerada. Para ativar esta opção, adicione as propriedades <code>userNumber</code> e <code>response</code> ao Bean gerenciado.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#usingManagedBean">Utilizando o Assistente de Bean Gerenciado</a></p>
</li>
<li>
<p><a href="#creatingConstructor">Criando um Construtor</a></p>
</li>
<li>
<p><a href="#addingProperties">Adicionando Propriedades</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="usingManagedBean">Utilizando o Assistente de Bean Gerenciado</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na janela Projetos, clique com o botão direito do mouse no nó do projeto <code>jsfDemo</code> e selecione Novo &gt; Bean Gerenciado pelo JSF. (Se o Bean Gerenciado não estiver listado, selecione Outros. Em seguida, selecione a opção Bean Gerenciado pelo JSF na categoria JavaServer Faces. Clique em Próximo.)</p>
</li>
<li>
<p>No assistente, informe o seguinte:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Nome da Classe:</strong> UserNumberBean</p>
</li>
<li>
<p><strong>Pacote:</strong> guessNumber</p>
</li>
<li>
<p><strong>Nome:</strong> UserNumberBean</p>
</li>
<li>
<p><strong>Escopo:</strong> Session</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/managed-bean.png" alt="managed bean">
</div>
<div class="title">Figure 7. Utilizar o Ben Gerenciado pelo JSF para criar um novo Bean gerenciado</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique em Finalizar. A classe <code>UserNumberBean</code> é gerada e aberta no editor. Observe as anotações a seguir (mostradas em <strong>negrito</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package guessNumber;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

/**
 *
 * @author nbuser
 */
*@ManagedBean(name="UserNumberBean")
@SessionScoped*
public class UserNumberBean {

    /** Creates a new instance of UserNumberBean */
    public UserNumberBean() {
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Como você está utilizando o JSF 2.x, você pode declarar todos os componentes específicos do JSF utilizando as anotações. Nas versões anteriores, era necessário declará-los no arquivo de configuração do Faces (<code>faces-config.xml</code>).</p>
</div>
<div class="paragraph">
<p><span class="tips">Para exibir o Javadoc para todas as anotações JSF 2.1, consulte <a href="http://javaserverfaces.java.net/nonav/docs/2.1/managed-bean-javadocs/index.html">Especificações de Anotações de Bean Gerenciado pelo Faces</a>.</span></p>
</div>
</div>
<div class="sect2">
<h3 id="creatingConstructor">Criando um Construtor</h3>
<div class="paragraph">
<p>O construtor <code>UserNumberBean</code> deve gerar um número aleatório entre 0 e 10 e armazená-lo em uma variável de instância. Isso forma parcialmente a lógica de negócios da aplicação.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Defina um construtor para a classe <code>UserNumberBean</code>. Insira o código a seguir (alterações exibidas em <strong>negrito</strong>).</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class UserNumberBean {

    *Integer randomInt;*

    /** Creates a new instance of UserNumberBean */
    public UserNumberBean() {
        *link:http://docs.oracle.com/javase/7/docs/api/java/util/Random.html[+Random+] randomGR = new Random();
        randomInt = new Integer(randomGR.link:http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#nextInt%28int%29[+nextInt+](10));
        System.out.println("Duke's number: " + randomInt);*
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>O código acima gera um número aleatório entre 0 e 10, e o número é exibido no log do servidor.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Corrigir importações. Para isso, clique no indicador de dica ( <span class="image"><img src="images/hint-icon.png" alt="hint icon"></span> ) exibido na margem esquerda do editor, em seguida, selecione a opção para importar <code>java.util.Random</code> para a classe.</p>
</li>
<li>
<p>Execute o projeto novamente (clique no botão ( <span class="image"><img src="images/run-project-btn.png" alt="run project btn"></span> ) Executar Projeto ou pressione F6; fn-F6 no Mac). Quando você executa seu projeto, o arquivo de log do servidor é aberto automaticamente na janela de Saída.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/output1.png" alt="output1">
</div>
<div class="title">Figure 8. O arquivo de log do servidor é aberto automaticamente na janela de Saída</div>
</div>
<div class="paragraph">
<p>Observe que você não vê o "`número do Duke: <code>" listado na saída (como deveria ser indicado no construtor). Um objeto `UserNumberBean</code> não foi criado porque o JSF utiliza <em>instanciação lenta</em> por default. Ou seja, os Beans em determinados escopos são criados e inicializados somente quando a aplicação precisa deles.</p>
</div>
<div class="paragraph">
<p>O <a href="http://javaserverfaces.java.net/nonav/docs/2.1/managed-bean-javadocs/index.html">Javadoc da anotação`@ManagedBean`</a> afirma:</p>
</div>
<div class="paragraph">
<p><em>Se o valor do atributo <code>eager()</code> for <code>true</code> e o valor de <code>managed-bean-scope</code> for "application", o runtime deverá instanciar essa classe quando a aplicação for iniciada. Essa instanciação e o armazenamento da instância devem ocorrer antes das solicitações serem processadas. Se _eager</em> não estiver especificado ou for <code>false</code>, ou se o <code>managed-bean-scope</code> for diferente de "application", ocorrerá a instanciação "lenta" default e o armazenamento com escopo do Bean gerenciado._</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Como o <code>UserNumberBean</code> está no escopo da sessão, implemente-o na interface <code>Serializable</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@ManagedBean(name="UserNumberBean")
@SessionScoped
public class UserNumberBean *implements Serializable* {</code></pre>
</div>
</div>
<div class="paragraph">
<p>Utilize o indicador de dica ( <span class="image"><img src="images/hint-icon.png" alt="hint icon"></span> ) para importar <code>java.io.Serializable</code> para a classe.</p>
</div>
</div>
<div class="sect2">
<h3 id="addingProperties">Adicionando Propriedades</h3>
<div class="paragraph">
<p>As páginas de Facelets que você criará na próxima seção precisarão acessar o número digitado pelo usuário e a resposta gerada. Para facilitar essa tarefa, adicione as propriedades <code>userNumber</code> e <code>response</code> à classe.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Comece declarando um <code>Integer</code> denominado <code>userNumber</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@ManagedBean(name="UserNumberBean")
@SessionScoped
public class UserNumberBean implements Serializable {

    Integer randomInt;
    *Integer userNumber;*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse no editor e selecione Inserir Código (Alt-Insert; Ctrl-I no Mac). Escolha Getter e Setter.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/getter-setter.png" alt="getter setter">
</div>
<div class="title">Figure 9. Utilizar o IDE para gerar métodos de acesso para as propriedades</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Selecione a opção <code>userNumber</code> : <code>Integer</code>. Clique em Gerar.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/generate-getters-setters.png" alt="generate getters setters">
</div>
<div class="title">Figure 10. Utilizar o IDE para gerar métodos de acesso para as propriedades</div>
</div>
<div class="paragraph">
<p>Observe que os métodos <code>getUserNumber()</code> e <code>setUserNumber(Integer userNumber)</code> são adicionados à classe.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Crie uma propriedade <code>response</code>. Declare uma <code>String</code> denominada <code>response</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@ManagedBean(name="UserNumberBean")
@SessionScoped
public class UserNumberBean implements Serializable {

    Integer randomInt;
    Integer userNumber;
    *String response;*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Crie um método getter para <code>response</code>. (Esta aplicação não precisará de um setter.) Você pode utilizar a janela pop-up Gerar código do IDE mostrada acima, na etapa 2, para gerar o código do modelo. Neste tutorial, basta colar o método a seguir na classe.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">public String getResponse() {
    if ((userNumber != null) &amp;amp;&amp;amp; (userNumber.link:http://download.oracle.com/javase/6/docs/api/java/lang/Integer.html#compareTo(java.lang.Integer)[+compareTo+](randomInt) == 0)) {

        //invalidate user session
        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext().getSession(false);
        session.invalidate();

        return "Yay! You got it!";
    } else {

        return "&lt;p&gt;Sorry, " + userNumber + " isn't it.&lt;/p&gt;"
                + "&lt;p&gt;Guess again...&lt;/p&gt;";
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>O método acima realiza duas funções:
1. Testa se o número informado pelo usuário (<code>userNumber</code>) é igual ao número aleatório gerado para a sessão (<code>randomInt</code>) e retorna uma resposta <code>String</code> apropriada.
2. Isso invalida a sessão do usuário se o usuário adivinhar o número correto (isto é, se <code>userNumber</code> for igual a <code>randomInt</code>). Isso é necessário para que um novo número seja gerado, caso o usuário queira jogar novamente.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse no editor e selecione Corrigir Importações (Alt-Shift-I; &amp;#8984-Shift-I no Mac). As instruções de importação são criadas automaticamente para:</p>
<div class="ulist">
<ul>
<li>
<p><code>javax.servlet.http.HttpSession</code></p>
</li>
<li>
<p><code>javax.faces.context.FacesContext</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Você pode pressionar Ctrl-Espaço nos itens do editor para chamar as sugestões da funcionalidade autocompletar código e o suporte da documentação. Pressione Ctrl-Espaço no <code>FacesContext</code> para exibir a descrição da classe do Javadoc.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/documentation-support.png" alt="documentation support">
</div>
<div class="title">Figure 11. Pressione Ctrl-Espaço para chamar a funcionalidade autocompletar código e o suporte à documentação</div>
</div>
<div class="paragraph">
<p>Clique no ícone ( <span class="image"><img src="images/web-browser-icon.png" alt="web browser icon"></span> ) do Web browser na janela da documentação para abrir o Javadoc em um Web browser externo.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="wire">Conectando Beans Gerenciados às Páginas</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Uma das principais finalidades do JSF é remover a necessidade de escrever códigos clichês para gerenciar <a href="#pojo">POJOs</a> e suas interações com views da aplicação. Você viu um exemplo disso na seção anterior, na qual o JSF instanciou um objeto <code>UserNumberBean</code> quando a aplicação foi executada. Este conceito é denominado <a href="http://martinfowler.com/articles/injection.html">Inversão de Controle</a> (IoC), que permite que o contêiner se responsabilize pelo gerenciamento de partes da aplicação que, do contrário, exigiriam que o desenvolvedor escrevesse códigos repetitivos.</p>
</div>
<div class="paragraph">
<p>Na seção anterior, você criou um bean gerenciado que gera um número aleatório entre 0 e 10. Você também criou duas propriedades, <code>userNumber</code> e <code>response</code>, que representam o número informado pelo usuário e a resposta a uma tentativa do usuário, respectivamente.</p>
</div>
<div class="paragraph">
<p>Nesta seção, você irá explorar como é possível utilizar <code>UserNumberBean</code> e suas propriedades em páginas Web. O JSF permite que você faça isso utilizando a sua linguagem de expressão (EL). A linguagem de expressão é utilizada para vincular os valores da propriedade aos componentes da IU do JSF contidos nas páginas Web da aplicação. Esta seção demonstra como você pode aproveitar a funcionalidade de navegação implícita do JSF 2.x para navegar entre o índice e as páginas de resposta.</p>
</div>
<div class="paragraph">
<p>O IDE oferece suporte a esta tarefa por meio das funcionalidades autocompletar código e documentação, que podem ser chamadas pressionando Ctrl-Espaço nos itens do editor.</p>
</div>
<div class="paragraph">
<p>Comece fazendo alterações em <code>index.xhtml</code> e, em seguida, em <code>response.xhtml</code>. Em ambas as páginas, substitua os elementos do form HTML por seus equivalente JSF, conforme estão definidos na <a href="http://javaserverfaces.java.net/nonav/docs/2.1/vdldocs/facelets/index.html">biblioteca de tags HTML JSF</a>. Em seguida, utilize a linguagem de expressão JSF para vincular os valores da propriedade aos componentes da IU selecionada.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#index">index.xhtml</a></p>
</li>
<li>
<p><a href="#response">response.xhtml</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="index">index.xhtml</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abra a página <code>index.xhtml</code> no editor. Clique duas vezes no nó <code>index.xhtml</code> da janela Projetos, ou pressione Alt-Shift-O para utilizar a caixa de diálogo Ir para Arquivo.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>As páginas de índice e resposta já contêm os componentes de IU do JSF necessários para este exercício. Basta eliminar os comentários existentes e fazer comentários nos elementos HTML que estiverem sendo usados.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Comente no elemento do form HTML. Para isso, realce o elemento de form HTML, como na imagem a seguir, e pressione Ctrl-/ (&amp;#8984-/ no Mac).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>*Observação: *para realçar, clique e arraste o elemento no editor com o mouse ou, utilizando o teclado, mantenha Shift pressionado e pressione as teclas de seta.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/comment-out.png" alt="comment out">
</div>
<div class="title">Figure 12. Realce o código, em seguida, pressione Ctrl-/ para comentá-lo</div>
</div>
<div class="paragraph">
<p>Utilize Ctrl-/ (&amp;#8984-/ no Mac) para alternar entre comentários no editor. É possível aplicar esse atalho do teclado em outros tipos de arquivo, como Java e CSS.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Elimine o comentário do componente do form HTML JSF. Realce o componente, conforme indicado na imagem a seguir, e pressione Ctrl-/ (&amp;#8984-/ no Mac).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Observação.</strong> Pode ser necessário pressionar Ctrl-/ duas vezes para remover os comentários do código.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/comment.png" alt="comment">
</div>
<div class="title">Figure 13. Realce o código comentado e, em seguida, pressione Ctrl-/ para eliminar o comentário</div>
</div>
<div class="paragraph">
<p>Após eliminar o comentário do componente de form HTML JSF, o editor indicará que as tags <code>&lt;h:form&gt;</code>, <code>&lt;h:inputText&gt;</code> e <code>&lt;h:commandButton&gt;</code> não foram declaradas.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/undeclared-component.png" alt="undeclared component">
</div>
<div class="title">Figure 14. O editor fornecerá mensagens de erro para os componentes não declarados</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Para declarar esses componentes, utilize a funcionalidade autocompletar código do IDE para adicionar o namespace da biblioteca de tag à tag <code>&lt;html&gt;</code> da página. Coloque o cursor em qualquer uma das tags não declaradas, pressione Alt-Enter e clique em Inserir para adicionar a biblioteca de tags sugerida. (Se houver várias opções, certifique-se de selecionar a tag exibida no editor antes de clicar em Inserir.) O namespace da biblioteca de tags HTML JSF será adicionado à tag <code>&lt;html&gt;</code> (mostrado em <strong>negrito</strong> abaixo), e os indicadores de erro desaparecerão.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Observação.</strong> Se o IDE não fornecer a opção de adicionar a biblioteca de tags, será necessário modificar manualmente o elemento  <code>&lt;html&gt;</code> .</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;html xmlns="http://www.w3.org/1999/xhtml"
      *xmlns:h="http://xmlns.jcp.org/jsf/html"*&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Utilize a linguagem de expressão JSF para vincular a propriedade <code>userNumber</code> do <code>UserNumberBean</code> ao componente <code>inputText</code>. O atributo <code>value</code> pode ser utilizado para especificar o valor atual do componente renderizado. Digite o código exibido em <strong>negrito</strong> abaixo.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;h:form&gt;
    &lt;h:inputText id="userNumber" size="2" maxlength="2" *value="#{UserNumberBean.userNumber}"* /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A linguagem de expressão JSF utiliza a sintaxe <code>#{}</code>. Dentro desses delimitadores, especifique o nome do bean gerenciado e a propriedade do Bean que deseja aplicar, separados por um ponto (<code>.</code>). Agora, quando os dados do form forem enviados ao servidor, o valor será salvo automaticamente na propriedade <code>userNumber</code> utilizando o setter da propriedade (<code>setUserNumber()</code>). Além disso, quando a página for solicitada e um valor para <code>userNumber</code> já tiver sido definido, o valor será exibido automaticamente no componente <code>inputText</code> renderizado. Para obter mais informações, consulte o <a href="http://docs.oracle.com/javaee/7/tutorial/doc/jsf-develop001.htm#BNAQP">Tutorial do Java EE 7: 12.1.2 Usando o EL para Beans Gerenciados de Referência</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Especifique o destino da solicitação chamada ao clicar no botão do form. Na versão HTML do form, você pode fazer isso utilizando o atributo <code>action</code> da tag <code>&lt;form&gt;</code>. Com o JSF, você pode utilizar o atributo <code>action</code> do <code>commandButton</code>. Além disso, devido à funcionalidade de navegação implícita do JSF 2.x, basta especificar apenas o nome do arquivo de destino, sem a sua extensão.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Digite o código exibido em <strong>negrito</strong> abaixo.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;h:form&gt;
    &lt;h:inputText id="userNumber" size="2" maxlength="2" value="#{UserNumberBean.userNumber}" /&gt;
    &lt;h:commandButton id="submit" value="submit" *action="response"* /&gt;
&lt;/h:form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>O runtime do JSF procura um arquivo denominado <code>response</code>. Ele supõe que a extensão do arquivo é a mesma utilizada pelo arquivo que originou a solicitação (<code>index*.xhtml*</code>) e procura o arquivo <code>response.xhtml</code> no mesmo diretório do arquivo de origem (por exemplo, webroot).</p>
</div>
<div class="paragraph">
<p>*Observação: *o JSF 2.x tem o objetivo de tornar as tarefas dos desenvolvedores muito mais fácil. Se você utilizou o JSF 1.2 para este projeto, você teria que declarar uma regra de navegação em um arquivo de configuração do Faces que tem a seguinte aparência:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;navigation-rule&gt;
    &lt;from-view-id&gt;/index.xhtml&lt;/from-view-id&gt;

    &lt;navigation-case&gt;
        &lt;from-outcome&gt;response&lt;/from-outcome&gt;
        &lt;to-view-id&gt;/response.xhtml&lt;/to-view-id&gt;
    &lt;/navigation-case&gt;
&lt;/navigation-rule&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>As etapas de 7 a 12 a seguir são opcionais. Se quiser construir o projeto rapidamente, passe para <a href="#response"><code>response.xhtml</code></a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Verifique se a expressão EL acima chama o método <code>setUserNumber()</code> quando a solicitação é processada. Para isso, utilize o depurador Java do IDE.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Alterne para a classe <code>UserNumberBean</code> (Pressione Ctrl-Tab e selecione o arquivo na lista.) Defina um ponto de interrupção na assinatura do método <code>setUserNumber()</code>. É possível fazer isso clicando na margem esquerda. É exibido um indicador vermelho, mostrando que um ponto de interrupção do método foi definido.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/set-breakpoint.png" alt="set breakpoint">
</div>
<div class="title">Figure 15. Clique no margem esquerda do editor para definir pontos de interrupção</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique no botão Depurar Projeto (<span class="image"><img src="images/breakpoint-btn.png" alt="breakpoint btn"></span>) na barra de ferramentas principal do IDE. A sessão de depuração é iniciada, e a página de boas-vindas do projeto é aberta no browser.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Observações.</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Talvez seja necessário confirmar a porta do servidor para depurar a aplicação.</p>
</li>
<li>
<p>Se uma caixa de diálogo Depurar Projeto for exibida, selecione a opção 'Java do Servidor' default e clique em Depurar.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>No browser, digite um número no form e clique no botão "Submeter".</p>
</li>
<li>
<p>Volte ao IDE e inspecione a classe <code>UserNumberBean</code>. O depurador será interrompido no método <code>setUserNumber()</code>.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/debugger-suspended.png" alt="debugger suspended">
</div>
<div class="title">Figure 16. O depurador é suspenso de acordo com pontos de interrupção</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abra a janela Variáveis do Depurador (Selecione Janela &gt; Depuração &gt; Variáveis, ou pressione Ctrl-Shift-1). Você verá os valores das variáveis no ponto em que o depurador foi suspenso.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/variables-window.png" alt="variables window">
</div>
<div class="title">Figure 17. Monitorar valores das variáveis utilizando a janela Variáveis do Depurador</div>
</div>
<div class="paragraph">
<p>Na imagem acima, o valor &#8216;4&#8217; foi fornecido à variável <code>userNumber</code> na assinatura <code>setUserNumber()</code>. (O número 4 foi inserido no form.) &#8216;this&#8217; se refere ao objeto <code>UserNumberBean</code> criado para a sessão do usuário. Abaixo dele, você verá que o valor da propriedade <code>userNumber</code> é atualmente <code>null</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na barra de ferramentas do Depurador, clique no botão Fazer Step Into (<span class="image"><img src="images/step-into-btn.png" alt="step into btn"></span>). O depurador executará a linha na qual ele está atualmente suspenso. A janela Variáveis se será atualiza, indicando as alterações na execução.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/variables-window2.png" alt="variables window2">
</div>
<div class="title">Figure 18. A janela de variáveis é atualizada ao percorrer o código</div>
</div>
<div class="paragraph">
<p>A propriedade <code>userNumber</code> agora está definida com o valor inserido no form.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Escolha Depurar &gt; Finalizar Sessão do Depurador (Shift-F5; Shift-Fn-F5 no Mac) no menu principal para interromper o depurador.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="response">response.xhtml</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abra a página <code>response.xhtml</code> no editor. Clique duas vezes no nó <code>response.xhtml</code> da janela Projetos ou pressione Alt-Shift-O para utilizar a caixa de diálogo Ir para Arquivo.</p>
</li>
<li>
<p>Comente no elemento do form HTML. Realce as tags HTML <code>&lt;form&gt;</code> de abertura e fechamento e o código entre elas, depois pressione Ctrl-/ (&amp;#8984-/ no Mac).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>*Observação: *Para realçar, clique e arraste o mouse no editor ou, utilizando o teclado, mantenha Shift pressionado e utilize as teclas de seta.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Elimine o comentário do componente do form HTML JSF. Realce as tags <code>&lt;h:form&gt;</code> de abertura e fechamento e o código entre elas, depois pressione Ctrl-/ (&amp;#8984-/ no Mac).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Neste estágio, o código entre as tags <code>&lt;body&gt;</code> terão a seguinte aparência:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;body&gt;
    &lt;div id="mainContainer"&gt;

        &lt;div id="left" class="subContainer greyBox"&gt;

            &lt;h4&gt;[ response here ]&lt;/h4&gt;

            &lt;!--&lt;form action="index.xhtml"&gt;

                &lt;input type="submit" id="backButton" value="Back"/&gt;

            &lt;/form&gt;--&gt;

            &lt;h:form&gt;

                &lt;h:commandButton id="backButton" value="Back" /&gt;

            &lt;/h:form&gt;

        &lt;/div&gt;

        &lt;div id="right" class="subContainer"&gt;

            &lt;img src="duke.png" alt="Duke waving" /&gt;
             &lt;!--&lt;h:graphicImage url="/duke.png" alt="Duke waving" /&gt;--&gt;

        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Após eliminar o comentário do componente de form HTML JSF, o editor indicará que as tags <code>&lt;h:form&gt;</code> e <code>&lt;h:commandButton&gt;</code> não foram declaradas.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Para declarar esses componentes, utilize a funcionalidade autocompletar código do IDE para adicionar o namespace da biblioteca de tag à tag <code>&lt;html&gt;</code> da página.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Utilize o suporte para a funcionalidade autocompletar código do editor para adicionar os namespaces JSF necessários ao arquivo. Quando você seleciona uma tag JSF ou Facelets por meio da funcionalidade autocompletar código, o namespace necessário é automaticamente adicionado ao elemento raiz do documento. Para obter mais informações, consulte <a href="jsf20-support.html#facelets">Suporte JSF 2.x no NetBeans IDE</a>.</p>
</div>
<div class="paragraph">
<p>Coloque o cursor em qualquer uma das tags não declaradas e pressione Ctrl-Espaço. As sugestões da funcionalidade autocompletar código e o suporte da documentação serão exibidos.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/code-completion2.png" alt="code completion2">
</div>
<div class="title">Figure 19. Pressione Ctrl-Espaço para chamar uma janela pop-up com as sugestões da funcionalidade autocompletar código e a documentação</div>
</div>
<div class="paragraph">
<p>Clique em Inserir. (Se houver várias opções, certifique-se de selecionar a tag exibida no editor antes de clicar em Inserir.) O namespace da biblioteca de tags HTML JSF será adicionado à tag <code>&lt;html&gt;</code> (mostrado em <strong>negrito</strong> abaixo), e os indicadores de erro desaparecerão.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;html xmlns="http://www.w3.org/1999/xhtml"
      *xmlns:h="http://xmlns.jcp.org/jsf/html"*&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Especifique o destino da solicitação que é chamada quando o usuário clica no botão do form. Você deseja definir o botão para que um usuário retorne à página de índice ao clicar nele. Para isso, utilize, o atributo <code>action</code> do <code>commandButton</code>. Digite o código exibido em <strong>negrito</strong>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;h:form&gt;

    &lt;h:commandButton id="backButton" value="Back" *action="index"* /&gt;

&lt;/h:form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Observação: *Ao digitar <code>action="index"</code>, você estará confiando na funcionalidade de navegação implícita do JSF. Quando um usuário clica no botão do form, o runtime do JSF procura um arquivo denominado <code>índice</code>. Ele supõe que a extensão do arquivo é a mesma extensão utilizada pelo arquivo que originou a solicitação (<code>response</strong>.xhtml*</code>) e procura o arquivo <code>index.xhtml</code> no mesmo diretório do arquivo de origem (por exemplo, webroot).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Substitua o texto estático "[ response here ]" pelo valor da propriedade <code>response</code> do <code>UserNumberBean</code>. Para isso, utilize a linguagem de expressão JSF. Digite (em <strong>negrito</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div id="left" class="subContainer greyBox"&gt;

    &lt;h4&gt;*&lt;h:outputText value="#{UserNumberBean.response}"/&gt;*&lt;/h4&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Execute o projeto (clique no botão ( <span class="image"><img src="images/run-project-btn.png" alt="run project btn"></span> ) Executar Projeto ou pressione F6; fn-F6 no Mac). Quando a página de boas-vindas for exibida no browser, informe um número e clique em <code>submeter</code>. Você verá a página de resposta com uma aparência semelhante à seguinte (contanto que você não adivinhe o número correto):</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/response2.png" alt="response2">
</div>
<div class="title">Figure 20. Exibir o status atual do projeto em um browser</div>
</div>
<div class="paragraph">
<p>Há duas coisas erradas no status atual da página de resposta:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>As tags html <code>&lt;p&gt;</code> são exibidas na mensagem de resposta.</p>
</li>
<li>
<p>O botão Voltar não está sendo exibido no lugar correto. (Compare-a à <a href="#originalVersion">versão original</a>.)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>As duas etapas a seguir corrigirão estes pontos, respectivamente.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Defina o atributo <code>escape</code> da tag <code>&lt;h:outputText&gt;</code> como <code>false</code>. Coloque o cursor entre <code>outputText</code> e <code>value</code>, insira um espaço e pressione Ctrl-Espaço para chamar a funcionalidade autocompletar código. Role para baixo para selecionar o atributo <code>escape</code> e inspecione a documentação.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/escape-false.png" alt="escape false">
</div>
<div class="title">Figure 21. Pressione Ctrl-Espaço para exibir possíveis valores do atributo e a documentação</div>
</div>
<div class="paragraph">
<p>Conforme indicado pela documentação, o valor <code>escape</code> está definido como <code>true</code> por default. Isso significa que os caracteres que normalmente são submetidos a parse como html serão incluídos na string, conforme ilustrado acima. Definir o valor como <code>false</code> permite aos caracteres que podem ser submetidos a parse como html sejam renderizados como tal.</p>
</div>
<div class="paragraph">
<p>Clique em Inserir e digite <code>false</code> como valor.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;h4&gt;&lt;h:outputText *escape="false"* value="#{UserNumberBean.response}"/&gt;&lt;/h4&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Defina, o atributo <code>prependId</code> da tag <code>&lt;h:form&gt;</code> como <code>false</code>. Coloque o cursor logo depois de &#8216;m&#8217; em <code>&lt;h:form&gt;</code>, insira um espaço, em seguida, pressione Ctrl-Espaço para chamar a funcionalidade autocompletar código. Role para baixo para selecionar o atributo <code>prependId</code> e inspecione a documentação. Clique em Inserir e digite <code>false</code> como valor.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;h:form *prependId="false"*&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>O JSF aplica IDs internos para manter o controle dos componentes da IU. No exemplo atual, se você inspecionar o código-fonte da página renderizada, você verá algo semelhante ao seguinte:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;form id="j_idt5" name="j_idt5" method="post" action="/jsfDemo/faces/response.xhtml" enctype="application/x-www-form-urlencoded"&gt;
&lt;input type="hidden" name="j_idt5" value="j_idt5" /&gt;
    &lt;input *id="j_idt5:backButton"* type="submit" name="j_idt5:backButton" value="Back" /&gt;
    &lt;input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="7464469350430442643:-8628336969383888926" autocomplete="off" /&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>O ID do elemento do form é <code>j_idt5</code> e esse ID é <em>precedido</em> pelo ID do botão Voltar incluído no form (mostrado em <strong>negrito</strong> acima). Como o botão Voltar depende da regra de estilo do <code>#backButton</code> (definido em <code>stylesheet.css</code>), essa regra se torna um empecilho quando o ID do JSF é inserido como prefixo. Isso pode ser evitado ao definir <code>prependId</code> como <code>false</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Execute o projeto novamente (clique no botão ( <span class="image"><img src="images/run-project-btn.png" alt="run project btn"></span> ) Executar Projeto ou pressione F6; fn-F6 no Mac). Insira um número na página de boas-vindas e clique em Submeter. A página de resposta agora exibe a mensagem de resposta sem as tags <code>&lt;p&gt;</code> e o botão Voltar está no lugar correto.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/response3.png" alt="response3">
</div>
<div class="title">Figure 22. Exibir o status atual do projeto em um browser</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique no botão Voltar. Como o valor atual da propriedade <code>userNumber</code> do <code>UserNumberBean</code> está vinculado ao componente JSF <code>inputText</code>, o número inserido anteriormente agora será exibido no campo de texto.</p>
</li>
<li>
<p>Inspecione o log do servidor na janela de Saída do IDE (Ctrl-4; &amp;#8984-4 no Mac) para determinar qual é o suposto número correto.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Se, por alguma razão, você não puder ver o log do servidor, você poderá abri-lo alternando para a janela Serviços (Ctrl-5; &amp;#8984-5 no Mac) e expandindo o nó Servidores. Em seguida, clique com o botão direito do mouse no GlassFish Server no qual o projeto está implantado e selecione Exibir Log do Servidor. Se você não conseguir ver o número no log do servidor, tente construir novamente a aplicação clicando com o botão direito do mouse no nó do projeto e selecionando Limpar e Construir Projeto.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Digite o número correto e clique em Submeter. A aplicação irá comparar a sua entrada com o número atualmente salvo e exibirá a mensagem apropriada.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/yay.png" alt="yay">
</div>
<div class="title">Figure 23. A resposta correta será exibida ao inserir o número correspondente</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique novamente no botão Voltar. Observe que o número inserido anteriormente não será mais exibido no campo de texto. Lembre-se de que o método <code>getResponse()</code> do <code>UserNumberBean</code> <a href="#getResponse">invalida a sessão atual do usuário</a> quando o número correto é descoberto.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="template">Aplicando um Modelo de Facelets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>O Facelets se tornou a tecnologia padrão de exibição para o JSF 2.x. O Facelets é um framework de modelos leve que suporta todos os componentes de IU do JSF e é usado para compilar e renderizar a árvore de componentes do JSF para views da aplicação. Também oferece suporte ao desenvolvimento quando ocorrem erros de EL, permitindo que você inspecione o rastreamento de pilha, a árvore de componentes e as variáveis com escopo.</p>
</div>
<div class="paragraph">
<p>Embora você talvez não tenha percebido, os arquivos <code>index.xhtml</code> e <code>response.xhtml</code> com os quais você está trabalhando até o momento no tutorial são páginas de Facelets. As páginas de Facelets utilizam a extensão <code>.xhtml</code> e, desde que você esteja trabalhando em um projeto JSF 2.x (As bibliotecas JSF 2.x incluem arquivos JAR Facelets.), as views poderão renderizar apropriadamente a árvore de componentes JSF.</p>
</div>
<div class="paragraph">
<p>O objetivo desta seção é familiarizar você com modelos de Facelets. Em projetos que contêm várias views, geralmente é mais vantajoso aplicar um arquivo de modelo que defina a estrutura e a aparência das diversas views. Quando você atende às solicitações, a aplicação insere dinamicamente o conteúdo preparado no arquivo de modelo e envia o resultado de volta ao cliente. Embora esse projeto contenha somente duas views (a página de boas-vindas e página de resposta), é fácil ver que elas contêm uma grande quantidade de conteúdo duplicado. É possível fatorar esse conteúdo duplicado em um modelo de Facelets e criar arquivos do cliente de modelo para manipular o conteúdo específico das páginas de boas-vindas e resposta.</p>
</div>
<div class="paragraph">
<p>O IDE oferece um <a href="jsf20-support.html#faceletsTemplate">assistente de Modelo de Facelets</a> para a criação de modelos de Facelets e um assistente de Cliente de modelo de Facelets para a criação de arquivos que dependem de um modelo. Esta seção utiliza esses assistentes.</p>
</div>
<div class="paragraph">
<p><strong>Observação:</strong> O IDE também oferece um assistente de Página JSF que permite criar páginas de Facelets individuais para seu projeto. Para obter mais informações, consulte <a href="jsf20-support.html#jsfPage">Suporte JSF 2.x no NetBeans IDE</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#templateFile">Criando o Arquivo de Modelo de Facelets</a></p>
</li>
<li>
<p><a href="#templateClient">Criando Arquivos Clientes de Modelo</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="templateFile">Criando o Arquivo de Modelo de Facelets</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Crie um arquivo de modelo de Facelets. Pressione Ctrl-N (&amp;#8984-N no Mac) para abrir o assistente Arquivo. Selecione a categoria JavaServer Faces e, em seguida, Modelo de Facelets. Clique em Próximo.</p>
</li>
<li>
<p>Digite <code>template</code> como nome do arquivo.</p>
</li>
<li>
<p>Escolha um dos oito estilos de layout e clique em Finalizar. (Você utilizará a folha de estilo existente, portanto, não importa qual estilo de layout você escolherá.)</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/layout-style.png" alt="layout style">
</div>
<div class="title">Figure 24. O assistente de Modelo de Facelets permite selecionar entre estilos de layout comuns</div>
</div>
<div class="paragraph">
<p>O assistente gera o arquivo <code>template.xhtml</code> e as folhas de estilo relacionadas com base na seleção feita, a seguir, coloca-as em uma pasta <code>resources</code> &gt; <code>css</code> dentro da raiz da Web do projeto.</p>
</div>
<div class="paragraph">
<p>Depois de concluir o assistente, o arquivo de modelo é aberto no editor. Para exibir o modelo em um browser, clique com o botão direito do mouse no Editor e selecione Exibir.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Examine a marcação do arquivo de modelo. Observe os pontos a seguir:</p>
<div class="ulist">
<ul>
<li>
<p>A biblioteca de tags <code>facelets</code> é declarada na tag <code>&lt;html&gt;</code> da página. A biblioteca de tags possui o prefixo <code>ui</code>.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;html xmlns="http://www.w3.org/1999/xhtml"
      *xmlns:ui="http://xmlns.jcp.org/jsf/facelets"*
      xmlns:h="http://xmlns.jcp.org/jsf/html"&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>A página de Facelets utiliza as tags <code>&lt;h:head&gt;</code> e <code>&lt;h:body&gt;</code> em vez das tags <code>&lt;head&gt;</code> e <code>&lt;body&gt;</code>. Quando você utiliza essas tags, o Facelets pode construir uma árvore de componentes que abrange toda a página.</p>
</li>
<li>
<p>A página faz referência às folhas de estilo que também foram criadas ao concluir o assistente.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;h:head&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /&gt;
    *&lt;link href="./resources/css/default.css" rel="stylesheet" type="text/css" /&gt;*
    *&lt;link href="./resources/css/cssLayout.css" rel="stylesheet" type="text/css" /&gt;*
    &lt;title&gt;Facelets Template&lt;/title&gt;
&lt;/h:head&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>As tags <code>&lt;ui:insert&gt;</code> são utilizadas no corpo da página em todos os compartimentos associados ao estilo de layout que você escolheu. Cada tag <code>&lt;ui:insert&gt;</code> possui um atributo <code>name</code> que identifica o compartimento. Por exemplo:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div id="top"&gt;
    *&lt;ui:insert name="top"&gt;Top&lt;/ui:insert&gt;*
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Examine novamente as páginas de <a href="#staticPage">boas-vindas</a> e de <a href="#responsePage">resposta</a>. O único conteúdo que é alterado nas duas páginas é o título e o texto contido no quadro cinza. O modelo, portanto, pode fornecer todo o conteúdo restante.</p>
</li>
<li>
<p>Substitua todo o conteúdo de seu arquivo de modelo pelo conteúdo abaixo.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;?xml version='1.0' encoding='UTF-8' ?&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"&gt;

    &lt;h:head&gt;
        &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /&gt;
        &lt;link href="css/stylesheet.css" rel="stylesheet" type="text/css" /&gt;

        &lt;title&gt;&lt;ui:insert name="title"&gt;Facelets Template&lt;/ui:insert&gt;&lt;/title&gt;
    &lt;/h:head&gt;

    &lt;h:body&gt;

        &lt;div id="left"&gt;
            &lt;ui:insert name="box"&gt;Box Content Here&lt;/ui:insert&gt;
        &lt;/div&gt;

    &lt;/h:body&gt;

&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>O código acima implementa as seguintes alterações:
* O arquivo <code>stylesheet.css</code> do projeto substitui as referências da folha de estilo do modelo criadas pelo assistente.
* Todas as tags <code>&lt;ui:insert&gt;</code> (e suas tags <code>&lt;div&gt;</code>) foram removidas, exceto uma denominada <code>box</code>.
* Um par de tags <code>&lt;ui:insert&gt;</code> foi colocado no título da página e foi denominado <code>title</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Copie o código relevante do arquivo <code>index.xhtml</code> ou <code>response.xhtml</code> para o modelo. Adicione o conteúdo mostrado em <strong>negrito</strong> abaixo das tags <code>&lt;h:body&gt;</code> do arquivo de modelo.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h:body&gt;
    *&lt;div id="mainContainer"&gt;*
        &lt;div id="left" *class="subContainer greyBox"*&gt;
            &lt;ui:insert name="box"&gt;Box Content Here&lt;/ui:insert&gt;
        &lt;/div&gt;
        *&lt;div id="right" class="subContainer"&gt;
            &lt;img src="duke.png" alt="Duke waving" /&gt;
        &lt;/div&gt;
    &lt;/div&gt;*
&lt;/h:body&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Execute o projeto. Quando a página de boas-vindas abrir no browser, modifique o URL para o seguinte:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">http://localhost:8080/jsfDemo/faces/template.xhtml</code></pre>
</div>
</div>
<div class="paragraph">
<p>O arquivo de modelo é exibido da seguinte forma:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/facelets-template.png" alt="facelets template">
</div>
<div class="title">Figure 25. Exibir o modelo de Facelets em um browser</div>
</div>
<div class="paragraph">
<p>O projeto agora contém um arquivo de modelo que fornece a aparência e a estrutura de todas as views. Agora é possível criar arquivos de clientes que chamem o modelo.</p>
</div>
</div>
<div class="sect2">
<h3 id="templateClient">Criando Arquivos de Clientes de Modelo</h3>
<div class="paragraph">
<p>Crie os arquivos de clientes de modelo das páginas de boas-vindas e resposta. Nomeie o arquivo de cliente de modelo da página de boas-vindas <code>greeting.xhtml</code>. Para a página de resposta, o arquivo será <code>response.xhtml</code>.</p>
</div>
<div class="sect3">
<h4 id="_greeting_xhtml">greeting.xhtml</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pressione Ctrl-N (⌘-N no Mac) para abrir o assistente de Novo Arquivo. Selecione a categoria JavaServer Faces e, em seguida, Cliente de Modelo de Facelets. Clique em Próximo.</p>
</li>
<li>
<p>Digite <code>greeting</code> como nome do arquivo.</p>
</li>
<li>
<p>Clique no botão Procurar ao lado do campo Modelo e, em seguida, utilize a caixa de diálogo exibida para navegar até o arquivo <code>template.xhtml</code> criado na seção anterior.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/template-client.png" alt="template client">
</div>
<div class="title">Figure 26. Assistente de Cliente de Modelo de Facelets</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique em Finalizar. O novo arquivo de cliente de modelo <code>greeting.xhtml</code> é gerado e exibido no editor.</p>
</li>
<li>
<p>Examine a marcação. Observe o conteúdo realçado em <strong>negrito</strong>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"&gt;

    &lt;body&gt;

        &lt;ui:composition *template="./template.xhtml"*&gt;

            &lt;ui:define *name="title"*&gt;
                title
            &lt;/ui:define&gt;

            &lt;ui:define *name="box"*&gt;
                box
            &lt;/ui:define&gt;

        &lt;/ui:composition&gt;

    &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>O arquivo de cliente de modelo faz referência a um modelo utilizando o atributo <code>template</code> da tag <code>&lt;ui:composition&gt;</code>. Como o modelo contém tags <code>&lt;ui:insert&gt;</code> de <code>title</code> e <code>box</code>, esse cliente de modelo contém as tags <code>&lt;ui:define&gt;</code> desses dois nomes. O conteúdo especificado entre as tags <code>&lt;ui:define&gt;</code> será o conteúdo inserido no modelo entre as tags <code>&lt;ui:insert&gt;</code> do nome correspondente.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Especifique <code>greeting</code> como o título do arquivo. Faça a seguinte alteração em <strong>negrito</strong>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;ui:define name="title"&gt;
    *Greeting*
&lt;/ui:define&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Alterne para o arquivo <code>index.xhtml</code> (pressione Ctrl-Tab) e copie o conteúdo que normalmente aparece no quadro cinza exibido na página renderizada. Em seguida, volte ao <code>greeting.xhtml</code> e cole-o no arquivo de cliente de modelo. (Alterações em <strong>negrito</strong>.)</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;ui:define name="box"&gt;
    *&lt;h4&gt;Hi, my name is Duke!&lt;/h4&gt;

    &lt;h5&gt;I'm thinking of a number

        &lt;br/&gt;
        between
        &lt;span class="highlight"&gt;0&lt;/span&gt; and
        &lt;span class="highlight"&gt;10&lt;/span&gt;.&lt;/h5&gt;

    &lt;h5&gt;Can you guess it?&lt;/h5&gt;

    &lt;h:form&gt;
        &lt;h:inputText size="2" maxlength="2" value="#{UserNumberBean.userNumber}" /&gt;
        &lt;h:commandButton id="submit" value="submit" action="response" /&gt;
    &lt;/h:form&gt;*
&lt;/ui:define&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Declare a biblioteca de tags HTML JSF do arquivo. Coloque o cursor em qualquer um das tags sinalizadas com um erro (qualquer tag com o prefixo <code>h&#8217;) e pressione Ctrl-Espaço. Em seguida, selecione a tag na lista de sugestões da funcionalidade autocompletar código. O namespace da biblioteca de tags será adicionado à tag `&lt;html&gt;</code> do arquivo (mostrado em <strong>negrito</strong> abaixo) e os indicadores de erro desaparecerão.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      *xmlns:h="http://xmlns.jcp.org/jsf/html"*&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Se você colocar o cursor depois de &#8216;m&#8217; no <code>&lt;h:form&gt;</code> e pressionar Ctrl-Espaço, o namespace será automaticamente adicionado ao arquivo. Se somente uma opção lógica estiver disponível ao pressionar Ctrl-Espaço, ela será imediatamente aplicada ao arquivo. As bibliotecas de tags JSF são automaticamente declaradas ao chamar a funcionalidade autocompletar código nas tags.</p>
</div>
</div>
<div class="sect3">
<h4 id="_response_xhtml">response.xhtml</h4>
<div class="paragraph">
<p>Como o projeto já contém um arquivo com o nome <code>response.xhtml</code>, e visto que você já sabe qual é a aparência do arquivo de cliente de modelo, modifique o arquivo <code>response.xhtml</code> para que se torne o arquivo de cliente de modelo. (Neste tutorial, basta copiar e colar o código fornecido.)</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abra <code>response.xhtml</code> no editor. (Se já estiver aberto, pressione Ctrl-Tab e selecione-o.) Substitua o conteúdo de todo o arquivo pelo código abaixo.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;?xml version='1.0' encoding='UTF-8' ?&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"&gt;

    &lt;body&gt;

        &lt;ui:composition template="./template.xhtml"&gt;

            &lt;ui:define name="title"&gt;
                Response
            &lt;/ui:define&gt;

            &lt;ui:define name="box"&gt;
                &lt;h4&gt;&lt;h:outputText escape="false" value="#{UserNumberBean.response}"/&gt;&lt;/h4&gt;

                &lt;h:form prependId="false"&gt;

                    &lt;h:commandButton id="backButton" value="Back" action="greeting" /&gt;

                &lt;/h:form&gt;
            &lt;/ui:define&gt;

        &lt;/ui:composition&gt;

    &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Observe que o arquivo é idêntico a <code>greeting.xhtml</code>, exceto pelo conteúdo especificado entre as tags <code>&lt;ui:define&gt;</code> de <code>title</code> e <code>box</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>No descritor de implantação <code>web.xml</code> do projeto, modifique a entrada do arquivo de boas-vindas para que <code>greeting.xhtml</code> seja a página exibida quando a aplicação for executada.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Na janela Projetos, clique duas vezes em Arquivos de Configuração &gt; <code>web.xml</code> para abri-lo no editor. Na guia Páginas, altere o campo Arquivos de Boas-Vindas para <code>faces/greeting.xhtml</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/welcome-files.png" alt="welcome files">
</div>
<div class="title">Figure 27. Alterar a entrada de Arquivos de Boas-Vindas no descritor de implantação</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Execute o projeto para ver como ele é em um browser. Pressione F6 (fn-F6 no Mac) ou clique no botão (<span class="image"><img src="images/run-project-btn.png" alt="run project btn"></span>) Executar Projeto na barra de ferramentas principal. O projeto será implantado no GlassFish Server e aberto em um browser.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Quando você utiliza o modelo de Facelets e os arquivos de clientes de modelo, a aplicação se comportará exatamente da mesma forma que antes. Fatorando o código duplicado nas páginas de boas-vindas e de resposta da aplicação, você consegue reduzir o tamanho da aplicação e eliminar a possibilidade de escrever mais códigos duplicados, caso mais páginas sejam adicionadas posteriormente. Isso pode tornar o desenvolvimento mais fácil e eficiente ao trabalhar em grandes projetos.</p>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Introduction%20to%20JSF%202.0">Enviar Feedback neste Tutorial</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="seealso">Consulte Também</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Para obter mais informações sobre o JSF 2.x, consulte os recursos a seguir:</p>
</div>
<div class="sect2">
<h3 id="_tutoriais_e_artigos_netbeans">Tutoriais e Artigos NetBeans</h3>
<div class="ulist">
<ul>
<li>
<p><a href="jsf20-support.html">Suporte a JSF 2.x no NetBeans IDE</a></p>
</li>
<li>
<p><a href="jsf20-crud.html">Gerando uma Aplicação CRUD JavaServer Faces 2.x Usando um Banco de Dados</a></p>
</li>
<li>
<p><a href="../../samples/scrum-toys.html">Scrum Toys: A Aplicação de Amostra Completa do JSF 2.0</a></p>
</li>
<li>
<p><a href="../javaee/javaee-gettingstarted.html">Conceitos Básicos sobre Aplicações do Java EE</a></p>
</li>
<li>
<p><a href="../../trails/java-ee.html">Trilha do Aprendizado do Java EE e Java Web</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_recursos_externos">Recursos Externos</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.oracle.com/technetwork/java/javaee/javaserverfaces-139869.html">Tecnologia JavaServer Faces</a> (homepage Oficial)</p>
</li>
<li>
<p><a href="http://jcp.org/aboutJava/communityprocess/final/jsr314/index.html">Especificação do JSR 314 para o JavaServer Faces 2.0</a></p>
</li>
<li>
<p><a href="http://docs.oracle.com/javaee/7/tutorial/doc/jsf-develop.htm">O Tutorial do Java EE 7, Capítulo 12: Desenvolvendo a Tecnologia JavaServer Faces</a></p>
</li>
<li>
<p><a href="http://javaserverfaces.dev.java.net/">Projeto Mojarra GlassFish</a> (Implementação oficial de referência do JSF 2.x)</p>
</li>
<li>
<p><a href="http://forums.oracle.com/forums/forum.jspa?forumID=982">Fóruns de Discussão OTN: JavaServer Faces</a></p>
</li>
<li>
<p><a href="http://www.jsfcentral.com/">Central do JSF</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_blogs">Blogs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.java.net/blogs/edburns/">Ed Burns</a></p>
</li>
<li>
<p><a href="http://www.java.net/blogs/driscoll/">Jim Driscoll</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/jsf20-intro_pt_BR.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1><a href="/about/index.html">About</a></h1>
                <ul>
                    <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb110/nb110.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2020 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
