
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Criando uma aplicação Web Simples Usando um Banco de Dados MySQL</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Criando uma aplicação Web Simples Usando um Banco de Dados MySQL - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Criando uma aplicação Web Simples Usando um Banco de Dados MySQL">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Criando uma aplicação Web Simples Usando um Banco de Dados MySQL</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/mysql-webapp_pt_BR.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#planStructure">Planejando a Estrutura</a>
<ul class="sectlevel2">
<li><a href="#_index_jsp">index.jsp</a></li>
</ul>
</li>
<li><a href="#_response_jsp">response.jsp</a></li>
<li><a href="#createProject">Criando um Novo Projeto</a></li>
<li><a href="#prepareInterface">Preparando a Interface da Web</a>
<ul class="sectlevel2">
<li><a href="#welcomePage">Configurando a página de boas-vindas</a></li>
<li><a href="#responsePage">Criando a página de resposta</a></li>
<li><a href="#stylesheet">Criando uma folha de estilo</a></li>
</ul>
</li>
<li><a href="#prepareCommunication">Preparando a Comunicação entre a Aplicação e o Banco de Dados</a>
<ul class="sectlevel2">
<li><a href="#setUpJDBC">Configurando uma fonte de dados JDBC e o pool de conexões</a></li>
<li><a href="#referenceDataSource">Fazendo referência à fonte de dados da aplicação</a></li>
<li><a href="#addJar">Adicionando o arquivo JAR do driver do banco de dados ao servidor</a></li>
</ul>
</li>
<li><a href="#addLogic">Adicionando Lógica Dinâmica</a>
<ul class="sectlevel2">
<li><a href="#addJSTL">Adicionando a biblioteca JSTL ao classpath do projeto</a></li>
<li><a href="#implementCode">Implementando o código JSTL</a></li>
</ul>
</li>
<li><a href="#run">Executando a Aplicação Pronta</a></li>
<li><a href="#troubleshoot">Solução de Problemas</a>
<ul class="sectlevel2">
<li><a href="#access">Existem recursos do banco de dados?</a></li>
<li><a href="#datasource">O pool de conexões e a fonte de dados existem no servidor?</a></li>
<li><a href="#driver">O driver MySQL Connector/J está acessível para o GlassFish Server?</a></li>
<li><a href="#password">O banco de dados é protegido por senha?</a></li>
<li><a href="#ping">As propriedades do pool de conexões estão definidas corretamente?</a></li>
</ul>
</li>
<li><a href="#seealso">Consulte Também</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Escrito por Troy Giunipero</p>
</div>
<div class="paragraph">
<p>Este documento descreve como criar uma aplicação Web simples que se conecta ao servidor de banco de dados MySQL. Também aborda algumas ideias e tecnologias básicas em desenvolvimento da Web, como <a href="http://www.oracle.com/technetwork/java/overview-138580.html">JavaServer Pages</a> (JSP), <a href="http://www.oracle.com/technetwork/java/index-jsp-135995.html">JavaServer Pages Standard Tag Library</a> (JSTL), a API <a href="http://docs.oracle.com/javase/tutorial/jdbc/overview/index.html">JDBC</a> (Java Database Connectivity) e duas camadas, arquitetura de servidor do cliente. Este tutorial está destinado a iniciantes com conhecimento básico em desenvolvimento Web e que gostariam de utilizar seu conhecimento com o banco de dados MySQL.</p>
</div>
<div class="paragraph">
<p>O <a href="http://www.mysql.com">MySQL</a> é um sistema de gerenciamento de banco de dados de código-fonte aberto popular geralmente utilizado em aplicações Web devido à sua velocidade, flexibilidade e confiabilidade. O MySQL emprega a linguagem SQL, ou <em>Structured Query Language</em>, para acessar e processar os dados contidos em bancos de dados.</p>
</div>
<div class="paragraph">
<p>Este tutorial é a continuação do tutorial <a href="../ide/mysql.html">Conectando a um Banco de Dados MySQL</a> e pressupõe que um banco de dados MySQL denominado <code>MyNewDatabase</code> já tenha sido criado, para o qual você registrou uma conexão no NetBeans IDE. Os dados de tabela usados nesse tutorial estão em <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJava%2520Web%252Fifpwafcad.sql">ifpwafcad.sql</a> e também são necessários para este tutorial. Este arquivo SQL cria duas tabelas, <code>Subject</code> e <code>Counselor</code>, a seguir, preenche-as com os dados de amostra. Se necessário, salve este arquivo no seu computador, a seguir, abra-o no NetBeans IDE e execute-o no banco de dados MySQL com o nome <code>MyNewDatabase</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-80-74-73.png" alt="netbeans stamp 80 74 73">
</div>
<div class="title">Figure 1. O conteúdo desta página se aplica ao NetBeans IDE 7.2, 7.3, 7.4 e 8.0</div>
</div>
<div class="paragraph">
<p><strong>Para seguir este tutorial, os recursos e softwares a seguir são necessários.</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Software ou Recurso</th>
<th class="tableblock halign-left valign-top">Versão Necessária</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pacote Java EE 7.2, 7.3, 7.4, 8.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">JDK (Java Development Kit)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">versão 7 ou 8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://dev.mysql.com/downloads/mysql/">Servidor de banco de dados MySQL</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Driver MySQL Connector/J JDBC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">versão 5.x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GlassFish Server Open Source Edition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.x ou 4.x</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Observações:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>O pacote de download Java do NetBeans IDE permite instalar o GlassFish Server. É necessário ter o GlassFish Server para trabalhar neste tutorial.</p>
</li>
<li>
<p>O <a href="http://dev.mysql.com/downloads/connector/j/">Driver MySQL Connector/J JDBC</a>, necessário para a comunicação entre as plataformas Java e o protocolo do banco de dados MySQL, está incluído no NetBeans IDE.</p>
</li>
<li>
<p>Se você precisar comparar seu projeto com uma solução que funciona, <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJava%2520Web%252FIFPWAFCAD.zip">faça download da aplicação de amostra</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="planStructure">Planejando a Estrutura</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Aplicações Web simples podem ser projetadas utilizando uma <em>arquitetura de duas camadas</em>, na qual um cliente se comunica diretamente com um servidor. Neste tutorial, uma aplicação Java Web se comunica diretamente com um banco de dados MySQL utilizando a API de Conectividade do Banco de Dados Java. Em essência, é o <a href="http://dev.mysql.com/downloads/connector/j/">Driver MySQL Connector/J JDBC</a> que permite a comunicação entre o código Java entendido pelo servidor de aplicações (o GlassFish Server) e qualquer conteúdo da SQL, a linguagem entendida pelo servidor do banco de dados (MySQL).</p>
</div>
<div class="paragraph">
<p>A aplicação construída neste tutorial envolve a criação de duas páginas JSP. Em cada uma dessas páginas, você utiliza HTML e CSS para implementar uma interface simples e aplica a tecnologia JSTL para executar a lógica que consulta diretamente o banco de dados e insere os dados recuperados nas duas páginas. As duas tabelas do banco de dados, <code>Subject</code> e <code>Counselor</code>, estão contidas no banco de dados MySQL, <code>MyNewDatabase</code>, criado com a conclusão do tutorial <a href="../ide/mysql.html">Conectando ao Banco de Dados MySQL</a>. Considere o cenário de duas camadas a seguir.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>image::images/ifpwafcad-structure.png[title="Estrutura de exemplo de uma aplicação Web de duas camadas"]</pre>
</div>
</div>
<div class="paragraph">
<p>A página de boas-vindas (<code>index.jsp</code>) apresenta ao usuário um form HTML simples. Quando um browser requer <code>index.jsp</code>, o código JSTL da página inicia uma consulta em <code>MyNewDatabase</code>. Ele recupera dados da tabela do banco de dados <code>Subject</code> e os insere na página, antes de eles serem enviados ao browser. Quando o usuário submete sua seleção no form HTML da página de boas-vindas, a submissão inicia uma solicitação para a página de resposta (<code>response.jsp</code>). Novamente, o código JSTL da página inicia uma consulta em <code>MyNewDatabase</code>. Neste momento, ele recupera dados das tabelas <code>Subject</code> e <code>Counselor</code> e os insere na página, permitindo que o usuário exiba os dados com base na sua seleção quando a página é retornada para o browser.</p>
</div>
<div class="paragraph">
<p>Para implementar o cenário descrito acima, desenvolva uma aplicação simples para uma organização fictícia com o nome IFPWAFCAD, Associação Internacional de Ex-Lutadores Profissionais para Aconselhamento e Desenvolvimento.</p>
</div>
<div class="sect2">
<h3 id="_index_jsp">index.jsp</h3>
<div class="imageblock">
<div class="content">
<img src="images/index-page.png" alt="index page">
</div>
<div class="title">Figure 2. index.jsp exibido em um browser</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_response_jsp">response.jsp</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="images/response-page.png" alt="response page">
</div>
<div class="title">Figure 3. response.jsp exibido em um browser</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="createProject">Criando um Novo Projeto</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Comece criando um novo projeto Java Web no IDE:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Escolha Arquivo &gt; Novo Projeto (Ctrl-Shift-N; &amp;#8984-Shift-N no Mac) no menu principal. Selecione a categoria Java Web e aplicação Web. Clique em Próximo.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/new-project.png" alt="new project">
</div>
<div class="title">Figure 4. Utilize o assistente de Novo Projeto do IDE para criar um novo projeto</div>
</div>
<div class="paragraph">
<p>O assistente de Novo Projeto permite criar uma aplicação Web vazia em um projeto IDE padrão. O projeto padrão utiliza um script de construção Ant gerado pelo IDE para compilar, implantar e executar a aplicação.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Em Nome do Projeto, digite <strong>IFPWAFCAD</strong>. Além disso, especifique o local para o projeto no computador. (Por default, o IDE coloca projetos em uma pasta`NetBeansProjects` localizada no diretório home). Clique em Próximo.</p>
</li>
<li>
<p>No painel Servidor e Configurações, especifique o GlassFish Server como o servidor que será utilizado para executar a aplicação.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>*Observação.*O GlassFish Server será exibido no campo drop-down Servidor se você tiver instalado a versão Java do <a href="https://netbeans.org/downloads/index.html">NetBeans IDE</a>. Como o GlassFish Server está incluído no download, ele é automaticamente registrado no IDE. Se você quiser utilizar um servidor diferente para esse projeto, clique no botão Adicionar localizado ao lado do campo drop-down Servidor e registre um servidor diferente no IDE. No entanto, trabalhar com servidores que não o GlassFish Server está além do escopo deste tutorial.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>No campo Versão do Java EE, selecione <strong>Java EE 5</strong>.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/server-settings.png" alt="server settings">
</div>
<div class="title">Figure 5. Especificar configurações de servidor no assistente de Nova Aplicação Web</div>
</div>
<div class="paragraph">
<p>Os projetos da Web Java EE 6 e Java EE 7 não exigem o uso do descritor de implantação <code>web.xml</code> e o modelo de projeto do NetBeans não inclui o arquivo <code>web.xml</code> em projetos Java EE 6 e Java EE 7. No entanto, este tutorial demonstra como declarar uma fonte de dados no descritor de implantação e não conta com nenhuma funcionalidade específico do Java EE 6 ou Java EE 7, portanto, é possível definir a versão do projeto como Java EE 5.</p>
</div>
<div class="paragraph">
<p><strong>Observação.</strong> Você pode igualmente definir a versão do projeto como Java EE 6 ou Java EE 7 e, em seguida, criar um descritor de implantação <code>web.xml</code>. (No assistente de Novo Arquivo, selecione a categoria Web e, em seguida, Descritor de Implantação Padrão).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique em Finalizar. O IDE cria um modelo de projeto para toda a aplicação e abre uma página JSP vazia (<code>index.jsp</code>) no editor. O arquivo <code>index.jsp</code> serve como página de boas-vindas da aplicação.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prepareInterface">Preparando a Interface da Web</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Comece preparando as páginas de boas-vindas (<code>index.jsp</code>) e de resposta (<code>response.jsp</code>). A página de boas-vindas implementa um form HTML que é utilizado para capturar dados do usuário. As duas páginas implementam uma tabela HTML para exibir os dados de forma estruturada. Nesta seção, você também criará uma folha de estilo que irá melhorar a aparência das duas páginas.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#welcomePage">Configurando a Página de Boas-Vindas</a></p>
</li>
<li>
<p><a href="#responsePage">Criando a página de resposta</a></p>
</li>
<li>
<p><a href="#stylesheet">Criando uma folha de estilo</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="welcomePage">Configurando a página de boas-vindas</h3>
<div class="paragraph">
<p>Confirme se <code>index.jsp</code> está aberto no editor. Se o arquivo ainda não estiver aberto, clique duas vezes no <code>index.jsp</code> no nó das Páginas Web no projeto IFPWAFCAD na janela Projetos.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>No editor, altere o texto entre as tags <code>&lt;title&gt;</code> para <code>Homepage da IFPWAFCAD</code>.</p>
</li>
<li>
<p>Altere o texto entre as tags <code>&lt;h1&gt;</code> para: <code>Bem-vindo à IFPWAFCAD, a Associação internacional de Ex-Lutadores Profissionais para Aconselhamento e Desenvolvimento!</code>.</p>
</li>
<li>
<p>Abra a Paleta do IDE selecionando Janela &gt; Paleta (Ctrl-Shift-8; &amp;#8984-Shift-8 no Mac) no menu principal. Coloque o ponteiro do mouse sobre o ícone Tabela na categoria HTML e observe que o snippet de código default do item é exibido.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/palette.png" alt="palette">
</div>
<div class="title">Figure 6. A Paleta exibe o snippet de código ao passar o mouse sobre um item</div>
</div>
<div class="paragraph">
<p><span class="tips">Você pode configurar a Paleta conforme desejar: clique com o botão direito do mouse na Paleta e selecione Mostrar Ícones Grandes e Ocultar Nomes dos Itens para que ela seja exibida como na imagem acima.</span></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Coloque o cursor em um ponto logo depois das tags <code>&lt;h1&gt;</code>. (É aí que você deseja implementar a nova tabela HTML.) Em seguida, na Paleta, clique duas vezes no ícone Tabela.</p>
</li>
<li>
<p>Na caixa de diálogo Inserir Tabela exibida, especifique os seguintes valores e clique em OK:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Linhas</strong>: 2</p>
</li>
<li>
<p><strong>Colunas</strong>: 1</p>
</li>
<li>
<p><strong>Tamanho da Borda</strong>: 0
O código da tabela HTML é gerado e adicionado a sua página.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Adicione o conteúdo a seguir ao cabeçalho da tabela e à célula da primeira linha da tabela (novo conteúdo mostrado em <strong>negrito</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;table border="0"&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;*IFPWAFCAD offers expert counseling in a wide range of fields.*&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
        &lt;tr&gt;
            &lt;td&gt;*To view the contact details of an IFPWAFCAD certified former
                professional wrestler in your area, select a subject below:*&lt;/td&gt;
        &lt;/tr&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na linha inferior da tabela, insira um form HTML. Para isso, coloque o cursor entre o segundo par de tags <code>&lt;td&gt;</code>, em seguida, clique duas vezes no ícone do form HTML ( <span class="image"><img src="images/html-form-icon.png" alt="html form icon"></span> ) na Paleta. Na caixa de diálogo Inserir Form, digite <code>response.jsp</code> no campo Texto da Ação e, em seguida, clique em OK.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/insert-form.png" alt="insert form">
</div>
<div class="title">Figure 7. Especificar as configurações do form na caixa de diálogo Inserir Form</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Digite o conteúdo a seguir entre as tags <code>&lt;form&gt;</code> (novo conteúdo mostrado em <strong>negrito</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;tr&gt;
    &lt;td&gt;
        &lt;form action="response.jsp"&gt;
            *&lt;strong&gt;Select a subject:&lt;/strong&gt;*
        &lt;/form&gt;
    &lt;/td&gt;
&lt;/tr&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pressione Enter para adicionar uma linha vazia após o conteúdo que você acabou de adicionar e, em seguida, clique duas vezes na Lista Drop-down na Paleta para abrir a caixa de diálogo Inserir Lista Drop-down.</p>
</li>
<li>
<p>Digite <code>subject_id</code> para o campo de texto Nome na caixa de diálogo Inserir Lista Drop-down e clique em OK. Observe que o snippet de código da lista drop-down será adicionado ao form.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>O número de opções da lista drop-down não é importante no momento. Mais adiante neste tutorial, você adicionará tags JSTL que irão gerar dinamicamente as opções com base nos dados coletados da tabela do banco de dados Subject.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione um item de botão Submeter ( <span class="image"><img src="images/submit-button.png" alt="submit button"></span> ) ao ponto bem ao lado da lista drop-down adicionada. É possível utilizar a Paleta para fazer isso ou chamar a funcionalidade autocompletar código do editor, conforme ilustrado na etapa anterior. Na caixa de diálogo Inserir Botão, digite <code>submit</code> nos campos de texto Nome e Label e clique em OK.</p>
</li>
<li>
<p>Para formatar seu código, clique com o botão direito do mouse no editor e selecione Formatar (Alt-Shift-F; Ctrl-Shift-F no Mac). Seu código será formatado automaticamente e deverá ter a aparência semelhante ao seguinte código:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;body&gt;
    &lt;h2&gt;Welcome to &lt;strong&gt;IFPWAFCAD&lt;/strong&gt;, the International Former
        Professional Wrestlers' Association for Counseling and Development!
    &lt;/h2&gt;

    &lt;table border="0"&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;IFPWAFCAD offers expert counseling in a wide range of fields.&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            &lt;tr&gt;
                &lt;td&gt;To view the contact details of an IFPWAFCAD certified former
                    professional wrestler in your area, select a subject below:&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;
                    &lt;form action="response.jsp"&gt;
                        &lt;strong&gt;Select a subject:&lt;/strong&gt;
                        &lt;select name="subject_id"&gt;
                            &lt;option&gt;&lt;/option&gt;
                        &lt;/select&gt;
                        &lt;input type="submit" value="submit" name="submit" /&gt;
                    &lt;/form&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
&lt;/body&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para exibir essa página em um browser, clique com o botão direito do mouse no editor e selecione Executar Arquivo (Shift-F6; Fn-Shift-F6 no Mac). Quando você fizer isso, a página JSP será automaticamente compilada e implantada no servidor. O IDE será aberto no browser default para exibir a página do seu local de implantação.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/browser-output.png" alt="browser output">
</div>
<div class="title">Figure 8. index.jsp exibido em um browser</div>
</div>
</div>
<div class="sect2">
<h3 id="responsePage">Criando a página de resposta</h3>
<div class="paragraph">
<p>Para preparar a interface de <code>response.jsp</code> é necessário primeiro criar o arquivo no projeto. Observe que a maioria do conteúdo exibido nesta página é gerado dinamicamente com a tecnologia JSP. Portanto, nas etapas a seguir você adicionará <em>espaços reservados</em> que posteriormente serão substituídos pelo código JSP.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse no nó do projeto IFPWAFCAD na janela Projetos e selecione Novo &gt; JSP. A caixa de diálogo Novo Arquivo JSF será aberta.</p>
</li>
<li>
<p>No campo Nome do Arquivo JSP, digite <code>response</code>. Observe que a opção Páginas Web está atualmente selecionada no campo Localização, o que significa que o arquivo será criado no diretório <code>web</code> do projeto. Trata-se do mesmo local em que se encontra a página de boas-vindas <code>index.jsp</code>.</p>
</li>
<li>
<p>Aceite as outras configurações default e clique em Finalizar. Um modelo, aberto no editor, será gerado para a nova página <code>response.jsp</code>. O novo nó JSP também será exibido abaixo de Páginas Web na janela Projetos.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/response-jsp-node.png" alt="response jsp node">
</div>
<div class="title">Figure 9. o nó response.jsp é exibido na janela Projetos</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>No editor, altere o título <code>IFPWAFCAD: {placeholder}</code>.</p>
</li>
<li>
<p>Remova a linha <code>&lt;h1&gt;Hello World!&lt;/h1&gt;</code> alinhe entre as tags <code>&lt;body&gt;</code> e copie e cole a tabela HTML a seguir no corpo da página:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;table border="0"&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th colspan="2"&gt;{placeholder}&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
        &lt;tr&gt;
            &lt;td&gt;&lt;strong&gt;Description: &lt;/strong&gt;&lt;/td&gt;
            &lt;td&gt;&lt;span style="font-size:smaller; font-style:italic;"&gt;{placeholder}&lt;/span&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;&lt;strong&gt;Counselor: &lt;/strong&gt;&lt;/td&gt;
            &lt;td&gt;{placeholder}
                &lt;br&gt;
                &lt;span style="font-size:smaller; font-style:italic;"&gt;
                member since: {placeholder}&lt;/span&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;&lt;strong&gt;Contact Details: &lt;/strong&gt;&lt;/td&gt;
            &lt;td&gt;&lt;strong&gt;email: &lt;/strong&gt;
                &lt;a href="mailto:{placeholder}"&gt;{placeholder}&lt;/a&gt;
                &lt;br&gt;&lt;strong&gt;phone: &lt;/strong&gt;{placeholder}
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para exibir essa página em um browser, clique com o botão direito do mouse no editor e selecione Executar Arquivo (Shift-F6; Fn-Shift-F6 no Mac). A página será compilada, implantada no GlassFish Server e aberta no browser default.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/browser-response.png" alt="browser response">
</div>
<div class="title">Figure 10. response.jsp exibido em um browser</div>
</div>
</div>
<div class="sect2">
<h3 id="stylesheet">Criando uma folha de estilo</h3>
<div class="paragraph">
<p>Crie uma folha de estilo simples para melhorar a view da interface da Web. Este tutorial pressupõe que você sabe como funciona as regras de estilo e como elas afetam os elementos HTML correspondentes encontrados em <code>index.jsp</code> e <code>response.jsp</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abra o assistente de Novo Projeto pressionando o botão ( <span class="image"><img src="images/new-file-btn.png" alt="new file btn"></span> ) Novo Arquivo na barra de ferramentas principal do IDE. Selecione a categoria Web, em seguida, Folha de Estilo em Cascata e clique em Próximo.</p>
</li>
<li>
<p>Digite <code>style</code> em Nome do Arquivo CSS e clique em Finalizar. O IDE cria um arquivo CSS vazio e o coloca no mesmo local do projeto onde estão <code>index.jsp</code> e <code>response.jsp</code>. Observe que agora será exibido um nó de <code>style.css</code> no projeto, na janela Projetos, e o arquivo será aberto no editor.</p>
</li>
<li>
<p>No editor, adicione o conteúdo a seguir ao arquivo <code>style.css</code>:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">body {
    font-family: Verdana, Arial, sans-serif;
    font-size: smaller;
    padding: 50px;
    color: #555;
}

h1 {
    text-align: left;
    letter-spacing: 6px;
    font-size: 1.4em;
    color: #be7429;
    font-weight: normal;
    width: 450px;
}

table {
    width: 580px;
    padding: 10px;
    background-color: #c5e7e0;
}

th {
    text-align: left;
    border-bottom: 1px solid;
}

td {
    padding: 10px;
}

a:link {
   color: #be7429;
   font-weight: normal;
   text-decoration: none;
}

a:link:hover {
   color: #be7429;
   font-weight: normal;
   text-decoration: underline;
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Vincule a folha de estilo a <code>index.jsp</code> e <code>response.jsp</code>. Nas duas páginas, adicione a linha a seguir entre as tags <code>&lt;head&gt;</code>:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;link rel="stylesheet" type="text/css" href="style.css"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="tips">Para navegar rapidamente entre arquivos que estão abertos no editor, pressione Ctrl-Tab e, em seguida, selecione o arquivo que deseja.</span></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prepareCommunication">Preparando a Comunicação entre a Aplicação e o Banco de Dados</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A maneira mais eficiente de implementar comunicação entre o servidor e o banco de dados é configurar um <em>pool de conexões</em> de banco de dados. A criação de uma nova conexão para cada solicitação do cliente pode ser muito demorada, especialmente em aplicações que recebem continuamente um grande número de solicitações. Para remediar isso, são criadas várias conexões que são mantidas em um pool de conexões. Todas as solicitações de entrada que requerem acesso à camada de dados da aplicação usam uma conexão já criada do pool. Igualmente, quando uma solicitação é concluída, a conexão é fechada, mas volta ao pool.</p>
</div>
<div class="paragraph">
<p>Depois de preparar a fonte de dados e o pool de conexões do servidor, é necessário instruir a aplicação a utilizar a fonte de dados. Isso normalmente é feito criando uma entrada no descritor de implantação <code>web.xml</code> da aplicação. Finalmente, você precisa garantir que o driver do banco de dados (Driver MySQL Connector/J JDBC) esteja acessível ao servidor.</p>
</div>
<div class="paragraph">
<p>*Importante: * Deste ponto em diante, você precisa assegurar-se de ter um banco de dados MySQL denominado <code>MyNewDatabase</code> configurado e com dados de amostra no <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJava%2520Web%252Fifpwafcad.sql">ifpwafcad.sql</a>. Este arquivo SQL cria duas tabelas, <code>Subject</code> e <code>Counselor</code>, a seguir, preenche-as com os dados de amostra. Se você ainda não tiver feito isso ou se precisar de ajuda, consulte <a href="../../docs/ide/mysql.html">Conectando a um Banco de Dados MySQL</a> antes de prosseguir com este tutorial.</p>
</div>
<div class="paragraph">
<p>Além disso, seu banco de dados precisa ser protegido por senha para criar uma fonte de dados e trabalhar com o GlassFish Server neste tutorial. Se você estiver utilizando a conta MySQL <code>root</code> sem senha, você poderá definir a senha usando um prompt de linha de comandos.</p>
</div>
<div class="paragraph">
<p>Este tutorial utiliza <code>nbuser</code> como senha de exemplo. Para definir sua senha como <code><em>nbuser</em></code>, navegue para o diretório <code>bin</code> de instalação do MySQL no prompt de linha de comandos e insira o seguinte:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">shell&gt; mysql -u root
mysql&gt; UPDATE mysql.user SET Password = PASSWORD('_nbuser_')
    -&gt;     WHERE User = 'root';
mysql&gt; FLUSH PRIVILEGES;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para mais informações, consulte o Manual de Referência MySQL oficial: <a href="http://dev.mysql.com/doc/refman/5.1/en/default-privileges.html">Proteção das Contas MySQL Iniciais</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#setUpJDBC">Configurando uma fonte de dados JDBC e um pool de conexões</a></p>
</li>
<li>
<p><a href="#referenceDataSource">Fazendo referência à fonte de dados da aplicação</a></p>
</li>
<li>
<p><a href="#addJar">Adicionando o arquivo JAR do driver do banco de dados ao servidor</a></p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="setUpJDBC">Configurando uma fonte de dados JDBC e o pool de conexões</h3>
<div class="paragraph">
<p>O GlassFish Server Open Source Edition contém bibliotecas de DBCP (Database Connection Pooling - Pool de Conexões do Banco de Dados) que oferecem a funcionalidade de pool de conexões de forma transparente a você como desenvolvedor. Para aproveitar esse recurso, é necessário configurar uma <em>fonte de dados</em> <a href="http://docs.oracle.com/javase/tutorial/jdbc/overview/index.html">JDBC</a> (Java Database Connectivity) para o servidor que a sua aplicação pode utilizar para o pool de conexões.</p>
</div>
<div class="paragraph">
<p>Para obter mais informações sobre a tecnologia JDBC, consulte <a href="http://docs.oracle.com/javase/tutorial/jdbc/basics/index.html">Tutoriais Java: Conceitos Básicos do JDBC</a>.</p>
</div>
<div class="paragraph">
<p>É possível configurar a fonte de dados diretamente na Console de Administração do GlassFish Server ou, conforme descrito a seguir, você pode declarar os recursos de que a aplicação precisa em um arquivo <code>glassfish-resources.xml</code>. Quando a aplicação é implantada, o servidor lê as declarações de recursos e cria os recursos necessários.</p>
</div>
<div class="paragraph">
<p>As etapas a seguir demonstram como declarar um pool de conexões e uma fonte de dados com base no pool de conexões. O assistente de Recursos JDBC do NetBeans permite executar as duas ações.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abra o assistente de Novo Projeto pressionando o botão ( <span class="image"><img src="images/new-file-btn.png" alt="new file btn"></span> ) Novo Arquivo na barra de ferramentas principal do IDE. Selecione a categoria do GlassFish Server e, em seguida, Recurso JDBC e clique em Próximo.</p>
</li>
<li>
<p>Na Etapa 2, Atributos Gerais, selecione a opção Criar Novo Pool de Conexões JDBC e, em seguida, no campo de texto Nome JNDI, digite <strong>jdbc/IFPWAFCAD</strong>.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jdbc-resource-wizard.png" alt="jdbc resource wizard">
</div>
<div class="title">Figure 11. Especificar definições da fonte de dados no assistente de Recurso JDBC</div>
</div>
<div class="paragraph">
<p><span class="tips">A fonte de dados JDBC conta com a <a href="http://www.oracle.com/technetwork/java/jndi/index.html">JNDI</a>, a Interface de Nomenclatura e Diretório Java. A API JNDI fornece uma maneira uniforme de as aplicações encontrarem e acessarem as fontes de dados. Para obter mais informações, consulte <a href="http://docs.oracle.com/javase/jndi/tutorial/">Tutorial do JNDI</a>.</span></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Como opção, adicione uma descrição para a fonte de dados. Por exemplo, digite: <code>Accesses the database that provides data for the IFPWAFCAD application</code>.</p>
</li>
<li>
<p>Clique em Próximo e em Próximo novamente para ignorar a etapa 3, Propriedades Adicionais.</p>
</li>
<li>
<p>Na Etapa 4, digite <strong>IfpwafcadPool</strong> para Nome do Pool de Conexões JDBC. Certifique-se de que a opção Extrair da Conexão Existente esteja selecionada e escolha <code>jdbc:mysql://localhost:3306/MyNewDatabase</code> na lista drop-down. Clique em Próximo.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jdbc-resource-wizard2.png" alt="jdbc resource wizard2">
</div>
<div class="title">Figure 12. Especificar definições do pool de conexões no assistente de Recurso JDBC</div>
</div>
<div class="paragraph">
<p>*Observação: *O assistente detecta as conexões de banco de dados que tenham sido configuradas no IDE. Portanto, neste ponto, é necessário que você já tenha criado uma conexão ao banco de dados <code>MyNewDatabase</code>. Você pode verificar as conexões que foram criadas ao abrir a janela Serviços (Ctrl-5; &amp;8984-5 no Mac) e procurar nós de conexão (<span class="image"><img src="images/connection-node-icon.png" alt="connection node icon"></span>) na categoria Bancos de Dados.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na Etapa 5, selecione <code>javax.sql.ConnectionPoolDataSource</code> na lista drop-down Tipo de Recurso.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Observe que o IDE extrai informações da conexão de banco de dados especificada na etapa anterior e define as propriedades de nome e valor para o novo pool de conexões.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jdbc-resource-wizard3.png" alt="jdbc resource wizard3">
</div>
<div class="title">Figure 13. Os valores default são baseados nas informações extraídas da conexão de banco de dados selecionada</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique em Finalizar. O assistente gera um arquivo <code>glassfish-resources.xml</code> que contém entradas para a fonte de dados e o pool de conexões especificados.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Na janela Projetos, você pode abrir o arquivo <code>glassfish-resources.xml</code> recém-criado em Recursos do Servidor e observar que, nas tags <code>&lt;resources&gt;</code>, foram declarados uma fonte de dados e um pool de conexões com os valores previamente especificados.</p>
</div>
<div class="paragraph">
<p>Para confirmar se uma nova fonte de dados e um pool de conexões estão realmente registrados no GlassFish Server, você pode implantar o projeto no servidor e, em seguida, localizar os recursos na janela Serviços do IDE:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na janela Projetos, clique com o botão direito do mouse no nó do projeto IFPWAFCAD e selecione Implantar. O servidor será iniciado caso não esteja em execução e o projeto será compilado e implantado nele.</p>
</li>
<li>
<p>Abra a janela Serviços (Ctrl-5; &amp;#8984-5 no Mac) e expanda os nós Servidores &gt; GlassFish &gt; Recursos &gt; JDBC &gt; Recursos JDBC e Pools de Conexões. Observe que a nova fonte de dados e o pool de conexões agora são exibidos:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/services-window-glassfish.png" alt="services window glassfish">
</div>
<div class="title">Figure 14. Nova fonte de dados e novo pool de conexões exibidos na janela Serviços</div>
</div>
</div>
<div class="sect2">
<h3 id="referenceDataSource">Fazendo referência à fonte de dados da aplicação</h3>
<div class="paragraph">
<p>É necessário fazer referência ao recurso JDBC que acabou de configurar na aplicação Web. Para isso, você pode criar uma entrada no descritor de implantação <code>web.xml</code> da aplicação.</p>
</div>
<div class="paragraph">
<p>Os descritores de implantação são arquivos de texto com base em XML que contêm informações que descrevem como uma aplicação deve ser implantada em um ambiente específico. São usados normalmente, por exemplo, para especificar os parâmetros de contexto da aplicação, os padrões de comportamento e as configurações de segurança, bem como mapeamentos para servlets, filtros e listeners.</p>
</div>
<div class="paragraph">
<p><strong>Observação.</strong> Se você tiver especificado o Java EE 6 ou Java EE 7 como a versão Java ao criar o projeto, será necessário criar o arquivo descritor de implantação selecionando Web &gt; Descritor de Implantação Padrão, no assistente de Novo Arquivo.</p>
</div>
<div class="paragraph">
<p>Execute as etapas a seguir para fazer referência à fonte de dados no descritor de implantação da aplicação.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na janela Projetos, expanda a pasta Arquivos de Configuração e clique duas vezes em <code>web.xml</code> para abrir o arquivo no editor.</p>
</li>
<li>
<p>Clique na guia Referências localizada na parte superior do editor.</p>
</li>
<li>
<p>Expanda o cabeçalho Referências de Recurso e clique em Adicionar para abrir a caixa de diálogo Adicionar Referência do Recurso.</p>
</li>
<li>
<p>Em Nome do Recurso, insira o nome do recurso que você forneceu ao configurar a fonte de dados no servidor acima (<code>jdbc/IFPWAFCAD</code>).</p>
</li>
<li>
<p>Digite <strong><code>javax.sql.ConnectionPoolDataSource</code></strong> no campo Tipo de Recurso. Clique em OK.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>O campo Descrição é opcional, mas você pode inserir uma descrição do recurso que seja legível pelo usuário, por exemplo, <code>Banco de Dados da aplicação IFPWAFCAD</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-resource-reference.png" alt="add resource reference">
</div>
<div class="title">Figure 15. Especificar as propriedades do recurso na caixa de diálogo Adicionar Referência de Recurso</div>
</div>
<div class="paragraph">
<p>O novo recurso agora será listado abaixo do cabeçalho Referências de Recursos.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Para verificar se o recurso foi adicionado ao arquivo <code>web.xml</code>, clique na guia Código-fonte localizada na parte superior do editor. Observe que as tags &lt;`resource-ref`&gt; a seguir agora estão incluídas.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;resource-ref&gt;
    &lt;description&gt;Database for IFPWAFCAD application&lt;/description&gt;
    &lt;res-ref-name&gt;jdbc/IFPWAFCAD&lt;/res-ref-name&gt;
    &lt;res-type&gt;javax.sql.ConnectionPoolDataSource&lt;/res-type&gt;
    &lt;res-auth&gt;Container&lt;/res-auth&gt;
    &lt;res-sharing-scope&gt;Shareable&lt;/res-sharing-scope&gt;
&lt;/resource-ref&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="addJar">Adicionando o arquivo JAR do driver do banco de dados ao servidor</h3>
<div class="paragraph">
<p>A adição do arquivo JAR do driver do banco de dados é outra etapa vital para permitir que o servidor se comunique com o banco de dados. Normalmente, seria necessário localizar o diretório de instalação do driver do banco de dados e copiar o arquivo <code>mysql-connector-java-5.1.6-bin.jar</code> do diretório raiz do driver na pasta da biblioteca do servidor que estiver utilizando. Felizmente, o gerenciamento de servidor do IDE é capaz de detectar na implantação se o arquivo JAR foi adicionado e, caso não tenha sido, ele o adiciona automaticamente.</p>
</div>
<div class="paragraph">
<p>Para demonstrá-lo, abra o gerenciador Servidores (Selecione Ferramentas &gt; Servidores). O IDE fornece uma opção de implantação do driver JDBC. Se a opção estiver ativada, ela iniciará uma verificação para determinar se serão necessários drivers para as aplicações implantadas do servidor. No caso do MySQL, se o driver for necessário e não for encontrado, o driver incorporado do IDE será implantado no local adequado do servidor.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Selecione Ferramentas &gt; Servidores para abrir o gerenciador Servidores. Selecione o servidores do GlassFish Server no painel esquerdo.</p>
</li>
<li>
<p>No painel principal, selecione a opção Ativar Implantação do Driver JDBC.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/servers-window.png" alt="servers window">
</div>
<div class="title">Figure 16. Opção Implantação de Driver JDBC ativa a implantação de driver automática</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Antes de fechar o gerenciador de Servidores, anote o caminho indicado no campo de texto da pasta Domínios. Ao se conectar ao GlassFish Server no IDE, você está se conectando, na realidade, a uma <em>instância</em> do servidor de aplicações. Cada instância executa aplicações em um domínio exclusivo e o campo Nome do Domínio indica o nome do domínio que o servidor está utilizando. Conforme mostrado na imagem acima, o arquivo JAR do driver deverá estar localizado em <code>domain1</code>, que é o domínio default criado na instalação do GlassFish Server.</p>
</li>
<li>
<p>Clique em Fechar para sair do gerenciador Servidores.</p>
</li>
<li>
<p>No computador, vá até o diretório de instalação do GlassFish Server e entre na subpasta <code>domínios</code> &gt; <code>domain1</code> &gt; <code>lib. `. Como você já deve ter implantando o projeto IFPWAFCAD no servidor, você verá o arquivo `mysql-connector-java-5.1.6-bin.jar</code>. Se você não vir o arquivo JAR do driver, execute a etapa a seguir.</p>
</li>
<li>
<p>Implante seu projeto no servidor. Na janela Projetos do IDE, selecione Implantar no menu de contexto do nó do projeto. Você pode ver o progresso na janela de Saída do IDE (Ctrl-4; &amp;#8984-4 no Mac). A saída indica que o driver MySQL está implantado no GlassFish Server.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/output-window.png" alt="output window">
</div>
<div class="title">Figure 17. A janela de Saída indica que o driver MySQL foi implantado</div>
</div>
<div class="paragraph">
<p>Agora, se você voltar à subpasta <code>domain1/lib</code> no computador, você verá que o arquivo <code>mysql-connector-java-5.1.6.x-bin.jar</code> foi adicionado automaticamente.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="addLogic">Adicionando Lógica Dinâmica</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Retornando aos espaços reservados <code>index.jsp</code> e <code>response.jsp</code> que você criou anteriormente no tutorial, você pode implementar o código JSTL que permite às páginas gerar conteúdo <em>dinamicamente</em>, ou seja, com base na entrada do usuário. Para isso, execute as três tarefas a seguir.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#addJSTL">Adicione a biblioteca JSTL ao classpath do projeto</a></p>
</li>
<li>
<p><a href="#implementCode">Implemente código JSTL</a></p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="addJSTL">Adicionando a biblioteca JSTL ao classpath do projeto</h3>
<div class="paragraph">
<p>É possível aplicar a <a href="http://www.oracle.com/technetwork/java/index-jsp-135995.html">JavaServer Pages Standard Tag Library</a> (JSTL) para acessar e exibir dados obtidos do banco de dados. O GlassFish Server inclui a biblioteca JSTL por default. Você pode verificar isso expandindo o nó do GlassFish Server no nó de Bibliotecas, na janela Projetos e procurando a biblioteca <code>javax.servlet.jsp.jstl.jar</code>. (As versões mais antigas do GlassFish server usam a biblioteca <code>jstl-impl.jar</code>.) Como as bibliotecas do GlassFish Server são, por default, adicionadas ao classpath do projeto, não é necessário executar nenhuma etapa dessa tarefa.</p>
</div>
<div class="paragraph">
<p>A JSTL fornece as seguintes quatro áreas básicas de funcionalidade.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>core</code>: tarefas comuns e estruturais, como iteradores e condicionais para manipular controle de fluxo</p>
</li>
<li>
<p><code>fmt</code>: formatação da mensagem de internacionalização e localização</p>
</li>
<li>
<p><code>sql</code>:acesso a banco de dados simples</p>
</li>
<li>
<p><code>xml</code>: manipulação de conteúdo XML</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Este tutorial foca no uso das bibliotecas de tags <code>core</code> e <code>sql</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="implementCode">Implementando o código JSTL</h3>
<div class="paragraph">
<p>Agora você pode implementar o código que recupera, de maneira dinâmica, os dados, exibindo-os para cada página. As duas páginas requerem que você implemente uma consulta SQL que utilize a fonte de dados criada anteriormente no tutorial.</p>
</div>
<div class="paragraph">
<p>O IDE fornece vários snippets de JSTL específicos do banco de dados que podem ser selecionados na Paleta (Ctrl-Shift-8; &amp;#8984-Shift-8 no Mac).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/palette-db.png" alt="palette db">
</div>
<div class="title">Figure 18. Selecione os snippets JSTL específicos do banco de dados na Paleta</div>
</div>
<div class="sect3">
<h4 id="_index_jsp_2">index.jsp</h4>
<div class="paragraph">
<p>Para exibir dinamicamente o conteúdo do form no <code>index.jsp</code>, você precisa acessar os `name`s da tabela de banco de dados Subject.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Coloque o mouse sobre o item Relatório do BD na Paleta.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/db-report.png" alt="db report">
</div>
<div class="title">Figure 19. Digite 'db' e pressione Ctrl-Espaço para acessar os snippets JSTL específicos do banco de dados</div>
</div>
<div class="paragraph">
<p>O item Relatório do BD utiliza a tag <code>&lt;sql:query&gt;</code> para criar uma consulta SQL e, em seguida, utiliza a tag <code>&lt;c:forEach&gt;</code> para passar pelo `resultset`da consulta e obter os dados recuperados.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Coloque o cursor acima da declaração <code>&lt;%@page &#8230;&#8203; %&gt;</code> (linha 7) e, em seguida, clique duas vezes no item Relatório do BD na Paleta. Na caixa de diálogo que é exibida, insira os seguintes detalhes:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Nome da Variável:</strong> <code>subjects</code></p>
</li>
<li>
<p><strong>Escopo:</strong> <code>page</code></p>
</li>
<li>
<p><strong>Fonte de Dados:</strong> <code>jdbc/IFPWAFCAD</code></p>
</li>
<li>
<p><strong>Instrução da Consulta:</strong> <code>SELECT subject_id, name FROM Subject</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/insert-db-report.png" alt="insert db report">
</div>
<div class="title">Figure 20. Use a caixa de diálogo Inserir Relatório do BD para especificar detalhes específicos da consulta</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique em OK. O conteúdo a seguir é gerado no arquivo <code>index.jsp</code>. (Novo conteúdo mostrado em <strong>negrito</strong>.)</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">*&lt;%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%&gt;
&lt;%@taglib prefix="sql" uri="http://java.sun.com/jsp/jstl/sql"%&gt;*
&lt;%--
    Document   : index
    Author     : nbuser
--%&gt;

*&lt;sql:query var="subjects" dataSource="jdbc/IFPWAFCAD"&gt;
    SELECT subject_id, name FROM Subject
&lt;/sql:query&gt;

&lt;table border="1"&gt;
    &lt;!-- column headers --&gt;
    &lt;tr&gt;
    &lt;c:forEach var="columnName" items="${subjects.columnNames}"&gt;
        &lt;th&gt;&lt;c:out value="${columnName}"/&gt;&lt;/th&gt;
    &lt;/c:forEach&gt;
&lt;/tr&gt;
&lt;!-- column data --&gt;
&lt;c:forEach var="row" items="${subjects.rowsByIndex}"&gt;
    &lt;tr&gt;
    &lt;c:forEach var="column" items="${row}"&gt;
        &lt;td&gt;&lt;c:out value="${column}"/&gt;&lt;/td&gt;
    &lt;/c:forEach&gt;
    &lt;/tr&gt;
&lt;/c:forEach&gt;
&lt;/table&gt;*

&lt;%@page contentType="text/html" pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Observe que o IDE adicionou automaticamente as diretivas <code>taglib</code> necessárias para as tags JSTL utilizadas no conteúdo gerado <code>&lt;sql:query&gt;</code> e <code>&lt;c:forEach&gt;</code>). Uma diretiva <code>taglib</code> declara que a página do JSP utiliza tags personalizadas (por exemplo, JSTL), nomeia a biblioteca de tags que as define e especifica seu prefixo de tag.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Execute o projeto para ver como ele é exibido no browser. Clique com o botão direito do mouse no nó na janela Projetos e selecione Executar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Quando você seleciona Executar, o IDE implanta o projeto no GlassFish Server, a página de índice é compilada em um servlet e a página de boas-vindas é aberta no browser default. O código gerado do item Relatório de BD cria a tabela a seguir na página de boas-vindas.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/db-report-table.png" alt="db report table">
</div>
<div class="title">Figure 21. Utilize o Relatório de BD para criar protótipos dos dados da tabela do banco de dados</div>
</div>
<div class="paragraph">
<p>Como podemos ver, o item Relatório de BD permite testar rapidamente a conexão do banco de dados e permite, também, exibir os dados da tabela do banco de dados no browser. Isso pode ser particularmente útil ao se fazer protótipos.</p>
</div>
<div class="paragraph">
<p>As etapas a seguir demonstram como integrar o código gerado à lista drop-down HTML criada anteriormente no tutorial.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Examine os dados da coluna no código gerado. Duas tags <code>&lt;c:forEach&gt;</code> são utilizadas, uma está aninhada dentro da outra. Isso faz com que o contêiner JSP (por exemplo, o GlassFish Server) execute um loop em todas as linhas da tabela e, para cada linha, ele executa um loop em todas as colunas. Dessa maneira, os dados da tabela inteira são exibidos.</p>
</li>
<li>
<p>Integre as tags <code>&lt;c:forEach&gt;</code> no form HTML, conforme a seguir. O valor de cada item se torna <code>subject_id</code> e o texto de saída se torna o <code>name</code>, conforme registrado no banco de dados. (As alterações são exibidas em <strong>negrito</strong>).</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;form action="response.jsp"&gt;
    &lt;strong&gt;Select a subject:&lt;/strong&gt;
    &lt;select name="subject_id"&gt;
        *&lt;c:forEach var="row" items="${subjects.rowsByIndex}"&gt;
            &lt;c:forEach var="column" items="${row}"&gt;*
                &lt;option *value="&lt;c:out value="${column}"/&gt;"*&gt;*&lt;c:out value="${column}"/&gt;*&lt;/option&gt;
            *&lt;/c:forEach&gt;
        &lt;/c:forEach&gt;*
    &lt;/select&gt;
    &lt;input type="submit" value="submit" name="submit" /&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="tips">Uma maneira alternativa e mais simples de integrar as tags <code>&lt;c:forEach&gt;</code> ao form HTML seria a seguinte:</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;form action="response.jsp"&gt;
    &lt;strong&gt;Select a subject:&lt;/strong&gt;
    &lt;select name="subject_id"&gt;
        *&lt;c:forEach var="row" items="${subjects.rows}"&gt;*
            &lt;option *value="${row.subject_id}"*&gt;*${row.name}*&lt;/option&gt;
        *&lt;/c:forEach&gt;*
    &lt;/select&gt;
    &lt;input type="submit" value="submit" name="submit" /&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Em qualquer um dos casos, as tags <code>&lt;c:forEach&gt;</code> executam loop em todos os valores de <code>subject_id</code> e <code>name</code> da consulta SQL e inserem cada par nas tags <code>&lt;option&gt;</code> HTML. Dessa maneira, a lista drop-down do form é preenchida com dados.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Delete a tabela que foi gerada a partir do item Relatório de BD. (A exclusão é mostrada a seguir como <strong><span class="line-through">texto tachado</span></strong>.)</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%&gt;
&lt;%@taglib prefix="sql" uri="http://java.sun.com/jsp/jstl/sql"%&gt;
&lt;%--
    Document   : index
    Created on : Dec 22, 2009, 7:39:49 PM
    Author     : nbuser
--%&gt;

&lt;sql:query var="subjects" dataSource="jdbc/IFPWAFCAD"&gt;
    SELECT subject_id, name FROM Subject
&lt;/sql:query&gt;

*[.line-through]#&lt;table border="1"&gt;
    &lt;!-- column headers --&gt;
    &lt;tr&gt;
    &lt;c:forEach var="columnName" items="${subjects.columnNames}"&gt;
        &lt;th&gt;&lt;c:out value="${columnName}"/&gt;&lt;/th&gt;
    &lt;/c:forEach&gt;
&lt;/tr&gt;
&lt;!-- column data --&gt;
&lt;c:forEach var="row" items="${subjects.rowsByIndex}"&gt;
    &lt;tr&gt;
    &lt;c:forEach var="column" items="${row}"&gt;
        &lt;td&gt;&lt;c:out value="${column}"/&gt;&lt;/td&gt;
    &lt;/c:forEach&gt;
    &lt;/tr&gt;
&lt;/c:forEach&gt;
&lt;/table&gt;#*

&lt;%@page contentType="text/html" pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd"&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Salve as alterações (Ctrl-S; &amp;#8984-S no Mac).</p>
</li>
<li>
<p>Atualize a página de boas-vindas do projeto no browser.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note que a lista drop-down do browser contém, agora, nomes de assuntos que foram recuperados do banco de dados.</p>
</div>
<div class="paragraph">
<p>Você não precisa reimplantar seu projeto porque a opção de compilação ao salvar está ativada para seu projeto, por default. Isso significa que, quando você modifica e salva um arquivo, ele é automaticamente compilado e implantado, e não é necessário recompilar o projeto inteiro. É possível ativar e desativar compilar ao salvar para seu projeto na categoria Compilar da janela Propriedades do projeto.</p>
</div>
</div>
<div class="sect3">
<h4 id="_response_jsp_2">response.jsp</h4>
<div class="paragraph">
<p>A página de resposta fornece detalhes para o conselheiro que corresponde ao assunto escolhido na página de boas-vindas. A consulta criada deverá selecionar o registro do conselheiro cujo <code>counselor_id</code> corresponda ao <code>counselor_idfk</code> do registro do assunto selecionado.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Coloque seu cursor acima da declaração <code>&lt;%@page &#8230;&#8203; %&gt;</code> (linha 7) e clique duas vezes na Consulta do DB na Paleta para abrir a caixa de diálogo Inserir Consulta do BD.</p>
</li>
<li>
<p>Informe os seguintes detalhes na caixa de diálogo Inserir Consulta DB.</p>
<div class="ulist">
<ul>
<li>
<p><strong>Nome da Variável:</strong> <code>counselorQuery</code></p>
</li>
<li>
<p><strong>Escopo:</strong> <code>page</code></p>
</li>
<li>
<p><strong>Fonte de Dados:</strong> <code>jdbc/IFPWAFCAD</code></p>
</li>
<li>
<p><strong>Instrução de Consulta:</strong> <code>SELECT * FROM Subject, Counselor WHERE Counselor.counselor_id = Subject.counselor_idfk AND Subject.subject_id = ? &lt;sql:param value="${param.subject_id}"/&gt;</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/insert-db-query2.png" alt="insert db query2">
</div>
<div class="title">Figure 22. Use a caixa de diálogo Inserir Consulta do BD para especificar detalhes específicos da consulta</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique em OK. O conteúdo a seguir é gerado no arquivo <code>response.jsp</code>. (Novo conteúdo mostrado em <strong>negrito</strong>.)</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">*&lt;%@taglib prefix="sql" uri="http://java.sun.com/jsp/jstl/sql"%&gt;*
&lt;%--
    Document   : response
    Created on : Dec 22, 2009, 8:52:57 PM
    Author     : nbuser
--%&gt;

*&lt;sql:query var="counselorQuery" dataSource="jdbc/IFPWAFCAD"&gt;
    SELECT * FROM Subject, Counselor
    WHERE Counselor.counselor_id = Subject.counselor_idfk
    AND Subject.subject_id = ? &lt;sql:param value="${param.subject_id}"/&gt;
&lt;/sql:query&gt;*

&lt;%@page contentType="text/html" pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Observe que o IDE adicionou automaticamente a diretiva <code>taglib</code> necessária para a tag <code>&lt;sql:query&gt;</code>. Além disso, observe que você utilizou uma tag <code>&lt;sql:param&gt;</code> diretamente na consulta. Como essa consulta conta com o valor <code>subject_id</code> que foi submetido de <code>index.jsp</code>, é possível extrair o valor utilizando uma instrução EL (Linguagem de Expressão) na forma de <code>${param.subject_id}</code> e, em seguida, passá-lo para a tag <code>&lt;sql:param&gt;</code>, para que ele possa ser utilizado no local do ponto de interrogação da SQL (<code>?</code>) durante o runtime.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Utilize uma tag <code>&lt;c:set&gt;</code> para definir uma variável que corresponda ao primeiro registro (ou seja, linha) do <code>resultset</code> retornado da consulta. (Novo conteúdo mostrado em <strong>negrito</strong>.)</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;sql:query var="counselorQuery" dataSource="jdbc/IFPWAFCAD"&gt;
    SELECT * FROM Subject, Counselor
    WHERE Counselor.counselor_id = Subject.counselor_idfk
    AND Subject.subject_id = ? &lt;sql:param value="${param.subject_id}"/&gt;
&lt;/sql:query&gt;

*&lt;c:set var="counselorDetails" value="${counselorQuery.rows[0]}"/&gt;*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Embora o <code>resultset</code> retornado da consulta deva conter apenas um único registro, está é uma etapa necessária, pois a página precisa acessar valores do registro utilizando instruções EL (Linguagem de Expressão). Lembre-se que no <code>index.jsp</code> você podia acessar valores do <code>resultset</code> simplesmente utilizando uma tag <code>&lt;c:forEach&gt;</code>. No entanto, a tag <code>&lt;c:forEach&gt;</code> opera definindo uma variável para linhas contidas na consulta, permitindo, assim, extrair valores incluindo a variável da linha nas instruções EL.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione a diretiva <code>taglib</code> para a biblioteca <code>core</code> do JSTL na parte superior do arquivo, para que a tag <code>&lt;c:set&gt;</code> seja entendida. (Novo conteúdo mostrado em <strong>negrito</strong>.)</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">*&lt;%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%&gt;*
&lt;%@taglib prefix="sql" uri="http://java.sun.com/jsp/jstl/sql"%&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na marcação HTML, substitua todos os espaços reservados por código de instruções EL que exibem os dados contidos na variável <code>counselorDetails</code>. (Alterações mostradas a seguir em <strong>negrito</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;html&gt;
    &lt;head&gt;
        &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/&gt;
        &lt;link rel="stylesheet" type="text/css" href="style.css"&gt;
        &lt;title&gt;*${counselorDetails.name}*&lt;/title&gt;
    &lt;/head&gt;

    &lt;body&gt;
        &lt;table&gt;
            &lt;tr&gt;
                &lt;th colspan="2"&gt;*${counselorDetails.name}*&lt;/th&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;strong&gt;Description: &lt;/strong&gt;&lt;/td&gt;
                &lt;td&gt;&lt;span style="font-size:smaller; font-style:italic;"&gt;*${counselorDetails.description}*&lt;/span&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;strong&gt;Counselor: &lt;/strong&gt;&lt;/td&gt;
                &lt;td&gt;&lt;strong&gt;*${counselorDetails.first_name} ${counselorDetails.nick_name} ${counselorDetails.last_name}*&lt;/strong&gt;
                    &lt;br&gt;&lt;span style="font-size:smaller; font-style:italic;"&gt;
                    &lt;em&gt;member since: *${counselorDetails.member_since}*&lt;/em&gt;&lt;/span&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;strong&gt;Contact Details: &lt;/strong&gt;&lt;/td&gt;
                &lt;td&gt;&lt;strong&gt;email: &lt;/strong&gt;
                    &lt;a href="mailto:*${counselorDetails.email}*"&gt;*${counselorDetails.email}*&lt;/a&gt;
                    &lt;br&gt;&lt;strong&gt;phone: &lt;/strong&gt;*${counselorDetails.telephone}*&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/table&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="run">Executando a Aplicação Pronta</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Você, agora, concluiu a aplicação. Tente executá-lo novamente para ver como ele é exibido no browser. Observe que, graças à funcionalidade Compilar ao Salvar do NetBeans, você não precisa se preocupar com a compilação ou reimplantação da aplicação. Assim, ao executar um projeto, você terá certeza de que a implantação contém as alterações mais recentes.</p>
</div>
<div class="paragraph">
<p>Clique no botão ( <span class="image"><img src="images/run-project-btn.png" alt="run project btn"></span> ) Executar Projeto na barra de ferramentas principal. A página <code>index.jsp</code> será aberta no browser default do IDE.</p>
</div>
<div class="paragraph">
<p>Quando <code>index.jsp</code> for exibido no browser, selecione um assunto na lista drop-down e clique em <code>submit</code>. Você será direcionado à página <code>response.jsp</code>, mostrando os detalhes correspondentes à sua seleção.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/response-display.png" alt="response display">
</div>
<div class="title">Figure 23. response.jsp exibido em um browser, mostrando os dados recuperados do banco de dados</div>
</div>
<div class="paragraph">
<p>Isso conclui o tutorial Criando uma Aplicação Web Simples Usando um Banco de Dados MySQL Este documento demonstra como criar uma aplicação Web simples que se conecta a um banco de dados MySQL. Este tutorial também demonstrou como construir uma aplicação utilizando uma arquitetura básica de duas camadas e utilizou várias tecnologias, incluindo JSP, JSTL, JDBC e JNDI, como uma forma de acessar e exibir dinamicamente os dados.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="troubleshoot">Solução de Problemas</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A maioria dos problemas que ocorrem com a aplicação do tutorial são devidos a dificuldades de comunicação entre o GlassFish Server Open Source Edition e o servidor de banco de dados MySQL. Se a sua aplicação não for exibida corretamente, ou se você estiver recebendo um erro de servidor, os testes a seguir poderão ser úteis.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#access?">Existem recursos do banco de dados?</a></p>
</li>
<li>
<p><a href="#datasource?">O pool de conexões e a fonte de dados existem no servidor?</a></p>
</li>
<li>
<p><a href="#driver?">O driver MySQL Connector/J está acessível ao GlassFish Server?</a></p>
</li>
<li>
<p><a href="#password?">O banco de dados é protegido por senha?</a></p>
</li>
<li>
<p><a href="#ping?">As propriedades do pool de conexões estão definidas corretamente?</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="access">Existem recursos do banco de dados?</h3>
<div class="paragraph">
<p>Utilize a janela Serviços do IDE (Ctrl-5; &amp;#8984-5 no Mac) para garantir que o servidor MySQL esteja em execução e que o <code>MyNewDatabase</code> esteja acessível e contenha os dados da tabela adequados.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Para conectar-se ao servidor de banco de dados MySQL, clique com o botão direito do mouse no nó Servidor MySQL e selecione Conectar.</p>
</li>
<li>
<p>Se um nó de conexão ( <span class="image"><img src="images/db-connection-node.png" alt="db connection node"></span> ) para o <code>MyNewDatabase</code> não for exibido na janela Serviços, você poderá criar uma conexão clicando com o botão direito do mouse no nó do driver MySQL ( <span class="image"><img src="images/driver-node.png" alt="driver node"></span> ) e selecionando a opção Conectar Usando. Insira os detalhes necessários na caixa de diálogo exibida.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/new-db-connection-dialog.png" alt="new db connection dialog">
</div>
<div class="title">Figure 24. Estabeleça uma conexão de banco de dados no IDE utilizando a caixa de diálogo Nova Conexão de Banco de Dados</div>
</div>
<div class="paragraph">
<p><span class="tips">Os campos fornecidos na caixa de diálogo Nova Conexão de Banco de Dados espelham a string de URL inserida na opção Mostrar URL do JDBC. Portanto, se você souber o URL (por exemplo, <code>jdbc:mysql://localhost:3306/MyNewDatabase</code>) você poderá colá-lo no campo Mostrar URL do JDBC e os campos remanescentes da caixa de diálogo serão automaticamente preenchidos.</span>
* Para garantir que as tabelas <code>Subject</code> e <code>Counselor</code> existam e que contenham dados de amostra, expanda o nó de conexão <code>MyNewDatabase</code> ( <span class="image"><img src="images/db-connection-node.png" alt="db connection node"></span> ) e localize o nó do catálogo <code>MyNewDatabase</code> ( <span class="image"><img src="images/db-catalog-node.png" alt="db catalog node"></span> ). Expanda o nó de catálogo para exibir as tabelas existentes. Você pode exibir os dados da tabela clicando com o botão direito do mouse em um nó da tabela e selecionando Exibir Dados.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/services-window-view-data.png" alt="services window view data">
</div>
<div class="title">Figure 25. Exibir dados da tabela selecionando a opção Exibir Dados no menu contextual de um nó da tabela de banco de dados</div>
</div>
</div>
<div class="sect2">
<h3 id="datasource">O pool de conexões e a fonte de dados existem no servidor?</h3>
<div class="paragraph">
<p>Após a implantação da aplicação no GlassFish Server, <code>sun-resources.xml</code> contido no projeto deverá instruir o servidor a criar um recurso e um pool de conexões JDBC. É possível determinar se eles existem no nó Servidores na janela Serviços.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Expanda o nó Servidores &gt; GlassFish Server &gt; Recursos. Expanda Recursos JDBC para exibir a fonte de dados <code>jdbc/IFPWAFCAD</code> criada de <code>glassfish-resources.xml</code>. Expanda o nó Pools de Conexões para exibir o pool de conexões <code>IfpwafcadPool</code> criado a partir de <code>glassfish-resources.xml</code>. (Isso está <a href="#view-connection-pool">demonstrado acima</a>.)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="driver">O driver MySQL Connector/J está acessível para o GlassFish Server?</h3>
<div class="paragraph">
<p>Certifique-se de que o driver MySQLConnector/J foi implantado no GlassFish Server. (Isso é discutido em <a href="#addJar">Adicionando o arquivo JAR do driver do banco de dados ao servidor</a>.)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Localize a pasta de instalação do GlassFish Server no computador e faça uma análise detalhada da subpasta <code>GlassFish domains/domain1/lib</code>. Aqui você encontrará o arquivo <code>mysql-connector-java-5.1.6-bin.jar</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="password">O banco de dados é protegido por senha?</h3>
<div class="paragraph">
<p>O banco de dados precisa ser protegido por senha para que a fonte de dados do GlassFish Server funcione adequadamente neste tutorial. Se você estiver utilizando a conta MySQL <code>root</code> sem senha, você poderá definir a senha usando um prompt de linha de comandos.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Para definir sua senha como <code><em>nbuser</em></code>, navegue para o diretório <code>bin</code> de instalação do MySQL no prompt de linha de comandos e insira o seguinte:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">shell&gt; mysql -u root
mysql&gt; UPDATE mysql.user SET Password = PASSWORD('_nbuser_')
    -&gt;     WHERE User = 'root';
mysql&gt; FLUSH PRIVILEGES;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para mais informações, consulte o Manual de Referência MySQL oficial: <a href="http://dev.mysql.com/doc/refman/5.1/en/default-privileges.html">Proteção das Contas MySQL Iniciais</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ping">As propriedades do pool de conexões estão definidas corretamente?</h3>
<div class="paragraph">
<p>Certifique-se de que o pool de conexões esteja funcionando corretamente para o servidor.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abra a janela Serviços (Ctrl-5; &amp;#8984-5 no Mac) e expanda o nó Servidores.</p>
</li>
<li>
<p>Clique com o botão direito do mouse no nó do GlassFish Server e selecione Exibir Console de Administração</p>
</li>
<li>
<p>Informe o nome do usuário e a senha se for solicitado. Você pode exibir o nome de usuário e senha no gerenciador de Servidores.</p>
</li>
<li>
<p>Na árvore à esquerda da console, expanda o nó Recursos &gt; JDBC &gt; Pools de Conexões de JDBC &gt; <code>IfpwafcadPool</code>. OS detalhes do pool de conexões <code>IfpwafcadPool</code> são exibidos na janela principal.</p>
</li>
<li>
<p>Clique no botão Ping. Se o pool de conexões estiver configurado adequadamente, você verá uma mensagem &#8220;Ping Bem-sucedido&#8221;.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ping-succeeded.png" alt="ping succeeded">
</div>
<div class="title">Figure 26. Teste o seu pool de conexões clicando em Ping na Console de Administração do GlassFish Server</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Se o ping falhar, clique na guia Propriedades Adicionais e verifique se os valores da propriedade listados estão corretamente definidos.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Creating%20Web%20App%20MySQL">Envie-nos Seu Feedback</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="seealso">Consulte Também</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Para obter mais informações sobre o desenvolvimento Java Web, consulte os recursos a seguir.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Artigos e Tutoriais do NetBeans</strong></p>
</li>
<li>
<p><a href="../ide/mysql.html">Conectando-se a um Banco de Dados MySQL no NetBeans IDE</a> Aborda os conceitos básicos sobre como trabalhar com um banco de dados MySQL no IDE.</p>
</li>
<li>
<p><a href="jsf20-intro.html">Introdução ao JavaServer Faces 2.x</a>. Um tutorial introdutório descrevendo como utilizar o framework JSF em um projeto Java Web.</p>
</li>
<li>
<p><a href="quickstart-webapps-spring.html">Introdução à Framework do Spring</a>. Um tutorial introdutório que descreve como criar uma aplicação Web MVC utilizando o Framework do Spring.</p>
</li>
<li>
<p><strong>Java Database Connectivity (JDBC)</strong></p>
</li>
<li>
<p><a href="http://docs.oracle.com/javase/tutorial/jdbc/overview/index.html">Visão Geral do JDBC</a></p>
</li>
<li>
<p><a href="http://download.oracle.com/javase/6/docs/technotes/guides/jdbc/getstart/GettingStartedTOC.fm.html">Introdução à API JDBC</a></p>
</li>
<li>
<p><a href="http://docs.oracle.com/javase/tutorial/jdbc/basics/index.html">Tutoriais do Java: Conceitos Básicos do JDBC</a></p>
</li>
<li>
<p><strong>JavaServer Pages Standard Tag Library (JSTL)</strong></p>
</li>
<li>
<p><a href="http://www.oracle.com/technetwork/java/index-jsp-135995.html">JavaServer Pages Standard Tag Library</a> (página oficial do produto)</p>
</li>
<li>
<p><strong>Java Naming and Directory Interface (JNDI)</strong></p>
</li>
<li>
<p><a href="http://www.oracle.com/technetwork/java/jndi-136720.html">Tecnologias Java SE Core - Java Naming and Directory Interface</a></p>
</li>
<li>
<p><a href="http://docs.oracle.com/javase/jndi/tutorial/">Tutorial do JNDI</a></p>
</li>
<li>
<p><a href="http://docs.oracle.com/javase/tutorial/jndi/index.html">Tutoriais do Java: Java Naming and Directory Interface</a></p>
</li>
</ul>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/mysql-webapp_pt_BR.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
