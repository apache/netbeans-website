
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Utilizando o Hibernate em uma Aplicação Web</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Utilizando o Hibernate em uma Aplicação Web - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Utilizando o Hibernate em uma Aplicação Web">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Utilizando o Hibernate em uma Aplicação Web</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/hibernate-webapp_pt_BR.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_criando_o_banco_de_dados">Criando o Banco de Dados</a></li>
<li><a href="#_criando_o_projeto_de_aplicação_web">Criando o Projeto de Aplicação Web</a></li>
<li><a href="#_modificando_o_arquivo_de_configuração_do_hibernate">Modificando o Arquivo de Configuração do Hibernate</a></li>
<li><a href="#_criando_o_arquivo_de_ajuda_hibernateutil_java">Criando o Arquivo de Ajuda  <code>HibernateUtil.java</code></a></li>
<li><a href="#_gerando_arquivos_de_mapeamento_hibernate_e_classes_java">Gerando Arquivos de Mapeamento Hibernate e Classes Java</a>
<ul class="sectlevel2">
<li><a href="#_criando_o_arquivo_de_engenharia_reversa_do_hibernate">Criando o Arquivo de Engenharia Reversa do Hibernate</a></li>
<li><a href="#_criando_arquivos_de_mapeamento_do_hibernate_e_pojos">Criando arquivos de mapeamento do Hibernate e POJOs</a></li>
</ul>
</li>
<li><a href="#_criando_a_classe_do_helper_filmhelper_java">Criando a Classe do Helper  <code>FilmHelper.java</code></a>
<ul class="sectlevel2">
<li><a href="#_criando_a_classe">Criando a Classe</a></li>
<li><a href="#_enumerando_títulos_de_filmes_e_recuperando_atores_utilizando_uma_consulta_hql">Enumerando Títulos de Filmes e Recuperando Atores Utilizando uma Consulta HQL</a></li>
<li><a href="#_adicionando_métodos_adicionais_do_helper">Adicionando Métodos Adicionais do Helper</a></li>
</ul>
</li>
<li><a href="#_criando_o_bean_gerenciado_pelo_jsf">Criando o Bean Gerenciado pelo JSF</a></li>
<li><a href="#_criando_as_páginas_web">Criando as Páginas Web</a>
<ul class="sectlevel2">
<li><a href="#_criando_template_xhtml">Criando  <code>template.xhtml</code></a></li>
<li><a href="#_modificando_index_xhtml">Modificando  <code>index.xhtml</code></a></li>
<li><a href="#_criando_browse_xhtml">Criando  <code>browse.xhtml</code></a></li>
</ul>
</li>
<li><a href="#_executando_o_projeto">Executando o Projeto</a>
<ul class="sectlevel2">
<li><a href="#_fazendo_download_do_projeto_da_solução">Fazendo Download do Projeto da Solução</a></li>
<li><a href="#_solução_de_problemas">Solução de Problemas</a></li>
</ul>
</li>
<li><a href="#_consulte_também">Consulte Também</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Neste tutorial, você utiliza o NetBeans IDE para criar e implantar uma aplicação Web que exibe dados do banco de dados. A aplicação Web utiliza o framework do Hibernate como a camada de persistência para recuperar e armazenar objetos Java simples antigos (POJOs) em um banco de dados relacional.</p>
</div>
<div class="paragraph">
<p>O Hibernate é o framework que fornece ferramentas para o mapeamento relacional de objeto (ORM). O tutorial demonstra como adicionar suporte para o framework do Hibernate ao IDE e criar os arquivos necessários do Hibernate. Depois de criar os objetos Java e configurar a aplicação para utilizar o Hibernate, você cria um bean gerenciado pelo JSF e páginas do JSF 2.0 para exibir dados.</p>
</div>
<div class="paragraph">
<p>Antes de começar este tutorial, você pode se familiarizar com os seguintes documentos.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Documentação do Hibernate em <a href="http://www.hibernate.org/">hibernate.org</a></p>
</li>
<li>
<p><a href="quickstart-webapps.html">Introdução ao Desenvolvimento de Aplicações Web</a></p>
</li>
<li>
<p><a href="jsf20-intro.html">Introdução ao JavaServer Faces 2.x</a></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-74-73-72.png" alt="netbeans stamp 74 73 72">
</div>
<div class="title">Figure 1. O conteúdo desta página se aplica ao NetBeans IDE 7.2, 7.3 e 7.4</div>
</div>
<div class="paragraph">
<p><strong>Para seguir este tutorial, são necessários os recursos e o software a seguir.</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Software ou Recurso</th>
<th class="tableblock halign-left valign-top">Versão Necessária</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Versões 7.1, 7.2, 7.3 e 7.4 do Java EE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">JDK (Java Development Kit)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Versão 6 ou 7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GlassFish Server Open Source Edition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.x ou 4.x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.mysql.com/">Servidor de banco de dados MySQL</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Versão 5.x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Banco de Dados Sakila</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plug-in disponível na Central de Atualização</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Você pode fazer download <a href="https://netbeans.org/projects/samples/downloads/download/Samples/JavaEE/DVDStoreEE6.zip">de um arquivo compactado zip do projeto finalizado</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_criando_o_banco_de_dados">Criando o Banco de Dados</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Este tutorial utiliza um banco de dados MySQL chamado  <code>sakila</code> , uma amostra gratuita do banco de dados MySQL que está disponível no site do MySQL. O banco de dados sakila não está incluído quando você instala o IDE, portanto, você precisa primeiro criar o banco de dados para seguir este tutorial.</p>
</div>
<div class="paragraph">
<p>Para criar o banco de dados sakila, você pode fazer o download e instalar o plug-in Banco de Dados de Amostra do Sakila usando o Gerenciador de plug-ins. Depois que você instala o plug-in, o banco de dados sakila é adicionado à lista de bancos de dados na caixa de diálogo Criar banco de dados MySQL.</p>
</div>
<div class="paragraph">
<p>Para obter mais informações sobre a configuração do IDE para trabalhar com o MySQL, consulte o tutorial <a href="../ide/mysql.html">Estabelecendo Conexão com um Banco de Dados MySQL</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abra o Gerenciador de plug-ins e instale o plug-in Banco de Dados de Amostra do Sakila.</p>
</li>
<li>
<p>Depois da instalação do plug-in, inicie o banco de dados MySQL expandindo o nó Bancos de Dados na janela Serviços, clicando com o botão direito do mouse no nó Servidor MySQL e selecionando Iniciar.</p>
</li>
<li>
<p>Clique com o botão direito do mouse no nó Servidor MySQL e escolha Criar Banco de Dados.</p>
</li>
<li>
<p>Selecione o banco de dados Sakila na lista drop-down Novo Nome de Banco de Dados, na caixa de diálogo Criar Banco de Dados MySQL. Clique em OK.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/create-sakila-mysql.png" alt="create sakila mysql">
</div>
<div class="title">Figure 2. Tela da caixa de diálogo Criar Banco de Dados MySQL</div>
</div>
<div class="paragraph">
<p>Quando você clicar em OK, um nó do Salkila será exibido sob o nó Servidor MySQL.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse no nó do Sakila e escolha Conectar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Quando você clicar em Conectar, um nó de conexão do banco de dados do banco de dados Sakila ( <code>jdbc:mysql://localhost:3306/sakila [<em>nome de usuário</em> em Default]</code> ) será apresentado no nó Bancos de Dados. Quando uma conexão for aberta, você poderá exibir os dados no banco de dados ampliando o nó de conexão.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_criando_o_projeto_de_aplicação_web">Criando o Projeto de Aplicação Web</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Neste exercício, você criará um projeto de aplicação Web e adicionará as bibliotecas do Hibernate ao projeto. Após criar o projeto, você selecionará Hibernate no painel Frameworks do assistente de Novo Projeto e especificará o banco de dados.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Escolha Arquivo &gt; Novo Projeto (Ctrl-Shift-N; &amp;#8984-Shift-N no Mac) no menu principal. Selecione Aplicação Web na categoria Java Web e clique em Próximo.</p>
</li>
<li>
<p>Digite <strong>DVDStore</strong> para o nome do projeto e defina a localização do projeto.</p>
</li>
<li>
<p>Desmarque a opção Usar Pasta Dedicada, se ela estiver selecionada. Clique em Próximo.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Neste tutorial, não é necessário copiar as bibliotecas do projeto para uma pasta dedicada, pois você não precisará compartilhar bibliotecas com outros usuários.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Defina o servidor como GlassFish Server e defina a versão do Java EE para Java EE 6 Web ou Java EE 7 Web. Clique em Próximo.</p>
</li>
<li>
<p>Marque a caixa de seleção JavaServer Faces e utilize as bibliotecas default do JSF 2.x.</p>
</li>
<li>
<p>Marque a caixa de seleção Hibernar na lista de frameworks.</p>
</li>
<li>
<p>Selecione o banco de dados sakila na lista drop-down Conexão de Banco de Dados. Clique em Finalizar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Observação:</strong> se o banco de dados sakila não estiver disponível como uma opção no painel Framework do assistente, verifique se a conexão está listada no nó Bancos de Dados da janela Serviços. Se a conexão não existir, será necessário criar a conexão do banco de dados.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-newwebapp.png" alt="hib newwebapp">
</div>
<div class="title">Figure 3. Painel Frameworks do assistente de Novo Projeto mostrando como adicionar o suporte do Hibernar ao projeto</div>
</div>
<div class="paragraph">
<p>Quando você clicar em Finalizar, o IDE criará o projeto de aplicação Web e abrirá o arquivo  <code>hibernate.cfg.xml</code>  e  <code>index.xhtml</code>  no editor.</p>
</div>
<div class="paragraph">
<p>Se expandir o nó Bibliotecas na janela Projetos, você poderá ver que o IDE adicionou as bibliotecas do Hibernate ao projeto.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-libraries.png" alt="hib libraries">
</div>
<div class="title">Figure 4. Tela da janela Projetos mostrando bibliotecas do Hibernate</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_modificando_o_arquivo_de_configuração_do_hibernate">Modificando o Arquivo de Configuração do Hibernate</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quando você cria um novo projeto que utiliza o framework do Hibernate, o IDE cria automaticamente o arquivo de configuração  <code>hibernate.cfg.xml</code>  na raiz do classpath de contexto da aplicação (na janela Arquivos,  <code>src/java</code> ). O arquivo está localizado em  <code>&lt;pacotes default&gt;</code>  no nó Pacotes de Código-Fonte na janela Projetos. O arquivo de configuração contém informações sobre a conexão do banco de dados, os mapeamentos de recursos e outras propriedades da conexão. É possível editar o arquivo utilizando o editor de várias views ou editar o XML diretamente no editor XML.</p>
</div>
<div class="paragraph">
<p>Neste exercício, você editará as propriedades default especificadas em  <code>hibernate.cfg.xml</code>  para ativar o log de depuração das instruções SQL e para ativar o gerenciamento de contexto de sessão do Hibernate.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abra  <code>hibernate.cfg.xml</code>  na guia Desenho. Você pode abrir o arquivo expandindo o nó  <code>&lt;pacotes default&gt;</code>  em Pacotes de Códigos-Fonte na janela Projetos e clicando duas vezes em  <code>hibernate.cfg.xml</code> .</p>
</li>
<li>
<p>No editor XML com várias views, expanda o nó Propriedades da Configuração em Propriedades Opcionais.</p>
</li>
<li>
<p>Clique em Adicionar para abrir a caixa de diálogo Adicionar Propriedade do Hibernate.</p>
</li>
<li>
<p>Na caixa de diálogo, selecione a propriedade  <code>hibernate.show_sql</code>  e defina o valor para  <code>true</code> . Isso ativa o log de depuração das instruções SQL.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-property-showsql.png" alt="add property showsql">
</div>
<div class="title">Figure 5. Caixa de diálogo Adicionar Propriedade Hibernate que mostra o valor de definição de hibernate.show_sql</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Expanda o nó Propriedades Diversas e clique em Adicionar.</p>
</li>
<li>
<p>Na caixa de diálogo, selecione  <code>properties hibernate.current_session_context_class</code>  e defina o valor para  <code>thread</code>  para ativar o gerenciamento de contexto automático da sessão do Hibernate.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-property-sessioncontext.png" alt="add property sessioncontext">
</div>
<div class="title">Figure 6. Adicione a caixa e diálogo Propriedade do Hibernate mostrando como definir o valor da propriedade hibernate.current_session_context_class</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique novamente em Adicionar no nó Propriedades Diversas e selecione  <code>hibernate.query.factory_class</code>  na lista drop-down Nome da Propriedade.</p>
</li>
<li>
<p>Selecione <strong>org.hibernate.hql.classic.ClassicQueryTranslatorFactory</strong> como o Valor da Propriedade. Clique em OK.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-property-factoryclass.png" alt="add property factoryclass">
</div>
<div class="title">Figure 7. Caixa de diálogo Adicionar Propriedade Hibernate que mostra o valor de definição de hibernate.query.factory_class</div>
</div>
<div class="paragraph">
<p>Se clicar na guia XML no editor, você pode ver o arquivo na view XML. O arquivo deve ter uma aparência semelhante à seguinte (as três novas propriedades estão em negrito):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;hibernate-configuration&gt;
    &lt;session-factory name="session1"&gt;
        &lt;property name="hibernate.dialect"&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;
        &lt;property name="hibernate.connection.driver_class"&gt;com.mysql.jdbc.Driver&lt;/property&gt;
        &lt;property name="hibernate.connection.url"&gt;jdbc:mysql://localhost:3306/sakila&lt;/property&gt;
        &lt;property name="hibernate.connection.username"&gt;root&lt;/property&gt;
        &lt;property name="hibernate.connection.password"&gt;######&lt;/property&gt;
        *&lt;property name="hibernate.show_sql"&gt;true&lt;/property&gt;
        &lt;property name="hibernate.current_session_context_class"&gt;thread&lt;/property&gt;
        &lt;property name="hibernate.query.factory_class"&gt;org.hibernate.hql.classic.ClassicQueryTranslatorFactory&lt;/property&gt;*
    &lt;/session-factory&gt;
&lt;/hibernate-configuration&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Salve as alterações feitas no arquivo.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Você pode fechar o arquivo, pois não será necessário editá-lo novamente.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_criando_o_arquivo_de_ajuda_hibernateutil_java">Criando o Arquivo de Ajuda  <code>HibernateUtil.java</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Para usar o Hibernate, é necessário criar uma classe de ajuda que lide com a inicialização e que acesse o  <code>SessionFactory</code>  do Hibernate para obter um objeto de Sessão. A classe chama  <code>configure()</code> , carrega o arquivo de configuração  <code>hibernate.cfg.xml</code>  e cria  <code>SessionFactory</code>  para obter o objeto Sessão.</p>
</div>
<div class="paragraph">
<p>Nesta seção, você usa o assistente para Novo Arquivo a fim de criar a classe helper  <code>HibernateUtil.java</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse no nó dos Pacote de Códigos-fonte e selecione Novo &gt; Outro para abrir o assistente para Novo Arquivo.</p>
</li>
<li>
<p>Selecione Hibernate na lista Categorias e HibernateUtil.java na lista Tipos de Arquivo. Clique em Próximo.</p>
</li>
<li>
<p>Digite <strong>HibernateUtil</strong> para o nome da classe e <strong>dvdrental</strong> para o pacote. Clique em Finalizar.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hibernate-util-wizard.png" alt="hibernate util wizard">
</div>
<div class="title">Figure 8. Tela do assistente do HibernateUtil</div>
</div>
<div class="paragraph">
<p>Quando você clicar em Finalizar, o  <code>HibernateUtil.java</code>  será aberto no editor. Você pode fechar o arquivo porque não precisa editá-lo.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_gerando_arquivos_de_mapeamento_hibernate_e_classes_java">Gerando Arquivos de Mapeamento Hibernate e Classes Java</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Neste tutorial, você utilizará um POJO (objetos Java simples antigos) para representar os dados em cada uma das tabelas do banco de dados a ser utilizado. A classe Java especifica os campos das colunas nas tabelas e utiliza setters e getters simples para recuperar e gravar os dados. Para mapear os POJOs para as tabelas, utilize um arquivo de mapeamento do Hibernate ou utilize anotações na classe.</p>
</div>
<div class="paragraph">
<p>Você pode utilizar os Arquivos de Mapeamento do Hibernate e POJOs obtidos de um assistente de Banco de Dados para criar vários POJOs e arquivos de mapeamento com base nas tabelas de banco de dados. Ao utilizar o assistente, selecione todas as tabelas para as quais deseja POJOs e arquivos de mapeamento, e o IDE irá gerar os arquivos com base nas tabelas do banco de dados e adicionar as entradas de mapeamento no  <code>hibernate.cfg.xml</code> . Quando usa o assistente, você pode escolher os arquivos que deseja que o IDE gere (somente os POJOs, por exemplo) e selecionar as opções de geração de código (gerar código que use anotações EJB 3, por exemplo).</p>
</div>
<div class="paragraph">
<p><strong>Observação.</strong> O IDE também possui assistentes para ajudá-lo a criar POJOs e arquivos de mapeamento individuais do zero.</p>
</div>
<div class="sect2">
<h3 id="_criando_o_arquivo_de_engenharia_reversa_do_hibernate">Criando o Arquivo de Engenharia Reversa do Hibernate</h3>
<div class="paragraph">
<p>Se quiser utilizar os arquivos de Mapeamento do Hibernate e POJOs de um assistente de Banco de Dados, primeiro é necessário criar um arquivo de engenharia reversa  <code>hibernate.reveng.xml</code> . Os Arquivos de Mapeamento do Hibernate e POJOs de um assistente de Banco de Dados requerem os arquivos  <code>hibernate.reveng.xml</code>  e  <code>hibernate.cfg.xml</code> .</p>
</div>
<div class="paragraph">
<p>O arquivo de engenharia reversa permite ter maior controle sobre a estratégia de mapeamento do banco de dados. O Assistente para Engenharia Reversa do Hibernate cria um arquivo de engenharia reversa com uma configuração default que pode ser editada no editor XML.</p>
</div>
<div class="paragraph">
<p>Para criar o arquivo de engenharia reversa do Hibernate, execute as etapas seguintes.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse no nó Pacotes de Código-fonte na janela Projetos e escolha Novo &gt; Outro para abrir o assistente para Novo Arquivo.</p>
</li>
<li>
<p>Selecione o Assistente para Engenharia Reversa do Hibernate na categoria Hibernate. Clique em Próximo.</p>
</li>
<li>
<p>Especifique  <code>hibernate.reveng</code>  como o Nome do arquivo e  <code>src/java</code>  para a Pasta. Clique em Próximo.</p>
</li>
<li>
<p>Selecione  <code>hibernate.cfg.xml</code>  na lista drop-down Arquivo de Configuração, caso não esteja selecionado.</p>
</li>
<li>
<p>Selecione as tabelas a seguir em Tabelas Disponíveis e clique em Adicionar para adicionar as tabelas a Tabelas Selecionadas.</p>
<div class="ulist">
<ul>
<li>
<p>ator</p>
</li>
<li>
<p>categoria</p>
</li>
<li>
<p>filme</p>
</li>
<li>
<p>film_actor</p>
</li>
<li>
<p>film_category</p>
</li>
<li>
<p>idioma</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Clique em Finalizar.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hibernate-reveng-wizard.png" alt="hibernate reveng wizard">
</div>
<div class="title">Figure 9. Novo assistente de Engenharia Reversa do Hibernate</div>
</div>
<div class="paragraph">
<p>O assistente gera um arquivo de engenharia reversa  <code>hibernate.reveng.xml</code>  e abre o arquivo no editor. Você pode fechar o arquivo de engenharia reversa porque não precisará editar o arquivo.</p>
</div>
<div class="paragraph">
<p>Para obter mais detalhes sobre como trabalhar com o arquivo  <code>hibernate.reveng.xml</code> , consulte o <a href="http://docs.jboss.org/tools/2.1.0.Beta1/hibernatetools/html/reverseengineering.html">Capítulo 5. Controlando a engenharia reversa</a> no <a href="http://docs.jboss.org/tools/2.1.0.Beta1/hibernatetools/html/">Guia de Referência das Ferramentas do Hibernate</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_criando_arquivos_de_mapeamento_do_hibernate_e_pojos">Criando arquivos de mapeamento do Hibernate e POJOs</h3>
<div class="paragraph">
<p>Você pode utilizar os Arquivos de Mapeamento do Hibernate e POJOs obtidos de um assistente de Banco de Dados para gerar arquivos. O assistente pode gerar um POJO e um arquivo de mapeamento correspondente para cada tabela que você selecionar no assistente. Os arquivos de mapeamento são arquivos XML que contêm dados sobre como as colunas das tabelas são mapeadas para os campos nos POJOs. É necessário ter os arquivos  <code>hibernate.reveng.xml</code>  e  <code>hibernate.cfg.xml</code>  para utilizar o assistente.</p>
</div>
<div class="paragraph">
<p>Para criar os POJOS e arquivos de mapeamento utilizando um assistente, execute as etapas a seguir:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse no nó Pacotes de Código-fonte na janela Projetos e escolha Novo &gt; Outro para abrir o assistente para Novo Arquivo.</p>
</li>
<li>
<p>Selecione Arquivos de Mapeamento do Hibernate e POJOs provenientes de um Banco de Dados na categoria Hibernate. Clique em Próximo.</p>
</li>
<li>
<p>Certifique-se de que os arquivos  <code>hibernate.cfg.xml</code>  e  <code>hibernate.reveng.xml</code>  estejam selecionados nas listas drop-down.</p>
</li>
<li>
<p>Selecione <strong>Funcionalidades da Linguagem JDK 5</strong> nas opções Definições Gerais.</p>
</li>
<li>
<p>Certifique-se de que as opções <strong>Código do Domínio</strong> e <strong>Mapeamentos XML do Hibernate</strong> estejam selecionadas.</p>
</li>
<li>
<p>Selecione <strong>dvdrental</strong> para o Nome do pacote. Clique em Finalizar.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hibernate-pojo-wizard2.png" alt="hibernate pojo wizard2">
</div>
<div class="title">Figure 10. Gerar assistente Arquivos de Mapeamento Hibernar e POJOs</div>
</div>
<div class="paragraph">
<p>Quando você clicar em Finalizar, o IDE irá gera POJOs e arquivos de mapeamento do Hibernate com os campos mapeados para as colunas especificadas em  <code>hibernate.reveng.xml</code> . O IDE também adicionará entradas de mapeamento em  <code>hibernate.cfg.xml</code> .</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;hibernate-configuration&gt;
  &lt;session-factory&gt;
    &lt;property name="hibernate.dialect"&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;
    &lt;property name="hibernate.connection.driver_class"&gt;com.mysql.jdbc.Driver&lt;/property&gt;
    &lt;property name="hibernate.connection.url"&gt;jdbc:mysql://localhost:3306/sakila&lt;/property&gt;
    &lt;property name="hibernate.connection.username"&gt;myusername&lt;/property&gt;
    &lt;property name="hibernate.connection.password"&gt;mypassword&lt;/property&gt;
    &lt;property name="hibernate.show_sql"&gt;true&lt;/property&gt;
    &lt;property name="hibernate.current_session_context_class"&gt;thread&lt;/property&gt;
    &lt;property name="hibernate.query.factory_class"&gt;org.hibernate.hql.classic.ClassicQueryTranslatorFactory&lt;/property&gt;
    &lt;mapping resource="dvdrental/FilmActor.hbm.xml"/&gt;
    &lt;mapping resource="dvdrental/Language.hbm.xml"/&gt;
    &lt;mapping resource="dvdrental/Film.hbm.xml"/&gt;
    &lt;mapping resource="dvdrental/Category.hbm.xml"/&gt;
    &lt;mapping resource="dvdrental/Actor.hbm.xml"/&gt;
    &lt;mapping resource="dvdrental/FilmCategory.hbm.xml"/&gt;
  &lt;/session-factory&gt;
&lt;/hibernate-configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Observação.</strong> Confirme se os elementos  <code>mapping</code>  serão listados após os elementos  <code>property</code>  no arquivo  <code>hibernate.cfg.xml</code> .</p>
</div>
<div class="paragraph">
<p>É possível expandir o pacote  <code>dvdrental</code>  para ver os arquivos gerados pelo assistente.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-projectswindow.png" alt="hib projectswindow">
</div>
<div class="title">Figure 11. Janela Projetos mostrando os POJOs gerados</div>
</div>
<div class="paragraph">
<p>Você pode utilizar o assistente para mapeamento do Hibernate se quiser criar um arquivo de mapeamento do Hibernate que mapeie uma tabela específica para uma classe específica.</p>
</div>
<div class="paragraph">
<p>Para obter mais detalhes sobre como trabalhar com o arquivo  <code>hibernate.reveng.xml</code> , consulte o <a href="http://docs.jboss.org/hibernate/core/3.3/reference/en/html/mapping.html">Capítulo 5. Mapeamento O/R Básico</a> da <a href="http://docs.jboss.org/hibernate/stable/core/reference/en/html/">Documentação de Referência do Hibernate</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_criando_a_classe_do_helper_filmhelper_java">Criando a Classe do Helper  <code>FilmHelper.java</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Agora você criará uma classe do helper no pacote  <code>dvdrental</code>  que será utilizada para efetuar consultas do Hibernate no banco de dados. Você utilizará o editor HQL (Hibernate Query Language) para criar e testar as consultas para recuperar dados. Depois de testar as consultas, você criará criados métodos na classe do helper que criarão e executarão as consultas. Em seguida, você chamará os métodos na classe do helper de um bean gerenciado pelo JSF.</p>
</div>
<div class="sect2">
<h3 id="_criando_a_classe">Criando a Classe</h3>
<div class="paragraph">
<p>Nesta seção, utilize o assistente de Novo Arquivo para criar a classe do helper  <code>FilmHelper.java</code>  no pacote  <code>dvdrental</code> . Você criará uma sessão do Hibernate, chamando  <code>getSessionFactory</code>  em  <code>HibernateUtil.java</code>  e criará alguns métodos do helper para fazer consultas e recuperar dados do banco de dados. Você chamará os métodos do helper de páginas JSP.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse no nó do pacote de códigos-fonte  <code>dvdrental</code>  e selecione Novo &gt; Classe Java para abrir o assistente de Novo arquivo.</p>
</li>
<li>
<p>Digite <strong>FilmHelper</strong> como nome da classe.</p>
</li>
<li>
<p>Confirme se <strong>dvdrental</strong> está selecionado como o Pacote. Clique em Finalizar.</p>
</li>
<li>
<p>Adicionando o código a seguir (em negrito) para criar uma sessão do Hibernate.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class FilmHelper {

    *Session session = null;

    public FilmHelper() {
        this.session = HibernateUtil.getSessionFactory().getCurrentSession();
    }*

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse no editor, selecione Corrigir importações (Alt-Shift-I; &amp;#8984-Shift-I no Mac) para adicionar as instruções necessárias de importação ( <code>org.hibernate.Session</code> ) e salve suas alterações.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Agora você modificará  <code>FilmHelper.java</code>  para adicionar métodos de consulta do BD.</p>
</div>
</div>
<div class="sect2">
<h3 id="_enumerando_títulos_de_filmes_e_recuperando_atores_utilizando_uma_consulta_hql">Enumerando Títulos de Filmes e Recuperando Atores Utilizando uma Consulta HQL</h3>
<div class="paragraph">
<p>Neste exercício, você criará uma consulta HQL (Hibernate Query Language) que consulta o banco de dados para recuperar uma lista de títulos de filmes da tabela Film. Em seguida, você adicionará um método que consulte as tabelas Actor e Film_actor para extrair os atores que atuam em um filme específico.</p>
</div>
<div class="paragraph">
<p>A tabela Film possui 1000 registros, de modo que o método para recuperar a lista de filmes deveria ser capaz de recuperar os registros com base na chave primária  <code>filmId</code> . Utilize o editor HQL para criar e testar a consulta HQL. Após criar a consulta correta, você adicionará um método à classe que possa gerar a consulta apropriada.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse no nó do projeto na janela Projetos e selecione Limpar e Construir.</p>
</li>
<li>
<p>Clique com o botão direito do mouse em  <code>hibernate.cfg.xml</code>  na janela Projetos e selecione Executar Consulta HQL para abrir o editor de consultas HQL.</p>
</li>
<li>
<p>Selecione hibernate.cfg na lista drop-down da barra de ferramentas.</p>
</li>
<li>
<p>Teste a conexão digitando no editor e clicando no botão Executar a Consulta HQL ( <span class="image"><img src="images/run_hql_query_16.png" alt="run hql query 16" title="Botão Executar Consulta HQL"></span> ) da barra de ferramentas.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">from Film</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ao clicar em Executar a Consulta HQL, você verá os resultados da consulta na janela inferior do editor de consultas HQL.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hibernate-hqleditor1.png" alt="hibernate hqleditor1">
</div>
<div class="title">Figure 12. Gerar assistente Arquivos de Mapeamento Hibernar e POJOs</div>
</div>
<div class="paragraph">
<p>Se você clicar no botão SQL, você verá a consulta SQL equivalente.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">select film0_.film_id as col_0_0_ from sakila.film film0_</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Digite a consulta a seguir para recuperar os registros da tabela Film, onde o id do filme está entre 100 e 200.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">from Film as film where film.filmId between 100 and 200</code></pre>
</div>
</div>
<div class="paragraph">
<p>A janela de resultados exibirá uma lista de registros. Agora que você verificou que a consulta testada retorna os resultados desejados, utilize a consulta na classe do helper.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione o método a seguir,  <code>getFilmTitles</code>  a  <code>FilmHelper.java</code> , para recuperar os filmes, onde o id do filme está entre uma determinada faixa especificada pelas variáveis  <code>startID</code>  e  <code>endID</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public List getFilmTitles(int startID, int endID) {
    List&lt;Film&gt; filmList = null;
    try {
        org.hibernate.Transaction tx = session.beginTransaction();
        Query q = session.createQuery ("from Film as film where film.filmId between '"+startID+"' and '"+endID+"'");
        filmList = (List&lt;Film&gt;) q.list();
    } catch (Exception e) {
        e.printStackTrace();
    }
    return filmList;
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione o método a seguir,  <code>getActorsByID</code> , para recuperar os atores de um filme específico. O método construirá a consulta utilizando  <code>filmId</code>  como a variável de entrada.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public List getActorsByID(int filmId){
    List&lt;Actor&gt; actorList = null;
    try {
        org.hibernate.Transaction tx = session.beginTransaction();
        Query q = session.createQuery ("from Actor as actor where actor.actorId in (select filmActor.actor.actorId from FilmActor as filmActor where filmActor.film.filmId='" + filmId + "')");
        actorList = (List&lt;Actor&gt;) q.list();

    } catch (Exception e) {
        e.printStackTrace();
    }

    return actorList;
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Corrija as importações e salve as alterações.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Ao corrigir suas importações, selecione  <code>java.util.List</code>  e  <code>org.hibernate.Query</code> .</p>
</div>
</div>
<div class="sect2">
<h3 id="_adicionando_métodos_adicionais_do_helper">Adicionando Métodos Adicionais do Helper</h3>
<div class="paragraph">
<p>Agora você adicionará métodos adicionais do assistente que criem consultas com base em uma variável de entrada. É possível verificar as consultas no editor de consultas HQL.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione o método a seguir para recuperar uma lista de categorias de acordo com  <code>filmId</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public Category getCategoryByID(int filmId){
    List&lt;Category&gt; categoryList = null;
    try {
        org.hibernate.Transaction tx = session.beginTransaction();
        Query q = session.createQuery("from Category as category where category.categoryId in (select filmCat.category.categoryId from FilmCategory as filmCat where filmCat.film.filmId='" + filmId + "')");
        categoryList = (List&lt;Category&gt;) q.list();

    } catch (Exception e) {
        e.printStackTrace();
    }

    return categoryList.get(0);
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione o método seguinte para recuperar um único filme de acordo com o  <code>filmId</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public Film getFilmByID(int filmId){

    Film film = null;

    try {
        org.hibernate.Transaction tx = session.beginTransaction();
        Query q = session.createQuery("from Film as film where film.filmId=" + filmId);
        film = (Film) q.uniqueResult();
    } catch (Exception e) {
        e.printStackTrace();
    }

    return film;
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione o método a seguir para recuperar o idioma do filme de acordo com o  <code>filmId</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public String getLangByID(int langId){

    Language language = null;

    try {
        org.hibernate.Transaction tx = session.beginTransaction();
        Query q = session.createQuery("from Language as lang where lang.languageId=" + langId);
        language = (Language) q.uniqueResult();
    } catch (Exception e) {
        e.printStackTrace();
    }

    return language.getName();
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Salve as alterações.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_criando_o_bean_gerenciado_pelo_jsf">Criando o Bean Gerenciado pelo JSF</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Neste exercício, você criará um bean gerenciado pelo JSF. Os métodos do bean gerenciado são utilizados para exibir dados nas páginas JSF e para acessar métodos da classe do helper para recuperar registros. A especificação do JSF 2.0 permite utilizar anotações em uma classe bean para identificar a classe como um bean gerenciado pelo JSF, especificar o escopo e um nome para o bean.</p>
</div>
<div class="paragraph">
<p>Para criar o bean gerenciado, execute as seguintes etapas:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse no nó do pacote de código-fonte  <code>dvdrental</code>  e selecione Novo &gt; Outro.</p>
</li>
<li>
<p>Selecione Bean Gerenciado pelo JSF na categoria JavaServer Faces. Clique em Próximo.</p>
</li>
<li>
<p>Digite <strong>FilmController</strong> para Nome da Classe.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Você usará o nome  <code>filmController</code>  do Bean Gerenciado como o valor para  <code>inputText</code>  e  <code>commandButton</code>  na página JSF  <code>index.xhtml</code>  ao chamar métodos no Bean.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Selecione <strong>dvdrental</strong> para o Pacote.</p>
</li>
<li>
<p>Digite <strong>filmController</strong> como o Nome que será utilizado para o bean gerenciado.</p>
</li>
<li>
<p>Defina o Escopo Como Sessão. Clique em Finalizar.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-newmanagedbean.png" alt="hib newmanagedbean">
</div>
<div class="title">Figure 13. Novo assistente de Bean Gerenciado pelo JSF</div>
</div>
<div class="paragraph">
<p>Quando você clicar em Finalizar, o IDE gerará a classe bean e abrirá a classe no editor. O IDE adicionou as anotações  <code>@ManagedBean</code>  e  <code>@SessionScoped</code> .</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@ManagedBean
@SessionScoped
public class FilmController {

    /** Creates a new instance of FilmController */
    public FilmController() {
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Observação.</strong> Observe que o nome do bean gerenciado não está especificado explicitamente. Por default, o nome do bean é o mesmo que o nome da classe e inicia com letra minúscula. Se você quiser que o nome do bean seja diferente do nome da classe, você poderá especificá-lo explicitamente como um parâmetro das anotações  <code>@ManagedBean</code>  (por exemplo,  <code>@ManagedBean(name="myBeanName")</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione os campos a seguir (em negrito) à classe.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@ManagedBean
@SessionScoped
public class FilmController {
    *int startId;
    int endId;
    DataModel filmTitles;
    FilmHelper helper;
    private int recordCount = 1000;
    private int pageSize = 10;

    private Film current;
    private int selectedItemIndex;*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione o código a seguir (em negrito) para criar a instância do FilmController e recuperar os filmes.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    /** Creates a new instance of FilmController */
    public FilmController() {
        *helper = new FilmHelper();
        startId = 1;
        endId = 10;
    }

    public FilmController(int startId, int endId) {
        helper = new FilmHelper();
        this.startId = startId;
        this.endId = endId;
    }

    public Film getSelected() {
        if (current == null) {
            current = new Film();
            selectedItemIndex = -1;
        }
        return current;
    }


    public DataModel getFilmTitles() {
        if (filmTitles == null) {
            filmTitles = new ListDataModel(helper.getFilmTitles(startId, endId));
        }
        return filmTitles;
    }

    void recreateModel() {
        filmTitles = null;
    }*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione os métodos a seguir usados para exibir a tabela e navegar entre as páginas.*    public boolean isHasNextPage() {
    if (endId + pageSize &#8656; recordCount) {
        return true;
    }
    return false;
}</p>
<div class="literalblock">
<div class="content">
<pre>public boolean isHasPreviousPage() {
    if (startId-pageSize &gt; 0) {
        return true;
    }
    return false;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public String next() {
    startId = endId+1;
    endId = endId + pageSize;
    recreateModel();
    return "index";
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public String previous() {
    startId = startId - pageSize;
    endId = endId - pageSize;
    recreateModel();
    return "index";
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public int getPageSize() {
    return pageSize;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    public String prepareView(){
        current = (Film) getFilmTitles().getRowData();
        return "browse";
    }
    public String prepareList(){
        recreateModel();
        return "index";
    }
*</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Os métodos que retornam "index" ou "browse" solicitarão o handler de navegação JSF para tentar abrir uma página denominada  <code>index.xhtml</code>  ou  <code>browse.xhtml</code> . A especificação JSF 2.0 permite a utilização de regras de navegação implícitas em aplicações que utilizam a tecnologia Facelets. Nesta aplicação, não há regras de navegação configuradas em  <code>faces-config.xml</code> . Em vez disso, o handler de navegação tentará localizar a página adequada na aplicação.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione os métodos a seguir que acessam a classe do helper para recuperar detalhes adicionais do filme.*    public String getLanguage() {
    int langID = current.getLanguageByLanguageId().getLanguageId().intValue();
    String language = helper.getLangByID(langID);
    return language;
}</p>
<div class="literalblock">
<div class="content">
<pre>public String getActors() {
    List actors = helper.getActorsByID(current.getFilmId());
    StringBuffer totalCast = new StringBuffer();
    for (int i = 0; i &lt; actors.size(); i++) {
        Actor actor = (Actor) actors.get(i);
        totalCast.append(actor.getFirstName());
        totalCast.append(" ");
        totalCast.append(actor.getLastName());
        totalCast.append("  ");
    }
    return totalCast.toString();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public String getCategory() {
    Category category = helper.getCategoryByID(current.getFilmId());
    return  category.getName();
}*</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java"></code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Corrija as importações (Ctrl-Shift-I) e salve as alterações.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Você pode utilizar a funcionalidade para autocompletar código no editor para ajudar a digitar seu código.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_criando_as_páginas_web">Criando as Páginas Web</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Neste exercício, você criará duas páginas Web para exibir os dados. Você modificará o  <code>index.xhtml</code>  gerado pelo IDE para adicionar uma tabela que exiba os filmes do banco de dados. Em seguida, você criará  <code>browse.xhtml</code>  para exibir os detalhes de um filme ao clicar no link "Exibir" da tabela. Você criará também uma página modelo do JSF que será utilizada por  <code>index.xhtml</code>  e  <code>browse.xhtml</code> .</p>
</div>
<div class="paragraph">
<p>Para saber mais sobre a utilização do JSF 2.0 e modelos do Facelets, consulte <a href="jsf20-intro.html">Introdução ao JavaServer Faces 2.0</a></p>
</div>
<div class="sect2">
<h3 id="_criando_template_xhtml">Criando  <code>template.xhtml</code></h3>
<div class="paragraph">
<p>Primeiro, você criará o modelo de Facelets  <code>template.xhtml</code>  do JSF utilizado na composição das páginas  <code>index.xhtml</code>  e  <code>browse.xhtml</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse no nó do projeto DVDStore na janela Projetos e selecione Novo &gt; Outro.</p>
</li>
<li>
<p>Selecione Modelo de Facelets na categoria JavaServer Faces. Clique em Próximo.</p>
</li>
<li>
<p>Digite <strong>template</strong> para o Nome do Arquivo e selecione o primeiro estilo de layout CSS.</p>
</li>
<li>
<p>Clique em Finalizar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Quando você clica em Finalizar, o arquivo  <code>template.xhtml</code>  é aberto no editor. O modelo contém o código default a seguir.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;h:body&gt;

    &lt;div id="top" class="top"&gt;
        &lt;ui:insert name="top"&gt;Top&lt;/ui:insert&gt;
    &lt;/div&gt;

    &lt;div id="content" class="center_content"&gt;
        &lt;ui:insert name="content"&gt;Content&lt;/ui:insert&gt;
    &lt;/div&gt;

&lt;/h:body&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Modifique o elemento  <code>&lt;ui:insert&gt;</code>  para alterar o nome gerado default para "corpo".</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div id="content" class="center_content"&gt;
        &lt;ui:insert name="*body*"&gt;Content&lt;/ui:insert&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Salve as alterações.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>O conteúdo do elemento  <code>&lt;ui:define name="body"&gt;</code>  nos arquivos  <code>index.xhtml</code>  e  <code>browse.xhtml</code>  será inserido no local identificado com  <code> &lt;ui:insert name="body"&gt;Content&lt;/ui:insert&gt;</code>  no modelo.</p>
</div>
</div>
<div class="sect2">
<h3 id="_modificando_index_xhtml">Modificando  <code>index.xhtml</code></h3>
<div class="paragraph">
<p>Quando você criou a aplicação Web, o IDE gerou automaticamente a página  <code>index.xhtml</code> . Neste exercício, você modifica a página para exibir uma lista de títulos de filmes. A página JSF chama os métodos no FilmController do Bean Gerenciado pelo JSF para recuperar a lista de filmes e exibir uma tabela com títulos e descrições dos filmes.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Expanda a pasta Páginas Web na janela Projetos e abra  <code>index.xhtml</code>  no editor.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>O assistente para Novo Projeto gerou a seguinte página  <code>index.xhtml</code>  default.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"&gt;
&lt;h:head&gt;
        &lt;title&gt;Facelet Title&lt;/title&gt;
    &lt;/h:head&gt;
    &lt;h:body&gt;
        Hello from Facelets
    &lt;/h:body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Modifique a página para utilizar os elementos JSF  <code>&lt;ui:composition&gt;</code>  e  <code>&lt;ui:define&gt;</code>  e adicione um elemento  <code>&lt;h:form&gt;</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  *xmlns:ui="http://java.sun.com/jsf/facelets"&gt;
    &lt;ui:composition template="./template.xhtml"&gt;
        &lt;ui:define name="body"&gt;
            &lt;h:form&gt;

            &lt;/h:form&gt;
        &lt;/ui:define&gt;
    &lt;/ui:composition&gt;*
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quando você começa a digitar as tags, o IDE adiciona a declaração da biblioteca de tags  <code>xmlns:ui="http://java.sun.com/jsf/facelets"</code> .</p>
</div>
<div class="paragraph">
<p>Os elementos  <code>&lt;ui:composition&gt;</code>  e  <code>&lt;ui:define&gt;</code>  são utilizados em combinação com o modelo de página que você criará. O elemento  <code>&lt;ui:composition&gt;</code>  faz referência à localização do modelo que será utilizado por essa página. O elemento  <code>&lt;ui:define&gt;</code>  faz referência à posição no modelo que o código incluído ocupará.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione os seguintes links de navegação que chamam os métodos  <code>previous</code>  e  <code>next</code>  no Bean gerenciado pelo JSF.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">    &lt;ui:define name="body"&gt;
            &lt;h:form&gt;
                *&lt;h:commandLink action="#{filmController.previous}" value="Previous #{filmController.pageSize}" rendered="#{filmController.hasPreviousPage}"/&gt; 
                &lt;h:commandLink action="#{filmController.next}" value="Next #{filmController.pageSize}" rendered="#{filmController.hasNextPage}"/&gt; *
            &lt;/h:form&gt;
    &lt;/ui:define&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione o seguinte elemento  <code>dataTable</code>  (em negrito) para gerar a tabela para exibir os itens recuperados.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">            &lt;h:form styleClass="jsfcrud_list_form"&gt;
                &lt;h:commandLink action="#{filmController.previous}" value="Previous #{filmController.pageSize}" rendered="#{filmController.hasPreviousPage}"/&gt; 
                &lt;h:commandLink action="#{filmController.next}" value="Next #{filmController.pageSize}" rendered="#{filmController.hasNextPage}"/&gt; 
                *&lt;h:dataTable value="#{filmController.filmTitles}" var="item" border="0" cellpadding="2" cellspacing="0" rowClasses="jsfcrud_odd_row,jsfcrud_even_row" rules="all" style="border:solid 1px"&gt;
                    &lt;h:column&gt;
                        &lt;f:facet name="header"&gt;
                            &lt;h:outputText value="Title"/&gt;
                        &lt;/f:facet&gt;
                        &lt;h:outputText value="#{item.title}"/&gt;
                    &lt;/h:column&gt;
                    &lt;h:column&gt;
                        &lt;f:facet name="header"&gt;
                            &lt;h:outputText value="Description"/&gt;
                        &lt;/f:facet&gt;
                        &lt;h:outputText value="#{item.description}"/&gt;
                    &lt;/h:column&gt;
                    &lt;h:column&gt;
                        &lt;f:facet name="header"&gt;
                            &lt;h:outputText value=" "/&gt;
                        &lt;/f:facet&gt;
                        &lt;h:commandLink action="#{filmController.prepareView}" value="View"/&gt;
                    &lt;/h:column&gt;
                &lt;/h:dataTable&gt;
                &lt;br/&gt;*
            &lt;/h:form&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Salve as alterações.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A página de índice agora exibirá uma lista de títulos de filmes no banco de dados. Cada linha da tabela inclui um link "Exibir" que chama o método  <code>prepareView</code>  no bean gerenciado. O método  <code>prepareView</code>  retornará "browse" e abrirá o  <code>browse.xhtml</code> .</p>
</div>
<div class="paragraph">
<p><strong>Observação.</strong> Quando você digitar a tag  <code>&lt;f:facet&gt;</code> , o IDE adicionará a declaração da biblioteca de tags  <code>xmlns:f="http://java.sun.com/jsf/core</code> . <strong>Confirme se a biblioteca de tags está declarada no arquivo.</strong></p>
</div>
</div>
<div class="sect2">
<h3 id="_criando_browse_xhtml">Criando  <code>browse.xhtml</code></h3>
<div class="paragraph">
<p>Agora você criará a página  <code>browse.xhtml</code>  para exibir os detalhes do filme selecionado. É possível utilizar o assistente Cliente de Modelo de Facelets para criar a página com base no modelo de Facelets do JSF  <code>template.xhtml</code>  que você criou.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse no nó do projeto DVDStore na janela Projetos e selecione Novo &gt; Outro.</p>
</li>
<li>
<p>Selecione Cliente de Modelo de Facelets na categoria JavaServer Faces. Clique em Próximo.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-faceletsclient.png" alt="hib faceletsclient">
</div>
<div class="title">Figure 14. Tipo de arquivo Cliente de Modelo de Facelets no assistente Novo Arquivo</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Digite <strong>browse</strong> para o Nome do Arquivo.</p>
</li>
<li>
<p>Localize o Modelo da página clicando em Procurar para abrir a caixa de diálogo Procurar Arquivos.</p>
</li>
<li>
<p>Expanda a pasta Páginas Web e selecione  <code>template.xhtml</code> . Clique em Selecionar Arquivo.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-browsetemplate.png" alt="hib browsetemplate">
</div>
<div class="title">Figure 15. Selecione o modelo na caixa de diálogo Procurar Arquivos</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Selecione <strong>&lt;ui:composition&gt;</strong> para a Tag Raiz Gerada. Clique em Finalizar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Quando você clica em Finalizar, o arquivo  <code>browse.xhtml</code>  abrirá no editor com o código a seguir.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
    template="./template.xhtml"&gt;

    &lt;ui:define name="top"&gt;
        top
    &lt;/ui:define&gt;

    &lt;ui:define name="body"&gt;
        body
    &lt;/ui:define&gt;

&lt;/ui:composition&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>É possível ver que o novo arquivo especifica o arquivo  <code>template.xhtml</code>  e que a tag  <code>&lt;ui:define&gt;</code>  possui a propriedade  <code>name="body"</code></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione o código a seguir (em negrito) entre as tags  <code>&lt;ui:define&gt;</code>  para criar o form e chamar os métodos no FilmController do Bean gerenciado para recuperar os dados e preencher o form.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
    template="./template.xhtml"
    *xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"*&gt;

        &lt;ui:define name="top"&gt;
            top
        &lt;/ui:define&gt;

        &lt;ui:define name="body"&gt;
        *
            &lt;h:form&gt;
                &lt;h:panelGrid columns="2"&gt;
                    &lt;h:outputText value="Title:"/&gt;
                    &lt;h:outputText value="#{filmController.selected.title}" title="Title"/&gt;
                    &lt;h:outputText value="Description"/&gt;
                    &lt;h:outputText value="#{filmController.selected.description}" title="Description"/&gt;
                    &lt;h:outputText value="Genre"/&gt;
                    &lt;h:outputText value="#{filmController.category}"/&gt;

                    &lt;h:outputText value="Cast"/&gt;
                    &lt;h:outputText value="#{filmController.actors}"/&gt;


                    &lt;h:outputText value="Film Length"/&gt;
                    &lt;h:outputText value="#{filmController.selected.length} min" title="Film Length"/&gt;

                    &lt;h:outputText value="Language"/&gt;
                    &lt;h:outputText value="#{filmController.language}" title="Film Length"/&gt;

                    &lt;h:outputText value="Release Year"/&gt;
                    &lt;h:outputText value="#{filmController.selected.releaseYear}" title="Release Year"&gt;
                        &lt;f:convertDateTime pattern="MM/dd/yyyy" /&gt;
                    &lt;/h:outputText&gt;
                    &lt;h:outputText value="Rental Duration"/&gt;
                    &lt;h:outputText value="#{filmController.selected.rentalDuration}" title="Rental DUration"/&gt;
                    &lt;h:outputText value="Rental Rate"/&gt;
                    &lt;h:outputText value="#{filmController.selected.rentalRate}" title="Rental Rate"/&gt;
                    &lt;h:outputText value="Replacement Cost"/&gt;
                    &lt;h:outputText value="#{filmController.selected.replacementCost}" title="Replacement Cost"/&gt;
                    &lt;h:outputText value="Rating"/&gt;
                    &lt;h:outputText value="#{filmController.selected.rating}" title="Rating"/&gt;
                    &lt;h:outputText value="Special Features"/&gt;
                    &lt;h:outputText value="#{filmController.selected.specialFeatures}" title="Special Features"/&gt;
                    &lt;h:outputText value="Last Update"/&gt;
                    &lt;h:outputText value="#{filmController.selected.lastUpdate}" title="Last Update"&gt;
                        &lt;f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" /&gt;
                    &lt;/h:outputText&gt;
                &lt;/h:panelGrid&gt;
                &lt;br/&gt;
                &lt;br/&gt;
                &lt;h:commandLink action="#{filmController.prepareList}" value="View All List"/&gt;
                &lt;br/&gt;
            &lt;/h:form&gt;
*
        &lt;/ui:define&gt;
    &lt;/ui:composition&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>É possível ver que os arquivos  <code>browse.xhtml</code>  e  <code>index.xhtml</code>  utilizarão o mesmo modelo de página.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Salve as alterações.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_executando_o_projeto">Executando o Projeto</h2>
<div class="sectionbody">
<div class="paragraph">
<p>O conceito básico da aplicação agora está concluído. Agora você pode executar a aplicação para verificar se tudo está funcionando corretamente.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique em Executar Projeto Principal na barra de ferramentas principal ou clique com o botão direito do mouse no nó da aplicação DVDStore na janela Projetos e selecione Executar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>O IDE salva todos os arquivos alterados, constrói e implanta a aplicação no servidor. O IDE abre a janela do browser no URL  <code><a href="http://localhost:8080/DVDStore/" class="bare">http://localhost:8080/DVDStore/</a></code>  que exibe a lista de filmes.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hib-browser1.png" alt="hib browser1">
</div>
<div class="title">Figure 16. Tela do browser exibindo a lista de filme na página de índice</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>No browser, clique em "Exibir" para carregar o  <code>browse.xhtml</code>  e exibir os detalhes do filme.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_fazendo_download_do_projeto_da_solução">Fazendo Download do Projeto da Solução</h3>
<div class="paragraph">
<p>Você pode fazer o download da solução para este projeto como um projeto das seguintes formas.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Faça download <a href="https://netbeans.org/projects/samples/downloads/download/Samples/JavaEE/DVDStoreEE6.zip">de um arquivo compactado zip do projeto finalizado</a>.</p>
</li>
<li>
<p>Faça o check-out do código-fonte do projeto das Amostras do NetBeans ao executar as etapas a seguir:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Escolha Equipe &gt; Subversion &gt; Efetuar check-out no menu principal.</p>
</li>
<li>
<p>Na caixa de diálogo Efetuar Check-out, insira o Repositório URL a seguir:
 <code><a href="https://svn.netbeans.org/svn/samples~samples-source-code" class="bare">https://svn.netbeans.org/svn/samples~samples-source-code</a></code>
Clique em Próximo.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique em Procurar para abrir a caixa de diálogo Procurar nas Pastas do Repositório:</p>
</li>
<li>
<p>Expanda o nó raiz e selecione <strong>samples/javaee/DVDStoreEE6</strong>. Clique em OK.</p>
</li>
<li>
<p>Especifique a Pasta Local dos códigos-fonte.</p>
</li>
<li>
<p>Clique em Finalizar.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Quando você clica em Finalizar, o IDE inicializa a pasta local como um repositório Subversion e verifica os códigos-fonte do projeto.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique em Abrir Projeto na caixa de diálogo exibida quando o check-out for concluído.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Observações.</strong> Para saber mais sobre a instalação do Subversion, consulte a seção <a href="../ide/subversion.html#settingUp">Configurando o Subversion</a> no <a href="../ide/subversion.html">Guia do Subversion no NetBeans IDE</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_solução_de_problemas">Solução de Problemas</h3>
<div class="paragraph">
<p>A maioria dos problemas que ocorrem com a aplicação do tutorial são devidos a dificuldades de comunicação entre o GlassFish Server Open Source Edition e o servidor de banco de dados MySQL. Se sua aplicação não for exibida corretamente, ou se estiver recebendo um erro do servidor, você pode verificar a seção <a href="mysql-webapp.html#troubleshoot">Solução de Problemas</a> do tutorial <a href="mysql-webapp.html">Criando uma Aplicação Web Simples Usando um Banco de Dados MySQL</a> ou o tutorial <a href="../ide/mysql.html">Estabelecendo Conexão a um Banco de Dados MySQL</a>.</p>
</div>
<div class="paragraph">
<p>Se fizer download e executar o projeto da solução, você verá o seguinte erro na janela de Saída se for a primeira vez que você implantou uma aplicação que usa o banco de dados My SQL.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    SEVERE: JDBC Driver class not found: com.mysql.jdbc.Driver
    java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
	at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1509)

        [...]

	at java.lang.Thread.run(Thread.java:680)

    SEVERE: Initial SessionFactory creation failed.org.hibernate.HibernateException: JDBC Driver class not found: com.mysql.jdbc.Driver
    INFO: cleaning up connection pool: null
    INFO: Domain Pinged: stable.glassfish.org</code></pre>
</div>
</div>
<div class="paragraph">
<p>Em sua janela do browser você pode ver um  <code>java.lang.ExceptionInInitializerError</code>  e o seguinte rastreamento de pilha.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    java.lang.ExceptionInInitializerError
	at dvdrental.HibernateUtil.&lt;clinit&gt;(HibernateUtil.java:28)
	...
    Caused by: org.hibernate.HibernateException: JDBC Driver class not found: com.mysql.jdbc.Driver

	...
    Caused by: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
	...</code></pre>
</div>
</div>
<div class="paragraph">
<p>A mensagem de saída declara que o driver JDBC do banco de dados MySQL não foi encontrado. O motivo mais provável é que você precisa adicionar o arquivo do driver JDBC de MySQL em sua instalação do servidor GlassFish. Para confirmar se o driver não foi encontrado, navegue até o diretório  <code><em>GLASSFISH-INSTALL</em>/glassfish/domains/domain1/lib</code>  em seu sistema local (no qual <em>GLASSFISH-INSTALL</em> é seu diretório de instalação GlassFish). Se o diretório  <code>domain1/lib</code>  não contiver o arquivo do driver JDBC (por exemplo, <code>mysql-connector-java-5.1.13-bin.jar</code>) você precisa copiar o driver JDBC para o diretório. O driver JDBC de MySQL não é adicionado à sua instalação do GlassFish quando você instala o servidor.</p>
</div>
<div class="paragraph">
<p>Você pode adicionar uma cópia do driver JDBC do MySQL para sua instalação do GlassFish executando as seguintes etapas.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Faça download do <a href="http://dev.mysql.com/downloads/connector/j/">Conector MySQL/driver J JDBC</a>.</p>
</li>
<li>
<p>Extrai o driver e copie o arquivo do driver (por exemplo, <code>mysql-connector-java-5.1.13-bin.jar</code>) para o diretório  <code>domain1/lib</code>  de sua instalação do GlassFish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Se preferir, quando usar o IDE para criar uma aplicação que usa o banco de dados MySQL, o IDE pode automaticamente copiar o driver JDBC de MySQL para o servidor GlassFish quando você implantar o projeto, se necessário. Para confirmar se o IDE copiará os drivers JDBC necessários, escolha Ferramentas &gt; Servidores do menu principal para abrir o gerenciador de Servidores e confirmar que a opção Ativar Implantação do Driver JDBC é selecionada para seu servidor GlassFish.</p>
</div>
<div class="paragraph">
<p>Depois de criar e implantar uma aplicação web que usa o banco de dados MySQL, se você navegar para o diretório <code>domain1/lib</code> de sua instalação GlassFish local você verá que o diretório contém o arquivo do driver JDBC.</p>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Using%20Hibernate%20in%20a%20Web%20Application">Enviar Feedback neste Tutorial</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_consulte_também">Consulte Também</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="jsf20-support.html">Suporte a JSF 2.x no NetBeans IDE</a></p>
</li>
<li>
<p><a href="jsf20-intro.html">Introdução ao JavaServer Faces 2.x</a></p>
</li>
<li>
<p><a href="../../trails/java-ee.html">Trilha de Aprendizado do Java EE e Java Web</a></p>
</li>
</ul>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/hibernate-webapp_pt_BR.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
