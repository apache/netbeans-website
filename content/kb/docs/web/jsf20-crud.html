
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Generating a JavaServer Faces 2.x CRUD Application from a Database</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Generating a JavaServer Faces 2.x CRUD Application from a Database - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Generating a JavaServer Faces 2.x CRUD Application from a Database">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Generating a JavaServer Faces 2.x CRUD Application from a Database</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/jsf20-crud.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#createDB">Creating the Database</a></li>
<li><a href="#examineDB">Examining the Database Structure</a></li>
<li><a href="#createProject">Creating the Web Application Project</a></li>
<li><a href="#generateEntity">Generating the Entity Classes from the Database</a></li>
<li><a href="#jsfPagesEntityClasses">Generating JSF Pages From Entity Classes</a></li>
<li><a href="#explore">Exploring the Application</a>
<ul class="sectlevel2">
<li><a href="#completedProject">Examining the Completed Project</a></li>
<li><a href="#populateDB">Populating the Database with an SQL Script</a></li>
<li><a href="#_netbeans_database_support">NetBeans Database Support</a></li>
<li><a href="#editorSupport">Exploring Editor Support in Facelets Pages</a></li>
<li><a href="#dbIntegrity">Exploring Database Integrity with Field Validation</a></li>
<li><a href="#editEntity">Editing Entity Classes</a></li>
</ul>
</li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#seealso">See Also</a>
<ul class="sectlevel2">
<li><a href="#_netbeans_articles_and_tutorials">NetBeans Articles and Tutorials</a></li>
<li><a href="#_external_resources">External Resources</a></li>
<li><a href="#_blogs">Blogs</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In this tutorial, you will use the NetBeans IDE to create a web application that interacts with a back-end database. The application provides you with the ability to view and modify data contained in the database - otherwise referred to as <em>CRUD</em> (Create, Read, Update, Delete) functionality. The application that you will develop relies on the following technologies.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>JavaServer Faces (JSF) 2.x</strong> for front-end web pages, validation handling, and management of the request-response cycle.</p>
</li>
<li>
<p><strong>Java Persistence API (JPA) 2.0</strong> using EclipseLink to generate entity classes from the database, and manage transactions. (EclipseLink is the reference implementation for JPA, and is the default persistence provider for the GlassFish server.)</p>
</li>
<li>
<p><strong>Enterprise JavaBeans (EJB) 3.1</strong>, which provides you with stateless EJBs that access the entity classes, and contain the business logic for the application.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The IDE provides two wizards which generate all of the code for the application. The first is the <a href="#generateEntity">Entity Classes from Database wizard</a> which enables you to generate entity classes from the provided database. After you create entity classes, you use the <a href="#jsfPagesEntityClasses">JSF Pages from Entity Classes wizard</a> to create JSF managed beans and EJBs for the entity classes, as well as a set of Facelets pages to handle the views for entity class data. The final section of the tutorial, <a href="#explore">Exploring the Application</a>, is optional, and provides numerous exercises to help you to better understand the application and become more familiar with the IDE.</p>
</div>
<div class="paragraph">
<p>To complete this tutorial, you need the following software and resources.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Software or Resource</th>
<th class="tableblock halign-left valign-top">Version Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../../../download/index.html">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7.2, 7.3, 7.4, 8.0, Java EE bundle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java Development Kit (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7 or 8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://glassfish.dev.java.net/">GlassFish Server Open Source Edition</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.x, 4.x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fmysql-consult.zip">mysql-consult.zip</a> (MySQL)
<em>or</em>
<a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fjavadb-consult.zip">javadb-consult.zip</a> (JavaDB)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Notes:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The NetBeans IDE Java EE bundle also includes the GlassFish server, a Java EE-compliant server, which you require for this tutorial.</p>
</li>
<li>
<p>For the solution project to this tutorial, download <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252FConsultingAgencyJSF20.zip">ConsultingAgencyJSF20.zip</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="createDB">Creating the Database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial uses a consulting agency database called <code>consult</code>. The database is not included when you install the IDE so you need to first create the database to follow this tutorial.</p>
</div>
<div class="paragraph">
<p>The <code>consult</code> database was designed to demonstrate the scope of IDE support for handling a variety of database structures. The database is thus not intended as an example of recommended database design or best-practice. Instead, it attempts to incorporate many of the relevant features that are potentially found in a database design. For example, the <code>consult</code> database contains all possible relationship types, composite primary keys, and many different data types. See the tables below for a more detailed overview of the database structure.</p>
</div>
<div class="paragraph">
<p><strong>Notes:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>This tutorial uses the MySQL database server but you can also complete the tutorial using the JavaDB database server. To create the database in JavaDB, download and extract the <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fjavadb-consult.zip">javadb-consult.zip</a> archive. The archive contains SQL scripts for creating, dropping, and populating the <code>consult</code> database.</p>
</li>
<li>
<p>For more information on configuring the IDE to work with MySQL, see the <a href="../ide/mysql.html">Connecting to a MySQL Database</a> tutorial.</p>
</li>
<li>
<p>For more information on configuring the IDE to work with JavaDB, see the <a href="../ide/java-db.html">Working with the Java DB (Derby) Database</a> tutorial.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>MySQL with GlassFish Combination:</strong></p>
</div>
<div class="paragraph">
<p>If you are using MySQL, and are using GlassFish v3 or Open Source Edition 3.0.1, you must ensure that your database is password-protected. (For more information, see GlassFish <a href="https://java.net/jira/browse/GLASSFISH-12221">Issue 12221</a>.) If you are using the default MySQL <code>root</code> account with an empty password, you can set the password from a command-line prompt.</p>
</div>
<div class="paragraph">
<p>For example, to set your password to <code><em>nbuser</em></code>, in a command-line prompt enter the following commands.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">shell&gt; mysql -u root
mysql&gt; UPDATE mysql.user SET Password = PASSWORD('_nbuser_') WHERE User = 'root';
mysql&gt; FLUSH PRIVILEGES;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you receive a &#8216;mysql: command not found&#8217; error, then the <code>mysql</code> command has not been added to your <code>PATH</code> environment variable. You can instead call the command by entering the full path to your MySQL installation&#8217;s <code>bin</code> directory. For example, if the <code>mysql</code> command is located on your computer at <code>/usr/local/mysql/bin</code>, enter the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">shell&gt; /usr/local/mysql/bin/mysql -u root</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information, see the offical MySQL Reference Manual:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://dev.mysql.com/doc/refman/5.1/en/default-privileges.html">Securing the Initial MySQL Accounts</a></p>
</li>
<li>
<p><a href="http://dev.mysql.com/doc/refman/5.1/en/invoking-programs.html">4.2.1. Invoking MySQL Programs</a></p>
</li>
<li>
<p><a href="http://dev.mysql.com/doc/refman/5.1/en/setting-environment-variables.html">4.2.4. Setting Environment Variables</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Perform the following steps to create a database and connect to it from the IDE.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fmysql-consult.zip">mysql-consult.zip</a> and extract the archive to your local system. When you extract the archive you will see the SQL scripts for creating and populating the database. The archive also has scripts for dropping tables.</p>
</li>
<li>
<p>In the Services window, expand the Databases node, right-click the MySQL node and choose Start Server.</p>
</li>
<li>
<p>Right-click the MySQL Server node and choose Create Database.</p>
</li>
<li>
<p>Type <strong>consult</strong> as the Database Name in the Create MySQL Database dialog. Click OK. A new node appears under the Databases node (<code>jdbc:mysql://localhost:3306/consult [root on Default schema]</code>).</p>
</li>
<li>
<p>Right-click the new node and choose Connect.</p>
</li>
<li>
<p>Choose File &gt; Open File from the main menu and navigate to the extracted file <code>mysql_create_consult.sql</code>. Click Open. The file automatically opens in the SQL editor.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/run-sql-script.png" alt="run sql script">
</div>
<div class="title">Figure 1. Open SQL files in the IDE&#8217;s editor</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that the <code>consult</code> database is selected in the Connection drop-down list in the SQL editor toolbar, then click the Run SQL ( <span class="image"><img src="images/run-sql-btn.png" alt="run sql btn"></span> ) button.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you click Run SQL, the following output appears in the Output window.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/run-sql-output.png" alt="run sql output">
</div>
<div class="title">Figure 2. Output window provides information on SQL execution</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="examineDB">Examining the Database Structure</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To confirm that the tables were created correctly, expand the Tables node under the database connection node. You can expand a table node to see the table columns, indexes and any foreign keys. You can right-click a column and choose Properties to view additional information about the column.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/services-window-tables.png" alt="services window tables">
</div>
<div class="title">Figure 3. Services window displays database connections, tables, table columns, indexes, and foreign keys</div>
</div>
<div class="paragraph">
<p><strong>Note:</strong> If you do not see any tables under the Tables node, right-click the Tables node and choose Refresh.</p>
</div>
<div class="paragraph">
<p>Looking at the structure of the <code>consult</code> database, you can see that the database contains tables that have a variety of relationships and various field types. When creating entity classes from a database, the IDE automatically generates the appropriate code for the various field types.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/diagram_consult.png" alt="diagram consult">
</div>
<div class="title">Figure 4. Entity-relationship diagram of consult database</div>
</div>
<div class="paragraph">
<p>The following table describes the tables found in the <code>consult</code> database.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Database Table</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Design Features</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLIENT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A client of the consulting agency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non-generated, composite primary key (whose fields do not constitute a foreign key)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONSULTANT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An employee of the consulting agency whom clients can hire on a contract basis</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Includes a resume field of type LONG VARCHAR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONSULTANT_STATUS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A consultant&#8217;s status with the consulting agency (for example, Active and Inactive are possible statuses)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non-generated primary key of type CHAR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RECRUITER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An employee of the consulting agency responsible for connecting clients and consultants</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PROJECT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A project that a client staffs with consultants of the consulting agency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non-generated, composite primary key that includes two fields constituting a foreign key to the CLIENT table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BILLABLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A set of hours worked by a consultant on a project, for which the consulting agency bills the relevant client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Includes an artifact field of type CLOB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADDRESS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A client&#8217;s billing address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PROJECT_CONSULTANT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Join table indicating which consultants are currently assigned to which projects</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cross-references PROJECT and CONSULTANT, the former having a composite primary key</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <code>consult</code> database includes a variety of relationships. When creating entity classes from a database, the IDE automatically generates the properties of the appropriate Java type based on the SQL type of the columns. The following table describes the entity relationships for the <code>consult</code> database. (Inverse relationships are not shown.)</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Entity</th>
<th class="tableblock halign-left valign-top">Related Entity</th>
<th class="tableblock halign-left valign-top">Relationship Information</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLIENT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RECRUITER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">nullable one-to-one with manual editing; nullable one-to-many if not edited</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLIENT has many RECRUITERs and RECRUITER has zero or one CLIENT (if not manually edited)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLIENT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADDRESS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">non-nullable one-to-one</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLIENT has one ADDRESS and ADDRESS has zero or one CLIENT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLIENT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PROJECT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">non-nullable one-to-many; in a Project entity, the value of the client field is part of the Project&#8217;s primary key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLIENT has many PROJECTs and PROJECT has one CLIENT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONSULTANT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PROJECT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">many-to-many</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONSULTANT has many PROJECTs and PROJECT has many CONSULTANTs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONSULTANT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BILLABLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">non-nullable one-to-many</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONSULTANT has many BILLABLEs and BILLABLE has one CONSULTANT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONSULTANT_STATUS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONSULTANT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">non-nullable one-to-many</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONSULTANT_STATUS has many CONSULTANTs and CONSULTANT has one CONSULTANT_STATUS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONSULTANT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RECRUITER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">nullable one-to-many</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONSULTANT has zero or one RECRUITER and RECRUITER has many CONSULTANTs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BILLABLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PROJECT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">non-nullable one-to-many</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BILLABLE has one PROJECT and PROJECT has many BILLABLEs</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Now that the database is created, you can create the web application and use the Entity Classes from Database wizard to generate entity classes based on the database tables.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="createProject">Creating the Web Application Project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this exercise you create a web project and add the JavaServer Faces framework to the project. When you create the project, you will select JavaServer Faces in the Frameworks panel of the New Project wizard.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Choose File &gt; New Project (Ctrl-Shift-N; ⌘-Shift-N on Mac) from the main menu.</p>
</li>
<li>
<p>Select Web Application from the Java Web category. Click Next.</p>
</li>
<li>
<p>Type <code>ConsultingAgency</code> for the project name and set the project location. Click Next.</p>
</li>
<li>
<p>Set the server to GlassFish and set the Java EE Version to Java EE 6 Web or Java EE 7 Web. Click Next.</p>
</li>
<li>
<p>In the Frameworks panel, select the JavaServer Faces option. Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you click Finish, the IDE generates the web application project and opens <code>index.xhtml</code> in the editor.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="generateEntity">Generating the Entity Classes from the Database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After connecting to a database in the IDE, you can use the Entity Classes from Database wizard to quickly generate entity classes based on the tables in the database. The IDE can generate entity classes for each table that you select, and can also generate any necessary entity classes for related tables.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Projects window, right-click the <code>ConsultingAgency</code> project node, and choose New &gt; Entity Classes from Database. (If this option is not listed, choose Other. Then, in the File wizard, select the Persistence category, then Entity Classes from Database.)</p>
</li>
<li>
<p>Select New Data Source from the Data Source drop-down list to open the Create Data Source dialog.</p>
</li>
<li>
<p>Type <code>jdbc/consult</code> as the JNDI Name and select the <code>jdbc:mysql://localhost:3306/consult</code> connection as the Database Connection.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/create-datasource.png" alt="create datasource">
</div>
<div class="title">Figure 5. Specify a JNDI name and database connection to create a datasource</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click OK to close the dialog box and return to the wizard. The tables in the <code>consult</code> database appear in the Available Tables listbox.</p>
</li>
<li>
<p>Click the Add All button to select all tables contained in the database. Click Next.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/new-entities-wizard.png" alt="new entities wizard">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Type <code>jpa.entities</code> as the Package name.</p>
</li>
<li>
<p>Confirm that the checkboxes to generate named queries and create a persistence unit are selected. Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you click Finish, the IDE generates the entity classes in the <code>jpa.entities</code> package of the project.</p>
</div>
<div class="paragraph">
<p>When using the wizard to create entity classes from a database, the IDE examines the relationships between database tables. In the Projects window, if you expand the <code>jpa.entities</code> package node, you can see that the IDE generated an entity class for each table except for the <code>PROJECT_CONSULTANT</code> table. The IDE did not create an entity class for <code>PROJECT_CONSULTANT</code> because the table is a join table.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projects-window-entities.png" alt="projects window entities">
</div>
<div class="title">Figure 6. screenshot of Projects window showing generated entity classes</div>
</div>
<div class="paragraph">
<p>The IDE also generated two additional classes for the tables with composite primary keys: <code>CLIENT</code> and <code>PROJECT</code>. The primary key classes for these tables (<code>ClientPK.java</code> and <code>ProjectPK.java</code>) have <code>PK</code> appended to the name.</p>
</div>
<div class="paragraph">
<p>If you look at the generated code for the entity classes you can see that the wizard added <code>@GeneratedValue</code> annotations to the auto-generated ID fields and <code>@Basic(optional = "false")</code> annotations to some of the fields in the entity classes. Based on the <code>@Basic(optional = "false")</code> annotations, the JSF Pages from Entity Classes wizard can generate code that includes checks to prevent non-nullable column violations for those fields.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jsfPagesEntityClasses">Generating JSF Pages From Entity Classes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that the entity classes are created, you can create the web interface for displaying and modifying the data. You will use the JSF Pages from Entity Classes wizard to generate JavaServer Faces pages. The code generated by the wizard is based on persistence annotations contained in the entity classes.</p>
</div>
<div class="paragraph">
<p>For each entity class the wizard generates the following files.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a stateless session bean that extends  <code>AbstractFacade.java</code></p>
</li>
<li>
<p>a JSF session-scoped, managed bean</p>
</li>
<li>
<p>a directory containing four Facelets files for CRUD capabilities (<code>Create.xhtml</code>, <code>Edit.xhtml</code>, <code>List.xhtml</code>, and <code>View.xhtml</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The wizard also generates the following files.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the  <code>AbstractFacade.java</code>  class that contains the business logic for creation, retrieval, modification and removal of entity instances</p>
</li>
<li>
<p>utility classes used by the JSF managed beans (<code>JsfUtil</code>, <code>PaginationHelper</code>)</p>
</li>
<li>
<p>a properties bundle for localized messages, and a corresponding entry in the project&#8217;s Faces configuration file (A <code>faces-config.xml</code> file is created if one does not already exist.)</p>
</li>
<li>
<p>auxiliary web files, including a default stylesheet for rendered components, and a Facelets template file</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To generate the JSF pages:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Projects window, right-click the project node and choose New &gt; JSF Pages from Entity Classes to open the wizard. (If this option is not listed, choose Other. Then, in the File wizard, select the JavaServer Faces category, then JSF Pages from Entity Classes.)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The Available Entity Classes box lists the seven entity classes contained in the project. The box does not list the embeddable classes (<code>ClientPK.java</code> and <code>ProjectPK.java</code>).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click Add All to move all the classes to the Selected Entity Classes box.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/newjsf-wizard.png" alt="newjsf wizard">
</div>
<div class="title">Figure 7. New JSF Pages from Entity Classes wizard displays all entity classes contained in project</div>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Step 3 of the wizard, Generate JSF Pages and Classes, type <code>jpa.session</code> for the JPA Session Bean Package.</p>
</li>
<li>
<p>Type <code>jsf</code> for the JSF Classes Package.</p>
</li>
<li>
<p>Enter &#8216;/resources/Bundle&#8217; into the Localization Bundle Name field. This will generate a package named <code>resources</code> which the <code>Bundle.properties</code> file will reside in. (If you leave this blank, the properties bundle will be created in the project&#8217;s default package.)</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/newjsf-wizard2.png" alt="newjsf wizard2">
</div>
<div class="title">Figure 8. Specify package and folder names for generated files</div>
</div>
<div class="paragraph">
<p>To let the IDE better accommodate your project conventions, you can customize any files generated by the wizard. Click the Customize Template link to modify the file templates used by the wizard.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/customize-template.png" alt="customize template">
</div>
<div class="title">Figure 9. Customize templates for files generated by the wizard</div>
</div>
<div class="paragraph">
<p>In general, you can access and make changes to all templates maintained by the IDE using the Template Manager (Tools &gt; Templates).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click Finish. The IDE generates the stateless session beans in the <code>jpa.session</code> package, and the JSF session-scoped, managed beans in the <code>jsf</code> package. Each stateless session bean handles the operations for the corresponding entity class, including creating, editing, and destroying instances of the entity class via the Java Persistence API. Each JSF managed bean implements the <code>javax.faces.convert.Converter</code> interface and performs the work of converting instances of the corresponding entity class to <code>String</code> objects and vice versa.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you expand the Web Pages node, you can see that the IDE generated a folder for each of the entity classes. Each folder contains the files <code>Create.xhtml</code>, <code>Edit.xhtml</code>, <code>List.xhtml</code> and <code>View.xhtml</code>. The IDE also modified the <code>index.xhtml</code> file by inserting links to each of the <code>List.xhtml</code> pages.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projects-jsfpages.png" alt="projects jsfpages">
</div>
<div class="title">Figure 10. Facelets pages for each entity class are generated by the wizard</div>
</div>
<div class="paragraph">
<p>Each JSF managed bean is specific to the four corresponding Facelets files and includes code that invokes methods in the appropriate session bean.</p>
</div>
<div class="paragraph">
<p>Expand the <code>resources</code> folder node to locate the default <code>jsfcrud.css</code> stylesheet that was generated by the wizard. If you open the application welcome page (<code>index.xhtml</code>) or the Facelets template file (<code>template.xhtml</code>) in the editor, you will see that it contains a reference to the stylesheet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;h:outputStylesheet name="css/jsfcrud.css"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Facelets template file is used by each of the four Facelets files for each entity class.</p>
</div>
<div class="paragraph">
<p>If you expand the Source Packages node you can see the session beans, JSF managed beans, utility classes, and properties bundle that the wizard generated.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projects-generated-classes70.png" alt="projects generated classes70">
</div>
<div class="title">Figure 11. screenshot of Source Packages directory in Projects window showing classes generated by wizard</div>
</div>
<div class="paragraph">
<p>The wizard also generated a Faces Configuration file (<code>faces-config.xml</code>) in order to register the location of the properties bundle. If you expand the Configuration Files node and open <code>faces-config.xml</code> in the XML editor, you can see that the following entry is included.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;application&gt;
    &lt;resource-bundle&gt;
        &lt;base-name&gt;/resources/Bundle&lt;/base-name&gt;
        &lt;var&gt;bundle&lt;/var&gt;
    &lt;/resource-bundle&gt;
&lt;/application&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Also, if you expand the new <code>resources</code> package, you&#8217;ll find the <code>Bundle.properties</code> file that contains messages for the client&#8217;s default language. The messages have been derived from the entity class properties.</p>
</div>
<div class="paragraph">
<p>To add a new property bundle, right-click the <code>Bundle.properties</code> file and choose Customize. The Customizer dialog enables you to add new locales to your application.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="explore">Exploring the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that your project contains entity classes, EJB session beans to control the entity classes, and a JSF-powered front-end to display and modify database, try running the project to see the results.</p>
</div>
<div class="paragraph">
<p>The following is a series of short, optional exercises that help you to become familiar with the application, as well as the features and functionality offered to you by the IDE.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#completedProject">Examining the Completed Project</a></p>
</li>
<li>
<p><a href="#populateDB">Populating the Database with an SQL Script</a></p>
</li>
<li>
<p><a href="#editorSupport">Exploring Editor Support in Facelets Pages</a></p>
</li>
<li>
<p><a href="#dbIntegrity">Exploring Database Integrity with Field Validation</a></p>
</li>
<li>
<p><a href="#editEntity">Editing Entity Classes</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="completedProject">Examining the Completed Project</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To run the project, either right-click the project node in the Projects window and choose Run, or click the Run Project ( <span class="image"><img src="images/run-project-btn.png" alt="run project btn"></span> ) button in the main toolbar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When the application&#8217;s welcome page displays, you are provided with a list of links enabling you to view entries contained in each database table.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/welcome-page-links.png" alt="welcome page links">
</div>
<div class="title">Figure 12. Links to display database contents for each table</div>
</div>
<div class="paragraph">
<p>The links were added to the welcome page (<code>index.xhtml</code>) when you completed the JSF Pages from Entity Classes wizard. They are provided as entry points into the Facelets pages that provide CRUD functionality on the Consulting Agency database.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;h:body&gt;
    Hello from Facelets
    &lt;h:form&gt;
        &lt;h:commandLink action="/address/List" value="Show All Address Items"/&gt;
    &lt;/h:form&gt;
    &lt;h:form&gt;
        &lt;h:commandLink action="/billable/List" value="Show All Billable Items"/&gt;
    &lt;/h:form&gt;
    &lt;h:form&gt;
        &lt;h:commandLink action="/client/List" value="Show All Client Items"/&gt;
    &lt;/h:form&gt;
    &lt;h:form&gt;
        &lt;h:commandLink action="/consultant/List" value="Show All Consultant Items"/&gt;
    &lt;/h:form&gt;
    &lt;h:form&gt;
        &lt;h:commandLink action="/consultantStatus/List" value="Show All ConsultantStatus Items"/&gt;
    &lt;/h:form&gt;
    &lt;h:form&gt;
        &lt;h:commandLink action="/project/List" value="Show All Project Items"/&gt;
    &lt;/h:form&gt;
    &lt;h:form&gt;
        &lt;h:commandLink action="/recruiter/List" value="Show All Recruiter Items"/&gt;
    &lt;/h:form&gt;
&lt;/h:body&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the &#8216;Show All Consultant Items&#8217; link. Looking at the code above, you can see that the target page is <code>/consultant/List.xhtml</code>. (In JSF 2.x, the file extension is inferred due to implicit navigation.)</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/empty-consultants-list.png" alt="empty consultants list">
</div>
<div class="title">Figure 13. Consultants table is currently empty</div>
</div>
<div class="paragraph">
<p>The database currently doesn&#8217;t contain any sample data. You can add data manually by clicking the &#8216;Create New Consultant&#8217; link and using the provided web form. This triggers the <code>/consultant/Create.xhtml</code> page to display. You can also run an SQL script in the IDE to populate tables with sample data. The following sub-sections explore both options.</p>
</div>
<div class="paragraph">
<p>You can click the index link to return to the links listed in the welcome page. The links provide you with a view of the data held in each database table and trigger the <code>List.xhtml</code> file for each entity folder to display. As is later demonstrated, after you add data to the tables, other links will display for each entry enabling you to view (<code>View.xhtml</code>), edit (<code>Edit.xhmtl</code>), and destroy data for a single table record.</p>
</div>
<div class="paragraph">
<p><strong>Note.</strong> If the application fails to deploy, see the <a href="#troubleshooting">troubleshooting section</a> below. (Also see the troubleshooting section of <a href="mysql-webapp.html#troubleshoot">Creating a Simple Web Application Using a MySQL Database</a>.)</p>
</div>
</div>
<div class="sect2">
<h3 id="populateDB">Populating the Database with an SQL Script</h3>
<div class="paragraph">
<p>Run the provided script, which generates sample data for the database tables. The script (<code>mysql_insert_data_consult.sql</code>) is included in the Consulting Agency Database zip file which you can download from the <a href="#requiredSoftware">required software table</a>.</p>
</div>
<div class="paragraph">
<p>Depending on the database server you are working with (MySQL or JavaDB), you can run the provided script, which generates sample data for the database tables. For MySQL, this is the <code>mysql_insert_data_consult.sql</code> script. For JavaDB, this is the <code>javadb_insert_data_consult.sql</code> script. Both scripts are included in their respective archives, which can be downloaded from the <a href="#requiredSoftware">required software table</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Choose File &gt; Open File from the main menu, then navigate to the location of the script on your computer. Click Open. The file automatically opens in the IDE&#8217;s SQL editor.</p>
</li>
<li>
<p>Make sure that the <code>consult</code> database is selected in the Connection drop-down list in the SQL editor toolbar.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/run-sql-insert.png" alt="run sql insert">
</div>
<div class="title">Figure 14. Open the script in the IDE&#8217;s SQL editor</div>
</div>
<div class="paragraph">
<p>Either right-click in the editor and choose Run Statement, or click the Run SQL ( <span class="image"><img src="images/run-sql-btn.png" alt="run sql btn"></span> ) button. You can see the result of the script execution in the Output window.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Restart the GlassFish server. This is a necessary step to enable the server to reload and cache the new data contained in the <code>consult</code> database. To do so, click the GlassFish server tab in the Output window (The GlassFish server tab displays the server log.), then click the Restart Server ( <span class="image"><img src="images/glassfish-restart.png" alt="glassfish restart"></span> ) button in the left margin. The server stops, then restarts.</p>
</li>
<li>
<p>Run the project again and click the &#8216;Show All Consultant Items&#8217; link. You will see that the list is no longer empty.</p>
</li>
</ol>
</div>
<div class="openblock">
<div class="content">
<div class="imageblock left">
<div class="content">
<a class="image" href="images/consultants-list.png"><img src="images/consultants-list-small.png" alt="consultants list small"></a>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_netbeans_database_support">NetBeans Database Support</h3>
<div class="paragraph">
<p>You can use the IDE&#8217;s database table viewer to display and modify table data maintained directly in the database. For example, right-click the <code>consultant</code> table in the Services window, and choose View Data.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/view-data.png" alt="view data">
</div>
<div class="title">Figure 15. Choose View Data from the right-click menu of database tables</div>
</div>
<div class="paragraph">
<p>The SQL query used to perform the action displays in the upper portion of the editor, and a graphical view of the table displays beneath.</p>
</div>
<div class="openblock feature">
<div class="content">
<div class="imageblock left">
<div class="content">
<a class="image" href="images/view-data-table.png"><img src="images/view-data-table-small.png" alt="view data table small"></a>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Double-click inside table cells to perform inline modifications to data. Click the Commit Records ( <span class="image"><img src="images/commit-records-icon.png" alt="commit records icon"></span> ) icon to commit changes to the database.</p>
</div>
<div class="paragraph">
<p>The graphical view provides much more functionality. See <a href="../ide/database-improvements-screencast.html">Database Support in NetBeans IDE</a> for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="editorSupport">Exploring Editor Support in Facelets Pages</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the <code>/consultant/List.xhtml</code> page in the editor. Line 8 indicates that the page relies on the Facelets <code>template.xhtml</code> file to render.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;ui:composition template="/template.xhtml"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To display line numbers, right-click in the editor&#8217;s left margin and choose Show Line Numbers.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use the IDE&#8217;s Go to File dialog to open <code>template.xhtml</code>. Press Alt-Shift-O (Ctrl-Shift-O on Mac), then begin typing <code>template</code>.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/go-to-file.png" alt="go to file">
</div>
<div class="title">Figure 16. Use the Go to File dialog to quickly open project files</div>
</div>
<div class="paragraph">
<p>Click OK (or press Enter).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The template applies the <code>&lt;ui:insert&gt;</code> tags to insert content from other files into its title and body. Place your cursor on the <code>&lt;ui:insert&gt;</code> tag, then press Ctrl-Space to invoke a documentation popup window.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/doc-popup.png" alt="doc popup">
</div>
<div class="title">Figure 17. Press Ctrl-Space to invoke a documentation popup on Facelets tags</div>
</div>
<div class="paragraph">
<p>You can press Ctrl-Space on JSF tags and their attributes to invoke a documentation pop-up. The documentation you see is taken from the descriptions provided in the official <a href="http://javaserverfaces.java.net/nonav/docs/2.1/vdldocs/facelets/index.html">JSF Tag Library Documentation</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Switch back to the <code>List.xhtml</code> file (press Ctrl-Tab). The <code>&lt;ui:define&gt;</code> tags are used to define the content that will be applied to the template&#8217;s title and body. This pattern is used for all four Facelets files (<code>Create.xhtml</code>, <code>Edit.xhtml</code>, <code>List.xhtml</code>, and <code>View.xhtml</code>) generated for each entity class.</p>
</li>
<li>
<p>Place your cursor on any of the EL expressions used for localized messages contained in the <code>Bundle.properties</code> file. Press Ctrl-Space to view the localized message.</p>
</li>
</ol>
</div>
<div class="openblock">
<div class="content">
<div class="imageblock left">
<div class="content">
<a class="image" href="images/localized-messages.png"><img src="images/localized-messages-small.png" alt="localized messages small"></a>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the above image, you can see that the EL expression resolves to &#8216;List&#8217;, which is applied to the template title and can be verified from the page rendered in the browser.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Scroll to the bottom of the file and locate the code for the <code>Create New Consultant</code> link (Line 92). This is as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;h:commandLink action="#{consultantController.prepareCreate}" value="#{bundle.ListConsultantCreateLink}"/&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Press Ctrl-Space on the <code>commandLink&#8217;s `action</code> attribute to invoke the documentation pop-up.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <code>action</code> attribute indicates the method that handles the request when the link is clicked in the browser. The following documentation is provided:</p>
</div>
<div class="paragraph">
<p><em>MethodExpression representing the application action to invoke when this component is activated by the user. The expression must evaluate to a public method that takes no parameters, and returns an Object (the toString() of which is called to derive the logical outcome) which is passed to the NavigationHandler for this application.</em>
In other words, the <code>action</code> value typically refers to a method in a JSF managed bean that evaluates to a <code>String</code>. The string is then used by JSF&#8217;s <code>NavigationHandler</code> to forward the request to the appropriate view. You verify this in the following steps.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Place your cursor on <code>consultantController</code> and press Ctrl-Space. The editor&#8217;s code completion indicates that <code>consultantController</code> is a JSF managed bean.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/code-completion-managed-bean.png" alt="code completion managed bean">
</div>
<div class="title">Figure 18. Code completion is provided for JSF managed beans</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Move your cursor to <code>prepareCreate</code> and press Ctrl-Space. Code completion lists methods contained in the <code>ConsultantController</code> managed bean.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/code-completion-properties.png" alt="code completion properties">
</div>
<div class="title">Figure 19. Code completion is provided for class methods</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Press Ctrl (⌘ on Mac), then hover your mouse over <code>prepareCreate</code>. A link is formed, enabling you to navigate directly to the <code>prepareCreate()</code> method in the <code>ConsultantController</code> managed bean.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/editor-navigation.png" alt="editor navigation">
</div>
<div class="title">Figure 20. Use editor navigation to quickly navigate source code</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the link and view the <code>prepareCreate()</code> method (displayed below).</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public String prepareCreate() {
    current = new Consultant();
    selectedItemIndex = -1;
    return "Create";
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The method returns <code>Create</code>. The <code>NavigationHandler</code> gathers information behind the scenes, and applies the <code>Create</code> string to the path which targets the view sent in response to the request: <code>/consultant/<strong>Create</strong>.xhtml</code>. (In JSF 2.x, the file extension is inferred due to implicit navigation.)</p>
</div>
</div>
<div class="sect2">
<h3 id="dbIntegrity">Exploring Database Integrity with Field Validation</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the <a href="#consultantsList">Consultants List page</a> in the browser, click the &#8216;Create New Consultant&#8217; link. As demonstrated in the previous sub-section, this triggers the <code>/consultant/Create.xhtml</code> page to render.</p>
</li>
<li>
<p>Enter the following details into the form. For the time being, leave both <code>RecruiterId</code> and <code>StatusId</code> fields blank.</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ConsultantId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="mailto:jack.smart@jsfcrudconsultants.com">jack.smart@jsfcrudconsultants.com</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jack.smart</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HourlyRate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">75</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BillableHourlyRate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">110</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HireDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">07/22/2008</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resume</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I&#8217;m a great consultant. Hire me - You won&#8217;t be disappointed!</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RecruiterId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">---</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">StatusId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">---</p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click Save. When you do so, a validation error is flagged for the <code>StatusId</code> field.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/create-new-consultant.png" alt="create new consultant">
</div>
<div class="title">Figure 21. Enter sample data into the form</div>
</div>
<div class="paragraph">
<p>Why did this happen? Reexamine the <a href="#er-diagram">entity-relationship diagram for the Consulting Agency database</a>. As stated in the <a href="#relationships">relationships table</a> above, the <code>CONSULTANT</code> and <code>CONSULTANT_STATUS</code> tables share a non-nullable, one-to-many relationship. Therefore, every entry in the <code>CONSULTANT</code> table must contain a reference to an entry in the <code>CONSULTANT_STATUS</code> table. This is denoted by the <code>consultant_fk_consultant_status</code> foreign key that links the two tables.</p>
</div>
<div class="paragraph">
<p>You can view foreign keys held by tables by expanding a table&#8217;s Foreign Keys node in the Services window (Ctrl-5; ⌘-5 on Mac).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/consultant-fk.png" alt="consultant fk">
</div>
<div class="title">Figure 22. Examine foreign key attributes in the Services window</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To overcome the validation error, select <code>entity.ConsultantStatus[statusId=A]</code> from the <code>StatusId</code> drop-down list.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>*Note: *You can leave the <code>RecruiterId</code> field blank. As indicated in the <a href="#er-diagram">database entity-relationship diagram</a>, there is a nullable, one-to-many relationship between the <code>CONSULTANT</code> and <code>RECRUITER</code> tables, meaning that entries in <code>CONSULTANT</code> do not need to be associated with a <code>RECRUITER</code> entry.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click Save. A message displays, indicating that the consultant entry was successfully saved. If you click <code>Show All Consultant Items</code>, you&#8217;ll see the new entry listed in the table.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In general, the generated Facelets pages provide errors for user input that introduces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>empty fields for non-nullable table cells.</p>
</li>
<li>
<p>modifications to data that cannot be altered (e.g., primary keys).</p>
</li>
<li>
<p>insertion of data that is not of the correct type.</p>
</li>
<li>
<p>modifications to data when a user&#8217;s view is no longer synchronized with the database.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="editEntity">Editing Entity Classes</h3>
<div class="paragraph">
<p>In the previous sub-section, you saw how the <code>StatusId</code> drop-down list provided you with the not-so-user-friendly <code>entity.ConsultantStatus[statusId=A]</code> option. You may already be aware that the text displayed for each item in this drop-down is a string representation for each <code>ConsultantStatus</code> entity encountered (i.e., The entity class' <code>toString()</code> method is called).</p>
</div>
<div class="paragraph">
<p>This sub-section demonstrates how you can use the editor&#8217;s code completion, documentation, and navigation support to make this conclusion. It also has you prepare a more user-friendly message for the drop-down list.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the <code>/consultant/Create.xhtml</code> file in the editor. This is the Create New Consultant form which you just viewed in the browser. Scroll down to the code for the <code>StatusId</code> drop-down (shown in <strong>bold</strong> below).</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">    &lt;h:outputLabel value="#{bundle.CreateConsultantLabel_resume}" for="resume" /&gt;
    &lt;h:inputTextarea rows="4" cols="30" id="resume" value="#{consultantController.selected.resume}" title="#{bundle.CreateConsultantTitle_resume}" /&gt;
    *&lt;h:outputLabel value="#{bundle.CreateConsultantLabel_statusId}" for="statusId" /&gt;
    &lt;h:selectOneMenu id="statusId" value="#{consultantController.selected.statusId}" title="#{bundle.CreateConsultantTitle_statusId}" required="true" requiredMessage="#{bundle.CreateConsultantRequiredMessage_statusId}"&gt;
        &lt;f:selectItems value="#{consultantStatusController.itemsAvailableSelectOne}"/&gt;
    &lt;/h:selectOneMenu&gt;*
    &lt;h:outputLabel value="#{bundle.CreateConsultantLabel_recruiterId}" for="recruiterId" /&gt;
    &lt;h:selectOneMenu id="recruiterId" value="#{consultantController.selected.recruiterId}" title="#{bundle.CreateConsultantTitle_recruiterId}" &gt;
        &lt;f:selectItems value="#{recruiterController.itemsAvailableSelectOne}"/&gt;
    &lt;/h:selectOneMenu&gt;
&lt;/h:panelGrid&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Examine the <code>value</code> applied to the <code>&lt;f:selectItems&gt;</code> tag. The <code>value</code> attribute determines the text that displays for each item in the drop-down list.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Press Ctrl-Space on <code>itemsAvailableSelectOne</code>. The editor&#8217;s code completion indicates that the <code>ConsultantStatusController&#8217;s `getItemsAvailableSelectOne()</code> method returns an array of <code>SelectItem</code> objects.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/code-completion-returned-object.png" alt="code completion returned object">
</div>
<div class="title">Figure 23. Code completion displays returned classes for methods</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Press Ctrl (⌘ on Mac), then hover your mouse over <code>itemsAvailableSelectOne</code>. A link is formed, enabling you to navigate directly to the <code>getItemsAvailableSelectOne()</code> method in the <code>ConsultantStatus</code> entity&#8217;s source code. Click this link.</p>
</li>
<li>
<p>Place your cursor on the <code>SelectItem[]</code> return value in the method signature, and press Ctrl-Space to invoke the documentation pop-up.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/documentation-select-item.png" alt="documentation select item">
</div>
<div class="title">Figure 24. Press Ctrl-Space to invoke documentation support</div>
</div>
<div class="paragraph">
<p>Click the web browser ( <span class="image"><img src="images/web-browser-icon.png" alt="web browser icon"></span> ) icon in the documentation window to open the Javadoc in an external web browser.</p>
</div>
<div class="paragraph">
<p>As you can see, the <code>SelectItem</code> class belongs to the JSF framework. The <code>UISelectOne</code> component, as mentioned in the documentation, is represented by the <code>&lt;h:selectOneMenu&gt;</code> tag from the markup which you examined in <a href="#markup">Step 1</a> above.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Press Ctrl (⌘ on Mac), then hover your mouse over <code>findAll()</code>. A pop-up appears, displaying the method signature.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/method-signature.png" alt="method signature">
</div>
<div class="title">Figure 25. View pop-ups of method signatures in the editor</div>
</div>
<div class="paragraph">
<p>You can see that here <code>ejbFacade.findAll()</code> returns a <code>List</code> of <code>ConsultantStatus</code> objects.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to <code>JsfUtil.getSelectItems</code>. Hover your mouse over <code>getSelectItems</code> and press Ctrl (⌘ on Mac), then click the link that displays.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>*Note: *Recall that <code>JsfUtil</code> is one of the utility classes that was generated when you completed the <a href="#jsfPagesEntityClasses">JSF Pages from Entity Classes wizard</a>.</p>
</div>
<div class="paragraph">
<p>The method loops through the list of entities (i.e, the <code>List</code> of <code>ConsultantStatus</code> objects), creating a <code>SelectItem</code> for each. As indicated in <strong>bold</strong> below, each <code>SelectItem</code> is created using the entity object and a <em>label</em> for the object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public static SelectItem[] getSelectItems(List&lt;?&gt; entities, boolean selectOne) {
    int size = selectOne ? entities.size() + 1 : entities.size();
    SelectItem[] items = new SelectItem[size];
    int i = 0;
    if (selectOne) {
        items[0] = new SelectItem("", "---");
        i++;
    }
    *for (Object x : entities) {
        items[i++] = new SelectItem(x, x.toString());
    }*
    return items;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The label is created using the entity&#8217;s <code>toString()</code> method, and is the representation of the object when rendered in the response. (See the Javadoc definition for the <code>SelectItem(java.lang.Object value, java.lang.String label)</code> constructor.)</p>
</div>
<div class="paragraph">
<p>Now that you have verified that the entity <code>toString()</code> method is what is rendered in the browser when you view items in a drop-down list, modify the <code>ConsultantStatus</code> <code>toString()</code> method.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the <code>ConsultantStatus</code> entity class in the editor. Modify the <code>toString</code> method to return the <code>statusId</code> and <code>description</code>. These are entity properties which correspond to the two columns of the <code>CONSULTANT_STATUS</code> table.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public String toString() {
    return *statusId + ", " + description;*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the project again. When the browser displays the welcome page, click the <code>Show All Consultant Items</code> link, then click <code>Create New Consultant</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Inspect the <code>StatusId</code> drop-down. You&#8217;ll see that it now displays the status ID and description for the one record contained in the database&#8217;s <code>CONSULTANT_STATUS</code> table.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/drop-down.png" alt="drop down">
</div>
<div class="title">Figure 26. StatusId drop-down displays items according to ConsultantStatus entity&#8217;s toString() method</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="troubleshooting">Troubleshooting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Depending on your configuration, deploying the application to the server can fail and you might see the following message in the Output window.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">GlassFish Server 4 is running.
In-place deployment at /MyDocuments/ConsultingAgency/build/web
GlassFish Server 4, deploy, null, false
/MyDocuments/ConsultingAgency/nbproject/build-impl.xml:1045: The module has not been deployed.
See the server log for details.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The most common cause for the failure is a problem when generating the JDBC resources on the server. If this is the case, you will probably see a message similar to the following in the server log tab in the Output window.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Severe:   Exception while preparing the app : Invalid resource : jdbc/consult__pm
com.sun.appserv.connectors.internal.api.ConnectorRuntimeException: Invalid resource : jdbc/consult__pm</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the server log tab is not open you can open the tab by right-clicking the GlassFish Server node in the Services window and choosing View Domain Server Log.</p>
</div>
<div class="paragraph">
<p>This application requires two JDBC resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JDBC Resource or Datasource. The application uses JNDI lookup to locate the JDBC resource. If you look in the persistence unit (<code>persistence.xml</code>) you can see that the JNDI name for the JTA data source for this application is <code>jdbc/consult</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The JDBC resource identifies the connection pool that is currently used by the application.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JDBC Connection Pool. The connection pool specifies the connection details for the database, including the location, user name, password. The connection pool that is used for this application is <code>consultPool</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The JDBC resource and connection pool are specified in the <code>glassfish-resources.xml</code> file. You can open <code>glassfish-resources.xml</code> in the editor by expanding the Server Resources node in the Projects window and double-clicking the file. The file will look similar to the following.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE resources PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Resource Definitions//EN" "http://glassfish.org/dtds/glassfish-resources_1_5.dtd"&gt;
&lt;resources&gt;
  &lt;jdbc-connection-pool allow-non-component-callers="false" associate-with-thread="false" connection-creation-retry-attempts="0" connection-creation-retry-interval-in-seconds="10" connection-leak-reclaim="false" connection-leak-timeout-in-seconds="0" connection-validation-method="auto-commit" datasource-classname="com.mysql.jdbc.jdbc2.optional.MysqlDataSource" fail-all-connections="false" idle-timeout-in-seconds="300" is-connection-validation-required="false" is-isolation-level-guaranteed="true" lazy-connection-association="false" lazy-connection-enlistment="false" match-connections="false" max-connection-usage-count="0" max-pool-size="32" max-wait-time-in-millis="60000" name="consultPool" non-transactional-connections="false" ping="false" pool-resize-quantity="2" pooling="true" res-type="javax.sql.DataSource" statement-cache-size="0" statement-leak-reclaim="false" statement-leak-timeout-in-seconds="0" statement-timeout-in-seconds="-1" steady-pool-size="8" validate-atmost-once-period-in-seconds="0" wrap-jdbc-objects="false"&gt;
    &lt;property name="serverName" value="localhost"/&gt;
    &lt;property name="portNumber" value="3306"/&gt;
    &lt;property name="databaseName" value="consult"/&gt;
    &lt;property name="User" value="root"/&gt;
    &lt;property name="Password" value="nb"/&gt;
    &lt;property name="URL" value="jdbc:mysql://localhost:3306/consult?zeroDateTimeBehavior=convertToNull"/&gt;
    &lt;property name="driverClass" value="com.mysql.jdbc.Driver"/&gt;
  /&lt;jdbc-connection-pool&gt;
  &lt;jdbc-resource enabled="true" jndi-name="jdbc/consult" object-type="user" pool-name="consultPool"/&gt;
/&lt;resources&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In <code>glassfish-resources.xml</code> you can see that the JDBC resource <code>jdbc/consult</code> identifies <code>consultPool</code> as the name of the connection pool. You can also see the properties for <code>consultPool</code>. In this application only one datasource and one connection pool are defined in <code>glassfish-resources.xml</code>. In some cases you might want to specify additional resources, for example, to identify a temporary data store that is used only for development or for testing.</p>
</div>
<div class="paragraph">
<p>If the JDBC resource and connection pool were not generated automatically on the server when you tried to the application, you can perform the following steps to manually create the resources in the GlassFish Admin Console.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open <code>glassfish-resources.xml</code> in the editor if it is not already open.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You will use the property values that are specified in <code>glassfish-resources.xml</code> when you create the JDBC resource and connection pool.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click the GlassFish Server node in the Services window and choose Open Domain Admin Console in the popup menu to open the GlassFish Console in your browser.</p>
</li>
<li>
<p>In the Common Tasks navigation panel of the GlassFish Console, expand the <strong>JDBC</strong> node and the <strong>JDBC Resources</strong> and <strong>JDBC Connection Pools</strong> nodes.</p>
</li>
</ol>
</div>
<div class="openblock">
<div class="content">
<div class="imageblock left">
<div class="content">
<a class="image" href="images/gf-admin-console-lg.png"><img src="images/gf-admin-console-sm.png" alt="gf admin console sm"></a>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can see the JDBC resources that are currently registered with the server. You will need to create <code>jdbc/consult</code> and <code>consultPool</code> if they are not listed under the JDBC node in the Common Tasks navigation panel. Some JDBC resources were created by default when you installed the server and are displayed as sub-nodes.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the <strong>JDBC Connection Pools</strong> node and click New in the New JDBC Connection Pool pane.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gf-new-jdbc-pool1.png" alt="gf new jdbc pool1">
</div>
<div class="title">Figure 27. New JDBC Connection Pool pane in the GlassFish Admin Console</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Type <strong>consultPool</strong> as the Pool Name, select <strong>javax.sql.ConnectionPoolDataSource</strong> as the Resource Type and select <strong>MySql</strong> as the Database Driver Vendor. Click Next.</p>
</li>
<li>
<p>In Step 2, locate and specify the values for the <strong>URL</strong>, <strong>username</strong> and <strong>password</strong> properties. Click Finish.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gf-new-jdbc-pool2.png" alt="gf new jdbc pool2">
</div>
<div class="title">Figure 28. New JDBC Connection Pool panel in the GlassFish Admin Console</div>
</div>
<div class="paragraph">
<p>You can find the values for the properties in <code>glassfish-resources.xml</code>.</p>
</div>
<div class="paragraph">
<p>The new connection pool is created on the server when you click Finish and a node for the connection pool is displayed under the JDBC Connection Pools node.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the <strong>JDBC Resources</strong> node in the Common Tasks navigation panel and click New.</p>
</li>
<li>
<p>Type <strong>jdbc/consult</strong> for the JNDI Name and select <strong>consultPool</strong> in the Pool Name drop-down list. Click OK.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gf-new-jdbc-resource.png" alt="gf new jdbc resource">
</div>
<div class="title">Figure 29. New JDBC Resource pane in the GlassFish Admin Console</div>
</div>
<div class="paragraph">
<p>The new JDBC resource is created on the server when you click OK and a node for the resource is displayed under the JDBC Resources node.</p>
</div>
<div class="paragraph">
<p>In the Service window of the IDE, you can expand the Resources node under the GlassFish Server and see that IDE added the new resources. You might need to refresh the view (right-click Resources and choose Refresh) to view the changes.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gf-services-jdbc-resources.png" alt="gf services jdbc resources">
</div>
<div class="title">Figure 30. JDBC Resources displayed in the Services window of the IDE</div>
</div>
<div class="paragraph">
<p>For more tips on troubleshooting problems when using MySQL and the IDE, see the following documents:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../ide/mysql.html">Connecting to a MySQL Database</a> tutorial.</p>
</li>
<li>
<p>The troubleshooting section of <a href="mysql-webapp.html#troubleshoot">Creating a Simple Web Application Using a MySQL Database</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="../../../community/mailing-lists.html">Send Feedback on This Tutorial</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="seealso">See Also</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information about JSF 2.x, see the following resources.</p>
</div>
<div class="sect2">
<h3 id="_netbeans_articles_and_tutorials">NetBeans Articles and Tutorials</h3>
<div class="ulist">
<ul>
<li>
<p><a href="jsf20-intro.html">Introduction to JavaServer Faces 2.x in NetBeans IDE</a></p>
</li>
<li>
<p><a href="jsf20-support.html">JSF 2.x Support in NetBeans IDE</a></p>
</li>
<li>
<p><a href="../../samples/scrum-toys.html">Scrum Toys - The JSF 2.0 Complete Sample Application</a></p>
</li>
<li>
<p><a href="../javaee/javaee-gettingstarted.html">Getting Started with Java EE Applications</a></p>
</li>
<li>
<p><a href="../java-ee.html">Java EE &amp; Java Web Learning Trail</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_external_resources">External Resources</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.oracle.com/technetwork/java/javaee/javaserverfaces-139869.html">JavaServer Faces Technology</a> (Official homepage)</p>
</li>
<li>
<p><a href="http://jcp.org/aboutJava/communityprocess/final/jsr314/index.html">JSR 314 Specification for JavaServer Faces 2.0</a></p>
</li>
<li>
<p><a href="http://docs.oracle.com/javaee/7/tutorial/doc/jsf-intro.htm">JavaServer Faces Technology</a> chapter in the Java EE 7 Tutorial</p>
</li>
<li>
<p><a href="http://javaserverfaces.dev.java.net/">GlassFish Project Mojarra</a> (Official reference implementation for JSF 2.x)</p>
</li>
<li>
<p><a href="http://forums.oracle.com/forums/forum.jspa?forumID=982">OTN Discussion Forums : JavaServer Faces</a></p>
</li>
<li>
<p><a href="http://www.jsfcentral.com/">JSF Central</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_blogs">Blogs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.java.net/blogs/edburns/">Ed Burns</a></p>
</li>
<li>
<p><a href="http://www.java.net/blogs/driscoll/">Jim Driscoll</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/jsf20-crud.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
