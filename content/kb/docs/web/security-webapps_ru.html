
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Обеспечение защиты веб-приложения в IDE NetBeans</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Обеспечение защиты веб-приложения в IDE NetBeans - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Обеспечение защиты веб-приложения в IDE NetBeans">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Обеспечение защиты веб-приложения в IDE NetBeans</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/security-webapps_ru.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_установка_и_настройка_рабочей_среды">Установка и настройка рабочей среды</a></li>
<li><a href="#_создание_веб_приложения">Создание веб-приложения</a>
<ul class="sectlevel2">
<li><a href="#_создание_безопасных_каталогов">Создание безопасных каталогов</a></li>
<li><a href="#_создание_страницы_индекса_jsp">Создание страницы индекса JSP</a></li>
<li><a href="#_создание_формы_входа_обязательно_для_сервера_tomcat_не_обязательно_для_сервера_glassfish_или_weblogic">Создание формы входа (обязательно для сервера Tomcat, не обязательно для сервера GlassFish или WebLogic)</a></li>
</ul>
</li>
<li><a href="#_создание_пользователей_на_целевом_сервере">Создание пользователей на целевом сервере</a>
<ul class="sectlevel2">
<li><a href="#_определение_пользователей_на_сервере_glassfish">Определение пользователей на сервере GlassFish</a></li>
<li><a href="#_определение_ролей_и_пользователей_на_сервере_tomcat">Определение ролей и пользователей на сервере Tomcat</a></li>
<li><a href="#_определение_ролей_и_групп_на_сервере_weblogic">Определение ролей и групп на сервере WebLogic</a></li>
</ul>
</li>
<li><a href="#_настройка_метода_входа">Настройка метода входа</a>
<ul class="sectlevel2">
<li><a href="#_простой_вход">Простой вход</a></li>
<li><a href="#_вход_с_помощью_формы">Вход с помощью формы</a></li>
</ul>
</li>
<li><a href="#_настройка_дескрипторов_развертывания_сервера">Настройка дескрипторов развертывания сервера</a>
<ul class="sectlevel2">
<li><a href="#_настройка_дескриптора_развертывания_сервера_glassfish">Настройка дескриптора развертывания сервера GlassFish</a></li>
<li><a href="#_настройка_дескриптора_развертывания_сервера_weblogic">Настройка дескриптора развертывания сервера WebLogic</a></li>
</ul>
</li>
<li><a href="#_развертывание_и_выполнение_приложения">Развертывание и выполнение приложения</a></li>
<li><a href="#_заключение">Заключение</a></li>
<li><a href="#_дополнительные_сведения">Дополнительные сведения</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Составитель – Дэн Колар (Dan Kolar). Обновляется Джеймсом Бранэмом (James Branam) и Джеффом Рубиноффом (Jeff Rubinoff).</p>
</div>
<div class="paragraph">
<p>Данный документ освещает основы добавления функций безопасности к веб-приложению, развернутому на сервере Oracle GlassFish Open Source Edition, Oracle WebLogic или Apache Tomcat.</p>
</div>
<div class="paragraph">
<p>В данном документе показано, как настроить проверку подлинности на компьютере с помощью простого окна входа и формы входа на веб-странице. В данном документе дан обзор действий для создания пользователей на сервере Tomcat и сервере GlassFish. После создания пользователей мы создадим роли безопасности, установив свойства безопасности в дескрипторе развертывания. Данный документ также показывает, как можно использовать проверку подлинности JDBC для обеспечения безопасности приложения при развертывании на сервере GlassFish.</p>
</div>
<div class="paragraph">
<p><strong>Ожидаемая продолжительность: <em>40</em> минут</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-80-74-73.png" alt="netbeans stamp 80 74 73">
</div>
<div class="title">Figure 1. Содержимое этой страницы применимо к IDE NetBeans 7.2, 7.3, 7.4 и 8.0</div>
</div>
<div class="paragraph">
<p><strong>Для работы с этим учебным курсом требуется следующее программное обеспечение и ресурсы.</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Программное обеспечение или материал</th>
<th class="tableblock halign-left valign-top">Требуемая версия</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">IDE NetBeans</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Версия Java EE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Комплект для разработчика на языке Java (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Версия 7 или 8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Платформа Java EE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java EE 6 или 7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">База данных TRAVEL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Не требуется</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Веб-сервер или сервер приложений, совместимый с Java EE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Веб-сервер Tomcat 7.x или 8.x, Oracle WebLogic 11g или
GlassFish Server Open Source Edition 4.x</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_установка_и_настройка_рабочей_среды">Установка и настройка рабочей среды</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Установите и запустите IDE NetBeans. С данным учебным курсом можно работать, используя имеющийся в комплекте среды сервер Tomcat или сервер GlassFish.</p>
</div>
<div class="paragraph">
<p>Убедитесь, что сервер установлен и экземпляр сервера зарегистрирован в среде IDE. Для регистрации установленного экземпляра сервера можно использовать диспетчер серверов. (Выберите Tools ("Сервис") &gt; Servers ("Серверы") &gt; Add Server ("Добавить сервер"). Выберите "GlassFish Server &lt;номер версии&gt;" или "Tomcat &lt;номер версии&gt; и нажмите кнопку Next ("Далее"). Нажмите кнопку Browse ("Обзор") и найдите каталог установки сервера приложений. Нажмите кнопку Finish ("Готово").)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_веб_приложения">Создание веб-приложения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Мы начнем это упражнение с создания проекта веб-приложения и структуры каталогов. Затем мы создадим несколько простых файлов  <code>html</code>  в каждом из безопасных каталогов. Созданное веб-приложение использует простую проверку подлинности при входе, чтобы предотвратить несанкционированный доступ к защищенным каталогам. Если для проверки подлинности нужно использовать форму входа, то можно добавить страницу  <code>jsp</code>  с формой.</p>
</div>
<div class="sect2">
<h3 id="_создание_безопасных_каталогов">Создание безопасных каталогов</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите Файл &gt; Создать проект (Ctrl-Shift-N), затем выберите 'Веб-приложение' в категории 'Веб' и нажмите 'Далее'.</p>
</li>
<li>
<p>Назовите проект  <code>WebApplicationSecurity</code> . Примите параметры по умолчанию.</p>
</li>
<li>
<p>Установите флажок "Использовать отдельную папку для хранения библиотек" и укажите местоположение папки библиотек (необязательно). Дополнительные сведения об этой функции см. в разделе <a href="http://www.oracle.com/pls/topic/lookup?ctx=nb8000&amp;id=NBDAG455">Предоставление общего доступа к библиотеке другим пользователям</a> в документе <em>Разработка приложений в IDE NetBeans</em>.</p>
</li>
<li>
<p>Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Выберите сервер, на котором требуется выполнить развертывание приложения. В списке представлены только те серверы, которые зарегистрированы в среде IDE. Нажмите кнопку "Далее".</p>
</li>
<li>
<p>В добавлении платформы нет необходимости, так что нажмите кнопку Finish ("Готово").</p>
</li>
<li>
<p>Если создано приложение EE 6 перейдите в окно 'Проекты' среды IDE, щелкните правой кнопкой мыши узел проекта и выберите 'Создать' &gt; 'Другие' &gt; Web &gt; 'Стандартный дескриптор развертывания' (web.xml). Пройдите по этапам работы мастера, принимая параметры по умолчанию.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> В этом учебном курсе показано, как настроить параметры безопасности в дескрипторе развертывания, но приложения EE 6 и EE 7 по умолчанию используют аннотации вместо дескриптора развертывания.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>При использовании сервера GlassFish или WebLogic и IDE NetBeans 7.0.1 или более поздней версии необходимо создать дескриптор для этого сервера. Щелкните правой кнопкой мыши узел проекта и выберите New ("Создать") &gt; Other ("Другое") &gt; GlassFish &gt; GlassFish Descriptor ("Дескриптор GlassFish"), либо New ("Создать") &gt; Other ("Другое") &gt; WebLogic &gt; WebLogic Descriptor ("Дескриптор WebLogic"). Откроется диалоговое окно создание дескриптора для конкретного сервера. Примите параметры по умолчанию и нажмите кнопку "Готово". Дескриптор для конкретного сервера, именуемый  <code>glassfish-web.xml</code>  либо  <code>weblogic.xml</code> , появится в папке Configuration Files ("Файлы настройки") проекта.</p>
</li>
<li>
<p>В окне 'Проекты' в IDE щелкните правой кнопкой мыши 'Веб-страницы' и выберите 'Создать' &gt; 'Другое'.</p>
</li>
<li>
<p>В мастере создания новых файлов выберите Other ("Другое") в качестве категории и Folder ("Папка") в качестве типа файла. Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>.
В мастере создания новых папок назовите папку secureAdmin и нажмите кнопку Finish ("Готово").</p>
</div>
<div class="paragraph">
<p>Папка secureAdmin появится в окне Projects ("Проекты"), в папке Web Pages ("Веб-страницы").</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Повторите 3 предыдущих действия для создания еще одной папки, именуемой secureUser.</p>
</li>
<li>
<p>Создайте новый файл  <code>html</code>  в папке secureUser. Для этого щелкните правой кнопкой мыши папку secureUser в окне 'Проекты' и выберите Создать &gt; Другие.</p>
</li>
<li>
<p>В категории 'Другие' выберите тип файла HTML. Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Назовите новый файл pageU и нажмите кнопку Finish ("Готово").</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При нажатии этой кнопки файл  <code>pageU.html</code>  откроется в редакторе файлов исходного кода.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В редакторе файлов исходного кода замените существующий код в файле  <code>pageU.html</code>  следующим кодом.<span class="html-tag">&lt;html&gt;
&lt;head&gt;
   &lt;title&gt;</span></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">User secure area[html-tag]#&lt;/title&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;h1&gt;#User Secure Area[html-tag]#&lt;/h1&gt;
   &lt;/body&gt;
&lt;/html&gt;#</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши папку secureAdmin и создайте новый файл <code>html</code>  под названием pageA.</p>
</li>
<li>
<p>В редакторе файлов исходного кода замените существующий код в  <code>pageA.html</code>  следующим кодом.<span class="html-tag">&lt;html&gt;
&lt;head&gt;
   &lt;title&gt;</span></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">Admin secure area[html-tag]#&lt;/title&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;h1&gt;#Admin secure area[html-tag]#&lt;/h1&gt;
   &lt;/body&gt;
&lt;/html&gt;#</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_создание_страницы_индекса_jsp">Создание страницы индекса JSP</h3>
<div class="paragraph">
<p>Теперь мы создадим страницу индекса JSP, содержащую ссылки на безопасные области. Если пользователь щелкнет такую ссылку, у него будут запрошены имя пользователя и пароль. В случае использования простого входа будет выведено окно входа по умолчанию используемого браузера. В случае использования страницы формы входа пользователь вводит имя пользователя и пароль в форму.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Откройте  <code>index.jsp</code>  в редакторе файлов исходного кода и добавьте следующие ссылки на  <code>pageA.html</code>  и  <code>pageU.html</code> :[jsp-html-tag]<mark>&lt;p&gt;</mark></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">Request a secure Admin page [jsp-html-tag]#&lt;a# [jsp-html-argument]#href=#[jsp-xml-value]#"secureAdmin/pageA.html"#[jsp-html-tag]#&gt;#here![jsp-html-tag]#&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;#Request a secure User page [jsp-html-tag]#&lt;a# [jsp-html-argument]#href=#[jsp-xml-value]#"secureUser/pageU.html"# [jsp-html-tag]#&gt;#here![jsp-html-tag]#&lt;/a&gt;&lt;/p&gt;#</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Сохраните изменения.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_создание_формы_входа_обязательно_для_сервера_tomcat_не_обязательно_для_сервера_glassfish_или_weblogic">Создание формы входа (обязательно для сервера Tomcat, не обязательно для сервера GlassFish или WebLogic)</h3>
<div class="paragraph">
<p>Если вместо простого входа желательно использовать форму входа, то можно создать страницу  <code>jsp</code> , содержащую форму. После этого можно указать страницы входа и ошибки при входе, в ходе <a href="#Basic_login_config">настройки метода входа</a>.</p>
</div>
<div class="paragraph">
<p><strong>Важно!</strong> Для пользователей Tomcat создание формы входа обязательно.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В окне 'Проекты' щелкните правой кнопкой мыши папку 'Веб-страницы' и выберите 'Создать' &gt; JSP.</p>
</li>
<li>
<p>Назовите файл  <code>login</code> , оставьте значения по умолчанию для остальных полей и нажмите кнопку Finish ("Готово").</p>
</li>
<li>
<p>В редакторе файлов исходного кода вставьте следующий код между тегами  <code>&lt;body&gt;</code>   <code>login.jsp</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;[jsp-html-tag]#form# [jsp-html-argument]#action=#[jsp-xml-value]#"j_security_check"# [jsp-html-argument]#method=#[jsp-xml-value]#"POST"#[jsp-html-tag]#&gt;#
   Username:[jsp-html-tag]#&lt;input# [jsp-html-argument]#type=#[jsp-xml-value]#"text"# [jsp-html-argument]#name=#[jsp-xml-value]#"j_username"#[jsp-html-tag]#&gt;&lt;br&gt;#
   Password:[jsp-html-tag]#&lt;input# [jsp-html-argument]#type=#[jsp-xml-value]#"password"# [jsp-html-argument]#name=#[jsp-xml-value]#"j_password"#[jsp-html-tag]#&gt;
   &lt;input# [jsp-html-argument]#type=#[jsp-xml-value]#"submit"# [jsp-html-argument]#value=#[jsp-xml-value]#"Login"#[jsp-html-tag]#&gt;
&lt;/form&gt;#</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Создайте новый файл  <code>html</code>  под названием  <code>loginError.html</code>  в папке Web Pages ("Веб-страницы"). Это простая страница ошибки.</p>
</li>
<li>
<p>В редакторе файлов исходного кода замените существующий код в  <code>loginError.html</code>  следующим кодом.<span class="html-tag">&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;</span></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">Login Test: Error logging in[html-tag]#&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;#Error Logging In[html-tag]#&lt;/h1&gt;
        &lt;br/&gt;
    &lt;/body&gt;
&lt;/html&gt;#</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_пользователей_на_целевом_сервере">Создание пользователей на целевом сервере</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Чтобы в веб-приложениях можно было использовать безопасность на основе проверки подлинности с помощью имени пользователя и пароля (простой вход или вход на основе формы), для целевого пользователя необходимо определить пользователей и соответствующие роли для них. Для входа в систему на сервере на этом сервере должна существовать учетная запись пользователя.</p>
</div>
<div class="paragraph">
<p>Определения пользователей и ролей варьируются в зависимости от указанного целевого сервера. В данном руководстве для тестирования параметров безопасности используются определения  <code>admin</code>  и  <code>user</code> . Необходимо подтвердить, что эти пользователи существуют на соответствующих серверах и что им назначены соответствующие роли.</p>
</div>
<div class="sect2">
<h3 id="_определение_пользователей_на_сервере_glassfish">Определение пользователей на сервере GlassFish</h3>
<div class="paragraph">
<p>В этом сценарии нам нужно использовать консоль администрирования сервера GlassFish для создания двух новых пользователей,  <code>user</code>  и  <code>admin</code> . У пользователя  <code>user</code>  будет ограниченный доступ к приложению, а у пользователя  <code>admin</code>  – права администратора.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Откройте консоль администрирования. Для этого перейдите в окно 'Службы' среды IDE и щелкните правой кнопкой мыши Серверы &gt; Сервер GlassFish &gt; Просмотр консоли администратора домена. В окне браузера откроется страница входа в систему сервера GlassFish. Для доступа к консоли администрирования необходимо войти, используя имя и пароль администратора.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>*Примечание. * До получения доступа к консоли администрирования необходимо запустить сервер приложений. Чтобы запустить сервер, щелкните правой кнопкой мыши узел сервера GlassFish и выберите 'Пуск'.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В консоли администрирования перейдите к Configurations ("Настройки") &gt; server-config &gt; Security ("Безопасность") &gt; Realms ("Области") &gt; File ("Файл"). Откроется панель редактирования области.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/edit-realm.png" alt="edit realm">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Нажмите кнопку Manage Users ("Управлять пользователями") наверху панели редактирования области. Откроется панель File Users ("Пользователи файла").</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/file-users.png" alt="file users">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Нажмите кнопку New ("Создать"). Откроется панель New File Realm User ("Новый пользователь области файла"). Введите  <code>user</code>  в качестве идентификатора пользователя и  <code>userpw01</code>  в качестве пароля. Нажмите кнопку "ОК".</p>
</li>
<li>
<p>Выполните приведенные выше действия, чтобы создать пользователя  <code>admin</code>  с паролем  <code>adminpw1</code>  в области  <code>file</code> .</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_определение_ролей_и_пользователей_на_сервере_tomcat">Определение ролей и пользователей на сервере Tomcat</h3>
<div class="paragraph">
<p>При использовании Tomcat 7 создается пользователь с ролью сценария диспетчера и пароль для этого пользователя при регистрации сервера в IDE NetBeans.</p>
</div>
<div class="paragraph">
<p>Базовые пользователи и роли для сервера Tomcat содержатся в  <code>tomcat-users.xml</code> . Файл  <code>tomcat-users.xml</code>  можно найти в каталоге  <code><em>&lt;CATALINA_BASE&gt;</em>\conf</code> .</p>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> Расположение CATALINA_BASE можно определить, щелкнув правой кнопкой мыши узел сервера Tomcat в окне 'Службы' и выбрав 'Свойства'. Откроется окно свойств сервера. CATALINA_BASE расположен во вкладке Connection ("Подключение").</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tomcat-properties.png" alt="] image::images/catalina-base.png[">
</div>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> Если Tomcat 6 используется вместе с более ранними версиями IDE, этот сервер имеет  <code>ide</code> , определенные пользователем с помощью пароля и администратора и диспетчера ролей. Пароль для пользователя  <code>ide</code>  создается при установке Tomcat 6. Пароль для пользователя  <code>ide</code>  можно изменить, либо скопировать его в  <code>tomcat-users.xml</code> .</p>
</div>
<div class="paragraph">
<p><strong>Для добавления пользователей в Tomcat выполните следующие действия.</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Откройте в редакторе  <code><em>&lt;CATALINA_BASE&gt;</em>/conf/tomcat-users.xml</code> .</p>
</li>
<li>
<p>Добавьте роль под названием  <code>AdminRole</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;role rolename="AdminRole"/&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте роль под названием  <code>UserRole</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;role rolename="UserRole"/&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте пользователя с именем  <code>admin</code> , паролем  <code>adminpw1</code>  и ролью  <code>AdminRole</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;user username="admin" password="adminpw1" roles="AdminRole"/&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте пользователя с именем  <code>user</code> , паролем  <code>userpw01</code>  и ролью  <code>UserRole</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;user username="user" password="userpw01" roles="UserRole"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Файл  <code>tomcat-users.xml</code>  теперь выглядит следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;tomcat-users&gt;
&lt;!--
  &lt;role rolename="tomcat"/&gt;
  &lt;role rolename="role1"/&gt;
  &lt;user username="tomcat" password="tomcat" roles="tomcat"/&gt;
  &lt;user username="both" password="tomcat" roles="tomcat,role1"/&gt;
  &lt;user username="role1" password="tomcat" roles="role1"/&gt;
--&gt;
...
&lt;role rolename="AdminRole"/&gt;
&lt;role rolename="UserRole"/&gt;
&lt;user username="user" password="userpw01" roles="UserRole"/&gt;
&lt;user username="admin" password="adminpw1" roles="AdminRole"/&gt;
[User with manager-script role, defined when Tomcat 7 was registered with the IDE]
...
&lt;/tomcat-users&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_определение_ролей_и_групп_на_сервере_weblogic">Определение ролей и групп на сервере WebLogic</h3>
<div class="paragraph">
<p>В этой ситуации нам нужно использовать консоль администрирования сервера WebLogic для создания двух новых пользователей,  <code>user</code>  и  <code>admin</code> . Добавьте этих пользователей к группам  <code>userGroup</code>  и  <code>adminGroup</code>  соответственно. Позже можно будет назначить роли безопасности для этих групп. У  <code>userGroup</code>  будет ограниченный доступ к приложению, а у  <code>adminGroup</code>  – права администратора.</p>
</div>
<div class="paragraph">
<p>Общие инструкции по добавлению пользователей и групп к серверу Web Logic можно найти в <a href="http://download.oracle.com/docs/cd/E21764_01/apirefs.1111/e13952/taskhelp/security/ManageUsersAndGroups.html">Интерактивной справке по консоли администрирования</a> WebLogic.</p>
</div>
<div class="paragraph">
<p><strong>Чтобы добавить пользователей и группы "user" и "admin" к WebLogic, выполните следующие действия:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Откройте консоль администрирования, перейдя в окно 'Службы' среды IDE и щелкнув правой кнопкой мыши 'Серверы' &gt; 'Сервер WebLogic' &gt; 'Просмотр консоли администратора'. В окне браузера откроется страница входа в систему сервера GlassFish. Для доступа к консоли администрирования необходимо войти, используя имя и пароль администратора.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>*Примечание. * До получения доступа к консоли администрирования необходимо запустить сервер приложений. Чтобы запустить сервер, щелкните правой кнопкой мыши узел сервера WebLogic и выберите 'Пуск'.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В левой панели выберите Security Realms ("Области безопасности"). Откроется страница сводки областей безопасности.</p>
</li>
<li>
<p>На этой странице выберите имя области безопасности (имя по умолчанию – "myrealm"). Откроется страница Settings for Realm Name ("Настройки имени области").</p>
</li>
<li>
<p>На этой странице выберите Users and Groups ("Пользователи и группы") &gt; Users ("Пользователи"). Появится таблица пользователей.</p>
</li>
<li>
<p>В таблице пользователей щелкните New ("Создать"). Откроется страница создания нового пользователя.</p>
</li>
<li>
<p>Введите там имя "user" и пароль "userpw01". Если хочется, введите описание пользователя. Примите поставщика проверки подлинности по умолчанию.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wl-admin-newuser.png" alt="wl admin newuser">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Нажмите кнопку "ОК". Мы вернемся к таблице пользователей.</p>
</li>
<li>
<p>Щелкните New ("Создать") и добавьте пользователя с именем"admin" и паролем "admin1".</p>
</li>
<li>
<p>Откройте вкладку Groups ("Группы"). Появится таблица групп.</p>
</li>
<li>
<p>Нажмите кнопку New ("Создать"). Откроется окно создания новой группы.</p>
</li>
<li>
<p>Назовите группу userGroup. Примите поставщика по умолчанию и нажмите кнопку "OK". Это вернет нас к таблице групп.</p>
</li>
<li>
<p>Щелкните New ("Создать") и создайте группу adminGroup.</p>
</li>
<li>
<p>Откройте вкладку Users ("Пользователи") для следующей процедуры.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Теперь добавьте пользователя  <code>admin</code>  к  <code>adminGroup</code>  и пользователя  <code>user</code>  к  <code>userGroup</code> .</p>
</div>
<div class="paragraph">
<p>Для добавления пользователей к группам:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>На вкладке Users ("Пользователи") щелкните пользователя  <code>admin</code> . Откроется страница параметров пользователя.</p>
</li>
<li>
<p>На этой странице откройте вкладку Groups ("Группы").</p>
</li>
<li>
<p>В таблице Parent Groups: Available: ("Родительские группы: Доступные") выберите  <code>adminGroup</code> .</p>
</li>
<li>
<p>Щелкните стрелку вправо &gt;.  <code>adminGroup</code>  появится в таблице Parent Groups: Chosen: ("Родительские группы: Выбранные:").</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wl-admin-usersettings.png" alt="wl admin usersettings">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Нажмите кнопку "Сохранить".</p>
</li>
<li>
<p>Вернитесь на вкладку Users ("Пользователи").</p>
</li>
<li>
<p>Щелкните пользователя  <code>user</code>  и добавьте его к  <code>userGroup</code> .</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_настройка_метода_входа">Настройка метода входа</h2>
<div class="sectionbody">
<div class="paragraph">
<p>При настройке метода входа для приложения для проверки подлинности при простом входе можно использовать окно входа, предоставляемое браузером. Либо можно создать веб-страницу с формой входа. Оба типа проверки подлинности при входе основаны на использовании имени пользователя/пароля.</p>
</div>
<div class="paragraph">
<p>Для настройки входа следует создать _ограничения безопасности _и назначить роли этим ограничениям безопасности. Ограничения безопасности определяют набор файлов. При назначении роли ограничению безопасности пользователи с этой ролью получат доступ к набору файлов, определенных ограничением. Для примера, в этом учебном курсе мы назначаем AdminRole ограничению AdminConstraint, а ограничению UserConstraint – и UserRole и AdminRole. Это означает, что у пользователей с AdminRole будет доступ к файлам и для администраторов и для простых пользователей, а у пользователей с UserRole – только к файлам для пользователей.</p>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> Доступ с отдельной ролью администратора к файлам пользователя предоставляется редко. Как вариант, можно назначить UserConstraint только UserRole, а на стороне сервера предоставить AdminRole конкретным пользователям, которые также являются администраторы. Лучший способ предоставления доступа зависит от конкретной ситуации.</p>
</div>
<div class="paragraph">
<p>Настройка метода входа для приложения выполняется посредством настройки  <code>web.xml</code> . Файл  <code>web.xml</code>  может быть найден в каталоге Configuration Files ("Файлы конфигурации") окна Projects ("Проекты").</p>
</div>
<div class="sect2">
<h3 id="_простой_вход">Простой вход</h3>
<div class="paragraph">
<p>При использовании простого входа окно входа предоставляется браузером. Для доступа к защищенному содержимому необходимы правильные имя пользователя и пароль.</p>
</div>
<div class="paragraph">
<p>Ниже показано, как настроить простой вход для серверов GlassFish и WebLogic. Пользователям Tomcat необходимо использовать <a href="#form-login">форму входа</a>.</p>
</div>
<div class="paragraph">
<p><strong>Для настройки простого входа выполните следующие действия.</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В окне 'Проекты' разверните узел 'Файлы конфигурации' и дважды щелкните  <code>web.xml</code> . В визуальном редакторе откроется файл  <code>web.xml</code> .</p>
</li>
<li>
<p>Щелкните Security ("Безопасность") на панели инструментов, чтобы открыть файл в представлении безопасности.</p>
</li>
<li>
<p>Разверните узел Login Configuration ("Конфигурация входа") и установите настройку входа на Basic ("Простая").</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>*Примечание. * Если необходимо использовать формы, выберите 'Форма', а не 'Основные' и укажите имя входа и страницы входа с ошибками.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Введите имя области, в зависимости от используемого сервера.</p>
<div class="ulist">
<ul>
<li>
<p><strong>GlassFish:</strong> введите  <code>file</code>  в поле Realm Name ("Имя области"). Это имя области по умолчанию при создании пользователей на сервере GlassFish.</p>
</li>
<li>
<p><strong>Tomcat:</strong> не вводите имя области.</p>
</li>
<li>
<p><strong>WebLogic:</strong> введите имя своей области. Областью по умолчанию является  <code>myrealm</code> .</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/security-roles.png" alt="security roles">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Разверните узел Security Roles ("Роли безопасности") и нажмите кнопку Add ("Добавить") для добавления имени роли.</p>
</li>
<li>
<p>Добавьте следующие роли безопасности:</p>
<div class="ulist">
<ul>
<li>
<p><code>AdminRole</code> . Пользователи, добавленные к этой роли, получат доступ к каталогу  <code>secureAdmin</code>  на сервере.</p>
</li>
<li>
<p><code>UserRole</code> . Пользователи, добавленные к этой роли, получат доступ к каталогу  <code>secureUser</code>  на сервере.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Внимание!</strong> Имена ролей GlassFish должны начинаться с прописной буквы.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Создайте и настройте ограничение безопасности под названием  <code>AdminConstraint</code> , выполнив следующее:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните Add Security Constraint ("Добавить ограничение безопасности"). Появится раздел для нового ограничения безопасности.</p>
</li>
<li>
<p>Введите  <code>AdminConstraint</code>  в качестве Display Name ("Отображаемое имя") нового ограничения безопасности.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/admin-constraint.png" alt="admin constraint">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Нажмите кнопку "Add". Откроется диалоговое окно Add Web Resource ("Добавление веб-ресурса").</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>.
В этом диалоговом окне установите Resource Name ("Имя ресурса") на  <code>Admin</code>  и шаблон URL на  <code>/secureAdmin/*</code> , после чего нажмите кнопку "OK". Диалоговое окно закроется.</p>
</div>
<div class="paragraph">
<p><strong>Примечание. * При использовании звездочки (</strong>), пользователю предоставляется доступ ко всем файлам в этой папке.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/addwebresource.png" alt="addwebresource">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите Enable Authentication Constraint ("Включить ограничение проверки подлинности") и нажмите кнопку Edit ("Изменить"). Откроется диалоговое окно изменения имен роли.</p>
</li>
<li>
<p>В этом окне выберите AdminRole на левой панели, нажмите кнопку Add ("Добавить"), затем нажмите кнопку OK.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>После завершения этих действий результат должен быть подобен этому рисунку:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/constraints.png" alt="constraints">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Создайте и настройте ограничение безопасности под названием  <code>UserConstraint</code> , выполнив следующее:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните Add Security Constraint ("Добавить ограничение безопасности"), чтобы добавить новое ограничение безопасности.</p>
</li>
<li>
<p>Введите  <code>UserConstraint</code>  в качестве Display Name ("Отображаемое имя") нового ограничения безопасности.</p>
</li>
<li>
<p>Нажмите кнопку Add ("Добавить") для добавления Web Resource Collection ("Коллекция веб-ресурсов").</p>
</li>
<li>
<p>В диалоговом окне добавления ресурсов установите Resource Name ("Имя ресурса") на  <code>User</code>  и шаблон URL на  <code>/secureUser/*</code> , после чего нажмите кнопку "OK".</p>
</li>
<li>
<p>Выберите Enable Authentication Constraint ("Включить ограничение проверки подлинности") и нажмите кнопку Edit ("Изменить"), чтобы изменить поле Role Name ("Имя роли").</p>
</li>
<li>
<p>В диалоговом окне изменения имени роли выберите AdminRole и UserRole на левой панели, нажмите кнопку Add ("Добавить"), затем нажмите кнопку OK.
Примечание. Также можно задать время ожидания для сеанса в web.xml. Для настройки времени ожидания щелкните вкладку General ("Общие") визуального редактора и укажите, сколько должен продолжаться сеанс. Продолжительность по умолчанию – 30 минут.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_вход_с_помощью_формы">Вход с помощью формы</h3>
<div class="paragraph">
<p>Использование формы для входа позволяет настраивать содержимое страниц входа и ошибки входа. Этапы настройки входа с помощью формы идентичны настройке простого входа, за исключением того, что надо указать созданные страницы <a href="#loginform">входа и ошибки</a>.</p>
</div>
<div class="paragraph">
<p>Настройка формы входа показана ниже:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В окне 'Проекты' дважды щелкните  <code>web.xml</code> , расположенный в каталоге  <code>Веб-страницы/WEB-INF</code> , чтобы открыть файл в Visual Editor.</p>
</li>
<li>
<p>Щелкните Security ("Безопасность") на панели инструментов, чтобы открыть файл на панели безопасности и развернуть узел Login Configuration ("Настройка входа").</p>
</li>
<li>
<p>Установите настройку входа на Form ("Форма").</p>
</li>
<li>
<p>Установите Form Login Page ("Страница входа с помощью формы"), щелкнув Browse ("Просмотр") и найдя  <code>login.jsp</code> .
5.
Установите Form Login Page ("Страница ошибки входа с помощью формы"), щелкнув Browse ("Просмотр") и найдя  <code>loginError.html</code> .</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/login-forms.png" alt="login forms">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Введите имя области, в зависимости от используемого сервера.</p>
<div class="ulist">
<ul>
<li>
<p><strong>GlassFish:</strong> введите  <code>file</code>  в поле Realm Name ("Имя области"). Это имя области по умолчанию при создании пользователей на сервере GlassFish.</p>
</li>
<li>
<p><strong>Tomcat:</strong> не вводите имя области.</p>
</li>
<li>
<p><strong>WebLogic:</strong> введите имя своей области. Областью по умолчанию является  <code>myrealm</code> .</p>
</li>
</ul>
</div>
</li>
<li>
<p>Разверните узел Security Roles ("Роли безопасности") и нажмите кнопку Add ("Добавить") для добавления имени роли.</p>
</li>
<li>
<p>Добавьте следующие роли безопасности:</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Роль сервера</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Описание</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AdminRole</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Пользователи, добавленные к этой роли, получат доступ к каталогу  <code> secureAdmin</code>  на сервере.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UserRole</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Пользователи, добавленные к этой роли, получат доступ к каталогу  <code>secureUser</code>  на сервере.</p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Создайте и настройте ограничение безопасности под названием  <code>AdminConstraint</code> , выполнив следующее:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните Add Security Constraint ("Добавить ограничение безопасности"), чтобы добавить новое ограничение безопасности.</p>
</li>
<li>
<p>Введите  <code>AdminConstraint</code>  в качестве Display Name ("Отображаемое имя") нового ограничения безопасности.</p>
</li>
<li>
<p>Нажмите кнопку Add ("Добавить") для добавления Web Resource Collection ("Коллекция веб-ресурсов").
4.
В этом диалоговом окне установите Resource Name ("Имя ресурса") на  <code>Admin</code>  и шаблон URL на  <code>/secureAdmin/*</code> , после чего нажмите кнопку "OK".</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Примечание. * При использовании звездочки (</strong>), пользователю предоставляется доступ ко всем файлам в этой папке.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/addwebresource.png" alt="addwebresource">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите Enable Authentication Constraint ("Включить ограничение проверки подлинности") и нажмите кнопку Edit ("Изменить"). Откроется диалоговое окно изменения имен роли.</p>
</li>
<li>
<p>В этом окне выберите AdminRole на левой панели, нажмите кнопку Add ("Добавить"), затем нажмите кнопку OK.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>После завершения этих действий результат должен быть подобен этому рисунку:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/constraints.png" alt="constraints">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Создайте и настройте ограничение безопасности под названием  <code>UserConstraint</code> , выполнив следующее:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните Add Security Constraint ("Добавить ограничение безопасности"), чтобы добавить новое ограничение безопасности.</p>
</li>
<li>
<p>Введите  <code>UserConstraint</code>  в качестве Display Name ("Отображаемое имя") нового ограничения безопасности.</p>
</li>
<li>
<p>Нажмите кнопку Add ("Добавить") для добавления Web Resource Collection ("Коллекция веб-ресурсов").</p>
</li>
<li>
<p>В диалоговом окне добавления ресурсов установите Resource Name ("Имя ресурса") на  <code>User</code>  и шаблон URL на  <code>/secureUser/*</code> , после чего нажмите кнопку "OK".</p>
</li>
<li>
<p>Выберите Enable Authentication Constraint ("Включить ограничение проверки подлинности") и нажмите кнопку Edit ("Изменить"), чтобы изменить поле Role Name ("Имя роли").</p>
</li>
<li>
<p>В диалоговом окне изменения имени роли выберите AdminRole и UserRole на левой панели, нажмите кнопку Add ("Добавить"), затем нажмите кнопку OK.
Примечание. Также можно задать время ожидания для сеанса в web.xml. Для настройки времени ожидания щелкните вкладку General ("Общие") визуального редактора и укажите, сколько должен продолжаться сеанс. Продолжительность по умолчанию – 30 минут.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_настройка_дескрипторов_развертывания_сервера">Настройка дескрипторов развертывания сервера</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В случае развертывания приложения на сервере GlassFish или WebLogic, необходимо настроить дескриптор развертывания сервера, чтобы он соответствовал ролям безопасности, определенным в  <code>web.xml</code> . Дескриптор развертывания сервера указан в узле Configuration Files ("Файлы конфигурации") созданного проекта в окне Projects ("Проекты").</p>
</div>
<div class="sect2">
<h3 id="_настройка_дескриптора_развертывания_сервера_glassfish">Настройка дескриптора развертывания сервера GlassFish</h3>
<div class="paragraph">
<p>Дескриптор развертывания сервера GlassFish именуется  <code>glassfish-web.xml</code> . Дескриптор развертывания сервера в папке Configuration Files ("Файлы конфигурации"). Если отсутствует, создайте его, щелкнув правой кнопкой мыши узел проекта и перейдя в 'Создать' &gt; 'Другие' &gt; GlassFish &gt; 'Дескриптор развертывания GlassFish'. Примите все параметры по умолчанию.</p>
</div>
<div class="paragraph">
<p>Обратите внимание, что значения, введенные в  <code>web.xml</code> , отображаются в  <code>glassfish-web.xml</code> . Среда IDE извлекает эти значения из  <code>web.xml</code>  для нас.</p>
</div>
<div class="paragraph">
<p><strong>Для настройки дескриптора развертывания GlassFish:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В окне 'Проекты' разверните узел 'Файлы конфигурации' и дважды щелкните  <code>glassfish-web.xml</code> . Дескриптор развертывания  <code>glassfish-web.xml</code>  открывается в специальном редакторе со вкладками для дескрипторов развертывания GlassFish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> Для сервера GlassFish с более поздними версиями, чем 3.1, для этого файла задается имя  <code>sun-web.xml</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите вкладку Security ("Безопасность") для раскрытия ролей безопасности.</p>
</li>
<li>
<p>Выберите узел роли безопасности AdminRole, чтобы открыть страницу Security Role Mapping ("Сопоставление ролей безопасности").</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>.
Щелкните Add Principal ("Добавить участника") и введите  <code>admin</code>  в качестве имени участника. Нажмите кнопку "ОК".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-principal.png" alt="add principal">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите узел роли безопасности UserRole, чтобы открыть страницу Security Role Mapping ("Сопоставление ролей безопасности").</p>
</li>
<li>
<p>Щелкните Add Principal ("Добавить участника") и введите  <code>user</code>  в качестве имени участника. Нажмите кнопку "OK".</p>
</li>
<li>
<p>Сохраните изменения в  <code>glassfish-web.xml</code> .</p>
<div class="literalblock">
<div class="content">
<pre>``glassfish-web.xml``  также можно просматривать и редактировать в редакторе XML, щелкнув вкладку XML. Если открыть  ``glassfish-web.xml``  в редакторе XML, то можно будет увидеть, что  ``glassfish-web.xml``  содержит следующую информацию о сопоставлении ролей безопасности:</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="xml-tag">&lt;security-role-mapping&gt;
    &lt;role-name&gt;</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">AdminRole[xml-tag]#&lt;/role-name&gt;
    &lt;principal-name&gt;#admin[xml-tag]#&lt;/principal-name&gt;
&lt;/security-role-mapping&gt;
&lt;security-role-mapping&gt;
    &lt;role-name&gt;#UserRole[xml-tag]#&lt;/role-name&gt;
    &lt;principal-name&gt;#user[xml-tag]#&lt;/principal-name&gt;
&lt;/security-role-mapping&gt;#</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_настройка_дескриптора_развертывания_сервера_weblogic">Настройка дескриптора развертывания сервера WebLogic</h3>
<div class="paragraph">
<p>Дескриптор развертывания WebLogic именуется  <code>weblogic.xml</code> . На данный момент <a href="#gf-dd">поддержка дескрипторов развертывания GlassFish</a> в среде IDE не распространяется на дескрипторы развертывания WebLogic. Поэтому все изменения в  <code>weblogic.xml</code>  необходимо будет внести вручную.</p>
</div>
<div class="paragraph">
<p>Дескриптор развертывания сервера WebLogic в папке Configuration Files ("Файлы конфигурации"). Если отсутствует, создайте его, щелкнув правой кнопкой мыши узел проекта и перейдя в 'Создать' &gt; 'Другие' &gt; WebLogic &gt; 'Дескриптор развертывания WebLogic'. Примите все параметры по умолчанию.</p>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> Дополнительную информацию об обеспечении безопасности веб-приложений в WebLogic, включая декларативную и программную безопасность, можно найти в <a href="http://download.oracle.com/docs/cd/E21764_01/web.1111/e13711/thin_client.htm">Oracle Fusion Middleware Programming Security for Oracle WebLogic Server ("Программная безопасность Oracle Fusion Middleware для Oracle WebLogic Server")</a>.</p>
</div>
<div class="paragraph">
<p>Для настройки дескриптора развертывания WebLogic:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В окне 'Проекты' разверните узел 'Файлы конфигурации' и дважды щелкните  <code>weblogic.xml</code> . Дескриптор развертывания  <code>weblogic.xml</code>  откроется в редакторе.</p>
</li>
<li>
<p>Внутри элемента  <code>&lt;weblogic-web-app&gt;</code>  введите или скопируйте следующие элементы назначения роли безопасности:[xml-tag]<mark>&lt;security-role-assignment&gt;
&lt;role-name&gt;</mark></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">AdminRole[xml-tag]#&lt;/role-name&gt;
    &lt;principal-name&gt;#adminGroup[xml-tag]#&lt;/principal-name&gt;
&lt;/security-role-assignment&gt;
&lt;security-role-assignment&gt;
    &lt;role-name&gt;#UserRole[xml-tag]#&lt;/role-name&gt;
    &lt;principal-name&gt;#userGroup[xml-tag]#&lt;/principal-name&gt;
&lt;/security-role-assignment&gt;#</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Сохраните изменения в  <code>weblogic.xml</code> .</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_развертывание_и_выполнение_приложения">Развертывание и выполнение приложения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В окне "Проекты" щелкните правой кнопкой мыши узел проекта и выберите команду "Выполнить".</p>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> По умолчанию, проект создается с включенной функцией 'Компилировать при сохранении', так что не нужно сначала компилировать код. Дополнительные сведения о функции "Компилировать при сохранении" см. в разделе <a href="http://www.oracle.com/pls/topic/lookup?ctx=nb8000&amp;id=NBDAG510">Сборка проектов Java</a> в <em>Руководстве по разработке приложений в IDE NetBeans</em>.</p>
</div>
<div class="paragraph">
<p>После сборки приложения и развертывания его на сервере в веб-браузере откроется начальная страница. Выберите безопасную область, к которой необходимо получить доступ, щелкнув <strong>admin</strong> либо <strong>user</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/deploy1.png" alt="deploy1">
</div>
</div>
<div class="paragraph">
<p>После ввода имени пользователя и пароля возможны следующие результаты:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Пароль пользователя верен и у пользователя есть права на доступ к защищенному содержимому &#8594; отобразится страница защищенного содержимого.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/deploy2.png" alt="deploy2">
</div>
</div>
<div class="paragraph">
<p>*
Пароль пользователя неверен &#8594; отобразится страница ошибки.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/deploy3.png" alt="deploy3">
</div>
</div>
<div class="paragraph">
<p>*
Пароль пользователя верен, но у пользователя нет прав на доступ к защищенному содержимому &#8594; браузер выведет ошибку 403, "В доступе к запрошенному ресурсу отказано".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/deploy4.png" alt="deploy4">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_заключение">Заключение</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом учебном курсе мы создали веб-приложение. Затем мы изменили настройки его безопасности, используя редакторы дескрипторов web.xml и glassfish-web.xml, создав веб-страницы с безопасным входом и несколькими удостоверениями.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_дополнительные_сведения">Дополнительные сведения</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="quickstart-webapps.html">Введение в разработку веб-приложений</a></p>
</li>
<li>
<p><a href="../../trails/java-ee.html">Учебная карта по Java EE и Java Web</a></p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">link:/about/contact_form.html?to=3&amp;subject=Feedback: Securing a Web Application[Отправить отзыв по этому учебному курсу]</p></td>
</tr>
</tbody>
</table>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/security-webapps_ru.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
