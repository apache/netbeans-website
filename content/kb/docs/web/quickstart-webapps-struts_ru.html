
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Введение в веб-платформу Struts</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Введение в веб-платформу Struts - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Введение в веб-платформу Struts">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Введение в веб-платформу Struts</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/quickstart-webapps-struts_ru.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_обзор_приложения">Обзор приложения</a></li>
<li><a href="#_настройка_приложения_struts">Настройка приложения Struts</a></li>
<li><a href="#_создание_страниц_jsp">Создание страниц JSP</a>
<ul class="sectlevel2">
<li><a href="#_создание_страницы_входа_в_систему">Создание страницы входа в систему</a></li>
<li><a href="#_создание_страницы_успешного_входа">Создание страницы успешного входа</a></li>
</ul>
</li>
<li><a href="#_создание_компонента_actionform">Создание компонента <code>ActionForm</code></a></li>
<li><a href="#_создание_класса_действия_action">Создание класса действия <code>Action</code></a></li>
<li><a href="#_реализация_проверки_правильности">Реализация проверки правильности</a>
<ul class="sectlevel2">
<li><a href="#_доступ_к_данным_компонента_и_подготовка_условия_пересылки">Доступ к данным компонента и подготовка условия пересылки</a></li>
<li><a href="#_настройка_сообщения_об_ошибке">Настройка сообщения об ошибке</a></li>
</ul>
</li>
<li><a href="#_добавление_записей_forward_к_struts_config_xml">Добавление записей <code>forward</code> к <code>struts-config.xml</code></a></li>
<li><a href="#_настройка_и_выполнение_приложения">Настройка и выполнение приложения</a>
<ul class="sectlevel2">
<li><a href="#_настройка_страницы_приветствия">Настройка страницы приветствия</a></li>
<li><a href="#_присоединение_таблицы_стилей">Присоединение таблицы стилей</a></li>
<li><a href="#_запуск_приложения">Запуск приложения</a></li>
</ul>
</li>
<li><a href="#_дополнительные_сведения">Дополнительные сведения</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Этот документ содержит пошаговое описание основ использования IDE NetBeans для разработки веб-приложений с помощью веб-платформы Struts. Struts — это платформа с открытым исходным кодом, которая расширяет интерфейс API сервлетов Java и использует архитектуру "Модель-представление-контроллер" (MVC). Она позволяет создавать поддерживаемые, расширяемые и гибкие веб-приложения, основанные на стандартных технологиях, таких как страницы JSP, компоненты JavaBeans, пакеты ресурсов и XML.</p>
</div>
<div class="paragraph">
<p>Данный курс призван научить сборке простого приложения MVC, которое отображает страницу ввода имени пользователя и возвращает страницу успешного входа после проверки правильности введенных данных. Вы изучите несколько основных функций, которые предлагает платформа Struts, а также способы внедрения этих функций с помощью среды IDE. В частности, будут использованы теги Struts на страницах JSP, данные пользователей будут поддерживаться компонентом Struts <code>ActionForm</code>, а логика пересылки будет реализована с помощью объекта Struts <code>Action</code>. Кроме того, будет показано, как внедрять в приложение простую проверку правильности, в том числе вывод предупреждения при неудачной попытке входа в систему.</p>
</div>
<div class="paragraph">
<p>Более подробное введение в платформу Struts приведено в статье <a href="http://struts.apache.org/struts-action/faqs/works.html">Как работает Struts?</a> на официальном веб-сайте <a href="http://struts.apache.org/">Struts</a>. Также можно воспользоваться поиском по указателю документации Javadoc среды IDE (Справка &gt; Поиск в документации Javadoc по указателю) для просмотра <a href="http://struts.apache.org/release/1.3.x/apidocs/index.html">интерфейса API платформы Struts</a>, который поставляется вместе с библиотеками Struts.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-80-74-73.png" alt="netbeans stamp 80 74 73">
</div>
<div class="title">Figure 1. Содержимое этой страницы применимо к IDE NetBeans 7.2, 7.3, 7.4 и 8.0</div>
</div>
<div class="paragraph">
<p><strong>Для работы с этим учебным курсом требуются программное обеспечение и ресурсы, перечисленные ниже.</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Программное обеспечение или материал</th>
<th class="tableblock halign-left valign-top">Требуемая версия</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">IDE NetBeans</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7.2, 7.3, 7.4, 8.0, Java EE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Комплект для разработчика на языке Java (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7 или 8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Сервер GlassFish
<em>или</em>
Контейнер сервлетов Tomcat</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open Source Edition 3.x или 4.0
_ _
версия 7.x или 8.x</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Примечания:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Установка среды IDE для Java позволяет при желании установить сервер GlassFish и контейнер сервлетов Apache Tomcat. Необходимо установить один из них (или зарегистрировать другой сервер в среде IDE), чтобы работать далее с этим учебным курсом.</p>
</li>
<li>
<p>Если необходимо сравнить проект с работающим решением, можно <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJava%2520Web%252FMyStrutsApp.zip">загрузить демонстрационное приложение</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_обзор_приложения">Обзор приложения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>При использовании Struts платформа предоставляет сервлет контроллера <code>ActionServlet</code>, который определяется в библиотеках Struts, входящих в среду IDE, и который автоматически регистрируется в дескрипторе развертывания <code>web.xml</code>, как <a href="#controllerServlet">указано ниже</a>. Сервлет контроллера использует файл <code>struts-config.xml</code> для сопоставления входящих запросов с объектами Struts <code>Action</code> и использования любых объектов <code>ActionForm</code>, связанных с действием для временного хранения данных формы. Объект действия <code>Action</code> обрабатывает запросы с помощью метода <code>execute</code>, используя данные, хранящиеся в компоненте формы. После обработки запроса объектом действия <code>Action</code> объект обрабатывает запрос, сохраняет любые новые данные (например, в форме компонента или в отдельном компоненте результата) и пересылает результат в соответствующее представление.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/workflow.png" alt="workflow">
</div>
<div class="title">Figure 2. Последовательность действий Struts</div>
</div>
<div class="paragraph">
<p>Разработка приложения Struts схожа с разработкой любого другого типа веб-приложений в IDE NetBeans. Однако можно дополнить набор инструментов веб-разработки, воспользовавшись поддержкой платформы Struts в среде IDE. Например, можно использовать шаблоны в среде IDE для создания объектов действия <code>Action</code> Struts и компонентов <code>ActionForm</code>. При создании среда IDE автоматически регистрирует эти классы в файле <code>struts-config.xml</code> и позволяет пользователю расширить этот файл без особых усилий с помощью элементов контекстного меню редактора исходного кода. Поскольку многие веб-приложения используют для представления страницы JSP, платформа Struts также предоставляет пользовательские библиотеки тегов, которые облегчают взаимодействие с формами HTML. В редакторе исходного кода среды IDE можно вызывать автозавершение кода и поддержку Javadoc, что помогает эффективно работать с такими библиотеками.</p>
</div>
<div class="paragraph">
<p>В следующих действиях показано, как создать простую форму, собирающую данные пользователя, выполняющую простую проверку правильности и выводящую данные на страницу успешного входа.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_настройка_приложения_struts">Настройка приложения Struts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В среде IDE приложение Struts является всего лишь обычным веб-приложением, которое сопровождается библиотеками Struts и файлами настройки. Приложение Struts создается точно так же, как и любые другие веб-приложения в среде IDE — с помощью мастера "Создать веб-приложение" с указанием в дополнительном действии, что в приложение нужно включить библиотеки Struts и файлы настройки.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите "Файл &gt; Новый проект" (CTRL+SHIFT+N; &amp;#8984+SHIFT+N в Mac ОС) в главном меню. В списке 'Категории' выберите Java Web, затем выберите 'Веб-приложение' в списке проектов. Нажмите кнопку "Далее".</p>
</li>
<li>
<p>На панели выбора имени и расположения в поле "Имя проекта" введите <code>MyStrutsApp</code> и нажмите кнопку "Далее".</p>
</li>
<li>
<p>На панели "Сервер и параметры" выберите сервер, на котором нужно развернуть приложение. В списке представлены только те серверы, которые зарегистрированы в среде IDE. (Чтобы зарегистрировать сервер, нажмите кнопку "Добавить" рядом с раскрывающимся списком серверов.) Кроме того, обратите внимание, что контекстный путь к вашему развернутому приложению становится вида <code>/MyStrutsApp</code>. Нажмите кнопку "Далее".</p>
</li>
<li>
<p>На панели 'Платформы' выберите 'Struts'.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/new-project-wizard.png" alt="new project wizard">
</div>
<div class="title">Figure 3. Параметр Struts отображается на панели 'Платформы' мастера создания веб-приложений</div>
</div>
<div class="paragraph">
<p>Поскольку это учебный проект, не меняйте никакие значения в нижней части панели. В мастере отображаются следующие параметры конфигурации.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Имя сервлета действия</strong>: Имя сервлета действия Struts, который используется в приложении. Дескриптор развертывания <code>web.xml</code> содержит запись для сервлета действия и указывает соответствующие параметры Struts, например, путь к классу сервлетов в библиотеке Struts и к файлу настройки <code>struts-config.xml</code> в приложении.</p>
</li>
<li>
<p><strong>Шаблон URL-адреса действия *: Указывает шаблоны входящих запросов, которые сопоставляются с контроллером действий Struts. Так создается запись сопоставления в дескрипторе развертывания. По умолчанию сопоставляется только шаблон <code></strong>.do</code>.</p>
</li>
<li>
<p><strong>Ресурс приложения</strong>: Позволяет указать набор ресурсов, который будет использоваться в файле <code>struts-config.xml</code> для локализации сообщений. По умолчанию это <code>com.myapp.struts.ApplicationResource</code>.</p>
</li>
<li>
<p>*Добавить файлы TLD Struts *: Позволяет создавать дескрипторы библиотеки тегов для библиотек тегов Struts. Дескриптор библиотеки тегов&#8201;&#8212;&#8201;это документ XML, содержащий дополнительные сведения обо всей библиотеке тегов, а также о каждом отдельном теге. В целом это не является необходимым, поскольку можно сослаться на оперативные идентификаторы URI, а не на локальные файлы TLD.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Нажмите кнопку "Завершить". Среда IDE создает папку проекта в вашей файловой системе. Как и в случае любого веб-приложения в среде IDE, папка проекта содержит все исходные коды и метаданные проекта среды IDE, например сценарий сборки Ant. Однако у веб-приложения, кроме того, в пути к классам есть все библиотеки Struts. Они не только есть в пути к классам приложения, но они также входят в проект и будут пакетированы с ним позднее при сборке проекта.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Проект откроется в среде IDE. Окно "Проекты" является основной точкой входа исходных файлов проекта. Показано логическое представление важного содержимого проекта. Например, если раскрыть несколько узлов в новом проекте, они могут выглядеть следующим образом:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/proj-window-init.png" alt="proj window init">
</div>
<div class="title">Figure 4. В окне 'Проекты' отображается проект MyStrutsApp</div>
</div>
<div class="paragraph">
<p>*Примечание. *Используйте окно 'Файлы' (Window&gt; 'Файлы'), чтобы просмотреть все содержимое проекта в представлении на основе каталогов.</p>
</div>
<div class="paragraph">
<p>Файлы настройки Struts, а также дескриптор развертывания приложения удобно расположены в папке файлов настройки. Откройте дескриптор развертывания (двойным щелчком узла файла <code>web.xml</code>, чтобы отобразить его в редакторе исходного кода). Для выполнения обработки в среде Struts для сервлета контроллера Struts предусмотрено сопоставление.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;servlet&gt;
    &lt;servlet-name&gt;action&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.apache.struts.action.ActionServlet&lt;/servlet-class&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;config&lt;/param-name&gt;
        &lt;param-value&gt;/WEB-INF/struts-config.xml&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;debug&lt;/param-name&gt;
        &lt;param-value&gt;2&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
       &lt;param-name&gt;detail&lt;/param-name&gt;
       &lt;param-value&gt;2&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;load-on-startup&gt;2&lt;/load-on-startup&gt;
&lt;/servlet&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;action&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>В приведенном выше примере контроллер Struts называется <code>action</code> и определяется в библиотеке Struts (<code>org.apache.struts.action.ActionServlet</code>). Он настроен на обработку всех запросов, которые удовлетворяют сопоставлению <code>*.do</code>. Кроме того, параметры инициализации сервлета указаны с помощью файла <code>struts-config.xml</code>, который также содержится в папке <code>WEB-INF</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_страниц_jsp">Создание страниц JSP</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Для начала создайте две страницы JSP для приложения. Первая отображает форму. Вторая — это представление, которое возвращается при успешном входе в систему.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#login">Создание страницы входа</a></p>
</li>
<li>
<p><a href="#success">Создание страницы успешного входа</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_создание_страницы_входа_в_систему">Создание страницы входа в систему</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел проекта <code>MyStrutsApp</code>, выберите пункт "Создать" &gt; "JSP" и назовите новый файл <code>login</code> Нажмите кнопку "Завершить". Файл <code>login.jsp</code> откроется в редакторе исходного кода.</p>
</li>
<li>
<p>В редакторе исходного кода измените содержимое тегов <code>&lt;title&gt;</code> и <code>&lt;h1&gt;</code> (или <code>&lt;h2&gt;</code>, в зависимости от используемой версии среды IDE) на <code>Форма входа в систему</code>.</p>
</li>
<li>
<p>Добавьте следующие две директивы библиотеки тегов к началу файла:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-html" prefix="html" %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Многие веб-приложения используют страницы JSP для представлений в парадигме MVC, поэтому платформа Struts предоставляет пользовательские библиотеки тегов, которые помогают взаимодействовать с формами HTML. Их можно легко применить к файлу JSP при помощи поддержки автозавершения кода в среде IDE. При вводе текста в редактор исходного кода среда IDE предлагает автозавершение кода для тегов Struts, а также документацию Javadoc по Struts. Автозавершение кода можно также инициировать вручную с помощью сочетания клавиш Ctrl-Space:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/code-completion.png" alt="code completion">
</div>
<div class="title">Figure 5. Функция автозавершения кода и Javadoc предоставлены для тегов Struts</div>
</div>
<div class="paragraph">
<p>Библиотека тегов компонента <a href="http://struts.apache.org/release/1.3.x/struts-taglib/dev_bean.html">bean taglib</a> содержит различные теги, которые можно использовать при ассоциировании компонента формы (например, компонента <code>ActionForm</code>) с данными, получаемыми с формы. <a href="http://struts.apache.org/release/1.3.x/struts-taglib/dev_html.html">Библиотека тегов html</a> предлагает интерфейс между представлением и другими компонентами, необходимыми в веб-приложении. Например, ниже можно заменить обычные теги HTML <code>form</code> тегами Struts <code>&lt;html:form&gt;</code>. Благодаря этому, например, сервер ищет или создает объект компонента, соответствующий значению, указанному для элемента <code>action</code> в <code>html:form</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ниже тегов <code>&lt;h1&gt;</code> или <code>&lt;h2&gt;</code> добавьте следующее:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;html:form action="/login"&gt;

   &lt;html:submit value="Login" /&gt;

&lt;/html:form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>При завершении ввода текста в редакторе исходного кода можно дополнительно упорядочить код, щелкнув правой кнопкой мыши и выбрав 'Формат' (Alt-Shift-F).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В окне "Палитра" ("Окно" &gt; "Палитра") в правой области среды IDE перетащите элемент "Таблица" из раздела HTML в точку чуть выше строки <code>&lt;html:submit value="Login" /&gt;</code>. Отобразится диалоговое окно вставки таблицы. Укажите число строк — <code>3</code>, столбцов — <code>2</code> и оставьте все остальные значения — <code>0</code>. Позднее в этом учебном курсе вы сможете добавить <a href="#style">таблицу стилей</a> для изменения отображения таблицы.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/insert-table.png" alt="insert table">
</div>
<div class="title">Figure 6. На палитре предоставлено диалоговое окно для простых в использовании шаблонов кода</div>
</div>
<div class="paragraph">
<p>Нажмите кнопку "ОК", а затем при желании переформатируйте код (Alt-Shift-F). Форма в файле <code>login.jsp</code> теперь выглядит таким образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;html:form action="/login"&gt;
    &lt;table border="0"&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;&lt;/th&gt;
                &lt;th&gt;&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;/td&gt;
                &lt;td&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;/td&gt;
                &lt;td&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;/td&gt;
                &lt;td&gt;&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;

    &lt;html:submit value="Login" /&gt;

&lt;/html:form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>*Примечание. *Строку таблицы <code>&lt;thead&gt;</code> можно безопасно удалить, поскольку она не используется в этом учебном курсе.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В первой строке таблицы введите следующее (изменения указаны <strong>жирным шрифтом</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;tr&gt;
    &lt;td&gt;*Enter your name:*&lt;/td&gt;
    &lt;td&gt;*&lt;html:text property="name" /&gt;*&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Во второй строке таблицы введите следующее (изменения указаны <strong>жирным шрифтом</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;tr&gt;
    &lt;td&gt;*Enter your email:*&lt;/td&gt;
    &lt;td&gt;*&lt;html:text property="email" /&gt;*&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Элемент <code>html:text</code> позволяет соотносить поля ввода из формы со свойствами в компоненте формы, который будет создан на следующем шаге. Так, например, значение элемента <code>property</code> должно соответствовать полю, объявленному в компоненте формы, связанном с этой формой.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Переместите элемент &lt;html:submit value="Login" /&gt; во второй столбец третьей строки таблицы, чтобы третья строка таблицы выглядела следующим образом (изменения выделены <strong>жирным шрифтом</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;tr&gt;
    &lt;td&gt;&lt;/td&gt;
    &lt;td&gt;*&lt;html:submit value="Login" /&gt;*&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>На этом этапе форма входа в систему должна выглядеть следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;html:form action="/login"&gt;
    &lt;table border="0"&gt;
        &lt;tbody&gt;
            &lt;tr&gt;
                &lt;td&gt;Enter your name:&lt;/td&gt;
                &lt;td&gt;&lt;html:text property="name" /&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;Enter your email:&lt;/td&gt;
                &lt;td&gt;&lt;html:text property="email" /&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;/td&gt;
                &lt;td&gt;&lt;html:submit value="Login" /&gt;&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
&lt;/html:form&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_создание_страницы_успешного_входа">Создание страницы успешного входа</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел проекта <code>MyStrutsApp</code>, выберите пункт "Создать" &gt; "JSP" и назовите новый файл <code>success</code>. В поле "Папка" щелкните соответствующую кнопку "Обзор" и выберите в диалоговом окне пункт <code>WEB-INF</code>. Нажмите кнопку "Выбрать папку", чтобы в поле "Папка" появилось значение WEB-INF. Любые файлы, содержащиеся в папке WEB-INF, не доступны напрямую для клиентских запросов. Чтобы файл <code>success.jsp</code> отображался надлежащим образом, он должен содержать обработанные данные. Нажмите кнопку "Завершить".</p>
</li>
<li>
<p>В редакторе исходного кода измените содержание вновь созданной страницы на следующее:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;head&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
    &lt;title&gt;Login Success&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Congratulations!&lt;/h1&gt;

    &lt;p&gt;You have successfully logged in.&lt;/p&gt;

    &lt;p&gt;Your name is: .&lt;/p&gt;

    &lt;p&gt;Your email address is: .&lt;/p&gt;
&lt;/body&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте директиву <a href="http://struts.apache.org/release/1.3.x/struts-taglib/dev_bean.html">bean taglib</a> к верхней части файла:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте следующие теги <code>&lt;bean:write&gt;</code> (изменения выделены <strong>жирным шрифтом</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;Your name is: *&lt;bean:write name="LoginForm" property="name" /&gt;*.&lt;/p&gt;

&lt;p&gt;Your email address is: *&lt;bean:write name="LoginForm" property="email" /&gt;*.&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Задействовав теги <code>&lt;bean:write&gt;</code>, вы используете библиотеку тегов компонента для поиска компонента <code>ActionForm</code>, который нужно создать, и для отображения данных пользователя, сохраненных в <code>name</code> и <code>email</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_компонента_actionform">Создание компонента <code>ActionForm</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Компонент Struts <code>ActionForm</code> используется для сохранения данных между запросами. Например, если пользователь отправляет форму, то данные временно сохраняются в компоненте формы, чтобы они могли быть либо заново отображены в странице формы (если данные введены в неправильном формате или если вход в систему выполнен неуспешно) или отображаются на странице успешного входа в систему (если данные проходят проверку правильности).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши проект <code>MyStrutsApp</code> и выберите пункт "Создать" &gt; "Другое". В разделе "Категории" выберите пункт Struts, а затем в поле "Типы файлов" выберите "Компонент Struts ActionForm". Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Введите <code>LoginForm</code> в поле имени класса. Затем выберите <code>com.myapp.struts</code> в раскрывающемся списке "Пакет" и нажмите кнопку "Готово".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Среда IDE создает компонент <code>LoginForm</code> и открывает его в редакторе исходного кода. По умолчанию среда IDE создает его со строкой <code>String</code> с именем <code>name</code> и целым числом <code>int</code> с именем <code>number</code>. Для обоих полей есть определенные методы доступа. Также среда IDE добавляет объявление компонента к файлу <code>struts-config.xml</code>. Если открыть файл <code>struts-config.xml</code> в редакторе исходного кода, то можно увидеть следующее объявление, добавленное мастером:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;form-beans&gt;
    *&lt;form-bean name="LoginForm" type="com.myapp.struts.LoginForm" /&gt;*
&lt;/form-beans&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Среда IDE обеспечивает поддержку переходов в файле <code>struts-config.xml</code>. Удерживая клавишу Ctrl, наведите указатель мыши на полное имя класса компонента <code>LoginForm</code>. Имя становится ссылкой, что позволяет перейти прямо к классу в редакторе исходного кода.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/navigation-support.png" alt="navigation support">
</div>
<div class="title">Figure 7. Поддержка переходов предоставлена в struts-config.xml</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В компоненте <code>LoginForm</code> в редакторе исходного кода создайте поля и сопутствующие методы доступа, соответствующие полям текстового ввода <code>name</code> и <code>email</code>, созданным в файле <code>login.jsp</code>. Поскольку поле <code>name</code> уже создано в скелете <code>LoginForm</code>, нужно реализовать только поле <code>email</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Добавьте следующее объявление ниже поля <code>name</code> (изменения выделены <strong>жирным шрифтом</strong>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private String name;
*private String email;*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Чтобы создать методы доступа, наведите курсор на <code>email</code> и нажмите сочетание клавиш Alt-Insert.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/create-accessors.png" alt="create accessors">
</div>
<div class="title">Figure 8. Меню 'Вставить код' отображается при нажатии Ctrl-I в редакторе исходного кода</div>
</div>
<div class="paragraph">
<p>Выберите пункт "Методы получения и установки", а затем в появившемся диалоговом окне выберите <code>email : String</code> и нажмите кнопку "Создать". Для поля <code>email</code> создаются методы доступа.</p>
</div>
<div class="paragraph">
<p>*Примечание *. Можно удалить методы declaration и accessor для <code>number</code>, поскольку они не используются в этом учебном курсе.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_класса_действия_action">Создание класса действия <code>Action</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Класс действия <code>Action</code> содержит бизнес-логику в приложении. При получении данных из формы именно метод <code>execute</code> в объекте <code>Action</code> обрабатывает данные и определяет, в какое представление переслать обработанные данные. Поскольку класс <code>Action</code> входит в состав платформы Struts, IDE NetBeans содержит мастер.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В окне 'Проекты' щелкните правой кнопкой мыши узел проекта <code>MyStrutsApp</code> и выберите 'Создать' &gt; 'Другие'. Из категории Struts выберите пункт Struts Action и нажмите кнопку "Далее".</p>
</li>
<li>
<p>На панели "Имя и расположение" измените имя на <code>LoginAction</code>.</p>
</li>
<li>
<p>Выберите <code>com.myapp.struts</code> в раскрывающемся списке "Пакет".</p>
</li>
<li>
<p>Введите <code>/login</code> в пути действия. Значение должно соответствовать значению, указанному для атрибута <code>action</code> в тегах <code>&lt;html:form&gt;</code> в файле <code>login.jsp</code>. Выставьте параметры, как указано на снимке экрана ниже, а затем нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/new-struts-action.png" alt="new struts action">
</div>
<div class="title">Figure 9. Мастер создания действий Struts</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В третьем действии этого мастера предоставляется возможность ассоциировать класс <code>Action</code> с компонентом формы. Обратите внимание, что ранее созданный компонент <code>LoginForm</code> указан как вариант для пункта "Имя компонента ActionForm". Внесите на панель следующие изменения:</p>
<div class="ulist">
<ul>
<li>
<p>Удалите прямую косую черту из поля "Входной ресурс"</p>
</li>
<li>
<p>Укажите область запроса (Сеанс — это область запроса по умолчанию в платформе Struts.)</p>
</li>
<li>
<p>Снимите флажок "Проверить компонент ActionForm"
Нажмите кнопку "Завершить". Создается класс <code>LoginAction</code>, и файл открывается в редакторе исходного кода. Также обратите внимание, что следующая запись <code>action</code> добавляется к файлу <code>struts-config.xml</code>:</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;action-mappings&gt;
    *&lt;action name="LoginForm" path="/login" scope="request" type="com.myapp.struts.LoginAction" validate="false"/&gt;*
    &lt;action path="/Welcome" forward="/welcomeStruts.jsp"/&gt;
&lt;/action-mappings&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Атрибуты <code>name</code> и <code>scope</code> относятся к компоненту формы, связанному с действием. В частности, когда входящий запрос соответствует выражению <code>/login</code>, платформа Struts автоматически создает объект <code>LoginForm</code> и населяет его данными формы, которые были отправлены в запросе. Для <code>validate</code> устанавливается по умолчанию значение <code>true</code>. Благодаря этому платформа вызывает метод <code>validate</code> из компонента формы. Но соответствующий флажок в мастере снят, поскольку в следующем действии будет вручную написан код простой проверки, для которого не требуется метод <code>validate</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_реализация_проверки_правильности">Реализация проверки правильности</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В редакторе исходного кода пройдите по классу <code>LoginAction</code> и посмотрите на метод выполнения <code>execute</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public ActionForward execute(ActionMapping mapping, ActionForm form,
    HttpServletRequest request, HttpServletResponse response)
    throws Exception {

    return mapping.findForward(SUCCESS);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Обратите внимание на определение <code>SUCCESS</code>, указанное под объявлением класса <code>LoginAction</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private final static String SUCCESS = "success";</code></pre>
</div>
</div>
<div class="paragraph">
<p>Сейчас метод <code>mapping.findForward</code> настроен на безусловную пересылку любого запроса в представление вывода под названием <code>success</code>. Это не очень желательно, ведь лучше сперва провести некоторую проверку входящих данных, чтобы определить, отправлять ли представление <code>success</code> или какое-то другое представление.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#beanData">Доступ к данным компонента и подготовка условий пересылки</a></p>
</li>
<li>
<p><a href="#errorMsg">Настройка сообщения об ошибке</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_доступ_к_данным_компонента_и_подготовка_условия_пересылки">Доступ к данным компонента и подготовка условия пересылки</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Введите следующий код в тело метода <code>execute</code>:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// extract user data
LoginForm formBean = (LoginForm)form;
String name = formBean.getName();
String email = formBean.getEmail();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Чтобы использовать входящие данные формы, необходимо взять аргумент <code>ActionForm</code> из <code>execute`и привести его к `LoginForm</code>, затем применить методы получения, которые уже созданы ранее.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Введите следующее условие для выполнения проверки входящих данных:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// perform validation
if ((name == null) ||             // name parameter does not exist
    email == null  ||             // email parameter does not exist
    name.equals("") ||            // name parameter is empty
    email.indexOf("@") == -1) {   // email lacks '@'

    return mapping.findForward(FAILURE);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>На этом этапе метод <code>execute</code> должен выглядеть так:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public ActionForward execute(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {

    // extract user data
    LoginForm formBean = (LoginForm) form;
    String name = formBean.getName();
    String email = formBean.getEmail();

    // perform validation
    if ((name == null) || // name parameter does not exist
            email == null || // email parameter does not exist
            name.equals("") || // name parameter is empty
            email.indexOf("@") == -1) {   // email lacks '@'

        return mapping.findForward(FAILURE);
    }

    return mapping.findForward(SUCCESS);
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте объявление <code>FAILURE</code> к классу <code>LoginAction</code> (изменения выделены <strong>жирным шрифтом</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private final static String SUCCESS = "success";
*private final static String FAILURE = "failure";*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Используя вышеуказанную логику, метод <code>execute</code> пересылает запрос в представление <code>success</code>, если пользователь предоставляет данные для полей <code>name</code> и <code>email</code>, а поле электронной почты содержит знак "@". В противном случае пересылается представление <code>failure</code>. Как будет указано ниже в разделе <a href="#forward">Добавление записей <code>forward</code> к <code>struts-config.xml</code></a>, можно указать представление <code>failure</code>, которое будет указывать на страницу формы, чтобы пользователь мог снова ввести данные в правильном формате.</p>
</div>
</div>
<div class="sect2">
<h3 id="_настройка_сообщения_об_ошибке">Настройка сообщения об ошибке</h3>
<div class="paragraph">
<p>Если возвращается форма входа, то будет полезно сообщить пользователю, что проверка не пройдена. Это можно сделать, добавив поле <code>error</code> к компоненту формы и соответствующий тег <code>&lt;bean:write&gt;</code> к форме в <code>login.jsp</code>. Наконец, в объекте <code>Action</code> укажите отображение сообщения об ошибке в случае выбора представления <code>failure</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Откройте <code>LoginForm</code> и добавьте к классу поле <code>error</code>:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// error message
private String error;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте методы получения и установки для <code>error</code>, как <a href="#accessors">указано выше</a>.</p>
</li>
<li>
<p>Измените метод установки, чтобы он выглядел следующим образом:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">public void setError() {
    this.error =
        "&lt;span style='color:red'&gt;Please provide valid entries for both fields&lt;/span&gt;";
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Откройте <code>login.jsp</code> и внесите следующие изменения:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;html:form action="/login"&gt;
    &lt;table border="0"&gt;
        &lt;tbody&gt;
            *&lt;tr&gt;
                &lt;td colspan="2"&gt;
                    &lt;bean:write name="LoginForm" property="error" filter="false"/&gt;
                    &amp;amp;nbsp;&lt;/td&gt;
            &lt;/tr&gt;*
            &lt;tr&gt;
                &lt;td&gt;Enter your name:&lt;/td&gt;
                &lt;td&gt;&lt;html:text property="name" /&gt;&lt;/td&gt;
            &lt;/tr&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В <code>LoginAction</code> в рамках блока <code>if</code> добавьте оператор, устанавливающий сообщение об ошибке, перед пересылкой условия <code>failure</code> (изменения выделены <strong>жирным шрифтом</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">if ((name == null) ||             // name parameter does not exist
    email == null  ||             // email parameter does not exist
    name.equals("") ||            // name parameter is empty
    email.indexOf("@") == -1) {   // email lacks '@'

    *formBean.setError();*
    return mapping.findForward(FAILURE);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Завершенный класс <code>LoginAction</code> должен теперь выглядеть следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class LoginAction extends org.apache.struts.action.Action {

    private final static String SUCCESS = "success";
    private final static String FAILURE = "failure";

    public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws Exception {

        // extract user data
        LoginForm formBean = (LoginForm)form;
        String name = formBean.getName();
        String email = formBean.getEmail();

        // perform validation
        if ((name == null) ||             // name parameter does not exist
            email == null  ||             // email parameter does not exist
            name.equals("") ||            // name parameter is empty
            email.indexOf("@") == -1) {   // email lacks '@'

            formBean.setError();
            return mapping.findForward(FAILURE);
        }

        return mapping.findForward(SUCCESS);

    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_добавление_записей_forward_к_struts_config_xml">Добавление записей <code>forward</code> к <code>struts-config.xml</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Чтобы приложение соответствовало страницам JSP с условиями пересылки, возвращенными методом исполнения <code>LoginAction</code> <code>execute</code>, необходимо добавить записи <code>forward</code> к файлу <code>struts-config.xml</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Откройте <code>struts-config.xml</code> в редакторе исходного кода, щелкните правой кнопкой мыши в любом местоположении в записи <code>action</code> для <code>LoginForm</code> и выберите Struts &gt; 'Добавить Forward'.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-forward.png" alt="add forward">
</div>
<div class="title">Figure 10. Щелкните правой кнопкой мыши и выберите Struts &gt; 'Добавить Forward'</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В диалоговом окне "Добавить Forward" введите <code>success</code> в поле "Имя пересылку". Укажите путь к файлу <code>success.jsp</code> в поле файла ресурсов (напр., <code>/WEB-INF/success.jsp</code>). Диалоговое окно должно теперь выглядеть следующим образом:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-forward-dialog.png" alt="add forward dialog">
</div>
<div class="title">Figure 11. В диалоговом окне 'Добавить Forward' создается запись Forward в struts-config.xml</div>
</div>
<div class="paragraph">
<p>Нажмите кнопку "Add". Обратите внимание, что следующая запись <code>forward</code> была добавлена к файлу <code>struts-config.xml</code> (изменения выделены <strong>жирным шрифтом</strong>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;action name="LoginForm" path="/login" scope="request" type="com.myapp.struts.LoginAction" validate="false"&gt;
    *&lt;forward name="success" path="/WEB-INF/success.jsp"/&gt;*
&lt;/action&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выполните такое же действие, чтобы добавить запись пересылки для <code>failure</code>. Укажите в пути к файлу ресурсов <code>/login.jsp</code>. Следующая запись <code>forward</code> добавляется к файлу <code>struts-config.xml</code> (изменения выделены <strong>жирным шрифтом</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;forward name="success" path="/WEB-INF/success.jsp"/&gt;
*&lt;forward name="failure" path="/login.jsp"/&gt;*</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_настройка_и_выполнение_приложения">Настройка и выполнение приложения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Среда IDE использует сценарий сборки Ant для сборки и выполнения вашего веб-приложения. Среда IDE создала сценарий сборки при создании проекта на основании параметров, указанных в мастере создания проекта. Перед сборкой и выполнением приложения необходимо указать для приложения точкой входа по умолчанию <code>login.jsp</code>. Можно дополнительно добавить к проекту простую таблицу стилей.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#welcome">Настройка страницы приветствия</a></p>
</li>
<li>
<p><a href="#style">Присоединение таблицы стилей</a></p>
</li>
<li>
<p><a href="#run">Выполнение приложения</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_настройка_страницы_приветствия">Настройка страницы приветствия</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В окне 'Проекты' дважды щелкните дескриптор развертывания <code>web.xml</code>. Перечисленные наверху редактора исходного кода вкладки предоставляют интерфейс к файлу <code>web.xml</code>. Щелкните вкладку "Страницы". В поле "Файлы приветствия" введите <code>login.jsp</code>.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/welcome-files.png" alt="welcome files">
</div>
<div class="title">Figure 12. Графический редактор для дескриптора развертывания приложения</div>
</div>
<div class="paragraph">
<p>Теперь перейдите на вкладку 'Исходный код' для просмотра файла. Обратите внимание, что <code>login.jsp</code> теперь указан в записи <code>welcome-file</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;welcome-file&gt;login.jsp&lt;/welcome-file&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_присоединение_таблицы_стилей">Присоединение таблицы стилей</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте к проекту простую таблицу стилей. Это можно легко сделать, сохранив <a href="https://netbeans.org/files/documents/4/2228/stylesheet.css">этот пример таблицы стилей</a> на компьютер. Скопируйте файл (Ctrl-C), а затем в среде IDE выберите узел веб-страницы в окне "Проекты" и нажмите Ctrl-V). Файл добавляется к вашему проекту.</p>
</li>
<li>
<p>Свяжите таблицу стилей со страницами JSP, добавив ссылку между тегами <code>&lt;head&gt;</code> как в <code>login.jsp</code>, так и в <code>success.jsp</code>:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;link rel="stylesheet" type="text/css" href="stylesheet.css"&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_запуск_приложения">Запуск приложения</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В окне "Проекты" щелкните правой кнопкой мыши узел проекта и выберите команду "Выполнить". Среда IDE собирает веб-приложение и развертывает его, используя сервер, указанный при создании проекта Страница <code>login.jsp</code> будет открыта и отображена в браузере. Введите какие-то данные, которые должны не пройти проверку, например, оставьте одно поле пустым или введите адрес электронной почты без знака "@":</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/login-form.png" alt="login form">
</div>
<div class="title">Figure 13. Форма содержит данные, которые не пройдут проверку правильности</div>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Вход" страница формы входа отображается заново и содержит сообщение об ошибке:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/login-form-error.png" alt="login form error">
</div>
<div class="title">Figure 14. Форма повторно отображается с сообщением об ошибке</div>
</div>
<div class="paragraph">
<p>Попробуйте ввести данные, которые должны пройти проверку. После нажатия кнопки "Вход" вы видите страницу успешного входа:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/success-page.png" alt="success page">
</div>
<div class="title">Figure 15. Отображается страница успешного завершения, на которой отображаются входные данные</div>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Introduction%20to%20Struts">Мы ждем ваших отзывов</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_дополнительные_сведения">Дополнительные сведения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>На этом завершается введение в платформу Struts в IDE NetBeans. В этом документе описывается создание простого веб-приложения MVC в IDE NetBeans с помощью платформы Struts и описывается интерфейс IDE для разработки веб-приложений. Было показано, как использовать теги Struts на страницах JSP, временно хранить данные пользователя в компоненте Struts <code>ActionForm</code> и внедрять логику пересылки с помощью объекта действия Struts <code>Action</code>. Кроме того, будет показано, как внедрять в приложение простую проверку правильности, в том числе вывод предупреждения при неудачной попытке входа в систему.</p>
</div>
<div class="paragraph">
<p>Учебные курсы на смежные темы приведены в следующих материалах:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="framework-adding-support.html">Добавление поддержки веб-платформы</a>. В общем руководстве описывается добавления поддержки веб-платформ к IDE NetBeans с помощью диспетчера подключаемых модулей.</p>
</li>
<li>
<p><a href="quickstart-webapps-spring.html">Введение в веб-платформу Spring</a>. Описываются основы использования IDE NetBeans для разработки веб-приложений с помощью платформы Spring.</p>
</li>
<li>
<p><a href="jsf20-intro.html">Введение в JavaServer Faces 2.0</a>. Документ с описанием способов присоединения управляемого компонента к веб-страницам и использования преимуществ шаблонов Facelets.</p>
</li>
</ul>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/quickstart-webapps-struts_ru.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
