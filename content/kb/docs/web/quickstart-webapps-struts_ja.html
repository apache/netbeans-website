
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Struts Webフレームワーク入門</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Struts Webフレームワーク入門 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Struts Webフレームワーク入門">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>

  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="/download/nb19/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Struts Webフレームワーク入門</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/quickstart-webapps-struts_ja.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_アプリケーションの概要">アプリケーションの概要</a></li>
<li><a href="#_strutsアプリケーションの設定">Strutsアプリケーションの設定</a></li>
<li><a href="#_jspページの作成">JSPページの作成</a>
<ul class="sectlevel2">
<li><a href="#_ログインページの作成">ログイン・ページの作成</a></li>
<li><a href="#_成功ページの作成">成功ページの作成</a></li>
</ul>
</li>
<li><a href="#_actionform_beanの作成"><code>ActionForm</code> Beanの作成</a></li>
<li><a href="#_actionクラスの作成">`Action`クラスの作成</a></li>
<li><a href="#_検証の実装">検証の実装</a>
<ul class="sectlevel2">
<li><a href="#_beanデータへのアクセスと転送条件の準備">Beanデータへのアクセスと転送条件の準備</a></li>
<li><a href="#_エラーメッセージの設定">エラー・メッセージの設定</a></li>
</ul>
</li>
<li><a href="#_struts_config_xmlへのforwardエントリの追加">`struts-config.xml`への`forward`エントリの追加</a></li>
<li><a href="#_アプリケーションの構成と実行">アプリケーションの構成と実行</a>
<ul class="sectlevel2">
<li><a href="#_開始ページの設定">開始ページの設定</a></li>
<li><a href="#_スタイルシートの添付">スタイル・シートの添付</a></li>
<li><a href="#_アプリケーションの実行">アプリケーションの実行</a></li>
</ul>
</li>
<li><a href="#_関連項目">関連項目</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>このドキュメントでは、NetBeans IDEを使用して、Struts Webフレームワークを使用するWebアプリケーションを開発する基本手順を示します。Strutsは、Java Servlet APIを拡張してMVC (Model、View、Controller)アーキテクチャを採用した、オープン・ソースのフレームワークです。JSPページ、JavaBeans、リソース・バンドル、XMLなどの標準テクノロジに基づいた、管理可能で拡張可能な柔軟性のあるWebアプリケーションを作成できます。</p>
</div>
<div class="paragraph">
<p>このチュートリアルでは、ログイン・ページを表示し、検証をパスするデータを送信すると成功ページを返す、単純なMVCアプリケーションのビルド方法を学習します。Strutsの提供するいくつかの基本機能と、IDEを使用してそれらの機能を実装する方法を学びます。具体的には、JSPページでStrutsタグを使用し、Strutsの`ActionForm` Beanを使用してユーザー・データを管理し、Strutsの`Action`オブジェクトを使用して転送ロジックを実装します。また、ログイン失敗に対する警告メッセージの設定など、アプリケーションに単純な検証を実装する方法も示します。</p>
</div>
<div class="paragraph">
<p>Strutsに関するさらに詳しい説明については、公式の<a href="http://struts.apache.org/">Struts</a> Webサイトにある<a href="http://struts.apache.org/struts-action/faqs/works.html">How does Struts work?</a>を参照してください。IDEのJavadoc索引検索(「ヘルプ」&gt;「Javadoc索引検索」)を使用して、Strutsライブラリとともにパッケージ化されている<a href="http://struts.apache.org/release/1.3.x/apidocs/index.html">StrutsフレームワークAPI</a>も参照してください。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-80-74-73.png" alt="netbeans stamp 80 74 73">
</div>
<div class="title">Figure 1. このページの内容は、NetBeans IDE 7.2、7.3、7.4および8.0に適用されます</div>
</div>
<div class="paragraph">
<p><strong>このチュートリアルを完了するには、次のソフトウェアとリソースが必要です。</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ソフトウェアまたはリソース</th>
<th class="tableblock halign-left valign-top">必須バージョン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7.2、7.3、7.4、8.0、Java EE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java Development Kit (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7または8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GlassFishサーバー
<em>または</em>
Tomcatサーブレット・コンテナ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open Source Edition 3.xまたは4.0
_ _
バージョン7.xまたは8.x</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>*注意: *</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Javaインストール版では、GlassFishサーバーとApache Tomcatサーブレット・コンテナをオプションでインストールできます。このチュートリアルの手順に従うには、これらのいずれかをインストール(または別のサーバーをIDEに登録)する必要があります。</p>
</li>
<li>
<p>プロジェクトを、正常に機能するソリューションと比較する必要がある場合は、<a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJava%2520Web%252FMyStrutsApp.zip">サンプル・アプリケーションをダウンロード</a>できます。</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_アプリケーションの概要">アプリケーションの概要</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Strutsを使用すると、フレームワークによってコントローラ・サーブレット`ActionServlet`が提供されます。このサーブレットは、IDEに含まれているStrutsライブラリで定義されて、<a href="#controllerServlet">次に示す</a>ように、`web.xml`デプロイメント・ディスクリプタに自動的に登録されます。このコントローラ・サーブレットは`struts-config.xml`ファイルを使用して、受信リクエストをStrutsの`Action`オブジェクトにマップし、アクションに関連付けられた`ActionForm`オブジェクトがある場合は、そのオブジェクトをインスタンス化して、フォーム・データを一時的に保存します。`Action`オブジェクトは、フォームBeanに保存された任意のデータを使用しながら、`execute`メソッドを使用してリクエストを処理します。リクエストを処理すると、`Action`オブジェクトは新しいデータを(同じフォームBeanまたは別の結果Beanに)保存し、その結果を適切なビューに転送します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/workflow.png" alt="workflow">
</div>
<div class="title">Figure 2. Strutsワークフロー</div>
</div>
<div class="paragraph">
<p>Strutsアプリケーションの開発は、NetBeans IDEで他の種類のWebアプリケーションを開発するのと似ています。ただし、IDEが提供するStrutsサポートを利用することによって、使用するWeb開発ツールキットを補完できます。たとえば、IDEのテンプレートを使用して、Strutsの`Action`オブジェクトや`ActionForm` Beanを作成します。作成すると、IDEによって、これらのクラスは自動的に`struts-config.xml`ファイルに登録され、ソース・エディタの右クリック・メニューのメニュー項目を使用してこのファイルを簡単に拡張できます。多くのWebアプリケーションがビューにJSPページを使用するため、StrutsにもHTMLフォームとの対話を容易にするカスタム・タグ・ライブラリが用意されています。IDEのソース・エディタ内でコード補完およびJavadocサポートを呼び出して、そのライブラリの効率的な操作に役立てることができます。</p>
</div>
<div class="paragraph">
<p>次の手順では、ユーザー・データの収集、単純な検証の実行、および成功ページへのデータの出力を行う、単純なフォームを作成する方法を示します。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_strutsアプリケーションの設定">Strutsアプリケーションの設定</h2>
<div class="sectionbody">
<div class="paragraph">
<p>IDEでは、Strutsアプリケーションは、StrutsライブラリとStruts構成ファイルを伴った通常のWebアプリケーションにすぎません。Strutsアプリケーションを作成する方法は、IDEで他のWebアプリケーションを作成する方法と同様に、新規Webアプリケーション・ウィザードを使用して、追加ステップでStrutsライブラリとStruts構成ファイルをアプリケーションに含めるように指示します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>メイン・メニューから「ファイル」&gt;「新規プロジェクト」([Ctrl]-[Shift]-[N]、Macの場合は[⌘]-[Shift]-[N])を選択します。「カテゴリ」のリストで「Java Web」を選択し、「プロジェクト」のリストで「Webアプリケーション」を選択します。「次」をクリックします。</p>
</li>
<li>
<p>「名前と場所」パネルで「プロジェクト名」に「<code>MyStrutsApp</code>」と入力し、「次」をクリックします。</p>
</li>
<li>
<p>「サーバーと設定」パネルで、アプリケーションのデプロイ先のサーバーを選択します。表示されるのは、IDEに登録されているサーバーのみです。サーバーを登録するには、「サーバー」ドロップダウン・リスト横の「追加」をクリックします。デプロイしたアプリケーションのコンテキスト・パスは`/MyStrutsApp`になります。「次」をクリックします。</p>
</li>
<li>
<p>「フレームワーク」パネルで「Struts」を選択します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/new-project-wizard.png" alt="new project wizard">
</div>
<div class="title">Figure 3. 新規Webアプリケーション・ウィザードの「フレームワーク」パネルに表示された「Struts」オプション</div>
</div>
<div class="paragraph">
<p>このチュートリアルの目的のためには、このパネルの下部領域にある構成値を変更しないでください。ウィザードには、次の構成オプションが表示されます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>アクションのサーブレット名</strong>: アプリケーションで使用するStrutsアクション・サーブレットの名前。`web.xml`デプロイメント・ディスクリプタにはアクション・サーブレットのエントリが格納され、Strutsライブラリ内のサーブレット・クラスやアプリケーション内の`struts-config.xml`構成ファイルのパスなど、Struts固有の適切なパラメータを指示します。</p>
</li>
<li>
<p><strong>アクションのURLパターン</strong>: Strutsアクション・コントローラにマップされる、受信リクエストのパターンを指定します。この指定によって、デプロイメント・ディスクリプタにマッピング・エントリが生成されます。デフォルトでは、`*.do`パターンのみマップされます。</p>
</li>
<li>
<p><strong>アプリケーション・リソース</strong>: メッセージのローカライズのために`struts-config.xml`ファイルで使用されるリソース・バンドルを指定できます。デフォルトでは、`com.myapp.struts.ApplicationResource`です。</p>
</li>
<li>
<p><strong>Struts TLDを追加</strong>: Strutsタグ・ライブラリ用のタグ・ライブラリ・ディスクリプタを生成できます。タグ・ライブラリ・ディスクリプタは、タグ・ライブラリ全体のみでなく、各個別タグに関する追加情報も格納されるXMLドキュメントです。一般に、ローカルTLDファイルではなく、オンラインのURIを参照できるため、これは必要ありません。</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「終了」をクリックします。IDEによって、ファイル・システムにプロジェクト・フォルダが作成されます。IDEのWebアプリケーションでは、プロジェクト・フォルダに、すべてのソースとIDEのプロジェクト・メタデータ(Antビルド・スクリプトがなど)が含まれます。ただし、使用するWebアプリケーションには、そのクラスパス上にすべてのStrutsライブラリがさらに含まれます。これらはアプリケーションのクラスパス上に存在するのみでなく、プロジェクトに含まれるため、後でプロジェクトをビルドしたときに一緒にパッケージ化されます。</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>IDEでプロジェクトが開きます。「プロジェクト」ウィンドウは、プロジェクト・ソースへのメインのエントリ・ポイントです。ここには重要なプロジェクト内容の論理ビューが表示されます。たとえば、新しいプロジェクト内のいくつかのノードを展開すると、次のようになります。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/proj-window-init.png" alt="proj window init">
</div>
<div class="title">Figure 4. MyStrutsAppプロジェクトが表示された「プロジェクト」ウィンドウ</div>
</div>
<div class="paragraph">
<p>*注意: *プロジェクトのすべての内容をディレクトリ・ベースで表示するには、「ファイル」ウィンドウ(「ウィンドウ」&gt;「ファイル」)を使用します。</p>
</div>
<div class="paragraph">
<p>Struts固有の構成ファイルとアプリケーションのデプロイメント・ディスクリプタは、「構成ファイル」フォルダ内に使いやすく配置されます。デプロイメント・ディスクリプタを開きます(ソース・エディタで表示するには`web.xml`をダブルクリック)。Struts処理に対応するため、Strutsコントローラ・サーブレットにマッピングが提供されます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;servlet&gt;
    &lt;servlet-name&gt;action&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.apache.struts.action.ActionServlet&lt;/servlet-class&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;config&lt;/param-name&gt;
        &lt;param-value&gt;/WEB-INF/struts-config.xml&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;debug&lt;/param-name&gt;
        &lt;param-value&gt;2&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
       &lt;param-name&gt;detail&lt;/param-name&gt;
       &lt;param-value&gt;2&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;load-on-startup&gt;2&lt;/load-on-startup&gt;
&lt;/servlet&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;action&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>ここでは、Strutsコントローラ・サーブレットの名前は`action`で、Strutsライブラリで定義されています(<code>org.apache.struts.action.ActionServlet</code>)。このサーブレットは、`*.do`マッピングを満たすリクエストをすべて処理するように設定されています。また、サーブレットの初期化パラメータは`struts-config.xml`ファイルによって指定されます。このファイルもまた、`WEB-INF`フォルダに含まれています。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jspページの作成">JSPページの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>最初に、アプリケーション用のJSPページを2つ作成します。1つ目はフォームを表示します。2つ目はログインが成功したときに返されるビューです。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#login">ログイン・ページの作成</a></p>
</li>
<li>
<p><a href="#success">成功ページの作成</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_ログインページの作成">ログイン・ページの作成</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「<code>MyStrutsApp</code>」プロジェクト・ノードを右クリックし、「新規」&gt;「JSP」を選択して、新規ファイル名として「<code>login</code>」を入力します。「終了」をクリックします。ソース・エディタに`login.jsp`ファイルが表示されます。</p>
</li>
<li>
<p>ソース・エディタで`&lt;title&gt;`と`&lt;h1&gt;`タグ(または使用中のIDEバージョンによっては`&lt;h2&gt;`タグ)の内容を`Login Form`に変更します。</p>
</li>
<li>
<p>ファイルの先頭に、次の2つのtaglibディレクティブを追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-html" prefix="html" %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>多くのWebアプリケーションは、MVCパラダイム内のビューにJSPページを使用するため、Strutsには、HTMLフォームとの対話を容易にするカスタム・タグ・ライブラリが用意されています。これらのタグはIDEのコード補完サポートを使用して、簡単にJSPファイルに適用できます。ソース・エディタに入力すると、IDEによってStrutsタグに対するコード補完とStruts Javadocが提供されます。[Ctrl]-[Space]を押して手動でコード補完を起動することもできます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/code-completion.png" alt="code completion">
</div>
<div class="title">Figure 5. Strutsタグに対して提供されたコード補完とJavadoc</div>
</div>
<div class="paragraph">
<p><a href="http://struts.apache.org/release/1.3.x/struts-taglib/dev_bean.html">Bean taglib</a>は、フォームから収集されたデータにフォームBean (<code>ActionForm</code> Bean)を関連付ける際に役立つ、多数のタグを提供します。<a href="http://struts.apache.org/release/1.3.x/struts-taglib/dev_html.html">html taglib</a>は、ビューと、Webアプリケーションに必要な他のコンポーネントとの間のインタフェースを提供します。たとえば、次では一般的なhtml`form`タグをStrutsの`&lt;html:form&gt;`タグに置き換えます。この利点の1つは、こうすることで、`html:form`の`action`要素に提供される値に対応するBeanオブジェクトを、サーバーが検索または作成することです。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>&lt;h1&gt;</code> (または`&lt;h2&gt;`)タグの下に、次を追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;html:form action="/login"&gt;

   &lt;html:submit value="Login" /&gt;

&lt;/html:form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>ソース・エディタでの入力が終了するたびに、右クリックして「フォーマット」を選択([Alt]-[Shift]-[F])することにより、コードを整えることができます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>IDEの右側にあるパレット(「ウィンドウ」&gt;「パレット」)で、「表」項目を「HTML」カテゴリから`&lt;html:submit value="Login" /&gt;`行の直前の位置にドラッグします。「挿入表」ダイアログ・ボックスが表示されます。行を`3`、列を`2`に設定し、その他の設定はすべて`0`のままにします。このチュートリアルの後の方で、表の表示に影響する<a href="#style">スタイル・シートを添付</a>します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/insert-table.png" alt="insert table">
</div>
<div class="title">Figure 6. パレットによって提供される、コード・テンプレート用の簡単に使用できるダイアログ</div>
</div>
<div class="paragraph">
<p>「OK」をクリックし、必要に応じてコードの書式を再設定します([Alt]-[Shift]-[F])。これで、`login.jsp`のフォームは次のようになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;html:form action="/login"&gt;
    &lt;table border="0"&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;&lt;/th&gt;
                &lt;th&gt;&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;/td&gt;
                &lt;td&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;/td&gt;
                &lt;td&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;/td&gt;
                &lt;td&gt;&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;

    &lt;html:submit value="Login" /&gt;

&lt;/html:form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>*注意: *このチュートリアルでは使用されないため、表の`&lt;thead&gt;`行は安全に削除できます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>表の最初の行に、次の*太字*で示した部分を入力します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;tr&gt;
    &lt;td&gt;*Enter your name:*&lt;/td&gt;
    &lt;td&gt;*&lt;html:text property="name" /&gt;*&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>表の2行目に、次の*太字*で示した部分を入力します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;tr&gt;
    &lt;td&gt;*Enter your email:*&lt;/td&gt;
    &lt;td&gt;*&lt;html:text property="email" /&gt;*&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>`html:text`要素によって、フォームからの入力フィールドを、次のステップで作成されるフォームBeanのプロパティと一致させることができます。たとえば、`property`の値は、このフォームに関連付けられたフォームBeanで宣言されているフィールドと一致します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>表の3行目の2列目に&lt;html:submit value="Login" /&gt; 要素を移動し、表の3行目が次の*太字*で示した部分になるようにします。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;tr&gt;
    &lt;td&gt;&lt;/td&gt;
    &lt;td&gt;*&lt;html:submit value="Login" /&gt;*&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>この段階で、ログイン・フォームは次のようになるはずです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;html:form action="/login"&gt;
    &lt;table border="0"&gt;
        &lt;tbody&gt;
            &lt;tr&gt;
                &lt;td&gt;Enter your name:&lt;/td&gt;
                &lt;td&gt;&lt;html:text property="name" /&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;Enter your email:&lt;/td&gt;
                &lt;td&gt;&lt;html:text property="email" /&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;/td&gt;
                &lt;td&gt;&lt;html:submit value="Login" /&gt;&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
&lt;/html:form&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_成功ページの作成">成功ページの作成</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「<code>MyStrutsApp</code>」プロジェクト・ノードを右クリックし、「新規」&gt;「JSP」を選択して、新規ファイル名として「<code>success</code>」を入力します。「フォルダ」フィールドで、横の「参照」ボタンをクリックし、表示されるダイアログから「<code>WEB-INF</code>」を選択します。「フォルダを選択」をクリックし、「フォルダ」フィールドに「WEB-INF」と入力します。WEB-INFフォルダに含まれるどのファイルにも、クライアント・リクエストから直接アクセスすることはできません。`success.jsp`を正しく表示するために、処理済のデータを含める必要があります。「終了」をクリックします。</p>
</li>
<li>
<p>ソース・エディタで新しく作成されたページの内容を次のように変更します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;head&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
    &lt;title&gt;Login Success&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Congratulations!&lt;/h1&gt;

    &lt;p&gt;You have successfully logged in.&lt;/p&gt;

    &lt;p&gt;Your name is: .&lt;/p&gt;

    &lt;p&gt;Your email address is: .&lt;/p&gt;
&lt;/body&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ファイルの先頭に<a href="http://struts.apache.org/release/1.3.x/struts-taglib/dev_bean.html">Bean taglib</a>ディレクティブを追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>次の*太字*で示した`&lt;bean:write&gt;`タグを追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;Your name is: *&lt;bean:write name="LoginForm" property="name" /&gt;*.&lt;/p&gt;

&lt;p&gt;Your email address is: *&lt;bean:write name="LoginForm" property="email" /&gt;*.&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>&lt;bean:write&gt;`タグを使用することによって、Bean taglibを利用し、これから作成する`ActionForm</code> Beanを検索して、`name`および`email`に保存されたユーザー・データを表示します。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_actionform_beanの作成"><code>ActionForm</code> Beanの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Strutsの`ActionForm` Beanは、リクエスト間でデータを保持するために使用されます。たとえば、ユーザーがフォームを送信した場合、フォーム・ページに再表示(データが無効な形式か、ログインに失敗した場合)するか、ログイン成功ページに表示(データが検証をパスした場合)できるように、そのデータは一時的にフォームBeanに格納されます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「<code>MyStrutsApp</code>」プロジェクト・ノードを右クリックし、「新規」&gt;「その他」を選択します。「カテゴリ」で「Struts」を選択し、「ファイル・タイプ」で「Struts ActionForm Bean」を選択します。「次」をクリックします。</p>
</li>
<li>
<p>「クラス名」に「<code>LoginForm</code>」と入力します。続いて、「パッケージ」ドロップダウン・リストから「<code>com.myapp.struts</code>」を選択し、「終了」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>IDEによって`LoginForm` Beanが生成され、ソース・エディタで開きます。デフォルトでは、IDEには`name`という`String`と、`number`という`int`が用意されています。両方のフィールドに、それらに定義されたアクセッサ・メソッドがあります。また、IDEにより`struts-config.xml`ファイルにBean宣言が追加されます。ソース・エディタで`struts-config.xml`ファイルを開くと、ウィザードによって追加された次の宣言を確認できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;form-beans&gt;
    *&lt;form-bean name="LoginForm" type="com.myapp.struts.LoginForm" /&gt;*
&lt;/form-beans&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>struts-config.xml`ファイルには、IDEのナビゲーション・サポートが用意されています。[Ctrl]キーを押したまま、`LoginForm</code> Beanの完全修飾クラス名の上にマウスを動かします。名前がリンクになり、ソース・エディタ内のそのクラスに直接移動できます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/navigation-support.png" alt="navigation support">
</div>
<div class="title">Figure 7. struts-config.xmlに提供されたナビゲーション・サポート</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ソース・エディタの`LoginForm` Beanで、`login.jsp`内に作成した`name`および`email`テキスト入力フィールドに対応するフィールドと付随するアクセッサ・メソッドを作成します。`name`は`LoginForm`スケルトンですでに作成されているため、実装する必要があるのは`email`のみです。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>`name`の下に、次の*太字*で示した宣言を追加します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private String name;
*private String email;*</code></pre>
</div>
</div>
<div class="paragraph">
<p>アクセッサ・メソッドを作成するには、`email`上にカーソルを置き、[Alt]-[Insert]を押します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/create-accessors.png" alt="create accessors">
</div>
<div class="title">Figure 8. ソース・エディタで[Ctrl]-[I]を押して表示された「コードを挿入」メニュー</div>
</div>
<div class="paragraph">
<p>「取得メソッドおよび設定メソッド」を選択し、表示されるダイアログで「<code>email: String</code>」を選択して、「生成」をクリックします。「<code>email</code>」フィールドに対するアクセッサ・メソッドが生成されます。</p>
</div>
<div class="paragraph">
<p>*注意: *このチュートリアルでは使用されないため、`number`用の宣言およびアクセッサ・メソッドは削除してかまいません。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_actionクラスの作成">`Action`クラスの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>`Action`クラスには、アプリケーションのビジネス・ロジックが含まれます。フォーム・データを受信したときに、そのデータを処理し、処理したデータの転送先ビューを特定するのは`Action`オブジェクトの`execute`メソッドです。`Action`クラスはStrutsフレームワークに不可欠なため、NetBeans IDEにはウィザードが用意されています。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウで「<code>MyStrutsApp</code>」プロジェクト・ノードを右クリックし、「新規」&gt;「その他」を選択します。「Struts」カテゴリで「Strutsアクション」を選択し、「次」をクリックします。</p>
</li>
<li>
<p>「名前と場所」パネルで名前を`LoginAction`に変更します。</p>
</li>
<li>
<p>「パッケージ」ドロップダウン・リストから「<code>com.myapp.struts</code>」を選択します。</p>
</li>
<li>
<p>「アクションのパス」に「<code>/login</code>」と入力します。この値は、<code>login.jsp`で</code>&lt;html:form&gt;`タグの`action`属性に設定したのと同じです。設定が、次に示すスクリーンショットの表示のようになっていることを確認し、「次」をクリックします。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/new-struts-action.png" alt="new struts action">
</div>
<div class="title">Figure 9. 新規Strutsアクション・ウィザード</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ウィザードの3番目のステップで、<code>Action`クラスをフォームBeanと関連付けられます。ActionForm Bean名のオプションとして、前に作成した`LoginForm</code> Beanが表示されています。パネルに対して次の調整を適用します。</p>
<div class="ulist">
<ul>
<li>
<p>「入力リソース」フィールドのスラッシュを削除します。</p>
</li>
<li>
<p>「スコープ」を「リクエスト」に設定します(Strutsでは、「セッション」がデフォルトのスコープ設定します。)</p>
</li>
<li>
<p>「ActionForm Beanを検証」オプションを選択解除します。
「終了」をクリックします。`LoginAction`クラスが生成され、ソース・エディタでそのファイルが開きます。`struts-config.xml`ファイルに次の`action`エントリが追加されています。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;action-mappings&gt;
    *&lt;action name="LoginForm" path="/login" scope="request" type="com.myapp.struts.LoginAction" validate="false"/&gt;*
    &lt;action path="/Welcome" forward="/welcomeStruts.jsp"/&gt;
&lt;/action-mappings&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>name`属性と`scope`属性は、このアクションに関連付けられているフォームBeanに適用されます。具体的には、受信リクエストが</code>/login`に一致すると、Strutsフレームワークは自動的に`LoginForm`オブジェクトをインスタンス化し、リクエストで送信されたフォーム・データとともに取り込みます。`validate`のデフォルト値は`true`に設定されます。これは、フォームBeanの`validate`メソッドへのコールをフレームワークに指示します。ただし、次のステップで`validate`メソッドを必要としない単純な検証を手動でコーディングするため、このウィザードでは、このオプションを選択解除しました。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_検証の実装">検証の実装</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ソース・エディタで`LoginAction`クラスを参照し、`execute`メソッドを検査します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public ActionForward execute(ActionMapping mapping, ActionForm form,
    HttpServletRequest request, HttpServletResponse response)
    throws Exception {

    return mapping.findForward(SUCCESS);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>`LoginAction`クラス宣言の下に、`SUCCESS`の定義が表示されています。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private final static String SUCCESS = "success";</code></pre>
</div>
</div>
<div class="paragraph">
<p>現在、`mapping.findForward`メソッドは、任意のリクエストを無条件で`success`という出力ビューに転送するように設定されています。これは実際には望ましいことではありません。受信データに対して、まずなんらかの検証を実行してから、`success`ビューまたは別のビューに送信するかどうかを決定します。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#beanData">Beanデータへのアクセスと転送条件の準備</a></p>
</li>
<li>
<p><a href="#errorMsg">エラー・メッセージの設定</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_beanデータへのアクセスと転送条件の準備">Beanデータへのアクセスと転送条件の準備</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>`execute`メソッドの本体に次のコードを入力します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// extract user data
LoginForm formBean = (LoginForm)form;
String name = formBean.getName();
String email = formBean.getEmail();</code></pre>
</div>
</div>
<div class="paragraph">
<p>受信フォーム・データを使用するには、`execute`の`ActionForm`引数を受け取り、`LoginForm`としてキャストして、前に作成した取得メソッドを適用します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>受信データに検証を実行するため、次の条件節を入力します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// perform validation
if ((name == null) ||             // name parameter does not exist
    email == null  ||             // email parameter does not exist
    name.equals("") ||            // name parameter is empty
    email.indexOf("@") == -1) {   // email lacks '@'

    return mapping.findForward(FAILURE);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>この段階で、`execute`メソッドは次のようになるはずです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public ActionForward execute(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {

    // extract user data
    LoginForm formBean = (LoginForm) form;
    String name = formBean.getName();
    String email = formBean.getEmail();

    // perform validation
    if ((name == null) || // name parameter does not exist
            email == null || // email parameter does not exist
            name.equals("") || // name parameter is empty
            email.indexOf("@") == -1) {   // email lacks '@'

        return mapping.findForward(FAILURE);
    }

    return mapping.findForward(SUCCESS);
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>`FAILURE`の宣言を`LoginAction`クラスに追加します(変更箇所は*太字*で表示)。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private final static String SUCCESS = "success";
*private final static String FAILURE = "failure";*</code></pre>
</div>
</div>
<div class="paragraph">
<p>上記のロジックを使用して、`execute`メソッドは、ユーザーが`name`および`email`フィールドの両方に入力を行い、入力されたemailに「@」記号が含まれている場合、リクエストを`success`ビューに転送します。そうでない場合、`failure`ビューに転送されます。この後の<a href="#forward">`struts-config.xml`への`forward`エントリの追加</a>で示すように、ユーザーがもう一度正しい形式でデータを入力できるよう、フォーム・ページに戻るための`failure`ビューを設定できます。</p>
</div>
</div>
<div class="sect2">
<h3 id="_エラーメッセージの設定">エラー・メッセージの設定</h3>
<div class="paragraph">
<p>ログイン・フォームが返された場合、検証に失敗したことをユーザーに通知することをお薦めします。このためには、フォームBeanに`error`フィールドを追加し、適切な`&lt;bean:write&gt;`タグを`login.jsp`内のフォームに追加します。最後に`Action`オブジェクトで、`failure`ビューが選択された場合にエラー・メッセージが表示されるように設定します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>`LoginForm`を開き、クラスに`error`フィールドを追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// error message
private String error;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#accessors">前に示した</a>ように、`error`用の取得メソッドと設定メソッドを追加します。</p>
</li>
<li>
<p>設定メソッドを次のように変更します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">public void setError() {
    this.error =
        "&lt;span style='color:red'&gt;Please provide valid entries for both fields&lt;/span&gt;";
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>`login.jsp`を開き、次の変更を行います。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;html:form action="/login"&gt;
    &lt;table border="0"&gt;
        &lt;tbody&gt;
            *&lt;tr&gt;
                &lt;td colspan="2"&gt;
                    &lt;bean:write name="LoginForm" property="error" filter="false"/&gt;
                    &amp;amp;nbsp;&lt;/td&gt;
            &lt;/tr&gt;*
            &lt;tr&gt;
                &lt;td&gt;Enter your name:&lt;/td&gt;
                &lt;td&gt;&lt;html:text property="name" /&gt;&lt;/td&gt;
            &lt;/tr&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>`LoginAction`の`if`条件節内に、`failure`条件を転送する前にエラー・メッセージを設定する文を追加します(*太字*部分)。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">if ((name == null) ||             // name parameter does not exist
    email == null  ||             // email parameter does not exist
    name.equals("") ||            // name parameter is empty
    email.indexOf("@") == -1) {   // email lacks '@'

    *formBean.setError();*
    return mapping.findForward(FAILURE);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>完成した`LoginAction`クラスは、次のようになるはずです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class LoginAction extends org.apache.struts.action.Action {

    private final static String SUCCESS = "success";
    private final static String FAILURE = "failure";

    public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws Exception {

        // extract user data
        LoginForm formBean = (LoginForm)form;
        String name = formBean.getName();
        String email = formBean.getEmail();

        // perform validation
        if ((name == null) ||             // name parameter does not exist
            email == null  ||             // email parameter does not exist
            name.equals("") ||            // name parameter is empty
            email.indexOf("@") == -1) {   // email lacks '@'

            formBean.setError();
            return mapping.findForward(FAILURE);
        }

        return mapping.findForward(SUCCESS);

    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_struts_config_xmlへのforwardエントリの追加">`struts-config.xml`への`forward`エントリの追加</h2>
<div class="sectionbody">
<div class="paragraph">
<p>アプリケーションが、JSPページと`LoginAction`の`execute`メソッドによって返された転送条件を一致させるようにするには、`struts-config.xml`ファイルに`forward`エントリを追加する必要があります。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ソース・エディタで`struts-config.xml`を開き、`LoginForm`の`action`エントリ内を右クリックし、「Struts」&gt;「転送を追加」を選択します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-forward.png" alt="add forward">
</div>
<div class="title">Figure 10. 右クリックして「Struts」&gt;「転送の追加」を選択</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「転送を追加」ダイアログ・ボックスで、「転送名」に「<code>success</code>」と入力します。「リソース・ファイル」フィールドに`success.jsp`のパス(<code>/WEB-INF/success.jsp</code>)を入力します。ダイアログ・ボックスは次のようになるはずです。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-forward-dialog.png" alt="add forward dialog">
</div>
<div class="title">Figure 11. 「転送の追加」ダイアログでのstruts-config.xmlへのforwardエントリの作成</div>
</div>
<div class="paragraph">
<p>「Add」をクリックします。次の*太字*で示した`forward`エントリが、`struts-config.xml`に追加されます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;action name="LoginForm" path="/login" scope="request" type="com.myapp.struts.LoginAction" validate="false"&gt;
    *&lt;forward name="success" path="/WEB-INF/success.jsp"/&gt;*
&lt;/action&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>同じ処理を行い、<code>failure`のforwardエントリを追加します。「リソース・ファイル」のパスを「</code>/login.jsp`」に設定します。次の*太字*で示した`forward`エントリが、`struts-config.xml`に追加されます。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;forward name="success" path="/WEB-INF/success.jsp"/&gt;
*&lt;forward name="failure" path="/login.jsp"/&gt;*</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_アプリケーションの構成と実行">アプリケーションの構成と実行</h2>
<div class="sectionbody">
<div class="paragraph">
<p>IDEでは、Antビルド・スクリプトを使用し、Webアプリケーションをビルドおよび実行します。ビルド・スクリプトは、プロジェクトの作成時に、新規プロジェクト・ウィザードで入力したオプションに基づいて生成されます。アプリケーションをビルドおよび実行する前に、アプリケーションのデフォルトのエントリ・ポイントを`login.jsp`に設定する必要があります。(オプション)単純なスタイル・シートをプロジェクトに追加することもできます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#welcome">開始ページの設定</a></p>
</li>
<li>
<p><a href="#style">スタイル・シートの添付</a></p>
</li>
<li>
<p><a href="#run">アプリケーションの実行</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_開始ページの設定">開始ページの設定</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウで`web.xml`デプロイメント・ディスクリプタをダブルクリックします。ソース・エディタ最上部に、<code>web.xml`ファイルへのインタフェースを提供するタブが表示されます。「ページ」タブをクリックします。「開始ファイル」フィールドに「`login.jsp</code>」と入力します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/welcome-files.png" alt="welcome files">
</div>
<div class="title">Figure 12. アプリケーションのデプロイメント・ディスクリプタのグラフィカル・エディタ</div>
</div>
<div class="paragraph">
<p>ここで、「ソース」タブをクリックしてファイルを表示します。`welcome-file`エントリ内に`login.jsp`が示されます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;welcome-file&gt;login.jsp&lt;/welcome-file&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_スタイルシートの添付">スタイル・シートの添付</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>プロジェクトに単純なスタイル・シートを追加します。これを行うための簡単な方法の1つは、使用するコンピュータに<a href="https://netbeans.org/files/documents/4/2228/stylesheet.css">このサンプル・スタイル・シート</a>を保存することです。ファイルをコピーし([Ctrl]-[C])、IDEの「プロジェクト」ウィンドウで「Webページ」ノードを選択して、[Ctrl]-[V]を押します。ファイルがプロジェクトに追加されます。</p>
</li>
<li>
<p><code>login.jsp`と`success.jsp`の両方の</code>&lt;head&gt;`タグ間に参照を追加して、JSPページにスタイル・シートを関連付けます。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;link rel="stylesheet" type="text/css" href="stylesheet.css"&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_アプリケーションの実行">アプリケーションの実行</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「プロジェクト」ウィンドウでプロジェクト・ノードを右クリックし、「実行」を選択します。Webアプリケーションがビルドされ、プロジェクトを作成するときに指定したサーバーを使用してデプロイされます。ブラウザが開き、`login.jsp`ページが表示されます。検証に失敗するデータを入力します(つまり、いずれかのフィールドを空のままにするか、「@」符号が含まれていない電子メール・アドレスを入力)。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/login-form.png" alt="login form">
</div>
<div class="title">Figure 13. 検証に失敗するデータを含むフォーム</div>
</div>
<div class="paragraph">
<p>「Login」をクリックすると、エラー・メッセージを含むログイン・フォームが再表示されます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/login-form-error.png" alt="login form error">
</div>
<div class="title">Figure 14. エラー・メッセージ付きで再表示されたフォーム</div>
</div>
<div class="paragraph">
<p>検証をパスするデータを入力してみます。「Login」をクリックすると、成功ページが表示されます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/success-page.png" alt="success page">
</div>
<div class="title">Figure 15. 入力データが表示された成功ページ</div>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Introduction%20to%20Struts">ご意見をお寄せください</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_関連項目">関連項目</h2>
<div class="sectionbody">
<div class="paragraph">
<p>これで、NetBeans IDEでのStrutsフレームワーク入門は終わりです。このドキュメントでは、Strutsフレームワークを使用してNetBeans IDEで単純なWeb MVCアプリケーションを構築する方法を示し、Webアプリケーション開発用のIDEのインタフェースを紹介しました。JSPページ内でStrutsタグを使用する方法、Struts`ActionForm` Beanに一時的にデータを保持する方法、およびStruts`Action`オブジェクトを使用して転送ロジックを実装する方法も示しました。また、ログイン失敗に対する警告メッセージの設定など、アプリケーションに単純な検証を実装する方法も示します。</p>
</div>
<div class="paragraph">
<p>関連するチュートリアルについては、次のリソースを参照してください。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="framework-adding-support.html">Webフレームワークのためのサポートの追加</a>。プラグイン・マネージャを使用してNetBeans IDEにWebフレームワークのサポートを追加する方法を概説したガイドです。</p>
</li>
<li>
<p><a href="quickstart-webapps-spring.html">Spring Webフレームワーク入門</a>。NetBeans IDEを使用して、Springフレームワークを使用するWebアプリケーションを開発する基本的な手順を示します。</p>
</li>
<li>
<p><a href="jsf20-intro.html">JavaServer Faces 2.0入門</a>。管理対象BeanをWebページに接続する方法、およびFaceletsテンプレートを利用する方法を説明するドキュメントです。</p>
</li>
</ul>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/quickstart-webapps-struts_ja.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
