
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Introdução ao Struts Web Framework</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Introdução ao Struts Web Framework - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Introdução ao Struts Web Framework">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Introdução ao Struts Web Framework</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/quickstart-webapps-struts_pt_BR.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_visão_geral_da_aplicação">Visão Geral da Aplicação</a></li>
<li><a href="#_configurando_uma_aplicação_do_struts">Configurando uma Aplicação do Struts</a></li>
<li><a href="#_criando_páginas_jsp">Criando Páginas JSP</a>
<ul class="sectlevel2">
<li><a href="#_criando_uma_página_de_log_in">Criando uma Página de Log-in</a></li>
<li><a href="#_criando_uma_página_de_sucesso">Criando uma Página de Sucesso</a></li>
</ul>
</li>
<li><a href="#_criando_um_bean_actionform">Criando um Bean <code>ActionForm</code></a></li>
<li><a href="#_criando_uma_classe_action">Criando uma Classe <code>Action</code></a></li>
<li><a href="#_implementando_validação">Implementando Validação</a>
<ul class="sectlevel2">
<li><a href="#_acessando_dados_do_bean_e_preparando_uma_condição_de_encaminhamento">Acessando Dados do Bean e Preparando uma Condição de Encaminhamento</a></li>
<li><a href="#_configurando_uma_mensagem_de_erro">Configurando uma Mensagem de Erro</a></li>
</ul>
</li>
<li><a href="#_adicionando_entradas_forward_ao_struts_config_xml">Adicionando Entradas <code>forward</code> ao <code>struts-config.xml</code></a></li>
<li><a href="#_configurando_e_executando_a_aplicação">Configurando e Executando a Aplicação</a>
<ul class="sectlevel2">
<li><a href="#_definindo_a_página_de_boas_vindas">Definindo a Página de Boas-Vindas</a></li>
<li><a href="#_anexando_uma_folha_de_estilo">Anexando uma Folha de Estilo</a></li>
<li><a href="#_executando_a_aplicação">Executando a Aplicação</a></li>
</ul>
</li>
<li><a href="#_consulte_também">Consulte Também</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Este documento oferece os conceitos básicos sobre o uso do NetBeans IDE no desenvolvimento de aplicações Web usando o Struts Web Framework. O Struts é um framework de código aberto que amplia a API do Servlet Java e implanta uma arquitetura MVC ( Modelo, View, Controlador ). Permite criar aplicações Web manuteníveis, extensíveis e flexíveis baseadas em tecnologias padrão, como páginas JSP, JavaBeans, pacotes de recursos e XML.</p>
</div>
<div class="paragraph">
<p>Este tutorial ensina como construir uma aplicação MVC simples que exibe uma página de log-in e retorna uma página de sucesso ao enviar dados que são aprovados por validação. Você conhecerá várias funcionalidades básicas oferecidas pelo Struts e também como elas são implementadas usando o IDE. Especificamente, você usará as tags Struts em páginas JSP, manterá os dados do usuário com um Bean <code>ActionForm</code> do Struts e implementará a lógica de encaminhamento utilizando um objeto <code>Action</code> do Struts. Também será mostrado como implementar validação simples à aplicação, incluindo a configuração de mensagens de advertência para tentativas de log-in com falha.</p>
</div>
<div class="paragraph">
<p>Para obter uma introdução mais detalhada sobre o Struts, consulte <a href="http://struts.apache.org/struts-action/faqs/works.html">How does Struts work?</a> no site oficial do <a href="http://struts.apache.org/">Struts</a>. Utilize também a Pesquisa Javadoc por Índice do IDE (Ajuda &gt; Pesquisa Javadoc por Índice) para ver a <a href="http://struts.apache.org/release/1.3.x/apidocs/index.html">API do Struts Framework</a>, que está encapsulada com as bibliotecas do Struts.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-80-74-73.png" alt="netbeans stamp 80 74 73">
</div>
<div class="title">Figure 1. O conteúdo desta página se aplica ao NetBeans IDE 7.2, 7.3, 7.4 e 8.0</div>
</div>
<div class="paragraph">
<p><strong>Para concluir este tutorial, você precisa dos seguintes recursos e softwares.</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Software ou Recurso</th>
<th class="tableblock halign-left valign-top">Versão Necessária</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java EE 7.2, 7.3, 7.4, 8.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">JDK (Java Development Kit)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7 ou 8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GlassFish Server
<em>ou</em>
Contêiner do servlet Tomcat</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open Source Edition 3.x ou 4.0
_ _
versão 7.x ou 8.x</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Observações:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>A instalação Java permite que você instale opcionalmente o GlassFish Server e o contêiner do servlet Apache Tomcat. Você deve instalar um deles (ou registrar outro servidor no IDE) para poder trabalhar neste tutorial.</p>
</li>
<li>
<p>Se você precisar comparar seu projeto com uma solução que funciona, <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJava%2520Web%252FMyStrutsApp.zip">faça download da aplicação de amostra</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_visão_geral_da_aplicação">Visão Geral da Aplicação</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quando você usa o Struts, o framework oferece um servlet controlador, <code>ActionServlet</code>, definido nas bibliotecas do Struts que estão incluídas no IDE e que está registrado automaticamente no descritor de implantação <code>web.xml</code> conforme <a href="#controllerServlet">ilustrado abaixo</a>. O servlet controlador utiliza o arquivo <code>struts-config.xml</code> para mapear as solicitações de entrada para os objetos <code>Action</code> do Struts e para criar instâncias de quaisquer objetos <code>ActionForm</code> associados à ação a fim de armazenar temporariamente dados do form. O objeto <code>Action</code> processa as solicitações usando o método <code>execute</code> juntamente com os dados armazenados no Bean de form. Quando o objeto <code>Action</code> processa a solicitação, ele armazena os novos dados (isto é, no Bean do form ou em outro Bean de resultado) e encaminha os resultados para a view adequada.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/workflow.png" alt="workflow">
</div>
<div class="title">Figure 2. Fluxo de trabalho do Struts</div>
</div>
<div class="paragraph">
<p>O desenvolvimento de uma aplicação do Struts é semelhante ao desenvolvimento de qualquer outro tipo de aplicação da Web no NetBeans IDE. No entanto, o seu kit de ferramentas de desenvolvimento da Web estará mais completo se você aproveitar o suporte a Struts oferecido pelo IDE. Por exemplo, você usa os modelos no IDE para criar objetos <code>Action</code> do Struts e Beans <code>ActionForm</code>. Durante a criação, o IDE registra automaticamente essas classes no arquivo <code>struts-config.xml</code> e permite ampliar este arquivo facilmente usando os itens de menu exibidos ao clicar com o botão direito do mouse no Editor de Código-Fonte. Como muitas aplicações da Web utilizam páginas JSP da view, o Struts também oferece bibliotecas de tags personalizadas que facilitam a interação com forms HTML. No Editor de Código-Fonte do IDE, você pode chamar o suporte à funcionalidade autocompletar código e a Javadoc, que irá ajudá-lo a trabalhar de forma eficiente com essas bibliotecas.</p>
</div>
<div class="paragraph">
<p>As etapas a seguir demonstram como criar um form simples que coleta dados do usuário, realiza validação simples e libera os dados em uma página de sucesso.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configurando_uma_aplicação_do_struts">Configurando uma Aplicação do Struts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>No IDE, uma aplicação do Struts nada mais é que uma aplicação Web normal acompanhado por arquivos de configuração e bibliotecas do Struts. Você cria uma aplicação do Struts da mesma forma que cria qualquer outra aplicação Web no IDE - usando o assistente de Nova Aplicação Web e indicando, na etapa adicional, que você quer que os arquivos de configuração e as bibliotecas do Struts sejam incluídas na aplicação.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Escolha Arquivo &gt; Novo Projeto (Ctrl-Shift-N; &amp;#8984-Shift-N no Mac) no menu principal. Selecione Java Web na lista de Categorias e, em seguida, selecione Aplicação Web na lista de Projetos. Clique em Próximo.</p>
</li>
<li>
<p>No painel Nome e Localização, digite <code>MyStrutsApp</code> no Nome do Projeto e clique em Próximo.</p>
</li>
<li>
<p>No painel Servidor e Definições, selecione o servidor no qual deseja implantar a aplicação. Somente os servidores registrados com o IDE serão listados. (Para registrar um servidor, clique em Adicionar ao lado da lista drop-down Servidor.) Observe também que o Caminho de Contexto para a aplicação implantada será <code>/MyStrutsApp</code>. Clique em Próximo.</p>
</li>
<li>
<p>Selecione Struts no painel Frameworks.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/new-project-wizard.png" alt="new project wizard">
</div>
<div class="title">Figure 3. A opção Struts é exibida no painel Frameworks do assistente de Nova Aplicação Web</div>
</div>
<div class="paragraph">
<p>Para a finalidade deste tutorial, não altere nenhum valor de configuração na região inferior deste painel. O assistente exibe as seguintes opções de configuração.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Nome do Servlet de Ação</strong>: nome do servlet de ação do Struts usado na aplicação. O descritor de implantação <code>web.xml</code> contém uma entrada para o servlet de ação e especifica os parâmetros adequados específicos do Struts, tais como o caminho para a classe do servlet na biblioteca do Struts e para o arquivo de configuração <code>struts-config.xml</code> na aplicação.</p>
</li>
<li>
<p><strong>Padrão do URL da Ação</strong>: especifica os padrões das solicitações de entrada que são mapeadas para o controlador da ação do Struts. Isso gera uma entrada de mapeamento no descritor de implantação. Por default, somente o padrão <code>*.do</code> é mapeado.</p>
</li>
<li>
<p><strong>Recurso da Aplicação</strong>: permite especificar o pacote de recursos que será usado no arquivo <code>struts-config.xml</code> para a localização de mensagens. Por default, é <code>com.myapp.struts.ApplicationResource</code>.</p>
</li>
<li>
<p><strong>Adicionar TLDs do Struts</strong>: permite gerar descritores de bibliotecas de tags para as bibliotecas de tags do Struts. Um descritor de biblioteca de tags é um documento XML que contém informações adicionais sobre toda a biblioteca de tags, bem como sobre cada tag individual. Em geral, isso não é necessário porque é possível consultar URIs on-line em vez dos arquivos TLD locais.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique em Finalizar. O IDE criará a pasta do projeto no sistema de arquivos. Assim como em qualquer aplicação Web do IDE, a pasta do projeto contém todos os seus códigos-fontes e os metadados do projeto do IDE, como o script de construção do Ant. No entanto, sua aplicação Web tem, além disso, todas as bibliotecas do Struts no seu classpath. Tais bibliotecas não estão somente no classpath da aplicação, mas também estão incluídas no projeto e serão encapsuladas com ele posteriormente quando este for construído.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>O projeto será aberto no IDE. A janela Projetos é o ponto de entrada principal para os códigos-fonte do projeto. Ela mostra uma view lógica do conteúdo importante do projeto. Por exemplo, ao expandir diversos nós no novo projeto, ela será exibida da seguinte maneira:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/proj-window-init.png" alt="proj window init">
</div>
<div class="title">Figure 4. A janela Projetos exibe o projeto MyStrutsApp</div>
</div>
<div class="paragraph">
<p>*Observação: *Utilize a janela Arquivos (Janela &gt; Arquivos) para ver todo o conteúdo do projeto em uma view baseada em diretórios.</p>
</div>
<div class="paragraph">
<p>Os arquivos de configuração específicos do Struts, bem como o descritor de implantação da aplicação, são colocados apropriadamente na pasta Arquivos de Configuração. Abra o descritor de implantação (clique duas vezes no nó do arquivo <code>web.xml</code> para que seja exibido no Editor de Código-Fonte). Para lidar com o processamento de Struts, é fornecido um mapeamento para o servlet controlador do Struts.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;servlet&gt;
    &lt;servlet-name&gt;action&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.apache.struts.action.ActionServlet&lt;/servlet-class&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;config&lt;/param-name&gt;
        &lt;param-value&gt;/WEB-INF/struts-config.xml&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;debug&lt;/param-name&gt;
        &lt;param-value&gt;2&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
       &lt;param-name&gt;detail&lt;/param-name&gt;
       &lt;param-value&gt;2&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;load-on-startup&gt;2&lt;/load-on-startup&gt;
&lt;/servlet&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;action&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Acima, o servlet controlador do Struts é denominado <code>action</code> e é definido na biblioteca do Struts (<code>org.apache.struts.action.ActionServlet</code>). Está definido para cuidar de todas as solicitações que estejam de acordo com o mapeamento <code>*.do</code>. Além disso, os parâmetros de inicialização do servlet são especificados usando o arquivo <code>struts-config.xml</code>, que também está na pasta <code>WEB-INF</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_criando_páginas_jsp">Criando Páginas JSP</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Comece criando duas páginas JSP para a aplicação. A primeira exibe um form. A segunda é a view retornada quando o log-in é bem-sucedido.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#login">Criando uma Página de Log-in</a></p>
</li>
<li>
<p><a href="#success">Criando uma Página de Sucesso</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_criando_uma_página_de_log_in">Criando uma Página de Log-in</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse no nó do projeto <code>MyStrutsApp</code>, selecione Nova &gt; JSP e nomeie o novo arquivo como <code>login</code>. Clique em Finalizar. O arquivo <code>login.jsp</code> será aberto no Editor de Código-Fonte.</p>
</li>
<li>
<p>No Editor de Código-Fonte, altere o conteúdo de ambas as tags <code>&lt;title&gt;</code> e <code>&lt;h1&gt;</code> (ou das tags <code>&lt;h2&gt;</code>, dependendo da versão do IDE que estiver usando) para <code>Form de Log-in</code>.</p>
</li>
<li>
<p>Adicione as duas diretivas de taglib a seguir na parte superior do arquivo:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-html" prefix="html" %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Muitos aplicações Web utilizam páginas JSP para views no paradigma MVC. Por essa razão, o Struts oferece bibliotecas de tags personalizadas que facilitam a interação com forms HTML. Isso pode ser aplicado facilmente a um arquivo JSP usando o suporte à funcionalidade autocompletar código do IDE. Quando você digita no Editor de Código-Fonte, o IDE oferece a funcionalidade autocompletar código para tags do Struts, bem como o Javadoc do Struts. Você também pode chamar autocompletar código manualmente, pressionando Ctrl-Space:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/code-completion.png" alt="code completion">
</div>
<div class="title">Figure 5. As funcionalidades autocompletar código e Javadoc são fornecidas para tags do Struts</div>
</div>
<div class="paragraph">
<p>O <a href="http://struts.apache.org/release/1.3.x/struts-taglib/dev_bean.html">bean taglib</a> fornecerá inúmeras tags, úteis ao associar um bean de form (isto é, um Bean <code>ActionForm</code>) aos dados coletados do form. O <a href="http://struts.apache.org/release/1.3.x/struts-taglib/dev_html.html">html taglib</a> oferece uma interface entre a view e os outros componentes necessários para a aplicação Web. Abaixo, por exemplo, você substitui as tags html <code>form</code> comuns pelas tags <code>&lt;html:form&gt;</code> do Struts. Uma vantagem dessa substituição é que ela faz com que o servidor localize ou crie um objeto do Bean que corresponda ao valor fornecido pelo elemento <code>action</code> de <code>html:form</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abaixo das tags <code>&lt;h1&gt;</code> (ou <code>&lt;h2&gt;</code>), adicione o seguinte:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;html:form action="/login"&gt;

   &lt;html:submit value="Login" /&gt;

&lt;/html:form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sempre que terminar de digitar no Editor de Código-Fonte, você pode arrumar o código clicando com o botão direito do mouse e selecionando Formatar (Alt-Shift-F).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na Paleta (Janela &gt; Paleta), à direita do IDE, arraste um item Tabela da categoria HTML para um local logo acima da linha <code>&lt;html:submit value="Log-in" /&gt;</code>. A caixa de diálogo Inserir Tabela será exibida. Defina as linhas como <code>3</code>, as colunas como <code>2</code> e deixe todas as outras definições como <code>0</code>. Mais adiante neste tutorial, você <a href="#style">anexará uma folha de estilo</a> para afetar a view da tabela.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/insert-table.png" alt="insert table">
</div>
<div class="title">Figure 6. A Paleta fornece caixas de diálogos para facilitar o uso de modelos de código</div>
</div>
<div class="paragraph">
<p>Clique em OK e, opcionalmente, reformate o código (Alt-Shift-F). O form em <code>login.jsp</code> estará da seguinte forma:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;html:form action="/login"&gt;
    &lt;table border="0"&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;&lt;/th&gt;
                &lt;th&gt;&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;/td&gt;
                &lt;td&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;/td&gt;
                &lt;td&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;/td&gt;
                &lt;td&gt;&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;

    &lt;html:submit value="Login" /&gt;

&lt;/html:form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>*Observação: *Você pode deletar com segurança a linha <code>&lt;thead&gt;</code> da tabela, pois ela não será utilizada neste tutorial.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na primeira linha da tabela, insira o seguinte (alterações em <strong>negrito</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;tr&gt;
    &lt;td&gt;*Enter your name:*&lt;/td&gt;
    &lt;td&gt;*&lt;html:text property="name" /&gt;*&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na segunda linha da tabela, digite o seguinte (alterações em <strong>negrito</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;tr&gt;
    &lt;td&gt;*Enter your email:*&lt;/td&gt;
    &lt;td&gt;*&lt;html:text property="email" /&gt;*&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>O elemento <code>html:text</code> permite combinar os campos de entrada do form com as propriedades no Bean de form que serão criadas na próxima etapa. Assim, por exemplo, o valor de <code>property</code> deve corresponder a um campo declarado no Bean de form associado a este form.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Mova o elemento &lt;html:submit value="Log-in" /&gt; para a segunda coluna da terceira linha da tabela para que a terceira linha da tabela apareça da seguinte forma (alterações em <strong>negrito</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;tr&gt;
    &lt;td&gt;&lt;/td&gt;
    &lt;td&gt;*&lt;html:submit value="Login" /&gt;*&lt;/td&gt;
&lt;/tr&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Neste estágio, seu form de log-in terá a aparência seguinte:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;html:form action="/login"&gt;
    &lt;table border="0"&gt;
        &lt;tbody&gt;
            &lt;tr&gt;
                &lt;td&gt;Enter your name:&lt;/td&gt;
                &lt;td&gt;&lt;html:text property="name" /&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;Enter your email:&lt;/td&gt;
                &lt;td&gt;&lt;html:text property="email" /&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;/td&gt;
                &lt;td&gt;&lt;html:submit value="Login" /&gt;&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
&lt;/html:form&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_criando_uma_página_de_sucesso">Criando uma Página de Sucesso</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse no nó do projeto <code>MyStrutsApp</code>, selecione Nova &gt; JSP e nomeie o novo arquivo de <code>success</code>. No campo Pasta, clique no botão Procurar adjacente e selecione <code>WEB-INF</code> na caixa de diálogo exibida. Clique em Selecionar Pasta para inserir WEB-INF no campo Pasta. Nenhum arquivo contido na pasta WEB-INF pode ser acessado diretamente pelas solicitações do cliente. Para o que o arquivo <code>success.jsp</code> seja exibido corretamente, ele deve conter dados processados. Clique em Finalizar.</p>
</li>
<li>
<p>No Editor de Código-Fonte, altere o conteúdo da página recém-criada para:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;head&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
    &lt;title&gt;Login Success&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Congratulations!&lt;/h1&gt;

    &lt;p&gt;You have successfully logged in.&lt;/p&gt;

    &lt;p&gt;Your name is: .&lt;/p&gt;

    &lt;p&gt;Your email address is: .&lt;/p&gt;
&lt;/body&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione uma diretiva <a href="http://struts.apache.org/release/1.3.x/struts-taglib/dev_bean.html">bean taglib</a> na parte superior do arquivo:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione as tags <code>&lt;bean:write&gt;</code> a seguir (alterações em <strong>negrito</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;p&gt;Your name is: *&lt;bean:write name="LoginForm" property="name" /&gt;*.&lt;/p&gt;

&lt;p&gt;Your email address is: *&lt;bean:write name="LoginForm" property="email" /&gt;*.&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ao utilizar as tags <code>&lt;bean:write&gt;</code>, você pode utilizar o bean taglib para localizar o bean <code>ActionForm</code> que será criado, e exibir os dados do usuário salvos para <code>name</code> e <code>email</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_criando_um_bean_actionform">Criando um Bean <code>ActionForm</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Um Bean <code>ActionForm</code> do Struts é usado para conservar os dados entre as solicitações. Por exemplo, se um usuário enviar um form, os dados serão armazenados temporariamente no Bean de form para que possam ser reexibidos na página de form (se os dados estiverem em um formato inválido ou se o log-in falhar) ou exibidos em uma página de log-in bem-sucedido (se os dados forem aprovados pela validação).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse no nó do projeto <code>MySturtsApp</code> e selecione Novo &gt; Outro. Em Categorias, selecione Struts e, em Tipos de Arquivos, selecione Bean ActionForm do Struts. Clique em Próximo.</p>
</li>
<li>
<p>Digite <code>LoginForm</code> em Nome da Classe. Em seguida, selecione <code>com.myapp.struts</code> na lista drop-down Pacote e clique em Finalizar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>O IDE criará o bean <code>LoginForm</code> e o abrirá no Editor de Código-Fonte. Por default, o IDE fornecerá uma <code>String</code> denominada <code>name</code> e um <code>int</code> denominado <code>number</code>. Ambos os campos possuem métodos acessadores definidos. O IDE também adicionará uma declaração do Bean ao arquivo <code>struts-config.xml</code>. Se você abrir o arquivo <code>struts-config.xml</code> no Editor de Código-Fonte, você verá a seguinte declaração adicionada pelo assistente:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;form-beans&gt;
    *&lt;form-bean name="LoginForm" type="com.myapp.struts.LoginForm" /&gt;*
&lt;/form-beans&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>O IDE oferece suporte à navegação no arquivo <code>struts-config.xml</code>. Mantenha pressionada a tecla Ctrl e coloque o mouse sobre o nome de classe totalmente qualificado do Bean <code>LoginForm</code>. O nome se torna um link, permitindo que você vá diretamente para a classe no Editor de Código-Fonte:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/navigation-support.png" alt="navigation support">
</div>
<div class="title">Figure 7. O suporte à navegação é fornecido em struts-config.xml</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>No Bean <code>LoginForm</code> no Editor de Código-Fonte, crie campos e métodos acessadores que correspondam aos campos de entrada de texto <code>name</code> e <code>email</code> que você criou no arquivo <code>login.jsp</code>. Como o <code>name</code> já foi criado no esqueleto de <code>LoginForm</code>, será necessário implementar somente o <code>email</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Adicione a declaração a seguir abaixo de <code>name</code> (alterações em <strong>negrito</strong>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private String name;
*private String email;*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para criar métodos acessadores, coloque o cursor sobre <code>email</code> e pressione Alt-Insert.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/create-accessors.png" alt="create accessors">
</div>
<div class="title">Figure 8. O menu Inserir Código é exibido ao pressionar Ctrl-I no Editor de Código-Fonte</div>
</div>
<div class="paragraph">
<p>Selecione Getter e Setter e, na caixa de diálogo exibida, selecione <code>email: String</code> e clique em Gerar. Os métodos acessadores serão gerados para o campo <code>email</code>.</p>
</div>
<div class="paragraph">
<p>*Observação: *Você pode deletar métodos acessadores e a declaração de <code>number</code>, já que ele não será utilizado neste tutorial.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_criando_uma_classe_action">Criando uma Classe <code>Action</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>A classe <code>Action</code> contém a lógica de negócios da aplicação. Quando os dados do form são recebidos, é o método <code>execute</code> de um objeto <code>Action</code> que processa os dados e determina para qual view encaminhar os dados processados. A classe <code>Action</code> está integrada ao Struts Framework; por esta razão, o NetBeans IDE fornece a você um assistente.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na janela Projetos, clique com o botão direito do mouse no nó do projeto <code>MyStrutsApp</code> e selecione Novo &gt; Outro. Na categoria Struts, selecione Ação do Struts e clique em Próximo.</p>
</li>
<li>
<p>No painel Nome e Localização, altere o nome para <code>LoginAction</code>.</p>
</li>
<li>
<p>Selecione <code>com.myapp.struts</code> na lista drop-down Pacote.</p>
</li>
<li>
<p>Digite <code>/Login</code> no Caminho da Ação. Este valor deve corresponder ao valor definido para o atributo <code>action</code> das tags <code>&lt;html:form&gt;</code> no <code>login.jsp</code>. Verifique se as definições aparecem conforme indicado na captura de tela abaixo e clique em Próximo.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/new-struts-action.png" alt="new struts action">
</div>
<div class="title">Figure 9. Assistente de Nova Ação do Struts</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na terceira etapa do assistente, você pode associar a classe <code>Action</code> a um Bean de form. Observe que o Bean <code>LoginForm</code> criado anteriormente está listado como uma opção de Nome do Bean ActionForm. Faça os seguintes ajustes no painel:</p>
<div class="ulist">
<ul>
<li>
<p>Delete a barra inclinada do campo Recurso de Entrada</p>
</li>
<li>
<p>Defina Escopo para Solicitação (Sessão é a definição de escopo default no Struts.)</p>
</li>
<li>
<p>Desmarque a opção Validar Bean ActionForm
Clique em Finalizar. A classe <code>LoginAction</code> será gerada e o arquivo será aberto no Editor de Código-Fonte. Observe também que a entrada <code>action</code> seguinte será adicionada ao arquivo <code>struts-config.xml</code>:</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;action-mappings&gt;
    *&lt;action name="LoginForm" path="/login" scope="request" type="com.myapp.struts.LoginAction" validate="false"/&gt;*
    &lt;action path="/Welcome" forward="/welcomeStruts.jsp"/&gt;
&lt;/action-mappings&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Os atributos <code>name</code> e <code>scope</code> se aplicam ao Bean de form associado à ação. Especificamente, quando uma solicitação de entrada corresponde a <code>/log-in</code>, o framework do Struts cria automaticamente instâncias de um objeto <code>LoginForm</code> e o preenche com os dados do form enviados na solicitação. O valor default de <code>validate</code> é definido como <code>true</code>. Isso diz ao framework para chamar o método <code>validate</code> do Bean de form. No entanto, esta opção foi desmarcada no assistente porque você escreverá o código manualmente para a validação simples na próxima etapa, a qual não requer o método <code>validate</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementando_validação">Implementando Validação</h2>
<div class="sectionbody">
<div class="paragraph">
<p>No Editor de Código-Fonte, procure a classe <code>LoginAction</code> e veja o método <code>execute</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public ActionForward execute(ActionMapping mapping, ActionForm form,
    HttpServletRequest request, HttpServletResponse response)
    throws Exception {

    return mapping.findForward(SUCCESS);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Observe a definição de <code>SUCCESS</code>, listada abaixo da classe de declaração <code>LoginAction</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private final static String SUCCESS = "success";</code></pre>
</div>
</div>
<div class="paragraph">
<p>Atualmente, o método <code>mapping.findForward</code> está definido para enviar incondicionalmente qualquer solicitação a uma view de saída denominada <code>success</code>. Na verdade, isso não é o desejado. Você quer primeiro realizar algum tipo de validação dos dados de entrada para determinar se será enviada a view <code>success</code> ou outra exibição.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#beanData">Acessando Dados do Bean e Preparando uma Condição de Encaminhamento</a></p>
</li>
<li>
<p><a href="#errorMsg">Configurando uma Mensagem de Erro</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_acessando_dados_do_bean_e_preparando_uma_condição_de_encaminhamento">Acessando Dados do Bean e Preparando uma Condição de Encaminhamento</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Insira o seguinte código no corpo do método <code>execute</code>:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// extract user data
LoginForm formBean = (LoginForm)form;
String name = formBean.getName();
String email = formBean.getEmail();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para usar os dados de entrada do form, é necessário tomar o argumento <code>ActionForm</code> de <code>execute</code> e lançá-lo como <code>LoginForm</code>, e ,em seguida, aplicar os métodos getter criados anteriormente.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Digite o seguinte na cláusula condicional para realizar a validação dos dados de entrada:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// perform validation
if ((name == null) ||             // name parameter does not exist
    email == null  ||             // email parameter does not exist
    name.equals("") ||            // name parameter is empty
    email.indexOf("@") == -1) {   // email lacks '@'

    return mapping.findForward(FAILURE);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Neste estágio, o método <code>execute</code> deverá ter a seguinte aparência:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public ActionForward execute(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {

    // extract user data
    LoginForm formBean = (LoginForm) form;
    String name = formBean.getName();
    String email = formBean.getEmail();

    // perform validation
    if ((name == null) || // name parameter does not exist
            email == null || // email parameter does not exist
            name.equals("") || // name parameter is empty
            email.indexOf("@") == -1) {   // email lacks '@'

        return mapping.findForward(FAILURE);
    }

    return mapping.findForward(SUCCESS);
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione a declaração <code>FAILURE</code> na classe <code>LoginAction</code> (alterações em <strong>negrito</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private final static String SUCCESS = "success";
*private final static String FAILURE = "failure";*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quando você usa a lógica acima, o método <code>execute</code> envia a solicitação para a view <code>success</code> se o usuário fornecer uma entrada para os campos <code>name</code> e <code>email</code> e se o e-mail informado contiver o símbolo '@'. Do contrário, será enviada a view <code>failure</code>. Conforme demonstrado abaixo em <a href="#forward">Adicionando Entradas <code>forward</code> ao <code>struts-config.xml</code></a>, você poderá definir a view <code>failure</code> para voltar à página do form para que o usuário possa inserir os dados no formato correto.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configurando_uma_mensagem_de_erro">Configurando uma Mensagem de Erro</h3>
<div class="paragraph">
<p>Se o form de log-in for retornado, recomenda-se informar o usuário de que a validação falhou. Você pode fazer isso adicionando um campo <code>error</code> no Bean de form e uma tag <code>&lt;bean:write&gt;</code> adequada ao form no <code>login.jsp</code>. E definindo finalmente, no objeto <code>Action</code>, a mensagem de erro que será exibida caso a view <code>failure</code> seja escolhida.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abra <code>LoginForm</code> e adicione um campo <code>error</code> à classe:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// error message
private String error;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione um método getter e um método setter para <code>error</code>, conforme <a href="#accessors">demonstrado acima</a>.</p>
</li>
<li>
<p>Modifique o método setter para que apareça da seguinte forma:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">public void setError() {
    this.error =
        "&lt;span style='color:red'&gt;Please provide valid entries for both fields&lt;/span&gt;";
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abra <code>login.jsp</code> e faça as seguintes alterações:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;html:form action="/login"&gt;
    &lt;table border="0"&gt;
        &lt;tbody&gt;
            *&lt;tr&gt;
                &lt;td colspan="2"&gt;
                    &lt;bean:write name="LoginForm" property="error" filter="false"/&gt;
                    &amp;amp;nbsp;&lt;/td&gt;
            &lt;/tr&gt;*
            &lt;tr&gt;
                &lt;td&gt;Enter your name:&lt;/td&gt;
                &lt;td&gt;&lt;html:text property="name" /&gt;&lt;/td&gt;
            &lt;/tr&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Em <code>LoginAction</code>, na cláusula condicional <code>if</code>, adicione uma instrução para definir a mensagem de erro antes de encaminhar a condição de <code>failure</code> (alterações em <strong>negrito</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">if ((name == null) ||             // name parameter does not exist
    email == null  ||             // email parameter does not exist
    name.equals("") ||            // name parameter is empty
    email.indexOf("@") == -1) {   // email lacks '@'

    *formBean.setError();*
    return mapping.findForward(FAILURE);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A classe <code>LoginAction</code> concluída deverá ter agora a seguinte aparência:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class LoginAction extends org.apache.struts.action.Action {

    private final static String SUCCESS = "success";
    private final static String FAILURE = "failure";

    public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws Exception {

        // extract user data
        LoginForm formBean = (LoginForm)form;
        String name = formBean.getName();
        String email = formBean.getEmail();

        // perform validation
        if ((name == null) ||             // name parameter does not exist
            email == null  ||             // email parameter does not exist
            name.equals("") ||            // name parameter is empty
            email.indexOf("@") == -1) {   // email lacks '@'

            formBean.setError();
            return mapping.findForward(FAILURE);
        }

        return mapping.findForward(SUCCESS);

    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adicionando_entradas_forward_ao_struts_config_xml">Adicionando Entradas <code>forward</code> ao <code>struts-config.xml</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Para que a aplicação corresponda às páginas JSP com condições de encaminhamento retornadas pelo método <code>execute</code> do <code>LoginAction</code>, será necessário adicionar entradas <code>forward</code> ao arquivo <code>struts-config.xml</code> file.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abra <code>struts-config.xml</code> no Editor de Código-Fonte, clique com o botão direito do mouse em qualquer parte da entrada <code>action</code> de <code>LoginForm</code> e selecione Struts &gt; Adicionar Encaminhamento.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-forward.png" alt="add forward">
</div>
<div class="title">Figure 10. Clique com o botão direito do mouse e selecione Struts &gt; Adicionar Encaminhamento</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na caixa de diálogo Adicionar Encaminhamento, digite <code>success</code> no Nome de Encaminhamento. Indique o caminho a <code>success.jsp</code> no campo Arquivo de Recurso (isto é, <code>/WEB-INF/success.jsp</code>). A caixa de diálogo deverá ter a seguinte aparência:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-forward-dialog.png" alt="add forward dialog">
</div>
<div class="title">Figure 11. A caixa de diálogo Adicionar Encaminhamento cria uma entrada de encaminhamento no arquivo struts-config.xml</div>
</div>
<div class="paragraph">
<p>Clique em Adicionar. Observe que a entrada <code>forward</code> a seguir foi adicionada a <code>struts-config.xml</code> (alterações em <strong>negrito</strong>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;action name="LoginForm" path="/login" scope="request" type="com.myapp.struts.LoginAction" validate="false"&gt;
    *&lt;forward name="success" path="/WEB-INF/success.jsp"/&gt;*
&lt;/action&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Execute a mesma ação para adicionar uma entrada de encaminhamento a <code>failure</code>. Defina o caminho do Arquivo de Recurso como <code>/login.jsp</code>. A entrada <code>forward</code> a seguir será adicionada a <code>struts-config.xml</code> (alterações em <strong>negrito</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;forward name="success" path="/WEB-INF/success.jsp"/&gt;
*&lt;forward name="failure" path="/login.jsp"/&gt;*</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configurando_e_executando_a_aplicação">Configurando e Executando a Aplicação</h2>
<div class="sectionbody">
<div class="paragraph">
<p>O IDE utiliza um script de construção do Ant para construir e executar as aplicações Web. O IDE gerou o script de construção quando você criou o projeto, com base nas opções inseridas no assistente de Novo Projeto. Antes de construir e executar a aplicação, você precisa definir o ponto de entrada default da aplicação para <code>login.jsp</code>. Como opção, você também pode adicionar uma folha de estilo simples ao projeto.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#welcome">Definindo a Página de Boas-Vindas</a></p>
</li>
<li>
<p><a href="#style">Anexando uma Folha de Estilo</a></p>
</li>
<li>
<p><a href="#run">Executando a Aplicação</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_definindo_a_página_de_boas_vindas">Definindo a Página de Boas-Vindas</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na janela Projetos, clique duas vezes no descritor de implantação <code>web.xml</code>. As guias listadas na parte superior do Editor de Código-Fonte oferecem uma interface para o arquivo <code>web.xml</code>. Clique na guia Páginas. No campo Arquivos de Boas-Vindas, digite <code>login.jsp</code>.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/welcome-files.png" alt="welcome files">
</div>
<div class="title">Figure 12. Editor gráfico para o descritor de implantação da aplicação</div>
</div>
<div class="paragraph">
<p>Agora clique na guia Código-fonte para exibir o arquivo. Observe que <code>login.jsp</code> estará listado na entrada <code>welcome-file</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;welcome-file&gt;login.jsp&lt;/welcome-file&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_anexando_uma_folha_de_estilo">Anexando uma Folha de Estilo</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione uma folha de estilo simples ao projeto. Uma forma fácil de executar esta ação é salvando <a href="https://netbeans.org/files/documents/4/2228/stylesheet.css">+esta folha de estilo de amostra +</a> no computador. Copie o arquivo (Ctrl-C) e, no IDE, selecione o nó Páginas Web na janela Projetos e pressione Ctrl-V. O arquivo será adicionado ao projeto.</p>
</li>
<li>
<p>Vincule a folha de estilo às páginas JSP adicionando uma referência entre as tags <code>&lt;head&gt;</code> de <code>login.jsp</code> e <code>success.jsp</code>:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;link rel="stylesheet" type="text/css" href="stylesheet.css"&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_executando_a_aplicação">Executando a Aplicação</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na janela Projetos, clique com o botão direito do mouse no nó do projeto e selecione Executar. O IDE construirá a aplicação Web e o implantará, usando o servidor especificado ao criar o projeto. O browser será aberto e exibirá a página <code>loginForm.jsp</code>. Digite dados que falharão durante o processo de validação, ou seja, deixe um campo em branco ou insira um endereço de e-mail sem o símbolo '@':</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/login-form.png" alt="login form">
</div>
<div class="title">Figure 13. O form contém dados que não serão aprovados por validação</div>
</div>
<div class="paragraph">
<p>Quando você clicar em Log-in, a página de form de log-in será reexibida, contendo uma mensagem de erro:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/login-form-error.png" alt="login form error">
</div>
<div class="title">Figure 14. O form é exibido novamente com a mensagem de erro</div>
</div>
<div class="paragraph">
<p>Tente inserir dados que sejam aprovados na validação. Quando você clicar em Log-in, a página de sucesso será exibida:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/success-page.png" alt="success page">
</div>
<div class="title">Figure 15. A página de sucesso é exibida mostrando os dados de entrada</div>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Introduction%20to%20Struts">Envie-nos Seu Feedback</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_consulte_também">Consulte Também</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Aqui termina a Introdução ao Struts Framework no NetBeans IDE. Este documento demonstrou como construir uma aplicação Web MVC simples no NetBeans IDE usando ao Struts Framework, e apresentou-lhe à interface do IDE para desenvolver aplicações Web. Você viu como usar as tags do Struts nas páginas JSP, como armazenar temporariamente os dados do usuário em um Bean <code>ActionForm</code> do Struts e como implementar lógica de encaminhamento usando um objeto <code>Action</code> do Struts. Também será mostrado como implementar validação simples à aplicação, incluindo a configuração de mensagens de advertência para tentativas de log-in com falha.</p>
</div>
<div class="paragraph">
<p>Para obter tutoriais relacionados, consulte os seguintes recursos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="framework-adding-support.html">Adicionando Suporte a um Framework da Web</a> Guia geral que descreve como adicionar suporte ao framework da Web para o NetBeans IDE usando o Gerenciador de Plug-ins.</p>
</li>
<li>
<p><a href="quickstart-webapps-spring.html">Introdução ao Spring Web Framework</a>. Descreve os conceitos básicos do uso do NetBeans IDE para desenvolver aplicações Web que usam o Spring Framework.</p>
</li>
<li>
<p><a href="jsf20-intro.html">Introdução ao JavaServer Faces 2.0</a>. Um documento que descreve como conectar um bean gerenciado a páginas Web e como tirar vantagem de modelos de Facelets.</p>
</li>
</ul>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/web/quickstart-webapps-struts_pt_BR.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
