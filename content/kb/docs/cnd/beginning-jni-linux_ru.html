
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Начало работы с JNI с IDE NetBeans и подключаемым модулем C/C++ Plugin в Linux</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Начало работы с JNI с IDE NetBeans и подключаемым модулем C/C++ Plugin в Linux - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Начало работы с JNI с IDE NetBeans и подключаемым модулем C/C++ Plugin в Linux">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>

  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="/download/nb19/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Начало работы с JNI с IDE NetBeans и подключаемым модулем C/C++ Plugin в Linux</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/cnd/beginning-jni-linux_ru.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_требования">Требования</a></li>
<li><a href="#_настройка_среды_для_учебного_курса">Настройка среды для учебного курса</a></li>
<li><a href="#_настройка_проекта_приложения_java">Настройка проекта приложения Java</a>
<ul class="sectlevel2">
<li><a href="#_изменение_исходного_кода_главного_класса">Изменение исходного кода главного класса</a></li>
<li><a href="#_создание_файла_заголовка_библиотеки_в_машинном_коде">Создание файла заголовка библиотеки в машинном коде</a></li>
</ul>
</li>
<li><a href="#_настройка_нового_проекта_динамической_библиотеки_на_языке_cc">Настройка нового проекта динамической библиотеки на языке C/C++</a>
<ul class="sectlevel2">
<li><a href="#_настройка_свойств_проекта">Настройка свойств проекта</a></li>
<li><a href="#_добавление_файла_заголовка">Добавление файла заголовка</a></li>
<li><a href="#_реализация_метода">Реализация метода</a></li>
</ul>
</li>
<li><a href="#_сборка_и_запуск_приложения">Сборка и запуск приложения</a>
<ul class="sectlevel2">
<li><a href="#_настройка_проекта_java">Настройка проекта Java</a></li>
<li><a href="#_запуск_приложения_jnidemojava">Запуск приложения JNIDemoJava</a></li>
<li><a href="#_заключение">Заключение</a></li>
</ul>
</li>
<li><a href="#_что_дальше">Что дальше?</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><em>Март 2014 г.</em> [Номер версии: V8.0-1]</p>
</div>
<div class="paragraph">
<p>В этой учебной программе рассматривается создание простого приложения, использующего код Java<sup>TM</sup> Native Interface (JNI), написанный на языке программирования C.</p>
</div>
<div class="paragraph">
<p>Этот учебный курс создан для Linux.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_требования">Требования</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Для работы с этим учебным курсом требуется следующее программное обеспечение и ресурсы.</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Программное обеспечение или материал</th>
<th class="tableblock halign-left valign-top">Требуемая версия</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IDE NetBeans</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">версия 7.4 или 8.0 с подключаемым модулем NetBeans C/C++</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Комплект для разработчика на языке Java (JDK)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">версия 7 или 8</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Компиляторы C и C++,  <code>make</code> ,  <code>gdb</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../../../community/releases/80/cpp-setup-instructions.html">+ Настройка среды IDE NetBeans для языков C/C+/Фортран</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Дополнительные сведения о загрузке и установки необходимого программного обеспечения см. в разделах <a href="../../../community/releases/80/install.html">Инструкции по установки IDE NetBeans 8.0</a> и <a href="../../../community/releases/80/cpp-setup-instructions.html">+ Настройка IDE NetBeans дляC/C+/Fortran</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_настройка_среды_для_учебного_курса">Настройка среды для учебного курса</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Для этого учебного курса потребуются модули Java и C/C. Если комплект C/C IDE NetBeans уже загружен, пользователи могут загрузить дополнительные модули Java по отдельности.</p>
</div>
<div class="paragraph">
<p>Чтобы определить наличие модулей Java и C/C, выберите пункт меню "Файл &gt; Новый проект". В категории проектов должны входить Java и C/C.</p>
</div>
<div class="paragraph">
<p><strong>Чтобы загрузить отсутствующие модули Java и C/C++, выполните следующие действия.</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В IDE NetBeans выберите 'Сервис' &gt; 'Подключаемые модули'.</p>
</li>
<li>
<p>Во вкладке "Доступные подключаемые модули" установите флажок для Java или C/C++ в зависимости от того, какой модуль отсутствует в среде IDE. Если оба модуля уже установлены, они отобразятся во вкладке "Установлено".</p>
</li>
<li>
<p>Нажмите кнопку "Установить".</p>
</li>
<li>
<p>Щелкните 'Далее' в диалоговом окне установщика IDE NetBeans, установите флажок принятия условий лицензии установщика и щелкните 'Установить'.</p>
</li>
<li>
<p>По завершении установки нажмите кнопку "Готово".</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_настройка_проекта_приложения_java">Настройка проекта приложения Java</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Для данной программы требуются проект Java и проект C. В этом разделе описаны создание и настройка проекта Java для разрабатываемого приложения JNI. Для этого потребуется создать проект приложения Java, инициализировать его главный класс и добавить метод в машинном коде к этому классу.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите команду "Файл" &gt; "Новый проект". Выберите категорию "Java" и тип проекта "Приложение Java". Нажмите 'Далее'.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jni-new-project-java.png" alt="jni new project java">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>В поле "Имя проекта" введите  <code>JNIDemoJava</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>В качестве местоположения проекта можно указать любой каталог на компьютере. В этом примере используется папка по умолчанию "NetBeansProjects" в каталоге пользователя.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Не снимая флажок 'Создать основной класс', измените имя основного класса на  <code>jnidemojava.Main</code> .</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jni-new-java-app.png" alt="jni new java app">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Нажмите 'Готово'.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>В среде IDE будет создана папка проекта  <code>NetBeansProjects/JNIDemoJava</code> .</p>
</div>
<div class="sect2">
<h3 id="_изменение_исходного_кода_главного_класса">Изменение исходного кода главного класса</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Чтобы открыть источник класса Main в редакторе, щелкните правой кнопкой мыши узел класса  <code>Main.java</code>  и выберите 'Открыть'.</p>
</li>
<li>
<p>Замените строку  <code>//TODO code application logic here</code>  в методе  <code>main</code>  следующим кодом:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">new Main().nativePrint();</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>В поле слева появится индикатор в виде лампочки, сообщающий об ошибке. Щелкните индикатор. Отобразится ярлык для создания метода  <code>nativePrint</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Щелкните этот ярлык, после чего будет вставлен следующий код:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private void nativePrint() {
      throw new UnsupportedOperationException("Not supported yet");
   }</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Удалите строку</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">throw new UnsupportedOperationException("Not supported yet");</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Измените метод  <code>nativePrint()</code> : вставьте ключевое слово  <code>native</code>  в подпись метода, чтобы она выглядела следующим образом:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private native void nativePrint();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ключевое слово  <code>native</code>  означает, что реализация этого метода размещена во внешней библиотеке в машинном коде. Однако при запуске местоположение библиотеки не ясно.</p>
</div>
<div class="paragraph">
<p>Новый метод main будет выглядеть следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public static void main(String[] args) {
       new Main().nativePrint();
   }

   private native void nativePrint();
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Правой кнопкой мыши щелкните имя проекта и выберите пункт "Очистить и собрать". После этого проект должен успешно собраться.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_создание_файла_заголовка_библиотеки_в_машинном_коде">Создание файла заголовка библиотеки в машинном коде</h3>
<div class="paragraph">
<p>В этом разделе будет использоваться  <code>javah</code>  – средство Java, используемое для создания заголовка на языке C из класса Java.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В окне терминала перейдите к каталогу  <code>NetBeansProjects</code> .</p>
</li>
<li>
<p>Введите следующее значение:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">javah -o JNIDemoJava.h -classpath JNIDemoJava/build/classes jnidemojava.Main</code></pre>
</div>
</div>
<div class="paragraph">
<p>В каталоге NetBeansProjects будет создан файл заголовка на языке C  <code>JNIDemoJava.h</code> . Этот файл требуется для того, чтобы обеспечить предоставление правильного объявления функции для реализации метода  <code>nativePrint()</code>  в машинном коде. Он понадобится позже при создании части приложения на языке C.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Переключение обратно в окно IDE NetBeans.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Заключение</strong></p>
</div>
<div class="paragraph">
<p>В этом упражнении вы создали новый проект приложения Java, указали его местоположение и определили пакет и имя главного класса этого проекта. Вы также добавили новый метод к главному классу и пометили его как метод с реализацией в машинном коде. В завершение вы создали файл заголовка на языке C, который понадобится позже при компиляции библиотеки в машинный код.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_настройка_нового_проекта_динамической_библиотеки_на_языке_cc">Настройка нового проекта динамической библиотеки на языке C/C++</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе рассматривается процесс создания части приложения в машинном коде. Вы создадите проект динамической библиотеки на языке C++ и настроите его для сборки кода JNI.</p>
</div>
<div class="paragraph">
<p>После настройки проекта вы создадите реализацию для метода в машинном коде, который был объявлен ранее в части приложения на языке Java.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите команду "Файл" &gt; "Новый проект". В окне "Категории" выберите C/C. В окне "Проекты" выберите "Динамическая библиотека C/C". Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jni-new-project-c.png" alt="jni new project c">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>В поле "Имя проекта" введите  <code>JNIDemoCdl</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>В поле "Местоположение проекта" укажите то же местоположение, которое было использовано для проекта приложения Java –  <code>NetBeansProjects</code> . Это местоположение должно отобразиться по умолчанию.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Оставьте данные во всех остальных полях без изменения и нажмите 'Готово'.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>В среде IDE будет создана папка проекта  <code>NetBeansProjects/JNIDemoCdl</code> .</p>
</div>
<div class="sect2">
<h3 id="_настройка_свойств_проекта">Настройка свойств проекта</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Правой кнопкой мыши щелкните узел проекта "JNIDemoCdl" и выберите "Свойства".</p>
</li>
<li>
<p>В диалоговом окне свойств выберите узел "Компилятор C" в свойствах "Сборка" узла.</p>
</li>
<li>
<p>Нажмите кнопку 'Включить каталоги и заголовки&#8230;&#8203;'. В открывшемся диалоговом окне 'Включение каталогов и заголовков' нажмите 'Добавить'.</p>
</li>
<li>
<p>Перейдите к каталогу JDK и выберите подкаталог  <code>include</code> .</p>
</li>
<li>
<p>Выберите параметр 'Сохранить путь как абсолютный', затем нажмите кнопку 'Выбрать', чтобы добавить этот каталог во включенные каталоги проекта.</p>
</li>
<li>
<p>Аналогичным образом добавьте каталог JDK  <code>include/linux</code> , затем нажмите кнопку "ОК".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jni-include-directories.png" alt="jni include directories">
</div>
</div>
<div class="paragraph">
<p>Эти параметры требуются для включения ссылок на библиотеку Java  <code>jni.h</code>  из кода C.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Найдите область 'Строка компиляции' в параметрах компилятора C. Щелкните текстовое поле в свойстве 'Дополнительные параметры' и введите  <code>-shared -m32</code> . <span class="image"><img src="images/jni-project-properties-cmd-options.png" alt="jni project properties cmd options"></span></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Параметр  <code>-shared</code>  указывает создание динамической библиотеки.
Параметр  <code>-m32</code>  указывает создание двоичного файла для 32-разрядных платформ. По умолчанию в 64-разрядных системах компилируются двоичные файлы для 64-разрядных платформ, что приводит к возникновению множества проблем в 32-разрядных JDK.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Перейдите в категорию "Компоновщик" на левой панели.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Поставьте курсор в текстовое поле "Вывод" и замените строку</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">${CND_DISTDIR}/${CND_CONF}/${CND_PLATFORM}/libJNIDemoCdl.so</code></pre>
</div>
</div>
<div class="paragraph">
<p>на строку</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">dist/libJNIDemoCdl.so</code></pre>
</div>
</div>
<div class="paragraph">
<p>чтобы упростить путь к созданному файлу совместно используемого объекта. Это поможет упростить процесс создания ссылки из Java.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jni-project-properties-linker.png" alt="jni project properties linker">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>Нажмите кнопку "ОК". Определенные параметры сохранены.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_добавление_файла_заголовка">Добавление файла заголовка</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Перейдите в окно терминала и переместите ранее созданный файл заголовка  <code>JNIDemoJava.h</code>  из каталога  <code>NetBeansProjects</code>  в каталог проекта библиотеки C/C++ –  <code>NetBeansProjects/JNIDemoCdl</code> .
2.
В окне 'Проекты' щелкните правой кнопкой мыши узел 'Файлы заголовка' проекта  <code>JNIDemoCdl</code>  и выберите 'Добавить существующий элемент'. Перейдите в каталог  <code>NetBeansProjects/JNIDemoCdl</code> , выберите файл  <code>JNIDemoJava.h</code>  и нажмите 'Выбрать'.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Файл  <code>JNIDemoJava.h</code>  появится в списке 'Файлы заголовка'.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jni-source-files-include-file.png" alt="jni source files include file">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_реализация_метода">Реализация метода</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Правой кнопкой мыши щелкните узел "Исходные файлы" проекта <code>JNIDemoCdl</code> , затем выберите пункт "Создать &gt; Исходный файл C". Введите  <code>JNIDemo</code>  в поле "Имя файла", затем нажмите кнопку "Готово". В редакторе откроется файл  <code>JNIDemo.c</code> .</p>
</li>
<li>
<p>Измените файл  <code>JNIDemo.c</code> , введя следующий код:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="c">#include &lt;jni.h&gt;
#include &lt;stdio.h&gt;
#include "JNIDemoJava.h"

JNIEXPORT void JNICALL Java_jnidemojava_Main_nativePrint
        (JNIEnv *env, jobject obj)
{

    printf("\nHello World from C\n");

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Сохраните файл  <code>JNIDemo.c</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Щелкните правой кнопкой мыши узел проекта  <code>JNIDemoCdl</code>  и выберите 'Собрать'. В окне 'Результаты' отображается следующее (или аналогичное) сообщение:  <code>СБОРКА УСПЕШНО ЗАВЕРШЕНА (общее время: 171 мс)</code> .</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Заключение</strong></p>
</div>
<div class="paragraph">
<p>В этом упражнении вы создали новую динамическую библиотеку C/C++, указали ее местоположение и настроили ее для сборки реализации JNI метода Java. Вы добавили созданный файл заголовка для метода в машинном коде, объявленного в приложении Java, и выполнили его реализацию.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_сборка_и_запуск_приложения">Сборка и запуск приложения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом упражнении вы выполните ряд окончательных изменений в части приложения на языке Java. Эти изменения нужны, чтобы часть приложения на языке Java правильно выполнила загрузку библиотеки в машинном коде, скомпилированной в предыдущем упражнении. После этого вы выполните компиляцию созданного приложения и запустите его.</p>
</div>
<div class="sect2">
<h3 id="_настройка_проекта_java">Настройка проекта Java</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Откройте файл  <code>Main.java</code>  в редакторе.</p>
</li>
<li>
<p>Добавьте код инициализации для динамической библиотеки C++ после строки  <code>public class Main</code> , используя путь к выходному файлу, укороченный в предыдущем упражнении:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">static {
        System.load("_full-path-to-NetBeansProjects-dir_/JNIDemoCdl/dist/libJNIDemoCdl.so");
       }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Замените <em>full-path-to-NetBeansProjects-dir</em> путем к каталогу NetBeansProjects, который должен иметь следующий (или аналогичный) вид:  <code>/home/<em>username</em>/NetBeansProjects</code></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Сохраните файл  <code>Main.java</code> .</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_запуск_приложения_jnidemojava">Запуск приложения JNIDemoJava</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите приложение JNIDemoJava в окне 'Проекты'.</p>
</li>
<li>
<p>Чтобы запустить приложение, нажмите клавишу F6 или кнопку "Выполнить" на панели инструментов. Программа должна запуститься корректно, и в окне 'Результаты' должны отобразиться следующие (или аналогичные) данные:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jni-build-success.png" alt="jni build success">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_заключение">Заключение</h3>
<div class="paragraph">
<p>В этом упражнении вы выполнили окончательную настройку и запустили приложение, чтобы проверить, что реализация метода в машинном коде берется из библиотеки C, скомпилированной в машинный код.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_что_дальше">Что дальше?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Чтобы проверить проект на рабочем примере, <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FCPlusPlus%252FJNIDemo.zip">+ загрузите файл ZIP, содержащий исходный код,+</a> с веб-сайта netbeans.org.</p>
</div>
<div class="paragraph">
<p>Для получения дополнительной информации используйте следующие документы:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="quickstart.html">Краткий учебный курс по работе с проектами C/C++</a></p>
</li>
<li>
<p><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/jni/">Спецификация JNI</a></p>
</li>
<li>
<p><a href="http://en.wikipedia.org/wiki/Java_Native_Interface">Интерфейс Java с машинным кодом (Java Native Interface)</a>
link:https://netbeans.org/about/contact_form.html?to=7&amp;subject=Feedback:%20Beginning%20JNI%20with%20NetBeans%20IDE%20and%20C/C+%20Plugin%20on%20Linux[+Отправить отзыв по этому учебному курсу]</p>
</li>
</ul>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/cnd/beginning-jni-linux_ru.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
