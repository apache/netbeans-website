
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>在 Linux 上使用 NetBeans IDE 和 C/C++ 插件开始开发 JNI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="在 Linux 上使用 NetBeans IDE 和 C/C++ 插件开始开发 JNI - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, 在 Linux 上使用 NetBeans IDE 和 C/C++ 插件开始开发 JNI">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>

  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="/download/nb19/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">在 Linux 上使用 NetBeans IDE 和 C/C++ 插件开始开发 JNI</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/cnd/beginning-jni-linux_zh_CN.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_要求">要求</a></li>
<li><a href="#_为教程设置环境">为教程设置环境</a></li>
<li><a href="#_设置_java_应用程序项目">设置 Java 应用程序项目</a>
<ul class="sectlevel2">
<li><a href="#_编辑主类源代码">编辑主类源代码</a></li>
<li><a href="#_创建本机库头文件">创建本机库头文件</a></li>
</ul>
</li>
<li><a href="#_设置新的_cc_动态库项目">设置新的 C/C++ 动态库项目</a>
<ul class="sectlevel2">
<li><a href="#_设置项目属性">设置项目属性</a></li>
<li><a href="#_添加头文件">添加头文件</a></li>
<li><a href="#_实现方法">实现方法</a></li>
</ul>
</li>
<li><a href="#_构建和运行应用程序">构建和运行应用程序</a>
<ul class="sectlevel2">
<li><a href="#_配置_java_项目">配置 Java 项目</a></li>
<li><a href="#_运行_jnidemojava_应用程序">运行 JNIDemoJava 应用程序</a></li>
<li><a href="#_小结">小结</a></li>
</ul>
</li>
<li><a href="#_后续步骤">后续步骤</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><em>2014 年 3 月</em> [修订版本号：V8.0-1]</p>
</div>
<div class="paragraph">
<p>本教程将指导您如何创建使用 Java<sup>TM</sup> 本机接口 (JNI) 代码（采用 C 编程语言编写）的简单应用程序。</p>
</div>
<div class="paragraph">
<p>本教程特定于 Linux。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_要求">要求</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>要学习本教程，您需要具备以下软件和资源。</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">软件或资源</th>
<th class="tableblock halign-left valign-top">要求的版本</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NetBeans IDE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">带有 NetBeans C/C+ 插件的版本 7.4 或 8.0+</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java 开发者工具包 (JDK)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">版本 7 或 8</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C 和 C++ 编译器、 <code>make</code> 、 <code>gdb</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../../../community/releases/80/cpp-setup-instructions.html">+ 配置 NetBeans IDE 以使用 C/C+/Fortran</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>有关下载并安装必需软件的信息，请参见 <a href="../../../community/releases/80/install.html">NetBeans IDE 8.0 安装说明</a>和<a href="../../../community/releases/80/cpp-setup-instructions.html">配置 NetBeans IDE 以使用 C/C+/Fortran+</a>。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_为教程设置环境">为教程设置环境</h2>
<div class="sectionbody">
<div class="paragraph">
<p>本教程需要使用 Java 模块和 C/C 模块。如果您已下载 NetBeans IDE C/C 包，则可以单独下载其他 Java 模块。</p>
</div>
<div class="paragraph">
<p>要确定是否拥有 Java 和 C/C 模块，请选择 "File"（文件）&gt; "New Project"（新建项目）。项目类别应该包括 Java 和 C/C。</p>
</div>
<div class="paragraph">
<p><strong>下载可能缺少的 Java 和 C/C++ 模块：</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在 NetBeans IDE 中，选择 "Tools"（工具）&gt; "Plugins"（插件）。</p>
</li>
<li>
<p>在 "Available Plugins"（可用插件）标签中选中 Java 或 C/C++ 的复选框，具体取决于您的 IDE 中缺少哪个模块。如果您已拥有插件，则 "Installed"（已安装）标签中将会列出这些插件。</p>
</li>
<li>
<p>单击 "Install"（安装）。</p>
</li>
<li>
<p>在 "NetBeans IDE Installer"（NetBeans IDE 安装程序）对话框中，单击 "Next"（下一步），接受许可证条款复选框，然后单击 "Install"（安装）。</p>
</li>
<li>
<p>安装完成之后，单击 "Finish"（完成）。</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_设置_java_应用程序项目">设置 Java 应用程序项目</h2>
<div class="sectionbody">
<div class="paragraph">
<p>本课程中需要用到 Java 项目和 C 项目。在本部分中，将为要开发的 JNI 应用程序创建并配置 Java 项目。此外，还将创建新的 Java 应用程序项目，初始化其主类，并向此类中添加本机方法。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>选择 "File"（文件）&gt; "New Project"（新建项目）。选择 "Java" 类别和 "Java Application"（Java 应用程序）项目类型。单击 "Next"（下一步）。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jni-new-project-java.png" alt="jni new project java">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>在 "Project Name"（项目名称）字段中，键入  <code>JNIDemoJava</code> 。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>您可以将 "Project Location"（项目位置）更改为计算机上的任何目录，但在这里，我们使用用户目录中默认的 NetBeansProjects。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>让 "Create Main Class"（创建主类）复选框保持选中状态，然后将主类名更改为  <code>jnidemojava.Main</code> 。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jni-new-java-app.png" alt="jni new java app">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>单击 "Finish"（完成）。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>IDE 将创建  <code>NetBeansProjects/JNIDemoJava</code>  项目文件夹。</p>
</div>
<div class="sect2">
<h3 id="_编辑主类源代码">编辑主类源代码</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>要在编辑器中打开主类源代码，请右键单击  <code>Main.java</code>  类节点，然后选择 "Open"（打开）。</p>
</li>
<li>
<p>将  <code>main</code>  方法中的  <code>//TODO code application logic here</code>  一行替换为以下内容：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">new Main().nativePrint();</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>请注意左旁注中显示错误和灯泡的指示符。单击该指示符，系统将会提示您一个快捷键，用于创建方法  <code>nativePrint</code> 。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>单击此快捷键，IDE 将会插入以下代码：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private void nativePrint() {
      throw new UnsupportedOperationException("Not supported yet");
   }</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>删除以下行</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">throw new UnsupportedOperationException("Not supported yet");</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>通过将  <code>native</code>  关键字插入方法签名中来修改  <code>nativePrint()</code>  方法，使其现在看起来如下所示：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private native void nativePrint();</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>``native``  关键字表示该方法的实现位于外部本机库中。但在运行时，该库的位置并不明确。</pre>
</div>
</div>
<div class="paragraph">
<p>新的主方法看起来应如下所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public static void main(String[] args) {
       new Main().nativePrint();
   }

   private native void nativePrint();
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>右键单击项目名称，然后选择 "Clean and Build"（清理并构建）。项目应该成功构建。</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_创建本机库头文件">创建本机库头文件</h3>
<div class="paragraph">
<p>在本部分中，我们将使用  <code>javah</code> ，这是一种用于从 Java 类创建 C 头文件的 Java 工具。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在终端窗口中，导航至  <code>NetBeansProjects</code>  目录。</p>
</li>
<li>
<p>键入以下命令：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">javah -o JNIDemoJava.h -classpath JNIDemoJava/build/classes jnidemojava.Main</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>``JNIDemoJava.h``  C 头文件是在 NetBeansProjects 目录中生成的。需要此文件才能为  ``nativePrint()``  方法的本机实现提供正确的函数声明。您在以后创建此应用程序的 C 部分时需要用到它。</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>切换回 NetBeans IDE 窗口。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>小结</strong></p>
</div>
<div class="paragraph">
<p>在本练习中，创建了新的 Java 应用程序项目，指定了其位置，并定义了该项目中主类的包和名称。此外，还向主类中添加了新方法，并将其标记为具有本机实现的方法。最后，创建了 C 头文件，它在稍后编译本机库时需要用到。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_设置新的_cc_动态库项目">设置新的 C/C++ 动态库项目</h2>
<div class="sectionbody">
<div class="paragraph">
<p>本部分向您说明了如何创建应用程序的本机部分。您将创建 C++ 动态库项目，并对其进行配置，使之能够构建 JNI 代码。</p>
</div>
<div class="paragraph">
<p>设置了项目后，您将为先前在应用程序的 Java 部分中声明的本机方法创建实现。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>选择 "File"（文件）&gt; "New Project"（新建项目）。在 "Categories"（类别）下，选择 "C/C"。在 "Projects"（项目）下，选择 "C/C Dynamic Library"（C/C++ 动态库）。单击 "Next"（下一步）。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jni-new-project-c.png" alt="jni new project c">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>在 "Project Name"（项目名称）字段中，键入  <code>JNIDemoCdl</code> 。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>在 "Project Location"（项目位置）字段中，使用 Java 应用程序项目所用的相同位置，即  <code>NetBeansProjects</code> 。该位置应显示为默认值。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>接受所有其他字段的默认值，然后单击 "Finish"（完成）。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>IDE 将创建  <code>NetBeansProjects/JNIDemoCdl</code>  项目文件夹。</p>
</div>
<div class="sect2">
<h3 id="_设置项目属性">设置项目属性</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>右键单击 "JNIDemoCdl" 项目节点，然后选择 "Properties"（属性）。</p>
</li>
<li>
<p>在 "Properties"（属性）对话框中，选择 "Build"（构建）属性下方的 "C Compiler"（C 编译器）节点。</p>
</li>
<li>
<p>单击 "Include Directories and Headers&#8230;&#8203;"（包含目录和头文件&#8230;&#8203;）按钮，然后在 "Include Directories and Headers"（包含目录和头文件）对话框中单击 "Add"（添加）。</p>
</li>
<li>
<p>浏览到 JDK 目录，然后选择  <code>include</code>  子目录。</p>
</li>
<li>
<p>选择 "Store path as Absolute"（存储为绝对路径）选项，然后单击 "Select"（选择），将此目录添加到此项目的 "Include Directories"（包括目录）中。</p>
</li>
<li>
<p>以同样的方式添加 JDK 的  <code>include/linux</code>  目录，然后单击 "OK"（确定）。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jni-include-directories.png" alt="jni include directories">
</div>
</div>
<div class="paragraph">
<p>从 C 代码中启用对 Java  <code>jni.h</code>  库的引用时需要这些设置。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>找到 "C Compiler"（C 编译器）选项的 "Compilation Line"（编译行）区域。单击 "Additional Options"（其他选项）属性的文本字段，然后键入  <code>-shared -m32</code> 。<span class="image"><img src="images/jni-project-properties-cmd-options.png" alt="jni project properties cmd options"></span></p>
<div class="literalblock">
<div class="content">
<pre>``-shared``  选项用于通知编译器生成动态库。
``-m32``  选项用于通知编译器创建 32 位二进制文件。默认情况下，在 64 位系统上，已编译二进制文件是 64 位的，这会导致很多与 32 位 JDK 相关的问题。</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>单击左面板中的 "Linker"（链接器）类别。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>单击 "Output"（输出）文本字段，然后将字符串</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">${CND_DISTDIR}/${CND_CONF}/${CND_PLATFORM}/libJNIDemoCdl.so</code></pre>
</div>
</div>
<div class="paragraph">
<p>替换为字符串</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">dist/libJNIDemoCdl.so</code></pre>
</div>
</div>
<div class="paragraph">
<p>以简化生成的共享对象文件的路径。这将简化从 Java 引用文件的过程。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jni-project-properties-linker.png" alt="jni project properties linker">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>单击 "OK"（确定）。此时将保存已定义的设置。</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_添加头文件">添加头文件</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>转至终端窗口，然后将以前生成的  <code>JNIDemoJava.h</code>  头文件从  <code>NetBeansProjects</code>  目录移至 C/C++ 库项目目录，即  <code>NetBeansProjects/JNIDemoCdl</code> 。
2.
在 "Projects"（项目）窗口中，右键单击  <code>JNIDemoCdl</code>  项目的 "Header Files"（头文件）节点，然后选择 "Add Existing Item"（添加现有项）。导航到  <code>NetBeansProjects/JNIDemoCdl</code>  目录并选择  <code>JNIDemoJava.h</code>  文件，然后单击 "Select"（选择）。</p>
<div class="literalblock">
<div class="content">
<pre>``JNIDemoJava.h``  文件显示在 "Header Files"（头文件）的下方。</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jni-source-files-include-file.png" alt="jni source files include file">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_实现方法">实现方法</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>右键单击  <code>JNIDemoCdl</code>  项目的“源文件”节点，然后选择 "New"（新建）&gt; "C Source File"（C 源文件）。在 "File Name"（文件名）字段中，键入  <code>JNIDemo</code> ，然后单击 "Finish"（完成）。编辑器将打开  <code>JNIDemo.c</code>  文件。</p>
</li>
<li>
<p>键入以下代码，以编辑  <code>JNIDemo.c</code>  文件：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="c">#include &lt;jni.h&gt;
#include &lt;stdio.h&gt;
#include "JNIDemoJava.h"

JNIEXPORT void JNICALL Java_jnidemojava_Main_nativePrint
        (JNIEnv *env, jobject obj)
{

    printf("\nHello World from C\n");

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>保存  <code>JNIDemo.c</code>  文件。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>右键单击  <code>JNIDemoCdl</code>  项目节点，然后选择 "Build"（构建）。"Output"（输出）窗口将显示  <code>BUILD SUCCESSFUL (total time 171ms)</code> （构建成功（总时间为 171 毫秒））或类似内容。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>小结</strong></p>
</div>
<div class="paragraph">
<p>在本练习中，创建了新的 C/C++ 动态库，指定了其位置，并对其进行了配置，使之能够构建 Java 方法的 JNI 实现。此外，还为您在 Java 应用程序中声明的本机方法添加了已生成的头文件，并实现了它。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_构建和运行应用程序">构建和运行应用程序</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在本练习中，将对应用程序的 Java 部分执行一些最后的修改。为了确保 Java 部分正确加载您在上一个练习中编译的本机库，需要进行这些更改。然后，您将编译并运行生成的应用程序。</p>
</div>
<div class="sect2">
<h3 id="_配置_java_项目">配置 Java 项目</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在编辑器中打开  <code>Main.java</code>  文件。</p>
</li>
<li>
<p>使用上一个练习的缩写输出文件路径，在  <code>public class Main</code>  行之后为 C++ 动态库添加以下初始化代码：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">static {
        System.load("_full-path-to-NetBeansProjects-dir_/JNIDemoCdl/dist/libJNIDemoCdl.so");
       }</code></pre>
</div>
</div>
<div class="paragraph">
<p>将 <em>full-path-to-NetBeansProjects-dir</em> 替换为 NetBeansProjects 目录的路径，该路径应类似于  <code>/home/<em>username</em>/NetBeansProjects</code></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>保存  <code>Main.java</code>  文件。</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_运行_jnidemojava_应用程序">运行 JNIDemoJava 应用程序</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在 "Projects"（项目）窗口中选择 JNIDemoJava 应用程序。</p>
</li>
<li>
<p>按 F6 或单击工具栏中的 "Run"（运行）按钮，以运行应用程序。程序应正确执行，并且 "Output"（输出）窗口应显示类似以下内容的输出：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jni-build-success.png" alt="jni build success">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_小结">小结</h3>
<div class="paragraph">
<p>在本练习中，执行了一些最后的配置步骤，并运行了应用程序，以验证本机方法的实现来自于本机 C 库。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_后续步骤">后续步骤</h2>
<div class="sectionbody">
<div class="paragraph">
<p>如果要对照工作示例检查工作，则可以从 netbeans.org <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FCPlusPlus%252FJNIDemo.zip">下载包含源代码的 zip 文件</a>。</p>
</div>
<div class="paragraph">
<p>您可以使用以下文档获取更多的信息：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="quickstart.html">C/C+ 项目快速入门教程+</a></p>
</li>
<li>
<p><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/jni/">JNI 规范</a></p>
</li>
<li>
<p><a href="http://en.wikipedia.org/wiki/Java_Native_Interface">Java 本机接口</a>
link:https://netbeans.org/about/contact_form.html?to=7&amp;subject=Feedback:%20Beginning%20JNI%20with%20NetBeans%20IDE%20and%20C/C+%20Plugin%20on%20Linux[+发送有关此教程的反馈意见]</p>
</li>
</ul>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/cnd/beginning-jni-linux_zh_CN.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
