
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Урок 3: Создание нового пользователя приложения</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Урок 3: Создание нового пользователя приложения - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Урок 3: Создание нового пользователя приложения">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 12.3</h1>
            <p><a class="button success" href="/download/nb123/nb123.html">Find out more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">Урок 3: Создание нового пользователя приложения</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/php/wish-list-lesson3_ru.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_Исходный_код_приложения_из_предыдущего_урока">Исходный код приложения из предыдущего урока</a></li>
<li><a href="#_Добавление_ссылки_для_начала_создания_нового_автора_пожелания">Добавление ссылки для начала создания нового автора пожелания</a></li>
<li><a href="#_Создание_новых_веб_страниц_php">Создание новых веб-страниц PHP</a></li>
<li><a href="#_Добавление_формы_html_для_ввода_данных_нового_автора_пожелания">Добавление формы HTML для ввода данных нового автора пожелания</a>
<ul class="sectlevel2">
<li><a href="#_Проверка_допустимости_данных_и_добавление_их_в_базу_данных">Проверка допустимости данных и добавление их в базу данных</a></li>
</ul>
</li>
<li><a href="#_Отображение_сообщений_об_ошибках_в_форме_ввода">Отображение сообщений об ошибках в форме ввода</a>
<ul class="sectlevel2">
<li><a href="#_Тестирование_функциональных_возможностей_по_созданию_нового_пользователя_create_new_wisher">Тестирование функциональных возможностей по созданию нового пользователя "Create New Wisher"</a></li>
</ul>
</li>
<li><a href="#_Исходный_код_приложения_на_момент_завершения_текущего_урока">Исходный код приложения на момент завершения текущего урока</a></li>
<li><a href="#_Что_дальше">Что дальше?</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>В этом уроке рассматривается расширение приложения добавлением функции "Create a New Wisher".</p>
</div>
<div class="paragraph">
<p>Реализация затрагивает файл index.php, и при этом будут созданы два новых файла с именами  <code>createNewWisher.php</code>  и  <code>editWishList.php</code> .</p>
</div>
<div class="paragraph">
<p>Данный пример использования Create a New Wisher ("Создание нового пользователя") состоит из трех действий:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#addLinkNewWisher">Пользователь открывает файл index.php титульной страницы и щелкает ссылку для регистрации</a>.</p>
</li>
<li>
<p><a href="#implementCreateNewWisher">Пользователь переходит на страницу createNewWisher.php для создания нового автора пожелания</a>.</p>
</li>
<li>
<p>После создания нового автора пожелания пользователь переключается на editWishList.php, где для него можно создать список желаний.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/page-flow-diagram-l3.png" alt="page flow diagram l3">
</div>
</div>
<div class="paragraph">
<p>Текущий документ является частью краткого учебного курса "Создание приложения базы данных в IDE NetBeans для PHP".</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Исходный_код_приложения_из_предыдущего_урока">Исходный код приложения из предыдущего урока</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Для пользователей MySQL: перейдите по <a href="https://netbeans.org/files/documents/4/1928/lesson2.zip">этой ссылке</a> для загрузки исходного кода, описывающего состояние проекта на момент завершения предыдущего урока.</p>
</div>
<div class="paragraph">
<p>Для пользователей Oracle Database: щелкните <a href="https://netbeans.org/projects/www/downloads/download/php%252Foracle-lesson2.zip">здесь</a> для загрузки исходного кода, отражающего состояние проекта по завершении предыдущего урока.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Добавление_ссылки_для_начала_создания_нового_автора_пожелания">Добавление ссылки для начала создания нового автора пожелания</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Откройте  <code>index.php</code> . Добавьте пустую строку под закрывающим тегом &lt;/form&gt;. Введите в эту пустую строку следующий блок кода:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html"> &lt;br&gt;Still don't have a wish list?! &lt;a href="createNewWisher.php"&gt;Create now&lt;/a&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Где</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Still don&#8217;t have a wish list?! </code>  – это текст, который отобразится на странице рядом со ссылкой.</p>
</li>
<li>
<p><code>&lt;a href="createNewWisher.php"&gt;&lt;/a&gt;</code>  – это код ссылки, открывающей страницу createNewWisher.php.</p>
</li>
<li>
<p><code>Create now</code>  – это текст, который отобразится в качестве ссылки.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Создание_новых_веб_страниц_php">Создание новых веб-страниц PHP</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Создайте две новые веб-страницы PHP в исходных файлах проекта, как <a href="wish-list-lesson2.html#createNewFile">описано</a> в уроке 2.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>createNewWisher.php</code></p>
</li>
<li>
<p><code>editWishList.php</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>В  <code>editWishList.php</code>  добавьте текст "Hello!" к тексту в формате HTML, а в остальном оставьте всё как было. Этот файл будете изменен в последующих уроках, однако на данный момент он необходим в качестве объекта ссылки для  <code>createNewWisher.php</code> . В оставшейся части этого урока рассматривается изменение файла  <code>createNewWisher.php</code> .</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Добавление_формы_html_для_ввода_данных_нового_автора_пожелания">Добавление формы HTML для ввода данных нового автора пожелания</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Введите или вставьте следующий блок HTML в строку  <code>createNewWisher.php</code>  под блоком PHP:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;html&gt;
    &lt;head&gt;
        &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8"&gt;
        &lt;title&gt;&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;Welcome!&lt;br&gt;&lt;form action="createNewWisher.php" method="POST"&gt;Your name: &lt;input type="text" name="user"/&gt;&lt;br/&gt;Password: &lt;input type="password" name="password"/&gt;&lt;br/&gt;Please confirm your password: &lt;input type="password" name="password2"/&gt;&lt;br/&gt;&lt;input type="submit" value="Register"/&gt;&lt;/form&gt;&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Тип  <code>password</code>  это специальный тип текстового поля, в котором символы заменяются звездочками. Код представляет собой <a href="wish-list-lesson3.html#htmlForm">форму HTML</a>, позволяющую ввести имя и пароль нового автора пожелания в текстовые поля. При нажатии кнопки "Register" введенные данные передаются для проверки допустимости на ту же страницу –  <code>createNewWisher.php</code> .
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Предупреждения от средства проверки HTML можно проигнорировать.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_Проверка_допустимости_данных_и_добавление_их_в_базу_данных">Проверка допустимости данных и добавление их в базу данных</h3>
<div class="paragraph">
<p>В этом разделе мы добавим код PHP к  <code>createNewWisher.php</code> . Добавьте этот код к блоку PHP на верху файла. Блок PHP должен находиться над кодом HTML <strong>all</strong>, пустыми строками или пробелами. Расположение блока кода PHP является важным для правильного функционирования оператора переадресации. Внутри блока PHP введите или вставьте в указанном порядке блоки кода, описанные ниже в данном разделе.</p>
</div>
<div class="paragraph">
<p><strong>Добавьте следующий код для проверки допустимости данных:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Необходимо инициализировать переменные. Первая группа переменных осуществляет передачу параметров доступа к базе данных, а другая группа переменных используется в работе кода PHP.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-php" data-lang="php">/** database connection credentials */$dbHost="localhost"; //on MySql
$dbXeHost="localhost/XE"; $dbUsername="phpuser";$dbPassword="phpuserpw";

/** other variables */
$userNameIsUnique = true;
$passwordIsValid = true;
$userIsEmpty = false;
$passwordIsEmpty = false;
$password2IsEmpty = false;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Под переменными следует добавить блок  <code>if </code> . Параметр блока  <code>if</code>  выполняет проверку того, что страница была запрошена из нее самой посредством метода POST. Если это не так, дальнейшие проверки допустимости не выполняются, и на экран выводится страница с пустыми полями, как описано выше.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-php" data-lang="php">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER["REQUEST_METHOD"] == "POST") {

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Внутри фигурных скобок блока  <code>if </code>  добавьте другой блок  <code>if </code> , позволяющий проверить, ввел ли пользователь имя автора пожелания в поле. Если текстовое поле "user" является пустым, значение  <code>$userIsEmpty</code>  меняется на "true".</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-php" data-lang="php">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER["REQUEST_METHOD"] == "POST") {

/** Check whether the user has filled in the wisher's name in the text field "user" */    *
    if ($_POST["user"]=="") {
    $userIsEmpty = true;
    }*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте код, устанавливающий подключение к базе данных. Если установить подключение невозможно, то выводится ошибка MySQL или Oracle OCI8.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Для базы данных MySQL</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-php" data-lang="php">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER["REQUEST_METHOD"] == "POST") {

/** Check whether the user has filled in the wisher's name in the text field "user" */
    if ($_POST["user"]=="") {
        $userIsEmpty = true;
    }

    /** Create database connection */*$con = mysqli_connect($dbHost, $dbUsername, $dbPassword);
if (!$con) {
exit('Connect Error (' . mysqli_connect_errno() . ') '
. mysqli_connect_error());
}
//set the default client character set
mysqli_set_charset($con, 'utf-8');*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Для базы данных Oracle</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-php" data-lang="php">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER['REQUEST_METHOD'] == "POST") {

/** Check whether the user has filled in the wisher's name in the text field "user" */
    if ($_POST['user'] == "") {
        $userIsEmpty = true;
    }

    /** Create database connection */*$con = oci_connect($dbUsername, $dbPassword, $dbXeHost, "AL32UTF8");
    if (!$con) {
        $m = oci_error();
        exit('Connect Error' . $m['message']);

    }*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте код, позволяющий проверить, существует ли пользователь, имя которого соответствует указанному в поле "user". Эта задача выполняется путем поиска идентификационного номера автора пожелания в соответствии с именем, указанным в поле "user". Если такой номер существует, значение  <code>$userNameIsUnique</code>  меняется на "false".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Для базы данных MySQL</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-php" data-lang="php">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER["REQUEST_METHOD"] == "POST") {

/** Check whether the user has filled in the wisher's name in the text field "user" */

    if ($_POST["user"]=="") {
        $userIsEmpty = true;
    }/** Create database connection */$con = mysqli_connect($dbHost, $dbUsername, $dbPassword);if (!$con) {exit('Connect Error (' . mysqli_connect_errno() . ') '. mysqli_connect_error());}*/**set the default client character set */
mysqli_set_charset($con, 'utf-8');*
   */** Check whether a user whose name matches the "user" field already exists */**mysqli_select_db($con, "wishlist");
    $user = mysqli_real_escape_string($con, $_POST["user"]);
$wisher = mysqli_query($con, "SELECT id FROM wishers WHERE name='".$user."'");
$wisherIDnum=mysqli_num_rows($wisher);
if ($wisherIDnum) {
$userNameIsUnique = false;
}*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Для базы данных Oracle</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-php" data-lang="php">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER['REQUEST_METHOD'] == "POST") {
/** Check whether the user has filled in the wisher's name in the text field "user" */
    if ($_POST['user'] == "") {
        $userIsEmpty = true;
    }
    /** Create database connection */$con = oci_connect($dbUsername, $dbPassword, $dbXeHost, "AL32UTF8");
    if (!$con) {
        $m = oci_error();
        exit('Connection Error ' . $m['message']);

    }

   */** Check whether a user whose name matches the "user" field already exists */*
    *$query = "SELECT id FROM wishers WHERE name = :user_bv";
    $stid = oci_parse($con, $query);
    $user = $_POST['user'];
    $wisherID = null;
    oci_bind_by_name($stid, ':user_bv', $user);
    oci_execute($stid);

// Each user name should be unique. Check if the submitted user already exists.
    $row = oci_fetch_array($stid, OCI_ASSOC);
    if ($row){
        $userNameIsUnique = false;
    }*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>После кода, проверяющего уникальность пользователя, добавьте серию блоков  <code>if </code> , проверяющих, правильно ли пользователь ввел и подтвердил пароль. Код выполняет проверку того, что поля "Password" ("password") и "Confirm Password" ("password2") заполнены и идентичны друг другу. В противном случае значения соответствующих логических переменных также изменяются.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-php" data-lang="php">if ($_POST["password"]=="") {$passwordIsEmpty = true;
}if ($_POST["password2"]=="") {$password2IsEmpty = true;
}if ($_POST["password"]!=$_POST["password2"]) {$passwordIsValid = false;
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Завершите блок  <code>if ($_SERVER['REQUEST_METHOD'] == "POST")</code> , добавив код, вставляющий новую запись в базу данных "Wishers". В соответствии с кодом выполняется проверка того, что имя пользователя указано однозначно и что пароль введен и подтвержден правильно. Если эти условия выполнены, код извлекает значения "user" и "password" из формы HTML и вставляет их соответственно в столбцы "Name" и "Password", относящиеся к новой строке в базе данных "Wishers". После создания строки код закрывает подключение к базе данных и переадресует приложение на страницу  <code>editWishList.php</code> .</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Для базы данных MySQL</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-php" data-lang="php">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER['REQUEST_METHOD'] == "POST") {
    /** Check whether the user has filled in the wisher's name in the text field "user" */
    if ($_POST['user'] == "") {
        $userIsEmpty = true;
    }

    /** Create database connection */
    $con = mysqli_connect($dbHost, $dbUsername, $dbPassword);
    if (!$con) {
        exit('Connect Error (' . mysqli_connect_errno() . ') '
                . mysqli_connect_error());
    }
    //set the default client character set
    mysqli_set_charset($con, 'utf-8');

    /** Check whether a user whose name matches the "user" field already exists */
    mysqli_select_db($con, "wishlist");
    $user = mysqli_real_escape_string($con, $_POST['user']);
    $wisher = mysqli_query($con, "SELECT id FROM wishers WHERE name='".$user."'");
    $wisherIDnum=mysqli_num_rows($wisher);
    if ($wisherIDnum) {
        $userNameIsUnique = false;
    }

    /** Check whether a password was entered and confirmed correctly */
    if ($_POST['password'] == "") {
        $passwordIsEmpty = true;
    }
    if ($_POST['password2'] == "") {
        $password2IsEmpty = true;
    }
    if ($_POST['password'] != $_POST['password2']) {
        $passwordIsValid = false;
    }

    /** Check whether the boolean values show that the input data was validated successfully.
     * If the data was validated successfully, add it as a new entry in the "wishers" database.
     * After adding the new entry, close the connection and redirect the application to editWishList.php.
     */
    *if (!$userIsEmpty &amp;amp;&amp;amp; $userNameIsUnique &amp;amp;&amp;amp; !$passwordIsEmpty &amp;amp;&amp;amp; !$password2IsEmpty &amp;amp;&amp;amp; $passwordIsValid) {
        $password = mysqli_real_escape_string($con, $_POST['password']);
        mysqli_select_db($con, "wishlist");
        mysqli_query($con, "INSERT wishers (name, password) VALUES ('" . $user . "', '" . $password . "')");
        mysqli_free_result($wisher);
        mysqli_close($con);
        header('Location: editWishList.php');
        exit;
    }*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Для базы данных Oracle</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-php" data-lang="php">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER['REQUEST_METHOD'] == "POST") {

/** Check whether the user has filled in the wisher's name in the text field "user" */
    if ($_POST['user'] == "")
        $userIsEmpty = true;

    /** Create database connection */
    $con = oci_connect($dbUsername, $dbPassword, $dbXeHost, "AL32UTF8");
    if (!$con) {
        $m = oci_error();
        echo $m['message'], "\n";
        exit;
    }

    /** Check whether a user whose name matches the "user" field already exists */
    $query = "select ID from wishers where name = :user_bv";
    $stid = oci_parse($con, $query);
    $user = $_POST['user'];
    $wisherID = null;
    oci_bind_by_name($stid, ':user_bv', $user);
    oci_execute($stid);

/**Each user name should be unique. Check if the submitted user already exists. */
    $row = oci_fetch_array($stid, OCI_ASSOC);
    if ($row) {
    $wisherID = $row['ID'];
    }
    if ($wisherID != null) {
        $userNameIsUnique = false;
    }
    //Check for the existence and validity of the password
    if ($_POST['password'] == "") {
        $passwordIsEmpty = true;
    }
    if ($_POST['password2'] == "") {
        $password2IsEmpty = true;
    }
    if ($_POST['password'] != $_POST['password2']) {
        $passwordIsValid = false;
    }
    /** Check whether the boolean values show that the input data was validated successfully.
     * If the data was validated successfully, add it as a new entry in the "wishers" database.
     * After adding the new entry, close the connection and redirect the application to editWishList.php.
     */
    *if (!$userIsEmpty &amp;amp;&amp;amp; $userNameIsUnique &amp;amp;&amp;amp; !$passwordIsEmpty &amp;amp;&amp;amp; !$password2IsEmpty &amp;amp;&amp;amp; $passwordIsValid) {

        $query = "INSERT INTO wishers (name, password) VALUES (:user_bv, :pwd_bv)";
        $stid = oci_parse($con, $query);
        $pwd = $_POST['password'];
        oci_bind_by_name($stid, ':user_bv', $user);
        oci_bind_by_name($stid, ':pwd_bv', $pwd);
        oci_execute($stid);
        oci_free_statement($stid);
        oci_close($con);
        header('Location: editWishList.php');
        exit;
    }*
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Отображение_сообщений_об_ошибках_в_форме_ввода">Отображение сообщений об ошибках в форме ввода</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Перейдем к реализации вывода сообщений об ошибках при неверно введенных данных. Реализация основывается на проверках допустимости и изменении значений логических переменных, описанных в разделе <a href="#validatinDataBeforeAddingToDatabase">Проверка допустимости данных и добавление их в базу данных</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Введите следующий блок кода PHP в форме ввода HTML непосредственно под именем пользователя:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-php" data-lang="php">Welcome!&lt;br&gt;&lt;form action="createNewWisher.php" method="POST"&gt;Your name: &lt;input type="text" name="user"/&gt;&lt;br/&gt;

*&lt;?php
    if ($userIsEmpty) {
        echo ("Enter your name, please!");
        echo ("&lt;br/&gt;");
    }
    if (!$userNameIsUnique) {
        echo ("The person already exists. Please check the spelling and try again");
        echo ("&lt;br/&gt;");
    }
    ?&gt; *</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Введите следующий блок кода PHP в форме ввода HTML под кодом для ввода пароля:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-php" data-lang="php">Password: &lt;input type="password" name="password"/&gt;&lt;br/&gt;
*&lt;?php
 if ($passwordIsEmpty) {
     echo ("Enter the password, please!");
     echo ("&lt;br/&gt;");
 }
 ?&gt;*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Введите следующий блок кода PHP в форме ввода HTML под кодом для подтверждения пароля:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-php" data-lang="php">Please confirm your password: &lt;input type="password" name="password2"/&gt;&lt;br/&gt;


*&lt;?php
 if ($password2IsEmpty) {
     echo ("Confirm your password, please");
     echo ("&lt;br/&gt;");
 }
 if (!$password2IsEmpty &amp;amp;&amp;amp; !$passwordIsValid) {
     echo  ("The passwords do not match!");
     echo ("&lt;br/&gt;");
 }
?&gt;*</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_Тестирование_функциональных_возможностей_по_созданию_нового_пользователя_create_new_wisher">Тестирование функциональных возможностей по созданию нового пользователя "Create New Wisher"</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Запустите приложение. Откроется страница-указатель.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/index-php-3.png" alt="index php 3">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>На странице-указателе щелкните ссылку рядом с текстом "Still don&#8217;t have a wish list?" Откроется следующая форма:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/create-new-wisher-empty-form.png" alt="create new wisher empty form">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Оставьте поля пустыми и нажмите кнопку Register ("Зарегистрировать"). На экране появится сообщение об ошибке.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/create-new-wisher-name-empty.png" alt="create new wisher name empty">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Введите имя зарегистрированного пользователя, например, "Tom" в поле "Your name", внимательно заполните другие поля и нажмите кнопку "Register". На экране появится сообщение об ошибке.</p>
</li>
<li>
<p>Заполните поля "Password" и "Please confirm your password" различными значениями и нажмите кнопку "Register". На экране появится сообщение об ошибке.</p>
</li>
<li>
<p>Введите "Bob" в поле "Your name", укажите в полях пароля один и тот же пароль и нажмите кнопку "Register". Откроется пустая страница, однако переадресация осуществляется правильно, поскольку URL-адрес заканчивается текстом "editWishList.php":</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/edit-wish-list-empty.png" alt="edit wish list empty">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Проверьте, что данные сохранены в базе данных, путем перехода к разделу "Wishers" в окне "Services", расположенном под узлом "wislist1", и выбора "View Data" в контекстном меню</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wishers.png" alt="wishers">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Исходный_код_приложения_на_момент_завершения_текущего_урока">Исходный код приложения на момент завершения текущего урока</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Для пользователей MySQL: щелкните <a href="https://netbeans.org/files/documents/4/1929/lesson3.zip">сюда</a> для загрузки исходного кода, отражающего состояние проекта по завершении данного урока.</p>
</div>
<div class="paragraph">
<p>Для пользователей Oracle Database: щелкните <a href="https://netbeans.org/projects/www/downloads/download/php%252Foracle-lesson3.zip">сюда</a> для загрузки исходного кода, отражающего состояние проекта по завершении данного урока.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Что_дальше">Что дальше?</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="wish-list-lesson2.html">&lt;&lt;Предыдущий урок</a></p>
</div>
<div class="paragraph">
<p><a href="wish-list-lesson4.html">Следующий урок &gt;&gt;</a></p>
</div>
<div class="paragraph">
<p><a href="wish-list-tutorial-main-page.html">Назад на главную страницу руководства</a></p>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20PHP%20Wish%20List%20CRUD%203:%20Creating%20New%20User">Отправить отзыв по этому учебному курсу</a></p>
</div>
<div class="paragraph">
<p>Для отправки комментариев и предложений, получения поддержки и новостей о последних разработках, связанных с PHP IDE NetBeans <a href="../../../community/lists/top.html">присоединяйтесь к списку рассылки users@php.netbeans.org</a>.</p>
</div>
<div class="paragraph">
<p><a href="../../trails/php.html">Возврат к учебной карте PHP</a></p>
</div>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/php/wish-list-lesson3_ru.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1><a href="/about/index.html">About</a></h1>
                <ul>
                    <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb110/nb110.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="/plugins/index.html">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2020 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
