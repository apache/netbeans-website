
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>レッスン3: 新規アプリケーション・ユーザーの作成</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="レッスン3: 新規アプリケーション・ユーザーの作成 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, レッスン3: 新規アプリケーション・ユーザーの作成">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">レッスン3: 新規アプリケーション・ユーザーの作成</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/php/wish-list-lesson3_ja.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_前のレッスンからのアプリケーションソースコード">前のレッスンからのアプリケーション・ソース・コード</a></li>
<li><a href="#_新規ウィッシャの作成を開始するリンクの追加">新規ウィッシャの作成を開始するリンクの追加</a></li>
<li><a href="#_新規php_webページの作成">新規PHP Webページの作成</a></li>
<li><a href="#_新規ウィッシャのデータを入力するためのhtmlフォームの追加">新規ウィッシャのデータを入力するためのHTMLフォームの追加</a>
<ul class="sectlevel2">
<li><a href="#_データの検証とデータベースへの追加">データの検証とデータベースへの追加</a></li>
</ul>
</li>
<li><a href="#_入力フォームでのエラーメッセージの表示">入力フォームでのエラー・メッセージの表示</a>
<ul class="sectlevel2">
<li><a href="#_新規ウィッシャの作成機能のテスト">新規ウィッシャの作成機能のテスト</a></li>
</ul>
</li>
<li><a href="#_現在のレッスン完了後のアプリケーションソースコード">現在のレッスン完了後のアプリケーション・ソース・コード</a></li>
<li><a href="#_次の手順">次の手順</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>このレッスンでは、新規ウィッシャの作成機能を使用してアプリケーションを拡張します。</p>
</div>
<div class="paragraph">
<p>この実装はindex.phpファイルに影響し、 <code>createNewWisher.php</code> および <code>editWishList.php</code> という名前の2つの新しいファイルが作成されます。</p>
</div>
<div class="paragraph">
<p>新規ウィッシャの作成のユース・ケースは、3つのステップで構成されます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#addLinkNewWisher">ユーザーが最初のページindex.phpを開き、リンクをクリックして登録する</a>。</p>
</li>
<li>
<p><a href="#implementCreateNewWisher">ユーザーが、新しいウィッシャを作成するためにcreateNewWisher.phpページに切り替える</a>。</p>
</li>
<li>
<p>新しいウィッシャを作成した後、ユーザーはeditWishList.phpに切り替え、ユーザーのウィッシュ・リストを作成する。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/page-flow-diagram-l3.png" alt="page flow diagram l3">
</div>
</div>
<div class="paragraph">
<p>現在のドキュメントは、PHP向けのNetBeans IDEでのデータベース・アプリケーションの作成というチュートリアルの一部です。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_前のレッスンからのアプリケーションソースコード">前のレッスンからのアプリケーション・ソース・コード</h2>
<div class="sectionbody">
<div class="paragraph">
<p>MySQLユーザー: 前のレッスンが完了した後のプロジェクトの状態を反映したソース・コードをダウンロードするには、<a href="https://netbeans.org/files/documents/4/1928/lesson2.zip">ここ</a>をクリックします。</p>
</div>
<div class="paragraph">
<p>Oracleデータベース・ユーザー: 前のレッスンが完了した後のプロジェクトの状態を反映したソース・コードをダウンロードするには、<a href="https://netbeans.org/projects/www/downloads/download/php%252Foracle-lesson2.zip">ここ</a>をクリックします。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_新規ウィッシャの作成を開始するリンクの追加">新規ウィッシャの作成を開始するリンクの追加</h2>
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre>``index.php`` を開きます。終了の&lt;/form&gt;タグの下に空白行を追加します。その空白行に、次のコード・ブロックを入力します。</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html"> &lt;br&gt;Still don't have a wish list?! &lt;a href="createNewWisher.php"&gt;Create now&lt;/a&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>ここでは次のようになっています。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Still don&#8217;t have a wish list?!</code> は、リンクの横のページ上に表示されるテキストです。</p>
</li>
<li>
<p><code>&lt;a href="createNewWisher.php"&gt;&lt;/a&gt;</code> は、createNewWisher.phpページを開くリンクを実装するコードです。</p>
</li>
<li>
<p><code>Create now</code> は、リンクとして表示されるテキストです。</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_新規php_webページの作成">新規PHP Webページの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>レッスン2の<a href="wish-list-lesson2.html#createNewFile">説明</a>に従い、プロジェクトのソース・ファイルに新しいPHP Webページを2つ作成します。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>createNewWisher.php</code></p>
</li>
<li>
<p><code>editWishList.php</code></p>
<div class="literalblock">
<div class="content">
<pre>``editWishList.php`` に、「Hello!」というテキストをHTMLの本体に追加し、その他の部分はデフォルトの内容のままにします。このファイルは後のレッスンで変更しますが、 ``createNewWisher.php`` がこのファイルを参照するため、ここでは存在する必要があります。このレッスンでは、 ``createNewWisher.php`` を変更します。</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_新規ウィッシャのデータを入力するためのhtmlフォームの追加">新規ウィッシャのデータを入力するためのHTMLフォームの追加</h2>
<div class="sectionbody">
<div class="paragraph">
<p>次のHTMLブロックを、 <code>createNewWisher.php</code> のPHPブロックの下に入力するか、または貼り付けます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;html&gt;
    &lt;head&gt;
        &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8"&gt;
        &lt;title&gt;&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;Welcome!&lt;br&gt;&lt;form action="createNewWisher.php" method="POST"&gt;Your name: &lt;input type="text" name="user"/&gt;&lt;br/&gt;Password: &lt;input type="password" name="password"/&gt;&lt;br/&gt;Please confirm your password: &lt;input type="password" name="password2"/&gt;&lt;br/&gt;&lt;input type="submit" value="Register"/&gt;&lt;/form&gt;&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>password</code> 型は、文字がアスタリスクに置き換えられる、特殊なテキスト・フィールドの型です。コードは、ユーザーが新しいウィッシャの名前とパスワードをテキスト・フィールドに入力するための<a href="wish-list-lesson3.html#htmlForm">HTMLフォーム</a>を示します。ユーザーが「Register」ボタンをクリックすると、入力したデータが、検証のために同じページ <code>createNewWisher.php</code> に転送されます。
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
HTMLバリデータからの警告は無視できます。
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_データの検証とデータベースへの追加">データの検証とデータベースへの追加</h3>
<div class="paragraph">
<p>この項では、 <code>createNewWisher.php</code> にPHPコードを追加します。このコードを、ファイルの先頭にあるPHPブロックに追加します。PHPブロックは、*すべての*HTMLコード、空白行、または空白の上にある必要があります。PHPコード・ブロックの位置は、リダイレクト文を正しく機能させるために重要です。PHPブロックの内部に、この項に示す次のコード・ブロックを記述されている順序で入力するか、または貼り付けます。</p>
</div>
<div class="paragraph">
<p><strong>次のコードを追加し、データを検証します。</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>変数を初期化します。最初の変数はデータベースの証明書を渡し、その他はPHP操作で使用される変数です。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="php">/** database connection credentials */$dbHost="localhost"; //on MySql
$dbXeHost="localhost/XE"; $dbUsername="phpuser";$dbPassword="phpuserpw";

/** other variables */
$userNameIsUnique = true;
$passwordIsValid = true;
$userIsEmpty = false;
$passwordIsEmpty = false;
$password2IsEmpty = false;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>変数の下に <code>if</code> 節を追加します。 <code>if</code> 節のパラメータは、ページがPOSTメソッド経由で同じページからリクエストされたことを確認します。そうでない場合、それ以上の検証は実行されず、ページは前述のように空のフィールドで表示されます。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="php">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER["REQUEST_METHOD"] == "POST") {

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>if</code> 節の中括弧内に、ユーザーがウィッシャの名前を入力したかどうかを確認するための別の <code>if</code> 節を追加します。テキスト・フィールド「user」が空の場合は、 <code>$userIsEmpty</code> の値がtrueに変わります。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="php">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER["REQUEST_METHOD"] == "POST") {

/** Check whether the user has filled in the wisher's name in the text field "user" */    *
    if ($_POST["user"]=="") {
    $userIsEmpty = true;
    }*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>データベース接続を確立するコードを追加します。接続が確立できない場合、MySQLまたはOracle OCI8エラーが出力に送信されます。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>MySQLデータベースの場合:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="php">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER["REQUEST_METHOD"] == "POST") {

/** Check whether the user has filled in the wisher's name in the text field "user" */
    if ($_POST["user"]=="") {
        $userIsEmpty = true;
    }

    /** Create database connection */*$con = mysqli_connect($dbHost, $dbUsername, $dbPassword);
if (!$con) {
exit('Connect Error (' . mysqli_connect_errno() . ') '
. mysqli_connect_error());
}
//set the default client character set
mysqli_set_charset($con, 'utf-8');*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Oracleデータベースの場合:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="php">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER['REQUEST_METHOD'] == "POST") {

/** Check whether the user has filled in the wisher's name in the text field "user" */
    if ($_POST['user'] == "") {
        $userIsEmpty = true;
    }

    /** Create database connection */*$con = oci_connect($dbUsername, $dbPassword, $dbXeHost, "AL32UTF8");
    if (!$con) {
        $m = oci_error();
        exit('Connect Error' . $m['message']);

    }*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「user」フィールドと名前が一致するユーザーが、すでに存在するかどうかを確認するコードを追加します。このコードは、「user」フィールド内の名前と一致する名前のウィッシャID番号の検索することによって、これを実行します。そのようなID番号が存在する場合、 <code>$userNameIsUnique</code> の値は「false」に変更されます。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>MySQLデータベースの場合:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="php">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER["REQUEST_METHOD"] == "POST") {

/** Check whether the user has filled in the wisher's name in the text field "user" */

    if ($_POST["user"]=="") {
        $userIsEmpty = true;
    }/** Create database connection */$con = mysqli_connect($dbHost, $dbUsername, $dbPassword);if (!$con) {exit('Connect Error (' . mysqli_connect_errno() . ') '. mysqli_connect_error());}*/**set the default client character set */
mysqli_set_charset($con, 'utf-8');*
   */** Check whether a user whose name matches the "user" field already exists */**mysqli_select_db($con, "wishlist");
    $user = mysqli_real_escape_string($con, $_POST["user"]);
$wisher = mysqli_query($con, "SELECT id FROM wishers WHERE name='".$user."'");
$wisherIDnum=mysqli_num_rows($wisher);
if ($wisherIDnum) {
$userNameIsUnique = false;
}*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Oracleデータベースの場合:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="php">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER['REQUEST_METHOD'] == "POST") {
/** Check whether the user has filled in the wisher's name in the text field "user" */
    if ($_POST['user'] == "") {
        $userIsEmpty = true;
    }
    /** Create database connection */$con = oci_connect($dbUsername, $dbPassword, $dbXeHost, "AL32UTF8");
    if (!$con) {
        $m = oci_error();
        exit('Connection Error ' . $m['message']);

    }

   */** Check whether a user whose name matches the "user" field already exists */*
    *$query = "SELECT id FROM wishers WHERE name = :user_bv";
    $stid = oci_parse($con, $query);
    $user = $_POST['user'];
    $wisherID = null;
    oci_bind_by_name($stid, ':user_bv', $user);
    oci_execute($stid);

// Each user name should be unique. Check if the submitted user already exists.
    $row = oci_fetch_array($stid, OCI_ASSOC);
    if ($row){
        $userNameIsUnique = false;
    }*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ユーザーが一意かどうかを確認するコードの後に、ユーザーがパスワードを正しく入力して確認入力したかどうかを確認する一連の <code>if</code> 節を追加します。コードは、フォーム内の「Password」("password")および「Confirm Password」('password2)の各フィールドが空でなく、同一であることを確認します。そうでない場合は、それに応じて対応するブール型変数の値が変わります。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="php">if ($_POST["password"]=="") {$passwordIsEmpty = true;
}if ($_POST["password2"]=="") {$password2IsEmpty = true;
}if ($_POST["password"]!=$_POST["password2"]) {$passwordIsValid = false;
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「wishers」データベースに新しいエントリを挿入するコードを追加して、 <code>if ($_SERVER['REQUEST_METHOD']=="POST")</code> 節を完成させます。コードは、ウィッシャの名前が一意に指定されていること、およびパスワードが有効に入力および確認されていることを確認します。条件を満たす場合、コードはHTMLフォームから「user」と「password」の値を取り、wishersデータベース内の新しい行のName列とPassword列にそれぞれ挿入します。行を作成した後、コードはデータベース接続を切断し、アプリケーションをページ <code>editWishList.php</code> にリダイレクトします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>MySQLデータベースの場合:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="php">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER['REQUEST_METHOD'] == "POST") {
    /** Check whether the user has filled in the wisher's name in the text field "user" */
    if ($_POST['user'] == "") {
        $userIsEmpty = true;
    }

    /** Create database connection */
    $con = mysqli_connect($dbHost, $dbUsername, $dbPassword);
    if (!$con) {
        exit('Connect Error (' . mysqli_connect_errno() . ') '
                . mysqli_connect_error());
    }
    //set the default client character set
    mysqli_set_charset($con, 'utf-8');

    /** Check whether a user whose name matches the "user" field already exists */
    mysqli_select_db($con, "wishlist");
    $user = mysqli_real_escape_string($con, $_POST['user']);
    $wisher = mysqli_query($con, "SELECT id FROM wishers WHERE name='".$user."'");
    $wisherIDnum=mysqli_num_rows($wisher);
    if ($wisherIDnum) {
        $userNameIsUnique = false;
    }

    /** Check whether a password was entered and confirmed correctly */
    if ($_POST['password'] == "") {
        $passwordIsEmpty = true;
    }
    if ($_POST['password2'] == "") {
        $password2IsEmpty = true;
    }
    if ($_POST['password'] != $_POST['password2']) {
        $passwordIsValid = false;
    }

    /** Check whether the boolean values show that the input data was validated successfully.
     * If the data was validated successfully, add it as a new entry in the "wishers" database.
     * After adding the new entry, close the connection and redirect the application to editWishList.php.
     */
    *if (!$userIsEmpty &amp;amp;&amp;amp; $userNameIsUnique &amp;amp;&amp;amp; !$passwordIsEmpty &amp;amp;&amp;amp; !$password2IsEmpty &amp;amp;&amp;amp; $passwordIsValid) {
        $password = mysqli_real_escape_string($con, $_POST['password']);
        mysqli_select_db($con, "wishlist");
        mysqli_query($con, "INSERT wishers (name, password) VALUES ('" . $user . "', '" . $password . "')");
        mysqli_free_result($wisher);
        mysqli_close($con);
        header('Location: editWishList.php');
        exit;
    }*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Oracleデータベースの場合:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="php">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER['REQUEST_METHOD'] == "POST") {

/** Check whether the user has filled in the wisher's name in the text field "user" */
    if ($_POST['user'] == "")
        $userIsEmpty = true;

    /** Create database connection */
    $con = oci_connect($dbUsername, $dbPassword, $dbXeHost, "AL32UTF8");
    if (!$con) {
        $m = oci_error();
        echo $m['message'], "\n";
        exit;
    }

    /** Check whether a user whose name matches the "user" field already exists */
    $query = "select ID from wishers where name = :user_bv";
    $stid = oci_parse($con, $query);
    $user = $_POST['user'];
    $wisherID = null;
    oci_bind_by_name($stid, ':user_bv', $user);
    oci_execute($stid);

/**Each user name should be unique. Check if the submitted user already exists. */
    $row = oci_fetch_array($stid, OCI_ASSOC);
    if ($row) {
    $wisherID = $row['ID'];
    }
    if ($wisherID != null) {
        $userNameIsUnique = false;
    }
    //Check for the existence and validity of the password
    if ($_POST['password'] == "") {
        $passwordIsEmpty = true;
    }
    if ($_POST['password2'] == "") {
        $password2IsEmpty = true;
    }
    if ($_POST['password'] != $_POST['password2']) {
        $passwordIsValid = false;
    }
    /** Check whether the boolean values show that the input data was validated successfully.
     * If the data was validated successfully, add it as a new entry in the "wishers" database.
     * After adding the new entry, close the connection and redirect the application to editWishList.php.
     */
    *if (!$userIsEmpty &amp;amp;&amp;amp; $userNameIsUnique &amp;amp;&amp;amp; !$passwordIsEmpty &amp;amp;&amp;amp; !$password2IsEmpty &amp;amp;&amp;amp; $passwordIsValid) {

        $query = "INSERT INTO wishers (name, password) VALUES (:user_bv, :pwd_bv)";
        $stid = oci_parse($con, $query);
        $pwd = $_POST['password'];
        oci_bind_by_name($stid, ':user_bv', $user);
        oci_bind_by_name($stid, ':pwd_bv', $pwd);
        oci_execute($stid);
        oci_free_statement($stid);
        oci_close($con);
        header('Location: editWishList.php');
        exit;
    }*
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_入力フォームでのエラーメッセージの表示">入力フォームでのエラー・メッセージの表示</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ここでは、入力したデータが無効であった場合のエラー・メッセージの表示を実装します。この実装は、検証と、<a href="#validatinDataBeforeAddingToDatabase">データの検証とデータベースへの追加</a>に説明されているブール型変数の値の変更に基づいています。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>次のPHPコード・ブロックを、HTML入力フォーム内の、ウィッシャの名前入力の下に入力します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="php">Welcome!&lt;br&gt;&lt;form action="createNewWisher.php" method="POST"&gt;Your name: &lt;input type="text" name="user"/&gt;&lt;br/&gt;

*&lt;?php
    if ($userIsEmpty) {
        echo ("Enter your name, please!");
        echo ("&lt;br/&gt;");
    }
    if (!$userNameIsUnique) {
        echo ("The person already exists. Please check the spelling and try again");
        echo ("&lt;br/&gt;");
    }
    ?&gt; *</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>次のPHPコード・ブロックを、HTML入力フォーム内の、パスワード入力のコードの下に入力します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="php">Password: &lt;input type="password" name="password"/&gt;&lt;br/&gt;
*&lt;?php
 if ($passwordIsEmpty) {
     echo ("Enter the password, please!");
     echo ("&lt;br/&gt;");
 }
 ?&gt;*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>次のPHPコード・ブロックを、HTML入力フォーム内の、パスワード確認のコードの下に入力します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="php">Please confirm your password: &lt;input type="password" name="password2"/&gt;&lt;br/&gt;


*&lt;?php
 if ($password2IsEmpty) {
     echo ("Confirm your password, please");
     echo ("&lt;br/&gt;");
 }
 if (!$password2IsEmpty &amp;amp;&amp;amp; !$passwordIsValid) {
     echo  ("The passwords do not match!");
     echo ("&lt;br/&gt;");
 }
?&gt;*</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_新規ウィッシャの作成機能のテスト">新規ウィッシャの作成機能のテスト</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>アプリケーションを実行します。indexページが開きます。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/index-php-3.png" alt="index php 3">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>indexページで、テキスト「Still don&#8217;t have a wish list?」の横にあるリンクをクリックします。次のフォームが開きます。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/create-new-wisher-empty-form.png" alt="create new wisher empty form">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>フィールドを空白のままにし、「Register」をクリックします。エラー・メッセージが表示されます。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/create-new-wisher-name-empty.png" alt="create new wisher name empty">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>登録済のウィッシャの名前を入力し(たとえば、「Your name」フィールドに「Tom」と入力)、その他のフィールドを正しく入力して、「Register」をクリックします。エラー・メッセージが表示されます。</p>
</li>
<li>
<p>「Password」フィールドと「Please confirm your password」フィールドに異なる値を入力し、「Register」をクリックします。エラー・メッセージが表示されます。</p>
</li>
<li>
<p>「Your name」フィールドに「Bob」と入力し、両方のパスワード・フィールドに同じパスワードを指定して「Register」をクリックします。表示されるページは空ですが、次のようにURLがeditWishList.phpで終わっているため、リダイレクションは正しく渡されています。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/edit-wish-list-empty.png" alt="edit wish list empty">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>データがデータベースに格納されたことを確認するには、「サービス」ウィンドウのwislist1ノードの下にあるwishersに移動し、コンテキスト・メニューから「データを表示」を選択します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wishers.png" alt="wishers">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_現在のレッスン完了後のアプリケーションソースコード">現在のレッスン完了後のアプリケーション・ソース・コード</h2>
<div class="sectionbody">
<div class="paragraph">
<p>MySQLユーザー: このレッスンが完了した後のプロジェクトの状態を反映したソース・コードをダウンロードするには、<a href="https://netbeans.org/files/documents/4/1929/lesson3.zip">ここ</a>をクリックします。</p>
</div>
<div class="paragraph">
<p>Oracleデータベース・ユーザー: このレッスンが完了した後のプロジェクトの状態を反映したソース・コードをダウンロードするには、<a href="https://netbeans.org/projects/www/downloads/download/php%252Foracle-lesson3.zip">ここ</a>をクリックします。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_次の手順">次の手順</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="wish-list-lesson2.html">&lt;&lt; 前のレッスン</a></p>
</div>
<div class="paragraph">
<p><a href="wish-list-lesson4.html">次のレッスン&gt;&gt;</a></p>
</div>
<div class="paragraph">
<p><a href="wish-list-tutorial-main-page.html">チュートリアルのメイン・ページに戻る</a></p>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20PHP%20Wish%20List%20CRUD%203:%20Creating%20New%20User">このチュートリアルに関するご意見をお寄せください</a></p>
</div>
<div class="paragraph">
<p><a href="../../../community/lists/top.html">users@php.netbeans.orgメーリング・リストに登録する</a>ことによって、NetBeans IDE PHP開発機能に関するご意見やご提案を送信したり、サポートを受けたり、最新の開発情報を入手したりできます。</p>
</div>
<div class="paragraph">
<p><a href="../../trails/php.html">PHPの学習に戻る</a></p>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/php/wish-list-lesson3_ja.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
