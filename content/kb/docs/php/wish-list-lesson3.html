
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Creating a Database Driven Application With PHP</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Creating a Database Driven Application With PHP - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Creating a Database Driven Application With PHP">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans (incubating)</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="/plugins/index.html">Plugins</a> </li>
            <li> <a href="/download/nb100/nb100.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Just released!</div>
            <h1 syle='font-size: 2rem'>Apache NetBeans 10.0</h1>
            <p><a class="button success" href="/download/nb100/nb100.html">Read more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">Creating a Database Driven Application With PHP</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/incubator-netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/php/wish-list-lesson3.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel0">
<li><a href="#_lesson_3_creating_a_new_application_user">Lesson 3: Creating a New Application User</a>
<ul class="sectlevel1">
<li><a href="#_application_source_code_from_the_previous_lesson">Application Source Code from the Previous Lesson</a></li>
<li><a href="#_adding_a_link_to_start_creating_a_new_wisher">Adding a Link to Start Creating a New Wisher</a></li>
<li><a href="#_creating_new_php_web_pages">Creating New PHP Web Pages</a></li>
<li><a href="#_adding_an_html_form_for_entering_the_data_of_a_new_wisher">Adding an HTML Form for Entering the Data of a New Wisher</a>
<ul class="sectlevel2">
<li><a href="#_validating_data_and_adding_it_to_the_database">Validating Data and Adding It to the Database</a></li>
</ul>
</li>
<li><a href="#_displaying_error_messages_in_the_input_form">Displaying Error Messages in the Input Form</a>
<ul class="sectlevel2">
<li><a href="#_testing_the_create_new_wisher_functionality">Testing the Create New Wisher Functionality</a></li>
</ul>
</li>
<li><a href="#_application_source_code_after_the_current_lesson_is_completed">Application Source Code after the Current Lesson Is Completed</a></li>
<li><a href="#_next_steps">Next Steps</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="_lesson_3_creating_a_new_application_user" class="sect0">Lesson 3: Creating a New Application User</h1>
<div class="paragraph">
<p>Tutorial contents:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="wish-list-tutorial-main-page.html">Creating a Database Driven Application With PHP - Main page</a>
2.
Creating the Database</p>
</li>
<li>
<p><a href="wish-list-lesson1.html">Creating a MySQL Database</a></p>
</li>
<li>
<p><a href="wish-list-oracle-lesson1.html">Creating Oracle Database Tables</a>
3.
<a href="wish-list-lesson2.html">Designing the Application. Reading from the Database</a></p>
</li>
<li>
<p><strong>&#8658; Creating a New Application User</strong></p>
<div class="ulist">
<ul>
<li>
<p><a href="#previousLessonSourceCode">Application Source Code from the Previous Lesson</a></p>
</li>
<li>
<p><a href="#addLinkNewWisher">Adding a Link to Start Creating a New Wisher</a></p>
</li>
<li>
<p><a href="#implementCreateNewWisher">Creating New PHP Web Pages</a></p>
</li>
<li>
<p><a href="#inputFormNewWisher">Adding an HTML Form for Entering the Data of a New Wisher</a></p>
</li>
<li>
<p><a href="#validatinDataBeforeAddingToDatabase">Validating Data and Adding It to the Database</a></p>
</li>
<li>
<p><a href="#errorMessagesInInputForm">Displaying Error Messages in the Input Form</a></p>
</li>
<li>
<p><a href="#testCreateNewWisherFunctionality">Testing the Create New Wisher Functionality</a></p>
</li>
<li>
<p><a href="#lessonResultSourceCode">Application Source Code after the Current Lesson Is Completed</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="wish-list-lesson4.html">Optimizing the Code</a></p>
</li>
<li>
<p><a href="wish-list-lesson5.html">Adding Security. Implementing Application User Logon</a></p>
</li>
<li>
<p><a href="wish-list-lesson6.html">Adding a New Wish to the Database</a></p>
</li>
<li>
<p><a href="wish-list-lesson7.html">Updating and Deleting Entries in the Database</a></p>
</li>
<li>
<p><a href="wish-list-lesson8.html">Making the Application Look Better Using the CSS Technology</a></p>
</li>
<li>
<p><a href="wish-list-lesson9.html">Deploying the Application on a Remote Web Server</a></p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-80-74-73.png" alt="netbeans stamp 80 74 73">
</div>
<div class="title">Figure 1. Content on this page applies to the NetBeans IDE 7.2, 7.3, 7.4 and 8.0</div>
</div>
<div class="paragraph">
<p>In this lesson you expand the application with the Create a New Wisher functionality.</p>
</div>
<div class="paragraph">
<p>The implementation will affect the index.php file and two new files will be created named  <code>createNewWisher.php</code>  and  <code>editWishList.php</code> .</p>
</div>
<div class="paragraph">
<p>The Create a New Wisher use case consists of three steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#addLinkNewWisher">The user opens the front page index.php and clicks the link to register</a>.</p>
</li>
<li>
<p><a href="#implementCreateNewWisher">The user switches to the createNewWisher.php page for creating a new wisher</a>.</p>
</li>
<li>
<p>After creating a new wisher, the user switches to editWishList.php, where he creates a wish list for the user.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/page-flow-diagram-l3.png" alt="page flow diagram l3">
</div>
</div>
<div class="paragraph">
<p>The current document is a part of the Creating a Database Application in the NetBeans IDE for PHP tutorial.</p>
</div>
<div class="sect1">
<h2 id="_application_source_code_from_the_previous_lesson">Application Source Code from the Previous Lesson</h2>
<div class="sectionbody">
<div class="paragraph">
<p>MySQL users: Click <a href="https://netbeans.org/files/documents/4/1928/lesson2.zip">here</a> to download the source code that reflects the project state after the previous lesson is completed.</p>
</div>
<div class="paragraph">
<p>Oracle Database users: Click <a href="https://netbeans.org/projects/www/downloads/download/php%252Foracle-lesson2.zip">here</a> to download the source code that reflects the project state after the previous lesson is completed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_a_link_to_start_creating_a_new_wisher">Adding a Link to Start Creating a New Wisher</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Open  <code>index.php</code> . Add a blank line below the closing &lt;/form&gt; tag. In that blank line, enter the following code block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml"> &lt;br&gt;Still don't have a wish list?! &lt;a href="createNewWisher.php"&gt;Create now&lt;/a&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Still don&#8217;t have a wish list?! </code>  is the text that will be displayed on the page next to the link.</p>
</li>
<li>
<p><code>&lt;a href="createNewWisher.php"&gt;&lt;/a&gt;</code>  is the code that implements a link that opens the createNewWisher.php page.</p>
</li>
<li>
<p><code>Create now</code>  is the text that will be displayed as a link.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_new_php_web_pages">Creating New PHP Web Pages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create two new PHP web pages in your project&#8217;s Source Files, as <a href="wish-list-lesson2.html#createNewFile">described</a> in Lesson 2.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>createNewWisher.php</code></p>
</li>
<li>
<p><code>editWishList.php</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In  <code>editWishList.php</code> , add the text "Hello!" to the HTML body and otherwise leave it with its default content. You will modify this file in later lessons, but you need it to exist now because  <code>createNewWisher.php</code>  references it. For the remainder of this lesson, you modify  <code>createNewWisher.php</code> .</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_an_html_form_for_entering_the_data_of_a_new_wisher">Adding an HTML Form for Entering the Data of a New Wisher</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Type or paste the following HTML block into  <code>createNewWisher.php</code> , beneath the PHP block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;html&gt;
    &lt;head&gt;
        &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8"&gt;
        &lt;title&gt;&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;Welcome!&lt;br&gt;&lt;form action="createNewWisher.php" method="POST"&gt;Your name: &lt;input type="text" name="user"/&gt;&lt;br/&gt;Password: &lt;input type="password" name="password"/&gt;&lt;br/&gt;Please confirm your password: &lt;input type="password" name="password2"/&gt;&lt;br/&gt;&lt;input type="submit" value="Register"/&gt;&lt;/form&gt;&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The  <code>password</code>  type is a special type of a text field where characters are replaced with asterisks. The code presents an <a href="wish-list-lesson3.html#htmlForm">HTML form</a> for a user to enter the name and password of the new wisher in the text fields. When the user clicks the "Register" button, the entered data is transferred for validation to the same page,  <code>createNewWisher.php</code> .
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>*Note: *You can ignore warnings from the HTML validator.</p>
</div>
<div class="sect2">
<h3 id="_validating_data_and_adding_it_to_the_database">Validating Data and Adding It to the Database</h3>
<div class="paragraph">
<p>In this section you add PHP code to  <code>createNewWisher.php</code> . Add this code to the PHP block at the top of the file. The PHP block must be above <strong>all</strong> HTML code, empty lines, or whitespace. The position of the PHP code block is important to enable correct functioning of the redirection statement. Within the PHP block, type or paste the code blocks described below in this section, in the order they are written.</p>
</div>
<div class="paragraph">
<p><strong>Add the following code to validate data:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Initialize variables. The first variables pass database credentials and the others are the variables that will be used in the PHP operations.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">/** database connection credentials */$dbHost="localhost"; //on MySql
$dbXeHost="localhost/XE"; $dbUsername="phpuser";$dbPassword="phpuserpw";

/** other variables */
$userNameIsUnique = true;
$passwordIsValid = true;
$userIsEmpty = false;
$passwordIsEmpty = false;
$password2IsEmpty = false;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Below the variables, add an  <code>if </code> clause. The parameter of the  <code>if</code>  clause checks that the page was requested from itself via the POST method. If not, the further validations are not performed and the page is shown with empty fields as described above.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER["REQUEST_METHOD"] == "POST") {

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Within the curly braces of the  <code>if </code>  clause, add another  <code>if </code>  clause that checks whether the user has filled in the wisher&#8217;s name. If the text field "user" is empty, the value of  <code>$userIsEmpty</code>  is changed to true.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER["REQUEST_METHOD"] == "POST") {

/** Check whether the user has filled in the wisher's name in the text field "user" */    *
    if ($_POST["user"]=="") {
    $userIsEmpty = true;
    }*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>4.
Add code that establishes a database connection. If the connection cannot be established, the MySQL or Oracle OCI8 error is sent to the output.</p>
</div>
<div class="paragraph">
<p><strong>For the MySQL database:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER["REQUEST_METHOD"] == "POST") {

/** Check whether the user has filled in the wisher's name in the text field "user" */
    if ($_POST["user"]=="") {
        $userIsEmpty = true;
    }

    /** Create database connection */*$con = mysqli_connect($dbHost, $dbUsername, $dbPassword);
if (!$con) {
exit('Connect Error (' . mysqli_connect_errno() . ') '
. mysqli_connect_error());
}
//set the default client character set
mysqli_set_charset($con, 'utf-8');*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>For the Oracle database:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER['REQUEST_METHOD'] == "POST") {

/** Check whether the user has filled in the wisher's name in the text field "user" */
    if ($_POST['user'] == "") {
        $userIsEmpty = true;
    }

    /** Create database connection */*$con = oci_connect($dbUsername, $dbPassword, $dbXeHost, "AL32UTF8");
    if (!$con) {
        $m = oci_error();
        exit('Connect Error' . $m['message']);

    }*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add code that checks whether a user whose name matches the "user" field already exists. The code does this by trying to find a wisher ID number for a name matching the name in the "user" field. If such an ID number exists, the value of  <code>$userNameIsUnique</code>  is changed to "false."</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>For the MySQL database:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER["REQUEST_METHOD"] == "POST") {

/** Check whether the user has filled in the wisher's name in the text field "user" */

    if ($_POST["user"]=="") {
        $userIsEmpty = true;
    }/** Create database connection */$con = mysqli_connect($dbHost, $dbUsername, $dbPassword);if (!$con) {exit('Connect Error (' . mysqli_connect_errno() . ') '. mysqli_connect_error());}*/**set the default client character set */
mysqli_set_charset($con, 'utf-8');*
   */** Check whether a user whose name matches the "user" field already exists */**mysqli_select_db($con, "wishlist");
    $user = mysqli_real_escape_string($con, $_POST["user"]);
$wisher = mysqli_query($con, "SELECT id FROM wishers WHERE name='".$user."'");
$wisherIDnum=mysqli_num_rows($wisher);
if ($wisherIDnum) {
$userNameIsUnique = false;
}*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>For the Oracle database:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER['REQUEST_METHOD'] == "POST") {
/** Check whether the user has filled in the wisher's name in the text field "user" */
    if ($_POST['user'] == "") {
        $userIsEmpty = true;
    }
    /** Create database connection */$con = oci_connect($dbUsername, $dbPassword, $dbXeHost, "AL32UTF8");
    if (!$con) {
        $m = oci_error();
        exit('Connection Error ' . $m['message']);

    }

   */** Check whether a user whose name matches the "user" field already exists */*
    *$query = "SELECT id FROM wishers WHERE name = :user_bv";
    $stid = oci_parse($con, $query);
    $user = $_POST['user'];
    $wisherID = null;
    oci_bind_by_name($stid, ':user_bv', $user);
    oci_execute($stid);

// Each user name should be unique. Check if the submitted user already exists.
    $row = oci_fetch_array($stid, OCI_ASSOC);
    if ($row){
        $userNameIsUnique = false;
    }*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>After the code that checks if the user is unique, add a series of  <code>if </code> clauses that check whether the user entered and confirmed a password correctly. The code checks that the Password ("password") and Confirm Password ('password2) fields are not empty in the form and that they are identical. Otherwise the values of the corresponding boolean variables are changed accordingly.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">if ($_POST["password"]=="") {$passwordIsEmpty = true;
}if ($_POST["password2"]=="") {$password2IsEmpty = true;
}if ($_POST["password"]!=$_POST["password2"]) {$passwordIsValid = false;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>7.
Complete the  <code>if ($_SERVER['REQUEST_METHOD'] == "POST")</code>  clause by adding code that inserts a new entry into the "wishers" database. The code checks that the name of the wisher is specified uniquely and that the password is entered and confirmed validly. If the conditions are met, the code takes the "user" and "password" values from the HTML form and inserts them into the Name and Password columns, respectively, of a new row in the wishers database. After creating the row, the code closes the database connection and redirects the application to the page  <code>editWishList.php</code> .</p>
</div>
<div class="paragraph">
<p><strong>For the MySQL database:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER['REQUEST_METHOD'] == "POST") {
    /** Check whether the user has filled in the wisher's name in the text field "user" */
    if ($_POST['user'] == "") {
        $userIsEmpty = true;
    }

    /** Create database connection */
    $con = mysqli_connect($dbHost, $dbUsername, $dbPassword);
    if (!$con) {
        exit('Connect Error (' . mysqli_connect_errno() . ') '
                . mysqli_connect_error());
    }
    //set the default client character set
    mysqli_set_charset($con, 'utf-8');

    /** Check whether a user whose name matches the "user" field already exists */
    mysqli_select_db($con, "wishlist");
    $user = mysqli_real_escape_string($con, $_POST['user']);
    $wisher = mysqli_query($con, "SELECT id FROM wishers WHERE name='".$user."'");
    $wisherIDnum=mysqli_num_rows($wisher);
    if ($wisherIDnum) {
        $userNameIsUnique = false;
    }

    /** Check whether a password was entered and confirmed correctly */
    if ($_POST['password'] == "") {
        $passwordIsEmpty = true;
    }
    if ($_POST['password2'] == "") {
        $password2IsEmpty = true;
    }
    if ($_POST['password'] != $_POST['password2']) {
        $passwordIsValid = false;
    }

    /** Check whether the boolean values show that the input data was validated successfully.
     * If the data was validated successfully, add it as a new entry in the "wishers" database.
     * After adding the new entry, close the connection and redirect the application to editWishList.php.
     */
    *if (!$userIsEmpty &amp;amp;&amp;amp; $userNameIsUnique &amp;amp;&amp;amp; !$passwordIsEmpty &amp;amp;&amp;amp; !$password2IsEmpty &amp;amp;&amp;amp; $passwordIsValid) {
        $password = mysqli_real_escape_string($con, $_POST['password']);
        mysqli_select_db($con, "wishlist");
        mysqli_query($con, "INSERT wishers (name, password) VALUES ('" . $user . "', '" . $password . "')");
        mysqli_free_result($wisher);
        mysqli_close($con);
        header('Location: editWishList.php');
        exit;
    }*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>For the Oracle database:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">/** Check that the page was requested from itself via the POST method. */
if ($_SERVER['REQUEST_METHOD'] == "POST") {

/** Check whether the user has filled in the wisher's name in the text field "user" */
    if ($_POST['user'] == "")
        $userIsEmpty = true;

    /** Create database connection */
    $con = oci_connect($dbUsername, $dbPassword, $dbXeHost, "AL32UTF8");
    if (!$con) {
        $m = oci_error();
        echo $m['message'], "\n";
        exit;
    }

    /** Check whether a user whose name matches the "user" field already exists */
    $query = "select ID from wishers where name = :user_bv";
    $stid = oci_parse($con, $query);
    $user = $_POST['user'];
    $wisherID = null;
    oci_bind_by_name($stid, ':user_bv', $user);
    oci_execute($stid);

/**Each user name should be unique. Check if the submitted user already exists. */
    $row = oci_fetch_array($stid, OCI_ASSOC);
    if ($row) {
    $wisherID = $row['ID'];
    }
    if ($wisherID != null) {
        $userNameIsUnique = false;
    }
    //Check for the existence and validity of the password
    if ($_POST['password'] == "") {
        $passwordIsEmpty = true;
    }
    if ($_POST['password2'] == "") {
        $password2IsEmpty = true;
    }
    if ($_POST['password'] != $_POST['password2']) {
        $passwordIsValid = false;
    }
    /** Check whether the boolean values show that the input data was validated successfully.
     * If the data was validated successfully, add it as a new entry in the "wishers" database.
     * After adding the new entry, close the connection and redirect the application to editWishList.php.
     */
    *if (!$userIsEmpty &amp;amp;&amp;amp; $userNameIsUnique &amp;amp;&amp;amp; !$passwordIsEmpty &amp;amp;&amp;amp; !$password2IsEmpty &amp;amp;&amp;amp; $passwordIsValid) {

        $query = "INSERT INTO wishers (name, password) VALUES (:user_bv, :pwd_bv)";
        $stid = oci_parse($con, $query);
        $pwd = $_POST['password'];
        oci_bind_by_name($stid, ':user_bv', $user);
        oci_bind_by_name($stid, ':pwd_bv', $pwd);
        oci_execute($stid);
        oci_free_statement($stid);
        oci_close($con);
        header('Location: editWishList.php');
        exit;
    }*
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_displaying_error_messages_in_the_input_form">Displaying Error Messages in the Input Form</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now you implement the display of error messages when the entered data is invalid. The implementation is based on the validations and changes to the values of the boolean variables described in <a href="#validatinDataBeforeAddingToDatabase">Validating Data and Adding It to the Database</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enter the following PHP code block inside the HTML input form, below the wisher&#8217;s name input:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-php" data-lang="php">Welcome!&lt;br&gt;&lt;form action="createNewWisher.php" method="POST"&gt;Your name: &lt;input type="text" name="user"/&gt;&lt;br/&gt;

*&lt;?php
    if ($userIsEmpty) {
        echo ("Enter your name, please!");
        echo ("&lt;br/&gt;");
    }
    if (!$userNameIsUnique) {
        echo ("The person already exists. Please check the spelling and try again");
        echo ("&lt;br/&gt;");
    }
    ?&gt; *</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enter the following PHP code block inside the HTML input form below the code for the password input:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-php" data-lang="php">Password: &lt;input type="password" name="password"/&gt;&lt;br/&gt;
*&lt;?php
 if ($passwordIsEmpty) {
     echo ("Enter the password, please!");
     echo ("&lt;br/&gt;");
 }
 ?&gt;*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enter the following PHP code blocks inside the HTML input form below the code for password confirmation:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-php" data-lang="php">Please confirm your password: &lt;input type="password" name="password2"/&gt;&lt;br/&gt;


*&lt;?php
 if ($password2IsEmpty) {
     echo ("Confirm your password, please");
     echo ("&lt;br/&gt;");
 }
 if (!$password2IsEmpty &amp;amp;&amp;amp; !$passwordIsValid) {
     echo  ("The passwords do not match!");
     echo ("&lt;br/&gt;");
 }
?&gt;*</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_testing_the_create_new_wisher_functionality">Testing the Create New Wisher Functionality</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the application. The index page opens.
image::images/index-php-3.png[]</p>
</li>
<li>
<p>On the index page, click the link next to the text Still don&#8217;t have a wish list? The following form opens:
image::images/create-new-wisher-empty-form.png[]</p>
</li>
<li>
<p>Leave the fields empty and click Register. An error message displays.
image::images/create-new-wisher-name-empty.png[]</p>
</li>
<li>
<p>Enter the name of a registered wisher, for example, Tom in the Your name field, fill in the other fields correctly, and click Register. An error message displays.</p>
</li>
<li>
<p>Fill in the Password and Please confirm your password fields with different values and click Register. An error message displays.</p>
</li>
<li>
<p>Enter Bob in the Your name field, specify the same password in both password fields and click Register. The page that opens is empty but the redirection passed correctly as the URL ends with editWishList.php:
image::images/edit-wish-list-empty.png[]</p>
</li>
<li>
<p>To check that the data is stored in the database, navigate to wishers on the Services window below the wislist1 node and from the context menu choose View Data
image::images/wishers.png[]</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_application_source_code_after_the_current_lesson_is_completed">Application Source Code after the Current Lesson Is Completed</h2>
<div class="sectionbody">
<div class="paragraph">
<p>MySQL users: Click <a href="https://netbeans.org/files/documents/4/1929/lesson3.zip">here</a> to download the source code that reflects the project state after the lesson is completed.</p>
</div>
<div class="paragraph">
<p>Oracle Database users: Click <a href="https://netbeans.org/projects/www/downloads/download/php%252Foracle-lesson3.zip">here</a> to download the source code that reflects the project state after the lesson is completed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_steps">Next Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="wish-list-lesson2.html">&lt;&lt; Previous lesson</a></p>
</div>
<div class="paragraph">
<p><a href="wish-list-lesson4.html">Next lesson &gt;&gt;</a></p>
</div>
<div class="paragraph">
<p><a href="wish-list-tutorial-main-page.html">Back to the Tutorial main page</a></p>
</div>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/incubator-netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/incubator-netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/php/wish-list-lesson3.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1>About</h1>
                <ul>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                    <li><a href="https://incubator.apache.org/projects/netbeans.html">Incubation Status</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb100/nb100.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="/plugins/index.html">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2019 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <p><a href="https://incubator.apache.org/" alt="Apache Incubator"><img src='/images/incubator_feather_egg_logo_bw_crop.png' title='Apache Incubator'></img></a></p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache NetBeans is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</p>
            <p>Apache Incubator, Apache, Apache NetBeans, NetBeans, the Apache feather logo, the Apache NetBeans logo, and the Apache Incubator project logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
