
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Profiling an Enterprise Application in IDE NetBeans</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Profiling an Enterprise Application in IDE NetBeans - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Profiling an Enterprise Application in IDE NetBeans">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 12.2</h1>
            <p><a class="button success" href="/download/nb122/index.html">Find out more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">Profiling an Enterprise Application in IDE NetBeans</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/javaee/profiler-javaee_ru.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_О_профилировании_приложений_в_среде_ide">О профилировании приложений в среде IDE</a>
<ul class="sectlevel2">
<li><a href="#_Профилирование_проектов_корпоративных_приложений">Профилирование проектов корпоративных приложений</a></li>
<li><a href="#_Профилирование_модуля_ejb_и_подпроектов_веб_модулей">Профилирование модуля EJB и подпроектов веб-модулей</a></li>
</ul>
</li>
<li><a href="#_Создание_примера_проекта">Создание примера проекта</a></li>
<li><a href="#_Наблюдение_за_приложением">Наблюдение за приложением</a></li>
<li><a href="#_Анализ_производительности_приложения">Анализ производительности приложения</a>
<ul class="sectlevel2">
<li><a href="#_Опрос_приложения">Опрос приложения</a></li>
<li><a href="#_Инструментирование_всех_методов">Инструментирование всех методов</a></li>
<li><a href="#_Использование_профилирования_корневых_методов">Использование профилирования корневых методов</a></li>
<li><a href="#_Использование_инструментальных_фильтров">Использование инструментальных фильтров</a></li>
</ul>
</li>
<li><a href="#_Анализ_использования_памяти_приложением">Анализ использования памяти приложением</a></li>
<li><a href="#_Дополнительные_сведения">Дополнительные сведения</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>IDE NetBeans includes a powerful profiling tool that can provide important information about the runtime behavior of enterprise applications. С помощью средства профилирования можно легко следить за состояниями потоков и получать данные о производительности ЦП и использовании приложением памяти.</p>
</div>
<div class="paragraph">
<p>В этом документе говорится об использовании средства профилирования для получения данных о простых приложениях, которые развернуты на сервере приложений как файлы WAR. В документе показано, как использовать среду IDE, чтобы получить результаты профилирования следующих показателей.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Поведение приложения при выполнении</p>
</li>
<li>
<p>Время ЦП, используемое методами приложения</p>
</li>
<li>
<p>Создание объекта</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>При развертывании приложения на локальном зарегистрированном сервере Tomcat, сервере GlassFish или установке JBoss приложение можно профилировать всего лишь несколькими нажатиями кнопок мыши и почти не настраивая. Процесс профилирования проекта очень похож на использование команды "Выполнить" в среде IDE. Можно с легкостью начать профилирование проектов приложений или отдельных веб-модулей и модулей EJB, выбрав пункт "Профиль" &gt; "Профилировать главный проект" главного меню.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Создание примера проекта</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Для работы с этим учебным курсом требуется следующее программное обеспечение и ресурсы.</strong></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Программное обеспечение или материал</th>
<th class="tableblock halign-left valign-top">Требуемая версия</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">IDE NetBeans</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7.3, 7.4, 8.0, пакет Java EE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Комплект для разработчика на языке Java (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDK 7 или 8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Сервер GlassFish</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1, 4.0</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>При первом использовании профилировщика рекомендуется ознакомиться с разделом <a href="../java/profiler-intro.html">Введение в профилирование приложений Java в IDE NetBeans</a>, который содержит обзор задач отслеживания и профилирования.</p>
</li>
<li>
<p>Если используется IDE NetBeans 7.2 или более ранняя версия, см. раздел <a href="../../72/javaee/profiler-javaee.html">Профилирование корпоративных приложений в IDE NetBeans 7.2</a></p>
</li>
<li>
<p>В этом документе говорится о профилировании корпоративного приложения, развернутого на сервере GlassFish. Предпочтительная и самая простая настройка профилирования во время разработки корпоративных или веб-приложений — запуск приложения на локальных серверах Tomcat, GlassFish или JBoss.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_О_профилировании_приложений_в_среде_ide">О профилировании приложений в среде IDE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>При профилировании корпоративных приложений в большинстве случаев требуется анализировать производительность приложения для получения времени выполнения методов проекта. Это позволяет исправить ошибки приложения и улучшить его производительность. В некоторых случаях требуется также получить данные по использованию памяти для оптимизации сбора мусора.</p>
</div>
<div class="paragraph">
<p>Процесс профилирования корпоративных приложений, модулей EJB и веб-приложений по сути такой же, как выполнение проекта с помощью команды "Выполнить". После выбора задачи профилирования и настройки параметров нажмите "Выполнить" в диалоговом окне "Выбрать задачу профилирования" для запуска сессии профилирования. При запуске сеанса профилирования среда IDE выполняет следующие действия:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>компилирует приложение;</p>
</li>
<li>
<p>запускает целевой сервер в режиме профилирования;</p>
</li>
<li>
<p>развертывает приложение;</p>
</li>
<li>
<p>прикрепляется к приложению;</p>
</li>
<li>
<p>открывает веб-страницу веб-браузера (если это указано в свойствах проекта);</p>
</li>
<li>
<p>открывает вкладку "Текущие результаты профилирования".</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>В зависимости от параметров профилирования среда IDE может немедленно вывести результаты профилирования во вкладке "Текущие результаты профилирования". В некоторых случаях, например, при указании профилирования корневых методов, может оказаться необходимым произвести некоторые действия в веб-браузере, прежде чем будут показаны результаты.</p>
</div>
<div class="sect2">
<h3 id="_Профилирование_проектов_корпоративных_приложений">Профилирование проектов корпоративных приложений</h3>
<div class="paragraph">
<p>Корпоративное приложение, которое создается в среде IDE, может быть и веб-приложением, которое развертывается на сервере приложений как архивный веб-файл (WAR), и проектом корпоративного приложения, содержащим веб-приложение и дополнительные библиотеки, развернутым на сервере как архивный файл корпоративного приложения (EAR).</p>
</div>
<div class="paragraph">
<p>Если необходимо развернуть приложение как архивный файл EAR, создайте проект корпоративного приложения NetBeans, который содержит подпроекты и библиотеки. Проект корпоративного приложения не содержит ни одного исходного файла, только информацию о сборке и развертывании приложения и о метаданных настроек сервера. Бизнес-логика приложения проекта обычно содержится в модуле EJB, а исходный код уровня представления — в веб-модуле.</p>
</div>
<div class="paragraph">
<p>При наличии всех исходных файлов проекта корпоративного приложения самым лучшим и простым методом профилирования является профилирование всего проекта корпоративного приложения целиком, а не его подпроектов. Это позволяет удостовериться, что весь необходимый код был скомпилирован и развернут, а приложение работает корректно. Чтобы профилировать проект корпоративного приложение, выполните следующие действия:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Если проект является главным проектом, нажмите кнопку "Профилировать главный проект" на панели инструментов или выберите "Профилирование" &gt; "Профилировать главный проект" в главном меню.</p>
</li>
<li>
<p>Щелкните правой кнопкой мыши проект приложения в окне проектов и выберите "Профилировать" из всплывающего меню.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>При профилировании корпоративного приложения можно увеличить корректность результатов профилирования, указав профилирование корневых методов и используя фильтры инструментирования для ограничения количества классов, которые будут профилированы. Это поможет сократить влияние дополнительного расхода ресурсов процессом профилирования на производительность приложения и увеличит корректность результатов профилирования.</p>
</div>
<div class="paragraph">
<p>При запуске корпоративных приложений, в отличие от веб-приложений, браузер не всегда открывается автоматически. (Это зависит от настройки проекта.) Это означает, что в некоторых случаях понадобится вручную запустить внешний интерфейс веб-приложения и затем вызвать код, такой как бизнес-логика в модуле EJB, из веб-браузера.</p>
</div>
</div>
<div class="sect2">
<h3 id="_Профилирование_модуля_ejb_и_подпроектов_веб_модулей">Профилирование модуля EJB и подпроектов веб-модулей</h3>
<div class="paragraph">
<p>Сеанс профилирования можно запустить из любого модуля EJB или веб-модуля проекта. В этом случае можно выбрать один из подходов:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Профилирование модуля EJB.</strong> Если использовать этот подход, возможно, придется вызывать код приложения вручную с веб-браузера или другого клиента, поскольку проекты модулей EJB, как правило, не настроены для открытия веб-браузера. После того, как модуль EJB развернут на сервере, необходимо вызвать его код точно так же, как при отладке или оценке функциональности приложения. Обычно это делается запуском внешнего интерфейса веб-приложения и выполнения действий в веб-браузере.</p>
</li>
<li>
<p><strong>Профилирования веб-модуля.</strong> Если использовать этот подход, необходимо скомпилировать и развернуть модуль EJB на сервер до профилирования проекта веб-модуля. Обычно код EJB выполняется в результате некоторых действий пользователя в браузере. Если эти действия выполнены/обработаны кодом веб-приложения, код EJB будет виден в дереве вызовов.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Создание_примера_проекта">Создание примера проекта</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом документе говорится о профилировании демонстрационного приложения ServletStateless. Приложение ServletStateless — это простое корпоративное веб-приложение, которое включено в среду IDE как демонстрационный проект.</p>
</div>
<div class="paragraph">
<p>Для создания приложения ServletStateless выполните следующие действия:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите 'Файл' &gt; 'Создать проект' (Ctrl-Shift-N; ⌘-Shift-N в Mac) в главном меню.</p>
</li>
<li>
<p>В мастере создания проекта выберите категорию "Примеры &gt; Java EE".</p>
</li>
<li>
<p>Выберите проект "Servlet Stateless". Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Укажите местоположение проекта. Нажмите кнопку "Завершить".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>После нажатия кнопки "Готово" среда IDE создает демонстрационный проект ServletStateless. Проект ServletStateless отображается в окне 'Проекты'.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>По умолчанию, при использовании среды IDE для профилирования проекта, IDE выполнит профилирование проекта, выбранного в окне 'Проекты', если открыто более одного проекта. Если выбрать 'Выполнить' &gt; 'Задать главный проект' в главном меню и задать проект как главный, то профилирование главного проекта выполняется по умолчанию. Можно щелкнуть правой кнопкой мыши узео проекта в окне 'Проекты' и выбрать 'Профиль' во всплывающем меню.</p>
</li>
<li>
<p>Если необходимо выполнить профилирование такого файла, как страница  <code>.jsp</code>  или сервлет, щелкните правой кнопкой мыши файл и выберите 'Профилировать файл' во всплывающем меню. Процесс профилирования такой же, как при выборе "Профилирование главного проекта", но при запуске сессии профилирования в браузере откроется выбранная страница вместо страницы проекта по умолчанию.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Наблюдение_за_приложением">Наблюдение за приложением</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Наблюдение за приложением позволяет получать информацию о свойствах целевой виртуальной машины Java, включая активность потоков и распределение памяти. Поскольку наблюдение за приложением не требует большого дополнительного расхода ресурсов, можно запускать приложение в этом режиме в течение длительного времени. При выборе задачи наблюдения целевое приложение запускается без каких-либо инструментов.</p>
</div>
<div class="paragraph">
<p>Для отслеживания приложения ServletStateless выполните следующие действия:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите 'Выполнить' &gt; 'Задать главный проект' &gt; ServletStateless для задания проекта как главного.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При настройке проекта как главного, имя проекта будет выделено полужирным в окне 'Проекты'.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите "Профиль &gt; Профилировать главный проект" в главном меню.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Выберите JDK 1.7 или JDK 1.8 при отображении запроса на выбор платформы Java для профилирования.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите "Наблюдение" в диалоговом окне "Выбор задачи профилирования".</p>
</li>
<li>
<p>Нажмите кнопку "Выполнить".</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Если средство профилирования не использовалось ранее, может быть отображен запрос на калибровку средства профилирования до выбора 'Выполнить'. Дополнительные сведения о калибровке профилировщика см. раздел <a href="../java/profiler-intro.html#calibrate">Первое использование профилировщика</a> в <a href="../java/profiler-intro.html">Введение в профилирование приложений Java в IDE NetBeans</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>По кнопке "Выполнить" среда IDE собирает приложение, запускает сервер в режиме профилирования, а затем разворачивает приложение на сервере. Затем среда IDE прикрепляется к приложению и запускает извлечение данных.</p>
</div>
<div class="paragraph">
<p>Данные о потоках целевой виртуальной машины Java отображаются на вкладке "Потоки". Вкладка "Потоки" отображает данные по всем потокам, как серверным, так и потокам приложения.</p>
</div>
<div class="paragraph">
<p>Дополнительную информацию о наблюдении можно получить, нажав кнопку "Обзор телеметрии" в окне "Профилировщик", чтобы открылось окно "Обзор телеметрии виртуальной машины". Окно "Обзор телеметрии виртуальной машины" позволяет быстро просмотреть данные наблюдения в реальном времени. Щелкнув два раза график в окне "Обзор телеметрии виртуальной машины", можно открыть более крупную версию изображения графика.</p>
</div>
<div class="paragraph">
<p>При наблюдении за корпоративным приложением графики Memory (Heap) и Memory (GC) (график "кучи" памяти и график использования памяти при сборке мусора) помогают быстро проследить использование памяти приложением. Наведя указатель мыши на график, можно получить подсказку с более подробной информацией. Равномерное увеличение размера "кучи" или числа сохранившихся поколений указывает на утечку памяти. При подозрении на утечку памяти следует профилировать использование памяти приложением.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/monitor-memory-telemetry.png" alt="monitor memory telemetry">
</div>
<div class="title">Figure 1. График памяти (GC), на котором отображаются данные GC</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Анализ_производительности_приложения">Анализ производительности приложения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Задача анализа производительности ЦП позволяет увидеть данные производительности ЦП на уровне методов (время запуска) и количество вызовов методов из приложения. Можно предпочесть анализ производительности всего приложения или выбрать корень профилирования, чтобы применить профилирование только для части кода приложения.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/sample-task.png" alt="sample task">
</div>
<div class="title">Figure 2. Режим образца приложения выбран на панели ЦП диалогового окна 'Выбор задачи профилирования'</div>
</div>
<div class="paragraph">
<p>При запуске задачи анализа производительности ЦП в окне "Задачи профилирования" можно выбрать, какую часть приложения профилировать, отметив один из перечисленных параметров:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Быстрый (образец).</strong> В этом режиме IDE создает образец приложения и периодически создает трассировку стека. Этот вариант менее точен, чем методы инструментирования, но вызывает меньший дополнительный расход ресурсов. Этот вариант может помочь выбрать методы для инструментирования.</p>
</li>
<li>
<p><strong>Расширенный (инструментация).</strong> В этом режиме методы профилируемого приложения инструментируются. Среда IDE регистрирует вход и выход потоков в методы проекта, позволяя отслеживать время, затрачиваемое на каждый метод. При входе в метод потоки создают событие "вход в метод". При выходе из метода потоки создают соответствующее событие "выход из метода". Записываются метки времени обоих событий. Эти данные обрабатываются в реальном времени.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Можно выбрать инструментирование всех методов приложения или ограничить инструментирование поднабором кода приложения, указав один или несколько <strong>корневых методов</strong>. Определение корневых методов может сильно уменьшить дополнительный расход ресурсов на профилирование. Корневой метод — это метод, класс или пакет в исходном коде, который можно указать как корень обработки. Данные профилирования собираются при входе и выходе одного из потоков приложения из корня обработки. До входа одного из потоков приложения в корневой метод данные профилирования не собираются. Корневой метод можно указать, используя всплывающее меню в исходном коде, или щелкнув <strong>настроить</strong>, чтобы открыть диалоговое окно "Изменить корневые методы профилирования".</p>
</div>
<div class="paragraph">
<p><strong>Советы про профилированию веб-приложений</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>В дополнение к основным классам Java, корпоративные приложения обычно вызывают ряд методов в классах на целевом сервере. По этой причине важно настроить фильтр для ограничения количества исходного кода, которое необходимо инструментировать. Рекомендуется использовать фильтр <strong>Профилировать только классы проекта</strong> при профилировании корпоративных приложений.</p>
</li>
<li>
<p>Результаты профилирования собираются сразу при запуске сеанса профилирования. Если при использовании метода 'Расширенный' не указано профилирования ни одного корневого метода, некоторые интересные данные можно получить сразу же после запуска сервера, а именно прослушивателей веб-приложений и инициализации фильтров. Если указано профилирование неких корневых методов, эти данные, скорее всего, получены не будут. Их получение зависит от выбранных корневых методов.</p>
</li>
<li>
<p>Обычно данные прослушивателей и фильтров не бывают интересными, поэтому для их удаления можно нажать кнопку "Сбросить собранные результаты". Первые полезные данные собираются после того, как в результате некоторого действия в веб-браузере вызывается некоторый код, обычно это отображение страницы JSP, которая использует JavaBeans и/или избранные теги, или обработка методов  <code>doGet</code> / <code>doPost</code>  сервлета. Следует отметить, что данные, которые собираются при первом запуске приложения, обычно отражают только поведение веб-приложения при запуске.</p>
</li>
<li>
<p>Если страница JSP отображается впервые, она сервером внутренне компилируется в сервлет, что влияет на дерево вызовов и подсчет времени обработки метода. К тому же поведение кода сервлетов и других приложений при первом запуске может слегка отличаться от их поведения при производственной эксплуатации, когда они запущены постоянно. Для получения данных измерений, которые бы лучше характеризовали производительность приложения, перед измерением любых временных показателей следует увеличить рабочую нагрузку на профилируемый код (не должно повлиять на деревья вызовов). Для увеличения рабочей нагрузки можно использовать генераторы нагрузки. (Дополниетльные сведения см. в разделе <a href="../java/profile-loadgenerator.html">Использование генератора нагрузки в IDE NetBeans</a>). Средства кэширования у различных браузеров также могут повлиять на производительность.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
При профилировании веб-приложений на сервере приложений GlassFish на компьютере под управлением Windows при запуске сервера для профилирования может произойти ошибка, если путь установки IDE NetBeans содержит пробелы (как например при установке в каталог по умолчанию  <code>C:\Program Files\netbeans-7.4</code> ). В качестве временного решения можно установить или скопировать каталог установки IDE NetBeans в местоположение, путь к которому не содержит пробелов (например,  <code>C:\netbeans-7.4</code> ).
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_Опрос_приложения">Опрос приложения</h3>
<div class="paragraph">
<p>Вариант "Быстрый" используется для обзора режима работы всего приложения в целом, когда нет необходимости в инструментировании методов. В режиме опроса приложения профиль Quick периодически снимает данные трассировки. Расход системных ресурсов в режиме профилирования 'Быстрый' меньше, чем в режиме профилирования 'Расширенный'.</p>
</div>
<div class="paragraph">
<p>В следующем упражнении будет проанализирована производительность приложения в режиме профилирования 'Быстрый'.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Остановите сеанс наблюдения, нажав кнопку "Стоп" в меню "Профилирование".</p>
</li>
<li>
<p>Выберите "Профиль &gt; Профилировать главный проект" в главном меню.</p>
</li>
<li>
<p>Выберите "ЦП" в диалоговом окне "Выбор задачи профилирования".</p>
</li>
<li>
<p>Выберите режим <strong>Быстрый (образец)</strong>.</p>
</li>
<li>
<p>Выберите <strong>Профилировать только классы проекта</strong> из раскрывающегося списка фильтров. Нажмите кнопку "Выполнить".</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Этот фильтр ограничит классы, инструментированные для классов, найденных в проекте корпоративного приложения. Нажмите кнопку <strong>Показать значение фильтра</strong>, чтобы увидеть список отфильтрованных классов.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/sample-task.png" alt="sample task">
</div>
<div class="title">Figure 3. Режим образца приложения выбран на панели ЦП диалогового окна 'Выбор задачи профилирования'</div>
</div>
<div class="paragraph">
<p>По шкале в диалоговом окне можно заметить, что трата системных ресурсов относительно невысока.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Нажмите кнопку "Текущие результаты профилирования" в окне "Профилирование", чтобы открыть вкладку текущих результатов профилирования.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/sample-task-results.png" alt="sample task results">
</div>
<div class="title">Figure 4. Результаты режима 'Образцы приложений'</div>
</div>
<div class="paragraph">
<p>На вкладке "Текущие результаты профилирования" показано время выполнения метода  <code>service</code>  для сервлета из класса  <code>Servlet2Stateless</code>  и то, что метод был вызван один раз.</p>
</div>
</div>
<div class="sect2">
<h3 id="_Инструментирование_всех_методов">Инструментирование всех методов</h3>
<div class="paragraph">
<p>В режиме "Профилирование приложения" все методы приложения инструментируются. Хотя это более точный метод изменения производительности приложения, трата системных ресурсов при профилировании выше, чем в режиме опроса. Можно настроить профилирование корневых методов так, чтобы ограничить количество инструментируемых методов и уменьшить загрузку при профилировании. Для некоторых приложений указание корневого метода может быть единственным способом получения подробных и/или реалистичных данных производительности, поскольку профилирование всего приложения может создать так много данных профилирования, что приложение станет непригодным к использованию, или даже произойдет отказ приложения.</p>
</div>
<div class="paragraph">
<p>В следующем упражнении будет проанализирована производительность приложения с помощью инструментирования всех его методов.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Остановите сеанс наблюдения, нажав кнопку "Стоп" в меню "Профилирование".</p>
</li>
<li>
<p>Выберите "Профиль &gt; Профилировать главный проект" в главном меню.</p>
</li>
<li>
<p>Выберите "ЦП" в диалоговом окне "Выбор задачи профилирования".</p>
</li>
<li>
<p>Выберите режим <strong>Расширенный (инструментарий)</strong>.</p>
</li>
<li>
<p>Выберите <strong>Профилировать только классы проекта</strong> из раскрывающегося списка фильтров. Нажмите кнопку "Выполнить".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/advanced-cpu-task.png" alt="advanced cpu task">
</div>
<div class="title">Figure 5. Режим профилирования приложения выбран на панели ЦП диалогового окна 'Выбор задачи профилирования'</div>
</div>
<div class="paragraph">
<p>По шкале в диалоговом окне можно заметить, что трата системных ресурсов выше, чем в режиме быстрого профилирования.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Нажмите кнопку "Текущие результаты профилирования" в окне "Профилирование", чтобы открыть вкладку текущих результатов профилирования.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>На вкладке "Текущие результаты профилирования" показано время выполнения методов  <code>init</code>  и  <code>service</code>  для сервлета из класса  <code>Servlet2Stateless</code> , и то, что каждый из методов был вызван один раз. Метод  <code>init</code>  в классе  <code>StatelessSessionBean</code> также был вызван.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cpu-pane1-results.png" alt="cpu pane1 results">
</div>
<div class="title">Figure 6. Результаты режима 'Профилирование приложений'</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
По умолчанию режим автоматического обновления активен, что обеспечивает обновление отображаемых данных каждые несколько секунд. Можно включать или отключать режим автоматического обновления, нажав кнопку "Автообновление" на панели инструментов.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Для повышения удобочитаемости собранные данные можно фильтровать, используя фильтр "Результаты" в списке "Просмотр горячих точек" окна "Текущие результаты профилирования". Фильтр "Результаты" формирует выборку только по результатам и не затрагивает обрабатываемые классы. Используя фильтр "Результаты", можно отбирать результаты, которые соответствуют определенному шаблону. Для фильтрации можно использовать также более сложные регулярные выражения. Данные фильтруются по именам пакетов/классов/методов, в точности, как они появляются в первой колонке таблицы результатов. Можно определить более, чем один шаблон фильтрации, разделяя их пробелом или точкой с пробелом.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Введите свое имя в поле в веб-браузере и нажмите "Отправить запрос".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cpu-pane1-results1.png" alt="cpu pane1 results1">
</div>
<div class="title">Figure 7. Результаты режима 'Профилирование приложений'</div>
</div>
<div class="paragraph">
<p>По нажатию кнопки "Отправить запрос"данные на вкладке "Текущие результаты профилирования" обновляются для отражения действий в веб-браузере. Нажатие кнопки запускает метод  <code>sayHello</code>  в классе  <code>StatelessSessionBean</code>  и вновь вызывает метод  <code>init</code> .  <code>Служебный</code>  метод для сервлета из  <code>Servlet2Stateless</code>  также был вызван вновь. Вкладка "Текущие результаты профилирования" также показывает, сколько времени было затрачено в каждом из методов.</p>
</div>
<div class="paragraph">
<p>Чтобы увидеть графическое представление относительного времени, затраченного в различных областях приложения (сервлетах, прослушивателях и т.д.), нажмите кнопку "Развернуть". Можно нажать на сам график, чтобы развернуть результаты профилирования на экран.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/drill-down.png" alt="drill down">
</div>
<div class="title">Figure 8. График перехода по иерархии относительного времени, потраченного в сервлетах в приложении</div>
</div>
<div class="paragraph">
<p>Инструментирование приложения всегда затрачивает некоторое количество системных ресурсов на профилирование. В таком простом приложении затрата системных ресурсов незаметна, но в сложных приложениях она может быть весьма значительной. Можно уменьшить затраты системных ресурсов ограничением количества профилируемых классов, выбрав профилирование корневого метода.</p>
</div>
</div>
<div class="sect2">
<h3 id="_Использование_профилирования_корневых_методов">Использование профилирования корневых методов</h3>
<div class="paragraph">
<p>В следующем упражнении будет профилирована только часть приложения. Этот метод профилирования используется, если известны потенциальные "узкие места" приложения, касающиеся производительности, или если необходимо профилировать определенную часть кода, например, один из нескольких сервлетов. При этом методе на профилирование обычно затрачивается гораздо меньше системных ресурсов, чем при методе инструментирования всего приложения. При инструментировании только с части приложения собираются и отображаются только интересующие данные.</p>
</div>
<div class="paragraph">
<p>Чтобы профилировать часть приложения, необходимо назначить один или более корневых методов профилирования. Среда IDE инструментирует только те методы, которые вызываются потоком, входящим в корневой метод профилирования. Например, если назначить метод  <code>sayHello</code>  в классе  <code>StatelessSessionBean</code>  корневым методом и использовать фильтр "Профилировать только классы проекта", среда IDE запустит методы инструментирования при вызове метода, когда в него войдет поток приложения. В этом приложении конструктор  <code>init</code>  не будет инструментирован, поскольку он вызывается перед  <code>sayHello</code> .</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/profileroot-sayhello-project.png" alt="profileroot sayhello project">
</div>
<div class="title">Figure 9. График перехода по иерархии относительного времени, потраченного в сервлетах в приложении</div>
</div>
<div class="paragraph">
<p>Если выбрать фильтр "Профилировать все классы", среда IDE инструментирует все методы, вызванные  <code>sayHello</code> , включая базовые классы языка Java.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/profileroot-sayhello-all.png" alt="profileroot sayhello all">
</div>
<div class="title">Figure 10. График перехода по иерархии относительного времени, потраченного в сервлетах в приложении</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
В более комплексных приложениях может потребоваться указание нескольких корневых методов. В качестве корней профилирования можно выбрать отдельные методы, целые классы и пакеты.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Чтобы указать корень профилирования и проанализировать производительность приложения, выполните следующие действия.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Остановите предыдущие сессии профилирования (если они все еще запущены), нажав кнопку "Завершить" в окне "Профилирование".</p>
</li>
<li>
<p>Выберите "Профиль &gt; Профилировать главный проект" в главном меню.</p>
</li>
<li>
<p>Выберите "ЦП" в диалоговом окне "Выбор задачи профилирования".</p>
</li>
<li>
<p>Выберите режим <strong>Расширенный (инструментарий)</strong>.</p>
</li>
<li>
<p>Нажмите кнопку <strong>настроить</strong>, чтобы открыть диалоговое окно "Изменение корневых методов профилирования".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Чтобы профилировать часть приложения необходимо сначала определить корневые методы. После выбора корневого метода профилирование будет применяться только к тем методам, которые вызываются потоком, входящим в корень профилирования.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В диалоговом окне "Изменить корневые методы профилирования" выберите "Вид веб-приложения" в раскрывающемся списке "Выбрать вид".</p>
</li>
<li>
<p>Разверните узел ServletStateless и выберите метод  <code>service</code>  в пакете сервлетов. Нажмите кнопку "ОК".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/edit-profiling-roots.png" alt="edit profiling roots">
</div>
<div class="title">Figure 11. Представление веб-приложения в диалоговом окне 'Изменение корневых методов профилирования'</div>
</div>
<div class="paragraph">
<p>В противном случае можно выбрать "Просмотр пакета", чтобы увидеть все исходные пакеты приложения и выбрать метод  <code>service</code>  из класса  <code>Servlet2Stateless</code>  пакета  <code>servlet.stateless</code> .</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/edit-profiling-roots-pkg.png" alt="edit profiling roots pkg">
</div>
<div class="title">Figure 12. Представление пакета в диалоговом окне 'Изменение корневых методов профилирования'</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Обратите внимание, что конструктор  <code>Servlet2Stateless</code>  не выбран. Диалог "Изменить корневые методы профилирования" используется, чтобы применять инструментирование только к определенным методам класса. Если нет необходимости применять инструментирование только к определенным методам, можно использовать представление пакетов, чтобы выбрать весь класс или пакет. Например, если выбрать класс  <code>Servlet2Stateless</code>  в представлении пактов диалога "Изменить корневые методы профилирования", среда IDE инструментирует конструктор  <code>init</code>  и метод  <code>service</code> .
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Если нажать кнопку "Дополнительно", можно увидеть, что метод  <code>service</code>  представлен в диалоговом окне "Изменить корневые методы профилирования (Дополнительно)", как единственный корневой метод. Чтобы явно определить метод, добавив ему подпись и класс, нажмите кнопку "Добавить".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/edit-profilingroots-pkg-adv.png" alt="edit profilingroots pkg adv">
</div>
<div class="title">Figure 13. Диалоговое окно 'Изменение корневых методов профилирования' (Расширенное)</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Нажмите кнопку "ОК" в диалоговом окне "Изменить корневые методы профилирования".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>В диалоговом окне "Выбрать задачу профилирования" видно, что режим расширенного профилирования будет запущен с помощью специальных корневых методов профилирования. Чтобы просмотреть и изменить выбранный корневой метод нажмите <strong>Изменить</strong>. Заметим, что затраты системных ресурсов после этих действий ниже, чем была до настройки корневых методов.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите <strong>Профилировать только классы проекта</strong> из раскрывающегося списка фильтров. Нажмите кнопку "Выполнить".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/advanced-cpu-task-custom.png" alt="advanced cpu task custom">
</div>
<div class="title">Figure 14. Режим профилирования приложения выбран с нестандартным корнем профилирования</div>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Запустить" среда IDE собирает и разворачивает приложение и открывает в веб-браузере страницу сервлета.</p>
</div>
<div class="paragraph">
<p>В среде IDE результаты профилирования показываются на вкладке "Текущие результаты профилирования".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cpu-pane2-results.png" alt="cpu pane2 results">
</div>
<div class="title">Figure 15. Результаты методов инструментирования с использованием корня профилирования</div>
</div>
<div class="paragraph">
<p>Можно увидеть, что в среде IDE показываются результаты только для метода, определенного как корень профилирования. Поток приложения не вошел больше ни в один из методов приложения после входа в корень профилирования.</p>
</div>
<div class="paragraph">
<p>Хотя поток приложения выполнил вход в другие методы после входа в корень профилирования, эти методы не отображаются, поскольку фильтр инструментирования отбирает для инструментирования только те классы, которые являются частью проекта.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Введите свое имя в поле в веб-браузере и нажмите "Отправить запрос".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cpu-pane2-results1.png" alt="cpu pane2 results1">
</div>
<div class="title">Figure 16. Результаты методов инструментирования с использованием корня профилирования после вызова метода sayHello</div>
</div>
<div class="paragraph">
<p>По нажатию кнопки "Отправить запрос"данные на вкладке "Текущие результаты профилирования" обновляются для отражения действий в веб-браузере. Нажатие кнопки вызывает метод  <code>sayHello</code>  класса  <code>StatelessSessionBean</code>  один раз. Метод  <code>service</code>  также заново вызывается.</p>
</div>
<div class="paragraph">
<p>Результирующие данные, которые отражают производительность приложения, могут не совсем точно описывать производительность приложения, работающего уже некоторое время. Один из способов сымитировать поведение веб-приложения в более реальных условиях — запустить сценарий генератора загрузки.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Повторите в браузере предыдущее действие несколько раз, затем нажмите "Сбросить результаты" на вкладке "Текущие результаты профилирования" для удаления результатов.</p>
</li>
<li>
<p>После сброса результатов профилирования введите свое имя и нажмите "Отправить запрос" еще раз.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cpu-pane2-results2.png" alt="cpu pane2 results2">
</div>
<div class="title">Figure 17. Результаты методов инструментирования с использованием корня профилирования после вызова метода sayHello</div>
</div>
<div class="paragraph">
<p>При взгляде на результаты профилирования в большинстве случаев заметно, что производительность приложения улучшилась.</p>
</div>
</div>
<div class="sect2">
<h3 id="_Использование_инструментальных_фильтров">Использование инструментальных фильтров</h3>
<div class="paragraph">
<p>При анализе производительность ЦП можно уменьшить затраты системных ресурсов с помощью инструментального фильтра, который отберет для профилирования интересующую части кода приложения. Фильтр отбирает пакеты/классы для инструментирования. Можно выбрать фильтр из следующего списка фильтров по умолчанию или создать индивидуальный.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Профилирование всех классов.</strong> Если выбрать этот фильтр при профилировании веб-приложений или корпоративных приложений, инструментируются все классы, включая основные классы Java и классов серверов. Этот фильтр необходимо использовать с осторожностью, поскольку инструментирование такого большого количества классов может повлечь <strong>очень</strong> значительные затраты системных ресурсов.</p>
</li>
<li>
<p><strong>Профилирование только классов проекта.</strong> При профилировании корпоративного приложения рекомендуется использовать именно этот фильтр, чтобы инструментировать только классы проекта. Серверные классы не будут инструментированы.</p>
</li>
<li>
<p><strong>Профилирование классов проектов и подпроектов.</strong> При профилировании проекта корпоративного приложения, которое содержит подпроекты, такие как веб-приложения, модули EJB или библиотеки классов, можно выбрать этот фильтр, чтобы ограничить инструментированного кода для классов в подпроектах.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Можно создать индивидуальный фильтр, который будет использоваться в определенном проекте или для определенных типов профилирования. Например, если требуется использовать инструментальный фильтр для профилирования веб-приложений на сервере Oracle WebLogic, можно нажать кнопку "Изменить набор фильтров" и создать набор фильтров, которые будут исключать из процесса инструментирования базовые классы языка Java, классы Oracle WebLogic и классы NetBeans (удобно при отключенном мониторинге HTTP). Набору фильтров можно дать название, как, например "Только для веб-приложений WebLogic", и затем выбирать этот фильтр из выпадающего списка фильтров при профилировании приложения, развернутого на сервере WebLogic.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/custom-filter.png" alt="custom filter">
</div>
<div class="title">Figure 18. диалоговое окно, которое отображается при профилировании проекта в первый раз</div>
</div>
<div class="paragraph">
<p>Можно задать простой инструментальный фильтр, выбрав "Быстрый фильтр" из выпадающего списка фильтров, который откроет диалоговое окно "Установить быстрый фильтр". Затем можно быстро изменить список пакетов или классов для инструментирования. Это создаст быстрый фильтр, который затем можно выбирать из выпадающего списка фильтров.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/set-quick-filter.png" alt="set quick filter">
</div>
<div class="title">Figure 19. диалоговое окно, которое отображается при профилировании проекта в первый раз</div>
</div>
<div class="paragraph">
<p>Более подробную информацию об определении и использовании инструментальных фильтров можно найти в документации по профилированию, поставляемой с IDE.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Анализ_использования_памяти_приложением">Анализ использования памяти приложением</h2>
<div class="sectionbody">
<div class="paragraph">
<p>С помощью средства профилирования, встроенного в IDE, можно анализировать, сколько памяти использует корпоративное приложение, чтобы получить подробные данные по размещению объектов и сборке мусора. Задач "Анализ использования памяти" предоставляет данные об объектах, выделенных в целевом приложении, таких как число, тип и расположение выделенных объектов.</p>
</div>
<div class="paragraph">
<p>При профилировании использования памяти нет возможности задать корневой метод профилирования и/или инструментальные фильтры, поэтому отслеживаются все объекты, созданные во время работы сервера. На сложных серверах приложений это может привести к серьезному потреблению памяти и затратам системных ресурсов на профилирование. Поэтому, прежде чем запускать этот тип профилирования, необходимо иметь в виду потенциальные ограничения работы компьютера. Чтобы уменьшить затраты системных ресурсов на профилирование, можно изменить его настройки так, чтобы профилировался только каждый десятый объект. Также можно отключить (ограничить) запись трассировки стеков для размещения объектов.</p>
</div>
<div class="paragraph">
<p>При профилировании корпоративного приложения для поиска утечек памяти, полезно использовать метрики "сохранившихся поколений". Трассировкой числа различных циклов сборки мусора сохранившихся поколений, инструмент профилирования может найти утечку памяти заранее, пока приложение не использовало значительный объем памяти.</p>
</div>
<div class="paragraph">
<p>Для анализа производительности памяти необходимо выбрать объем данных для получения, выбрав один из следующих вариантов.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Быстро.</strong> Если выбран этот вариант, профилировщик создаст образец приложения для предоставления данных, которые ограничены живыми объектами. Живые объекты - все доступные (и недоступные), не востребованные повторно сборщиком мусора (Garbage Collector). Этот параметр отслеживает только живые объекты и не отслеживает распределение при использовании инструментов. Если выбран этот вариант, невозможно регистрировать трассировки стеков или использовать точки профилирования. Этот вариант требует значительно меньших затрат, чем 'Дополнительно'.</p>
</li>
<li>
<p><strong>Дополнительно.</strong> Если выбран этот вариант, можно получить информацию о количестве, типе и местоположении выделенных объектов. Выделенные объекты - это объекты, созданные с момента запуска приложения (или с момента последнего сброса собранных результатов в профилировщике). Все классы, которые в настоящее время загружены целевым JVM (и каждый новый класс после его загрузки) являются инструментами для получения информации о распределении объектов. Этот вариант необходимо выбрать, если нужно использовать точки профилирования при анализе памяти или если нужно выполнить запись стека вызовов. Этот вариант требует больших затрат на профилирование по сравнению с вариантом 'Быстро'.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Если вы выберете вариант 'Дополнительно', вы также можете установить следующие параметры.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Запись полного образа жизни объекта.</strong> Выберите этот вариант, чтобы записать всю информацию по каждому объекту, в том числе количество выживших поколений.</p>
</li>
<li>
<p><strong>Запись трассировки стека для распределения.</strong> Выберите этот вариант, чтобы записать полный стек вызовов. Этот вариант позволяет просматривать дерево обратных вызовов для вызовов методов при просмотре снимка памяти.</p>
</li>
<li>
<p><strong>Использование определенных точек профилирования.</strong> Выберите этот вариант, чтобы включить поддержку точек профилирования. Отключенные точки профилирования игнорируются. При отмене этого параметра все точки профилирования в проекте игнорируется.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Измеритель 'Издержки' в окне 'Выбор задачи профилирования' дает приблизительное представление об увеличении или уменьшении издержек на профилирование в соответствии с выбранными параметрами профилирования.</p>
</div>
<div class="paragraph">
<p>Используем среду IDE для анализа производительности памяти корпоративного приложения. Если необходимо получать информацию о выживших поколениях, необходимо выбрать вариант <strong>Дополнительно</strong>. Кроме того, если необходимы данные только о живых объектах, можно выбрать вариант <strong>Быстро</strong>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Остановите предыдущие сессии профилирования (если они все еще запущены), нажав кнопку "Завершить" в окне "Профилирование".
При нажатии "Остановить" среда IDE отсоединяется от приложения.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите "Профиль &gt; Профилировать главный проект" в главном меню.</p>
</li>
<li>
<p>Выберите <strong>Память</strong> в диалоговом окне "Выбрать задачу профилирования".</p>
</li>
<li>
<p>Выберите <strong>Дополнительно</strong>.</p>
</li>
<li>
<p>Выберите <strong>Запись полного жизненного цикла объекта</strong> для получения данных о выживании поколений.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
При выборе этого параметра уровень затрат системных ресурсов значительно повысится. При профилировании корпоративного приложения может понадобиться увеличить размер памяти, используемой IDE, из-за количество собранных данных.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Снимите отметку с параметра <strong>Использовать определенные точки профилирования</strong> (если он был отмечен). Нажмите кнопку "Выполнить".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/profile-memory-advanced.png" alt="profile memory advanced">
</div>
<div class="title">Figure 20. Диалоговое окно 'Выбрать задачу профилированию', в котором поазывается задача и параметры памяти</div>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Выполнить" среда IDE компилирует приложение, запускает сервер в режиме профилирования и разворачивает на нем приложение. Чтобы просмотреть результаты профилирования, нажмите кнопку "Текущие результаты" в окне "Средство профилирования", при этом откроется окно "Текущие результаты". Окно "Текущие результаты" показывает информацию о размере и количестве объектов, находящихся на целевой виртуальной машине Java. В дополнение к объектам, размещенным корпоративным приложением, в результатах показываются все объекты, размещенные сервером приложений.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/profile-memory-results.png" alt="profile memory results">
</div>
<div class="title">Figure 21. Вкладка 'Результаты профилирования', на которой отображаются результаты профилирования использования памяти</div>
</div>
<div class="paragraph">
<p>По умолчанию результаты сохраняются и отображаются как число выделенных байтов, но можно щелкнуть заголовок столбца, чтобы изменить способ отображения результатов. Также можно выполнить фильтрацию результатов, введя имя класса в поле фильтра под списком.</p>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Profiling%20Enterprise%20Applications">Отправить отзыв по этому учебному курсу</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Дополнительные_сведения">Дополнительные сведения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Этот документ описал основной подход к получению данных измерений при профилировании корпоративного приложение, развернутого на сервере приложений GlassFish.</p>
</div>
<div class="paragraph">
<p>Для получения более подробной информации о параметрах и функциях профилирования, не рассмотренных в этом документе, воспользуйтесь документацией, входящей в состав среды IDE и доступной из меню "Справка".</p>
</div>
<div class="paragraph">
<p>Сопутствующая документация приведена в следующих ресурсах.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://wiki.netbeans.org/wiki/view/NetBeansUserFAQ#section-NetBeansUserFAQ-Profiler">Часто задаваемые вопросы по профилированию NetBeans</a>
Документ содержит часто задаваемые вопросы по профилированию приложений в среде IDE NetBeans</p>
</li>
<li>
<p><a href="http://wiki.netbeans.org/wiki/view/FaqProfilerProfileFreeForm">Часто задаваемые вопросы: профилирование проекта произвольной формы</a></p>
</li>
<li>
<p><a href="../java/profiler-screencast.html">Демонстрация: точки профилирования, детализированные графики, анализатор кучи</a>
Демонстрация некоторых функций профилирования в среде IDE NetBeans</p>
</li>
<li>
<p><a href="../../../community/magazine/html/04/profiler.html">Расширенное профилирование: теория на практике</a></p>
</li>
<li>
<p><a href="http://profiler.netbeans.org/index.html">profiler.netbeans.org</a>
Сайт проекта средства профилирования NetBeans</p>
</li>
<li>
<p><a href="http://blogs.oracle.com/nbprofiler/">Блог по средству профилирования NetBeans</a></p>
</li>
<li>
<p><a href="http://profiler.netbeans.org/mailinglists.html">Списки рассылки по средству профилирования NetBeans</a></p>
</li>
<li>
<p><a href="http://profiler.netbeans.org/docs/help/5.5/index.html">Использование профилировщика NetBeans, версии 5.5</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#top">В начало</a></p>
</div>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/javaee/profiler-javaee_ru.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1><a href="/about/index.html">About</a></h1>
                <ul>
                    <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb110/nb110.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="/plugins/index.html">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2020 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
