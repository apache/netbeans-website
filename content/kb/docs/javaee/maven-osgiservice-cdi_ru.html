
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Using CDI to Inject OSGi Bundles as Services in IDE NetBeans</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Using CDI to Inject OSGi Bundles as Services in IDE NetBeans - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Using CDI to Inject OSGi Bundles as Services in IDE NetBeans">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Using CDI to Inject OSGi Bundles as Services in IDE NetBeans</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/javaee/maven-osgiservice-cdi_ru.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_создание_родительского_проекта_pom">Создание родительского проекта POM</a></li>
<li><a href="#_создание_пакетных_проектов_osgi">Создание пакетных проектов OSGi</a>
<ul class="sectlevel2">
<li><a href="#_создание_пакета_интерфейса_mavenhelloserviceapi">Создание пакета интерфейса MavenHelloServiceApi</a></li>
<li><a href="#_создание_пакета_реализации_mavenhelloserviceimpl">Создание пакета реализации MavenHelloServiceImpl</a></li>
<li><a href="#_сборка_и_развертывание_пакетов_osgi">Сборка и развертывание пакетов OSGi</a></li>
</ul>
</li>
<li><a href="#_создание_клиентского_веб_приложения">Создание клиентского веб-приложения</a>
<ul class="sectlevel2">
<li><a href="#_настройка_зависимостей_в_родительском_проекте_pom">Настройка зависимостей в родительском проекте POM</a></li>
<li><a href="#_создание_веб_приложения_mavenhellowebclient">Создание веб-приложения MavenHelloWebClient</a></li>
<li><a href="#_сборка_веб_приложения_как_пакета_osgi">Сборка веб-приложения как пакета OSGi</a></li>
<li><a href="#_развертывание_пакета_веб_приложения">Развертывание пакета веб-приложения</a></li>
</ul>
</li>
<li><a href="#_установка_и_использование_консоли_администрирования_osgi">Установка и использование консоли администрирования OSGi</a></li>
<li><a href="#_дополнительные_сведения">Дополнительные сведения</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This document demonstrates how the integrated support for the <a href="http://www.osgi.org/Main/HomePage">Open Services Gateway Initiative</a> (OSGi) framework in IDE NetBeans simplifies the process of creating OSGi bundles and using the bundles in your projects. В этом учебном курсе будут созданы два простых пакета OSGi из архетипа пакета OSGi Maven, затем они будут развернуты на сервере GlassFish Server Open Source Edition 3.1.</p>
</div>
<div class="paragraph">
<p>После создания основных пакетов OSGi будет создано клиентское веб-приложение, а CDI использован для внедрения пакетов как служб. Затем веб-приложение будет развёрнуто как пакет на сервере. Далее в этом учебном курсе показано использование консоли администрирования OSGi для работы с пакетами OSGi.</p>
</div>
<div class="paragraph">
<p>Применение пакета OSGi в приложении уровня предприятия позволяет увеличить модульность и гибкость по отношению к обновлению отдельных пакетов. Встроенная поддержка OSGi в сервере GlassFish делает внедрение пакетов в приложение очень простым.</p>
</div>
<div class="paragraph">
<p>Этот учебный курс основан на записи в блоге <a href="http://blogs.oracle.com/arungupta/entry/totd_154_dynamic_osgi_services">+ TOTD #154: Dynamic OSGi services in GlassFish 3.1 - Using CDI and @OSGiService ] и других записях, которые можно найти в link:http://blog.arungupta.me/[+блоге Аруна Гупты</a>. Блог также содержит много других интересных записей о работе с OSGi.</p>
</div>
<div class="paragraph">
<p>Кроме того, следующие ресурсы содержат массу информации об использовании OSGi и CDI в гибридных приложениях.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://weblogs.java.net/blog/2009/06/14/developing-hybrid-osgi-java-ee-applications-glassfish">+ Разработка гибридных (OSGi + Java EE) приложений в GlassFish+</a></p>
</li>
<li>
<p><a href="http://blogs.oracle.com/sivakumart/entry/typesafe_injection_of_dynamic_osgi">+ Корректное по отношению к типам внедрение динамических служб OSGi в гибридных приложениях Java EE +</a></p>
</li>
<li>
<p><a href="http://weblogs.java.net/blog/2009/06/04/osgi-enabled-web-applications-inglassfish">Веб-приложения с использованием OSGi в GlassFish</a></p>
</li>
<li>
<p><a href="http://www.youtube.com/watch?v=vaOpJJ-Xm70">+ Видео на YouTube: корректное по отношению к типам внедрение динамических служб OSGi при помощи GlassFish 3.1 и CDI+</a></p>
</li>
<li>
<p><a href="http://glassfish.java.net/public/GF-OSGi-Features.pdf">+ Разработка приложений OSGi с помощью GlassFish Server"+</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Упражнения по темам руководства</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Exercise_1">Создание родительского проекта POM</a></p>
</li>
<li>
<p><a href="#Exercise_2">Создание пакетных проектов OSGi</a></p>
</li>
<li>
<p><a href="#Exercise_2a">Создание пакета интерфейса MavenHelloServiceApi</a></p>
</li>
<li>
<p><a href="#Exercise_2b">Создание пакета внедрения MavenHelloServiceImpl </a></p>
</li>
<li>
<p><a href="#Exercise_2c">Построение и развертывание пакетов OSGi</a></p>
</li>
<li>
<p><a href="#Exercise_3">Создание клиентского веб-приложения</a></p>
</li>
<li>
<p><a href="#Exercise_3a">Настройка зависимостей в проекте POM</a></p>
</li>
<li>
<p><a href="#Exercise_3b">Создание приложения MavenHelloWebClient Web</a></p>
</li>
<li>
<p><a href="#Exercise_3c">Построение веб-приложения как пакета</a></p>
</li>
<li>
<p><a href="#Exercise_3d">Развертывание пакета веб-приложения</a></p>
</li>
<li>
<p><a href="#Exercise_4">Установка и использования консоли администрирования OSGi</a></p>
</li>
<li>
<p><a href="#Exercise_5">Ссылки и дополнительные сведения</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Для работы с этим учебным курсом требуется следующее программное обеспечение и ресурсы.</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Программное обеспечение или материал</th>
<th class="tableblock halign-left valign-top">Требуемая версия</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://download.netbeans.org/netbeans/7.1/beta/">IDE NetBeans</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Версия 7.2, 7.3, 7.4, 8.0, Java EE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Комплект для разработчика на языке Java (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">версия 7 или 8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GlassFish Server Open Source Edition 3.1.2.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1.x или 4.x</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Предпосылки</strong></p>
</div>
<div class="paragraph">
<p>Предполагается, что читатель обладает базовыми знаниями по следующим технологиям или опытом программирования с их использованием:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Программирование на Java</p>
</li>
<li>
<p>IDE NetBeans</p>
</li>
<li>
<p>Платформа Maven</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Перед изучением этого учебного курса можно ознакомиться со следующей документацией:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://wiki.netbeans.org/MavenBestPractices">Испытанные приемы для Apache Maven в IDE NetBeans</a></p>
</li>
<li>
<p><a href="http://books.sonatype.com/mvnref-book/reference/introduction.html">Глава 1. Введение в Apache Maven</a> (из книги <a href="http://books.sonatype.com/mvnref-book/reference/index.html">+Maven: The Complete Reference +</a>)</p>
</li>
<li>
<p><a href="http://www.osgi.org/javadoc/r4v42/">Платформа OSGi</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_родительского_проекта_pom">Создание родительского проекта POM</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе создается родительский проект POM для пакетов OSGi, которые создаются в данном учебном курсе. Файл POM проекта ( <code>pom.xml</code> ) изменяется для добавления элементов управления зависимостями, которые будут наследоваться дочерними проектами как зависимости.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите 'Создать проект' (Ctrl-Shift-N; ⌘-Shift-N в Mac) в главном меню.</p>
</li>
<li>
<p>Выберите в категории "Maven" проект POM.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cdi-newpomproject.png" alt="cdi newpomproject">
</div>
<div class="title">Figure 1. Архетип проекта Maven POM в мастере создания проектов</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Введите <strong>MavenOSGiCDIProject</strong> в поле имени проекта. Нажмите кнопку "Завершить".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>После нажатия кнопки "Готово" среда IDE создает проект POM и открывает проект в окне "Проекты".</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Разверните узел "Файлы проекта" в окне проектов и дважды щелкните файл  <code>pom.xml</code> , чтобы открыть файл в редакторе.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Базовый файл POM для проекта должен быть аналогичен следующему.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;com.mycompany&lt;/groupId&gt;
    &lt;artifactId&gt;MavenOSGiCDIProject&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;packaging&gt;pom&lt;/packaging&gt;
    &lt;properties&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
    &lt;/properties&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Измените родительский файл  <code>pom.xml</code> , добавив следующие элементы. Сохраните изменения.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;com.mycompany&lt;/groupId&gt;
    &lt;artifactId&gt;MavenOSGiCDIProject&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;packaging&gt;pom&lt;/packaging&gt;
    &lt;properties&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
    &lt;/properties&gt;

    *&lt;dependencyManagement&gt;
        &lt;dependencies&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.osgi&lt;/groupId&gt;
                &lt;artifactId&gt;org.osgi.core&lt;/artifactId&gt;
                &lt;version&gt;4.2.0&lt;/version&gt;
                &lt;scope&gt;provided&lt;/scope&gt;
            &lt;/dependency&gt;
        &lt;/dependencies&gt;
    &lt;/dependencyManagement&gt;*
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>В этом упражнении был явно указан артефакт, используемый в этом проекте, и его версия. Используя управление зависимостями и указывая артефакты в родительском файле POM, можно сделать файлы POM в дочерних проектах проще и обеспечить соответствие версий зависимостей в проекте.</p>
</div>
<div class="paragraph">
<p>Дополнительные сведения об использовании управления зависимостями приведены в документе <a href="http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html">+ Введении в механизм зависимостей+</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_пакетных_проектов_osgi">Создание пакетных проектов OSGi</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Категория Maven в мастере создания проекта содержит архетип пакета OSGi для создания проектов пакетов OSGi. При создании проекта пакета OSGi в создаваемом файле POM архив JAR  <code>org.osgi.core</code>  объявляется зависимостью, и для сборки проекта выбирается подключаемый модуль  <code>maven-bundle-plugin</code> .</p>
</div>
<div class="sect2">
<h3 id="_создание_пакета_интерфейса_mavenhelloserviceapi">Создание пакета интерфейса MavenHelloServiceApi</h3>
<div class="paragraph">
<p>В этом упражнении используется мастер создания проекта для создания пакетного проекта OSGi, который даст простой интерфейс, реализуемый другими пакетами. После создания пакета и интерфейса файл POM исправляется для обновления зависимости от артефакта  <code>org.osgi.core</code> , указанного в родительском проекте файла POM.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите в меню "Файл" пункт "Новый проект", чтобы открыть мастер создания проекта.</p>
</li>
<li>
<p>Выберите пакет OSGi из категории Maven. Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cdi-new-osgiproject.png" alt="cdi new osgiproject">
</div>
<div class="title">Figure 2. Архетип набора Maven OSGi в мастере создания проектов</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Введите в поле имени проекта <strong>MavenHelloServiceApi</strong>.</p>
</li>
<li>
<p>Нажмите кнопку "Обзор" и выберите в качестве расположения проект POM <strong>MavenOSGiCDIProject</strong>. Нажмите кнопку "Завершить".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>После нажатия кнопки "Готово" среда IDE создает проект и открывает его в окне проектов. Если открыть  <code>pom.xml</code>  для проекта MavenHelloServiceApi в редакторе, то вы увидите, что элемент  <code>packaging</code>  определяет  <code>bundle</code> , и что  <code>maven-bundle-plugin</code>  будет использоваться при сборке пакета.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;project&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
    &lt;artifactId&gt;MavenOSGiCDIProject&lt;/artifactId&gt;
    &lt;groupId&gt;com.mycompany&lt;/groupId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;/parent&gt;

    &lt;groupId&gt;com.mycompany&lt;/groupId&gt;
    &lt;artifactId&gt;MavenHelloServiceApi&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    *&lt;packaging&gt;bundle&lt;/packaging&gt;*
    &lt;name&gt;MavenHelloServiceApi OSGi Bundle&lt;/name&gt;

    &lt;properties&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.osgi&lt;/groupId&gt;
            &lt;artifactId&gt;org.osgi.core&lt;/artifactId&gt;
            &lt;version&gt;4.3.0&lt;/version&gt;
            &lt;scope&gt;provided&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;
                *&lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;*
                &lt;version&gt;2.3.7&lt;/version&gt;
                &lt;extensions&gt;true&lt;/extensions&gt;
                &lt;configuration&gt;
                    &lt;instructions&gt;
                        &lt;Bundle-Activator&gt;com.mycompany.mavenhelloserviceimpl.Activator&lt;/Bundle-Activator&gt;
                        &lt;Export-Package /&gt;
                    &lt;/instructions&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;

            ...
        &lt;/plugins&gt;
    &lt;/build&gt;

    ...
&lt;project&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Также можно увидеть, что при создании проекта пакета OSGi с использованием архетипа пакета Maven OSGi среда IDE добавляет артефакт  <code>org.osgi.core</code>  в качестве зависимости по умолчанию.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел проекта MavenHelloServiceApi в окне проектов и выберите пункт "Свойства".</p>
</li>
<li>
<p>Выберите в диалоговом окне "Свойства проекта" категорию "Исходные файлы".</p>
</li>
<li>
<p>Укажите для параметра <strong>Формат исходных/двоичных файлов</strong> значение 1.6 и подтвердите, что <strong>кодировка</strong> — UTF-8. Нажмите кнопку "ОК".</p>
</li>
<li>
<p>Щелкните правой кнопкой мыши узел "Исходные пакеты" в окне проектов и выберите пункт "Создать" &gt; "Интерфейс Java".</p>
</li>
<li>
<p>Введите в поле "Имя класса <strong>Hello</strong>.</p>
</li>
<li>
<p>Выберите пакет <strong>com.mycompany.mavenhelloserviceapi</strong>. Нажмите кнопку "Завершить".</p>
</li>
<li>
<p>Добавьте следующий метод  <code>sayHello</code>  к интерфейсу (выделено жирным) и сохраните изменения.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public interface Hello {
    *String sayHello(String name);*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел проекта в окне проектов и выберите "Сборка".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>После сборки проекта, если открыть окно "Файлы" и развернуть узел проекта, вы увидите, что файл  <code>MavenHelloServiceApi-1.0-SNAPSHOT.jar</code>  создан в папке  <code>target</code> .</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cdi-manifest.png" alt="cdi manifest">
</div>
<div class="title">Figure 3. просмотреть содержимое скомпилированного файла JAR в окне 'Файлы'</div>
</div>
<div class="paragraph">
<p>Подключаемый модуль  <code>maven-bundle-plugin</code>  обрабатывает создание файла  <code>MANIFEST.MF</code>  при сборке проекта. Если открыть файл  <code>MANIFEST.MF</code>  в скомпилированном файле JAR, можно увидеть, что модуль создал заголовок манифеста, который объявляет экспортные пакеты. Для OSGi все пакеты, которые нужно предоставить и сделать доступными для других пакетов, должны быть перечислены в элементе  <code>Export-Package</code>  в файле  <code>MANIFEST.MF</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Убедитесь, что файл  <code>MANIFEST.MF</code>  содержит элемент  <code>Export-Package</code>  (в приведенном ниже примере этот элемент выделен <strong>жирным шрифтом</strong>).</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Manifest-Version: 1.0
Bnd-LastModified: 1395049732676
Build-Jdk: 1.7.0_45
Built-By: nb
Bundle-Activator: com.mycompany.mavenhelloserviceapi.Activator
Bundle-ManifestVersion: 2
Bundle-Name: MavenHelloServiceApi OSGi Bundle
Bundle-SymbolicName: com.mycompany.MavenHelloServiceApi
Bundle-Version: 1.0.0.SNAPSHOT
Created-By: Apache Maven Bundle Plugin
*Export-Package: com.mycompany.mavenhelloserviceapi;uses:="org.osgi.frame
 work";version="1.0.0.SNAPSHOT"*
Import-Package: org.osgi.framework;version="[1.6,2)"
Tool: Bnd-1.50.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Контейнер OSGi считывает заголовок манифеста  <code>Export-Package</code>  для определения доступных извне классов пакета. Например, в этом примере предоставляются классы пакета  <code>com.mycompany.mavenhelloserviceapi</code> .</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Если в файле  <code>MANIFEST.MF</code>  отсутствует элемент  <code>Export-Package</code> , необходимо разрешить поведение по умолчанию для подключаемого модуля в окне 'Свойства проекта' и выполнить построение проекта повторно. В диалоговом окне 'Свойства проекта' выберите категорию 'Экспорт пакетов', затем выберите параметр <strong>Поведение подключаемого модуля maven-bundle-plugin по умолчанию</strong>. На панели 'Экспорт пакетов' в окне 'Свойства проекта' можно явно указать предоставляемые пакеты. Также можно указать пакеты непосредственно в файле  <code>pom.xml</code> .
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_создание_пакета_реализации_mavenhelloserviceimpl">Создание пакета реализации MavenHelloServiceImpl</h3>
<div class="paragraph">
<p>В этом упражнении будет создан MavenHelloServiceImpl в проекте POM.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите в меню "Файл" пункт "Новый проект", чтобы открыть мастер создания проекта.</p>
</li>
<li>
<p>Выберите пакет OSGi из категории Maven. Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Введите строку <strong>MavenHelloServiceImpl</strong> в качестве имени проекта.</p>
</li>
<li>
<p>Нажмите кнопку "Обзор" и выберите в качестве расположения проект POM <strong>MavenOSGiCDIProject</strong> (если оно еще не выбрано). Нажмите кнопку "Завершить".</p>
</li>
<li>
<p>Щелкните правой кнопкой мыши узел проекта в окне "Проекты" и выберите команду "Свойства".</p>
</li>
<li>
<p>Выберите в диалоговом окне "Свойства проекта" категорию "Исходные файлы".</p>
</li>
<li>
<p>Укажите для параметра <strong>Формат исходных/двоичных файлов</strong> значение 1.6 и подтвердите, что <strong>кодировка</strong> — UTF-8. Нажмите кнопку "ОК".</p>
</li>
<li>
<p>Щелкните правой кнопкой мыши узел "Исходные пакеты" в окне "Проекты" и выберите пункт "Создать" &gt; "Класс Java".</p>
</li>
<li>
<p>Введите значение <strong>HelloImpl</strong> в поле имени класса.</p>
</li>
<li>
<p>Выберите пункт <strong>com.mycompany.mavenhelloserviceimpl</strong> в поле "Пакет". Нажмите кнопку "Завершить".</p>
</li>
<li>
<p>Введите следующее (жирным шрифтом) и сохраните изменения.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class HelloImpl *implements Hello {

    public String sayHello(String name) {
        return "Hello " + name;*
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>При внедрении  <code>Hello</code>  среда IDE отобразит ошибку, которую необходимо разрешить добавлением проекта MavenHelloServiceApi в качестве зависимости.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел "Зависимости" в <strong>MavenHelloServiceImpl</strong> в окне проектов и выберите пункт "Добавить зависимость".</p>
</li>
<li>
<p>Щелкните вкладку "Открытые проекты" в диалоговом окне "Добавить библиотеку".</p>
</li>
<li>
<p>Выберите пакет OSGi MavenHelloServiceApi. Нажмите кнопку "Add".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cdi-add-dependency.png" alt="cdi add dependency">
</div>
<div class="title">Figure 4. Откройте вкладку &quot;Проекты&quot; в диалоговом окне &quot;Добавить библиотеку&quot;.</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши класс  <code>HelloImpl.java</code> , открытый в редакторе и выберите 'Исправить выражения импорта' (Alt-Shift-I; ⌘-Shift-I в Mac), чтобы добавить оператор импорта для  <code>com.mycompany.mavenhelloserviceapi.Hello</code> . Сохраните изменения.</p>
</li>
<li>
<p>Разверните пакет  <code>com.mycompany.mavenhelloserviceimpl</code>  и дважды щелкните  <code>Activator.java</code>  для открытия файла в редакторе.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cdi-activator.png" alt="cdi activator">
</div>
<div class="title">Figure 5. Класс 'Активатор' в окне 'Проекты'.</div>
</div>
<div class="paragraph">
<p>Среда IDE автоматически создала класс активатора пакета  <code>Activator.java</code>  в вашем проекте. Активатор пакета используется для управления жизненным циклом пакета. Класс активатора пакета объявляется в файле  <code>MANIFEST.MF</code>  пакета и создается при запуске пакета контейнером.</p>
</div>
<div class="paragraph">
<p>Класс активатора не является обязательным для пакета OSGi, но метод  <code>start()</code>  в классе активатора можно использовать, например, для инициализации служб или других нужных пакету ресурсов. В этом упражнении будут добавлены несколько строк кода в класс, который будет выводить сообщения в "Окно вывода". Это позволит определить, когда пакет запускается и останавливается.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Измените методы  <code>start()</code>  и  <code>stop()</code>  в классе активатора пакета, чтобы добавить следующие строки (выделено жирным).</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class Activator implements BundleActivator {

    public void start(BundleContext context) throws Exception {
        *System.out.println("HelloActivator::start");
        context.registerService(Hello.class.getName(), new HelloImpl(), null);
        System.out.println("HelloActivator::registration of Hello service successful");*
    }

    public void stop(BundleContext context) throws Exception {
        *context.ungetService(context.getServiceReference(Hello.class.getName()));
        System.out.println("HelloActivator stopped");*
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Класс активатора пакета импортирует  <code>org.osgi.framework.BundleActivator</code>  и  <code>org.osgi.framework.BundleContext</code> . По умолчанию создаваемый класс содержит два метода:  <code>start()</code>  и  <code>stop()</code> . Платформа OSGi вызывает методы  <code>start()</code>  и  <code>stop()</code>  для включения и отключения функциональных возможностей пакета. При запуске пакета, компонент службы пакета регистрируется в реестре служб OSGi. После регистрации пакета, остальные пакеты могут найти в реестре и использовать через контекст пакета активные службы.</p>
</div>
<div class="paragraph">
<p>Если посмотреть на файл POM для проекта, то можно увидеть элемент  <code>&lt;Bundle-Activator&gt;</code> , который указывает активатор пакета в элементе настройки для  <code>maven-bundle-plugin</code> .</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;
    &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;
    &lt;version&gt;2.3.7&lt;/version&gt;
    &lt;extensions&gt;true&lt;/extensions&gt;
      &lt;configuration&gt;
            &lt;instructions&gt;
                  *&lt;Bundle-Activator&gt;com.mycompany.mavenhelloserviceimpl.Activator&lt;/Bundle-Activator&gt;*
            &lt;/instructions&gt;
      &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>При сборке пакета подключаемый модуль создает заголовок манифеста в файле манифеста проекта в файле JAR и указывает класс активатора пакета. При развертывании пакета среда выполнения OSGi ищет в файле манифеста заголовок  <code>Bundle-Activator</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Исправьте операторы импорта в  <code>Activator.java</code>  для импорта  <code>com.mycompany.mavenhelloserviceapi.Hello</code> . Сохраните изменения.</p>
</li>
<li>
<p>Разверните узел "Зависимости" и убедитесь, что артефакт  <code>org.osgi.core</code>  добавлен в список зависимостей.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Удалите все предыдущие версии артефакта в узле 'Зависимости'. Для этого щелкните артефакт правой кнопкой мыши и выберите 'Удалить зависимость'. Узел "Зависимости" должен содержать только проект MavenHelloServiceApi и артефакт  <code>org.osgi.core</code> .
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cdi-implproject.png" alt="cdi implproject">
</div>
<div class="title">Figure 6. Класс 'Активатор' в окне 'Проекты'.</div>
</div>
</div>
<div class="sect2">
<h3 id="_сборка_и_развертывание_пакетов_osgi">Сборка и развертывание пакетов OSGi</h3>
<div class="paragraph">
<p>В этом упражнении пакеты OSGi будут собраны и развернуты на сервере GlassFish.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел MavenOSGiCDIProject в окне "Проекты" и выберите пункт "Очистить и собрать".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При сборке проекта среда IDE создает файлы JAR в папке  <code>target</code>  каждого из проектов, а также устанавливает снимок JAR в локальный репозиторий. В окне "Файлы" можно развернуть папку  <code>target</code>  для каждого из двух проектов пакетов чтобы увидеть два архива JAR ( <code>MavenHelloServiceApi-1.0-SNAPSHOT.jar</code>  и  <code>MavenHelloServiceImpl-1.0-SNAPSHOT.jar</code> ).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Запустите сервер GlassFish, если он еще не запущен.</p>
</li>
<li>
<p>Скопируйте  <code>MavenHelloServiceApi-1.0-SNAPSHOT.jar</code>  в каталог  <code>glassfish/domains/domain1/autodeploy/bundles/</code>  вашей установки GlassFish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Вы должны увидеть выходные данные, похожие на следующие данные журнала сервера GlassFish, в окне выходных данных.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">INFO: Started bundle: file:/glassfish-4.0/glassfish/domains/domain1/autodeploy/bundles/MavenHelloServiceApi-1.0-SNAPSHOT.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>Щелкните правой кнопкой мыши узел сервера GlassFish в окне "Службы" и выберите пункт "Просмотреть журнал сервера домена", если журнал сервера не виден в окне вывода.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Повторите действия по копированию файла  <code>MavenHelloServiceImpl-1.0-SNAPSHOT.jar</code>  в каталог  <code>autodeploy/bundles</code> .</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Теперь в журнале сервера GlassFish вы должны видеть примерно следующий результат.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">INFO: HelloActivator::start
INFO: HelloActivator::registration of Hello service successful
INFO: Started bundle: file:/glassfish-4.0/glassfish/domains/domain1/autodeploy/bundles/MavenHelloServiceImpl-1.0-SNAPSHOT.jar
INFO: Started bundle: file:/glassfish-4.0/glassfish/domains/domain1/autodeploy/bundles/MavenHelloServiceImpl-1.0-SNAPSHOT.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>В качестве альтернативы можно установить пакеты из консоли администрирования GlassFish OSGi. Дополнительные сведения приведены в разделе <a href="#Exercise_4">Установка и использование консоли администрирования OSGi</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_клиентского_веб_приложения">Создание клиентского веб-приложения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе показано создание веб-клиента Java EE, использующего службу пакета OSGi. Создается простой сервлет в веб-приложении, а затем внедряются объявленные службы. Перед созданием проекта в родительский проект POM добавляются некоторые элементы управления зависимостями.</p>
</div>
<div class="sect2">
<h3 id="_настройка_зависимостей_в_родительском_проекте_pom">Настройка зависимостей в родительском проекте POM</h3>
<div class="paragraph">
<p>В этом упражнении указываются элементы зависимости в родительском проекте POM. Кроме того, добавляется репозиторий для артефактов, который будет использоваться в проекте.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Разверните узел "Файлы проекта" в проекте <strong>MavenOSGiCDIProject</strong> в окне проектов и дважды щелкните файл  <code>pom.xml</code> , чтобы открыть файл в редакторе.</p>
</li>
<li>
<p>Измените родительский файл  <code>pom.xml</code> , добавив следующие элементы управления зависимостями (выделены жирным шрифтом). Сохраните изменения.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;com.mycompany&lt;/groupId&gt;
    &lt;artifactId&gt;MavenOSGiCDIProject&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;packaging&gt;pom&lt;/packaging&gt;
    &lt;properties&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
    &lt;/properties&gt;

    ...

    &lt;dependencyManagement&gt;
        &lt;dependencies&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.osgi&lt;/groupId&gt;
                &lt;artifactId&gt;org.osgi.core&lt;/artifactId&gt;
                &lt;version&gt;4.3.0&lt;/version&gt;
                &lt;scope&gt;provided&lt;/scope&gt;
            &lt;/dependency&gt;
            *&lt;dependency&gt;
                &lt;groupId&gt;org.osgi&lt;/groupId&gt;
                &lt;artifactId&gt;org.osgi.compendium&lt;/artifactId&gt;
                &lt;version&gt;4.2.0&lt;/version&gt;
                &lt;scope&gt;provided&lt;/scope&gt;
            &lt;/dependency&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.glassfish&lt;/groupId&gt;
                &lt;artifactId&gt;osgi-cdi-api&lt;/artifactId&gt;
                &lt;version&gt;3.1-b41&lt;/version&gt;
                &lt;type&gt;jar&lt;/type&gt;
                &lt;scope&gt;provided&lt;/scope&gt;
            &lt;/dependency&gt;*

        &lt;/dependencies&gt;
    &lt;/dependencyManagement&gt;

    ...
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте следующие элементы, чтобы добавить к POM репозиторий GlassFish. Сохраните изменения.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;project&gt;

    ...

    &lt;/dependencyManagement&gt;

    *&lt;repositories&gt;
        &lt;!-- glassfish nexus repo for glassfish dependencies --&gt;
        &lt;repository&gt;
            &lt;id&gt;glassfish-repo-archive&lt;/id&gt;
            &lt;name&gt;Nexus repository collection for Glassfish&lt;/name&gt;
            &lt;url&gt;http://maven.glassfish.org/content/groups/glassfish&lt;/url&gt;
            &lt;snapshots&gt;
                &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;
            &lt;/snapshots&gt;
        &lt;/repository&gt;
    &lt;/repositories&gt;*
    &lt;modules&gt;
        &lt;module&gt;MavenHelloServiceApi&lt;/module&gt;
        &lt;module&gt;MavenHelloServiceImpl&lt;/module&gt;
    &lt;/modules&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>После добавления репозитория GlassFish в POM при просмотре списка репозиториев в узле 'Репозитории Maven' в окне 'Службы' вы увидите, что среда IDE автоматически добавила узел для репозитория GlassFish. По умолчанию среда IDE отображает узел для локального репозитория Maven. Когда в открытом проекте указан репозиторий, среда IDE автоматически добавляет узел репозитория под узлом 'Репозитории Maven'.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cdi-maven-repositories.png" alt="cdi maven repositories">
</div>
<div class="title">Figure 7. Репозиторий GlassFish в окне 'Репозиториии Maven'</div>
</div>
<div class="paragraph">
<p>В этом упражнении добавлены дополнительные артефакты и версии артефактов, которые будут использоваться в проекте. Кроме того, добавлен репозиторий GlassFish, содержащий артефакты  <code>osgi-cdi-api</code> .</p>
</div>
</div>
<div class="sect2">
<h3 id="_создание_веб_приложения_mavenhellowebclient">Создание веб-приложения MavenHelloWebClient</h3>
<div class="paragraph">
<p>Сначала создайте обычное веб-приложение, затем преобразуйте проект в комплект OSGi (комплект веб-приложения (WAB)).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В главном меню выберите "Файл" &gt; "Новый проект".</p>
</li>
<li>
<p>Выберите в категории Maven пункт "Веб-приложение". Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Введите <strong>MavenHelloWebClient</strong> в поле имени проекта.</p>
</li>
<li>
<p>Нажмите кнопку "Обзор" и выберите проект POM <strong>MavenOSGiCDIProject</strong> в качестве местоположения (если он еще не выбран). Нажмите кнопку "Далее".</p>
</li>
<li>
<p>В качестве сервера выберите сервер GlassFish, а в качестве версии Java EE укажите Java EE 6 Web или Java EE 7 Web. Нажмите кнопку "Завершить".</p>
</li>
<li>
<p>Щелкните правой кнопкой мыши узел проекта и выберите в меню "Создать" пункт "Сервлет".</p>
</li>
<li>
<p>Введите <strong>HelloServlet</strong> в поле имени класса.</p>
</li>
<li>
<p>В списке 'Пакет' выберите  <code>com.mycompany.mavenhellowebclient</code> . Нажмите кнопку "Завершить".</p>
</li>
<li>
<p>Удалите созданные средой IDE методы по умолчанию ( <code>processRequest</code> ,  <code>doGet</code> ,  <code>doPost</code> ,  <code>getServletInfo</code> ).</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Потребуется расширить свертывание редактора для удаления методов HttpServlet.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Для внедрения службы введите следующий код (выделен жирным).</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@WebServlet(name = "HelloServlet", urlPatterns = {"/HelloServlet"})
public class HelloServlet extends HttpServlet {

    *@Inject
    @OSGiService(dynamic=true)
    Hello hello;*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте следующий метод  <code>doGet</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        PrintWriter out = response.getWriter();
        out.println(hello.sayHello("Duke"));
    }</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните узел проекта правой кнопкой мыши и выберите команду "Создать" &gt; "Другие".</p>
</li>
<li>
<p>Выберите <strong>beans.xml</strong> в категории "Подключение контекстов и зависимостей". Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Используйте имя файла по умолчанию ( <code>beans</code> ). Нажмите кнопку "Завершить".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Готово" мастер создает в веб-приложении файл  <code>beans.xml</code> . Среда CDI автоматически включена, если  <code>beans.xml</code>  является частью приложения.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В файле  <code>beans.xml</code>  измените значение параметра  <code>bean-discovery-mode</code>  на  <code>all</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">bean-discovery-mode="*all*"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Сохраните изменения и закройте файл.</p>
</div>
<div class="paragraph">
<p>Подробные сведения о различиях между значениями параметра  <code>bean-discovery-mode</code>  см. на следующих страницах:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://docs.oracle.com/javaee/7/tutorial/doc/cdi-adv001.htm">25.1 Упаковка приложений CDI</a> в учебном курсе по Java EE 7</p>
</li>
<li>
<p><a href="http://stackoverflow.com/questions/18107858/cdi-inject-fails-on-maven-embedded-glassfish-plugin-org-jboss-weld-exceptions">http://stackoverflow.com/questions/18107858/cdi-inject-fails-on-maven-embedded-glassfish-plugin-org-jboss-weld-exceptions</a></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел "Зависимости" в MavenHelloWebClient в окне проектов и выберите пункт "Добавить зависимость".</p>
</li>
<li>
<p>Выберите <strong>"Предоставленный"</strong> в качестве области действия.</p>
</li>
<li>
<p>Щелкните в диалоговом окне добавления библиотеки вкладку "Открытые проекты" и выберите *пакет MavenHelloServiceApi OSGi *. Нажмите кнопку "Add".</p>
</li>
<li>
<p>Снова щелкните правой кнопкой мыши узел "Зависимости" и выберите пункт "Добавить зависимость".</p>
</li>
<li>
<p>Щелкните вкладку "Управление зависимостями" в диалоговом окне "Добавить библиотеку" и выберите артефакт  <code>osgi-cdi-api</code> , указанный в родительском проекте POM. Нажмите кнопку "Add".</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cdi-add-dependency3.png" alt="cdi add dependency3">
</div>
<div class="title">Figure 8. Вкладка 'Управление зависимостями' в диалоговом окне 'Добавить библиотеку'</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши  <code>HelloServlet.java</code>  в редакторе и выберите 'Исправить выражения импорта' (Alt-Shift-I; ⌘-Shift-I в Mac), чтобы добавить  <code>com.mycompany.mavenhelloserviceapi.Hello</code> ,  <code>javax.inject.Inject</code>  и  <code>org.glassfish.osgicdi.OSGiService</code> . Сохраните изменения.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Может потребоваться добавление вручную операторов импорта для  <code>com.mycompany.mavenhelloserviceapi.Hello</code> , если среда IDE не добавит их автоматически.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши MavenOSGiCDIProject и выберите пункт "Очистка и сборка".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При сборке проекта в окне вывода должен появиться результат, похожий на следующий.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Reactor Summary:

MavenOSGiCDIProject ............................... SUCCESS [0.798s]
MavenHelloServiceApi OSGi Bundle .................. SUCCESS [7.580s]
MavenHelloServiceImpl OSGi Bundle ................. SUCCESS [1.142s]
MavenHelloWebClient ............................... SUCCESS [8.072s]
------------------------------------------------------------------------
BUILD SUCCESS</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Если при сборке проекта MavenOSGiCDIProject веб-приложение не собирается автоматически, потребуется собрать его вручную.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>В окне файлов разверните узел проекта для веб-приложения и подтвердите, что архив  <code>MavenHelloWebClient-1.0-SNAPSHOT.war</code>  был создан в целевом каталоге. Если вы развернете архив WAR веб-клиента и исследуете  <code>MANIFEST.MF</code> , то увидите, что в манифесте содержатся строки, похожие на следующие.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Built-By: nb
Build-Jdk: 1.7.0_45</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_сборка_веб_приложения_как_пакета_osgi">Сборка веб-приложения как пакета OSGi</h3>
<div class="paragraph">
<p>Для использования  <code>@OSGiService</code>  и получения зарегистрированных пакетов OSGi необходимо сделать веб-приложение пакетом, который может получать доступ к  <code>BundleContext</code> . Чтобы сделать архив WAR пакетом OSGi (пакет веб-приложения), можно добавить метаданные  <code>Web-ContextPath</code>  к файлу  <code>MANIFEST.MF</code>  в архиве WAR.  Для этого укажите элемент  <code>&lt;Web-ContextPath&gt;</code>  в инструкциях к модулю  <code>maven-bundle-plugin</code> , и созданный этим модулем манифест будет содержать этот элемент. Затем измените настройку  <code>maven-war-plugin</code> , чтобы дать указание модулю добавить манифест, созданный  <code>maven-bundle-plugin</code> , к архиву WAR.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В окне 'Проекты' разверните узел 'Файлы проекта' в MavenHelloWebClient и дажды щелкните  <code>pom.xml</code> , чтобы открыть файл в редакторе.</p>
</li>
<li>
<p>Добавьте следующую запись, чтобы добавить  <code>maven-bundle-plugin</code>  к POM.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;build&gt;
    &lt;plugins&gt;
        *&lt;plugin&gt;
             &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;
             &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;
             &lt;version&gt;2.2.0&lt;/version&gt;
             &lt;extensions&gt;true&lt;/extensions&gt;
             &lt;configuration&gt;
                 &lt;supportedProjectTypes&gt;
                     &lt;supportedProjectType&gt;ejb&lt;/supportedProjectType&gt;
                     &lt;supportedProjectType&gt;war&lt;/supportedProjectType&gt;
                     &lt;supportedProjectType&gt;bundle&lt;/supportedProjectType&gt;
                     &lt;supportedProjectType&gt;jar&lt;/supportedProjectType&gt;
                 &lt;/supportedProjectTypes&gt;
                 &lt;instructions&gt;
                     &lt;!-- Specify elements to add to MANIFEST.MF --&gt;
                     &lt;Web-ContextPath&gt;/mavenhellowebclient&lt;/Web-ContextPath&gt;
                     &lt;!-- By default, nothing is exported --&gt;
                     &lt;Export-Package&gt;!*.impl.*, *&lt;/Export-Package&gt;
                 &lt;/instructions&gt;
             &lt;/configuration&gt;
             &lt;executions&gt;
                 &lt;execution&gt;
                     &lt;id&gt;bundle-manifest&lt;/id&gt;
                     &lt;phase&gt;process-classes&lt;/phase&gt;
                     &lt;goals&gt;
                         &lt;goal&gt;manifest&lt;/goal&gt;
                     &lt;/goals&gt;
                 &lt;/execution&gt;
                 &lt;execution&gt;
                     &lt;id&gt;bundle-install&lt;/id&gt;
                     &lt;phase&gt;install&lt;/phase&gt;
                     &lt;goals&gt;
                         &lt;goal&gt;install&lt;/goal&gt;
                     &lt;/goals&gt;
                 &lt;/execution&gt;
             &lt;/executions&gt;
         &lt;/plugin&gt;*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Исправьте элементы настройки в  <code>maven-war-plugin</code> , чтобы добавить информацию о пакете к  <code>MANIFEST.MF</code> . Сохраните изменения.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml"> &lt;plugin&gt;
     &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
     &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
     &lt;version&gt;2.3&lt;/version&gt;
     &lt;configuration&gt;
         *&lt;archive&gt;
             &lt;!-- add bundle plugin generated manifest to the war --&gt;
             &lt;manifestFile&gt;
                 ${project.build.outputDirectory}/META-INF/MANIFEST.MF
             &lt;/manifestFile&gt;
             &lt;!-- For some reason, adding Bundle-ClassPath in maven-bundle-plugin
             confuses that plugin and it generates wrong Import-Package, etc.
             So, we generate it here.--&gt;
             &lt;manifestEntries&gt;
                 &lt;Bundle-ClassPath&gt;WEB-INF/classes/&lt;/Bundle-ClassPath&gt;
             &lt;/manifestEntries&gt;
         &lt;/archive&gt;*
         &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;
     &lt;/configuration&gt;
 &lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши узел проекта MavenHelloWebClient project в окне проектов и выберите пункт "Очистка и сборка".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Теперь, если развернуть архив WAR и открыть файл  <code>MANIFEST.MF</code>  в редакторе, видно, что  <code>MANIFEST.MF</code>  теперь содержит дополнительные сведения, в том числе запись  <code>Web-ContextPath: /mavenhellowebclient</code> , указанную в настройке  <code>maven-bundle-plugin</code>  и записях имени пакета.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Manifest-Version: 1.0
Export-Package: com.mycompany.mavenhellowebclient;uses:="com.mycompany
 .mavenhelloserviceapi,javax.servlet,org.glassfish.osgicdi,javax.injec
 t,javax.servlet.annotation,javax.servlet.http";version="1.0.0.SNAPSHO
 T"
Bundle-ClassPath: WEB-INF/classes/
Built-By: nb
Tool: Bnd-1.50.0
Bundle-Name: MavenHelloWebClient
Created-By: Apache Maven Bundle Plugin
*Web-ContextPath: /mavenhellowebclient*
Build-Jdk: 1.7.0_45
Bundle-Version: 1.0.0.SNAPSHOT
Bnd-LastModified: 1395053424008
Bundle-ManifestVersion: 2
Import-Package: com.mycompany.mavenhelloserviceapi;version="[1.0,2)",j
 avax.inject,javax.servlet,javax.servlet.annotation,javax.servlet.http
 ,org.glassfish.osgicdi;version="[1.0,2)"
Bundle-SymbolicName: com.mycompany.MavenHelloWebClient
Archiver-Version: Plexus Archiver</code></pre>
</div>
</div>
<div class="paragraph">
<p>Дополнительные сведения о сборке веб-приложений, таких как пакеты OSGi, приведены на следующих страницах.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://weblogs.java.net/blog/2009/06/04/osgi-enabled-web-applications-inglassfish">+ http://weblogs.java.net/blog/2009/06/04/osgi-enabled-web-applications-inglassfish+</a></p>
</li>
<li>
<p><a href="http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html">+ http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html+</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_развертывание_пакета_веб_приложения">Развертывание пакета веб-приложения</h3>
<div class="paragraph">
<p>В этом упражнении пакет веб-приложения будет скопирован в папку  <code>autodeploy/bundles</code>  в установке GlassFish.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Перейдите в каталог  <code>target</code> , содержащий  <code>MavenHelloWebClient-1.0-SNAPSHOT.war</code> .</p>
</li>
<li>
<p>Скопируйте  <code>MavenHelloWebClient-1.0-SNAPSHOT.war</code>  в папку  <code>autodeploy/bundles</code>  вашей установки GlassFish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При копировании архива WAR в каталог в журнале сервера GlassFish появится примерно такой результат.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">INFO: Started bundle: file:/glassfish-3.1.1/glassfish/domains/domain1/autodeploy/bundles/MavenHelloWebClient-1.0-SNAPSHOT.war
...
INFO: ---- Injection requested for framework service type interface com.mycompany.mavenhelloserviceapi.Hello and annotated with dynamic=true, serviceCriteria=
INFO: WEB0671: Loading application [com.mycompany.MavenHelloWebClient_1.0.0.SNAPSHOT] at [/mavenhellowebclient]
INFO: Registered ServletContext as a service with properties: {osgi.web.symbolicname=com.mycompany.MavenHelloWebClient, osgi.web.version=1.0.0.SNAPSHOT, osgi.web.contextpath=/mavenhellowebclient}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Теперь можно просмотреть сервлет в браузере, щелкнув следующую ссылку <a href="http://localhost:8080/mavenhellowebclient/HelloServlet">http://localhost:8080/mavenhellowebclient/HelloServlet</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_установка_и_использование_консоли_администрирования_osgi">Установка и использование консоли администрирования OSGi</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Можно использовать консоль администрирования OSGi GlassFish для установки, запуска и останова пакетов OSGi, развернутых на сервере. В этом упражнении будет включена консоль администрирования OSGi GlassFish, а затем просмотрен список зарегистрированных пакетов OSGi.</p>
</div>
<div class="paragraph">
<p>Выполните следующие действия по установке требуемых дополнительных надстроек GlassFish, чтобы включить консоль OSGi и просмотреть развернутые пакеты в консоли администрирования домена GlassFish.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Откройте консоль администрирования домена GlassFish в своем браузере.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Щелкните правой кнопкой мыши узел сервера GlassFish в окне "Службы" и выберите пункт "Просмотреть консоль администрирования домена".</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните средство обновления в левом столбце навигации.</p>
</li>
<li>
<p>Выберите  <code>glassfish-osgi-gui</code>  из списка допустимых надстроек.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Нажмите "Установить" и примите лицензионное соглашение.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cdi-glassfish-addons.png" alt="cdi glassfish addons">
</div>
<div class="title">Figure 9. Средство обновления консоли администратора GlassFish</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Перезапустите сервер приложений GlassFish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Важно!</strong> При работе с GlassFish Server 3.1.2.2 необходимо внести изменения в файл  <code>osgi.properties</code> , который находится в каталоге  <code><em>GLASSFISH-INSTALL</em>/glassfish/config/</code> , и задать для свойства  <code>org.osgi.framework.startlevel.beginning</code>  значение '2' ( <code>org.osgi.framework.startlevel.beginning=2</code> ).
Дополнительную информацию см. в сообщении форума:
<a href="http://www.java.net/forum/topic/glassfish/glassfish/cannot-start-web-console-glassfish-version-3122">+ Невозможно запустить веб-консоль на Glassfish версии 3.1.2.2+</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Снова откройте консоль администрирования и выберите пункт <strong>сервер (сервер администрирования)</strong> в левом столбце навигации.</p>
</li>
<li>
<p>Щелкните по вкладке консоли OSGi, чтобы просмотреть список развернутых пакетов OSGi.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cdi-glassfish-console.png" alt="cdi glassfish console">
</div>
<div class="title">Figure 10. Вкладка 'Управление зависимостями' в диалоговом окне 'Добавить библиотеку'</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
На экране может отобразиться запрос на ввод имени пользователя и пароля для просмотра списка пакетов OSGi. Если на вкладке "Консоль OSGi" не отображается список пакетов, убедитесь, что не скрыто диалоговое окно авторизации. По умолчанию для GlassFish 4 используется имя пользователя  <code>admin</code>  (если сервер был установлен вместе с IDE). Пароль по умолчанию пуст.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Можно прокрутить список ниже, чтобы просмотреть состояние зарегистрированных пакетов OSGi, запускать и останавливать отдельные пакеты. Если упорядочить список по идентификатору (от высшего к низшему), на первых позициях в списке отобразятся три развернутых пакета.</p>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Using%20CDI%20to%20Inject%20OSGi%20Bundles%20as%20Services">Отправить отзыв по этому учебному курсу</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_дополнительные_сведения">Дополнительные сведения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information about using IDE NetBeans and Maven to develop OSGi bundles, see the following resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://wiki.netbeans.org/OSGiAndNetBeans">OSGi и NetBeans на wiki.netbeans.org</a></p>
</li>
<li>
<p><a href="http://wiki.netbeans.org/MavenBestPractices">Испытанные приемы для Apache Maven в IDE NetBeans</a></p>
</li>
<li>
<p><a href="https://blogs.oracle.com/arungupta/entry/totd_125_creating_an_osgi">TOTD #125: Создание пакетов OSGi с помощью NetBeans и развертывание в GlassFish</a></p>
</li>
<li>
<p><a href="../../trails/java-ee.html">Учебная карта по Java EE и Java Web</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To send comments and suggestions, get support, and keep informed on the latest developments on the IDE NetBeans Java EE development features, <a href="../../../community/lists/top.html">join the nbj2ee mailing list</a>.</p>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/javaee/maven-osgiservice-cdi_ru.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
