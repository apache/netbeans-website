
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Com començar amb aplicacions Java EE 6</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Com començar amb aplicacions Java EE 6 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Com començar amb aplicacions Java EE 6">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Com començar amb aplicacions Java EE 6</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/javaee/javaee-gettingstarted_ca.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_creant_el_projecte_daplicació_web">Creant el projecte d&#8217;aplicació Web</a></li>
<li><a href="#_creant_la_classe_dentitat_i_la_part_frontal_de_la_sessió">Creant la classe d&#8217;entitat i la part frontal de la sessió</a>
<ul class="sectlevel2">
<li><a href="#_creant_la_classe_dentitat">Creant la classe d&#8217;entitat</a></li>
<li><a href="#_creant_la_part_frontal_de_la_sessió">Creant la part frontal de la sessió</a></li>
</ul>
</li>
<li><a href="#_creant_el_bean_gestionat_jsf_i_les_pàgines_jsf">Creant el Bean gestionat JSF i les pàgines JSF</a>
<ul class="sectlevel2">
<li><a href="#_creant_un_bean_gestionat">Creant un Bean gestionat</a></li>
<li><a href="#_modificant_la_pàgina_díndex">Modificant la pàgina d&#8217;Índex</a></li>
<li><a href="#_creant_la_pàgina_de_resultats">Creant la pàgina de resultats</a></li>
</ul>
</li>
<li><a href="#_executant_laplicació">Executant l&#8217;aplicació</a></li>
<li><a href="#_vegeu_també">Vegeu també</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>aquest document proporciona un breu introducció a algunes de les característiques introduïdes com a part de l&#8217;especificació de l&#8217;edició empresarial de Java 6 (Java EE 6). Per il·lustrar les noves característiques, aquest tutoria demostrarà com crear una aplicació web senzilla de Java EE 6 web que conté un bean de sessió sense-estat EJB 3.1 en la part frontal d&#8217;una classe d&#8217;entitat. Utilitzareu l&#8217;assistent al IDE per generar una classe d&#8217;entitat i un bean de sessió. El codi generat per l&#8217;assistent utilitza consultes que estan definides en l&#8217;API Criteria que forma part de JPA 2.0 i que està contemplada en l&#8217;especificació de Java EE 6. Després creareu un bean gestionat amb nom que accedeixi a la part frontal de la sessió i al disseny de presentació que utilitza el Framework de visualització Facelets com s&#8217;especifica en JSF 2.0.</p>
</div>
<div class="paragraph">
<p>Aquesta guia d&#8217;aprenentatge està basada en l&#8217;entrada del blog <a href="http://www.adam-bien.com/roller/abien/entry/simplest_possible_jsf_2_ejb">+ Simplest Possible JSF 2 / EJB 3.1 / JPA Component - With WAR Deployment+</a> per Adam Bien. Podeu trobar exemples addicionals de Java EE al projecte kenai d&#8217;Adam Bien <a href="http://kenai.com/projects/javaee-patterns">+ Java EE Patterns and Best Practices+</a> i al seu llibre "Real World Java EE Patterns - Rethinking Best Practices", disponible a <a href="http://press.adam-bien.com">http://press.adam-bien.com</a>.</p>
</div>
<div class="paragraph">
<p>Aquest document utilitza el llançament de l&#8217;IDE NetBeans 6.8.</p>
</div>
<div class="paragraph">
<p><strong>Exercicis de la guia d&#8217;aprenentatge</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Exercise_1">Creant el projecte d&#8217;aplicació Web</a></p>
</li>
<li>
<p><a href="#Exercise_2">Creant la classe d&#8217;entitat i la part frontal de la sessió</a></p>
</li>
<li>
<p><a href="#Exercise_2a">Creant la classes d&#8217;entitat</a></p>
</li>
<li>
<p><a href="#Exercise_2b">Creant la part frontal de la sessió</a></p>
</li>
<li>
<p><a href="#Exercise_3">Creant el Bean gestionat JSF i les pàgines JSF</a></p>
</li>
<li>
<p><a href="#Exercise_3a">Creant el Bean gestionat</a></p>
</li>
<li>
<p><a href="#Exercise_3b">Modificant la pàgina d&#8217;índex</a></p>
</li>
<li>
<p><a href="#Exercise_3c">Creant la pàgina de resultats</a></p>
</li>
<li>
<p><a href="#Exercise_4">Executant el projecte</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Per seguir aquesta guia d&#8217;aprenentatge, necessiteu el següent programari i recursos.</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Programari o Recurs</th>
<th class="tableblock halign-left valign-top">Versió necessària</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">IDE NetBeans</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6.8, versió Java</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Kit de desenvolupament de Kava (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">versió 6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GlassFish Server Open Source Edition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.0.1</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
GlassFish V3 necessita el kit de desenvolupament de Java (JDK) 6.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Prerequisits</strong></p>
</div>
<div class="paragraph">
<p>Aquest document assumeix que teniu un coneixement bàsic de, o experiència de programació amb, les següent tecnologies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Programació Java</p>
</li>
<li>
<p>IDE NetBeans</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creant_el_projecte_daplicació_web">Creant el projecte d&#8217;aplicació Web</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En aquest exercici creareu una aplicació web senzilla. Quant creeu l&#8217;aplicació web especificareu el servidor d&#8217;aplicacions GlassFish v3 com a objectiu del contenidor Java EE. El servidor d&#8217;aplicacions GlassFish v3 és compatible amb Java EE i inclou les biblioteques JSF 2.0 que es necessiten en aquesta aplicació.</p>
</div>
<div class="paragraph">
<p>En l&#8217;assistent de nou projecte seleccionareu Java EE 6 web com la versió de Java EE. Java EE 6 Web és un perfil Java EE 6 lleuger que conté un subconjunt de la plataforma sencera de Java EE 6. El perfil Java EE 6 Web està dissenyat per a aplicacions web que no necessiten tecnologies avançades de Java EE 6 com el suport per a interfícies remotes, tota l&#8217;especificació de EJB 3.1 i l&#8217;API de servei de missatges Java (JMS, de l&#8217;anglès Java Message Service).</p>
</div>
<div class="paragraph">
<p>El perfil Web suporta el processament de la transacció i la gestió de persistència que són utilitzats de freqüentment en aplicacions web empresarials. Podeu utilitzar el perfil Java EE Web per aplicacions web que utilitzen beans de sessió amb interfície local o sense interfície. El perfil Java EE sencer es requerit si l&#8217;aplicació utilitza una interfície remota.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Seleccioneu Fitxer &gt; Nou projecte (Ctrl-Maj-N) des del menú principal.</p>
</li>
<li>
<p>Seleccioneu Aplicació Web des de la categoria Java Web i cliqueu a Següent.</p>
</li>
<li>
<p>Escriviu <strong>SimpleEE6App</strong> pel nom del projecte i establiu una localització per al projecte.</p>
</li>
<li>
<p>Desmarqueu l&#8217;opció Utilitzar un directori dedicat per emmagatzemar biblioteques, si estès seleccionat. Cliqueu a Següent.
(Per aquesta guia d&#8217;aprenentatge no hi ha cap raó de pes per copiar les biblioteques del projecte a una carpeta dedicada perquè no necessitareu compartir les biblioteques amb altres usuaris o projectes.)</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Establiu el servidor a GlassFish v3 i establiu la versió de Java EE a Java EE 6 web. Cliqueu a Següent.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../images_www/articles/71/javaee/gettingstarted/newappwizard.png" alt="newappwizard">
</div>
<div class="title">Figure 1. panell servidor i preferències en l&#8217;assistent de nou projecte</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Seleccioneu JavaServer Faces en el panell de Frameworks. Cliqueu a Finalitzar</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Per defecte, si esteu desenvolupant una aplicació web Java EE 6 i desplegant a GlassFish V3, l&#8217;IDE seleccionarà la biblioteca JSF2.0. La biblioteca JSF 2.0 us permet utilitzar Facelets com a llenguatge de la pàgina i també proporciona suport per a JSF 1.2 i JSP.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../images_www/articles/71/javaee/gettingstarted/newappwizard2.png" alt="newappwizard2">
</div>
<div class="title">Figure 2. panell Frameworks en l&#8217;assistent de nou projecte</div>
</div>
<div class="paragraph">
<p>Quant cliqueu a Finalitzar, l&#8217;IDE crea el projecte i l&#8217;obre en la finestra de projectes. El IDE crea automàticament la pàgina JSF  <code>index.xhtml</code>  i l&#8217;obre en l&#8217;editor.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creant_la_classe_dentitat_i_la_part_frontal_de_la_sessió">Creant la classe d&#8217;entitat i la part frontal de la sessió</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En aquesta secció creareu una classe d&#8217;entitat i la part frontal de la sessió per a la classe d&#8217;entitat. Una classe d&#8217;entitat és un objecte Java antic i planer (POJO, de l&#8217;anglès Plain Old Java Object), una classe Java senzilla que està identificada com una entitat mitjançant l&#8217;anotació  <code>@Entity</code> . Començant amb l&#8217;especificació Java EE 5, podeu utilitzar les classes d&#8217;entitat com a objectes persistents per a representar taules en una base de dades.</p>
</div>
<div class="paragraph">
<p>La part frontal de la sessió per la classe d&#8217;entitat en aquesta aplicació és un bean de sessió sense estat. L&#8217;arquitectura JavaBean Empresaria (EJB, de l&#8217;anglès Enterprise JavaBean) 3.1 introduïda com a part de l&#8217;especificació de Java EE 6 us permet crear beans de sessió sense les interfícies de negoci que eren necessàries en EJB 3.0. L&#8217;especificació Java EE 6 també us permet empaquetar components EJB directament en un fitxer WAR. Aquest simplifica el desenvolupament d&#8217;aplicacions web petites tot eliminant la necessitat de crear mòduls EJB separats que estan empaquetats com a arxius JAR en un arxiu EAR. Tanmateix, per a aplicacions empresarials grans que estan distribuïdes al voltant de màquines diferents, encara voldreu continuar creant arxius EAR per separar la vostra lògica de negoci de la capa de presentació.</p>
</div>
<div class="paragraph">
<p>Per a més informació quant a les classes d&#8217;entitat i persistència, vegeu el capítol <strong>Introducció a l&#8217;API Persistència de Java</strong> en la <a href="http://java.sun.com/javaee/6/docs/tutorial/doc/index.html">Guia d'aprenentatge Java EE 6, Volum I</a>.</p>
</div>
<div class="paragraph">
<p>Per a més informació quant als beans de sessió, vegeu el capítol <strong>Beans Empresarials</strong> en la <a href="http://java.sun.com/javaee/6/docs/tutorial/doc/index.html">Guia d'aprenentatge Java EE 6, Volum I</a>.</p>
</div>
<div class="sect2">
<h3 id="_creant_la_classe_dentitat">Creant la classe d&#8217;entitat</h3>
<div class="paragraph">
<p>En aquest exercici utilitzareu l&#8217;assistent Nova classe d&#8217;entitat, per crear una senzilla classe d&#8217;entitat persistent. També utilitzareu l&#8217;assistent per crear una unitat de persistència que defineixi la font de dades i el gestor d&#8217;entitat utilitzats en l&#8217;aplicació. Afegireu un camp en la classe per representar les dades en la vostra taula i generar els mètodes getter i setter pel nou camp.</p>
</div>
<div class="paragraph">
<p>Una classe d&#8217;entitat ha de tenir una clau primària. Quant creeu la classe d&#8217;entitat mitjançant l&#8217;assistent, l&#8217;IDE per defecte genera el camp  <code>id</code>  i anota el camp amb l&#8217;anotació  <code>@Id</code>  per declarar el camp com a clau primària. El IDE també afegeix l&#8217;anotació  <code>@GeneratedValue</code>  i especifica l&#8217;estratègia de generació de clau pel camp id primari.</p>
</div>
<div class="paragraph">
<p>Per crear la classe d&#8217;entitat. realitzeu els següent passos.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>En el node del projecte amb un clic dret de ratolí, seleccioneu Nou &gt; Altres.</p>
</li>
<li>
<p>Seleccioneu la classe d&#8217;entitat des de la categoria Persistència. Cliqueu a Següent.</p>
</li>
<li>
<p>Escriviu <strong>Message</strong> pel nom de la classe.</p>
</li>
<li>
<p>Escriviu <strong>entities</strong> pel paquet.</p>
</li>
<li>
<p>Cliqueu al botó Crear Unitat Persistència.</p>
</li>
<li>
<p>Seleccioneu la font de dades (per exemple, seleccioneu  <code>jdbc/sample</code>  si voleu utilitzar JavaDB).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La font de dades per  <code>jdbc/sample</code>  està integrada amb l&#8217;IDE quant instal·leu l&#8217;IDE i GlassFish, però podeu especificar una font de dades diferent si voleu utilitzar una base de dades diferent.</p>
</div>
<div class="paragraph">
<p>Podeu mantindre les altres opcions predeterminades (nom unitat de persistència, proveïdor de persistència EclipseLink). Comproveu que la unitat de persistència estigui utilitzant l&#8217;API de Transacció Java i que l&#8217;estratègia de generació de taula estigui establerta a Crear, ja que les tales basades en les vostres classes d&#8217;entitat són creades quant l&#8217;aplicació és desplegada.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Cliqueu a Crear, en l&#8217;assistent Nova unitat de persistència.</p>
</li>
<li>
<p>Cliqueu a Finalitzar el l&#8217;assistent de la nova classe d&#8217;entitat.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Quant cliqueu a Finalitzar, l&#8217;IDE crea la classe d&#8217;entitat i obre la classe en l&#8217;editor. Podeu veure que l&#8217;IDE ha generat el camp id  <code>private Long id;</code>  i ha anotat el camp amb  <code>@Id</code>  i  <code>@GeneratedValue(strategy = GenerationType.AUTO)</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>En l&#8217;editor, afegiu el camp  <code>message</code>  (en negreta) després del camp  <code>id</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private Long id;
*private String message;*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Cliqueu amb el botó dret a l&#8217;editor i seleccioneu Inserir codi (Ctrl+I) i després seleccioneu Getter i Setter.</p>
</li>
<li>
<p>En el quadre de diàleg Generar Generate Getters i Setters, seleccioneu el camp  <code>message</code>  i cliqueu a Generar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>El IDE genera els mètodes getter i setter pel camp  <code>message</code> .</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/getters-dialog.png" alt="getters dialog">
</div>
<div class="title">Figure 3. Assistent crear unitat de persistència</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Deseu els vostres canvis.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La classe d&#8217;entitat representa una taula en la base de dades. Quant executeu aquesta aplicació, es crearà automàticament una taula Message a la base de dades. La taula contindrà les columnes  <code>id</code>  i  <code>message</code> .</p>
</div>
<div class="paragraph">
<p>Si observeu la unitat de persistència en l&#8217;editor XML, podeu veure que l&#8217;aplicació utilitzarà l&#8217;API de transacció Java (JTA, de l&#8217;anglès Java Transaction API) ( <code>transaction-type="JTA"</code> ). Això especifica que la responsabilitat del cicle de vida de les entitats en el content de persistència està assignat al contenidor. Això resulta un menor codi perquè el cicle de vida de l&#8217;entitat està gestionat pel contenidor no per l&#8217;aplicació. Per a més informació quant a la utilització de JTA per gestionar transaccions, vegeu la documentació de l&#8217;<a href="http://java.sun.com/javaee/technologies/jta/index.jsp">API transacció de Java</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creant_la_part_frontal_de_la_sessió">Creant la part frontal de la sessió</h3>
<div class="paragraph">
<p>En aquest execici utilitzareu un assistent per a la part frontal d&#8217;una sessió sense estat per a l&#8217;entitat Message. Les especificacions EJB 3.1. fan constar que les interfícies de negoci pels beans de sessió ara són opcionals. En aquesta aplicació on el client que accedeix al bean és un client local, teniu l&#8217;opció d&#8217;utilitzar una interfície local o una vista sense interfície per exposar el bean.</p>
</div>
<div class="paragraph">
<p>Per crear el bean de sessió, realitzeu els següent passos.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>En el node del projecte cliqueu amb el boto dret i seleccioneu Nou &gt; Altres.</p>
</li>
<li>
<p>Seleccioneu Beans de sessió per a classes d&#8217;entitat, des de la categoria Java EE. Cliqueu a Següent.</p>
</li>
<li>
<p>Seleccioneu l&#8217;entitat  <code>Message</code>  i cliqueu Afegir. Cliqueu a Següent.</p>
</li>
<li>
<p>Escriviu <strong>boundary</strong> pel paquet. Cliqueu a Finalitzar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Fixeu-vos que no heu necessitat crear una interfície de negoci per al bean de sessió. En canvi, en aquesta aplicació el bean serà exposat a un bean gestionat localment mitjançant una vista sense interfície.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/sessionwizard.png" alt="sessionwizard">
</div>
<div class="title">Figure 4. Assistent Beans de sessió per a classes d&#8217;entitat</div>
</div>
<div class="paragraph">
<p>Quant cliqueu a Finalitzar, la classe de la part frontal de sessió  <code>MessageFacade.java</code>  és creada i s&#8217;obre en l&#8217;editor de codi font. La classe bean conté la lògica de negoci i gestiona l&#8217;EntityManager. Com podeu veure en el codi generat, s&#8217;utilitza l&#8217;anotació  <code>@Stateless</code>  per declarar la classe com un component bean de sessió sense estat.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Stateless
public class MessageFacade {
    @PersistenceContext(unitName = "SimpleEE6AppPU")
    private EntityManager em;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quant creeu la part frontal per l&#8217;entitat mitjançant l&#8217;assistent, per defecte el IDE afegeix l&#8217;anotació  <code>PersistenceContext</code>  ( <code>@PersistenceContext(unitName = "SimpleEE6AppPU")</code> ) per injectar el recurs de gestió d&#8217;entitat dins del component bean de sessió, i per especificar el nom de la unitat de persistència. En aquest exemple el nom de la unitat de persistència està declarat explícitament, no obstant el nom és opcional si l&#8217;aplicació té únicament una unitat de persistència.</p>
</div>
<div class="paragraph">
<p>El IDE també genera els mètodes en la part frontal per crear, editar, treure i trobar entitats. L&#8217;API EntityManager defineix els mètodes que s&#8217;utilitzen per interactuar amb el context de persistència. Podeu veure que l&#8217;IDE genera alguns mètodes de consulta predeterminats utilitzant freqüentment que poden ser utilitzats per a trobar objectes d&#8217;entitat.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public List&lt;Message&gt; findAll() {
    CriteriaQuery cq = em.getCriteriaBuilder().createQuery();
    cq.select(cq.from(Message.class));
    return em.createQuery(cq).getResultList();
}

public List&lt;Message&gt; findRange(int[] range) {
    CriteriaQuery cq = em.getCriteriaBuilder().createQuery();
    cq.select(cq.from(Message.class));
    Query q = em.createQuery(cq);
    q.setMaxResults(range[1] - range[0]);
    q.setFirstResult(range[0]);
    return q.getResultList();
}

public int count() {
    CriteriaQuery cq = em.getCriteriaBuilder().createQuery();
    Root&lt;Message&gt; rt = cq.from(Message.class);
    cq.select(em.getCriteriaBuilder().count(rt));
    Query q = em.createQuery(cq);
    return ((Long) q.getSingleResult()).intValue();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Els mètodes  <code>findAll</code> ,  <code>findRange</code>  i  <code>count</code> , utilitzen mètodes definits en l&#8217;API Criteria per a la creació de consultes. L&#8217;API Criteria API forma part de l&#8217;especificació JPA 2.0 que estàa inclosa en l&#8217;especificació Java EE 6.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creant_el_bean_gestionat_jsf_i_les_pàgines_jsf">Creant el Bean gestionat JSF i les pàgines JSF</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En aquesta secció creareu la capa de presentació per l&#8217;aplicació utilitzant JavaServer Faces (JSF) 2.0 i el bean gestionat que dona suport al bean que és utilitzat per les pàgines JSF. L&#8217;especificació JSF 2.0 afegeix suport per a Facelets com la tecnologia de visualització preferida per a les aplicacions basades amb JSF. Començant amb JSF 2.0, també podeu utilitzar l&#8217;anotació  <code>@ManagedBean</code>  al vostre codi font per declarar una classe de bean gestionat. Ja no necessiteu afegir més entitats en el fitxer  <code>faces-config.xml</code>  per declarar els bans gestionats JSF. Podeu utilitzar noms en pàgines JSF per accedir als mètodes en el bean gestionat.</p>
</div>
<div class="paragraph">
<p>Per a més informació quan al suport de l&#8217;IDE per les especificacions de JavaServer Faces 2.0, vegeu <a href="../web/jsf20-support.html">Suport JSF 2.0 en l'IDE NetBeans 6.8</a>.</p>
</div>
<div class="paragraph">
<p>Per a més informació quant a l&#8217;especificació de JavaServer Faces 2.0, vegeu el capítol de la tecnologia JavaServer Faces en la <a href="http://java.sun.com/javaee/6/docs/tutorial/doc/index.html">Guia d'aprenentatge Java EE 6, Volum I</a>.</p>
</div>
<div class="sect2">
<h3 id="_creant_un_bean_gestionat">Creant un Bean gestionat</h3>
<div class="paragraph">
<p>En aquest exercici creareu un senzill bean gestionat JSF utilitzat per accedir a la part frontal de la sessió L&#8217;especificació JSF 2.0 que forma part de Java EE 6 us permet utilitzar anotacions en la classe bean per identificar la classe com un bean gestionat JSF, per especificar l&#8217;àmbit i el nom pel bean.</p>
</div>
<div class="paragraph">
<p>Per crear un bean gestionat, realitzeu els següents passos.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Cliqueu amb el botó dret damunt del node del projecte i seleccioneu Nou &gt; Altres.</p>
</li>
<li>
<p>Seleccioneu Bean gestionat JSF des de la categoria JavaServer Faces. Cliqueu a Següent.</p>
</li>
<li>
<p>Escriviu <strong>MessageView</strong> pel nom de la classe.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Utilitzareu el nom pel bean gestionat  <code>MessageView</code>  com el valor pel  <code>inputText</code>  i  <code>commandButton</code>  en la pàgina JSF  <code>index.xhtml</code>  quant crideu els mètodes en el bean.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Escriviu <strong>my.presentation</strong> pel paquet.</p>
</li>
<li>
<p>Escriviu <strong>MessageView</strong> pel nom que serà utilitzat pel bean gestionat.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Quan creeu el bean gestionat mitjançant l&#8217;assistent, l&#8217;IDE per defecte assignarà un nom al bean basat amb el nom de la classe bean.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Establir l&#8217;Àmbit a Petició. Cliqueu a Finalitzar</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../images_www/articles/71/javaee/gettingstarted/newjsfbean.png" alt="newjsfbean">
</div>
<div class="title">Figure 5. Nou assistent Bean gestionat per JSF</div>
</div>
<div class="paragraph">
<p>Quan cliqueu a Finalitzar, l&#8217;IDE crea la classe bean i l&#8217;obre en l&#8217;editor. En la finestra de projectes veureu els següent fitxers.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projectswindow.png" alt="projectswindow">
</div>
<div class="title">Figure 6. Finestra de projecte mostrant l&#8217;estructura de fitxers</div>
</div>
<div class="paragraph">
<p>En l&#8217;editor, podeu veure que l&#8217;IDE ha afegit les anotacions  <code>@ManagedBean</code>  i  <code>@RequestScoped</code>  i el nom del bean.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@ManagedBean(name="MessageView")
@RequestScoped
public class MessageView {

    /** Crea una nova instància de MessageView */
    public MessageView() {
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ara utilitzareu la injecció de dependència per obtenir una referència al bean de sessió MessageFacade amb l&#8217;anotació  <code>@EJB</code> . També podreu cridar els mètodes  <code>findAll</code>  i  <code>create</code>  que estan exposats en la part frontal de la sessió. L&#8217;auto-completat de codi pot ajudar-vos quant escriviu els mètodes.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Cliqueu amb el botó dret en l&#8217;editor i seleccioneu Inserir codi (Ctrl+I) per obrir el menú emergent.</p>
</li>
<li>
<p>Seleccioneu Cridar Bean empresarial, en el menú emergent.</p>
</li>
<li>
<p>Seleccioneu MessageFacade en el quadre de diàleg Cridar Bean empresarial. Cliqueu a Acceptar.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/callbean.png" alt="callbean">
</div>
<div class="title">Figure 7. Diàleg Cridar Bean empresarial,</div>
</div>
<div class="paragraph">
<p>Quan cliqueu a Acceptar, l&#8217;IDE afegeix el següent codi (en negreta) per injectar el bean.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class MessageView {

    /** Crea una nova instància de MessageView */
    public MessageView() {
    }

    *// Injecta el bean de sessió MessageFacade utilitzant l'anotació @EJB
    @EJB
    MessageFacade messageFacade;*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Afegiu el següent codi a la classe.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    // Crea un nou camp
    private Message message;

    // Crea una nova instància de Message
    public MessageView() {
       this.message = new Message();
    }

    // Crida a getMessage per recuperar un missatge
    public Message getMessage() {
       return message;
    }

    // Retorna el nombre total de missatges
    public int getNumberOfMessages(){
       return messageFacade.findAll().size();
    }

    // Desa el missatge i després retorna la cadena de text "theend"
    public String postMessage(){
       this.messageFacade.create(message);
       return "theend";
    }</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Corregiu les vostres importacions (Ctrl-Maj-I) i deseu els canvis.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Utilitzeu l&#8217;auto-completat de codi per a ajudar-vos quant escriviu el vostre codi.</p>
</div>
<div class="paragraph">
<p>Observeu que el mètode  <code>postMessage</code>  retorna la cadena de text "theend". L&#8217;especificació de JSF 2.0 permet la utilització de regles de navegació implícita en l&#8217;aplicació que utilitza tecnologia Facelets. En aquesta aplicació, cap regla de navegació està configurada en  <code>faces-config.xml</code> . En lloc seu, l&#8217;encarregat de navegació intentarà localitzar una pàgina adequada en l&#8217;aplicació. En aquest cas, l&#8217;encarregat de la navegació intentarà localitzar una pàgina anomenada  <code>theend.xhtml</code>  qual el mètode  <code>postMessage</code>  sigui invocat.</p>
</div>
</div>
<div class="sect2">
<h3 id="_modificant_la_pàgina_díndex">Modificant la pàgina d&#8217;Índex</h3>
<div class="paragraph">
<p>en aquest exercici fareu alguns canvis senzill a la pàgina  <code>index.xhtml</code>  per afegir alguns components d&#8217;interfície gràfica (UI). Afegireu un formulari amb un camp de text d&#8217;entada i un botó.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Obriu  <code>index.xhtml</code>  en l&#8217;editor.</p>
</li>
<li>
<p>Modifiqueu el fitxer per afegir el següent formulari senzill entre les etiquetes  <code>&lt;h:body&gt;</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;h:body&gt;
    &lt;f:view&gt;
        &lt;h:form&gt;
            &lt;h:outputLabel value="Missatge:"/&gt;&lt;h:inputText value="#{MessageView.message.message}"/&gt;
            &lt;h:commandButton action="#{MessageView.postMessage}" value="Enviar missatge"/&gt;
        &lt;/h:form&gt;
    &lt;/f:view&gt;
&lt;/h:body&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;auto-completat de codi JSF pot ajudar-vos quant escriviu el codi.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/jsfcodecompletion1.png" alt="jsfcodecompletion1">
</div>
<div class="title">Figure 8. Auto-completat de codi en l&#8217;editor de codi</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Deseu els vostres canvis.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Els components  <code>inputText</code>  i  <code>commandButton</code>  invocaran els mètodes en el bean gestionat JSF anomenat  <code>MessageView</code> . El mètode  <code>postMessage</code>  retornarà "theend", i l&#8217;encarregat de navegació cercarà una pàgina anomenada  <code>theend.xhtml</code> .</p>
</div>
</div>
<div class="sect2">
<h3 id="_creant_la_pàgina_de_resultats">Creant la pàgina de resultats</h3>
<div class="paragraph">
<p>En aquest exercici creareu la pàgina JSF  <code>theend.xhtml</code> . La pàgina es mostrarà quant l&#8217;usuari cliqui al botó Enviar missatge, en  <code>index.xhtml</code>  i invoqui el mètode  <code>postMessage</code>  en el bean gestionat JSF.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Cliqueu amb el botó dret al node del projecte i seleccioneu Nou &gt; Altres.</p>
</li>
<li>
<p>Seleccionau Pàgina JSF, des de a categoria JavaServer. Cliqueu a Següent.</p>
</li>
<li>
<p>Escriviu <strong>theend</strong> com a nom de fitxer.</p>
</li>
<li>
<p>Assegureu-vos que estigui marcada l&#8217;opció Facelets. Cliqueu a Finalitzar</p>
</li>
<li>
<p>Modifiqueu el fitxer escrivint el següent entre les etiquetes &lt;h:body&gt;.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;h:body&gt;
    &lt;h:outputLabel value="Gràcies! Hi han "/&gt;
    &lt;h:outputText value="#{MessageView.numberOfMessages}"/&gt; missatges!
&lt;/h:body&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quant comenceu a escriure, el IDE afegirà automàticament la definició de la biblioteca d&#8217;etiquetes  <code>xmlns:h="http://java.sun.com/jsf/html</code>  al fitxer pels elements JSF.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_executant_laplicació">Executant l&#8217;aplicació</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ara hageu finalitzat la codificació de l&#8217;aplicació. Ara podeu provar l&#8217;aplicació al vostre navegador.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Cliqueu amb el botó dret en la finestra de projectes i seleccioneu Executar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Quant seleccioneu Executar, l&#8217;IDE construeix i desplega l&#8217;aplicació i obre  <code>index.xhtml</code>  en el vostre navegador.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Escriviu un missatge en el camp de text. Cliqueu a Enviar missatge.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/browser1.png" alt="browser1">
</div>
<div class="title">Figure 9. Aplicació en el navegador</div>
</div>
<div class="paragraph">
<p>Quant cliqueu a Enviar missatge, el missatge és desat a la base de dades i el nombre de missatges és recuperant i mostrat.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/browser2.png" alt="browser2">
</div>
<div class="title">Figure 10. Aplicació en el navegador mostrant resultats</div>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Getting%20Started%20with%20Java%20EE%206%20Applications">Envia'ns la vostra opinió</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vegeu_també">Vegeu també</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Per a més informació quant a la utilització de l&#8217;IDE NetBeans per desenvolupar aplicacions Java EE, vegeu els següents recursos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="javaee-intro.html">Introducció a la tecnologia Java EE</a></p>
</li>
<li>
<p><a href="../web/jsf20-support.html">Suport JSF 2.0 en NetBeans IDE 6.8</a></p>
</li>
<li>
<p><a href="../../trails/java-ee.html">Camí d'aprenentatge d'aplicacions de serveis Web &amp;amp; EJB</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Podeu trobar més informació quant a la utilització de tecnologies Java EE 6 per a desenvolupar aplicacions en la <a href="http://download.oracle.com/javaee/6/tutorial/doc/">Guia d'aprenentatge de Java EE 6</a>.</p>
</div>
<div class="paragraph">
<p>Per enviar comentaris i suggeriments, obtenir suport, i mantindre&#8217;s informat dels últims desenvolupaments en característiques de desenvolupament Java EE al IDE NetBeans, <a href="../../../community/lists/top.html">uniu-vos a la llita de correu nbj2ee</a>.</p>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/javaee/javaee-gettingstarted_ca.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
