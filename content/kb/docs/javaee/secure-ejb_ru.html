
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Создание безопасных компонентов EJB в Java EE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Создание безопасных компонентов EJB в Java EE - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Создание безопасных компонентов EJB в Java EE">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="/plugins/index.html">Plugins</a> </li>
            <li> <a href="/download/nb110/nb110.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Just released!</div>
            <h1 syle='font-size: 2rem'>Apache NetBeans 11.0</h1>
            <p><a class="button success" href="/download/nb110/nb110.html">Read more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">Создание безопасных компонентов EJB в Java EE</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/incubator-netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/javaee/secure-ejb_ru.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_Создание_группы_безопасности_на_сервере_приложений">Создание группы безопасности на сервере приложений</a></li>
<li><a href="#_Создание_библиотеки_классов_java_для_удаленного_интерфейса">Создание библиотеки классов Java для удаленного интерфейса</a></li>
<li><a href="#_Создание_и_защита_приложения_j2ee">Создание и защита приложения J2EE</a>
<ul class="sectlevel2">
<li><a href="#_Создание_проекта_приложения_j2ee">Создание проекта приложения J2EE</a></li>
<li><a href="#_Обеспечение_безопасности_метода_в_сеансном_компоненте">Обеспечение безопасности метода в сеансном компоненте</a></li>
<li><a href="#_Настройка_дескрипторов_развертывания">Настройка дескрипторов развертывания</a></li>
</ul>
</li>
<li><a href="#_Создание_клиента_приложения">Создание клиента приложения</a></li>
<li><a href="#_Выполнение_приложения">Выполнение приложения</a></li>
<li><a href="#_Дополнительные_сведения">Дополнительные сведения</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Поддержка спецификации Java EE в IDE NetBeans позволяет полностью воспользоваться многими преимуществами функций Java EE, что позволит упростить разработку приложений. Значительным улучшением спецификации Java EE 5 было включение аннотаций. Использование аннотаций позволяет устранить множество кода заглушек, используемого при написании кода приложений, и уменьшает объем необходимой настройки при развертывании приложения.</p>
</div>
<div class="paragraph">
<p>Использование аннотаций значительно упростило разработку и настройку компонентов EJB. Аннотации позволяют указывать множество свойств настройки, которые ранее указывались в файлах дескриптора развертывания, что устраняет необходимость во множестве таких файлов. Хотя для приложений все еще могут требоваться некоторые файлы дескриптора развертывания (например,  <code>web.xml</code> ), редактор дескриптора развертывания с несколькими представлениями среды IDE значительно упрощает изменение файлов.</p>
</div>
<div class="paragraph">
<p>Аннотации упрощают создание безопасных компонентов EJB. Вместо настройки безопасности компонента EJB в дескрипторе развертывания  <code>ejb-jar.xml</code>  можно использовать аннотации безопасности для настройки авторизации непосредственно в исходном коде. Для приложений J2EE Java EE 5 не требуется файл  <code>ejb-jar.xml</code>  или  <code>application.xml</code> .</p>
</div>
<div class="paragraph">
<p>Обзор некоторых функций спецификации Java EE см. в разделе <a href="javaee-intro.html">Введение в технологию Java EE</a>. Дополнительные сведения о спецификациях аннотаций см. в разделе <a href="http://jcp.org/en/jsr/detail?id=250">+ JSR 250: общие аннотации для платформы Java+</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-80-74-73.png" alt="netbeans stamp 80 74 73">
</div>
<div class="title">Figure 1. Содержимое этой страницы применимо к IDE NetBeans 7.2, 7.3, 7.4 и 8.0</div>
</div>
<div class="paragraph">
<p><strong>Для работы с этим учебным курсом требуется следующее программное обеспечение и ресурсы.</strong></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Программное обеспечение или материал</th>
<th class="tableblock halign-left valign-top">Требуемая версия</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">IDE NetBeans</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Версия 7.2, 7.3, 7.4, 8.0, Java EE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Комплект для разработчика на языке Java (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">версия 7 или 8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Сервер GlassFish</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1.x, 4.x</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Для этого учебного курса необходимо зарегистрировать локальный экземпляр сервера GlassFish в среде IDE. Если на вашем компьютере установлена версия 'Java EE' среды IDE, сервер приложений должен быть уже установлен и зарегистрирован. Если сервер приложений не зарегистрирован в среде IDE, выберите "Сервис &gt; Серверы", чтобы зарегистрировать сервер в диспетчере серверов. Приложения масштаба предприятия нельзя развернуть на веб-сервере Tomcat.</p>
</div>
<div class="paragraph">
<p><strong>Предпосылки</strong></p>
</div>
<div class="paragraph">
<p>Предполагается, что читатель обладает базовыми знаниями по следующим технологиям или опытом программирования с их использованием:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Программирование на Java</p>
</li>
<li>
<p>IDE NetBeans</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Создание_группы_безопасности_на_сервере_приложений">Создание группы безопасности на сервере приложений</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом примере доступ к компоненту EJB необходимо предоставить только пользователям из группы  <code>bank_users</code> . Будет создан пользователь  <code>manager</code>  в группе  <code>bank_users</code>  в области безопасности  <code>file</code>  на сервере приложений.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Запустите сервер приложений, щелкнув правой кнопкой мыши его узел в окне 'Службы' и выбрав 'Пуск'.</p>
</li>
<li>
<p>Правой кнопкой мыши щелкните узел сервера приложений и выберите 'Просмотр консоли администратора домена', чтобы открыть консоль администрирования сервера GlassFish в браузере.</p>
</li>
<li>
<p>Разверните узел <strong>server-config</strong> в узле "Настройка" на левой панели переходов.</p>
</li>
<li>
<p>Щелкните <strong>Безопасность &gt; Области &gt; файл</strong>, чтобы открыть окно "Изменить область".
image::images/console-file-realm.png[title="Выбор узла области файла на консоли администрирования сервера приложений"]</p>
</li>
<li>
<p>Нажмите кнопку "Управление пользователями" в верней участи панели "Редактировать область", чтобы открыть панель "Изменить область".
image::images/console-edit-realm.png[title="Узел панели 'Изменить область' на консоли администрирования сервера приложений"]</p>
</li>
<li>
<p>Нажмите кнопку "Новый" в верхней части таблицы "Пользователи файлов" на панели "Пользователи файлов".</p>
</li>
<li>
<p>Введите следующие данные в форму "Новый пользователь области файлов". Нажмите кнопку "ОК".</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Имя</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Значение</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Идентификатор пользователя</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">диспетчер</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Список групп</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bank_users</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Пароль</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"password" – пароль</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Форма должна быть схожей со следующим изображением.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/console-new-user.png" alt="console new user">
</div>
<div class="title">Figure 2. Панель 'Создать пользователя области файла' на консоли администрирования сервера приложений</div>
</div>
<div class="paragraph">
<p>При нажатии кнопки "ОК" сервер создает пользователя и открывает панель "Пользователи файлов". Можно заметить, что появился пользователь с именем  <code>manager</code> .</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/console-file-users.png" alt="console file users">
</div>
<div class="title">Figure 3. Панель 'Пользователи файлов' на консоли администрирования со списком пользователей</div>
</div>
<div class="paragraph">
<p>Теперь, после создания пользователя, будет создано приложение J2EE для проверка возможности пользователя просматривать данные.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Создание_библиотеки_классов_java_для_удаленного_интерфейса">Создание библиотеки классов Java для удаленного интерфейса</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом упражнении будет создан простой проект библиотеки классов Java, содержащий удаленные интерфейсы для сеансного компонента. Скомпилированный файл JAR библиотеки классов будет добавлен к пути к классам в модуле EJB и к клиенту приложения, который будет использоваться для вызова сеансного компонента.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите "Файл &gt; Новый проект", затем выберите "Библиотека классов Java" в категории "Java". Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Введите SecureRemoteInterface для имени проекта.</p>
</li>
<li>
<p>Укажите местоположение проекта. Нажмите кнопку 'Готово'.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>В следующем разделе будет создан сеансный компонент в приложении J2EE. Доступ к сеансному компоненту будет осуществляться через удаленный интерфейс. При создании сеансного компонента среда IDE автоматически создаст удаленный интерфейс в библиотеке классов и добавить JAR библиотеки классов к пути к классам приложения J2EE.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Создание_и_защита_приложения_j2ee">Создание и защита приложения J2EE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Приложение J2EE будет состоять из простого сеансного компонента, доступного через удаленный интерфейс в проекте библиотеки классов.</p>
</div>
<div class="sect2">
<h3 id="_Создание_проекта_приложения_j2ee">Создание проекта приложения J2EE</h3>
<div class="paragraph">
<p>В этом упражнении будет создано приложение J2EE, содержащее модуль EJB.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите 'Файл' &gt; 'Создать проект' (Ctrl-Shift-N; ⌘-Shift-N on Mac), а затем в категории Java EE выберите шаблон 'Корпоративное приложение'. Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Введите <strong>Secure</strong> для названия проекта и выберите его местоположение.</p>
</li>
<li>
<p>Снимите флажок "Использовать отдельную папку", если он установлен.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>В рамках этого руководства копирование библиотек проекта в выделенную папку не целесообразно, поскольку совместное использование библиотек с другими пользователями или проектами не требуется.</p>
</div>
<div class="paragraph">
<p>Нажмите кнопку "Далее".
4. Установите сервер GlassFish, затем для параметра "Версия Java EE" выберите "Java EE 6".
5. Выберите "Создать модуль EJB" и отмените выбор "Создать модуль веб-приложения". Нажмите кнопку 'Готово'.
image::images/new-entapp-wizard.png[title="Панель 'Создать пользователя области файла' на консоли администрирования сервера приложений"]</p>
</div>
</div>
<div class="sect2">
<h3 id="_Обеспечение_безопасности_метода_в_сеансном_компоненте">Обеспечение безопасности метода в сеансном компоненте</h3>
<div class="paragraph">
<p>В этом упражнении будет создан сеансный компонент в проекте модуля EJB. Сеансный компонент не выполняет ничего сверхъестественного. Он просто возвращает пример суммы баланса. Будет создан метод  <code>getStatus</code> , который будет защищен методом компонента путем добавлении аннотации  <code>@RolesAllowed</code>  и указания ролей безопасности, которым разрешен доступ к методу. Эта роль безопасности используется приложением и не совпадает с пользователями и группами на сервере. Можно сопоставить роль безопасности с пользователями и группами позже при настройке дескрипторов развертывания.</p>
</div>
<div class="paragraph">
<p>Аннотации безопасности могут применяться индивидуально к каждому методу в классе или ко всему классу. В этом простом упражнении будет использоваться  <code>@RolesAllowed</code>  для аннотации метода, но спецификация Java EE определяет другие аннотации безопасности, которые могут использоваться в компонентах EJB.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В окне 'Проекты' щелкните правой кнопкой мыши узел модуля EJB (Secure-ejb) и выберите 'Создать' &gt; 'Компонент Bean сеанса'.</p>
</li>
<li>
<p>Введите <strong>AccountStatus</strong> для имени базового компонента, <strong>bean</strong> для пакета.</p>
</li>
<li>
<p>Выберите "Удаленный интерфейс в проекте" для типа интерфейса.</p>
</li>
<li>
<p>Выберите SecureRemoteInterface в раскрывающемся списке. Нажмите кнопку "Готово".
image::images/new-sessionbean-wizard.png[title="Удаленный интерфейс выбран в мастере создания компонентов сеансов"]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Готово" среда IDE создает класс  <code>AccountStatus</code>  и открывает файл в редакторе исходного кода.</p>
</div>
<div class="paragraph">
<p>Среда IDE также создает удаленный интерфейс  <code>AccountStatusRemote</code>  для базового элемента в пакете  <code>bean</code>  в проекте библиотеки классов SecureRemoteInterface и добавленном JAR библиотеки классов SecureRemoteInterface к пути к классам проекта модуля EJB.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projects-window-bean.png" alt="projects window bean">
</div>
<div class="title">Figure 4. Окно 'Проекты', в котором отображаются компонент сеанса и библиотека классов на пути к классу</div>
</div>
<div class="paragraph">
<p>При открытии категории "Библиотеки" диалогового окна "Свойства" модуля EJB можно заметить, что JAR добавлен к библиотеке для компиляции.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В редакторе исходного кода добавьте следующее объявление поля (полужирным шрифтом) к  <code>AccountStatus</code> :</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class AccountStatus implements AccountStatusRemote {
    *private String amount = "250";*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В редакторе исходного кода щелкните правой кнопкой мыши в классе и выберите 'Вставить код' (Alt-Insert; Ctrl-I в Mac), а затем выберите 'Добавить бизнес-метод', чтобы открыть диалоговое окно 'Добавить бизнес-метод'.</p>
</li>
<li>
<p>Введите <strong>getStatus</strong> в качестве имени метода, затем установите для типа возвращаемого значения  <code>String</code> .</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Среда IDE автоматически открывает бизнес-метод в удаленном интерфейсе.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В редакторе исходного кода добавьте следующую строку с полужирным шрифтом к методу  <code>getStatus</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public String getStatus() {
*    return "The account contains $" + amount;*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Введите следующее (полужирным шрифтом) для аннотации метода  <code>getStatus</code> .<strong>@RolesAllowed({"USERS"})</strong></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public String getStatus() {</code></pre>
</div>
</div>
<div class="paragraph">
<p>Эта аннотация означает, что только пользователям с ролью безопасности  <code>USERS</code>  доступен метод  <code>getStatus</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Щелкните правой кнопкой мыши в области редактора и выберите команду 'Исправить операторы импорта' (Alt-Shift-I; ⌘-Shift-I в Mac) и сохраните изменения. Убедитесь, что к файлу добавлено  <code>javax.annotation.security.RolesAllowed</code> .</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_Настройка_дескрипторов_развертывания">Настройка дескрипторов развертывания</h3>
<div class="paragraph">
<p>Для приложений J2EE Java EE обычно не требуются файлы дескриптора развертывания, такие как  <code>ejb-jar.xml</code> . Если развернуть узел "Файлы настройки" в Secure-ejb или безопасном приложении J2EE, можно увидеть, что дескрипторы развертывания отсутствуют. Аннотации можно использоваться для указания множества свойств, настроенных в  <code>ejb-jar.xml</code> . В том примере были указаны роли безопасности для методов EJB, используя аннотации  <code>@RolesAllowed</code>  в сеансном компоненте.</p>
</div>
<div class="paragraph">
<p>Однако при настройке безопасности для приложения требуется указать некоторые свойства в дескрипторах развертывания. В этом примере необходимо сопоставить роли безопасности, используемые в приложении J2EE( <code>USERS</code> ), с пользователями и группами, настроенными на серверами приложений. Была создана группа  <code>bank_users</code>  на сервере приложений, и необходимо сопоставить эту группу с ролью безопасности  <code>USERS</code>  в приложении J2EE. Для этого необходимо изменить дескриптор развертывания  <code>glassfish-application.xml</code>  для приложения J2EE.</p>
</div>
<div class="paragraph">
<p>Поскольку для запуска приложения J2EE не требуются дескрипторы развертывания, среда IDE не создала дескрипторы развертывания по умолчанию. Поэтому сначала необходимо создать файл дескриптора развертывания, затем отредактировать файл в редакторе с несколькими представлениями для настройки сопоставлений роли безопасности.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Правой кнопкой мыши щелкните проект безопасного приложения J2EE и выберите "Новый &gt; Другое", чтобы открыть мастер "Создание файла".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Также можно открыть мастер "Создание файла", выбрав "Файл &gt; Создание файла" в главном меню. В этом случае необходимо выбрать проект "Безопасность" в раскрывающемся списке "Проект".</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите тип файла "Дескриптор GlassFish" в категории GlassFish. Нажмите кнопку "Далее".
image::images/new-gf-descriptor.png[title="Тип файла дескриптора GlassFish в мастере создания файлов"]</p>
</li>
<li>
<p>Примите значения по умолчанию в мастере и щелкните "Готово".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Готово" среда IDE создает файл  <code>glassfish-application.xml</code>  и открывает его в редакторе исходного кода с несколькими представлениями.</p>
</div>
<div class="paragraph">
<p>Если развернуть узел проекта приложения J2EE "Безопасность" в окне "Проекты", можно увидеть, что файл дескриптора создан в узле "Файлы настройки".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/glassfish-application-descriptor.png" alt="glassfish application descriptor">
</div>
<div class="title">Figure 5. Вкладка 'Безопасность' в редакторе с несколькими представлениями </div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>На вкладке "Безопасность" редактора с несколькими представлениями щелкните "Добавить сопоставление роли безопасности" и введите <strong>USERS</strong> для параметра "Имя роли безопасности".</p>
</li>
<li>
<p>Щелкните "Добавить группу" и введите <strong>bank_users</strong> для параметра "Имя группы" в диалоговом окне. Нажмите кнопку "ОК".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Теперь текст в редакторе должен быть схож со следующим.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/security-tab-descriptor.png" alt="security tab descriptor">
</div>
<div class="title">Figure 6. Вкладка 'Безопасность' в редакторе с несколькими представлениями </div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Сохраните изменения.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Можно щелкнуть вкладку "XML" в редакторе с несколькими представлениями, чтобы просмотреть файл дескриптора развертывания в представлении XML. Теперь этот файл дескриптора развертывания содержит следующий текст:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;glassfish-application&gt;
  &lt;security-role-mapping&gt;
    &lt;role-name&gt;USERS&lt;/role-name&gt;
    &lt;group-name&gt;bank_users&lt;/group-name&gt;
  &lt;/security-role-mapping&gt;
&lt;/glassfish-application&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Теперь метод  <code>getStatus</code>  безопасен и доступен только пользователям в группе  <code>bank_users</code> , указанной на сервере.</p>
</div>
<div class="paragraph">
<p>Теперь требуется способ проверки параметров безопасности. Проще всего создать базовый клиент приложения, запрашивающий у пользователя ввод имени пользователя и пароля.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Создание_клиента_приложения">Создание клиента приложения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе будет создан простой клиент приложения для доступа к сеансному компоненту  <code>AccountStatus</code> . Аннотация  <code>@EJB</code>  в коде будет использоваться для вызова базового элемента через удаленный интерфейс, а среда IDE автоматически добавит файл JAR библиотеки классов, содержащий интерфейс клиента приложения.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Выберите Файл &gt; Создать проект и затем выберите "Клиент корпоративного приложения" в категории Java EE. Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Введите SecureAppClient в качестве имени проекта. Нажмите кнопку "Далее".</p>
</li>
<li>
<p>Выберите <strong>&lt;Нет&gt;</strong> в раскрывающемся списке "Добавить в приложение J2EE".</p>
</li>
<li>
<p>Выберите 'GlassFish Server' в списке 'Сервер' и 'Java EE 6' или 'Java EE 7' в списке 'Версия Java EE'. Нажмите кнопку "Готово".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>После нажатии кнопки "Готово" в редакторе исходного кода откроется  <code>Main.java</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В редакторе исходного кода щелкните правой кнопкой мыши в файле  <code>Main.java</code>  и выберите 'Вставить код' (Alt-Insert; Ctrl-I в Mac) и выберите 'Call Enterprise Bean'.</p>
</li>
<li>
<p>В диалоговом окне "Вызов компонента EJB" разверните узел Secure-ejb и выберите AccountStatus. Нажмите кнопку "ОК".
image::images/call-enterprise-bean.png[title="интерфейс, выбранный в диалоговом окне 'Вызвать компонент корпоративного уровня'"]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Среда IDE добавляет следующий код к клиенту приложения для поиска сеансного компонента.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@EJB
private static AccountStatusRemote accountStatus;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Если развернуть узел "Узел" в окне "Проекты", можно увидеть, что среда IDE добавила файл JAR SecureRemoteInterface к пути к классам проекта.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Измените метод  <code>main</code> , чтобы добавить следующий код и сохранить изменения.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public static void main(String[] args) {
    *System.out.println(accountStatus.getStatus());*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Дополнительные сведения о клиентах приложений приведены в разделе <a href="entappclient.html">Создание и запуск клиентов приложений на сервере GlassFish</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Выполнение_приложения">Выполнение приложения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Теперь приложение готово. Сначала необходимо развернуть приложение J2EE на сервере. После развертывания приложения J2EE можно запустить клиент приложения для проверки безопасности метода в приложении J2EE и правильности сопоставления ролей пользователей. После запуска клиента приложения появится запрос на ввод имени пользователя и пароля для пользователя в группе  <code>bank_users</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Правой кнопкой мыши щелкните узел проекта приложения J2EE "Безопасность" в окне "Проекты" и выберите "Развернуть".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Развернуть" среда IDE создает файл EAR, запускает сервер приложений (если он еще не запущен) и выполняет развертывание файла EAR на сервере.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Правой кнопкой мыши щелкните узел проекта SecureAppClient в окне "Проект" и выберите "Выполнить". Появится диалоговое окно с запросом на ввод имени пользователя и пароля.
image::images/login-window.png[title="Окно входа с запросом на ввод имени пользователя и пароля"]</p>
</li>
<li>
<p>В диалоговом окне введите имя пользователя ( <code>manager</code> ) и пароль ( <code>password</code> ) и нажмите кнопку "ОК". В окне вывода появится следующее.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">The account contains 250$</code></pre>
</div>
</div>
<div class="paragraph">
<p>Этот очень простой пример демонстрирует использование аннотаций Java для защиты метода в компоненте EJB.</p>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Building%20Secure%20Enterprise%20Beans">Отправить отзыв по этому учебному курсу</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_Дополнительные_сведения">Дополнительные сведения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Дополнительные сведения об использовании аннотаций и дескрипторов развертывания для защиты компонентов можно найти в следующих ресурсах:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Главы <a href="http://docs.oracle.com/javaee/7/tutorial/doc/security-intro003.htm">Защита контейнеров</a> и <a href="http://docs.oracle.com/javaee/7/tutorial/doc/security-advanced008.htm">Настройка параметров безопасности с помощью дескрипторов развертывания</a> в разделе <a href="http://docs.oracle.com/javaee/7/tutorial/doc/partsecurity.htm">Безопасность</a> практического руководства по Java EE 7</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Дополнительные сведения об использовании IDE NetBeans для разработки приложений Java EE см. следующие ресурсы:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="javaee-intro.html">+Введение в технологию Java EE +</a></p>
</li>
<li>
<p><a href="javaee-gettingstarted.html">Начало работы с приложениями Java EE</a></p>
</li>
<li>
<p><a href="../../trails/java-ee.html">Учебная карта по Java EE и Java Web</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Для отправки комментариев и предложений, получения поддержки и новостей о последних разработках, связанных с Java EE IDE NetBeans <a href="../../../community/lists/top.html">присоединяйтесь к списку рассылки nbj2ee</a>.</p>
</div>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/incubator-netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/incubator-netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/javaee/secure-ejb_ru.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1>About</h1>
                <ul>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                    <li><a href="https://incubator.apache.org/projects/netbeans.html">Incubation Status</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb110/nb110.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="/plugins/index.html">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2019 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
