
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Determinando um perfil de uma Aplicação Corporativa no NetBeans IDE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Determinando um perfil de uma Aplicação Corporativa no NetBeans IDE - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Determinando um perfil de uma Aplicação Corporativa no NetBeans IDE">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="/plugins/index.html">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1 syle='font-size: 2rem'>Apache NetBeans 12.0</h1>
            <p><a class="button success" href="/download/nb120/index.html">Find out more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">Determinando um perfil de uma Aplicação Corporativa no NetBeans IDE</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/javaee/profiler-javaee_pt_BR.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_sobre_a_determinação_de_perfil_de_aplicações_corporativas_no_ide">Sobre a determinação de perfil de Aplicações Corporativas no IDE</a>
<ul class="sectlevel2">
<li><a href="#_projetos_de_determinação_de_perfil_de_aplicações_corporativas">Projetos de Determinação de Perfil de Aplicações Corporativas</a></li>
<li><a href="#_determinando_o_perfil_de_subprojetos_do_módulo_ejb_e_web">Determinando o Perfil de Subprojetos do Módulo EJB e Web</a></li>
</ul>
</li>
<li><a href="#_criando_o_projeto_de_amostra">Criando o Projeto de Amostra</a></li>
<li><a href="#_monitorando_a_aplicação">Monitorando a Aplicação</a></li>
<li><a href="#_analisando_o_desempenho_da_aplicação">Analisando o Desempenho da Aplicação</a>
<ul class="sectlevel2">
<li><a href="#_amostragem_da_aplicação">Amostragem da Aplicação</a></li>
<li><a href="#_instrumentando_todos_os_métodos">Instrumentando Todos os Métodos</a></li>
<li><a href="#_usando_métodos_raiz_de_determinação_de_perfil">Usando Métodos Raiz de Determinação de Perfil</a></li>
<li><a href="#_usando_os_filtros_de_instrumentação">Usando os Filtros de Instrumentação</a></li>
</ul>
</li>
<li><a href="#_analisando_o_uso_da_memória_da_aplicação">Analisando o Uso da Memória da Aplicação</a></li>
<li><a href="#_consulte_também">Consulte Também</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>O NetBeans IDE inclui uma ferramenta de determinação de perfil poderosa que pode fornecer informações importantes sobre o comportamento de runtime das aplicações corporativas. Usando a ferramenta de determinação de perfil, é possível monitorar facilmente os estados do thread e obter dados sobre o desempenho da CPU e uso de memória de uma aplicação.</p>
</div>
<div class="paragraph">
<p>Este documento demonstrará como usar a ferramenta de determinação de perfil para obter dados sobre uma aplicação corporativa simples, que é implantada como um WAR em um servidor de aplicações. Este documento mostra como usar o IDE para obter resultados de determinação de perfil acerca do seguinte.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Comportamento de uma aplicação em runtime</p>
</li>
<li>
<p>Tempo de CPU usado por um dos métodos de aplicação</p>
</li>
<li>
<p>Criação do objeto</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Se você estiver implantando uma aplicação em um Tomcat local registrado, GlassFish Server ou instalação JBoss, será possível determinar um perfil da aplicação com apenas alguns cliques e quase nenhuma configuração. O processo de determinação de perfil do projeto é muito parecido com o uso do comando Executar no IDE. Você poderá começar a determinar facilmente perfis de projetos de aplicações corporativas ou módulos Web e EJB individuais selecionando Perfil &gt; Determinar Perfil do Projeto Principal no menu principal.</p>
</div>
<div class="paragraph">
<p><strong>Para seguir este tutorial, são necessários os recursos e o software a seguir.</strong></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Software ou Recurso</th>
<th class="tableblock halign-left valign-top">Versão Necessária</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pacote Java EE 7.3, 7.4, 8.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">JDK (Java Development Kit)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDK 7 ou 8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GlassFish Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1, 4.0</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Caso esteja usando um determinador de perfil pela primeira vez, é recomendada a leitura de <a href="../java/profiler-intro.html">Introdução à Determinação de Perfil de aplicações Java no NetBeans IDE</a>, que fornece uma visão geral das tarefas de monitoramento e determinação de perfil.</p>
</li>
<li>
<p>Se você estiver usando o NetBeans IDE 7.2 ou anterior, consulte <a href="../../72/javaee/profiler-javaee.html">Criando Perfis de Aplicações Corporativas no NetBeans IDE 7.2</a></p>
</li>
<li>
<p>Neste documento, você determinará um perfil de uma aplicação corporativa implantada no GlassFish Server. A configuração preferencial e mais fácil para a determinação de um perfil de uma aplicação Web ou corporativa durante o desenvolvimento é quando a aplicação está em execução em um servidor Tomcat, GlassFish ou JBoss local.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sobre_a_determinação_de_perfil_de_aplicações_corporativas_no_ide">Sobre a determinação de perfil de Aplicações Corporativas no IDE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Na determinação de perfil de aplicações corporativas, na maioria dos casos, você desejará analisar o desempenho da aplicação para ver o tempo de execução dos métodos do projeto. Isso permite solucionar problemas na aplicação e tentar melhorar seu desempenho. Em alguns casos, você também pode desejar obter dados sobre o uso da memória para otimizar a coleta de lixo.</p>
</div>
<div class="paragraph">
<p>O processo de determinação de perfil de aplicações corporativas, módulos EJB e aplicações Web é basicamente o mesmo utilizado para executar o projeto usando o comando Executar. Após selecionar a tarefa e especificar as opções de determinação de perfil, clique em Executar na caixa de diálogo Selecionar Tarefa de Determinação de Perfil para iniciar a sessão de determinação de perfil. Quando você inicia a sessão de determinação de perfil, o IDE faz o seguinte:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Compila a aplicação</p>
</li>
<li>
<p>Inicia o servidor de destino no modo de determinação de perfil</p>
</li>
<li>
<p>Implanta a aplicação</p>
</li>
<li>
<p>Anexa à aplicação</p>
</li>
<li>
<p>Abre o browser da página web (se especificado nas propriedades do projeto)</p>
</li>
<li>
<p>Abre a guia de Resultados de Determinação Ao Vivo de Perfil</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Dependendo das opções de determinação de perfil, o IDE iniciará imediatamente a exibição dos resultados de determinação de perfil na guia Resultados da Determinação Ao Vivo de Perfil. Em alguns casos, como quando os métodos raiz de determinação de perfil foram especificados, pode ser necessário realizar algumas ações no browser Web antes de os resultados serem exibidos.</p>
</div>
<div class="sect2">
<h3 id="_projetos_de_determinação_de_perfil_de_aplicações_corporativas">Projetos de Determinação de Perfil de Aplicações Corporativas</h3>
<div class="paragraph">
<p>Uma aplicação corporativa, criada no IDE, normalmente, será um projeto de aplicação Web implantado em um servidor de aplicações como um arquivo da Web (WAR), ou um projeto de aplicação corporativa que contém uma aplicação Web e bibliotecas adicionais e é implantado como um arquivo de aplicação corporativa (EAR).</p>
</div>
<div class="paragraph">
<p>Caso deseje implantar a aplicação como um arquivo compactado EAR, você pode criar um projeto de aplicação corporativa NetBeans que contenha os subprojetos e as bibliotecas. O projeto de aplicação corporativa não contém arquivos de código-fonte, apenas informações sobre construção e implantação da aplicação e os metadados de configuração do servidor. Em um projeto de aplicação corporativa, a lógica da aplicação geralmente está contida no módulo EJB e o código-fonte da camada de apresentação está contido no módulo Web.</p>
</div>
<div class="paragraph">
<p>Se você tiver todos os códigos-fonte do projeto da aplicação corporativa, o método mais fácil e prático para a determinação de perfil da aplicação é determinar o perfil do projeto em vez de um dos subprojetos do projeto. Isso garante que todo o código necessário seja compilado e implantado e que a aplicação se comporte corretamente. É possível determinar o perfil de um projeto de aplicação corporativa adotando um dos seguintes procedimentos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Se o projeto de aplicação corporativa estiver definido como o Projeto Principal, clique em Determinar Perfil do Projeto Principal na barra de ferramentas do IDE ou selecione Perfil &gt; Determinar Perfil do Projeto Principal no menu principal.</p>
</li>
<li>
<p>Clique com o botão direito do mouse no nó do projeto de aplicação corporativa na janela Projetos e selecione Determinar Perfil no menu pop-up.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Na determinação de perfil de uma aplicação corporativa, é possível aumentar a relevância dos resultados da determinação de perfil especificando os métodos raiz e usando filtros de instrumentação para limitar as classes que terão o perfil determinado. Isso ajuda a minimizar o impacto que a sobrecarga da determinação de perfil impõe ao desempenho da aplicação e aumenta a relevância dos resultados da determinação de perfil.</p>
</div>
<div class="paragraph">
<p>Diferentemente das aplicações Web, ao executar uma aplicação corporativa, o browser nem sempre abre automaticamente. (Isso depende da configuração do projeto.) Isso significa que, em alguns casos, pode ser necessário iniciar manualmente o front end da aplicação Web e, em seguida, chamar o código, como a lógica de negócios em um módulo EJB do browser.</p>
</div>
</div>
<div class="sect2">
<h3 id="_determinando_o_perfil_de_subprojetos_do_módulo_ejb_e_web">Determinando o Perfil de Subprojetos do Módulo EJB e Web</h3>
<div class="paragraph">
<p>É possível iniciar uma sessão de determinação de perfil de qualquer projeto de módulo EJB ou de módulo Web. Nesse caso, talvez você queira tentar uma das seguintes abordagens:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Determinando o perfil de um módulo EJB.</strong> Ao optar por essa abordagem, você provavelmente precisará chamar o código de aplicação manualmente no browser da Web ou outro cliente porque os projetos do módulo EJB não são, geralmente, configurados para abrir um browser. Depois que o módulo EJB estiver implantado no servidor, chame seu código da mesma forma que faria para depurar ou avaliar a funcionalidade da aplicação, normalmente iniciando o front end da aplicação e, em seguida, realizando ações no browser.</p>
</li>
<li>
<p><strong>Determinando o perfil de um módulo Web.</strong> Quando você optar por essa abordagem, será necessário compilar e implantar o módulo EJB ao servidor antes de determinar o perfil do projeto do módulo Web. Normalmente, o código do EJB é executado como resultado de uma ação de usuário em um browser. Se essa ação for executada/tratada pelo código da aplicação Web, será possível ver o código do EJB em sua árvore de chamadas.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_criando_o_projeto_de_amostra">Criando o Projeto de Amostra</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Neste documento, você irá determinar o perfil da amostra da aplicação ServletStateless. A aplicação ServletStateless é uma aplicação Web corporativa simples que está incluída como uma amostra de projeto no IDE.</p>
</div>
<div class="paragraph">
<p>Para criar a aplicação ServletStateless , realize as etapas a seguir.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Selecione Arquivo &gt; Novo Projeto (Ctrl-Shift-N; ⌘-Shift-N no Mac) no menu principal.</p>
</li>
<li>
<p>No assistente para Novos Projetos, selecione a categoria Amostras &gt; Java EE.</p>
</li>
<li>
<p>Selecione o projeto Servlet Stateless. Clique em Próximo.</p>
</li>
<li>
<p>Selecione uma localização para o projeto. Clique em Finalizar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Quando você clicar em Finalizar, o IDE criará a amostra de projeto ServletStateless. Você pode ver o projeto ServletStateless na janela Projetos.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Por default, quando se utiliza o IDE para determinar o perfil de um projeto, o IDE determinará o perfil do projeto selecionado na janela Projetos se mais de um projeto estiver aberto. Quando você selecionar Executar &gt;Definir Projeto Principal no menu principal e definir um projeto como Projeto Principal, o Projeto Principal é determinado por defaut. Você pode clicar com o botão direito do mouse em um nó de projeto na janela Projetos e selecionar Perfil no menu pop-up.</p>
</li>
<li>
<p>Caso deseje determinar o perfil de um arquivo como uma página  <code>.jsp</code>  ou um servlet, clique com o botão direito do mouse no arquivo e selecione Determinar o Perfil do Arquivo no menu pop-up. O comportamento é parecido com o de Determinar Perfil do Projeto (Principal), mas ao iniciar a sessão de determinação de perfil, a página web selecionada será aberta no browser em vez de na página web default do projeto.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_monitorando_a_aplicação">Monitorando a Aplicação</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Monitorar uma aplicação permite que informações de alto nível sobre as propriedades do JVM de destino sejam obtidas, incluindo atividade de thread e alocações de memória. Como o monitoramento de uma aplicação impõe um custo adicional muito baixo, você pode executar a aplicação neste modo por períodos maiores. Quando você escolhe a tarefa Monitorar, a aplicação de destino é iniciada sem nenhuma instrumentação.</p>
</div>
<div class="paragraph">
<p>Para monitorar a aplicação ServletStateless, realize as etapas a seguir.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Selecione Executar &gt;Definir Projeto Principal &gt; ServletStateless para definir o projeto como principal.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Quando você definir o projeto como Projeto Principal, o nome do projeto estará em negrito na janela Projetos.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Escolha Perfil &gt; Perfil do Projeto Principal no menu principal.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Selecione o JDK 1.7 ou JDK 1.8 caso seja solicitado a selecionar uma plataforma Java para determinação de perfil.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Selecione Monitorar na caixa de diálogo Selecionar Tarefa de Criação de Perfil.</p>
</li>
<li>
<p>Clique em Executar.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Caso não tenha usado o determinador de perfil antes, você pode ser solicitado a calibrá-lo antes que possa clicar em Executar. Para obter mais informações sobre a calibração do determinador de perfil, consulte a seção <a href="../java/profiler-intro.html#calibrate">Usando o Determinador de Perfil pela Primeira Vez</a> na <a href="../java/profiler-intro.html">Introdução à Determinação de Perfil de Aplicações Java no NetBeans IDE</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Quando você clica em Executar, o IDE constrói a aplicação, inicia o servidor no modo de perfil e a implanta a aplicação no servidor. Em seguida, o IDE se liga à aplicação e inicia a recuperação de dados.</p>
</div>
<div class="paragraph">
<p>Os dados em threads no JVM de destino são exibidos na guia Threads. A guia Threads exibe dados em todos os threads, threads de servidor, assim como threads na aplicação.</p>
</div>
<div class="paragraph">
<p>É possível visualizar informações adicionais de monitoramento clicando no botão Visão Geral de Telemetria na janela Perfil para abrir a janela Visão Geral de Telemetria VM. A janela Visão Geral de Telemetria VM permite que você obtenha rapidamente uma visão geral dos dados de monitoramento em tempo real. É possível clicar duas vezes em qualquer um dos gráficos na janela Visão Geral de Telemetria VM para abrir uma versão maior do gráfico.</p>
</div>
<div class="paragraph">
<p>Durante a monitoração de uma aplicação corporativa, os gráficos de Memória (Heap) e Memória (GC) podem ajudá-lo a visualizar rapidamente o uso de memória da aplicação. Coloque o cursor sobre o gráfico para abrir uma dica de ferramenta com informações mais detalhadas. Se o tamanho do heap ou o número de gerações sobreviventes estiver crescendo constantemente, isso pode indicar um vazamento de memória. Caso haja a suspeita de fuga de memória, talvez seja melhor determinar o perfil do uso de memória da aplicação.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/monitor-memory-telemetry.png" alt="monitor memory telemetry">
</div>
<div class="title">Figure 1. Gráfico da memória (GC) mostrando informações do GC</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_analisando_o_desempenho_da_aplicação">Analisando o Desempenho da Aplicação</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A tarefa de Análise do Desempenho da CPU permite a visualização de dados no nível de método (runtime) do desempenho da CPU da sua aplicação e o número de vezes que os métodos são chamados. Você pode optar por analisar o desempenho da aplicação inteira ou selecionar uma raiz de determinação de perfil para limitar a determinação a uma parte do código da aplicação.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/sample-task.png" alt="sample task">
</div>
<div class="title">Figure 2. Modo de Amostra de Aplicação selecionado no painel da CPU da caixa de diálogo Selecionar Tarefa de Determinação de Perfil</div>
</div>
<div class="paragraph">
<p>Ao selecionar a tarefa de análise do desempenho da CPU na janela Tarefas de Determinação de Perfil, você pode escolher o quanto você deseja determinar da aplicação selecionando uma das seguintes opções.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Rápido (usado como exemplo).</strong> Neste modo, o IDE faz as amostras da aplicação e e usa um rastreamento de pilha periodicamente. Essa opção é menos precisa do que os métodos de instrumentação, mas o custo adicional é menor. Essa opção ajuda a localizar métodos que talvez você queira instrumentar.</p>
</li>
<li>
<p><strong>Advançado (instrumentado).</strong> Neste modo, os métodos definidos da aplicação são instrumentados. O IDE registra onde os threads entram e saem dos métodos do projeto, permitindo ver quanto tempo é gasto em cada método. Quando você insere um método, os threads geram um evento "entrada de método". Os threads geram um evento "saída de método" correspondente ao sair do método. Os timestamps para os dois eventos são registrados. Esses dados são processados em tempo real.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Você pode escolher instrumentar todos os métodos na aplicação ou limitar a instrumentação a um subconjunto do código da aplicação ao especificar um ou mais <strong>métodos-raiz</strong>. Especificar um método raiz pode reduzir significativamente a sobrecarga da determinação de perfil. Um método-raiz é um método, classe ou pacote em seu código-fonte que você especifica como uma raiz da instrumentação. Os dados de criação de perfil são coletados quando um dos threads da aplicação entra e sai da raiz de instrumentação. Nenhum dado de criação de perfil é coletado até que um dos threads da aplicação entre no método-raiz. Você pode especificar um método-raiz usando o menu pop-up no código-fonte ou clicando em <strong>personalizar</strong> para abrir a caixa de diálogo Editar Raízes da Criação de Perfil.</p>
</div>
<div class="paragraph">
<p><strong>Dicas para a Determinação de Perfil de Aplicações Web</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Além as principais classes Java, uma aplicação corporativa geralmente chamará uma série de métodos em classes no servidor-alvo. Por esse motivo, é importante escolher um filtro para limitar os códigos-fonte que são instrumentados. É recomendado usar o filtro <strong>Determinar Perfil somente para classes de projeto</strong> ao determinar o perfil de aplicações corporativas.</p>
</li>
<li>
<p>Os resultados da determinação de perfil são coletados assim que a sessão é iniciada. Se você estiver usando o método Avançado e os métodos raiz de determinação de perfil não foram especificados, alguns dados interessantes estarão disponíveis imediatamente após a inicialização do servidor, mais especificamente a inicialização de filtros e listeners da aplicação Web. Caso tenha especificado alguns métodos raiz de determinação de perfil, esses dados provavelmente não serão obtidos, dependendo dos métodos raiz selecionados.</p>
</li>
<li>
<p>Normalmente, não existe o interesse em dados sobre listeners e filtros, então clique em Redefinir Resultados Coletados para limpar esses dados. Os primeiros dados utilizáveis serão coletados após algum código ser chamado como um resultado de alguma ação no browser, normalmente exibindo uma página JSP que usa JavaBeans e/ou tags personalizadas ou processando o método  <code>doGet</code> / <code>doPost</code>  do servlet. Observe que os dados coletados quando a aplicação é inicializada pela primeira vez, frequentemente, representam somente o comportamento de inicialização da aplicação Web.</p>
</li>
<li>
<p>Se uma página JSP estiver sendo exibida pela primeira vez, ela é compilada internamente no servlet pelo servidor, o que afeta a árvore de chamadas e o tempo dos métodos. Além disso, o comportamento dos servlets e de outro código da aplicação pode ser levemente diferente durante a primeira execução do que em um ambiente de produção verdadeiro, onde a aplicação está em constante execução. Para obter os dados de determinação de perfil que melhor representem o desempenho verdadeiro da aplicação, você deve gerar alguma carga de trabalho no código de perfil determinado antes de medir qualquer tempo (árvores de chamadas não devem ser afetadas por isso). É possível utilizar geradores de carga para ajudá-lo com isso. (Para saber mais, consulte <a href="../java/profile-loadgenerator.html">Usando um Gerador de Carga no NetBeans IDE</a>). A capacidade de cache de diversos browsers também pode impactar o desempenho.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Se você criar o perfil de aplicações web no servidor de aplicações GlassFish em uma máquina Windows, a inicialização do servidor para criação de perfil poderá falhar se o NetBeans IDE estiver instalado em um caminho que contenha espaços (como a instalação padrão em  <code>C:\Program Files\netbeans-7.4</code> ). A solução é instalar/copiar o diretório de instalação do NetBeans IDE em um local que não contenha espaços no caminho (como  <code>C:\netbeans-7.4</code> ).
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_amostragem_da_aplicação">Amostragem da Aplicação</h3>
<div class="paragraph">
<p>Escolha a opção Rápido da aplicação caso precise de uma visão geral do comportamento da aplicação inteira e não deseje instrumentar os métodos. No modo de perfil Rápido, o IDE obtém periodicamente rastreamentos de pilha. A sobrecarga do modo de perfil Rápido é menor que no modo de perfil Avançado.</p>
</div>
<div class="paragraph">
<p>Neste exercício, você analisará o desempenho da aplicação ao selecionar o modo de perfil Rápido.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pare a sessão de monitoramento clicando no botão Parar na janela Determinador de Perfil.</p>
</li>
<li>
<p>Escolha Perfil &gt; Perfil do Projeto Principal no menu principal.</p>
</li>
<li>
<p>Selecione CPU na caixa de diálogo Selecionar Tarefa de Criação de Perfil.</p>
</li>
<li>
<p>Selecione o modo <strong>Rápido (usado como exemplo)</strong>.</p>
</li>
<li>
<p>Selecione <strong>Determinar Perfil somente das classes do projeto</strong> na lista drop-down do Filtro. Clique em Executar.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Este filtro limita as classes instrumentadas para as classes encontradas no projeto de aplicação corporativa. Clique em <strong>Exibir valor do filtro</strong> para visualizar uma lista das classes filtradas.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/sample-task.png" alt="sample task">
</div>
<div class="title">Figure 3. Modo de Amostra de Aplicação selecionado no painel da CPU da caixa de diálogo Selecionar Tarefa de Determinação de Perfil</div>
</div>
<div class="paragraph">
<p>Observe na escala da caixa de diálogo que a sobrecarga estará relativamente baixa.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique no botão Resultados da Determinação Ao Vivo de Perfil na janela Determinador de Perfil para abrir a guia Resultados da Determinação Ao Vivo de Perfil.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/sample-task-results.png" alt="sample task results">
</div>
<div class="title">Figure 4. Modo dos Resultados Amostragem da Aplicação</div>
</div>
<div class="paragraph">
<p>Na guia Resultados da Determinação Ao Vivo de Perfil, pode ser observado o runtime do método  <code>serviço</code>  para o servlet na classe  <code>Servlet2Stateless</code>  e que o método foi chamado uma única vez.</p>
</div>
</div>
<div class="sect2">
<h3 id="_instrumentando_todos_os_métodos">Instrumentando Todos os Métodos</h3>
<div class="paragraph">
<p>No modo de Determinação de Perfil da Aplicação, os métodos da sua aplicação são instrumentados. Embora uma medição mais exata do desempenho da aplicação seja recebida, a sobrecarga da determinação de perfil é maior do que se o modo de amostra tivesse sido escolhido. Métodos raiz de determinação de perfil podem ser especificados para limitar os métodos que são instrumentados e reduzir a sobrecarga da determinação de perfil. Para algumas aplicações, a especificação de um método-raiz pode ser a única forma de obter dados detalhados e/ou realistas de desempenho, pois a criação de perfil da aplicação inteira pode gerar dados de perfil demais, fazendo com que a aplicação se torne inútil ou até mesmo causar um erro fatal da aplicação.</p>
</div>
<div class="paragraph">
<p>Neste exercício, você analisará o desempenho da aplicação instrumentando todos os métodos na aplicação corporativa.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pare a sessão de monitoramento clicando no botão Parar na janela Determinador de Perfil.</p>
</li>
<li>
<p>Escolha Perfil &gt; Perfil do Projeto Principal no menu principal.</p>
</li>
<li>
<p>Selecione CPU na caixa de diálogo Selecionar Tarefa de Criação de Perfil.</p>
</li>
<li>
<p>Selecione o modo <strong>Avançado (instrumentado)</strong>.</p>
</li>
<li>
<p>Selecione <strong>Determinar Perfil somente das classes do projeto</strong> na lista drop-down do Filtro. Clique em Executar.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/advanced-cpu-task.png" alt="advanced cpu task">
</div>
<div class="title">Figure 5. Modo de Determinação de Perfil da Aplicação selecionado no painel da CPU da caixa de diálogo Selecionar Tarefa de Determinação de Perfil</div>
</div>
<div class="paragraph">
<p>Observe na escala na caixa de diálogo que a sobrecarga estará maior que no modo Rápido da aplicação.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique no botão Resultados da Determinação Ao Vivo de Perfil na janela Determinador de Perfil para abrir a guia Resultados da Determinação Ao Vivo de Perfil.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>É possível ver que a guia Resultados da Determinação Ao Vivo de Perfil exibe o runtime dos métodos  <code>init</code>  e  <code>serviço</code>  para o servlet na classe  <code>Servlet2Stateless</code>  e que cada método foi chamado uma única vez. O método  <code>init</code>  na classe  <code>StatelessSessionBean</code>  também foi chamado.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cpu-pane1-results.png" alt="cpu pane1 results">
</div>
<div class="title">Figure 6. Modo dos Resultados de Determinação de Perfil da Aplicação</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Por defaut, o modo de atualização automática está ativo para que os dados exibidos sejam atualizados continuamente, a cada poucos segundos. É possível ativar e desativar o modo de atualização automática clicando no botão Atualização Automática na barra de ferramentas.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Para melhorar a legibilidade dos dados coletados, é possível usar o filtro Resultados, na exibição de Hot Spots da janela Resultados da Determinação Ao Vivo de Perfil, para filtrar os resultados exibidos. O filtro Resultados filtra apenas a exibição dos resultados e não afeta as classes que são instrumentadas. Quando você usa o filtro Resultados, os resultados que iniciam com, contêm ou terminam com um padrão definido são filtrados. Também é possível usar expressões regulares mais complexas para filtragem. Os dados são filtrados com base nos nomes de pacote/classe/método exatamente como eles aparecem na primeira coluna da tabela de resultados. Mais de um padrão pode ser especificado, separando os padrões por um espaço ou uma vírgula com espaço.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>No browser, digite seu nome no campo e clique em Enviar Consulta.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cpu-pane1-results1.png" alt="cpu pane1 results1">
</div>
<div class="title">Figure 7. Modo dos Resultados de Determinação de Perfil da Aplicação</div>
</div>
<div class="paragraph">
<p>Ao clicar em Enviar Consulta, você poderá ver que a guia Resultados da Determinação Ao Vivo de Perfil é atualizada para refletir a ação no browser. O clique no botão chamou o método  <code>sayHello</code>  na classe  <code>StatelessSessionBean</code>  e chamou o método  <code>init</code>  novamente. O método  <code>serviço</code>  do servlet na classe  <code>Servlet2Stateless</code>  também foi chamado novamente. A guia também exibe quanto tempo foi gasto em cada um dos métodos.</p>
</div>
<div class="paragraph">
<p>É possível clicar no botão Análise Detalhada para ver uma representação gráfica do tempo relativo gasto em diversas áreas da aplicação, por exemplo, servlets, listeners etc. Clique no gráfico para obter uma análise detalhada dos resultados de determinação de perfil exibidos.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/drill-down.png" alt="drill down">
</div>
<div class="title">Figure 8. Gráfico de Análise Detalhada do tempo relativo gasto em servlets na aplicação</div>
</div>
<div class="paragraph">
<p>Instrumentar uma aplicação sempre irá impor uma sobrecarga ao determinar o perfil da aplicação. Em uma aplicação simples como essa, a sobrecarga não é perceptível, porém, em uma aplicação complexa, a sobrecarga pode ser bem significativa. É possível reduzir a sobrecarga limitando as classes, que têm seu perfil determinado, selecionando um método raiz de determinação de perfil.</p>
</div>
</div>
<div class="sect2">
<h3 id="_usando_métodos_raiz_de_determinação_de_perfil">Usando Métodos Raiz de Determinação de Perfil</h3>
<div class="paragraph">
<p>Neste exercício, você irá determinar o perfil de apenas uma parte da aplicação. Este método de determinação de perfil deve ser usado caso você saiba onde possa existir uma carência no desempenho, ou se deseja determinar o perfil de alguma parte específica do código, como um ou vários servlets. Esse método normalmente impõe uma sobrecarga de determinação de perfil significativamente menor que a instrumentação de todos os métodos da aplicação. Quando você instrumenta apenas parte da aplicação, somente os dados nos quais você tem interesse serão coletados e exibidos.</p>
</div>
<div class="paragraph">
<p>Para determinar o perfil de parte de uma aplicação, é necessário definir um ou mais métodos raiz de determinação de perfil. O IDE instrumenta apenas os métodos que são chamados por um thread inserindo um método raiz de determinação de perfil. Por exemplo, se você definir o método  <code>sayHello</code>  na classe  <code>StatelessSessionBean</code>  como o método raiz e usar o filtro Determinar Perfil somente das classes do projeto, o IDE iniciará a instrumentação dos métodos quando o método for chamado e um thread de aplicação inserir o método. Nessa aplicação, o construtor  <code>init</code>  não será instrumentado, pois ele foi chamado antes do  <code>sayHello</code> .</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/profileroot-sayhello-project.png" alt="profileroot sayhello project">
</div>
<div class="title">Figure 9. Gráfico de Análise Detalhada do tempo relativo gasto em servlets na aplicação</div>
</div>
<div class="paragraph">
<p>Caso selecione o filtro Determinar Perfil de todas as classes, o IDE instrumentará todos os métodos chamados pelo  <code>sayHello</code> , incluindo as classes principais do Java.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/profileroot-sayhello-all.png" alt="profileroot sayhello all">
</div>
<div class="title">Figure 10. Gráfico de Análise Detalhada do tempo relativo gasto em servlets na aplicação</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Em uma aplicação mais complexa, talvez seja melhor especificar vários métodos raiz. É possível selecionar métodos individuais, classes inteiras ou pacotes como raiz de determinação de perfil.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Para especificar uma raiz de determinação de perfil e analisar o desempenho da aplicação, execute as etapas a seguir.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pare a sessão anterior de determinação de perfil (se ainda estiver em execução) clicando no botão Parar na janela Determinação de Perfil.</p>
</li>
<li>
<p>Escolha Perfil &gt; Perfil do Projeto Principal no menu principal.</p>
</li>
<li>
<p>Selecione CPU na caixa de diálogo Selecionar Tarefa de Criação de Perfil.</p>
</li>
<li>
<p>Selecione o modo <strong>Avançado (instrumentado)</strong>.</p>
</li>
<li>
<p>Clique em <strong>Personalizar</strong> para abrir a caixa de diálogo Editar raízes da Determinação de perfil.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Para determinar o perfil de parte de uma aplicação, é necessário primeiro especificar os métodos raiz. Ao selecionar a raiz da determinação de perfil, você limita a determinação de perfis aos métodos chamados pelo thread inserindo a raiz de determinação de perfil.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na caixa de diálogo Editar Raízes da Determinação de Perfil, selecione Exibir Aplicação Web na lista drop-down Selecionar Exibição.</p>
</li>
<li>
<p>Expanda o nó do ServletStateless e selecione o método  <code>serviço</code>  no pacote Servlets. Clique em OK.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/edit-profiling-roots.png" alt="edit profiling roots">
</div>
<div class="title">Figure 11. Exibir Aplicação Web na caixa de diálogo Editar Raízes de Determinação de Perfil</div>
</div>
<div class="paragraph">
<p>Como alternativa, é possível selecionar Exibir Pacote para exibir todos os pacotes de códigos-fonte na aplicação e selecionar o método  <code>service</code>  na classe  <code>Servlet2Stateless</code>  no pacote  <code>servlet.stateless</code> .</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/edit-profiling-roots-pkg.png" alt="edit profiling roots pkg">
</div>
<div class="title">Figure 12. Exibir Pacote na caixa de diálogo Editar Raízes de Determinação de Perfil</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Observe que o construtor  <code>servlet2stateless</code>  não está selecionado. É possível usar a caixa de diálogo Editar Raízes da Determinação de Perfil para limitar a instrumentação a métodos específicos em uma classe. Caso não queira limitar a instrumentação para métodos específicos, use a Exibição de Pacote para selecionar uma classe ou um pacote inteiro. Por exemplo, se você selecionar a classe  <code>Servlet2Stateless</code>  em Exibir Pacote da caixa de diálogo Editar Raízes da Determinação de Perfil, o IDE instrumentará o construtor  <code>init</code>  e o método  <code>service</code> .
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ao clicar no botão Avançado, você poderá ver que o método  <code>serviço</code>  está listado como o único método raiz na caixa de diálogo Editar Raízes da Determinação de Perfil (Avançado). Clique em Adicionar para definir explicitamente um método digitando a assinatura e classe do método.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/edit-profilingroots-pkg-adv.png" alt="edit profilingroots pkg adv">
</div>
<div class="title">Figure 13. Caixa de diálogo Editar Raízes de Determinação de Perfil (Avançado)</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique em OK na caixa de diálogo Editar Raízes de Determinação de Perfil.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Na caixa de diálogo Selecionar Tarefa de Determinação de Perfil, você pode ver que o modo Avançado de determinação de perfil será executado usando raízes personalizadas de determinação de perfil. É possível clicar em <strong>editar</strong> para visualizar e modificar o método raiz selecionado. Observe que a sobrecarga da determinação de perfil agora é menor do que quando nenhum método raiz foi especificado.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Selecione <strong>Determinar Perfil somente das classes do projeto</strong> na lista drop-down do Filtro. Clique em Executar.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/advanced-cpu-task-custom.png" alt="advanced cpu task custom">
</div>
<div class="title">Figure 14. Modo de Perfil da Aplicação selecionado com uma raiz de determinação de perfil personalizada</div>
</div>
<div class="paragraph">
<p>Quando você clica em Executar, o IDE constrói e implanta a aplicação e abre o browser da Web na página do servlet.</p>
</div>
<div class="paragraph">
<p>O IDE exibe os resultados da determinação de perfil na guia Resultados Ao Vivo da Determinação de Perfil.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cpu-pane2-results.png" alt="cpu pane2 results">
</div>
<div class="title">Figure 15. Resultados de métodos de instrumentação utilizando uma raiz de determinação de perfil</div>
</div>
<div class="paragraph">
<p>Observe que o IDE exibe somente os resultados para o método especificado como raiz de determinação de perfil. O thread da aplicação não inseriu nenhum outro método na aplicação após inserir a raiz de determinação de perfil.</p>
</div>
<div class="paragraph">
<p>Embora a aplicação tenha inserido outros métodos após inserir a raiz de determinação de perfil, esses outros métodos não são exibidos, pois o filtro de instrumentação limita a instrumentação para classes que são parte do projeto.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>No browser, digite seu nome no campo e clique em Enviar Consulta.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cpu-pane2-results1.png" alt="cpu pane2 results1">
</div>
<div class="title">Figure 16. Resultados de métodos de instrumentação utilizando uma raiz de determinação de perfil após chamar o método sayHello</div>
</div>
<div class="paragraph">
<p>Ao clicar em Enviar Consulta, você poderá ver que a guia Resultados da Determinação Ao Vivo de Perfil é atualizada para refletir a ação no browser. Clicar no botão chamou o método  <code>sayHello</code>  na classe  <code>StatelessSessionBean</code>  uma única vez. O método  <code>serviço</code>  também foi chamado novamente.</p>
</div>
<div class="paragraph">
<p>Os resultados exibem o desempenho da aplicação, mas podem não representar precisamente o desempenho de uma aplicação que vem sendo executada há algum tempo. Uma maneira de emular o desempenho de uma aplicação Web em condições mais realistas é executar um script gerador de carga.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Repita a etapa anterior algumas vezes no browser e clique em Redefinir Resultados na guia Resultados da Determinação Ao Vivo de Perfil para limpar os resultados.</p>
</li>
<li>
<p>Depois que os resultados de determinação de perfil forem redefinidos, digite seu nome e clique em Enviar Consulta mais uma vez.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cpu-pane2-results2.png" alt="cpu pane2 results2">
</div>
<div class="title">Figure 17. Resultados de métodos de instrumentação utilizando uma raiz de determinação de perfil após chamar o método sayHello</div>
</div>
<div class="paragraph">
<p>Se você olhar os resultados de determinação de perfil, em muitos casos, verá que o desempenho melhorou.</p>
</div>
</div>
<div class="sect2">
<h3 id="_usando_os_filtros_de_instrumentação">Usando os Filtros de Instrumentação</h3>
<div class="paragraph">
<p>Ao analisar o desempenho da CPU, você pode reduzir a sobrecarga da determinação de perfil selecionando um filtro de instrumentação na lista drop-down para limitar a determinação de perfis para o código-fonte no qual você tem interesse. Use o filtro para especificar as classes ou os pacotes que são instrumentados. Você pode selecionar entre os seguintes filtros default ou criar um filtro personalizado.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Determinar Perfil de todas as classes.</strong> Se você selecionar este filtro durante a determinação de perfil de uma aplicação Web ou aplicação corporativa, todas as classes, incluindo as principais classes Java e classes do servidor serão instrumentadas. É preciso ter cuidado ao escolher essa opção de filtro, pois instrumentar muitas classes pode impor uma sobrecarga <strong>muito</strong> significativa.</p>
</li>
<li>
<p><strong>Determinar Perfil somente das classes do projeto.</strong> Caso esteja determinando o perfil de uma aplicação corporativa, é recomendado que você use esse filtro para limitar o código instrumentado para as classes no projeto. As classes do servidor não serão instrumentadas.</p>
</li>
<li>
<p><strong>Determinar Perfil das classes de projeto e subprojeto.</strong> Ao determinar o perfil de um projeto de aplicação corporativa contém subprojetos como uma aplicação Web, módulos EJB ou bibliotecas de classe, você pode escolher este filtro para limitar o código instrumentado para as classes de subprojetos.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>É possível criar filtros personalizados para uso em projetos específicos ou para tipos específicos de determinação de perfil. Por exemplo, se você quiser um filtro de instrumentação ao determinar o perfil de aplicações Web no Oracle WebLogic Server, clique em “Editar conjuntos de filtros” para criar um conjunto de filtros que exclui as classes principais do Java, as classes do Oracle WebLogic e do NetBeans (útil quando o Monitor HTTP está ativado). Em seguida, atribua um nome ao conjunto de filtros, como “WebLogic Webapp Exclusive” e selecione esse filtro na lista drop-down Filtro ao determinar o perfil de aplicações implantadas no WebLogic Server.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/custom-filter.png" alt="custom filter">
</div>
<div class="title">Figure 18. Caixa de diálogo que aparece ao determinar um perfil pela primeira vez</div>
</div>
<div class="paragraph">
<p>É possível definir um filtro de instrumentação simples selecionando Filtro Rápido na lista drop-down Filtro para abrir a caixa de diálogo Definir Filtro Rápido. A seguir, é possível editar rapidamente a lista de pacotes ou classes que são instrumentados. Isso cria um Filtro Rápido que pode ser selecionado na lista drop-down Filtro.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/set-quick-filter.png" alt="set quick filter">
</div>
<div class="title">Figure 19. Caixa de diálogo que aparece ao determinar um perfil pela primeira vez</div>
</div>
<div class="paragraph">
<p>Para obter mais informações sobre definição e uso de filtros de instrumentação, consulte a documentação de determinação de perfil no IDE.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_analisando_o_uso_da_memória_da_aplicação">Analisando o Uso da Memória da Aplicação</h2>
<div class="sectionbody">
<div class="paragraph">
<p>É possível usar a ferramenta de determinação de perfil do IDE para analisar o uso de memória da aplicação corporativa para obter dados detalhados sobre a alocação de objeto ou coleta de lixo. A tarefa Analisar Uso da Memória fornece dados sobre objetos que foram alocados na aplicação alvo, como o número, o tipo e a localização dos objetos alocados.</p>
</div>
<div class="paragraph">
<p>Ao determinar o perfil do uso da memória, você não pode definir métodos-raiz de determinação de perfil e/ou filtros de instrumentação, para que todos os objetos criados durante a vida do servidor sejam rastreados. Isso pode levar a uma sobrecarga de determinação de perfil e consumo de memória significativos para servidores de aplicações complexas. Portanto, esteja ciente das possíveis limitações da sua máquina antes de realizar esse tipo de determinação de perfil. Para reduzir a sobrecarga da determinação de perfil, é possível modificar a definição, assim, o perfil será determinado apenas a cada dez objetos. Também é aconselhável desativar (limitar) o registro de rastreamentos da pilha para alocações de objeto.</p>
</div>
<div class="paragraph">
<p>Quando você determinar o perfil de aplicações corporativas para detectar vazamentos de memória, usar as métricas de Gerações Sobreviventes pode ser muito útil. Quando você rastreia o número de diversos ciclos de coleta de lixo do objetivo das gerações sobreviventes, a ferramenta poderá ajudá-lo a detectar vazamentos de memória antecipadamente, antes da aplicação usar qualquer quantidade perceptível de memória.</p>
</div>
<div class="paragraph">
<p>Para analisar o desempenho da memória, você escolhe o volume de dados que deseja obter ao selecionar uma das seguintes opções:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Rápida.</strong> Quando esta opção é selecionada, o criador de perfil faz amostras da aplicação para oferecer dados limitados a objetos ativos. Os objetos ativos são todos aqueles acessíveis (e inacessíveis) que não foram reivindicados pelo Coletor de Lixo. Esta opção só rastreia os objetos ativos e não rastreia alocações ao instrumentar. Não é possível para registrar rastreamentos de pilha ou para usar pontos de criação de perfil se você selecionar esta opção. Esta opção incorre em um overhead significativamente mais baixo que a opção Avançado.</p>
</li>
<li>
<p><strong>Avançado.</strong> A seleção dessa opção permite que você obtenha informações sobre número, tipo e local dos objetos alocados. Os objetos alocados são aqueles criados desde o início da aplicação (ou desde que os Resultados Coletados no criador de perfil foram redefinidos pela última vez). Todas as classes carregadas atualmente pelo destino JVM (e cada nova classe, conforme é carregada) são instrumentadas para produzir informações sobre alocações de objeto. É necessário selecionar esta opção se você quiser usar pontos de criação de perfil ao analisar o uso de memória ou se você desejar gravar a pilha de chamada. Estas opções incorrem em um overhead de criação de perfil maior que a opção Rápido.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Se você selecionar a opção Avançado, também poderá definir as opções a seguir.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>*Registrar Estilo de Vida Completo do Objeto * Selecione esta opção para registrar todas as informações de cada objeto, incluindo o número de gerações sobrevividas.</p>
</li>
<li>
<p><strong>Registrar Rastreamentos de Pilha para Alocação</strong>. Selecione esta opção para registrar a pilha de chamadas completa. Essa opção permite exibir a árvore de chamadas reversa das chamadas de método durante a exibição de uma tela da memória.</p>
</li>
<li>
<p><strong>Usar Pontos de Criação de Perfil definidos.</strong> Selecione esta opção para ativar pontos de criação de perfil. Os pontos de criação de perfil desativados são ignorados. Quando essa opção está desmarcada, todos os pontos de criação de perfil no projeto são ignorados.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>O medidor de Custo Adicional na janela Selecionar Tarefas de Criação de Perfil oferece uma aproximação do aumento ou diminuição no custo adicional da criação de perfil de acordo com as opções de criação de perfil selecionadas.</p>
</div>
<div class="paragraph">
<p>Agora você usará o IDE para analisar o desempenho da memória da aplicação corporativa. Se você quiser obter informações sobre gerações sobreviventes, escolha a opção <strong>Avançada</strong>. Como alternativa, se você quiser apenas dados sobre os objetos ativos, pode selecionar a opção <strong>Rápido</strong>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pare a sessão anterior de determinação de perfil (se ainda estiver em execução) clicando no botão Parar na janela Determinação de Perfil.
Quando você clica em Parar, o IDE se desconecta da aplicação.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Escolha Perfil &gt; Perfil do Projeto Principal no menu principal.</p>
</li>
<li>
<p>Selecione <strong>Memória</strong> na caixa de diálogo Selecionar Tarefa de Determinação de Perfil.</p>
</li>
<li>
<p>Selecione <strong>Avançado</strong>.</p>
</li>
<li>
<p>Selecione <strong>Registrar ciclo de vida completo do objeto</strong> para obter dados sobre gerações sobreviventes.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Se selecionar essa opção, você notará que o medidor de Sobrecarga aumentará consideravelmente. Ao determinar o perfil da aplicação corporativa, pode ser que você precise aumentar a memória do IDE, devido à quantidade de dados coletados.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Desmarque a seleção de <strong>Usar Pontos de Determinação de Perfil definidos</strong> (se selecionado). Clique em Executar.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/profile-memory-advanced.png" alt="profile memory advanced">
</div>
<div class="title">Figure 20. Caixa de diálogo Selecionar Tarefa de Determinação de Perfil diálogo mostrando tarefas e opções de Memória</div>
</div>
<div class="paragraph">
<p>Quando você clica em Executar, o IDE compila a aplicação, inicia o servidor no modo de perfil e a implanta a aplicação no servidor. Para exibir os resultados da criação de perfil, clique em Resultados em tempo real na janela Criador de Perfil para abrir a janela Resultados em Tempo Real. A janela Resultados Ao Vivo exibe informações sobre o tamanho e o número de objetos que estão alocados no JVM de destino. Além dos objetos alocados pela aplicação corporativa, os resultados também incluem todos os objetos alocados pelo servidor de aplicações.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/profile-memory-results.png" alt="profile memory results">
</div>
<div class="title">Figure 21. Guia de Resultados da Determinação de Perfil mostrando resultados de determinação de perfil do uso da memória</div>
</div>
<div class="paragraph">
<p>Por default, os resultados são armazenados e exibidos pelo número de bytes em tempo real, mas você pode clicar em um cabeçalho de coluna para alterar como os resultados são exibidos. Você também pode filtrar os resultados ao digitar um nome de classe na caixa de filtro abaixo da lista.</p>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Profiling%20Enterprise%20Applications">Enviar Feedback neste Tutorial</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_consulte_também">Consulte Também</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Este documento demonstrou as abordagens básicas para obter os dados de determinação de perfil ao determinar o perfil da aplicação corporativa que é implantada no servidor de aplicações do GlassFish.</p>
</div>
<div class="paragraph">
<p>Para obter informações mais detalhadas sobre as definições e funcionalidades de criação de perfil não abordadas neste documento, consulte a documentação incluída no produto e disponível no item de menu Ajuda.</p>
</div>
<div class="paragraph">
<p>Para ver documentos relacionados, consulte os seguintes recursos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://wiki.netbeans.org/wiki/view/NetBeansUserFAQ#section-NetBeansUserFAQ-Profiler">Perguntas mais frequentes do Determinador de Perfil do NetBeans</a>
Um documento contendo as perguntas frequentes sobre a determinação de perfil de aplicações no NetBeans IDE</p>
</li>
<li>
<p><a href="http://wiki.netbeans.org/wiki/view/FaqProfilerProfileFreeForm">FAQ: Criando o Perfil de um projeto de Forma livre</a></p>
</li>
<li>
<p><a href="../java/profiler-screencast.html">Screencast: Pontos de Determinação de Perfil, Gráfico de Análise Detalhada, Heap Walker</a>
Demonstração de algumas das funcionalidades da determinação de perfis no NetBeans IDE.</p>
</li>
<li>
<p><a href="../../../community/magazine/html/04/profiler.html">Criação Avançada de Perfil: Teoria na Prática</a></p>
</li>
<li>
<p><a href="http://profiler.netbeans.org/index.html">profiler.netbeans.org</a>
Site do projeto de determinação de perfil do NetBeans</p>
</li>
<li>
<p><a href="http://blogs.oracle.com/nbprofiler/">Blog do Profiler do NetBeans</a></p>
</li>
<li>
<p><a href="http://profiler.netbeans.org/mailinglists.html">Listas de Correspondência do Profiler do NetBeans</a></p>
</li>
<li>
<p><a href="http://profiler.netbeans.org/docs/help/5.5/index.html">Usando o Determinador de Perfil do NetBeans 5.5</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#top">início</a></p>
</div>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/javaee/profiler-javaee_pt_BR.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1><a href="/about/index.html">About</a></h1>
                <ul>
                    <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb110/nb110.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="/plugins/index.html">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2019 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
