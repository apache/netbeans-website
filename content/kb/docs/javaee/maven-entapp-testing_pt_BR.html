
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Testando uma Aplicação Corporativa Maven</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Testando uma Aplicação Corporativa Maven - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Testando uma Aplicação Corporativa Maven">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Testando uma Aplicação Corporativa Maven</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/javaee/maven-entapp-testing_pt_BR.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_utilizando_o_maven_no_ide">Utilizando o Maven no IDE</a></li>
<li><a href="#_criando_a_aplicação_corporativa">Criando a Aplicação Corporativa</a>
<ul class="sectlevel2">
<li><a href="#_criando_o_projeto_web">Criando o Projeto Web</a></li>
<li><a href="#_criando_a_classe_de_entidade">Criando a Classe de Entidade</a></li>
<li><a href="#_criando_o_bean_de_sessão">Criando o Bean de Sessão</a></li>
</ul>
</li>
<li><a href="#_criando_o_teste_do_bean_de_sessão">Criando o Teste do Bean de Sessão</a></li>
<li><a href="#_consulte_também">Consulte Também</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Este tutorial demonstra como testar uma aplicação corporativa simples utilizando arquétipos Maven e NetBeans IDE. Neste tutorial, você cria uma aplicação corporativa que contém uma classe de entidade e um bean de sessão. Você usará um assistente para criar uma classe de teste simples para a classe bean e, em seguida, executará o teste no IDE. A classe de teste criará uma instância do contêiner EJB incorporado no GlassFish para testar a conexão com o banco de dados.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Se você estiver usando GlassFish 3.1.x, consulte <a href="../../73/javaee/maven-entapp-testing.html">Testando uma Aplicação Corporativa Maven com o GlassFish Server 3.1 Incorporado</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Exercícios do Tutorial</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#intro">Utilizando o Maven no IDE</a></p>
</li>
<li>
<p><a href="#Exercise_1">Criando a Aplicação Corporativa</a></p>
</li>
<li>
<p><a href="#Exercise_1a">Criando o Projeto Web</a></p>
</li>
<li>
<p><a href="#Exercise_1b">Criando a Classe de Entidade</a></p>
</li>
<li>
<p><a href="#Exercise_1c">Criando o Bean de Sessão</a></p>
</li>
<li>
<p><a href="#Exercise_2">Criando o Teste de Bean de Sessão</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Para seguir este tutorial, são necessários os recursos e o software a seguir.</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Software ou Recurso</th>
<th class="tableblock halign-left valign-top">Versão Necessária</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pacote Java EE 7.4 e 8.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">JDK (Java Development Kit)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">versão 7 ou 8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GlassFish Server Open Source Edition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.0</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
O instalador do GlassFish Server é incluído quando você faz download do pacote Java EE. Você pode instalar e registrar o GlassFish como parte do processo de instalação do NetBeans IDE.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Pré-requisitos</strong></p>
</div>
<div class="paragraph">
<p>Este tutorial pressupõe que você tenha algum conhecimento básico das tecnologias a seguir, ou alguma experiência de programação com elas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Programação em Java</p>
</li>
<li>
<p>NetBeans IDE</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Antes de começar este tutorial, talvez você queira se familiarizar com a documentação a seguir.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://wiki.netbeans.org/MavenBestPractices">Melhores Práticas para o Apache Maven no NetBeans IDE</a></p>
</li>
<li>
<p><a href="http://books.sonatype.com/mvnref-book/reference/introduction.html">Capítulo 1. Introdução ao Apache Maven</a> (do <a href="http://books.sonatype.com/mvnref-book/reference/index.html">+Maven: A Referência Completa +</a>)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_utilizando_o_maven_no_ide">Utilizando o Maven no IDE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>O suporte ao Maven está totalmente integrado no NetBeans IDE. Desenvolver um projeto que utiliza o framework do Maven é quase igual a desenvolver um projeto no Ant. No entanto, há algumas diferenças relacionadas ao modo como o Maven constrói os projetos e trabalha com as dependências. As dicas a seguir podem ajudá-lo a evitar alguns problemas caso esteja criando uma aplicação Maven pela primeira vez.</p>
</div>
<div class="paragraph">
<p><strong>Verifique as definições do Maven</strong></p>
</div>
<div class="paragraph">
<p>Se este for seu primeiro Projeto Maven, pode ser necessário verificar as definições da configuração do Maven na janela Opções. Para completar este tutorial é preciso ter o Maven instalado em seu sistema local. O Maven está incorporado ao IDE e é instalado quando você instala o IDE.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abra a janela Opções no IDE (Ferramentas &gt; Opções; NetBeans &gt; Preferências no Mac).</p>
</li>
<li>
<p>Selecione a categoria Java na janela Opções e clique na guia Maven.</p>
</li>
<li>
<p>Confirme se um Início do Maven está especificado.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Você pode usar a versão do Maven incorporada no IDE ou especificar a localização de uma instalação local do Maven (requer versão 2.0.9 ou posterior).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique em OK para fechar a janela Opções.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Observações.</strong> O suporte a Maven será automaticamente ativado quando o Java estiver ativado no IDE. Você precisará ativar o plug-in Java EE, se não estiver ativado.</p>
</div>
<div class="paragraph">
<p><strong>Atualizar seus repositórios Maven</strong></p>
</div>
<div class="paragraph">
<p>Os repositórios remotos e locais do Maven são utilizados para a funcionalidade autocompletar código e para construir projetos. É necessário atualizar os índices dos repositórios remotos do Maven para garantir que os artefatos necessários estejam prontamente disponíveis no momento de desenvolver o projeto. Você pode configurar com que frequência o IDE verifica as atualizações na guia Maven da janela Opções. Você também pode executar uma verificação imediata das atualizações e explorar os repositórios remotos e locais do Maven na janela Serviço.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Escolha Janela &gt; Serviços para abrir a janela Serviços.</p>
</li>
<li>
<p>Expanda o nó Repositórios do Maven na janela Serviços.</p>
</li>
<li>
<p>Clique com o botão direito do mouse no repositório e escolha Atualizar Índice no menu pop-up.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Quando você clica em Atualizar Índices, o IDE verifica e faz o download do índice mais recente de cada um dos repositórios remotos do Maven. Um índice representa o estado atual dos artefatos localizados no repositório e é utilizado para proporcionar referências aos artefatos que estão disponíveis na aplicação. Por default, o IDE não faz download de um artefato de um repositório até que o artefato seja explicitamente necessário.</p>
</div>
<div class="paragraph">
<p><strong>Observações.</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Os índices são muito grandes e pode levar algum tempo para atualizar todos eles.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Para obter mais detalhes sobre o uso do Maven no NetBeans IDE, consulte a seção <a href="https://netbeans.org/kb/docs/java/maven-hib-java-se.html#02">Configurando o Maven</a> no tutorial <a href="https://netbeans.org/kb/docs/java/maven-hib-java-se.html">Criando uma Aplicação Maven Swing Utilizando Hibernação</a> e também <a href="http://wiki.netbeans.org/MavenBestPractices">Melhores Práticas para o Apache Maven no NetBeans IDE</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_criando_a_aplicação_corporativa">Criando a Aplicação Corporativa</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nesta seção, você criará uma aplicação web simples que contém uma classe de entidade e um bean de sessão que acessa a classe de entidade.</p>
</div>
<div class="sect2">
<h3 id="_criando_o_projeto_web">Criando o Projeto Web</h3>
<div class="paragraph">
<p>Neste exercício, você utilizará o assistente Novo Projeto para criar uma aplicação web Java EE com base em um arquétipo Maven. Ao criar o projeto com o assistente, você especificará o GlassFish Server como o servidor de destino.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Selecione Arquivo &gt; Novo Projeto (Ctrl-Shift-N; ⌘-Shift-N no Mac) no menu principal para abrir o assistente Novo Projeto.</p>
</li>
<li>
<p>Selecione Aplicação Web na categoria Maven. Clique em Próximo.</p>
</li>
<li>
<p>Chame o projeto de <strong>mavenwebtestapp</strong> e defina a localização dele. Clique em Próximo.</p>
</li>
<li>
<p>Selecione o GlassFish Server na lista drop-down Servidor.</p>
</li>
<li>
<p>Selecione Java EE 6 Web ou Java EE 7 Web na lista drop-down Java EE Version. Clique em Finalizar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Quando você clica em Finalizar, o IDE cria a aplicação web e abre o projeto na janela Projetos.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-testing-projects.png" alt="maven testing projects">
</div>
<div class="title">Figure 1. Janela Projetos que mostra projetos gerados</div>
</div>
<div class="paragraph">
<p>Se você expandir o nó do projeto na janela Projetos, poderá notar que o JAR  <code>javaee-web-api</code>  está listado como uma dependência do projeto e que o JDK está listado como uma dependência do Java. O IDE gerou o POM do projeto ( <code>pom.xml</code> ) e o arquivo foi listado no nó Arquivos do Projeto.</p>
</div>
</div>
<div class="sect2">
<h3 id="_criando_a_classe_de_entidade">Criando a Classe de Entidade</h3>
<div class="paragraph">
<p>Neste exercício, você usa o assistente Novo Arquivo para criar uma classe de entidade. Ao criar a classe de entidade, você selecionará a fonte de dados  <code>jdbc/sample</code>  no assistente. Não é preciso criar ou registrar uma nova fonte de dados, pois a fonte de dados  <code>jdbc/sample</code>  foi registrada quando você instalou o servidor.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Se quiser criar uma nova fonte de dados ou usar uma fonte de dados diferente, a fonte de dados deverá ser registrada no servidor, antes de você testar a aplicação que usa o contêiner incorporado. Quando você testar a aplicação usando o contêiner incorporado, o IDE não registrará a fonte de dados para você como faz ao implantar em uma instância do GlassFish Server.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse no nó do projeto e selecione Novo &gt; Classe de Entidade.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Como alternativa, selecione Arquivo &gt; Novo Arquivo (Ctrl-N; ⌘-N no Mac) no menu principal e selecione Classe de Entidade na categoria Persistência.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Digite <strong>MyEntity</strong> para o Nome da Classe.</p>
</li>
<li>
<p>Selecione  <code>com.mycompany.mavenwebtestapp</code>  como o Pacote e defina o Tipo de Chave Primária como * <code>int</code> *.</p>
</li>
<li>
<p>Confirme se Criar Unidade de Persistência está selecionado. Clique em Próximo.</p>
</li>
<li>
<p>Selecione <strong>jdbc/sample</strong> na lista drop-down Fonte de Dados.</p>
</li>
<li>
<p>Confirme se a opção Usar APIs de Transação Java está selecionada e selecione Soltar e Criar como a Estratégia de Geração de Tabela. Clique em Finalizar.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-testing-pu.png" alt="maven testing pu">
</div>
<div class="title">Figure 2. Janela Projetos que mostra projetos gerados</div>
</div>
<div class="paragraph">
<p>Quando você clica em Finalizar, o IDE gera a classe MyEntity e abre a classe no editor de código-fonte. O IDE adiciona os artefatos  <code>eclipselink</code> ,  <code>javax.persistence</code>  e  <code>org.eclipse.persistence.jpa.modelgen.processor</code>  como dependências de projeto.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>No editor de código-fonte, adicione o campo privado  <code>nome</code>  à classe.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private String name;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse no editor e selecione Getter e Setter no menu pop-up Inserir Código (Alt-Insert; Ctrl+I no Mac) para gerar um getter e um setter para o campo  <code>nome</code> .</p>
</li>
<li>
<p>Adicione o construtor a seguir.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public MyEntity(int id) {
    this.id = id;
    name = "Entity number " + id + " created at " + new Date();
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione as anotações  <code>@NamedQueries</code>  e  <code>@NamedQuery</code>  a seguir (em negrito) para criar uma consulta SQL nomeada que localizará todos os registros na tabela MyEntity.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Entity
*@NamedQueries({
    @NamedQuery(name = "MyEntity.findAll", query = "select e from MyEntity e")})*
public class MyEntity implements Serializable {</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique na dica na margem esquerda próximo da declaração de classe e selecione a dica <strong>Criar construtor default</strong>.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-testing-createconstructor.png" alt="maven testing createconstructor">
</div>
<div class="title">Figure 3. Janela Projetos que mostra projetos gerados</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Corrija as instruções de importação (Ctrl-Shift-I; ⌘-Shift-I no Mac) para adicionar instruções de importação para  <code>javax.persistence.NamedQuery</code> ,  <code>javax.persistence.NamedQueries</code>  e  <code>java.util.Date</code> . Salve as alterações.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_criando_o_bean_de_sessão">Criando o Bean de Sessão</h3>
<div class="paragraph">
<p>Neste exercício, você utilizará o assistente para criar uma fachada de sessão para a classe de entidade  <code>MyEntity</code> . Quando você usa o assistente para gerar a fachada, o IDE também gerará uma fachada abstrata que contém alguns métodos, como  <code>create</code>  e  <code>find</code> , que são usados comumente ao acessar classes de entidade. Você adicionará, em seguida, dois métodos à fachada.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse no nó do projeto e selecione Novo &gt; Outro.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Como alternativa, selecione Arquivo &gt; Novo Arquivo (Ctrl-N; ⌘-N no Mac) no menu principal para abrir o assistente Novo Arquivo.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Selecione Beans de Sessão para Classes de Entidade na categoria Enterprise JavaBeans. Clique em Próximo.</p>
</li>
<li>
<p>Na lista de Classes de Entidade Disponíveis, selecione  <code>MyEntity</code>  e clique em Adicionar. Clique em Próximo.</p>
</li>
<li>
<p>Use as propriedades default no painel Beans de Sessão Gerados do assistente. Clique em Finalizar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Quando você clicar em Finalizar, o IDE gerará  <code>AbstractFacade.java</code>  e  <code>MyEntityFacade.java</code>  no pacote  <code>com.mycompany.mavenwebtestapp</code>  e abrirá as classes no editor de código-fonte.</p>
</div>
<div class="paragraph">
<p>No editor de código-fonte, você poderá ver que o IDE gerou o código para  <code>EntityManager</code>  e adicionou a anotação  <code>@PersistenceContext</code>  para especificar a unidade de persistência.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Stateless
public class MyEntityFacade extends AbstractFacade&lt;MyEntity&gt; {
    @PersistenceContext(unitName = "com.mycompany_mavenwebtestapp_war_1.0-SNAPSHOTPU")
    private EntityManager em;

    @Override
    protected EntityManager getEntityManager() {
        return em;
    }

    public MyEntityFacade() {
        super(MyEntity.class);
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Adicione os seguintes métodos a  <code>MyEntityFacade.java</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    @PermitAll
    public int verify() {
        String result = null;
        Query q = em.createNamedQuery("MyEntity.findAll");
        Collection entities = q.getResultList();
        int s = entities.size();
        for (Object o : entities) {
            MyEntity se = (MyEntity) o;
            System.out.println("Found: " + se.getName());
        }

        return s;
    }

    @PermitAll
    public void insert(int num) {
        for (int i = 1; i &lt;= num; i++) {
            System.out.println("Inserting # " + i);
            MyEntity e = new MyEntity(i);
            em.persist(e);
        }
    }</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Corrija suas importações para adicionar as instruções de importação necessárias. Salve as alterações.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-testing-fiximports.png" alt="maven testing fiximports">
</div>
<div class="title">Figure 4. Janela Projetos que mostra projetos gerados</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Confirme se * <code>javax.persistence.Query</code> * está selecionado na caixa de diálogo Corrigir Todas as Importações.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_criando_o_teste_do_bean_de_sessão">Criando o Teste do Bean de Sessão</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nesta seção, você criará uma classe de teste JUnit para a fachada de sessão  <code>MyEntityFacade</code> . O IDE gerará métodos de teste esqueletos para cada um dos métodos na classe de fachada, bem como para cada um dos métodos na fachada abstrata. Você anotará os métodos de teste que são gerados para os métodos na fachada abstrata para instruir o IDE e o executor do teste de JUnit a ignorá-los. Em seguida, você modificará o método de teste do método  <code>verify</code>  que foi adicionado a  <code>MyEntityFacade</code> .</p>
</div>
<div class="paragraph">
<p>Nos testes gerados, você verá que o IDE adiciona automaticamente um código que chama o  <code>EJBContainer</code>  para criar uma instância do contêiner EJB.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse em  <code>MyEntityFacade.java</code>  na janela Projetos e escolha Ferramentas &gt; Criar Testes.</p>
</li>
<li>
<p>Selecione um framework de teste na lista drop-down Framework</p>
</li>
<li>
<p>Use as opções default na caixa de diálogo Criar Testes. Clique em OK.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Na primeira vez que você criar um teste de JUnit, deverá especificar a versão do framework de JUnit. Selecione a JUnit 4.x como a versão de JUnit e clique em Selecionar.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Por default, o IDE gera uma classe de teste esqueleto que contém testes para cada um dos métodos em  <code>MyEntityFacade</code>  e  <code>AbstractFacade</code> . O IDE adiciona, automaticamente, uma dependência no JUnit 4.10 para o POM.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Anote cada um dos métodos de teste, exceto  <code>testVerify</code> , com a anotação  <code>@Ignore</code> . O IDE ignorará cada um dos testes anotados com  <code>@Ignore</code>  ao executar os testes.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Como alternativa, você pode deletar todos os métodos de teste, exceto  <code>testVerify</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Localize o método de teste  <code>testVerify</code>  na classe de teste.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Você pode ver que o teste contém uma linha que chama  <code>EJBContainer</code> .</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    @Test
    public void testVerify() throws Exception {
        System.out.println("verify");
        EJBContainer container = javax.ejb.embeddable.EJBContainer.createEJBContainer();
        MyEntityFacade instance = (MyEntityFacade)container.getContext().lookup("java:global/classes/MyEntityFacade");
        int expResult = 0;
        int result = instance.verify();
        assertEquals(expResult, result);
        container.close();
        // TODO review the generated test code and remove the default call to fail.
        fail("The test case is a prototype.");
    }</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Faça as seguintes alterações (em negrito) no esqueleto do método de teste  <code>testVerify</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Test
public void testVerify() throws Exception {
    System.out.println("verify");
    EJBContainer container = javax.ejb.embeddable.EJBContainer.createEJBContainer();
    MyEntityFacade instance = (MyEntityFacade)container.getContext().lookup("java:global/classes/MyEntityFacade");
    *System.out.println("Inserting entities...");
    instance.insert(5);*
    int result = instance.verify();
    *System.out.println("JPA call returned: " + result);
    System.out.println("Done calling EJB");
    Assert.assertTrue("Unexpected number of entities", (result == 5));*
    container.close();
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Corrija as instruções de importação para adicionar  <code>junit.framework.Assert</code> . Salve as alterações.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Você agora precisa modificar o POM para adicionar uma dependência ao  <code>&lt;glassfish.embedded-static-shell.jar&gt;</code>  que está localizado em sua instalação local do GlassFish Server.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abra  <code>pom.xml</code>  no editor e localize o elemento  <code>&lt;properties&gt;</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">    &lt;properties&gt;
        &lt;endorsed.dir&gt;${project.build.directory}/endorsed&lt;/endorsed.dir&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
    &lt;/properties&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edite o elemento  <code>&lt;properties&gt;</code>  para adicionar o elemento  <code>&lt;glassfish.embedded-static-shell.jar&gt;</code>  (em <strong>negrito</strong>) que especifica a localização do JAR em sua instalação GlassFish local. Em seguida, você fará referência a esta propriedade na dependência do artefato.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">    &lt;properties&gt;
        &lt;endorsed.dir&gt;${project.build.directory}/endorsed&lt;/endorsed.dir&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
        *&lt;glassfish.embedded-static-shell.jar&gt;_&lt;INSTALLATION_PATH&gt;_/glassfish-4.0/glassfish/lib/embedded/glassfish-embedded-static-shell.jar&lt;/glassfish.embedded-static-shell.jar&gt;*

    &lt;/properties&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code><em>&lt;INSTALLATION_PATH&gt;</em></code>  é o caminho absoluto para sua instalação do GlassFish local. Será preciso modificar esse elemento no POM se o caminho para a instalação local for alterado.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique com o botão direito do mouse no nó Dependências na janela Projetos e selecione Adicionar Dependência.</p>
</li>
<li>
<p>Na caixa de diálogo Adicionar Dependência, digite <strong>embedded-static-shell</strong> no campo de texto Consultar.</p>
</li>
<li>
<p>Localize o JAR 4.0 nos resultados da pesquisa e clique em Adicionar.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-shell-dependency.png" alt="add shell dependency">
</div>
<div class="title">Figure 5. Janela Resultados do Teste</div>
</div>
<div class="paragraph">
<p>Quando você clica em Adicionar, o IDE adiciona a dependência ao POM.</p>
</div>
<div class="paragraph">
<p>Agora você quer modificar o POM para especificar a instalação local do GlassFish como a origem para o JAR.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Localize a dependência no POM e faça as seguintes alterações (em <strong>negrito</strong>) para modificar o elemento para fazer referência à propriedade  <code>&lt;glassfish.embedded-static-shell.jar&gt;</code>  que você adicionou e para especificar o  <code>&lt;escopo&gt;</code> . Salve as alterações.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">        &lt;dependency&gt;
            &lt;groupId&gt;org.glassfish.main.extras&lt;/groupId&gt;
            &lt;artifactId&gt;glassfish-embedded-static-shell&lt;/artifactId&gt;
            &lt;version&gt;4.0&lt;/version&gt;
            *&lt;scope&gt;system&lt;/scope&gt;
            &lt;systemPath&gt;${glassfish.embedded-static-shell.jar}&lt;/systemPath&gt;*
        &lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na janela Serviços, clique com o botão direito do mouse no nó GlassFish Server e selecione Iniciar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>O servidor do banco de dados JavaDB também será iniciado quando você iniciar o GlassFish Server.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na janela Projetos, clique com o botão direito do mouse no nó do projeto e selecione Testar,</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Quando você selecionar Testar, o IDE construirá a aplicação e executará a fase de teste do ciclo de vida da construção. Os testes de unidade serão executados com o plug-in surefire, que suporta a execução de testes JUnit 4.x. Para saber mais sobre o plug-in surefire, consulte <a href="http://maven.apache.org/plugins/maven-surefire-plugin/">http://maven.apache.org/plugins/maven-surefire-plugin/</a>.</p>
</div>
<div class="paragraph">
<p>Você pode ver os resultados do teste na janela Resultados do Teste. É possível abrir a janela Resultados do Teste selecionando Janela &gt; Saída &gt; Resultados do Teste no menu principal.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-test-results.png" alt="maven test results">
</div>
<div class="title">Figure 6. Janela Resultados do Teste</div>
</div>
<div class="paragraph">
<p>Na janela Resultados do Teste, você pode clicar no ícone Aprovado (<span class="image"><img src="images/test-ok_16.png" alt="test ok 16" title="Ícone Mostrar Aprovados"></span>) para exibir uma lista de todos os testes aprovados. Neste exemplo, você pode ver que nove testes passaram. Se observar a janela de Saída, você verá que só um teste foi executado e oito testes foram ignorados. Testes ignorados são incluídos na lista de testes aprovados, na janela Resultados do Teste.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Running com.mycompany.mavenwebtestapp.MyEntityFacadeTest
verify
...
Inserting entities...
Inserting # 1
Inserting # 2
Inserting # 3
Inserting # 4
Inserting # 5
Found: Entity number 2 created at Wed Oct 09 19:06:59 CEST 2013
Found: Entity number 4 created at Wed Oct 09 19:06:59 CEST 2013
Found: Entity number 3 created at Wed Oct 09 19:06:59 CEST 2013
Found: Entity number 1 created at Wed Oct 09 19:06:59 CEST 2013
Found: Entity number 5 created at Wed Oct 09 19:06:59 CEST 2013
JPA call returned: 5
Done calling EJB
...

Results :

Tests run: 9, Failures: 0, Errors: 0, Skipped: 8</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="/about/contact_form.html?to=3&amp;subject=Feedback:%20Creating%20an%20Enterprise%20Application%20Using%20Maven">Enviar Feedback neste Tutorial</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_consulte_também">Consulte Também</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Para obter mais informações sobre o uso do NetBeans IDE para desenvolver aplicações Java EE, consulte os seguintes recursos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="javaee-intro.html">Introdução à Tecnologia Java EE</a></p>
</li>
<li>
<p><a href="javaee-gettingstarted.html">Conceitos Básicos sobre Aplicações do Java EE</a></p>
</li>
<li>
<p><a href="maven-entapp.html">Criando uma Aplicação Corporativa com o Maven</a></p>
</li>
<li>
<p><a href="../../trails/java-ee.html">Trilha de Aprendizado do Java EE e Java Web</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Para obter mais informações sobre o uso de Enterprise Beans, consulte o <a href="http://download.oracle.com/javaee/6/tutorial/doc/">Tutorial do Java EE 6</a>.</p>
</div>
<div class="paragraph">
<p>Para enviar comentários e sugestões, obter suporte e se manter informado sobre os mais recentes desenvolvimentos das funcionalidades de desenvolvimento do Java EE do NetBeans IDE, <a href="../../../community/lists/top.html">inscreva-se na lista de correspondência de nbj2ee</a>.</p>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/javaee/maven-entapp-testing_pt_BR.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
