
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans Eコマース チュートリアル - 言語サポートの追加</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans Eコマース チュートリアル - 言語サポートの追加 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, NetBeans Eコマース チュートリアル - 言語サポートの追加">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>

  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">NetBeans Eコマース チュートリアル - 言語サポートの追加</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/javaee/ecommerce/language_ja.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#resourceBundles">リソースバンドルを理解する</a></li>
<li><a href="#multilingual">多言語対応ページを作成する</a>
<ul class="sectlevel2">
<li><a href="#createResource">リソースバンドルを作成する</a></li>
<li><a href="#register">アプリケーションでリソースバンドルを登録する</a></li>
<li><a href="#replace">ハードコード化されたテキストを <code>&lt;fmt:message&gt;</code> タグに置き換える</a></li>
<li><a href="#test">サポートされた言語をテストする</a></li>
</ul>
</li>
<li><a href="#toggle">「Language Toggle(言語切り替え)」を実装する</a>
<ul class="sectlevel2">
<li><a href="#toggleDisplay">切り替え表示を作成しブラウザの優先言語と同期する</a></li>
<li><a href="#handleRequest">「言語切り替え」からのリクエストを処理する機能を実装する</a></li>
<li><a href="#keepTrack">アプリケーションが元のページビューの経過を把握できるようにする</a></li>
</ul>
</li>
<li><a href="#seeAlso">関連参照</a>
<ul class="sectlevel2">
<li><a href="#_netbeans_リソース">NetBeans リソース</a></li>
<li><a href="#_外部リソース">外部リソース</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>この単元の目標は、Webアプリケーションの言語サポートを有効にする方法を説明することです。「言語サポート」とは、ここでは顧客が指定した言語に応じてページビューを表示することを指します。<code>AffableBean</code> アプリケーションのコンテキスト内で、以前の<a href="design.html#requirements">お客様のご要望</a>の概略にあったように、我々は英語とチェコ語の両方のサポートを提供することで合意しました。</p>
</div>
<div class="paragraph">
<p>これを達成するために、あなたは国際化のための Java サポートを使います。あなたは各言語用に_resource bundle_(リソースバンドル)を作成します。そして、Java ランタイム環境が着信したクライアントリクエストのために適切な言語を決定できるようにします。また、ユーザーが手動で言語を切り替えできるようにする「言語切り替え」を実装します。</p>
</div>
<div class="paragraph">
<p>NetBeans IDE は、アプリケーション コンテンツのローカライズのための特別サポートを提供しています。これには Customizer (カスタマイザー)ダイアログが含まれており、あなたは既存のリソースバンドルのベース名に新しいロケール(言語)を追加できます。同様に、特別のプロパティエディターも含まれており、あなたはテーブル レイアウトの中のすべてのロケールの key-value pairs (キーと値のペア)を見たり追加したりできます。これらはどちらもこのチュートリアルで利用します。</p>
</div>
<div class="paragraph">
<p>あなたはこのチュートリアルで構築するアプリケーションのライブデモを見ることができます： <a href="http://services.netbeans.org/AffableBean/">NetBeans Eコマース チュートリアル デモアプリケーション</a>。</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ソフトウェアまたはリソース</th>
<th class="tableblock halign-left valign-top">必須バージョン</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java バンドル版, 6.8 又は 6.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java Development Kit (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">バージョン 6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GlassFish サーバー</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">v3 又は Open Source Edition 3.0.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://dev.mysql.com/downloads/mysql/">MySQL データベースサーバー</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">バージョン 5.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot8.zip">AffableBean プロジェクト</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">スナップショット 8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot9.zip">AffableBean プロジェクト</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">スナップショット 9</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>ノート:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>NetBeans IDE を正常に実行するには Java 開発キット（JDK）が必要です。上記のリソースがなにもない場合は、あなたは JDK を最初にダウンロードしてインストールする必要があります。</p>
</li>
<li>
<p>NetBeans IDE Java バンドル版には、このチュートリアルで構築するアプリケーションに必要な Java Web と JAVA EE 技術が含まれています。</p>
</li>
<li>
<p>NetBeans IDE Java バンドル版もまた、このチュートリアルに必要な GlassFish サーバーを含んでいます。あなたは<a href="http://glassfish.dev.java.net/public/downloadsindex.html">個別に GlassFish サーバーをダウンロード</a>できますが、しかし、NetBeans の提供するバージョンをダウンロードすれば自動的に IDE に登録される利点があります。</p>
</li>
<li>
<p>あなたは、以前の単元を完了することなく、このチュートリアルの単元を追いかけることができます。そうするには<a href="setup.html">セットアップ手順</a>を参照してください。そこには、データベースを準備する方法や、IDE と GlassFish と MySQL 間の接続を確立する方法が説明されています。</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resourceBundles">リソースバンドルを理解する</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Java では、リソースバンドルは<a href="http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/util/ResourceBundle.html">`java.util.ResourceBundle`</a> クラスの表現です。Javadoc で述べられたように、</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>リソースバンドルはロケール固有のオブジェクトを含んでいます。プログラムがロケール固有のリソースを必要とするとき、例として文字列、あなたのプログラムは現在のユーザーのロケールに適したリソースバンドルから、それをロードすることができます。この方法で、リソースバンドルの中のロケール固有の情報全てではないが、ユーザーのロケールからほとんど隔離した、大部分が独立したプログラムコードを書くことができます。</p>
</div>
<div class="paragraph">
<p>これにより、あなたはプログラムを書くことができます：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>簡単にローカライズされるか、異なる言語に翻訳されるか</em></p>
</li>
<li>
<p><em>一度に複数のロケールを処理する</em></p>
</li>
<li>
<p><em>さらにロケールをサポートするように後から簡単に変更できる</em></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Javadoc から、<code>ResourceBundle`は、 <a href="http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/util/ListResourceBundle.html">+`ListResourceBundle</code>+</a> と <a href="http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/util/PropertyResourceBundle.html">`PropertyResourceBundle`</a>の両方の親であることに注意します。このチュートリアルでは、我々は <code>PropertyResourceBundle</code> を利用して、リソースを`.properties` 拡張子を使ったテキストファイルとして管理します。そしてそれには、キーと値のペアの形式でロケール固有の情報が入っています。新しい各翻訳では、リソースバンドルの新バージョンは、ロケール識別子をアンダースコア(&#8216;_&#8217;)を使用したベース名へ追加することで作成されます。たとえば、このチュートリアルで作成する2つのリソースバンドルの抜粋版は次のようになります：</p>
</div>
<div class="paragraph">
<p><strong>messages_en.properties</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">meats=meats
bakery=bakery</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>messages_cs.properties</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">meats=maso
bakery=pečivo</code></pre>
</div>
</div>
<div class="paragraph">
<p>上記の例で、「<code>messages</code>」はベース名を表しています。そしてロケール識別子は、アンダースコアでつなげられた２文字のコードです。 （つまり、&#8216;en&#8217; は英語で、&#8216;cs&#8217; はチェコ語です） 。２文字のコードは、言語の名前を表すコードのリストである国際標準 <a href="http://en.wikipedia.org/wiki/ISO_639">ISO 639</a> がもとになっています。ISO 639 標準は <a href="http://www.w3.org/International/">W3C 国際活動</a>で採用されており、 すべての主要なブラウザで使用されています。（これらはコードであり、<code>Accept-Language</code> HTTPヘッダーで解釈されます）。また <a href="http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/util/Locale.html">`java.util.Locale`</a> クラスにも内蔵されています。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="multilingual">多言語対応ページを作成する</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>AffableBean</code> アプリケーションに戻り、顧客との継続的な協議を経て以下の実装の詳細について合意しました：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ウェブサイトは、最初にユーザーブラウザの優先言語に基づいて表示される。</p>
</li>
<li>
<p>ブラウザの優先言語が英語でもチェコ語でもないときは、サイトは英語のテキストを表示します。</p>
</li>
<li>
<p>ページヘッダー内の「language toggle（言語切り替え）」により、ユーザーが言語を変更できるオプションがある。</p>
</li>
<li>
<p>「言語切り替え」を使用して言語を変更するときは、ユーザーは同じページビューにとどまる。</p>
</li>
<li>
<p>「言語切り替え」は確認ページに表示されてはならない。ユーザーはチェックアウトする前に、彼または彼女の言語を既に選択しているので。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>上記の点を実装するためにタスクを２つの部分に分割します。ページビューの基本的なバイリンガル（二か国語）サポートの作成から始めます。バイリンガル サポートを所定の位置に一度配置すると、「言語切り替え」が実装され、ユーザーが手動で言語を切り替えることができるようになります。</p>
</div>
<div class="paragraph">
<p>3つの基本的な手順があり、あなたの Web ページに多言語サポートを組み込むために、あなたはこの手順に従う必要があります。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>あなたがサポートする予定の各言語のリソースバンドルを作成します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>アプリケーションのリソースバンドルを登録するには、web.xml のデプロイメント記述子の中にコンテキストパラメータを設定します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>ページビューで、 「hard-coded（ハードコーディングされた）」テキストをリソースバンドルの中のキーを参照する <code>&lt;fmt:message&gt;</code> タグに置き換えます。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>次の演習では、上記の３つの手順を適用して、<code>AffableBean</code> の welcome ページに英語とチェコ語のサポートを統合する方法をデモします。そして Firefox を使用してブラウザの言語サポートでテストする方法を示して完了します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#createResource">リソースバンドルを作成する</a></p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><a href="#register">アプリケーションにリソースバンドルを登録する</a></p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p><a href="#replace">「ハードコード化された」テキストを「<code>&lt;fmt:message&gt;</code>」タグに置換する</a></p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p><a href="#test">サポートされた言語をテストする</a></p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="createResource">リソースバンドルを作成する</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>AffableBean プロジェクトの<a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot8.zip">スナップショット８</a>を IDE で開きます。[Open Project(プロジェクトを開く)] ( <span class="image"><img src="images/open-project-btn.png" alt="open project btn"></span> )ボタンをクリックして、ウィザードを使用して、プロジェクトをダウンロードしたコンピュータの場所を指示します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>[Run Project(プロジェクトを実行)]( <span class="image"><img src="images/run-project-btn.png" alt="run project btn"></span> )ボタンをクリックしてプロジェクトを実行し、それが適切にデータベースとアプリケーションサーバーに設定されるようにします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>プロジェクトを実行してエラーを受け取った場合、<a href="setup.html">セットアップ手順</a>を再度見ます。そこには、データベースを準備し IDE と GlassFish と MySQL 間の接続を確立する方法について説明されています。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>デフォルトのリソースバンドルの作成から始めて、ページビューで使用されるテキストを格納します。IDE のツールバーの [New File(新規ファイル)]( <span class="image"><img src="images/new-file-btn.png" alt="new file btn"></span> ) ボタンをクリックします。（または、Ctrl-n キーを押します。Macでは ⌘-N ）。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>[Categories(カテゴリ)] の下の [Other(その他)] を選択し、 [File Types(ファイルの種類)] の下の [ Properties File (プロパティファイル)] を選択します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/new-file-wzd.png" alt="new file wzd">
</div>
<div class="title">Figure 1. Create a new resource bundle using the File wizard</div>
</div>
<div class="paragraph">
<p>注。このウィザードは、選択した [file type(ファイルの種類)] の説明を提供しています：</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>resource bundle(.properties) ファイルを作成してアプリケーションを国際化します。そのためにあなたのコードから目に見える全てのテキスト文字列を分離します。リソースバンドル ファイルは、Antスクリプトのプロパティのような、他の種類の文字列を収集することにも使用できます。作成されたリソースバンドルはロケールを一つだけ含みますが、あなたは、作成したファイルのコンテキストメニューからロケールを追加することもできます。バンドルは、特定のロケール用のテキストファイル（プロパティファイル形式）の中で編集されるか、またはすべてのロケールの情報を表示するテーブルの中で編集されることができます。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>[次へ]をクリック。[Name and Location(名前と場所)] のステップで、File Name(ファイルの名前)]に [<code>messages</code> ]、 [Folder field(フォルダのフィールド)] に [<code>src/java/resources</code>] と入力します。これは、[<code>resources</code>]と名づけた新しいパッケージの中にリソースバンドルを配置するようウィザードに指示しています。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/new-properties-file-wzd.png" alt="new properties file wzd">
</div>
<div class="title">Figure 2. Specify the name and location of the resource bundle</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>[Finish]をクリックします。 [ Messages.properties ] リソースバンドルが生成され、エディタに開きます。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>注意。前述したように、新しい <code>messages.properties</code> ファイル名には、それに付加された言語コードがありません。これは次の理由によるものです。このファイルは_default_(デフォルト)のリソースバンドルとして使用されるためです。デフォルトのリソースバンドルが適用されるのは、Javaランタイム環境が要求されたロケールに直接マッチするものを見つけられない時です。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>プロジェクトの <code>index.jsp</code> ファイルをエディタで開きます。次のテキストが現在使用されていることに注意してください：</p>
<div class="ulist">
<ul>
<li>
<p><strong>Greeting:</strong> <code>Welcome to the online home of the Affable Bean Green Grocer.</code>
（ごあいさつ： ようこそ愛想のよいビーンのグリーン食料品店オンラインホームへ。）</p>
</li>
<li>
<p><strong>Introductory Message:</strong> <code>Enjoy browsing and learning more about our unique home delivery service bringing you fresh organic produce, dairy, meats, breads and other delicious and healthy items to your doorstep.</code>
welcome メッセージ： ブラウズしてお楽しみ下さい。そして私たちの独自の宅配サービスについて知ってください。新鮮な有機農産物、乳製品、肉、パン、他のおいしい健康商品をお客様の玄関までお届けするサービスです</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>また注意して下さい。<code>index.jsp</code> がブラウザでレンダリングされる時に、表示される4つのカテゴリの言語固有の名前が必要になります。これらの名前は現在データベースから取得されるので、私たちはリソースバンドルのキーとしてそれらを使用することができます。</p>
</div>
<div class="paragraph">
<p><a href="#impDeets">「実装の詳細」</a>の一つを思い出して下さい。上記の状態は「ブラウザの優先言語が英語でもチェコ語でない場合は、英語のテキストでサイトが表示される。」です。； したがって、我々が <code>messages.properties</code> ファイルに適用する値は英語になります。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p><code>messages.properties</code> ファイルの中に、welcome ページで使用されるテキストのキーと値のペアを追加することから始めます。以下の内容を追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java"># welcome page
greeting=Welcome to the online home of the Affable Bean Green Grocer.
introText=Our unique home delivery service brings you fresh organic produce, dairy, meats, breads and other delicious and healthy items direct to your doorstep.

# categories
dairy=dairy
meats=meats
bakery=bakery
fruit\ &amp;amp;\ veg=fruit &amp;amp; veg</code></pre>
</div>
</div>
<div class="paragraph">
<p>コメントは番号記号(&#8216;#&#8217;)を使って追加します。また、<code>fruit &amp; veg</code> カテゴリ名にはスペースが含まれているためスペース文字はバックスラッシュ(&#8216;\&#8217;)を使いエスケープする必要があります。そしてリソースバンドルのキーとしてその名前を使用します。</p>
</div>
<div class="paragraph">
<p>今、我々はアプリケーションの welcome ページのデフォルトのリソースバンドルを完了しました。次は、お客様が指定した言語のリソースバンドルを引き続き作成しましょう。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>プロジェクトウィンドウで、[Source Packages(ソースパッケージ)] ノードを展開し、[<code>resources</code>] &gt; [<code>messages.properties</code>] ファイルノードで右クリックし、 [Customize (カスタマイズ)]を選択します。[Customizer(カスタマイザ)] ダイアログが開きます。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>カスタマイザのダイアログで、[Add Locale（ロケールの追加）]ボタンをクリックします。[New Locale(新しいロケール)]ダイアログボックスが表示され、[Language Code(言語コード) ] コンボ ボックスで[ &#8216;en&#8217; ] を入力して、[ OK ] をクリックします。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/new-locale-dialog.png" alt="new locale dialog">
</div>
<div class="title">Figure 3. The New Locale dialog enables you to add a new locale to an existing resource bundle base name</div>
</div>
<div class="paragraph">
<p>言語と地域の両方に、<em>locale</em>（ロケール） が定義されます。地域を指定するために使われるオプションの country コードは、日付、時刻、数値、および通貨の書式を定義するために適用されます。詳細については、技術資料、<a href="http://java.sun.com/developer/technicalArticles/J2SE/locale/">「Javaプラットフォームのロケールを理解する」</a>を参照してください。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="11">
<li>
<p>[Add Locale(ロケールの追加)]ボタンをもう一度クリックし、次に、[Language Code(言語コード)]コンボボックスに［ <code>cs</code> ］と入力し、[OK]をクリックします。カスタマイザのダイアログが次のように表示されます。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/customizer-dialog.png" alt="customizer dialog">
</div>
<div class="title">Figure 4. The New Locale dialog enables you to add a new locale to an existing resource bundle base name</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="12">
<li>
<p>[Close(閉じる)]をクリックします。プロジェクトウィンドウで、リソースバンドルが次のように見えることに注意してください。あなたはリソースバンドルを展開して、それに含まれているキーを表示することができます。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projects-window.png" alt="projects window">
</div>
<div class="title">Figure 5. View resource bundles and the keys they contain in the Projects window</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="13">
<li>
<p>3つのリソースバンドルのいずれかを右クリックし、[ Open(オープン)]を選択します。プロパティエディタが開き、あなたはテーブルレイアウトですべてのロケールのキーと値のペアを見ることも編集することもできます。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>IDE 内でウィンドウを最大化するためには、Shift-Esc キーを押します。</p>
</div>
<div class="paragraph">
<p>注意。あなたはカスタマイザダイアログを使用して新しいロケールを追加すると、前の手順で英語とチェコ語でやったように、デフォルトのリソースバンドルのキーと値は、新しいロケールにコピーされます</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="14">
<li>
<p>チェコ語リソースバンドルの値を変更します。これをするには、各行のテーブルのセルの中をクリックして直接あなたのエントリを入力するか、または、編集したいセルを選びプロパティエディタの下部にある <strong>Value</strong> フィールドに入力するか、どちらかの方法を使います。</p>
<div class="ulist">
<ul>
<li>
<p><strong>greeting:</strong> <code>Vítejte v našem domácím on-line obchodě Affable Bean Green Grocer.</code></p>
</li>
<li>
<p><strong>introText:</strong> <code>Naše jedinečná dodávková služba Vám zajistí dopravu čerstvých organických produktů, mléčných výrobků, uzenin, pečiva a dalších delikates a zdravých výroků až ke dveřím.</code></p>
</li>
<li>
<p><strong>dairy:</strong> <code>mléčné výrobky</code></p>
</li>
<li>
<p><strong>meats:</strong> <code>maso</code></p>
</li>
<li>
<p><strong>bakery:</strong> <code>pečivo</code></p>
</li>
<li>
<p><strong>fruit &amp; veg:</strong> <code>ovoce a zeleniny</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>また、各キーと値のペアにコメントを追加することができます。プロパティエディタの <strong>Comment</strong> フィールドに入力した全てのテキストは、リソースバンドルのテキストファイルにコメントとしてキーと値のペアの上に追加されます。（すなわち、&#8216;#&#8217; 記号の後に続けて）。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="15">
<li>
<p>プロジェクトウィンドウ内の <code>messages_cs.properties</code> ファイルノードをダブルクリックします。テキストファイルはプロパティエディタであなたの変更に応じて更新されていることに注意して下さい。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java"># welcome page
greeting=Vítejte v našem domácím on-line obchodě Affable Bean Green Grocer.
introText=Naše jedinečná dodávková služba Vám zajistí dopravu čerstvých organických produktů, mléčných výrobků, uzenin, pečiva a dalších delikates a zdravých výroků až ke dveřím.

# categories
dairy=mléčné výrobky
meats=maso
bakery=pečivo
fruit\ &amp;amp;\ veg=ovoce a zeleniny</code></pre>
</div>
</div>
<div class="paragraph">
<p>今、私たちは以下の定義されたリソースバンドルを持っています：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>default (English)</p>
</li>
<li>
<p>Czech</p>
</li>
<li>
<p>English</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>デフォルトのバンドルが英語の場合、明示的に英語のリソースバンドルを作成する必要はないとあなたは思うかもしれません。ただし、次のシナリオを考えてみます：クライアントブラウザの優先言語のリストに、チェコ語、英語の両方が含まれており、チェコ語より英語を優先しています。もしアプリケーションが英語のリソースバンドルを提供せずチェコ語を提供している場合は、ページはブラウザにチェコ語を送信します。（チェコ語バンドルが定義されているので）。これは明らかにそのブラウザの目的の動作ではありません。</p>
</div>
</div>
<div class="sect2">
<h3 id="register">アプリケーションでリソースバンドルを登録する</h3>
<div class="paragraph">
<p>この手順の目的は、JSTL 形式の情報を提供することです。（すなわち、<a href="http://download.oracle.com/docs/cd/E17802_01/products/products/jsp/jstl/1.1/docs/tlddocs/fmt/tld-summary.html">`fmt`</a>) タグライブラリはアプリケーション内にあるどんなリソースバンドルを見つけることができます。これを達成するために、既存のリソースバンドルを使用して、アプリケーションに <a href="http://download.oracle.com/docs/cd/E17477_01/javaee/5/jstl/1.1/docs/api/javax/servlet/jsp/jstl/fmt/LocalizationContext.html">`LocalizationContext`</a> を作成するように指示します。アプリケーションの <code>web.xml</code> デプロイメント記述子にコンテキストパラメータを設定することによってこれを行うことができます。</p>
</div>
<div class="paragraph">
<p>コンテキストパラメータを設定する話題については、<a href="connect-db.html#param">「データベースへのアプリケーションの接続」</a>でカバーしています。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>プロジェクトウィンドウで、[Configuration Files(構成ファイル)]ノードを展開して、<code>web.xml</code> をダブルクリックしエディタに開きます。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>デプロイメント記述子の[General(全般)]タブでの下に、[Context Parameters(コンテキストパラメータ)]カテゴリを展開します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「Add (追加)」ボタンをクリックし、[Add Context Parameter (コンテキストパラメータの追加)] ダイアログの中で次の値を入力します。</p>
<div class="ulist">
<ul>
<li>
<p><strong>Parameter Name:</strong> <code>javax.servlet.jsp.jstl.fmt.localizationContext</code></p>
</li>
<li>
<p><strong>Parameter Value:</strong> <code>resources.messages</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-context-parameter.png" alt="add context parameter">
</div>
<div class="title">Figure 6. Add context parameters under the General tab for web.xml</div>
</div>
<div class="paragraph">
<p><code>LocalizationContext</code> クラスは、<code>javax.servlet.jsp.jstl.fmt</code> パッケージに所属しています。あなたは、<a href="http://java.sun.com/products/jsp/jstl/1.1/docs/api/index.html">JSTLの1.1 APIリファレンス</a> オンラインを見ることによってこれを確認することができます。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>[OK] をクリックします。新しいコンテキストパラメータは[General（全般）]タブの下の既存のコンテキストパラメータのテーブルに追加されます。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>デプロイメント記述子の XML タブをクリックします。以下のエントリがそのファイルに追加されていることに注意します：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;context-param&gt;
    &lt;param-name&gt;javax.servlet.jsp.jstl.fmt.localizationContext&lt;/param-name&gt;
    &lt;param-value&gt;resources.messages&lt;/param-value&gt;
&lt;/context-param&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="replace">ハードコード化されたテキストを <code>&lt;fmt:message&gt;</code> タグに置き換える</h3>
<div class="paragraph">
<p>リソースバンドルのローカライズされたテキストをお客様のウェブページに適用するために、あなたが作成したキーと値のペアからキーを参照します。JSTLの <code>&lt;fmt:message&gt;</code> タグを使用して、あなたはキーを参照することができます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>プロジェクトの <code>index.jsp</code> ページをエディタに開きます。（もし既に開いている場合は、Ctrl-Tabを押し、そのファイルに切り替えます。 ）</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>ページの左側の列に表示されているハードコードされたテキストのインスタンスを削除しその場所に <code>&lt;fmt:message&gt;</code> タグを入力します。こうするために、 <code>key</code> 属性を使いリソースバンドルのキーを指示します。ページの左側の列は次のようになります。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div id="indexLeftColumn"&gt;
    &lt;div id="welcomeText"&gt;
        &lt;p style="font-size: larger"&gt;*&lt;fmt:message key='greeting'/&gt;*&lt;/p&gt;

        &lt;p&gt;*&lt;fmt:message key='introText'/&gt;*&lt;/p&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>4つのカテゴリの名前に <code>&lt;fmt:message&gt;</code> タグを追加します。しかし、<code>key</code> 属性の値として、<code>${category.name}</code> 式を使用します。カテゴリ名は、<code>&lt;img&gt;</code> タグの <code>alt</code>（代替）属性の値としても使用されるので、同じ手順に従います。ページの右の列は次のようになります。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div id="indexRightColumn"&gt;
    &lt;c:forEach var="category" items="${categories}"&gt;
        &lt;div class="categoryBox"&gt;
            &lt;a href="&lt;c:url value='category?${category.id}'/&gt;"&gt;
                &lt;span class="categoryLabel"&gt;&lt;/span&gt;
                &lt;span class="categoryLabelText"&gt;*&lt;fmt:message key='${category.name}'/&gt;*&lt;/span&gt;

                &lt;img src="${initParam.categoryImagePath}${category.name}.jpg"
                     alt="*&lt;fmt:message key='${category.name}'/&gt;*" class="categoryImage"&gt;
            &lt;/a&gt;
        &lt;/div&gt;
    &lt;/c:forEach&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>最後に、Web ページに <code>fmt</code> タグライブラリが宣言されていることを確認します。そのファイルの先頭に次のように入力してください：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>注：</strong> ここでは、あなたはタグライブラリの宣言を <code>index.jsp</code> ファイルの先頭に追加します。しかし、プロジェクトのほかの場所で <code>&lt;fmt&gt;</code> タグを使い始めるときは、個々のページビューからタグライブラリ宣言を削除する方が理にかなっているかもしれません。そして、それをヘッダ(<code>header.jspf</code>)ファイルに追加します。このようなやり方は<a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot9.zip">「 スナップショット 9」</a>（およびそれ以降のスナップショット）で採用しています。</p>
</div>
<div class="paragraph">
<p>これで、アプリケーションのウェルカムページへバイリンガルのサポートを提供するための必要なタスクを完了しました。次の手順では、お使いのブラウザで言語サポートをテストする方法をデモします。</p>
</div>
</div>
<div class="sect2">
<h3 id="test">サポートされた言語をテストする</h3>
<div class="paragraph">
<p>あなたは理論的には、アプリケーションでサポートされた言語を含む以下のシナリオをテストできるだけでなく、サポートされていない言語も同様にテストすることができます（例えば、韓国語）。：</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Use-case</th>
<th class="tableblock halign-left valign-top">Outcome</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> 1. Browser has no preferred language</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">English displays</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> 2. Browser prefers only English</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">English displays</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> 3. Browser prefers only Czech</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Czech displays</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> 4. Browser prefers only Korean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">English displays</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> 5. Browser prefers Korean and English; Korean takes precedence</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">English displays</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> 6. Browser prefers Korean and English; English takes precedence</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">English displays</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> 7. Browser prefers Korean and Czech; Korean takes precedence</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Czech displays</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> 8. Browser prefers Korean and Czech; Czech takes precedence</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Czech displays</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"> 9. Browser prefers English and Czech; English takes precedence</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">English displays</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10. Browser prefers English and Czech; Czech takes precedence</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Czech displays</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11. Browser prefers, in the following order, English, Czech, Korean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">English displays</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12. Browser prefers, in the following order, English, Korean, Czech</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">English displays</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13. Browser prefers, in the following order, Czech, English, Korean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Czech displays</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14. Browser prefers, in the following order, Czech, Korean, English</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Czech displays</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">15. Browser prefers, in the following order, Korean, English, Czech</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">English displays</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16. Browser prefers, in the following order, Korean, Czech, English</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Czech displays</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>全16のシナリオをステップ実行するよりもむしろ、我々は上記のシナリオ３を調べる方法をデモします。ここには、ブラウザの優先言語はチェコ語で Firefox ブラウザを使用しています。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Firefox で、 [ツール] &gt; [オプション] （Macでは、 [Firefox] &gt; [Preferences(設定)]）を選択します。表示されたウィンドウで、 [ Content (コンテンツ)]タブをクリックします。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/firefox-content.png" alt="firefox content">
</div>
<div class="title">Figure 7. Examine your browser&#8217;s preferred languages</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>[Languages(言語)]見出しの下で、［Choose］をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>用意されたテキストエリアに現在リストされた任意の言語を選択して、［ Remove（削除）］をクリックします。 （あなたの言語のリストを覚えておいてください、そしてこのチュートリアルを完了後に言語を元に戻してください。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>［ 'Select Language to Add' (言語を選択して追加する)]ドロップダウンをクリックして、 <code>Czech [cs]</code> を選択します。そして、[ Add (追加)]ボタンをクリックします。 Czech language (チェコ語) がテキストエリアに追加されます。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/firefox-languages.png" alt="firefox languages">
</div>
<div class="title">Figure 8. Specify your browser&#8217;s preferred languages</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>[OK]をクリックして、Esc キーを押し Firefoxの[Options(オプション)]ウィンドウを閉じます。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>プロジェクトを実行します( <span class="image"><img src="images/run-project-btn.png" alt="run project btn"></span> )。welcome ページがブラウザに開き、テキストがチェコ語で表示されることに注意してください。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/czech-text.png" alt="czech text">
</div>
<div class="title">Figure 9. The displayed language is determined by your browser&#8217;s language preferences</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="toggle">「Language Toggle(言語切り替え)」を実装する</h2>
<div class="sectionbody">
<div class="paragraph">
<p>今、基本的なチェコ語－英語サポートができました。続けて、アプリケーションのページビューで「言語切り替え」を実装します。我々はこのタスクを３つの部分に分けることができます：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#toggleDisplay">「Toggle Display切り替え表示」を作成しブラウザの優先言語と同期する</a></p>
</li>
<li>
<p><a href="#handleRequest">「言語切り替え」からのリクエストを処理する機能を実装する</a></p>
</li>
<li>
<p><a href="#keepTrack">アプリケーションが元のページビューの追跡を保持できるようにする</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="toggleDisplay">切り替え表示を作成しブラウザの優先言語と同期する</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>［Go to File］ダイアログを使用して、<code>header</code> JSP のフラグメントをエディターに開きます。Alt-Shift-O （Ctrl-Shift-O 、Macの場合）キーを押し、ダイアログで「 h 」 と入力し、［OK］をクリックします。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/go-to-file-dialog.png" alt="go to file dialog">
</div>
<div class="title">Figure 10. Use the Go to File dialog to quickly open project resources in the editor</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><code>header.jspf</code> ファイルで、最初の <code>&lt;div class="headerWidget"&gt;</code> タグを見つけます（ 56行）。そして、<code>[ language toggle ]</code>(言語切り替え) プレースホルダのテキストを以下のHTMLマークアップに置き換えます。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div class="headerWidget"&gt;

    *&lt;%-- language selection widget --%&gt;
    english | &lt;div class="bubble"&gt;&lt;a href="chooseLanguage?language=cs"&gt;česky&lt;/a&gt;&lt;/div&gt;*
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>このマークアップは、英語が表示言語の時の「言語切り替え」の外観を実装します。言い換えれば、［切り替え］は、ユーザーがチェコ語（すなわち、 &#8216;česky&#8217; ）オプションを選択できるリンクを提供します。リンクはリクエストを送信するために使用され、そしてリクエストされた言語コードを指定するクエリ文字列 (<code>?language=cs</code>)を作成します。</p>
</div>
<div class="paragraph">
<p><strong>注：</strong> ユニット5 <a href="page-views-controller.html#controller">「 ページビューとコントローラサーブレットの準備」</a>を思い出して、<code>ControllerServlet</code> が <code>/chooseLanguage</code> URLパターンを処理するように設定します。</p>
</div>
<div class="paragraph">
<p>上記の実装で、［ &#8216;rounded&#8217; ］クラスをトグルリンクに適用します。スナップショット8には、<a href="http://jquery.com/">jQuery</a> の JavaScriptのライブラリが含まれています。そして、Webサイトの外観と動作を強化するさまざまなUI効果を活用します。 <a href="http://plugins.jquery.com/project/validate">クライアント側のjQueryプラグインの検証</a> （<a href="transaction.html#client">前の単元</a>で議論しました）は別として、スナップショットは <a href="http://plugins.jquery.com/project/corners">角丸用のプラグイン</a>を実装しています。プラグインには`rounded`（丸みを帯びさせる）クラスが必要で、HTML要素に丸みを帯びた角の効果をつけるためのクラスです。その他の効果もまた適用されています。welcomeページのカテゴリ見出しの緩和効果だけでなく、カテゴリページのカテゴリボタンにも適用されています。構成はプロジェクトのスナップショットの <code>header.jspf</code> に実装されています。 /p&gt;</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>プロジェクトを実行 ( <span class="image"><img src="images/run-project-btn.png" alt="run project btn"></span> ) して、トグルがブラウザでどのように見えるか確認します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/language-toggle.png" alt="language toggle">
</div>
<div class="title">Figure 11. Run the project to view the language toggle</div>
</div>
<div class="paragraph">
<p>現在のところ、「言語切り替え」は、どの言語でページが表示されていても、上の画像のように表示されます。次のステップで JSTL ロジックをトグルの中に統合します。そして、ページに表示された言語に応じてレンダリングされるようにします。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>トグル実装を次のように変更します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div class="headerWidget"&gt;

    &lt;%-- language selection widget --%&gt;
    *&lt;c:choose&gt;
      &lt;c:when test="${pageContext.request.locale.language ne 'cs'}"&gt;
        english
      &lt;/c:when&gt;
      &lt;c:otherwise&gt;
        &lt;c:url var="url" value="chooseLanguage"&gt;
          &lt;c:param name="language" value="en"/&gt;
        &lt;/c:url&gt;
        &lt;div class="bubble"&gt;&lt;a href="${url}"&gt;english&lt;/a&gt;&lt;/div&gt;
      &lt;/c:otherwise&gt;
    &lt;/c:choose&gt; |

    &lt;c:choose&gt;
      &lt;c:when test="${pageContext.request.locale.language eq 'cs'}"&gt;
        česky
      &lt;/c:when&gt;
      &lt;c:otherwise&gt;
        &lt;c:url var="url" value="chooseLanguage"&gt;
          &lt;c:param name="language" value="cs"/&gt;
        &lt;/c:url&gt;
        &lt;div class="bubble"&gt;&lt;a href="${url}"&gt;česky&lt;/a&gt;&lt;/div&gt;
      &lt;/c:otherwise&gt;
    &lt;/c:choose&gt;*
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>上記の実装で、あなたは JSTL の <code>core</code> タグライブラリからの条件タグを頼りに、リクエストロケールで使われる言語に対応したトグルの左と右の部分を表示します。"リクエストロケールで使用される言語はなんですか？。リクエストがされたとき、ブラウザは <code>Accept-Language</code> HTTP ヘッダー内の優先ロケールのリストを渡します。 サーバー上のJavaランタイム環境はそのリストを読み取り、アプリケーションのリソースバンドルで定義されたロケールに基づいて最も一致するものを決定します。そして、この一致したものは <code>ServletRequest</code> オブジェクトに記録され、<code>getLocale</code> メソッドからアクセスすることができます 。たとえば、次のステートメントでサーブレットから優先ロケールにアクセスすることができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">request.getLocale();</code></pre>
</div>
</div>
<div class="paragraph">
<p>あなたは、IDEのHTTPモニター（[ウィンドウ] &gt; [デバッグ] &gt; [HTTPサーバモニタ]）を使用して、クライアントのリクエストのHTTPヘッダを調べることができます。HTTPモニターを使用するには、あなたが使用しているサーバーでHTTPモニターを最初にアクティブ化することが必要です。ユニット8、<a href="manage-sessions.html">セッション管理</a> サブセクションの下の <a href="manage-sessions.html#http-monitor">クライアントサーバ間通信をHTTPモニタで調べる</a> でデモを提供しています。</p>
</div>
<div class="paragraph">
<p>優先ロケールの言語を決定するために、<code>Locale</code> クラスの'`getLanguage`’メソッドを使用します。繰り返しますが、サーブレットから、次のように、クライアント リクエストの優先ロケールの言語にアクセスすることができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">request.getLocale().getLanguage();</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>header.jspf</code> フラグメントへあなたが追加した実装に戻り、あなたは`pageContext.request` 暗黙オブジェクトを利用して、与えられたクライアントのリクエスト用の <code>ServletRequest</code> へアクセスします。ドット表記を使用して、その後、あなたがサーブレットからしたように、同じメソッドの呼び出しをします。上記の例で「リクエストロケールで使用される言語」へアクセスするのは以下のように簡単です：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">${pageContext.request.locale.language}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>注：</strong> 上記の実装は、<code>&lt;c:url&gt;</code> タグを使用してトグルリンクをセットアップしています。これは、セッショントラッキングの手段としてURL書き換えが使用されるイベントの中でリクエストURLを正しくエンコードするために行われます。ユニット８、<a href="manage-sessions.html#encodeUrl">セッション管理</a> に「 <code>&lt;c:url&gt;</code> タグの使われ方」の簡単な説明が載っています。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>基本的な言語のテストを <code>header.jspf</code> ファイルに追加します。これで、私たちが「クライアントリクエストの優先言語に応じてトグルが正常にレンダリングされるかどうか」を確認できるようになります。ページの <code>&lt;body&gt;</code> タグの後に次を入力します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;body&gt;

    *&lt;%-- Language test --%&gt;
    &lt;p style="text-align: left;"&gt;&lt;strong&gt;tests:&lt;/strong&gt;
        &lt;br&gt;
        &lt;code&gt;\${pageContext.request.locale.language}&lt;/code&gt;: ${pageContext.request.locale.language}
    &lt;/p&gt;*

    &lt;div id="main"&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>あなたはブラウザの優先言語としてチェコ語を設定していることを確認し。 （あなたがこのチュートリアルの単元通りに実行している場合は、すでにこれを行っています。もしそうでない場合は、上記<a href="#test">「サポートされた言語をテストする」</a>に概説されている手順を参照して下さい。）</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>プロジェクトを実行します<span class="image"><img src="images/run-project-btn.png" alt="run project btn"></span> )。そしてブラウザでアプリケーションの welcome ページを調べます。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/language-test.png" alt="language test">
</div>
<div class="title">Figure 12. Language toggle displays according to request&#8217;s preferred language</div>
</div>
<div class="paragraph">
<p>お使いのブラウザの優先言語がチェコ語に設定されている場合は、次のことに注意してください：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>我々が前の手順で紹介したテストでは「cs」が優先言語であると示しています。</p>
</li>
<li>
<p>チェコ語テキストがページに表示されます。</p>
</li>
<li>
<p>言語切り替えは、ユーザが英語を選択できるリンクを提供しています。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="handleRequest">「言語切り替え」からのリクエストを処理する機能を実装する</h3>
<div class="paragraph">
<p>今、トグルは所定の位置にあり、ページに表示される言語に対応してトグルが表示されます。続いて、<code>ControllerServlet</code> へユーザーが言語切り替えのリンクをクリックした時にリクエスト送信を行うコードを追加します。</p>
</div>
<div class="paragraph">
<p>上記<a href="#step4">ステップ 4</a>から、ここまでの言語切り替えの実装で示したように、クエリ文字列の付いたリクエストされた URL は次のようになります：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>English:</strong> <code>chooseLanguage?language=en</code></p>
</li>
<li>
<p><strong>Czech:</strong> <code>chooseLanguage?language=cs</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>私たちの目標は選択した言語を登録して、次にページビューと選択した言語に基づいた「言語切り替え」の両方を表示することです。 我々は、クエリ文字列から <code>language</code> パラメータを抽出することによりこれを達成することができます。そしてユーザーが選択した言語を記憶しているセッションスコープ <code>language</code> 属性を作成します。 その後、我々は <code>header.jspf</code> フラグメントに戻ります。そして <a href="http://download-llnw.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fmt/setLocale.html">`&lt;fmt:setLocale&gt;`</a> タグにユーザーの選択に基づいたページ言語を設定します。 <code>&lt;fmt:setLocale&gt;</code> タグで、我々はページ表示に使用される言語を手動で切り替えることができます。 我々は、また、言語切り替えを変更します。そして、もし`language`(言語)属性が既に設定されている場合、トグルの外観は <code>language</code> 属性の値に応じて決定されます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>ControllerServlet</code> をエディタで開きます。「Go To File(ファイルに移動)」ダイアログを使い（Alt-Shift-O（Ctrl -Shift-O Macの場合）を押し）、「&#8216;controller&#8217;」と入力し、「 OK」をクリックします。開いたファイルで、<code>chooseLanguage</code> リクエストを処理する <code>doGet</code> メソッドの部分を探します。（ 126行） 。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「<code>// TODO: Implement language request</code>」コメントを削除します。リクエストのクエリ文字列から <code>language</code> パラメーターを抽出するコードを入力します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// if user switches language
} else if (userPath.equals("/chooseLanguage")) {

    *// get language choice
    String language = request.getParameter("language");*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>リクエストスコープの <code>language</code> を探し、以下を追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// if user switches language
} else if (userPath.equals("/chooseLanguage")) {

    // get language choice
    String language = request.getParameter("language");

    *// place in request scope
    request.setAttribute("language", language);*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>一時的な措置として、言語切り替えリンクがクリックされた時、レスポンスをwelcomeページの`index.jsp` へ転送するようにアプリケーションにもたせます。次のコードを追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// if user switches language
} else if (userPath.equals("/chooseLanguage")) {

    // get language choice
    String language = request.getParameter("language");

    // place in request scope
    request.setAttribute("language", language);

    *// forward request to welcome page
    try {
        request.getRequestDispatcher("/index.jsp").forward(request, response);
    } catch (Exception ex) {
        ex.printStackTrace();
    }
    return;*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>当然のことながら、彼または彼女がどのページにいるかに関わらずユーザを welcome ページに転送することが、「言語切り替え」動作を処理する望ましい方法ではありません。我々は次のサブセクション<a href="#keepTrack">Enable the Application to Keep Track of the Originating Page View</a>（アプリケーションが元のページビューのトラックを保持することを可能にする。）でこの問題を再度扱います。しかしながら、その間にも、この方法でプロジェクトを実行して、私たちは現在の言語切り替えの実装の結果を確認できます。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p><code>header.jspf</code> フラグメントに切り替えて（もしファイルがエディターに既に開いている場合は、Ctrl-Tab を押して、そのファイルを選択します。）、<a href="http://download-llnw.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fmt/setLocale.html">`&lt;fmt:setLocale&gt;`</a>タグを、新しい`language`変数に基づいたページ言語を設定するために適用します。以下を追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
&lt;%@taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %&gt;
*&lt;%@taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %&gt;

&lt;%-- Set language based on user's choice --%&gt;
&lt;c:if test="${!empty language}"&gt;
    &lt;fmt:setLocale value="${language}" scope="session" /&gt;
&lt;/c:if&gt;*


&lt;%@page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>language</code> 変数は、ユーザーが言語切り替えのリンクをクリックするときだけに作成されるので、あなたは <a href="http://download-llnw.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/if.html">`&lt;c:if&gt;`</a> タグを使ってテストを実行して、言語を設定する前にその変数があるかどうか見つけ出します。 <code>&lt;fmt:setLocale&gt;</code> タグを適用する時、あなたはそのスコープ(範囲)をセッションに設定します。あなたが、ウェブサイトで彼または彼女のセッションの残りの部分でユーザーが選択した言語を優先したいので。また、これがヘッダで <code>fmt</code> ライブラリが初めて使用されるため、あなたはタグライブラリを宣言します。</p>
</div>
<div class="paragraph">
<p>あなたは EL式 <code>${!empty language}</code> を次のように読むことができます。「language 変数が null または空の文字列」の場合は False。他の利用可能な例については、<a href="http://download-llnw.oracle.com/javaee/5/tutorial/doc/bnahq.html#bnaim">Java EE 5チュートリアル: EL 式の例</a> を見てください。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>言語切り替えの実装を変更します。そして、<code>&lt;fmt:setLocale&gt;</code> タグによって値がすでに設定されている場合、トグルはその値に指定された言語に従い表示します。（あなたは、<code>${sessionScope['javax.servlet.jsp.jstl.fmt.locale.session']}</code> 式を使用して、この値を調べることができます。）</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>現在の実装を <code>&lt;c:choose&gt;</code> タグで囲みます。そして、ロケールが手動で設定されているイベントの中に、現在の実装と同様にロジックを作成します。（変更は太字で表示されています。）</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div class="headerWidget"&gt;

  &lt;%-- language selection widget --%&gt;
  *&lt;c:choose&gt;
    &lt;%-- When user hasn't explicitly set language,
         render toggle according to browser's preferred locale --%&gt;
    &lt;c:when test="${empty sessionScope['javax.servlet.jsp.jstl.fmt.locale.session']}"&gt;*
      &lt;c:choose&gt;
        &lt;c:when test="${pageContext.request.locale.language ne 'cs'}"&gt;
          english
        &lt;/c:when&gt;
        &lt;c:otherwise&gt;
          &lt;c:url var="url" value="chooseLanguage"&gt;
            &lt;c:param name="language" value="en"/&gt;
          &lt;/c:url&gt;
          &lt;div class="bubble"&gt;&lt;a href="${url}"&gt;english&lt;/a&gt;&lt;/div&gt;
        &lt;/c:otherwise&gt;
      &lt;/c:choose&gt; |

      &lt;c:choose&gt;
        &lt;c:when test="${pageContext.request.locale.language eq 'cs'}"&gt;
          česky
        &lt;/c:when&gt;
        &lt;c:otherwise&gt;
          &lt;c:url var="url" value="chooseLanguage"&gt;
            &lt;c:param name="language" value="cs"/&gt;
          &lt;/c:url&gt;
          &lt;div class="bubble"&gt;&lt;a href="${url}"&gt;česky&lt;/a&gt;&lt;/div&gt;
        &lt;/c:otherwise&gt;
      &lt;/c:choose&gt;
    *&lt;/c:when&gt;

    &lt;%-- Otherwise, render widget according to the set locale --%&gt;
    &lt;c:otherwise&gt;
      &lt;c:choose&gt;
        &lt;c:when test="${sessionScope['javax.servlet.jsp.jstl.fmt.locale.session'] ne 'cs'}"&gt;
          english
        &lt;/c:when&gt;
        &lt;c:otherwise&gt;
          &lt;c:url var="url" value="chooseLanguage"&gt;
            &lt;c:param name="language" value="en"/&gt;
          &lt;/c:url&gt;
          &lt;div class="bubble"&gt;&lt;a href="${url}"&gt;english&lt;/a&gt;&lt;/div&gt;
        &lt;/c:otherwise&gt;
      &lt;/c:choose&gt; |

      &lt;c:choose&gt;
        &lt;c:when test="${sessionScope['javax.servlet.jsp.jstl.fmt.locale.session'] eq 'cs'}"&gt;
          česky
        &lt;/c:when&gt;
        &lt;c:otherwise&gt;
          &lt;c:url var="url" value="chooseLanguage"&gt;
            &lt;c:param name="language" value="cs"/&gt;
          &lt;/c:url&gt;
          &lt;div class="bubble"&gt;&lt;a href="${url}"&gt;česky&lt;/a&gt;&lt;/div&gt;
        &lt;/c:otherwise&gt;
      &lt;/c:choose&gt;
    &lt;/c:otherwise&gt;
  &lt;/c:choose&gt;*

&lt;/div&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>ブラウザでプロジェクトを調べる前に、 <code>&lt;fmt:setLocale&gt;</code> タグで設定された値を表示するテストを別に追加します。以前に作成したテストの下に、次のコードを追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;p style="text-align: left;"&gt;&lt;strong&gt;tests:&lt;/strong&gt;
    &lt;br&gt;
    &lt;code&gt;\${pageContext.request.locale.language}&lt;/code&gt;: ${pageContext.request.locale.language}
    *&lt;br&gt;
    &lt;code&gt;\${sessionScope['javax.servlet.jsp.jstl.fmt.locale.session']}&lt;/code&gt;: ${sessionScope['javax.servlet.jsp.jstl.fmt.locale.session']}*
&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>javax.servlet.jsp.jstl.fmt.locale.session</code> は、<code>&lt;fmt:setLocale&gt;</code> タグでセットされた <code>Locale</code>(ロケール)用の文字列リテラルキーです。エディタの左マージンでクリックして、新しいテスト上にブレークポイントを設定( <span class="image"><img src="images/breakpoint-badge.png" alt="breakpoint badge"></span> )して、これを確認することができます。プロジェクトでデバッガ( <span class="image"><img src="images/debug-project-btn.png" alt="debug project btn"></span> ) を実行します。ブラウザで言語を変更するトグルリンクをクリックして、デバッガがブレークポイントで中断した時に、変数ウィンドウ(Alt-Shift-1; Ctrl-Shift-1 Mac)を調べます。</p>
</div>
<div class="paragraph">
<p>このチュートリアルで表わされる EL 式は、主に、ドット(<code>.</code>) 表記を使用しています。上記の式に描かれた形式は、ブラケット (<code>[]</code>) 表記として知られています。それを使い、あなたは文字列リテラルのキーを引用符内に入力して、オブジェクトの値を抽出します。：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">${sessionScope['javax.servlet.jsp.jstl.fmt.locale.session']}</code></pre>
</div>
</div>
<div class="paragraph">
<p>多数の EL リゾルバクラスは、式を解決する目的のために存在します。たとえば、上記の式がランタイムで検出されたとき、 <a href="http://download-llnw.oracle.com/javaee/6/api/javax/servlet/jsp/el/ImplicitObjectELResolver.html">`ImplicitObjectResolver`</a> はセッションスコープ属性名にその値をマップした Map を最初に返します。（変数ウィンドウの上記画像で、そのセッションの属性が <a href="http://download-llnw.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html">`ConcurrentHashMap`</a> の中に保持されていることを確認できます。）。式の残りの部分を解決するために <a href="http://download-llnw.oracle.com/javaee/6/api/javax/el/MapELResolver.html">`MapELResolver`</a> が使われて、[&#8216;javax.servlet.jsp.jstl.fmt.locale.session&#8217;] という名前のキーの値を取得します。</p>
</div>
<div class="paragraph">
<p>より詳細については、これを参照してください。Java EE 5 チュートリアル：<a href="http://download-llnw.oracle.com/javaee/5/tutorial/doc/bnahq.html#bnaif">統一表現言語：式の解決</a></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>プロジェクトを実行( <span class="image"><img src="images/run-project-btn.png" alt="run project btn"></span> )します。ブラウザでアプリケーションの welcome ページを調べます。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/toggle-page1.png" alt="toggle page1">
</div>
<div class="title">Figure 13. Welcome page displays according to browser&#8217;s preferred language</div>
</div>
<div class="paragraph">
<p>上の画像では、サーバーは <code>Accept-Language</code> HTTP ヘッダーからブラウザの優先言語としてチェコ (<code>cs</code>) を識別しています。これは最初のテストで指示したものです。チェコ語のページが表示され、言語の切り替えで、ユーザは英語を選択することができます。 <code>&lt;fmt:setLocale&gt;</code> タグがまだ呼び出されていないので、２番目のテストは空白のままです。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>英語へのトグルリンクをクリックします。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/toggle-page2.png" alt="toggle page2">
</div>
<div class="title">Figure 14. Welcome page displays in English, according to toggle selection</div>
</div>
<div class="paragraph">
<p>トグルリンクをクリックすると、<code>header.jspf</code> ファイルに実装された <code>&lt;fmt:setLocale&gt;</code> タグにより、デフォルトのチェコ語がオーバーライドされます。ブラウザの優先言語はチェコ語のままですが、現在そのページは言語切り替えで利用可能にされた新しい言語で表示されているのを確認してください。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>チェコへのトグルリンクをクリックします。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/toggle-page3.png" alt="toggle page3">
</div>
<div class="title">Figure 15. Welcome page displays in Czech, according to toggle selection</div>
</div>
<div class="paragraph">
<p>ブラウザの優先言語に戻すための言語の切替は期待通り動きました。しかしながら、言語を決定する要因はもはや <code>Accept-Language</code> HTTPヘッダーで検出された言語ではなく、<code>&lt;fmt:setLocale&gt;</code> タグで指定された言語になっていることに注意してください。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="11">
<li>
<p>続ける前に header.jspf ファイルに追加したテストを削除します。（削除するコードは取り消し線のついたテキストです。）</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;body&gt;

    *[.line-through]#&lt;%-- Language tests --%&gt;#
    [.line-through]#&lt;p style="text-align: left;"&gt;&lt;strong&gt;tests:&lt;/strong&gt;#
        [.line-through]#&lt;br&gt;#
        [.line-through]#&lt;code&gt;\${pageContext.request.locale.language}&lt;/code&gt;: ${pageContext.request.locale.language}#
        [.line-through]#&lt;br&gt;#
        [.line-through]#&lt;code&gt;\${sessionScope['javax.servlet.jsp.jstl.fmt.locale.session']}&lt;/code&gt;: ${sessionScope['javax.servlet.jsp.jstl.fmt.locale.session']}#
    [.line-through]#&lt;/p&gt;#*

    &lt;div id="main"&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="keepTrack">アプリケーションが元のページビューの経過を把握できるようにする</h3>
<div class="paragraph">
<p>Affable Bean スタッフと合意した<a href="#impDeets">実装の詳細</a>の一つは、 言語を変更するために言語切り替えが使用されたとき、ユーザーは同じページビューに残っていることでした。現在の実装では、言語切り替えがクリックされた時はいつでもユーザは welcome ページに返されます。よりユーザーに優しいアプローチは、アプリケーションにリクエストがあったページビューを追跡できる手段を提供し、言語切り替えリンクがクリックされた時、クリックしたページビューへリクエストを送信できるようにすることです。</p>
</div>
<div class="paragraph">
<p>我々は、各ページビューにセッションスコープ <code>view</code> 属性を設定することによってこれを達成することができます。そして、この属性を <code>ControllerServlet</code> の中で参照して、リクエストを送信するページを判別します。とはいえ、確認ページの言語切り替えの取扱いについて考慮すべき課題がいくつかあります。これらは以下の７－１１で説明され、取扱いされています。</p>
</div>
<div class="paragraph">
<p><code>AffableBean</code> プロジェクトの <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot9.zip">スナップショット９</a> でこの演習を始めます。このスナップショットには、すべてのページビュー用の英語とチェコの完成版リソースバンドルが含まれています。すべてのページビューはテキストを使いリソースバンドルから変更されています。そして、言語切替は、チュートリアルのこの点に対応した状態になっています。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot9.zip">スナップショット９</a> を IDE に開きます。プロジェクトを開く( <span class="image"><img src="images/open-project-btn.png" alt="open project btn"></span> )ボタンをクリックして、ウィザードを使用し、プロジェクトをダウンロードしたコンピュータの場所を指定します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>プロジェクトを実行 ( <span class="image"><img src="images/run-project-btn.png" alt="run project btn"></span> ) ボタンをクリックしてプロジェクトを実行します。サイトをナビゲートして、任意のページビューから言語切り替えをクリックしたときにアプリケーションの welcome ページに返されることに注意してください。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>プロジェクトを実行してエラーが表示される場合、セットアップ手順を再度見て下さい。データベースを準備する方法、IDE と GlassFish と MySQL 間の接続を確立する方法がそこに載っています。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p><a href="http://download.oracle.com/docs/cd/E17802_01/products/products/jsp/jstl/1.1/docs/tlddocs/c/set.html">`&lt;c:set&gt;`</a> タグを使用して、各ページビューのセッションスコープ <code>view</code> 属性を設定します。各エディタで各ページビューを開き、各ファイルの先頭に次のコードを追加します。</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_index_jsp">index.jsp</h4>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;%-- Set session-scoped variable to track the view user is coming from.
     This is used by the language mechanism in the Controller so that
     users view the same page when switching between English and Czech. --%&gt;
&lt;c:set var='view' value='/index' scope='session' /&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_category_jsp">category.jsp</h4>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;%-- Set session-scoped variable to track the view user is coming from.
     This is used by the language mechanism in the Controller so that
     users view the same page when switching between English and Czech. --%&gt;
&lt;c:set var='view' value='/category' scope='session' /&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cart_jsp">cart.jsp</h4>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;%-- Set session-scoped variable to track the view user is coming from.
     This is used by the language mechanism in the Controller so that
     users view the same page when switching between English and Czech. --%&gt;
&lt;c:set var='view' value='/cart' scope='session' /&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_checkout_jsp">checkout.jsp</h4>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;%-- Set session-scoped variable to track the view user is coming from.
     This is used by the language mechanism in the Controller so that
     users view the same page when switching between English and Czech. --%&gt;
&lt;c:set var='view' value='/checkout' scope='session' /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>顧客と合意した <a href="#impDeets">実装の詳細</a> に基づき、我々は確認ページのビューでは言語切り替えを提供する必要はありません。使いやすさの観点から、チェックアウトする前に、ユーザーはすでに彼または彼女の好みの言語を選択しているでしょう。実装の観点から、注文を正常に完了するために我々はユーザセッションを破棄したことを思い出してください。（<a href="manage-sessions.html">セッション管理</a>の最後の段落に戻り参照してください。そこには、メソッドを`invalidate`(無効)にして明示的にユーザーセッションを終了する方法について説明してあります。）。Affable Bean スタッフが、お客様はバイリンガルの注文を表示することができるよう強く主張した場合には、次のシナリオをよく考える必要があります。確認ページを表示する時にユーザのセッションを破棄するかどうかに依存して検討する必要があります：
1. <strong>セッションが破棄される：</strong> 確認ページの <code>chooseLanguage</code> リクエストが適切なorder(注文)を参照していることを保障するための追加措置を講じる必要があるかどうか、そして顧客に敏感な詳細情報を安全な方法で表示するための追加措置を講じる必要があるかどうか。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><strong>セッションが保持される：</strong> ユーザが誤って自分のショッピングカートでダブル注文をしてしてしまう危険性や、また不必要となったユーザーのセッションを終了しないためにサーバーに不必要な負荷をかけてよいか。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p><code>ControllerServlet</code> をエディタで開きます。（既に開いている場合、Ctrl-Tab を押し、そのファイルを選択します）。開いたファイルで、<code>chooseLanguage</code> リクエストを処理する <code>doGet</code> メソッドの部分を探します（ 126行）。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>注意。現在、chooseLanguage リクエストは index.jsp ウェルカムページに転送されます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// if user switches language
} else if (userPath.equals("/chooseLanguage")) {

    // get language choice
    String language = request.getParameter("language");

    // place in session scope
    session.setAttribute("language", language);

    *// forward request to welcome page
    try {
        request.getRequestDispatcher("/index.jsp").forward(request, response);
    } catch (Exception ex) {
        ex.printStackTrace();
    }
    return;*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p><code>view</code> セッション属性を使用して、リクエストを転送し元のページビューに戻ります。次の変更をします。（太字の部分）。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// if user switches language
} else if (userPath.equals("/chooseLanguage")) {

    // get language choice
    String language = request.getParameter("language");

    // place in request scope
    request.setAttribute("language", language);

    *String userView = (String) session.getAttribute("view");

    if ((userView != null) &amp;amp;&amp;amp;
        (!userView.equals("/index"))) {     // index.jsp exists outside 'view' folder
                                            // so must be forwarded separately
        userPath = userView;
    } else {

        // if previous view is index or cannot be determined, send user to welcome page*
        try {
            request.getRequestDispatcher("/index.jsp").forward(request, response);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        return;
    *}*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>上記の実装では、<code>view</code> 属性の値を引き出し、そのビューに提供します：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>識別することができますか（つまり、値が null でない） can be identified (i.e., the value is not null),</p>
</li>
<li>
<p>ウェルカムページから始まっていない（ <code>index.jsp</code> は 他のページビューのように同じ場所に存在しないため、リクエストを転送する <code>doGet</code> メソッドの方法を使用して解決することができません）。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="indent">&#8230;&#8203;あなたは それを <code>doGet`メソッドの `userPath</code> 変数に設定し、メソッドにある <code>RequestDispatcher</code> を使い、リクエストを転送します：</span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// use RequestDispatcher to forward request internally
String url = "/WEB-INF/view" + userPath + ".jsp";

try {
    request.getRequestDispatcher(url).forward(request, response);
} catch (Exception ex) {
    ex.printStackTrace();
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>プロジェクトを実行<span class="image"><img src="images/run-project-btn.png" alt="run project btn"></span> )し、ブラウザでそれをテストします。あなたが、カテゴリ、カートやチェックアウトのページに移動する時、言語切り替えを使用して言語を切り替えてみます。これを行うと、今や、あなたは同じページビュー内にとどまっています。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>ブラウザで、注文を完了し、アプリケーションはあなたを確認ページに転送します。確認ページから言語切り替えをクリックすると、あなたはウェブサイトのウェルカムページに戻らされることに注意します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>実装面では、あなたはこのことを十分に考慮する必要があります。しかし、Affable Beanスタッフがこのページビューから言語切り替えを明示的に削除するように求めています。これを実現する一つの方法は、リクエストの_servlet path_ が「&#8216;/confirmation&#8217;」を含んでいるかどうかを見つけ出すテストを実行することです。</p>
</div>
<div class="paragraph">
<p>エディタで <code>header.jspf</code> ファイルに切り替えます。以下のテストで言語切り替えを囲みます。あなたは、JSTLの機能（つまり、<a href="http://download.oracle.com/docs/cd/E17802_01/products/products/jsp/jstl/1.1/docs/tlddocs/fn/tld-summary.html">`fn`</a> ）ライブラリを使い文字列操作を実行します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;div class="headerWidget"&gt;

  *&lt;%-- If servlet path contains '/confirmation', do not display language toggle --%&gt;
  &lt;c:if test="${!fn:contains(pageContext.request.servletPath,'/confirmation')}"&gt;*

    &lt;%-- language selection widget --%&gt;
    &lt;c:choose&gt;

        ...
    &lt;/c:choose&gt;

  *&lt;/c:if&gt;*
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>上記のコードスニペットを調べて、次の点に注意してください：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>サーブレットのパスは <a href="http://download.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getServletPath%28%29">`getServletPath`</a> メソッドを使い <code>HttpServletRequest</code> からアクセスすることができます。我々は <code>RequestDispatcher</code> を使用して、リクエストを確認ページ（ <code>ControllerServlet</code>、行158 ）に転送するので、サーブレットのパスは次のようになります：</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">/WEB-INF/view/confirmation.jsp</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pageContext.request.servletPath</code> EL 式を使用することは、サーブレットから`request.getServletPath()` （）を呼び出すことに相当します。</p>
</li>
<li>
<p><a href="http://download.oracle.com/docs/cd/E17802_01/products/products/jsp/jstl/1.1/docs/tlddocs/fn/contains.fn.html">`fn:contains()`</a>関数で、あなたは入力文字列に指定された従属文字列が含まれているかどうかテストすることができます。</p>
</li>
<li>
<p><code>fn</code> タグライブラリは、すでにスナップショット 9 の <code>header.jspf</code> ファイルの先頭で宣言されています：</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;%@taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>プロジェクトを再度実行し、確認ページにステップ実行します。そのページにはもはや言語切替えが表示されていないことに注意してください。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/confirmation-page.png" alt="confirmation page">
</div>
<div class="title">Figure 16. Language toggle no longer displays in confirmation page</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>ブラウザで、言語切り替えを使用しその方法に沿ってもう一度言語を切り替えて、確認ページまでステップ実行します。注意して下さい。あなたが注文を完了するときに、確認ページが誤って最初に表示される言語に戻り切り替わります。あなたは正しく原因を特定することにします：正常に注文が完了したため、 <code>ControllerServlet</code> はユーザーセッションを破壊します。その結果として、<code>&lt;fmt:setLocale&gt;</code> タグを使用して設定されたセッションスコープのロケールが失われてしまうからです。
この問題を解決するには、<code>ControllerServlet</code> を開き、ユーザーセッションを破壊するために使用する <code>invalidate()</code> メソッドを検索します。（だいたい 259行目）。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>）エディタのクイック検索機能を使います：Ctrl-F（Macの場合 ⌘-F)を押し「<code>invalidate</code>」を入力します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>ユーザセッションを破壊する前に、セッションスコープのロケールの値を抽出するコードを追加します。セッションが破棄された後に、リクエストスコープ <code>language</code> 属性にロケール値を再セットします。（変更は太字です。）</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// if order processed successfully send user to confirmation page
if (orderId != 0) {

    *// in case language was set using toggle, get language choice before destroying session
    Locale locale = (Locale) session.getAttribute("javax.servlet.jsp.jstl.fmt.locale.session");
    String language = "";

    if (locale != null) {

        language = (String) locale.getLanguage();
    }*

    // dissociate shopping cart from session
    cart = null;

    // end session
    session.invalidate();

    *if (!language.isEmpty()) {                       // if user changed language using the toggle,
                                                     // reset the language attribute - otherwise
        request.setAttribute("language", language);  // language will be switched on confirmation page!
    }*

    // get order details
    Map orderMap = orderManager.getOrderDetails(orderId);

    ...
    userPath = "/confirmation";
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="11">
<li>
<p>プロジェクトを再び実行し、言語切り替えを使用する方法に従ってもう一度言語を切り替えて、確認ページまでステップ実行してください。あなたが注文を完了した時に、確認ページがあなたが選択した言語で今度は表示されることに注意してください。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>今あなたは、顧客仕様に応じた <code>AffableBean</code> アプリケーションの中に言語サポートを正常に統合しました。あなたはページビューからすべてのテキストを取り除き、それをリソースバンドルの中に配置しました。あなたは、JSTL <code>fmt</code> タグライブラリを、ユーザの好みの言語に基づいたリソースバンドルのコンテンツを使うように適用しました。あなたはまた、言語切り替えを実装し、ユーザーが英語とチェコ語を切り替えることができるようにしました。そして、ブラウザの既定の言語選択にオーバーライドしました。以下をダウンロードして調べて下さい。<a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot10.zip">スナップショット10</a> とこの単元の最終プロジェクトの状態での作業とを比較してください。</p>
</div>
<div class="paragraph">
<p>link:/about/contact_form.html?to=3&amp;subject=Feedback: NetBeans E-commerce Tutorial - Adding Language Support[ご意見をお寄せ下さい]</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="seeAlso">関連参照</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_netbeans_リソース">NetBeans リソース</h3>
<div class="ulist">
<ul>
<li>
<p><a href="../javaee-intro.html">Java EE 技術入門</a></p>
</li>
<li>
<p><a href="../javaee-gettingstarted.html">+Java EE 6 アプリケーション入門 +</a></p>
</li>
<li>
<p><a href="https://netbeans.org/projects/www/downloads/download/shortcuts.pdf">キーボードショートカットとコードテンプレートカード</a></p>
</li>
<li>
<p><a href="../../../trails/java-ee.html">Java EE と Java Web 学習の小道</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_外部リソース">外部リソース</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://download.oracle.com/docs/cd/E17409_01/javase/tutorial/i18n/index.html">Java チュートリアル：国際化</a></p>
</li>
<li>
<p><a href="http://download.oracle.com/docs/cd/E17477_01/javaee/5/tutorial/doc/bnaxu.html">Java EE 5 チュートリアル：ウェッブアプリケーションの国際化とローカル化</a></p>
</li>
<li>
<p><a href="http://java.sun.com/developer/technicalArticles/Intl/MultilingualJSP/index.html">JavaServer Pagesテクノロジーを使用した多言語 Web アプリケーションの開発</a></p>
</li>
<li>
<p><a href="http://java.sun.com/developer/technicalArticles/J2SE/locale/">国際化：Java プラットフォームのロケールを理解する</a></p>
</li>
<li>
<p><a href="http://java.sun.com/developer/technicalArticles/Intl/ResourceBundles/">Java の国際化：リソースバンドルで現地化</a></p>
</li>
<li>
<p><a href="http://www.ibm.com/developerworks/java/library/j-jstl0415/">JSTL 読本、第３回：プレゼンテーションが全て</a></p>
</li>
<li>
<p><a href="http://java.sun.com/javase/technologies/core/basic/intl/">Java の国際化</a> [技術ホームページ]</p>
</li>
<li>
<p><a href="http://en.wikipedia.org/wiki/Internationalization_and_localization">国際化とローカリゼーション</a> [Wikipedia]</p>
</li>
<li>
<p><a href="http://www.loc.gov/standards/iso639-2/php/code_list.php">ISO 639-2 言語コードリスト</a> [Library of Congress]</p>
</li>
<li>
<p><a href="http://www.w3.org/International/articlelist#language">W3C 国際化活動：論文、ベストプラクティスとチュートリアル：言語</a></p>
</li>
<li>
<p><a href="http://jquery.com/">jQuery</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/javaee/ecommerce/language_ja.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
