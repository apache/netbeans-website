
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Учебный курс по электронной коммерции NetBeans. Добавление классов сущностей и сеансных компонентов</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Учебный курс по электронной коммерции NetBeans. Добавление классов сущностей и сеансных компонентов - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Учебный курс по электронной коммерции NetBeans. Добавление классов сущностей и сеансных компонентов">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>

  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="/download/nb19/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Учебный курс по электронной коммерции NetBeans. Добавление классов сущностей и сеансных компонентов</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/javaee/ecommerce/entity-session_ru.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#whatEJB">Общие сведения о технологиях EJB и JPA</a>
<ul class="sectlevel2">
<li><a href="#ejb">JavaBeans Enterprise</a></li>
<li><a href="#jpa">Сохранение состояния Java</a></li>
</ul>
</li>
<li><a href="#whatSession">Общие сведения о сеансных компонентах</a></li>
<li><a href="#specification">Спецификации и реализации</a></li>
<li><a href="#addEntity">Добавление классов сущностей</a></li>
<li><a href="#addSession">Добавление сеансных компонентов</a></li>
<li><a href="#access">Доступ к данным при помощи EJB</a>
<ul class="sectlevel2">
<li><a href="#index">страница-указатель</a></li>
<li><a href="#category">страница категории</a></li>
</ul>
</li>
<li><a href="#seeAlso">Дополнительные сведения</a>
<ul class="sectlevel2">
<li><a href="#_материалы_по_netbeans">Материалы по NetBeans</a></li>
<li><a href="#_ресурсы_по_ejb">Ресурсы по EJB</a></li>
<li><a href="#_ресурсы_по_jpa">Ресурсы по JPA</a></li>
<li><a href="#_ресурсы_по_glassfish">Ресурсы по GlassFish</a></li>
<li><a href="#_технические_статьи">Технические статьи</a></li>
<li><a href="#_книги">Книги</a></li>
</ul>
</li>
<li><a href="#_ссылки">Ссылки</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="intro.html">Введение</a></p>
</li>
<li>
<p><a href="design.html">Проектирование приложения</a></p>
</li>
<li>
<p><a href="setup-dev-environ.html">Настройка среды разработки</a></p>
</li>
<li>
<p><a href="data-model.html">Проектирование модели данных</a></p>
</li>
<li>
<p><a href="page-views-controller.html">Подготовка представлений страниц и сервлета контроллера</a></p>
</li>
<li>
<p><a href="connect-db.html">Подключение приложения к базе данных</a></p>
</li>
<li>
<p><strong>Добавление классов сущностей и сеансных компонентов</strong></p>
</li>
<li>
<p><a href="manage-sessions.html">Управление сеансами</a></p>
</li>
<li>
<p><a href="transaction.html">Интеграция транзакционной бизнес-логики</a></p>
</li>
<li>
<p><a href="language.html">Добавление поддержки языков</a></p>
</li>
<li>
<p><a href="security.html">Обеспечение безопасности приложений</a></p>
</li>
<li>
<p><a href="test-profile.html">Тестирование и профилирование</a></p>
</li>
<li>
<p><a href="conclusion.html">Заключение</a></p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../images_www/articles/68/netbeans-stamp-68-69.png" alt="netbeans stamp 68 69">
</div>
<div class="title">Figure 1. Содержимое на этой странице применимо к IDE NetBeans, версии 6.8 и 6.9</div>
</div>
<div class="paragraph">
<p>В этом учебном курсе рассмотрены технологии <a href="http://java.sun.com/products/ejb/">Enterprise JavaBeans</a> (EJB) и <a href="http://java.sun.com/javaee/technologies/persistence.jsp">Java Persistence</a> (JPA). Используются необходимые для разработки в Java EE мастеры среды IDE. Это:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>*Мастер создания классов сущностей из базы данных*Для каждой выбранной таблицы базы данных создается класс сущности, сохраняющий состояние при помощи JPA, с аннотациями именованных запросов, полями, соответствующими столбцам и отношениями, соответствующими внешним ключам.</p>
</li>
<li>
<p>*Мастер сеансных компонентов для классов сущностей*Создает фасад сеанса EJB для каждого класса сущностей с основными методами доступа.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Эти два мастера предоставляют эффективный способ быстрого создания модели для приложения. При рассмотрении <a href="design.html#mvcDiagram">диаграммы MVC</a> для создаваемого приложения можно увидеть место расположения сеансных компонентов EJB и классов сущностей JPA в его структуре.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/mvc-diagram.png" alt="mvc diagram">
</div>
<div class="title">Figure 2. Диаграмма MVC приложения AffableBean</div>
</div>
<div class="paragraph">
<p>Создаваемые в этом разделе классы сущностей создают представление базы данных <code>affablebean</code> в форме Java. Каждый класс сущностей представляет таблицу базы данных, а экземпляры классов сущностей соответствуют записям, <em>сохраняемым</em> в базе данных. Бизнес-логика приложения инкапсулируется сеансными компонентами, которые могут использоваться как классы <em>фасада</em>, предоставляющие доступ CRUD (создание, чтение, обновление, удаление) к записям (см. ниже), или могут содержать код, реализующий характерные для приложения действия. Пример такого использования приведен в разделе <a href="transaction.html">Раздел 9: интеграция транзакционной бизнес-логики</a>.</p>
</div>
<div class="paragraph">
<p>Можно просмотреть интерактивную демонстрацию приложения, которое создается в этом учебном курсе: <a href="http://dot.netbeans.org:8080/AffableBean/">Демонстрация приложения электронной коммерции NetBeans</a></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Программное обеспечение или материал</th>
<th class="tableblock halign-left valign-top">Требуемая версия</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">IDE NetBeans</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Набор Java, версия 6.8 или 6.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Комплект для разработчика на языке Java (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">версия 6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#glassFish">Сервер GlassFish</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">v3 или Open Source Edition 3.0.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://dev.mysql.com/downloads/mysql/">Сервер базы данных MySQL</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Версия 5.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot3.zip">Проект AffableBean</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">снимок 3</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Примечания:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The IDE NetBeans requires the Java Development Kit (JDK) to run properly. Если указанные материалы не установлены, JDK следует загрузить и установить в первую очередь.</p>
</li>
<li>
<p>The IDE NetBeans Java Bundle includes Java Web and EE technologies, which are required for the application you build in this tutorial.</p>
</li>
<li>
<p>The IDE NetBeans Java Bundle also includes the GlassFish server, which you require for this tutorial. Можно <a href="https://glassfish.dev.java.net/public/downloadsindex.html">загрузить сервер GlassFish отдельно</a>, но версия, предоставляемая с NetBeans, имеет преимущество, так как автоматически зарегистрирована в среде IDE.</p>
</li>
<li>
<p>Этот учебный курс можно выполнять без выполнения предыдущих. Для этого обратитесь к <a href="setup.html">инструкциям по настройке</a>, в которых описана подготовка базы данных и настройка подключений между IDE, GlassFish, и MySQL.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="whatEJB">Общие сведения о технологиях EJB и JPA</h2>
<div class="sectionbody">
<div class="paragraph">
<p>До сих пор проект, который создавался в процессе этого учебного курса, можно было запустить на веб-сервере с контейнером сервлетов, таком как Apache Tomcat. Пока использовались только технологии JSTL и сервлетов, а подключение к базе осуществлялось напрямую через JDBC. Теоретически можно продолжать разработку с применением только этих технологий и вручную писать код для всех аспектов приложения, включая многопоточное исполнение, транзакции и безопасность. Однако компоненты EJB и классы сущностей JPA позволяют сосредоточиться на бизнес-логике приложения, используя проверенные и протестированные решения. В следующих разделах рассматриваются данные технологии и их роль в разработке для Java EE.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#ejb">JavaBeans Enterprise</a></p>
</li>
<li>
<p><a href="#jpa">Сохранение состояния Java</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="ejb">JavaBeans Enterprise</h3>
<div class="paragraph">
<p>На официальной <a href="http://java.sun.com/products/ejb/">странице продукта EJB</a> технология EnterPrise JavaBeans описана как "компонентная архитектура клиент-сервер", которая "позволяет быстро и легко разрабатывать распределенные транзакционные безопасные и переносимые приложения." При применении EJB все службы, предоставляемые этой технологией, остаются прозрачными для разработчика, избавляя его от утомительного и часто приводящего к ошибкам добавления кода заготовок. Для новичка в разработке для Java EE потребность в EJB для веб-приложения Java неочевидна. В книге Дебу Панды, Реза Рахмана и Дерека Лейна (Debu Panda, Reza Rahman и Derek Lane) <a href="http://www.manning.com/panda/">EJB 3 в действии (EJB 3 In Action)</a> роль EJB четко сформулирована:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>_Многие считают, что технология EJB не требуется для разработки сравнительно простых веб-приложений небольшого размера, но это далеко от действительности. Никто не начинает постройку дома с нуля. Постройка начинается с покупки материалов или найма подрядчика. Точно так же неэффективно разрабатывать приложение уровня предприятия с нуля. Большинство приложений на стороне сервера имеют много общего: бизнес-логику, управление состоянием приложения, сохранение и извлечение информации из реляционной базы данных, управление транзакциями, обеспечение безопасности, выполнение асинхронной обработки, интеграцию систем и так далее.</p>
</div>
<div class="paragraph">
<p>Контейнер EJB предоставляет эти функциональные возможности в виде встроенных, поэтому компоненты EJB могут использовать их в приложении. Это освобождает разработчика от необходимости изобретать велосипед. Например, при написании модуля обработки кредитных карт в веб-приложении необходимо создать большой объем сложного и приводящего к ошибкам кода для управления транзакциями и контроля безопасности доступа. Можно избежать этого, используя декларативные транзакции и службы безопасности контейнера EJB. Эти службы доступны компонентам EJB при развертывании в контейнере EJB, как и многие другие. Это позволяет создавать высококачественные многофункциональные приложения гораздо быстрее, чем можно подумать._<sup><a href="#footnote1">[1]</a></sup></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>EJB можно рассматривать как компоненты или как классы Java, включенные в проект, а также как <em>платформу</em>, предоставляющую множество служб, связанных с уровнем предприятия. Некоторое службы, использованные в этом учебном курсе, описаны в книге <a href="http://www.manning.com/panda/">EJB 3 в действии</a> следующим образом:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>*Создание пула:*для каждого компонента EJB платформа EJB создает пул совместно используемых клиентами экземпляров компонента. В любой момент времени каждый экземпляр из пула может использоваться только одним клиентом. После завершения обслуживания клиента экземпляр возвращается в пул для повторного использования вместо уничтожения и восстановления сборщиком мусора.</p>
</li>
<li>
<p><strong>Многопоточная ориентированность:</strong> EJB делает все компоненты ориентированными на многопоточное исполнение и высокопроизводительными. Это означает, что серверные компоненты можно писать так же, как и однопоточные настольные приложения. Сложность компонента не имеет значения. Многопоточное исполнение обеспечивается технологией EJB.</p>
</li>
<li>
<p><strong>Транзакции:</strong> EJB поддерживает управление объявленными транзакциями, которое позволяет добавить транзакционное поведение к компонентам путем настройки, а не программирования. В результате можно сделать транзакционным любой метод компонента. При нормальном завершении метода EJB подтверждает транзакцию и сохраняет сделанные методом изменения. В противном случае выполняется откат транзакции. Транзакции EJB, управляемые контейнером, продемонстрированы в разделе<a href="transaction.html">Раздел 9: интеграция транзакционной бизнес-логики</a>.</p>
</li>
<li>
<p><strong>Безопасность:</strong> EJB поддерживает интеграцию с интерфейсом API службы проверки подлинности и авторизации Java (JAAS), поэтому теперь легче выстроить безопасность и защитить приложения, используя несложные настройки, вместо того, чтобы загромождать программу кодами безопасности. <sup><a href="#footnote2">[2]</a></sup>В разделе 11:<a href="security.html#secureEJB">Обеспечение безопасности приложений</a>была продемонстрирована аннотация &lt;a href="http://download.oracle.com/javaee/6/api/javax/annotation/security/RolesAllowed.html" target="_blank"`@RolesAllowed` EJB.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="jpa">Сохранение состояния Java</h3>
<div class="paragraph">
<p>В контексте Java Enterprise <em>сохранение состояния</em> — это автоматическое сохранение данных из объектов Java в реляционной базе данных. <a href="http://java.sun.com/javaee/technologies/persistence.jsp">Интерфейс API сохранения состояния Java</a> (Java Persistence API, JPA) — технология объектно-реляционного сопоставления (ORM), позволяющая приложению прозрачным для разработчика образом управлять данными в объектах Java и реляционной базе данных. Это означает, что можно применить JPA к проекту, добавив и настроив набор классов (<em>сущностей</em>), соответствующих модели данных. После этого приложение сможет получать доступ к этим сущностям как при прямом доступе к базе данных.</p>
</div>
<div class="paragraph">
<p>Преимущества использования JPA:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Для выполнения статических и динамических запросов в JPA используется собственный язык запросов, схожий с SQL. При использовании языка запросов Java Persistence Query Language (JPQL) приложения можно переносить между базами данных различных поставщиков.</p>
</li>
<li>
<p>Можно избежать написания низкоуровневого кода JDBC/SQL.</p>
</li>
<li>
<p>JPA предоставляет прозрачные службы для кэширования данных и оптимизации производительности.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="whatSession">Общие сведения о сеансных компонентах</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Сеансные компоненты уровня предприятия вызываются клиентом для выполнения конкретных бизнес-операций. Слово <em>сеансные</em> означает, что экземпляры компонентов доступны в течение "периода обработки". <a href="http://jcp.org/aboutJava/communityprocess/final/jsr318/index.html">Спецификация EJB 3.1</a> описывает следующие характеристики типичного сеансного объекта:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Выполнение для одного клиента</p>
</li>
<li>
<p>Способность работать с транзакциями</p>
</li>
<li>
<p>Обновление данных в основной базе данных</p>
</li>
<li>
<p>Отсутствие прямого представления общих данных из базы данных несмотря на возможность использования и обновления таких данных</p>
</li>
<li>
<p>Непродолжительное время существования</p>
</li>
<li>
<p>Удаление при сбое контейнера EJB Для продолжения вычислений клиент должен повторно установить сеансный объект.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>EJB предоставляет три вида сеансных компонентов: <em>с поддержкой состояния</em>, <em>без поддержки состояния</em> и <em>одноэкземплярные</em>. Следующие определения взяты из <a href="http://download.oracle.com/docs/cd/E17410_01/javaee/6/tutorial/doc/index.html">учебного курса Java EE 6</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>С поддержкой состояния:</strong> состояние компонента сохраняется между вызовами методов. "Состояние" – это значения переменных экземпляра. Поскольку клиент взаимодействует с компонентом, это состояние часто называют <em>диалоговым</em>.</p>
</li>
<li>
<p><strong>Без поддержки состояния:</strong> такие компоненты используется для операций, происходящих в течение одного вызова метода. При завершении выполнения метода состояние, зависящее от клиента, не сохраняется. Компонент без сохранения состояния не поддерживает диалоговое состояние с клиентом.</p>
</li>
<li>
<p><strong>Одноэкземплярный:</strong> одноэкземплярный сеансный компонент создается в приложении в единственном числе и существует в течение всего жизненного цикла приложения. Одноэкземплярные сеансные компоненты созданы для ситуаций, в которых один экземпляр компонента уровня предприятия совместно и одновременно используется клиентами.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Дополнительные сведения о сеансных компонентах EJB приведены в документе <a href="http://download.oracle.com/docs/cd/E17410_01/javaee/6/tutorial/doc/gipjg.html">Учебный курс Java EE 6: общие сведения о сеансных компонентах</a>.</p>
</div>
<div class="paragraph">
<p>Для разработки приложения электронной коммерции в этом учебном курсе используются только сеансные компоненты без сохранения состояния.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="specification">Спецификации и реализации</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Технологии EJB и JPA определены в следующих спецификациях:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://jcp.org/en/jsr/summary?id=317">Сохранение состояния Java</a></p>
</li>
<li>
<p><a href="http://jcp.org/en/jsr/summary?id=318">JSR 318: Enterprise JavaBeans 3.1</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Указанные спецификации определяют данные технологии. При этом для применения технологии в проекте нужна <em>реализация</em> спецификации. После утверждения спецификации в нее включается ссылочная реализация, которая является свободной реализацией технологии. Если такая концепция вызывает удивление, можно рассмотреть следующую аналогию: музыкальная композиция (т.е. ноты на странице) определяет музыкальное произведение. Когда музыкант заучивает композицию и записывает ее исполнение, происходит <em>интерпретация</em> произведения. Таким образом, музыкальная композиция напоминает техническую спецификацию, а процесс записи музыки перекликается с реализацией спецификации.</p>
</div>
<div class="paragraph">
<p>Подробные сведения о технических спецификациях Java и их формальной стандартизации приведены в <a href="intro.html#jcp">описании Java Community Process</a>.</p>
</div>
<div class="paragraph">
<p>На странице загрузки окончательной редакции спецификаций EJB и JPA находятся ссылки на следующие примеры реализации:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>JPA:</strong> <a href="http://www.eclipse.org/eclipselink/downloads/ri.php">http://www.eclipse.org/eclipselink/downloads/ri.php</a></p>
</li>
<li>
<p><strong>EJB:</strong> <a href="http://glassfish.dev.java.net/downloads/ri">http://glassfish.dev.java.net/downloads/ri</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Примеры реализации спецификации JPA называются <em>поставщиками сохранения состояния</em>, а поставщиком сохранения состояния, который был выбран в качестве эталонной реализации для спецификации JPA, версия 2.0, является <a href="http://www.eclipse.org/eclipselink/">EclipseLink</a>.</p>
</div>
<div class="paragraph">
<p>Ссылка на пример эталонной реализации EJB также приведет на страницу, где упомянуты не только реализации EJB, но и все примеры реализации, предоставленные <a href="https://glassfish.dev.java.net/">проектом GlassFish</a>. Причиной является то, что проект GlassFish предоставляет эталонную реализацию спецификации <a href="http://jcp.org/en/jsr/summary?id=316">JSR 316</a> для платформы Java EE 6. Сервер приложений GlassFish, версия 3 (или версия с открытым исходным кодом), который используется в данном учебном курсе для создания проекта по интернет-коммерции, содержит эталонные реализации всех технологий, разработанных в проекте GlassFish. В связи с этим такой сервер приложений называют <em>контейнером</em> Java EE 6.</p>
</div>
<div class="paragraph">
<p>Контейнер Java EE содержит три необходимых компонента: веб-контейнер (например, сервлет), контейнер EJB и поставщик сохранения состояния. Сценарий развертывания приложения электронной коммерции показан на диаграмме. Классы сущностей, создаваемые в этой главе, управляются поставщиком сохранения состояния. Создаваемые в этой главе сеансные компоненты управляются контейнером EJB. Представления отображаются страницами JSP, которые управляются веб-контейнером.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/java-ee-container.png" alt="java ee container">
</div>
<div class="title">Figure 3. Будучи контейнером Java EE, GlassFish в.3 содержит веб-контейнеры и контейнеры EJB и EclipseLink, поставщик сохраняемости</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="addEntity">Добавление классов сущностей</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Вначале используйте мастер создания классов сущностей из базы данных в среде IDE для создания классов сущностей на основе схемы <code>affablebean</code>. При выполнении этого действия мастеру требуется поставщик сохранения состояния.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Откройте<a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot3.zip">снимок проекта</a> в среде IDE. В IDE нажмите Ctrl-Shift-O (âŚ�-Shift-O в Mac) и перейдите к местоположению на компьютере, где был распакован загруженный файл.</p>
</li>
<li>
<p>Нажмите сочетание клавиш CTRL+N (⌘-N на компьютере Mac) для открытия мастера создания файлов.</p>
</li>
<li>
<p>Выберите категорию "Сохранение состояния" и затем "Классы сущностей из базы данных". Нажмите кнопку "Далее".</p>
</li>
<li>
<p>На втором экране мастера "Таблицы базы данных" выберите в списке источников данных <code>jdbc/affablebean</code>. Выпадающий список заполняется зарегистрированными на сервере приложений источниками данных.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При выборе источника данных <code>jdbc/affablebean</code> среда IDE сканирует базу данных и перечисляет таблицы в панели "Доступные таблицы".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/entity-from-database.png" alt="entity from database">
</div>
<div class="title">Figure 4. Выберите доступный источник данных для чтения IDE в таблицах баз данных</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Нажмите кнопку "Добавить", а затем - кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Step 3 of the Entity Classes from Database wizard differs slightly between IDE NetBeans 6.8 and 6.9. В зависимости от используемой версии IDE выполните следующие шаги.</p>
<div class="ulist">
<ul>
<li>
<p><a href="#68">IDE NetBeans 6.8</a></p>
</li>
<li>
<p><a href="#69">IDE NetBeans 6.9</a></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>[[68]]
==== IDE NetBeans 6.8</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/entity-classes-68.png" alt="entity classes 68">
</div>
<div class="title">Figure 5. NetBeans 6.8 - классы сущностей из мастера баз данных, Step 3: Классы сущностей</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Введите <strong>название сущности</strong> в поле "Пакет". После завершения работы мастера будет создан новый пакет для классов сущностей.</p>
</li>
<li>
<p>Нажмите кнопку "Создать блок сохранения состояния". Будет открыто диалоговое окно "Создание блока сохранения состояния".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/create-pu.png" alt="create pu">
</div>
<div class="title">Figure 6. Используйте диалоговое окно 'Создание блока сохранения состояния' для создания файла persistence.xml</div>
</div>
<div class="paragraph">
<p><em>Блок сохранения состояния</em> ссылается на набор классов сущностей приложения. Описанное выше диалоговое окно создает файл <code>persistence.xml</code>, который используется поставщиком сохранения состояния для определения параметров блока сохранения состояния. Обратите внимание, что для проекта по умолчанию выбран сервер EclipseLink (JPA 2.0). Оставьте для стратегии генерирования таблиц значение <code>Нет</code>. Это предотвращает изменения базы данных поставщиком сохранения состояния. Например, если требуется, чтобы поставщик сохранения состояния удалил базу данных, а затем снова создал ее на основе классов сущностей, можно выбрать стратегию <code>Удалить и создать</code>. Теперь каждый раз при развертывании проекта будет выполняться это действие.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Нажмите кнопку "Создать".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Отобразится третий экран "Классы сущностей". Обратите внимание, что имена классов сущностей зависят от таблиц базы данных. Например, сущность <code>CustomerOrder</code> связана с таблицей базы данных <code>customer_order</code>. Также обратите внимание, что по умолчанию выбран параметр "Создание аннотаций именованных запросов для сохраняемых полей". В этом учебном курсе будут использованы различные именованные запросы.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Продолжение смотрите ниже в <a href="#step7">шаге 7</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>[[69]]
==== IDE NetBeans 6.9</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/entity-classes-69.png" alt="entity classes 69">
</div>
<div class="title">Figure 7. NetBeans 6.9 - классы сущностей из мастера баз данных, Step 3: Классы сущностей</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Введите <strong>название сущности</strong> в поле "Пакет". После завершения работы мастера будет создан новый пакет для классов сущностей.</p>
</li>
<li>
<p>Обратите внимание:</p>
<div class="ulist">
<ul>
<li>
<p>имена классов сущностей зависят от таблиц базы данных. Например, сущность <code>CustomerOrder</code> связана с таблицей базы данных <code>customer_order</code>.</p>
</li>
<li>
<p>Параметр "Создать аннотации именованных запросов для сохраняемых полей" выбирается по умолчанию. В этом учебном курсе будут использованы различные именованные запросы.</p>
</li>
<li>
<p>Флажок "Создать блок сохранения состояния" установлен по умолчанию. <em>Блок сохранения состояния</em> — это набор классов сущностей приложения. Сохранение состояния определяется файлом настройки <code>persistence.xml</code>, который используется поставщиком сохранения состояния. Включение этого параметра означает, что мастер создает также файл <code>persistence.xml</code> и заполняет его параметрами по умолчанию.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Нажмите кнопку "Завершить". Классы сущностей JPA будут созданы на основе таблиц базы данных <code>affablebean</code>. Классы сущностей можно просмотреть в окне "Проекты", развернув только что созданный пакет <code>entity</code>. Обратите внимание, что новый блок сохранения состояния появляется в узле "Файлы настройки".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/entity-classes.png" alt="entity classes" width="Проекты")."">
</div>
<div class="title">Figure 8. Узлы для сущностных классов можно будет увидеть в окне Projects (</div>
</div>
<div class="paragraph">
<p>Обратите внимание, что был создан дополнительный класс сущностей <code>OrderedProductPK</code>. Таблица <code>ordered_product</code> в модели данных использует составной первичный ключ, состоящий из первичных ключей таблиц <code>customer_order</code> и <code>product</code>. Ознакомьтесь с разделом <a href="data-model.html#manyToMany">Проектирование модели данных — создание связей "многие ко многим"</a>. Поэтому поставщик сохранения состояния создает отдельный класс сущностей для составного ключа и <em>внедряет</em> его в сущность <code>OrderedProduct</code>. Для просмотра класса откройте его в редакторе <code>OrderedProduct</code>. Чтобы показать, что внедряемый класс является составным первичным ключом, в JPA используется аннотация <code>@EmbeddedId</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class OrderedProduct implements Serializable {
    private static final long serialVersionUID = 1L;
    *@EmbeddedId*
    protected OrderedProductPK orderedProductPK;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Нажмите сочетание клавиш CTRL+ПРОБЕЛ на аннотации <code>@EmbeddedId</code> для вызова документации по интерфейсу API.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/embedded-id.png" alt="embedded id">
</div>
<div class="title">Figure 9. Для вызова документации по API нажмите сочетание клавиш CTRL+ПРОБЕЛ.</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Откройте в редакторе блок сохранения состояния (<code>persistence.xml</code>). Для блоков сохранения состояния в среде IDE, кроме представления XML, доступно представление "Проектирование". Представление "Проектирование" позволяет удобно вносить изменения в параметры проекта, касающиеся управления поставщиком сохранения состояния.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/persistence-unit.png" alt="persistence unit">
</div>
<div class="title">Figure 10. Представление проектирования AffableBeanPU единицы сохранения</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Чтобы открыть представление XML, выберите вкладку "XML" в верхней части блока сохранения состояния <code>AffableBeanPU</code>. Добавьте в файл следующее свойство.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;persistence-unit name="AffableBeanPU" transaction-type="JTA"&gt;
  &lt;jta-data-source&gt;jdbc/affablebean&lt;/jta-data-source&gt;
  *&lt;properties&gt;
    &lt;property name="eclipselink.logging.level" value="FINEST"/&gt;
  &lt;/properties&gt;*
&lt;/persistence-unit&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Параметр протоколирования устанавливается в значение <code>FINEST</code> для просмотра всего вывода поставщика сохранения состояния при запуске приложения. Это позволяет увидеть запросы SQL к базе данных, используемые поставщиком сохранения состояния, и облегчает отладку.</p>
</div>
<div class="paragraph">
<p>См. официальную документацию по EclipseLink, чтобы получить представление о журналировании и список всех значений журнала, в разделе <a href="http://wiki.eclipse.org/EclipseLink/Examples/JPA/Logging">"Как настроить журналирование"</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="addSession">Добавление сеансных компонентов</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе для создания <em>фасада сеанса</em> каждого созданного класса сущностей будет использован мастер среды IDE "Сеансные компоненты для классов сущностей". В каждом сеансном компоненте будут содержаться основные методы доступа к соответствующему классу сущностей.</p>
</div>
<div class="paragraph">
<p><em>Фасад сеанса</em> — это шаблон проектирования, рекомендуемый <a href="http://java.sun.com/blueprints/enterprise/index.html">программе Enterprise BluePrints</a>. Как указано в документе <a href="http://java.sun.com/blueprints/corej2eepatterns/Patterns/SessionFacade.html">Core J2EE Pattern Catalog</a>, этот компонент пытается решить общие проблемы, возникающие в многопоточном приложении, например:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Жесткие связи, приводящие к прямой зависимости между клиентскими и бизнес-объектами.</p>
</li>
<li>
<p>Излишние вызовы методов между клиентом и сервером, приводящие к проблемам производительности сети.</p>
</li>
<li>
<p>Недостаточная общность стратегий доступа клиентов, что вызывает недопустимое использование бизнес-объектов.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Фасад сеанса маскирует взаимодействие основных бизнес-объектов и создает уровень служб, предоставляющий только необходимые функциональные возможности. Это позволяет скрыть от клиента сложную схему взаимодействия участников. Таким образом, сеансный компонент (т.е. фасад сеанса) управляет взаимодействием бизнес-объектов. Сеансный компонент также управляет жизненным циклом участников, создавая, находя, редактируя и удаляя их в соответствии с рабочим процессом.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Нажмите сочетание клавиш CTRL+N (⌘-N на компьютере Mac) для открытия мастера создания файлов.</p>
</li>
<li>
<p>В категории "Сохранение состояния" выберите "Сеансные компоненты для классов сущностей".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/session-beans-for-entity-classes.png" alt="session beans for entity classes">
</div>
<div class="title">Figure 11. Выберите компоненты Beans сеанса для классов сущностей для создания фасадного сеанса для модели сохраняемости</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Второй экран "Классы сущностей". Обратите внимание, что все классы сущностей проекта перечислены слева в разделе "Доступные классы сущностей". Нажмите кнопку "Добавить все". Все классы сущностей перемещаются вправо в раздел "Выбранные классы сущностей".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Третий экран "Созданные сеансные компоненты". Введите <strong>session</strong> в качестве имени пакета.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/generated-session-beans.png" alt="generated session beans" width="Source"."">
</div>
<div class="title">Figure 12. Укажите местоположение загруженных исходных файлов в папке в </div>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> Мастер может использоваться для создания локальных и удаленных интерфейсов к сеансным компонентам. Программирование сеансных компонентов с интерфейсами предпочтительнее (например, скрытие взаимодействия бизнес-объектов за интерфейсом позволяет отделить клиента от бизнес-логики, а при необходимости можно реализовать несколько вариантов интерфейса приложения). В то же время рассмотрение этого процесса выходит за рамки данного учебного курса. Обратите внимание, что версии EJB до 3.1 <em>требуют</em> реализации интерфейса для каждого сеансного компонента.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Нажмите кнопку "Завершить". В среде IDE создаются сеансные компоненты для каждого класса сущностей проекта. В окне "Проекты" разверните новый пакет <code>session</code> для просмотра сеансных компонентов.</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Net Beans, версия 6.8</th>
<th class="tableblock halign-left valign-top">Net Beans, версия 6.9</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/projects-window-session-beans.png" alt="projects window session beans" width="Проекты". "" title="Изучите проект CalculatorClientApp в окне "></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/projects-window-session-beans-69.png" alt="projects window session beans 69" width="Проекты". "" title="Изучите проект CalculatorClientApp в окне "></span></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Примечание.</strong> Как показано выше, IDE NetBeans 6.9 обеспечивает незначительные усовершенствования аналогично созданию мастером компонентов сеансов для классов сущностей фасадных классов. А именно, код-заготовка, общий для всех классов, складывается в абстрактный класс, названный <code>AbstractFacade</code>. Работая в версии 6.9, откройте любой из созданных фасадных классов (кроме класса <code>AbstractFacade</code>). Видно, что этот класс расширяет <code>AbstractFacade</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Откройте сессионный фасад в редакторе, например в <code>ProductFacade</code>. Все редактируемые сессионные фасады создают <a href="http://java.sun.com/javaee/6/docs/api/javax/persistence/EntityManager.html">`EntityManager`</a>, используя аннотацию <a href="http://download.oracle.com/javaee/6/api/javax/persistence/PersistenceContext.html">`@PersistenceContext`</a>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@PersistenceContext(unitName = "AffableBeanPU")
private EntityManager em;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Аннотация <code>@PersistenceContext</code> используется для добавления в класс интерфейса <code>EntityManager</code>, управляемого контейнером. Другими словами, контейнер EJB проекта GlassFish используется для открытия и закрытия интерфейсов <code>EntityManager</code>, когда это необходимо. Элемент <code>unitName</code> указывает блок сохранения состояния <code>AffableBeanPU</code>, который был определен в файле <code>persistence.xml</code> приложения.</p>
</div>
<div class="paragraph">
<p><code>EntityManager</code> (диспетчер сущностей) — внутренний компонент интерфейса API сохранения состояния Java, отвечающий за сохранение состояния в базе данных. В книге <a href="http://www.manning.com/panda/">EJB 3 в действии</a> <code>EntityManager</code> описан следующим образом:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><em>Интерфейс JPA <code>EntityManager</code> управляет сущностями в терминах реального обеспечения служб сохранения состояния. Когда сущности сообщают поставщику JPA о своем сопоставлении с базой данных, они не сохраняют свое состояние самостоятельно. Интерфейс <code>EntityManager</code> считывает метаданные ORM для сущности и производит операции сохранения состояния.</em></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Теперь приложение содержит модель сохранения состояния базы данных <code>affablebean</code> в форме классов сущностей JPA. Также оно содержит фасад сеанса, состоящий из компонентов уровня приложения, используемых для доступа к классам сущностей. В следующем разделе показан способ доступа к базе данных при помощи сеансных компонентов и классов сущностей.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="access">Доступ к данным при помощи EJB</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В <a href="connect-db.html">предыдущей главе учебного курса</a> показан способ доступа к базе данных путем настройки источника данных в GlassFish, добавления ссылки на ресурс к описателю развертывания приложения и использования тега JSTL <code>&lt;sql&gt;</code> на страницах JSP приложения. Это важный способ, поскольку он позволяет быстро настроить прототипы, включающие в себя данные из базы данных. Тем не менее, такой способ не подходит для средних и крупных приложений или приложений, управляемых командой разработчиков, так как сложен в расширении и поддержке. Более того, при разработке многоуровневого приложения или соблюдении шаблона MVC не следует хранить код доступа к данным в внешнем интерфейсе. Использование компонентов уровня предприятия с моделью сохранения состояния позволяет более полно следовать шаблону MVC благодаря разделению компонентов представления и модели.</p>
</div>
<div class="paragraph">
<p>Следующая инструкция описывает использование сеансных компонентов и компонентов сущностей в проекте <code>AffableBean</code>. В примере будет удален код доступа к данным JSTL, написанный ранее для страницы-указателя и страницы категории. Вместо них будут использованы методы доступа к данным сеансных компонентов, а данные будут храниться в контекстных переменных, которые доступны из внешнего интерфейса. Для начала отредактируем страницу-указатель, а затем - более сложную страницу категории.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#index">страница-указатель</a></p>
</li>
<li>
<p><a href="#category">страница категории</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="index">страница-указатель</h3>
<div class="paragraph">
<p>На странице-указателе требуются данные о четырех категориях продуктов. При текущих настройках теги JSTL <code>&lt;sql&gt;</code> запрашивают в базе данных сведения при каждом запросе к странице-указателю. Поскольку эта информация редко изменяется, с точки зрения производительности разумнее выполнить запрос только раз после того, как приложение будет запущено, и сохранить данные в атрибуте на уровне приложения. Этого можно добиться, добавив данный код в принадлежащий классу <code>ControllerServlet</code> метод <code>инициализации</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>В окне "Проекты" дважды щелкните узел "Исходные пакеты" &gt; <code>controller</code> &gt; <code>ControllerServlet</code>, чтобы открыть его в редакторе.</p>
</li>
<li>
<p>Объявите экземпляр <code>CategoryFacade</code> и примените к нему аннотацию <code>@EJB</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class ControllerServlet extends HttpServlet {

    *@EJB
    private CategoryFacade categoryFacade;*

    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>После добавления аннотации <code>@EJB</code> контейнер EJB создает экземпляр переменной <code>categoryFacade</code> с EJB <code>CategoryFacade</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>С помощью подсказок среды IDE добавьте операторы импорта для следующих классов:</p>
<div class="ulist">
<ul>
<li>
<p><code>javax.ejb.EJB</code></p>
</li>
<li>
<p><code>session.CategoryFacade</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>При нажатии Ctrl-Shift-I (⌘-Shift-I в Mac) требуемые импорты автоматически добавляются к используемому классу.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Добавьте в класс следующий метод <code>init</code>. Веб-контейнер инициализирует сервлет, вызывая свой метод <code>init</code>. Это происходит только один раз после загрузки сервлета и до начала обработки запросов.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class ControllerServlet extends HttpServlet {

    @EJB
    private CategoryFacade categoryFacade;

    *public void init() throws ServletException {

        // store category list in servlet context
        getServletContext().setAttribute("categories", categoryFacade.findAll());
    }*

    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Здесь метод фасадного класса <code>findAll</code> применяется для запроса из базы данных всех записей категории <code>Category</code>. Затем полученный <code>список</code> объектов <code>Category</code> устанавливается в атрибут, обозначаемый строкой <code>categories</code>. Размещение ссылки в <code>ServletContext</code> означает, что ссылка действует в контексте всего приложения.</p>
</div>
<div class="paragraph">
<p>Чтобы быстро определить подпись метода <code>findAll</code> подведите мышь к методу, удерживая клавишу Ctrl (⌘ в Mac). (The image below displays the popup that appears using IDE NetBeans 6.8.)</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/method-signature.png" alt="method signature">
</div>
<div class="title">Figure 13. Подведите мышь к методу, удерживая клавишу Ctrl для просмотра его подписи.</div>
</div>
<div class="paragraph">
<p>Щелкните гиперссылку для перехода к методу.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>С помощью подсказки среды IDE добавьте аннотацию <code>@Overrides</code> Метод <code>init</code> определяется надклассом <code>HttpServlet</code> и сервлетом <code>GenericServlet</code>.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/override.png" alt="override">
</div>
<div class="title">Figure 14. С помощью подсказки среды IDE добавьте аннотацию @Overrides </div>
</div>
<div class="paragraph">
<p>Добавление аннотации не обязательно, но дает следующие преимущества:
* Позволяет компилятору проверить, действительно ли переопределяется метод, который предполагается переопределить.
* Улучшает удобство восприятия, поскольку становится ясно, какие методы в исходном коде переопределяются.</p>
</div>
<div class="paragraph">
<p>Дополнительные сведения об аннотациях приведены в курсе <a href="http://download.oracle.com/javase/tutorial/java/javaOO/annotations.html">Учебные курсы по Java: аннотации</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>После создания в контексте приложения атрибута, содержащего список категорий, измените страницу-указатель таким образом, чтобы использовался этот атрибут.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Дважды щелкните узел "Веб-страницы" &gt; <code>index.jsp</code> в окне "Проекты", чтобы открыть файл в редакторе.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Закомментируйте (или удалите) оператор <code>&lt;sql:query&gt;</code> в начале файла. Для закомментирования кода в редакторе выделите код, затем нажмите Ctrl-/ (⌘-/ в Mac).</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/commented-out.png" alt="commented out">
</div>
<div class="title">Figure 15. Нажмите Ctrl-/ для закомментирования фрагмента кода в редакторе</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Отредактируйте открывающий тег <code>&lt;c:forEach&gt;</code> так, чтобы его атрибут <code>items</code> указывал на новый атрибут контекста приложения <code>categories</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;c:forEach var="category" items="*${categories}*"&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Откройте дескриптор развертывания веб-проекта. Нажмите сочетание клавиш ALT+SHIFT+O (CTRL+SHIFT+O в Mac OS) и в диалоговом окне "Переход к файлу" введите <code>web</code>, затем нажмите кнопку "ОК".</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/go-to-file.png" alt="go to file" width="Переход к файлу" быстро откройте файлы в редакторе"">
</div>
<div class="title">Figure 16. С помощью диалогового окна </div>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>Закомментируйте (или удалите) запись <code>&lt;resource-ref&gt;</code>. Эта запись требовалась для определения тегами <code>&lt;sql&gt;</code> источника данных, зарегистрированного на сервере. Теперь для доступа к базе данных используется JPA, и источник данных <code>jdbc/affablebean</code> уже был указан в блоке сохранения состояния. Подробные сведения представлены выше в разделе <a href="#pu">Представление проектирования поставщика сохранения состояния проекта</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Выделите всю запись <code>&lt;resource-ref&gt;</code>, затем нажмите Ctrl-/ (⌘-/ в Mac).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">*&lt;!-- *&lt;resource-ref&gt;
         &lt;description&gt;Connects to database for AffableBean application&lt;/description&gt;
         &lt;res-ref-name&gt;jdbc/affablebean&lt;/res-ref-name&gt;
         &lt;res-type&gt;javax.sql.ConnectionPoolDataSource&lt;/res-type&gt;
         &lt;res-auth&gt;Container&lt;/res-auth&gt;
         &lt;res-sharing-scope&gt;Shareable&lt;/res-sharing-scope&gt;
     &lt;/resource-ref&gt; *--&gt;*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="11">
<li>
<p>Выполните проект. Нажмите кнопку 'Запустить проект' ( <span class="image"><img src="images/run-project-btn.png" alt="run project btn"></span> ). В браузере откроется страница-указатель проекта, и отобразятся все четыре категории и изображения.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/index-page.png" alt="index page">
</div>
<div class="title">Figure 17. Убедитесь в том, что к базе данных добавлены новые таблицы.</div>
</div>
</div>
<div class="sect2">
<h3 id="category">страница категории</h3>
<div class="paragraph">
<p>Для верного отображения <a href="design.html#category">страницы категории</a> требуются три элемента данных:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>данные о категориях:</strong> для кнопок категорий в левом столбце;</p>
</li>
<li>
<p><strong>выбранная категория:</strong> выбранная категория выделяется в левом столбце и ее имя отображается над таблицей продуктов;</p>
</li>
<li>
<p><strong>данные о продуктах в выбранной категории:</strong> для отображения продуктов в таблице.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Рассмотрим отдельно каждый элемент данных.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#categoryData">данные о категориях</a></p>
</li>
<li>
<p><a href="#selectedCategoryData">выбранная категория</a></p>
</li>
<li>
<p><a href="#productData">данные о продуктах в выбранной категории</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="categoryData">данные о категориях</h4>
<div class="paragraph">
<p>Для получения данных о категориях можно повторно использовать атрибут в контексте приложения <code>categories</code>, созданный для страницы-указателя.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Откройте <code>category.jsp</code> в редакторе и закомментируйте (Ctrl-/; ⌘-/ в Mac) операторы JSTL <code>&lt;sql&gt;</code>, указанные в верхней части файла.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/comment-out-sql.png" alt="comment out sql">
</div>
<div class="title">Figure 18. Закомментируйте операторы JSTL &lt;sql&gt; на странице категорий</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Отредактируйте открывающий тег <code>&lt;c:forEach&gt;</code> так, чтобы его атрибут <code>items</code> указывал на атрибут контекста приложения <code>categories</code>. Эта же операция была проведена в файле <code>index.jsp</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;c:forEach var="category" items="*${categories}*"&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Выполните проект для проверки текущего состояния страницы категории. Нажмите кнопку 'Запустить проект' ( <span class="image"><img src="images/run-project-btn.png" alt="run project btn"></span> ). После отображения страницы-указателя в браузере щелкните одну из категорий. Кнопки категорий в левом столбце отображаются и работают ожидаемым образом.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/category-page-left-column.png" alt="category page left column">
</div>
<div class="title">Figure 19. Кнопки категорий в левом столбце отображаются и работают ожидаемым образом.</div>
</div>
</div>
<div class="sect3">
<h4 id="selectedCategoryData">выбранная категория</h4>
<div class="paragraph">
<p>Чтобы извлечь выбранную категорию, можно использовать переменную <code>categoryFacade</code>, созданную ранее для поиска <code>Category</code>, чей идентификатор совпадает со строкой запроса.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Откройте в редакторе <code>ControllerServlet</code>. Если он уже открыт, нажмите сочетание клавиш CTRL+TAB и выберите его во всплывающем списке.</p>
</li>
<li>
<p>Начните реализовывать функциональность по принятию выбранной категории Найдите комментарий <code>TODO: Implement category request</code> (Сделать: реализовать запрос категории), удалите его и добавьте следующий код (выделен <strong>полужирным шрифтом</strong>).</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// if category page is requested
if (userPath.equals("/category")) {

    *// get categoryId from request
    String categoryId = request.getQueryString();

    if (categoryId != null) {

    }*

// if cart page is requested
} else if (userPath.equals("/viewCart")) {</code></pre>
</div>
</div>
<div class="paragraph">
<p>В этом запросе вызовом функции <code>getQueryString()</code> извлекается идентификатор запрашиваемой категории.</p>
</div>
<div class="paragraph">
<p><strong>Примечание.</strong> Логика определения выбранной категории кнопками левого столбца уже реализована в <code>category.jsp</code> с использованием выражения EL, что сравнимо с вызовом <code>getQueryString()</code> в сервлете. Выражение EL: <code>pageContext.request.queryString</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Добавьте в оператор <code>if</code> следующую строку кода.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// get categoryId from request
String categoryId = request.getQueryString();

if (categoryId != null) {

    *// get selected category
    selectedCategory = categoryFacade.find(Short.parseShort(categoryId));*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>С помощью принадлежащего классу <code>CategoryFacade``поискового</code> метода возвращается объект <code>Category</code>, который связан с идентификатором запрашиваемой категории. Обратите внимание, что необходимо привести <code>categoryId</code> к типу <code>Short</code>, поскольку такой тип используется в поле <code>id</code> класса сущностей <code>Category</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Щелкните метку ( <span class="image"><img src="images/editor-badge.png" alt="editor badge"></span> ) на левой границе для использования подсказки в редакторе для объявления <code>selectedCategory</code> как локальной переменной в методе <code>doGet</code>.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/local-variable.png" alt="local variable">
</div>
<div class="title">Figure 20. Использование подсказок редактора для объявления локальных переменных</div>
</div>
<div class="paragraph">
<p>Поскольку <code>selectedCategory</code> имеет тип <code>Category</code>, который не был ранее импортирован в класс, среда IDE автоматически добавляет выражение импорта для <code>entity.Category</code> в начало файла.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Чтобы поместить полученный объект <code>Category</code> в контекст запроса, добавьте следующую строку.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// get categoryId from request
String categoryId = request.getQueryString();

if (categoryId != null) {

    // get selected category
    selectedCategory = categoryFacade.find(Short.parseShort(categoryId));

    *// place selected category in request scope
    request.setAttribute("selectedCategory", selectedCategory);*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Переключитесь в редакторе к файлу <code>category.jsp</code>. Для этого нажмите сочетание клавиш CTRL+TAB и выберите его во всплывающем списке.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Найдите текст <code>&lt;p id="categoryTitle"&gt;</code> и внесите следующие изменения.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;p id="categoryTitle"&gt;
    &lt;span style="background-color: #f5eabe; padding: 7px;"&gt;*${selectedCategory.name}*&lt;/span&gt;
&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Теперь используется атрибут <code>selectedCategory</code>, помещенный в контекст запроса в <code>ControllerServlet</code>. С помощью &#8220;.name&#8221; в выражении EL вызывается метод <code>getName</code> в данном объекте <code>Category</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Переключитесь обратно на окно браузера и обновите страницу категорий. Теперь на странице отображается имя выбранной категории.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/category-page-selected-category.png" alt="category page selected category">
</div>
<div class="title">Figure 21. Теперь на странице отображается имя выбранной категории.</div>
</div>
</div>
<div class="sect3">
<h4 id="productData">данные о продуктах в выбранной категории</h4>
<div class="paragraph">
<p>Для того чтобы получить все продукты из выбранной категории, используется принадлежащий сущности <code>Category</code> метод <code>getProductCollection()</code>. Запустите вызов этого метода для <code>selectedCategory</code>, чтобы получить коллекцию всех <code>Product</code>, связанных с <code>selectedCategory</code>. Далее сохраните коллекцию продуктов в контексте запроса как атрибут и, наконец, сошлитесь на контекстный атрибут из представления страницы <code>category.jsp</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Добавьте следующий оператор в код <code>ControllerServlet</code>. Это выражение управляет запросом категории.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// if category page is requested
if (userPath.equals("/category")) {

    // get categoryId from request
    String categoryId = request.getQueryString();

    if (categoryId != null) {

        // get selected category
        selectedCategory = categoryFacade.find(Short.parseShort(categoryId));

        // place selected category in request scope
        request.setAttribute("selectedCategory", selectedCategory);

        *// get all products for selected category
        categoryProducts = selectedCategory.getProductCollection();*
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Здесь вызов <code>getProductCollection</code> позволяет получить коллекцию всех продуктов <code>Product</code>, связанных с выбранной категорией <code>selectedCategory</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Используйте подсказку редактора для определения <code>categoryProducts</code> в качестве локальной переменной для метода <code>doGet</code>.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/local-variable2.png" alt="local variable2">
</div>
<div class="title">Figure 22. Использование подсказок редактора для объявления локальных переменных</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Поместите коллекцию продуктов <code>Product</code> в контекст запроса, чтобы ее можно было извлечь из внешнего интерфейса приложения.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// if category page is requested
if (userPath.equals("/category")) {

    // get categoryId from request
    String categoryId = request.getQueryString();

    if (categoryId != null) {

        // get selected category
        selectedCategory = categoryFacade.find(Short.parseShort(categoryId));

        // place selected category in request scope
        request.setAttribute("selectedCategory", selectedCategory);

        // get all products for selected category
        categoryProducts = selectedCategory.getProductCollection();

        *// place category products in request scope
        request.setAttribute("categoryProducts", categoryProducts);
    }*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Откройте в редакторе <code>category.jsp</code> и внесите в таблицу запросов следующее изменение.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;table id="productTable"&gt;

    &lt;c:forEach var="product" items="*${categoryProducts}*" varStatus="iter"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Тег <code>&lt;c:forEach&gt;</code> теперь ссылается на набор <code>categoryProducts</code>. Цикл <code>c:forEach</code> теперь выполняется для каждого объекта <code>Product</code>, содержащегося в коллекции, и извлекает соответствующие данные.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Для запуска проекта нажмите клавишу F6 (или сочетание клавиш fn+F6 в Mac OS) В браузере перейдите к странице категории и обратите внимание, что для каждой категории отображаются все продукты.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/category-page-product-table.png" alt="category page product table">
</div>
<div class="title">Figure 23. Убедитесь в том, что к базе данных добавлены новые таблицы.</div>
</div>
<div class="paragraph">
<p>Этот учебный курс — краткое введение в технологии JPA и EJB. Также здесь описана роль спецификаций Java и использование примеров их реализации в сервере приложений GlassFish. Показано, как создать набор классов сущностей JPA, предоставляющих реализацию базы данных проектов на уровне Java. Затем в соответствии с шаблоном <em>фасад сеанса</em> показано создание набора сеансных компонентов EJB, которые расположены выше уровнем, чем классы сущностей, и предоставляют удобный доступ к ним. Наконец, проект <code>AffableBean</code> изменен для того, чтобы использовать новые сеансные компоненты и сущности для доступа к базе данных. Это требовалось в странице-указателе и странице категорий.</p>
</div>
<div class="paragraph">
<p>You can download <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot4.zip">snapshot 4</a> of the <code>AffableBean</code> project, which corresponds to state the project after completing this unit using IDE NetBeans 6.9.</p>
</div>
<div class="paragraph">
<p>В следующей главе будет рассмотрено управление сеансами и запоминание приложением действий пользователя, который перемещается по сайту. Это ключевой момент при реализации механизма "покупательской корзины" в приложениях электронной коммерции.</p>
</div>
<div class="paragraph">
<p>link:/about/contact_form.html?to=3&amp;subject=Feedback: NetBeans E-commerce Tutorial - Adding Entity Classes and Session Beans[Мы ждем ваших отзывов]</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="seeAlso">Дополнительные сведения</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_материалы_по_netbeans">Материалы по NetBeans</h3>
<div class="ulist">
<ul>
<li>
<p><a href="../../../trails/java-ee.html">Учебная карта по Java EE и Java Web</a></p>
</li>
<li>
<p><a href="../javaee-intro.html">+Введение в технологию Java EE +</a></p>
</li>
<li>
<p><a href="../javaee-gettingstarted.html">Начало работы с приложениями для Java EE</a></p>
</li>
<li>
<p><a href="../secure-ejb.html">Создание безопасных компонентов уровня предприятия в Java EE</a></p>
</li>
<li>
<p><a href="../javaee-entapp-ejb.html">Создание приложения уровня предприятия с помощью EJB 3.1</a></p>
</li>
<li>
<p><a href="../jpa-eclipselink-screencast.html">Использование поддержки JPA с EclipseLink</a> [экранная демонстрация]</p>
</li>
<li>
<p><a href="../../screencasts.html">Video Tutorials and Demos for IDE NetBeans 6.x</a></p>
</li>
<li>
<p><a href="http://refcardz.dzone.com/refcardz/netbeans-java-editor-68">Работа с кодом в редакторе Java IDE NetBeans: справочник</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ресурсы_по_ejb">Ресурсы по EJB</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Страница продукта:</strong> <a href="http://java.sun.com/products/ejb/">+Технология Enterprise JavaBeans +</a></p>
</li>
<li>
<p><strong>Загрузка спецификации:</strong> <a href="http://jcp.org/aboutJava/communityprocess/final/jsr318/index.html">JSR 318: EJB 3.1 Final Release</a></p>
</li>
<li>
<p><strong>Пример реализации:</strong> <a href="http://glassfish.dev.java.net/downloads/ri">http://glassfish.dev.java.net/downloads/ri</a></p>
</li>
<li>
<p><strong>Официальный форум:</strong> <a href="http://forums.sun.com/forum.jspa?forumID=13">Enterprise Technologies — Enterprise JavaBeans</a></p>
</li>
<li>
<p><strong>Учебный курс Java EE 6:</strong> <a href="http://download.oracle.com/docs/cd/E17410_01/javaee/6/tutorial/doc/bnblr.html">Часть IV. Компоненты уровня предприятия</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ресурсы_по_jpa">Ресурсы по JPA</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Страница продукта:</strong> <a href="http://java.sun.com/javaee/technologies/persistence.jsp">Java Persistence API</a></p>
</li>
<li>
<p><strong>Загрузка спецификации:</strong> <a href="http://jcp.org/aboutJava/communityprocess/final/jsr317/index.html">JSR 317: Java Persistence 2.0 Final Release</a></p>
</li>
<li>
<p><strong>Пример реализации:</strong> <a href="http://www.eclipse.org/eclipselink/downloads/ri.php">http://www.eclipse.org/eclipselink/downloads/ri.php</a></p>
</li>
<li>
<p><strong>Учебный курс по Java EE 6:</strong> <a href="http://download.oracle.com/docs/cd/E17410_01/javaee/6/tutorial/doc/bnbpy.html">Часть VI. Сохранение состояния</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ресурсы_по_glassfish">Ресурсы по GlassFish</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://glassfish.dev.java.net/docs/index.html">Документация GlassFish v3</a></p>
</li>
<li>
<p><a href="http://www.sun.com/offers/details/GlassFish_Tomcat.html">Изучение GlassFish в Tomcat</a></p>
</li>
<li>
<p><a href="https://glassfish.dev.java.net/javaee5/persistence/persistence-example.html">Проект GlassFish. Пример использования Java Persistence</a></p>
</li>
<li>
<p><a href="http://docs.sun.com/app/docs/doc/820-7759">Первые шаги: введение в платформу Java EE</a></p>
</li>
<li>
<p><a href="https://glassfish.dev.java.net/downloads/ri/">Загрузка примеров реализации</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_технические_статьи">Технические статьи</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.theserverside.com/news/1363656/New-Features-in-EJB-31">Новые возможности EJB 3.1</a></p>
</li>
<li>
<p><a href="http://www.ibm.com/developerworks/java/library/j-ejb1008.html">Практические рекомендации по EJB: безопасность компонентов сущностей</a></p>
</li>
<li>
<p><a href="http://java.sun.com/blueprints/corej2eepatterns/Patterns/SessionFacade.html">Core J2EE Patterns - Фасад сеанса</a></p>
</li>
<li>
<p><a href="http://www.ibm.com/developerworks/websphere/library/techarticles/0106_brown/sessionfacades.html">Правила и шаблоны фасадов сеанса</a></p>
</li>
<li>
<p><a href="http://www.oracle.com/technology/sample_code/tech/java/j2ee/designpattern/businesstier/sessionfacade/readme.html">Пример приложения шаблона проектирования - фасад сеанса</a></p>
</li>
<li>
<p><a href="http://www.ibm.com/developerworks/websphere/library/bestpractices/using_httpservlet_method.html">Практические рекомендации: использование метода `init` объекта HttpServlet</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_книги">Книги</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.amazon.com/Beginning-Java-EE-GlassFish-Second/dp/143022889X/ref=dp_ob_title_bk">Начало работы с Java EE 6 с GlassFish 3</a></p>
</li>
<li>
<p><a href="http://www.amazon.com/Java-EE-GlassFish-Application-Server/dp/1849510369/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1281888153&amp;sr=1-1">Java EE 6 с сервером приложений GlassFish 3</a></p>
</li>
<li>
<p><a href="http://www.apress.com/book/view/1590598954">Pro IDE NetBeans 6 Rich Client Platform Edition</a></p>
</li>
<li>
<p><a href="http://www.amazon.com/Real-World-Patterns-Rethinking-Practices/dp/0557078326/ref=pd_sim_b_4">Испытанные приемы пересмотра шаблонов Java EE Real World</a></p>
</li>
<li>
<p><a href="http://www.amazon.com/Patterns-Enterprise-Application-Architecture-Martin/dp/0321127420/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1281985949&amp;sr=1-1">Шаблоны архитектуры корпоративных приложений</a></p>
</li>
<li>
<p><a href="http://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1281985959&amp;sr=1-1">Разработка на основе доменов: сложность отслеживания в основе программного обеспечения</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ссылки">Ссылки</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#1">^</a> Адаптация <a href="http://www.manning.com/panda/">EJB 3 в действии</a> Глаза 1, раздел 1.1.2: EJB как платформа.</p>
</li>
<li>
<p><a href="#2">^</a>EJB предоставляет множество других служб. Более подробный список приведен в книге <a href="http://www.manning.com/panda/">EJB 3 в действии</a>, глава 1, раздел 1.3.3: получение функциональных возможностей с помощью служб EJB.</p>
</li>
</ol>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/javaee/ecommerce/entity-session_ru.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
