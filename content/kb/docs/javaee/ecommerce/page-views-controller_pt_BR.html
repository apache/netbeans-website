
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Tutorial do NetBeans E-commerce: Preparando as Views de Página e o Servlet Controlador</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Tutorial do NetBeans E-commerce: Preparando as Views de Página e o Servlet Controlador - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Tutorial do NetBeans E-commerce: Preparando as Views de Página e o Servlet Controlador">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 12.3</h1>
            <p><a class="button success" href="/download/nb123/nb123.html">Find out more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">Tutorial do NetBeans E-commerce: Preparando as Views de Página e o Servlet Controlador</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/javaee/ecommerce/page-views-controller_pt_BR.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#createProjectFiles">Criando Arquivos do Projeto</a>
<ul class="sectlevel2">
<li><a href="#jsp">Criando Páginas JSP</a></li>
<li><a href="#css">Criando uma Folha de Estilo</a></li>
</ul>
</li>
<li><a href="#implementHTML">Implementando conteúdo HTML e CSS</a>
<ul class="sectlevel2">
<li><a href="#_suporte_ao_editor_html_do_netbeans">Suporte ao Editor HTML do NetBeans</a></li>
<li><a href="#_suporte_css_do_netbeans">Suporte CSS do NetBeans</a></li>
<li><a href="#tipsTricks">Dicas e Truques</a></li>
</ul>
</li>
<li><a href="#view">Colocando Páginas JSP em WEB-INF</a></li>
<li><a href="#jspf">Criando um Cabeçalho e Rodapé</a></li>
<li><a href="#dd">Adicionando uma Diretiva ao Descritor de Implantação</a></li>
<li><a href="#controller">Criando o Servlet Controlador</a></li>
<li><a href="#implement">Implementando o Servlet do Controlador</a>
<ul class="sectlevel2">
<li><a href="#_modificando_os_modelos_de_arquivos_com_o_gerenciador_de_modelos_do_ide">Modificando os Modelos de Arquivos com o Gerenciador de Modelos do IDE</a></li>
</ul>
</li>
<li><a href="#seeAlso">Consulte Também</a>
<ul class="sectlevel2">
<li><a href="#_tutoriais_do_netbeans">Tutoriais do NetBeans</a></li>
<li><a href="#_livros_do_netbeans">Livros do NetBeans</a></li>
<li><a href="#_recursos_externos">Recursos Externos</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="intro.html">Introdução</a></p>
</li>
<li>
<p><a href="design.html">Criando a Aplicação</a></p>
</li>
<li>
<p><a href="setup-dev-environ.html">Configurando o Ambiente de Desenvolvimento</a></p>
</li>
<li>
<p><a href="data-model.html">Criando o Modelo de Dados</a></p>
</li>
<li>
<p><strong>Preparando as Views de Página e Servlet do Controlador</strong></p>
</li>
<li>
<p><a href="connect-db.html">Conectando a Aplicação ao Banco de Dados</a></p>
</li>
<li>
<p><a href="entity-session.html">Adicionando Classes de Entidades e Beans de Sessão</a></p>
</li>
<li>
<p><a href="manage-sessions.html">Gerenciando Sessões</a></p>
</li>
<li>
<p><a href="transaction.html">Integrando a Lógica de Negócios Transacional</a></p>
</li>
<li>
<p><a href="language.html">Adicionando o Suporte a Idioma</a></p>
</li>
<li>
<p><a href="security.html">Protegendo a Aplicação</a></p>
</li>
<li>
<p><a href="test-profile.html">Testando e Criando Perfis</a></p>
</li>
<li>
<p><a href="conclusion.html">Conclusão</a></p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../images_www/articles/68/netbeans-stamp-68-69.png" alt="netbeans stamp 68 69">
</div>
<div class="title">Figure 1. O conteúdo desta página se aplica ao NetBeans IDE, versões e 6.8 e 6.9</div>
</div>
<div class="paragraph">
<p>Esta unidade do tutorial demonstra como criar arquivos de projeto no IDE e apresenta alguns dos recursos disponíveis para desenvolvimento em HTML e CSS. Após criar os arquivos de projeto necessários, você começa a organizar o front-end da aplicação. Isso é, você colocará arquivos JSP nos seus locais apropriados dentro da estrutura do projeto, criará um cabeçalho e um rodapé que serão aplicados a todas as views e configurará o servlet controlador para tratar solicitações de entrada.</p>
</div>
<div class="paragraph">
<p>Nesta unidade você também criará um descritor de implantação web (arquivo <code>web.xml</code>) para a aplicação. Você pode utilizar o descritor de implantação para especificar informações de configuração que serão lidas pelo servidor durante a implantação. Embora as <a href="http://jcp.org/en/jsr/detail?id=315">especificações do Servlet 3.0</a>, incluídas no Java EE 6, permitam a utilização de anotações de classe no lugar de XML, é possível ainda exigir que o descritor de implantação configure certos elementos da aplicação. Especificamente, nesta unidade serão adicionadas diretivas para o cabeçalho e rodapé e serão especificados em que arquivos elas serão aplicadas.</p>
</div>
<div class="paragraph">
<p>Um dos objetivos desta unidade do tutorial é criar páginas JSP que correspondem às views especificadas no design da aplicação. Consultando os <a href="design.html#mockups">modelos de página</a> e o <a href="design.html#business">diagrama de fluxo do processo</a>, você começa a implementar layouts de páginas de acordo com as maquetes ao criar <em>placeholders</em> para todos os componentes visuais e funcionais. Esta unidade fornece um guia para a implementação do layout da página de boas-vindas. É possível aplicar as etapas descritas para criar as outras páginas sozinho ou <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot1.zip">fazer download do snapshot 1 do projeto</a> que fornece layouts completos de todas as páginas.</p>
</div>
<div class="paragraph">
<p>Você pode exibir uma demonstração ao vivo da aplicação construída neste tutorial: <a href="http://dot.netbeans.org:8080/AffableBean/">Aplicação de Demonstração do Tutorial do NetBeans E-commerce</a></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Software ou Recurso</th>
<th class="tableblock halign-left valign-top">Versão Necessária</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pacote Java, 6.8 ou 6.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java Development Kit (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">versão 6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#glassFish">GlassFish Server</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">v3 ou Open Source Edition 3.0.1</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Observações:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>O NetBeans IDE requer o Java Development Kit (JDK) para ser executado adequadamente. Se você não tiver nenhum dos recursos listados acima, o JDK deverá ser o primeiro item a ser submetido a download e instalado.</p>
</li>
<li>
<p>O Pacote Java do NetBeans IDE inclui o Java Web e tecnologias EE, que são necessárias para a aplicação construída neste tutorial.</p>
</li>
<li>
<p>O pacote Java do NetBeans IDE também inclui o GlassFish Server, necessário para este tutorial. Você poderia <a href="https://glassfish.dev.java.net/public/downloadsindex.html">fazer download do GlassFish Server independentemente</a>, mas a versão fornecida pelo NetBeans do qual fez download tem a vantagem adicional de ser registrada automaticamente no IDE.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="createProjectFiles">Criando Arquivos do Projeto</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Para criar novos arquivos para o projeto, acesse o assistente de Arquivo do IDE. Você pode clicar no botão Novo Arquivo (<span class="image"><img src="images/new-file-btn.png" alt="new file btn"></span>), pressionar Ctrl-N (⌘-N no Mac), ou na janela Projetos, clique com o botão direito do mouse no nó de pasta que conterá o novo arquivo, e selecione Novo &gt; [tipo de arquivo]. Nas subseções a seguir, crie páginas JSP e folha de estilo para o projeto.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#jsp">Criando Páginas JSP</a></p>
</li>
<li>
<p><a href="#css">Criando uma Folha de Estilo</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="jsp">Criando Páginas JSP</h3>
<div class="paragraph">
<p>Comece a trabalhar no projeto criando páginas JSP que correspondem às views exibidas no <a href="design.html#business">diagrama de fluxo do processo</a>.</p>
</div>
<div class="paragraph">
<p>A página <code>index.jsp</code> que foi gerada pelo IDE se tornará a página de boas-vindas do projeto. Crie uma página JSP para as quatro views remanescentes e, por enquanto, coloque-as na raiz da web do projeto com <code>index.jsp</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clique no botão Novo Arquivo (<span class="image"><img src="images/new-file-btn.png" alt="new file btn"></span>) para abrir o assistente de Arquivo.</p>
</li>
<li>
<p>Selecione a categoria da Web e, em seguida, selecione JSP e clique em Próximo.</p>
</li>
<li>
<p>Nomeie o arquivo &#8220;category&#8221;. Note que o campo Localização está definido como <code>Páginas Web</code>, indicando que o arquivo será criado na raiz da web do projeto. Isso corresponde à pasta <code>web</code> do projeto, que pode ser verificada mais tarde na janela Arquivos do IDE.</p>
</li>
<li>
<p>Clique em Finalizar. O IDE gera a nova página JSP e a abre no editor.</p>
</li>
<li>
<p>Repita as etapas 1 a 4 acima para criar as páginas <code>cart.jsp</code>, <code>checkout.jsp</code>, <code>confirmation.jsp</code> remanescentes.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Quando você finalizar, a janela Projetos terá a seguinte aparência:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projects-win-views.png" alt="projects win views">
</div>
<div class="title">Figure 2. As views estão contidas na pasta </div>
</div>
</div>
<div class="sect2">
<h3 id="css">Criando uma Folha de Estilo</h3>
<div class="paragraph">
<p>Crie um arquivo CSS para conter todos os estilos específicos da aplicação.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na janela Projetos, clique com o botão direito do mouse no nó Páginas Web e selecione Nova &gt; Pasta.</p>
</li>
<li>
<p>No assistente de Nova Pasta, nomeie a pasta &#8220;css&#8221; e clique em Finalizar.</p>
</li>
<li>
<p>Clique com o botão direito do mouse na nova pasta <code>css</code> e selecione Novo &gt; Folha de Estilo em Cascata. (Se o item Folha de Estilo em Cascata não estiver listado, escolha Outro. No assistente de Arquivo, selecione a categoria Web e, em seguida, selecione Folha de Estilo em Cascata e selecione Próximo.)</p>
</li>
<li>
<p>Nomeie a folha de estilo como <code>affablebean</code> e clique em Finalizar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Quando finalizar, você verá o arquivo <code>affablebean.css</code> exibido na janela de Projetos.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projects-win-css.png" alt="projects win css">
</div>
<div class="title">Figure 3. A janela Projetos exibe a nova pasta ''css</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="implementHTML">Implementando conteúdo HTML e CSS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>O propósito desta seção é criar as views de página para que comecem a espelhar os <a href="design.html#mockups">modelos de página</a> fornecidos. Assim, elas servirão como andaime que pode ser utilizado para inserir conteúdo dinâmico durante estágios posteriores do desenvolvimento do projeto. Para fazer isso, serão utilizados os editores de HTML e CSS do IDE, junto com várias janelas de suporte do CSS.</p>
</div>
<div class="paragraph">
<p><strong>Nota de compatibilidade do browser:</strong> este tutorial utiliza Firefox 3 e <em>não</em> garante que a marcação da view da página seja compatível com outros browsers modernos. Naturalmente, ao trabalhar com tecnologias web front-end (HTML, CSS e JavaScript) é recomendado ter medidas para assegurar que as páginas web tenham sido renderizadas apropriadamente nos browsers e versões dos browsers que você espera que os visitantes do site utilizarão (normalmente Internet Explorer, Firefox, Safari, Chrome e Opera). Ao trabalhar com o IDE, você pode definir o browser em que deseja que sua aplicação seja aberta. Selecione Ferramentas &gt; Opções (NetBeans &gt; Preferências no Mac) e na guia Geral na janela Opções, selecione o browser que deseja utilizar do drop-down do Browser da Web. O IDE detecta os browsers instalados nas suas localizações default. Se um browser instalado no seu computador não for exibido, clique no botão Editar e registre o browser manualmente.</p>
</div>
<div class="paragraph">
<p>Preparar a exibição da suas páginas web é, geralmente, um processo iterativo, que você iria ajustar com comentários regulares do cliente. As seguintes etapas foram criadas para apresentar os recursos fornecidos pelo IDE e demonstrar como iniciar utilizando o <a href="design.html#index">modelo da página de boas-vindas</a> como exemplo.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na janela Projetos, clique duas vezes em`index.jsp` para abri-lo no editor.</p>
</li>
<li>
<p>Comece criando tags <code>&lt;div&gt;</code> para as áreas principais da página. Você pode criar ao todo cinco tags: quatro para as áreas principais (cabeçalho, rodapé, coluna da esquerda e coluna da direita) e a quinta para conter as outras. Remova qualquer conteúdo de dentro da tag <code>&lt;body&gt;</code> e substitua-o pelo seguinte. (O novo código é mostrado em <strong>negrito</strong>.)</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;body&gt;
    *&lt;div id="main"&gt;
        &lt;div id="header"&gt;
            header
        &lt;/div&gt;

        &lt;div id="indexLeftColumn"&gt;
            left column
        &lt;/div&gt;

        &lt;div id="indexRightColumn"&gt;
            right column
        &lt;/div&gt;

        &lt;div id="footer"&gt;
            footer
        &lt;/div&gt;
    &lt;/div&gt;*
&lt;/body&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Adicione referências à folha de estilo no cabeçalho da página e altere o texto do título.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;head&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
    *&lt;link rel="stylesheet" type="text/css" href="css/affablebean.css"&gt;*
    &lt;title&gt;*The Affable Bean*&lt;/title&gt;
&lt;/head&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Abra a folha de estilos <code>affablebean.css</code> no editor. Comece criando regras de estilo para os IDs <code>&lt;div&gt;</code> recém-criados.</p>
<div class="ulist">
<ul>
<li>
<p>Utilize as propriedades <code>width</code> e <code>height</code> para criar espaço para cada área.</p>
</li>
<li>
<p>Utilize a propriedade <code>background</code> para discernir as áreas quando exibir a página.</p>
</li>
<li>
<p>Para centralizar horizontalmente as quatro áreas na página, você pode incluir <code>margin: 20px auto</code> à regras <code>body</code>. (<code>20px)</code> aplica-se à parte superior e à inferior <code>auto</code> cria espaçamento igual para a esquerda e para a direita.) Depois inclua <code>float: left</code> às colunas da esquerda e da direita.</p>
</li>
<li>
<p>O rodapé requer <code>clear:left</code> para que sua borda superior seja exibida depois das bordas inferiores de qualquer área flutuante da esquerda acima dela (exemplo, as colunas da esquerda e da direita).</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">body {
    font-family: Arial, Helvetica, sans-serif;
    width: 850px;
    text-align: center;
    margin: 20px auto;
}

#main { background: #eee }

#header {
    height: 250px;
    background: #aaa;
}

#footer {
    height: 60px;
    clear: left;
    background: #aaa;
}

#indexLeftColumn {
    height: 400px;
    width: 350px;
    float: left;
    background: #ccc;
}

#indexRightColumn {
    height: 400px;
    width: 500px;
    float: left;
    background: #eee;
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Clique no botão Executar Projeto (<span class="image"><img src="images/run-project-btn.png" alt="run project btn"></span>) na barra de ferramentas principal do IDE. Os arquivos do projeto que contêm alterações são automaticamente salvos, qualquer código Java no projeto é compilado, o projeto é encapsulado e implantado ao GlassFish e o browser é aberto para exibir o estado atual da página de boas-vindas.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/index-page.png" alt="index page">
</div>
<div class="title">Figure 4. Executar o projeto para exibir o estado atual das páginas</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Agora, comece criando placeholders para componentes da página dentro de cada uma das quatro áreas visíveis. Inicie com o cabeçalho. Revisando o <a href="design.html#index">modelo da página de boas-vindas</a>, o cabeçalho deverá conter todos os componentes a seguir:</p>
<div class="ulist">
<ul>
<li>
<p>Logotipo</p>
</li>
<li>
<p>texto do logotipo</p>
</li>
<li>
<p>widget de carrinho de compras</p>
</li>
<li>
<p>alternância de idioma
Execute as mudanças a seguir no arquivo <code>index.jsp</code>. (Novo código mostrado em <strong>negrito</strong>.)</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div id="header"&gt;
    *&lt;div id="widgetBar"&gt;

        &lt;div class="headerWidget"&gt;
            [ language toggle ]
        &lt;/div&gt;

        &lt;div class="headerWidget"&gt;
            [ shopping cart widget ]
        &lt;/div&gt;

    &lt;/div&gt;

    &lt;a href="#"&gt;
        &lt;img src="#" id="logo" alt="Affable Bean logo"&gt;
    &lt;/a&gt;

    &lt;img src="#" id="logoText" alt="the affable bean"&gt;*
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>No código acima, utilize um elemento <code>&lt;div id="widgetBar"&gt;</code> para conter a alternância de idioma e o widget de carrinho de compras.</p>
</div>
<div class="sect2">
<h3 id="_suporte_ao_editor_html_do_netbeans">Suporte ao Editor HTML do NetBeans</h3>
<div class="paragraph">
<p>Ao trabalhar no editor, aproveite o suporte HTML do IDE. Além do realce de sintaxe típico que permite diferenciar tags, atributos, valores de atributo e texto, existem muitas outras funcionalidades.</p>
</div>
<div class="paragraph">
<p>Durante a digitação de tags e atributos no editor, você pode chamar a funcionalidade autocompletar código e o suporte da documentação pressionando Ctrl-Espaço. O IDE apresenta uma lista de sugestões para que você escolha, assim como uma janela de documentação que define o item selecionado e fornece exemplo de códigos.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/documentation-popup.png" alt="documentation popup">
</div>
<div class="title">Figure 5. Pressione Ctrl-Espaço para exibir as janelas de autocompletar código e de documentação</div>
</div>
<div class="paragraph">
<p>O IDE detecta erros no seu código e fornece advertências, mensagens de erro e, em alguns casos, sugestões. As mensagens de advertência são exibidas em amarelo, enquanto erros são mostrados em vermelho. Você pode passar o ponteiro do mouse sobre uma área designada para exibir a mensagem em uma dica de ferramentas.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/html-hint.png" alt="html hint">
</div>
<div class="title">Figure 6. Passe o ponteiro do mouse para exibir uma advertência de dica de ferramentas</div>
</div>
<div class="paragraph">
<p>Você pode também aproveitar os vários atalhos do teclado. Selecione Ajuda &gt; Cartão de Atalhos do Teclado no menu principal.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Na folha de estilo, crie regras para os novos IDs e classes. Adicione as regras a seguir abaixo da regra <code>header</code>. (Novo código mostrado em <strong>negrito</strong>.)</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">#header {
    height: 250px;
    background: #aaa;
}

*#logo {
    height: 155px;
    width: 155px;
    float: left;
    margin-left: 30px;
    margin-top: -20px;
}

#logoText {
    float: left;
    margin: 20px 0 0 70px;
    /* font styles apply to text within alt tags */
    font-family: 'American Typewriter', Courier, monospace;
    font-size: 50px;
    color: #333;
}

#widgetBar {
    height: 50px;
    width: 850px;
    float: right;
    background: #ccc;
}

.headerWidget {
    width: 194px;
    margin: 20px 2px;
    font-size: small;
    float: right;
    line-height: 25px;
    background: #aaa;
}*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Para a regra <code>logo</code> são aplicadas as propriedades <code>margin-left</code> e <code>margin-top</code> para posicionar o componente na página.</p>
</div>
<div class="paragraph">
<p>Se houver propriedades no código acima com as quais você não está familiarizado, posicione o cursor na propriedade e pressione Ctrl-Espaço para chamar uma janela pop-up que fornece o suporte de documentação.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/css-doc-support.png" alt="css doc support">
</div>
<div class="title">Figure 7. Pressione Ctrl-Espaço em uma propriedade CSS para chamar o suporte de documentação</div>
</div>
<div class="paragraph">
<p>Para ver como uma propriedade está afetando sua página, você pode comentá-la e depois atualizar a página no browser. Para comentar o código, posicione o cursor em uma linha ou realce um bloco de código e, em seguida, pressione Ctrl-/ (⌘-/ no Mac).</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Salve (Ctrl-S; ⌘-S no Mac) os arquivos <code>index.jsp</code> e <code>affablebean.css</code> e, em seguida, mude para o browser e atualize a página para exibir seu estado atual.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Observação:</strong> o recurso "Implantar ao Salvar" do IDE é ativado automaticamente pelos projetos Java Web Isso significa que toda vez que você salva um arquivo ele é automaticamente compilado (exemplo, se for uma classe Java ou página JSP) e que o projeto está recém-encapsulado e implantado no seu servidor. Portanto, quando fizer alterações em HTML ou CSS, não é necessário reexecutar explicitamente o projeto pra exibir a versão atualizada em um browser. Simplesmente salve seu(s) arquivo(s) e, em seguida, mude para o browser e atualize a página.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/index-page2.png" alt="index page2">
</div>
<div class="title">Figure 8. Placeholders para cabeçalho são visíveis ao executar o projeto</div>
</div>
<div class="paragraph">
<p>Ao seguir as etapas anteriores, você provavelmente poderá ver um padrão surgindo. Para cada área na página, você executa três etapas.
1. Crie a estrutura em HTML.
2. Crie um conjunto de estilos para definir a aparência.
3. Exiba a página para examinar os resultados das suas alterações.
Seguindo essas três etapas, vamos implementar os componentes nas áreas remanescentes.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Crie placeholders para componentes na coluna da direita. De acordo com o <a href="design.html#index">modelo da página de boas-vindas</a>, a coluna da direita contém quatro caixas com espaçamento uniforme.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Crie a estrutura para as quatro caixas. Insira o código a seguir entre as tags <code>&lt;div id="indexRightColumn"&gt;</code>. (Novo código mostrado em <strong>negrito</strong>.)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div id="indexRightColumn"&gt;
    *&lt;div class="categoryBox"&gt;
        &lt;a href="#"&gt;
            &lt;span class="categoryLabelText"&gt;dairy&lt;/span&gt;
        &lt;/a&gt;
    &lt;/div&gt;
    &lt;div class="categoryBox"&gt;
        &lt;a href="#"&gt;
            &lt;span class="categoryLabelText"&gt;meats&lt;/span&gt;
        &lt;/a&gt;
    &lt;/div&gt;
    &lt;div class="categoryBox"&gt;
        &lt;a href="#"&gt;
            &lt;span class="categoryLabelText"&gt;bakery&lt;/span&gt;
        &lt;/a&gt;
    &lt;/div&gt;
    &lt;div class="categoryBox"&gt;
        &lt;a href="#"&gt;
            &lt;span class="categoryLabelText"&gt;fruit &amp;amp; veg&lt;/span&gt;
        &lt;/a&gt;
    &lt;/div&gt;*
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>Adicione regras de estilo ao <code>addablebean.css</code> para as novas classes <code>categoryBox</code> e <code>categoryLabelText</code>. (Novo código mostrado em <strong>negrito</strong>.)</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">#indexRightColumn {
    height: 400px;
    width: 500px;
    float: left;
    background: #eee;
}

*.categoryBox {
    height: 176px;
    width: 212px;
    margin: 21px 14px 6px;
    float: inherit;
    background: #ccc;
}

.categoryLabelText {
    line-height: 150%;
    font-size: x-large;
}*</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_suporte_css_do_netbeans">Suporte CSS do NetBeans</h3>
<div class="paragraph">
<p>Quando você trabalha em folhas de estilo, há duas janelas que podem ser particularmente úteis. A Visualização CSS permite exibir regras de estilo conforme são renderizadas no browser. Para abrir a Visualização CSS, selecione Janela &gt; Outro &gt; Visualização CSS no menu principal. Quando você coloca o cursor dentro de uma regra de estilo no editor, a Visualização CSS é atualizada automaticamente para exibir o texto de amostra de acordo com as propriedades definidas na regra.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/css-preview.png" alt="css preview">
</div>
<div class="title">Figure 9. Usar a Visualização CSS para exibir regras de estilo renderizadas</div>
</div>
<div class="paragraph">
<p>O Construtor de Estilo CSS é útil se você não gostar de codificar regras de estilo manualmente. Para abrir o Construtor de Estilo CSS, selecione Janela &gt; Outro &gt; Construtor de Estilo CSS no menu principal. Utilizando essa interface, você pode construir regras ao selecionar propriedades e valores de uma interface gráfica.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/style-builder.png" alt="style builder">
</div>
<div class="title">Figure 10. Usar o Construtor de Estilo CSS para criar regras de estilo</div>
</div>
<div class="paragraph">
<p>Como a Visualização CSS, o Construtor de Estilo está sincronizado com o editor. Quando você faz uma seleção no Construtor de Estilo, a regra de estilo é atualizada automaticamente no editor. Do mesmo modo, ao digitar alterações no editor, as seleções no Construtor de Estilo são atualizadas instantaneamente.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="11">
<li>
<p>Salve (Ctrl-S; ⌘-S no Mac) os arquivos <code>index.jsp</code> e <code>affablebean.css</code> e, em seguida, mude para o browser e atualize a página para exibir seu estado atual.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/index-page3.png" alt="index page3">
</div>
<div class="title">Figure 11. Placeholders para cabeçalho e a coluna da direita são visíveis ao executar o projeto</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="12">
<li>
<p>A coluna da esquerda e o rodapé requerem placeholders apenas para o texto estático, então vamos implementar os dois simultaneamente.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Insira o código a seguir entre as tags <code>&lt;div id="indexLefttColumn"&gt;</code> e <code>&lt;div id="footer"&gt;</code>. (Novo código mostrado em <strong>negrito</strong>.)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;div id="indexLeftColumn"&gt;
    *&lt;div id="welcomeText"&gt;
        &lt;p&gt;[ welcome text ]&lt;/p&gt;
    &lt;/div&gt;*
&lt;/div&gt;

...

&lt;div id="footer"&gt;
    *&lt;hr&gt;
    &lt;p id="footerText"&gt;[ footer text ]&lt;/p&gt;*
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="13">
<li>
<p>Faça alterações na folha de estilo <code>affablebean.css</code>. Não é necessário explicar todos os novos IDs e classes: você pode ajustar a aparência posteriormente ao receber o texto e as imagens do cliente.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A tag de regra horizontal (<code>&lt;hr&gt;</code>) executa todos os elementos nela contidos (<code>&lt;div id="footer"</code>). Portanto, para encurtá-la de acordo com a imagem de modelo, você pode ajustar a largura do <code>&lt;div id="footer"&gt;</code>. (Novo código mostrado em <strong>negrito</strong>.)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">#footer {
    height: 60px;
    *width: 350px;*
    clear: left;
    background: #aaa;
}

*hr {
    border: 0;
    background-color: #333;
    height: 1px;
    margin: 0 25px;
    width: 300px;
}*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="14">
<li>
<p>Salve (Ctrl-S; ⌘-S no Mac) os arquivos <code>index.jsp</code> e <code>affablebean.css</code> e, em seguida, mude para o browser e atualize a página para exibir o estado atual.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/index-page4.png" alt="index page4">
</div>
<div class="title">Figure 12. Placeholders para a coluna esquerda e o rodapé são visíveis</div>
</div>
<div class="paragraph">
<p>A página de boas-vindas foi concluída. Foram criados todos os placeholders necessários para componentes que existirão na página.</p>
</div>
<div class="paragraph">
<p>Você concluiu o design inicial da página de boas-vindas da aplicação. Todos os placeholders para os componentes da página existem. Posteriormente neste tutorial, quando começar a aplicar lógica dinâmica às views de páginas, você poderá simplesmente conectar expressões JSTL e EL aos placeholders.</p>
</div>
<div class="paragraph">
<p>A tarefa continua para você implementar o design inicial para as outras páginas com base nos <a href="design.html#mockups">modelos</a>. Para realizar isso, siga o padrão descrito acima, ou seja:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Crie tags <code>&lt;div&gt;</code> para as áreas da página principal.</p>
</li>
<li>
<p>Repita em cada área e execute as três etapas a seguir:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Crie a estrutura em HTML.</p>
</li>
<li>
<p>Crie um conjunto de estilos para definir a aparência.</p>
</li>
<li>
<p>Exiba a página para examinar os resultados das suas alterações.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Assegure-se de aproveitar o suporte HTML e CSS que o IDE oferece. Algumas <a href="#tipsTricks">dicas e truques</a> estão descritos abaixo. Se desejar apenas pegar o código para as páginas remanescentes e prosseguir com o tutorial,você pode <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot1.zip">fazer download do snapshot 1 do projeto `AffableBean`</a>. Imagens das implementações do modelo inicial para as páginas remanescentes estão incluídas aqui.</p>
</div>
<div class="sect3">
<h4 id="categoryPage">página de categoria</h4>
<div class="imageblock">
<div class="content">
<img src="images/category-page.png" alt="category page">
</div>
<div class="title">Figure 13. Placeholders implementados para página da categoria</div>
</div>
</div>
<div class="sect3">
<h4 id="cartPage">página do carrinho</h4>
<div class="imageblock">
<div class="content">
<img src="images/cart-page.png" alt="cart page">
</div>
<div class="title">Figure 14. Placeholders implementados para página do carrinho</div>
</div>
</div>
<div class="sect3">
<h4 id="checkoutPage">página de check-out</h4>
<div class="imageblock">
<div class="content">
<img src="images/checkout-page.png" alt="checkout page">
</div>
<div class="title">Figure 15. Placeholders implementados para a página de check-out</div>
</div>
</div>
<div class="sect3">
<h4 id="_página_de_confirmação">página de confirmação</h4>
<div class="imageblock">
<div class="content">
<img src="images/confirmation-page.png" alt="confirmation page">
</div>
<div class="title">Figure 16. Placeholders implementados para a página de check-out</div>
</div>
<div class="paragraph">
<p><strong>Observação:</strong> as cores do segundo plano de cada página servem apenas para ajudá-lo a posicionar os elementos enquanto desenvolve a aplicação Eventualmente, será necessário removê-las da folha de estilo e aplicar uma cor de segundo plano mais adequada para a aplicação. Você pode fazer isso ajustando a regra de segundo plano para a classe <code>main</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">#main { background: #f7f7e9 }</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tipsTricks">Dicas e Truques</h3>
<div class="paragraph">
<p>O editor do IDE fornece muitos recursos que o ajudam a trabalhar de forma mais eficiente. Se estiver familiarizado com os atalhos de teclado e botões na barra de ferramentas do editor, você poderá melhorar a produtividade. A lista de dicas a seguir se aplica ao editor para arquivos HTML e CSS. Para exibir mais atalhos do teclado, abra o Cartão de Atalhos do Teclado do IDE selecionando Ajuda &gt; Cartão de Atalhos do Teclado no menu principal.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Autocompletar código:</strong> durante a digitação de tags e atributos, sugestões para autocompletar código aparecem automaticamente em uma caixa pop-up. Pressionar Enter completa a tag sugerida.</p>
</li>
<li>
<p><strong>Formatar seu código:</strong> clique com o botão direito do mouse no editor e selecione Formatar.</p>
</li>
<li>
<p><strong>Alternar números de linha:</strong> clique com o botão direito do mouse na margem esquerda e selecione Mostrar Números de Linha.</p>
</li>
<li>
<p><strong>Localizar ocorrências:</strong> realce um bloco de texto e pressione Ctrl-F (⌘-F no Mac). Todas as correspondências ficam realçados no editor. Para alternar o realce, pressione o botão Alternar Realce da Pesquisa (<span class="image"><img src="images/toggle-highlight.png" alt="toggle highlight"></span>) (Ctrl-Shift-H) na barra de ferramentas do editor.</p>
</li>
<li>
<p><strong>Criar um marcador:</strong> pressione o botão Alternar Marcador (<span class="image"><img src="images/toggle-bookmark.png" alt="toggle bookmark"></span>) (Ctrl-Shift-M) para criar um marcador na margem esquerda do editor. Onde quer que esteja no arquivo, você pode pular para o marcador pressionando os botões Anterior/Próximo Marcador na barra de ferramentas do editor.</p>
</li>
<li>
<p><strong>Copiar um snippet de código para cima ou para baixo:</strong> realce um snippet de código e, em seguida, pressione Ctrl-Shift-Up/Down.</p>
</li>
<li>
<p><strong>Realçar as tags de abertura e fechamento:</strong> coloque o cursor na tag de abertura ou de fechamento e as duas serão realçadas em amarelo.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="view">Colocando Páginas JSP em WEB-INF</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Olhando novamente os <a href="design.html#mockups">modelos de página</a> que foram criados, você pode ver que a <a href="design.html#index">página de boas-vindas</a> deveria ter a mesma aparência sempre que solicitada, independente de quem solicitar. Isto é, o conteúdo que é exibido na página de boas-vindas não é determinado por uma <em>sessão</em> do usuário. (Sessões são discutidas na Unidade 8, <a href="manage-sessions.html">Gerenciando Sessões</a>.) Entretanto, note que todas as outras páginas precisam de alguma forma de informação específica do usuário para ser exibida adequadamente. Por exemplo, a <a href="design.html#category">página da categoria</a> requer que o usuário selecione uma categoria para ser exibida e a <a href="design.html#cart">página do carrinho</a> precisa saber todos os itens incluídos atualmente no carrinho de compras. Essas páginas não serão renderizadas de forma adequada se o servidor não puder associar as informações específicas do usuário a uma solicitação de entrada. Portanto, não queremos que essas páginas sejam acessadas diretamente de uma barra de endereço do browser. A pasta <code>WEB-INF</code> do projeto pode ser utilizada para esse propósito: quaisquer recursos contidos na pasta <code>WEB-INF</code> não são acessíveis diretamente de um browser.</p>
</div>
<div class="paragraph">
<p>Crie uma nova pasta de nome <code>view</code> e coloque-a na pasta <code>WEB-INF</code>. Em seguida, mova todas as páginas JSP, menos a página de boas-vindas, para essa pasta nova.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na janela Projetos, clique com o botão direito do mouse no nó WEB-INF e selecione Novo &gt; Pasta.</p>
</li>
<li>
<p>No assistente Nova Pasta, nomeie a pasta <code>view</code> e clique em Finalizar. Note que um novo nó de pasta aparecerá na janela Projetos.</p>
</li>
<li>
<p>Mova as páginas <code>category.jsp</code>, <code>cart.jsp</code>, <code>checkout.jsp</code>, e <code>confirmation.jsp</code> para a pasta <code>view</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Você pode fazer isso clicando em <code>cart.jsp</code> para selecioná-la e, em seguida, clicando com o Shift pressionado em <code>confirmation.jsp</code>. Isso seleciona os quatro arquivos. Em seguida, com os quatro arquivos selecionados, clique e arraste-os para a pasta <code>WEB-INF/view</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/view-folder.png" alt="view folder">
</div>
<div class="title">Figure 17. Clique e arraste as páginas JSP para a pasta </div>
</div>
<div class="paragraph">
<p>Para demonstrar que essas páginas não estão mais acessíveis em um browser, clique no botão Executar Projeto (<span class="image"><img src="images/run-project-btn.png" alt="run project btn"></span> para executar o projeto. Quando a aplicação for exibida no browser, insira o caminho completo para qualquer um desses arquivos na barra de endereço. Por exemplo, digite:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">http://localhost:8080/AffableBean/WEB-INF/view/category.jsp</code></pre>
</div>
</div>
<div class="paragraph">
<p>Você recebe uma mensagem HTTP Status 404, que indica que o recurso não está disponível.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jspf">Criando um Cabeçalho e Rodapé</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Olhando os <a href="design.html#mockups">modelos de página</a> é fácil ver se todas as cinco views compartilham conteúdo idêntico. Na parte superior, elas contêm o logotipo da empresa, a alternância de idioma e outros widgets associados à funcionalidade do carrinho de compras. Na parte inferior, elas contêm texto com links para Política de Privacidade e Contato. Em vez de incluir esse código em cada página do arquivo de origem, podemos fatorá-lo em dois fragmentos JSP: um cabeçalho e um rodapé. Em seguida, incluiremos os arquivos de fragmento em views de páginas sempre que for necessário renderizá-los.</p>
</div>
<div class="paragraph">
<p>Para esses fragmentos, vamos criar uma nova pasta chamada <code>jspf</code> e inseri-la dentro de <code>WEB-INF</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na janela Projetos, clique com o botão direito do mouse no nó WEB-INF e selecione Novo &gt; Pasta.</p>
</li>
<li>
<p>No assistente Nova Pasta, nomeie a pasta <code>jspf</code> e clique em Finalizar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Itens do menu fornecidos pelo IDE são geralmente sensíveis ao contexto. Por exemplo, como você clicou com o botão direito do mouse no nó WEB-INF, quando o assistente Nova Pasta foi exibido, <code>web/WEB-INF</code> foi inserido automaticamente no campo Pasta Pai. Do mesmo modo, ao clicar com o botão direito do mouse no nó da janela Projetos e selecionar Novo, a lista de tipos de arquivo será parcialmente determinada por seleções anteriores.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Crie dois segmentos JSP: <code>header.jspf</code> e <code>footer.jspf</code>. Para fazer isso, clique com o botão direito do mouse na pasta <code>jspf</code> recém-criada e selecione Novo &gt; JSP. No assistente Novo JSP, insira o nome do arquivo e em Opções, selecione a opção Criar como um Segmento JSP e clique em Finalizar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Ao finalizar, você visualizará <code>header.jspf</code> e <code>footer.jspf</code> exibidos na janela Projetos:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projects-win-jspf.png" alt="projects win jspf">
</div>
<div class="title">Figure 18. Fragmentos JSP de cabeçalho e rodapé serão exibidos no projeto</div>
</div>
<div class="paragraph">
<p>Agora você pode copiar o código do cabeçalho de qualquer página JSP e colar no arquivo <code>header.jspf</code>. Do mesmo modo, você pode copiar o código do rodapé de qualquer página JSP e colar no arquivo <code>footer.jspf</code>. Ao finalizar essa tarefa , você poderá remover o código do cabeçalho e do rodapé de todas as páginas JSP.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Copie o código do cabeçalho de qualquer página JSP e cole no arquivo <code>header.jspf</code>. O cabeçalho deve incluir o tipo de documento da página e as tags de abertura <code>&lt;html&gt;</code>, <code>&lt;head&gt;</code> e <code>&lt;body&gt;</code> até a tag de fechamento para o elemento <code>&lt;div id="header&amp;quot&gt;</code>. Certifique-se de incluir placeholders para o widget de carrinho de compras, alternância de idioma e para o botão "ir para o check-out" utilizado na parte superior das views de páginas. Após colar o código no <code>header.jspf</code>, o arquivo terá a seguinte aparência.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">&lt;%@page contentType="text/html" pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd"&gt;

&lt;html&gt;
    &lt;head&gt;
        &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
        &lt;link rel="stylesheet" type="text/css" href="css/affablebean.css"&gt;
        &lt;title&gt;The Affable Bean&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id="main"&gt;
            &lt;div id="header"&gt;
                &lt;div id="widgetBar"&gt;

                    &lt;div class="headerWidget"&gt;
                        [ language toggle ]
                    &lt;/div&gt;

                    &lt;div class="headerWidget"&gt;
                        [ checkout button ]
                    &lt;/div&gt;

                    &lt;div class="headerWidget"&gt;
                        [ shopping cart widget ]
                    &lt;/div&gt;

                &lt;/div&gt;

                &lt;a href="#"&gt;
                    &lt;img src="#" id="logo" alt="Affable Bean logo"&gt;
                &lt;/a&gt;

                &lt;img src="#" id="logoText" alt="the affable bean"&gt;
            &lt;/div&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Copie o código do rodapé de qualquer página JSP e cole no arquivo <code>footer.jspf</code>. O código do rodapé deve incluir o elemento <code>&lt;div id="footer"&gt;</code> até a tag de fechamento <code>&lt;html&gt;</code>. Após colar o código no <code>footer.jspf</code>, o arquivo terá a seguinte aparência.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-html" data-lang="html">            &lt;div id="footer"&gt;
                &lt;hr&gt;
                &lt;p id="footerText"&gt;[ footer text ]&lt;/p&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Remova o código de cabeçalho e rodapé de todas as cinco páginas JSP (<code>index.jsp</code>, <code>category.jsp</code>, <code>cart.jsp</code>, <code>checkout.jsp</code> e <code>confirmation.jsp</code>).</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dd">Adicionando uma Diretiva ao Descritor de Implantação</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Até agora, você colocou as views nos locais apropriados e fatorou o código comum de cabeçalho e rodapé nos arquivos <code>header.jspf</code> e <code>footer.jspf</code>. A aplicação ainda precisa saber em quais páginas dos arquivos de cabeçalho e rodapé serão aplicados. Você pode adicionar tags <code>&lt;jsp:include&gt;</code> em cada uma das views de página. Fazer isso, entretanto, apenas reintroduziria a repetição de código que acabamos de nos esforçar para eliminar. Uma solução alternativa seria criar um descritor de implantação <code>web.xml</code> e adicionar uma diretiva Grupo de Propriedade JSP para especificar a quais views de página os fragmentos de cabeçalho e rodapé deveriam ser aplicados.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pressione Ctrl-N (⌘-N no Mac) para abrir o assistente de Novo Arquivo. Selecione a categoria Web e, em seguida, em Tipos de Arquivo, selecione Descritor de Implantação Padrão (web.xml).</p>
</li>
<li>
<p>Clique em Próximo. Note que o arquivo é nomeado <code>web.xml</code> e que o assistente irá colocá-lo no diretório <code>WEB-INF</code> do projeto após a conclusão.</p>
</li>
<li>
<p>Clique em Finalizar. O arquivo <code>web.xml</code> é criado e adicionado ao projeto. A interface gráfica do IDE para o descritor de implantação será aberta no editor.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A interface é categorizada pelas áreas que podem ser configuradas em uma aplicação web. Essas áreas são exibidas como guias na barra de ferramentas do editor e incluem tópicos como Servlets, Filtros, Referências e Segurança. A guia XML exibe o código-fonte inteiro do arquivo. Qualquer alteração feita na interface gráfica provocará atualizações imediatas no código-fonte do descritor de implantação, que você pode verificar alternando para a guia XML. Isso está demonstrado nas etapas a seguir.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Clique na guia Páginas e, em seguida clique no botão Adicionar Grupo de Propriedade JSP. A caixa de diálogo Adicionar Grupo de Propriedade JSP será aberta.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Digite &#8220;definições de cabeçalho e rodapé&#8221; no campo Descrição. Deixe Nome de Exibição em Branco. Os campos Nome de Exibição e Descrição são opcionais.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Para Padrões de URL, especifique os caminhos para as cinco views. Digite &#8220;/index.jsp&#8221; e &#8220;/WEB-INF/view/<strong>&#8221;. Separe os dois caminhos com vírgula. (O &#8220;</strong>&#8221; é um curinga que representa todos os arquivos dentro da pasta determinada.)</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-jsp-prop-group-dialog.png" alt="add jsp prop group dialog">
</div>
<div class="title">Figure 19. Use a caixa de diálogo Adicionar Grupo de Propriedade JSP para especificar as tags &lt;jsp-config&gt; no descritor de implantação</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Clique em OK. Uma entrada é adicionada à categoria Grupos de Propriedades JSP na guia Páginas.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Volte para a guia XML. Note que o código a seguir foi adicionado ao descritor de implantação.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;jsp-config&gt;
    &lt;jsp-property-group&gt;
        &lt;description&gt;header and footer settings&lt;/description&gt;
        &lt;url-pattern&gt;/index.jsp&lt;/url-pattern&gt;
        &lt;url-pattern&gt;/WEB-INF/view/*&lt;/url-pattern&gt;
    &lt;/jsp-property-group&gt;
&lt;/jsp-config&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Observação:</strong> pode ser necessário adicionar retorno de carro ao código para que ele seja exibido em várias linhas. Você pode clicar com o botão direito do mouse no editor e selecionar Formato (Alt-Shift-F; Ctrl-Shift-F no Mac) para que o código seja recuado corretamente.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Volte novamente para a guia Páginas e nos campos Incluir Preludes e Incluir Codas, informe os caminhos para os arquivos <code>header.jspf</code> e <code>footer.jspf</code>, respectivamente. Você pode clicar no botão Browser e navegar para os arquivos na caixa de diálogo fornecida.</p>
</li>
</ol>
</div>
<div class="openblock">
<div class="content">
<div class="imageblock left">
<div class="content">
<a class="image" href="images/jsp-prop-groups.png"><img src="images/jsp-prop-groups-small.png" alt="jsp prop groups small"></a>
</div>
</div>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>Volte para a guia XML. Note que o código a seguir foi adicionado. (Alterações em <strong>negrito</strong>.)</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;jsp-config&gt;
    &lt;jsp-property-group&gt;
        &lt;description&gt;header and footer settings&lt;/description&gt;
        &lt;url-pattern&gt;/index.jsp&lt;/url-pattern&gt;
        &lt;url-pattern&gt;/WEB-INF/view/*&lt;/url-pattern&gt;
        *&lt;include-prelude&gt;/WEB-INF/jspf/header.jspf&lt;/include-prelude&gt;
        &lt;include-coda&gt;/WEB-INF/jspf/footer.jspf&lt;/include-coda&gt;*
    &lt;/jsp-property-group&gt;
&lt;/jsp-config&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A diretiva acima especifica que para todos os arquivos encontrados nos <code>url-pattern`s fornecidos, o arquivo `header.jspf</code> será acrescentado ao início e o arquivo <code>footer.jspf</code> será acrescentado ao final.</p>
</div>
<div class="paragraph">
<p>Para exibir as definições das tags acima, assim como de todas as tags disponíveis no descritor de implantação web, consulte <a href="http://jcp.org/en/jsr/detail?id=315">Especificação do Servlet</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="11">
<li>
<p>Execute a aplicação novamente (pressione F6; fn-F6 no Mac). O código do cabeçalho e rodapé já foi removido do arquivo <code>index.jsp</code>, portanto, você pode determinar se está sendo adicionado automaticamente quando o arquivo é solicitado.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Você verá que a <a href="#welcome-page">página de boas-vindas será exibida como anteriormente</a>, com o conteúdo do cabeçalho e rodapé incluído.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="controller">Criando o Servlet Controlador</h2>
<div class="sectionbody">
<div class="paragraph">
<p>O servlet do controlador trata as solicitações de entrada iniciando quaisquer ações necessárias para gerar o modelo de solicitação e, em seguida, encaminhando a solicitação para a view adequada. Para obter uma representação visual, consulte novamente o <a href="design.html#mvcDiagram">diagrama MVC para o projeto AffableBean</a>.</p>
</div>
<div class="paragraph">
<p>O IDE fornece um assistente Servlet que permite definir o componente do servlet em uma aplicação web incluindo a anotação <code>@WebServlet</code> na classe gerada ou adicionando as diretivas necessárias ao descritor de implantação. Nas etapas a seguir, você cria o <code>ControllerServlet</code> e defini-lo no contexto da aplicação, utilizando a anotação <a href="http://java.sun.com/javaee/6/docs/api/javax/servlet/annotation/WebServlet.html">`@WebServlet`</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na janela Projetos, clique com o botão direito do mouse no nó do projeto <code>AffableBean</code> e selecione Novo &gt; Servlet.</p>
</li>
<li>
<p>No assistente, digite <code>ControllerServlet</code> no campo Nome da Classe.</p>
</li>
<li>
<p>No campo Pacote, digite <code>controller</code>. (O novo pacote será criado automaticamente ao concluir o assistente.)</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/servlet-wizard.png" alt="servlet wizard">
</div>
<div class="title">Figure 20. Use o assistente Criar Servlet para criar servlets para seu projeto</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Clique em Próximo. A etapa 3 do assistente permite que você configure o servlet. Os padrões de URL que precisam ser especificados são de importância primordial. Os padrões identificam os URLs que chamam o servlet. Por exemplo, se digitar &#8220;/category&#8221;, você está direcionando o servlet para manipular uma requisição que aparece da maneira a seguir.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">http://localhost/AffableBean*/category*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Os padrões de URL devem corresponder às views e ações que um usuário pode iniciar. Observando o <a href="design.html#index">modelo da página de boas-vindas</a>, um usuário deve poder selecionar uma categoria. Entretanto, podemos associar o URL <code>/category</code> à ação de clicar na imagem de uma categoria. Do mesmo modo, na <a href="design.html#category">página da categoria</a>, os usuários devem poder adicionar um item ao carrinho de compras. Podemos, portanto, especificar <code>/addToCart</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>No campo Padrão(ões) de URL, digite &#8220;/category/addToCart, /viewCart&#8221;. Padrões são separados por vírgulas. Você pode adicionar mais padrões diretamente na classe servlet depois de ela ter sido criada.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/servlet-wizard2.png" alt="servlet wizard2">
</div>
<div class="title">Figure 21. Configurar a implantação do servlet diretamente no assistente</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Clique em Finalizar. O IDE irá gerar <code>ControllerServlet</code> e o abrirá no editor. Os padrões de servlet e de URL estão incluídos na anotação <code>@WebServlet</code> que aparece acima da assinatura da classe.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">*@WebServlet(name="ControllerServlet", urlPatterns={"/category", "/addToCart", "/viewCart"})*
public class ControllerServlet extends HttpServlet {</code></pre>
</div>
</div>
<div class="paragraph">
<p>Na etapa anterior, se você tivesse selecionado a opção &#8220;Adicionar informações ao descritor de implantação (web.xml)&#8221; no assistente, a marcação a seguir teria sido gerada, em vez disso, no arquivo <code>web.xml</code> da aplicação.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;servlet&gt;
    &lt;servlet-name&gt;ControllerServlet&lt;/servlet-name&gt;
    &lt;servlet-class&gt;controller.ControllerServlet&lt;/servlet-class&gt;
&lt;/servlet&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;ControllerServlet&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/category&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;ControllerServlet&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/addToCart&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;ControllerServlet&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/viewCart&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Adicione outros padrões de URL diretamente ao elemento <code>@WebServlet</code> da anotação <code>urlPatterns</code>. A aplicação requer mais padrões de URL para outras ações e views. Você pode digitar os seguintes padrões:</p>
<div class="ulist">
<ul>
<li>
<p>`/updatecart `</p>
</li>
<li>
<p><code>/checkout</code></p>
</li>
<li>
<p><code>/purchase</code></p>
</li>
<li>
<p><code>/chooseLanguage</code>
Certifique-se de separar cada padrão com uma vírgula. Você também pode reformatar as anotações como se segue:</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@WebServlet(name="ControllerServlet",
            urlPatterns = {"/category",
                           "/addToCart",
                           "/viewCart"*,
                           "/updateCart",
                           "/checkout",
                           "/purchase",
                           "/chooseLanguage"*})</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Finalmente, inclua o elemento <code>loadOnStartup</code> para que o servlet seja instanciado e inicializado quando a aplicação for implantada. Um valor de <code>0</code> ou superior fará com que isso aconteça (<code>-1</code> é o default).</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@WebServlet(name="ControllerServlet",
            *loadOnStartup = 1,*
            urlPatterns = {"/category",
                           "/addToCart",
                           "/viewCart",
                           "/updateCart",
                           "/checkout",
                           "/purchase",
                           "/chooseLanguage"})</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="implement">Implementando o Servlet do Controlador</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Como informado anteriormente, o servlet do controlador trata solicitações de entrada iniciando quaisquer ações necessárias para gerar o modelo da solicitação e, em seguida, encaminhando a solicitação para a view adequada. Para obter uma representação visual, consulte novamente o <a href="design.html#mvcDiagram">diagrama MVC para o projeto AffableBean</a>.</p>
</div>
<div class="paragraph">
<p>Observando o código gerado para o novo <code>ControllerServlet</code>, você pode ver que o modelo de servlet do IDE implanta um método <code>processRequest</code> que é chamado pelos dois métodos <code>doGet</code> e <code>doPost</code>. (talvez seja necessário expandir o dobramento do código clicando no ícone de adição (<span class="image"><img src="images/code-fold-icon.png" alt="code fold icon"></span>) na margem esquerda do editor para exibir esses métodos.) Como essa aplicação diferencia entre <code>doGet</code> e <code>doPost</code>, você adicionará o código diretamente nesses métodos e removerá o método <code>processRequest</code> será removido completamente.</p>
</div>
<div class="sect2">
<h3 id="_modificando_os_modelos_de_arquivos_com_o_gerenciador_de_modelos_do_ide">Modificando os Modelos de Arquivos com o Gerenciador de Modelos do IDE</h3>
<div class="paragraph">
<p>O IDE fornece um modelo básico para qualquer novo arquivo que você criar. Se o modelo não for ideal para seus padrões de trabalho, você pode alterá-lo utilizando o Gerenciador de Modelos do IDE. O IDE fornece um modelo para praticamente qualquer tipo de arquivo.</p>
</div>
<div class="paragraph">
<p>Por exemplo, para modificar o modelo do servlet:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abra o Gerenciador de Modelos selecionando Ferramentas &gt; Modelos no menu principal.</p>
</li>
<li>
<p>Expanda a categoria Web e, em seguida, selecione o modelo Servlet.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/template-manager.png" alt="template manager">
</div>
<div class="title">Figure 22. Acessar e modificar modelos de arquivos via Gerenciador de Modelos</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Clique no botão Abrir no Editor.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Modifique o modelo no editor. Na próxima vez em que criar um novo servlet (por exemplo, utilizando o assistente de Servlet), a nova versão será aplicada.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Agora que mapeou os padrões de URL para o servlet utilizando a anotação <code>@WebServlert</code>, defina o <code>ControlletServlet</code> para tratar esses padrões. Além disso, instancie um <code>RequestDispatcher</code> para encaminhar o padrão solicitado para a view apropriada.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Substitua o código de modelo da classe <code>ControllerServlet</code> pelo código a seguir.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">public class ControllerServlet extends HttpServlet {

    /**
     * Handles the HTTP &lt;code&gt;GET&lt;/code&gt; method.
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {

        String userPath = request.getServletPath();

        // if category page is requested
        if (userPath.equals("/category")) {
            // TODO: Implement category request

        // if cart page is requested
        } else if (userPath.equals("/viewCart")) {
            // TODO: Implement cart page request

            userPath = "/cart";

        // if checkout page is requested
        } else if (userPath.equals("/checkout")) {
            // TODO: Implement checkout page request

        // if user switches language
        } else if (userPath.equals("/chooseLanguage")) {
            // TODO: Implement language request

        }

        // use RequestDispatcher to forward request internally
        String url = "/WEB-INF/view" + userPath + ".jsp";

        try {
            request.getRequestDispatcher(url).forward(request, response);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    /**
     * Handles the HTTP &lt;code&gt;POST&lt;/code&gt; method.
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {

        String userPath = request.getServletPath();

        // if addToCart action is called
        if (userPath.equals("/addToCart")) {
            // TODO: Implement add product to cart action

        // if updateCart action is called
        } else if (userPath.equals("/updateCart")) {
            // TODO: Implement update cart action

        // if purchase action is called
        } else if (userPath.equals("/purchase")) {
            // TODO: Implement purchase action

            userPath = "/confirmation";
        }

        // use RequestDispatcher to forward request internally
        String url = "/WEB-INF/view" + userPath + ".jsp";

        try {
            request.getRequestDispatcher(url).forward(request, response);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ao prosseguir com o tutorial, você retornará para o <code>ControllerServlet</code> e implementará individualmente cada um dos padrões de URL mapeados.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Examine o código acima. Há vários pontos a serem observados:</p>
<div class="ulist">
<ul>
<li>
<p>O servlet utiliza uma variável da instância <code>userPath</code> para obter o padrão de URL solicitado pelo cliente:</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">String userPath = request.getServletPath();</code></pre>
</div>
</div>
<div class="paragraph">
<p>O <code>userPath</code> é usado pelos dois métodos <code>doGet</code> e <code>doPost</code>.
* Os padrões de URL associados, principalmente a solicitações de página são gerenciados pelo método <code>doGet</code>. Por exemplo, <code>/category</code>, <code>/viewCart</code> e <code>/checkout</code> resultam na exibição das páginas da categoria, do carrinho e check-out.)
* Padrões URL associados às submissões de form e ao transporte de dados confidenciais do usuário (por exemplo, <code>/addToCart</code>, <code>/updateCart</code> e <code>/purchase</code>) são gerenciados pelo método <code>doPost</code>.
* Para os métodos <code>doGet</code> e <code>doPost</code>, o caminho para a view apropriada é formado utilizando uma string de <code>url</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">String url = "/WEB-INF/view" + userPath + ".jsp";</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>O <code>RequestDispatcher</code> é obtido a partir do <code>HttpServletRequest</code> e aplicado ao <code>url</code> para encaminhar a solicitação:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">request.getRequestDispatcher(url).forward(request, response);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>As notas <code>TODO</code> têm sido utilizadas para denotar o trabalho que ainda precisa ser feito. Por exemplo:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">// if category page is requested
if (userPath.equals("/category")) {
    // TODO: Implement category request</code></pre>
</div>
</div>
<div class="paragraph">
<p>Aplicar notas <code>TODO</code> no seu código é uma maneira útil de acompanhar as tarefas que você precisa concluir. Você pode utilizar a janela Tarefas do IDE (Ctrl-6; ⌘-6 no Mac) para exibir todas as notas TODO, assim como qualquer erro de sintaxe ou de compilação contido no projeto.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/tasks-window.png" alt="tasks window">
</div>
<div class="title">Figure 23. Controlar as tarefas de implementação com a janela Tarefas do IDE</div>
</div>
<div class="paragraph">
<p>Você pode controlar as palavras-chave que são exibidas na janela Tarefas. Abra a janela Opções (Ferramentas &gt; Opções; NetBeans &gt; Preferências no Mac) e, em seguida, selecione Diversos &gt; Tarefas.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Execute o projeto (pressione F6; fn-F6 no Mac) e teste para ver se o <code>ControllerServlet</code> está encaminhando solicitações para as views apropriadas.</p>
<div class="ulist">
<ul>
<li>
<p>Digite <code><a href="http://localhost:8080/AffableBean/category" class="bare">http://localhost:8080/AffableBean/category</a></code> na barra de endereço do browser. A <a href="#categoryPage">página da categoria</a> da aplicação será exibida.</p>
</li>
<li>
<p>Digite <code><a href="http://localhost:8080/AffableBean/viewCart" class="bare">http://localhost:8080/AffableBean/viewCart</a></code> na barra de endereço do browser. A <a href="#cartPage">página do carrinho</a> da aplicação será exibida.</p>
</li>
<li>
<p>Digite <code><a href="http://localhost:8080/AffableBean/checkout" class="bare">http://localhost:8080/AffableBean/checkout</a></code> na barra de endereço do browser. A <a href="#checkoutPage">página de check-out</a> da aplicação será exibida.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Observação:</strong> Digitar <code><a href="http://localhost:8080/AffableBean/purchase" class="bare">http://localhost:8080/AffableBean/purchase</a></code> na barra de endereço do browser não permite exibir a <a href="#confirmationPage">página de confirmação</a>. Naturalmente, isso ocorre porque o padrão de URL de <code>/purchase</code> é tratado pelo método <code>doPost</code> do servlet e as solicitações enviadas da barra de endereço do browser são normalmente enviadas usando o método HTTP GET.</p>
</div>
<div class="paragraph">
<p>Nessa etapa, foram criadas páginas JSP que contêm placeholders para componentes funcionais. Também foi configurada a estrutura do front-end da aplicação. As páginas JSP agora residem dentro da pasta <code>WEB-INF</code>, os códigos do cabeçalho e rodapé foram fatorados em arquivos separados, o descritor de implantação está apropriadamente configurado e o <code>ControllerServlet</code> foi configurado para tratar as solicitações de entrada. Na próxima unidade do tutorial, você tomará medidas para ativar a conectividade entre a aplicação e o banco de dados.</p>
</div>
<div class="paragraph">
<p>Se desejar comparar o seu trabalho com a solução de amostra desta unidade, você poderá <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot2.zip">fazer download do snapshot 2 do projeto AffableBean</a>.</p>
</div>
<div class="paragraph">
<p>link:/about/contact_form.html?to=3&amp;subject=Feedback: NetBeans E-commerce Tutorial - Preparing the Page Views and Controller Servlet[Envie-nos Seu Feedback]</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="seeAlso">Consulte Também</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_tutoriais_do_netbeans">Tutoriais do NetBeans</h3>
<div class="ulist">
<ul>
<li>
<p><a href="../javaee-intro.html">Introdução à Tecnologia Java EE</a></p>
</li>
<li>
<p><a href="../javaee-gettingstarted.html">Introdução às Aplicações do Java EE 6</a></p>
</li>
<li>
<p><a href="../../web/quickstart-webapps.html">Introdução ao Desenvolvimento de Aplicações Web</a></p>
</li>
<li>
<p><a href="../../web/mysql-webapp.html">Criando uma Aplicação Web Simples Usando um Banco de Dados MySQL</a></p>
</li>
<li>
<p><a href="../../screencasts.html">Tutoriais e Demonstrações em Vídeo para NetBeans IDE 6.x</a></p>
</li>
<li>
<p><a href="https://netbeans.org/projects/www/downloads/download/shortcuts.pdf">Atalhos de Teclado e Cartão de Modelos de Código</a></p>
</li>
<li>
<p><a href="../../../trails/java-ee.html">Trilha do Aprendizado do Java EE e Java Web</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_livros_do_netbeans">Livros do NetBeans</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://netbeans.org/kb/articles/netbeans-tips-and-tricks-book.html">100 Dicas e Truques do NetBeans IDE</a></p>
</li>
<li>
<p><a href="http://www.apress.com/book/view/1590598954">Pro NetBeans IDE 6 Rich Client Platform Edition</a></p>
</li>
<li>
<p><a href="http://apress.com/book/view/1430219548">Iniciando a Plataforma Java EE 6 com o GlassFish 3: Do Novato ao Profissional</a></p>
</li>
<li>
<p><a href="https://netbeans.org/kb/articles/books.html">Mais livros sobre o NetBeans IDE</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_recursos_externos">Recursos Externos</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://jcp.org/en/jsr/detail?id=315">Especificações do Servlet 3.0</a></p>
</li>
<li>
<p><a href="https://developer.mozilla.org/en/Common_CSS_Questions">Perguntas Frequentes de CSS</a></p>
</li>
<li>
<p><a href="http://quirksmode.org/compatibility.html">Tabela Mestre de Compatibilidade do Browser</a></p>
</li>
<li>
<p><a href="http://refcardz.dzone.com/refcardz/netbeans-ide-67-update">Cartão de Referência DZone do Editor NetBeans Java</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/javaee/ecommerce/page-views-controller_pt_BR.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1><a href="/about/index.html">About</a></h1>
                <ul>
                    <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb110/nb110.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="/plugins/index.html">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2020 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
