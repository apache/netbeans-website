
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>O tutorial do NetBeans E-commerce: Adicionando Classes de Entidade e Beans de Sessão</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="O tutorial do NetBeans E-commerce: Adicionando Classes de Entidade e Beans de Sessão - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, O tutorial do NetBeans E-commerce: Adicionando Classes de Entidade e Beans de Sessão">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">O tutorial do NetBeans E-commerce: Adicionando Classes de Entidade e Beans de Sessão</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/javaee/ecommerce/entity-session_pt_BR.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#whatEJB">O que são as Tecnologias EJB e JPA?</a>
<ul class="sectlevel2">
<li><a href="#ejb">Enterprise JavaBeans</a></li>
<li><a href="#jpa">Persistência de Java</a></li>
</ul>
</li>
<li><a href="#whatSession">O que são Beans de Sessão?</a></li>
<li><a href="#specification">Sobre Especificações e Implementações</a></li>
<li><a href="#addEntity">Adicionando Classes de Entidade</a></li>
<li><a href="#addSession">Adicionando Beans de Sessão</a></li>
<li><a href="#access">Acessando Dados com EJBs</a>
<ul class="sectlevel2">
<li><a href="#index">página de índice</a></li>
<li><a href="#category">página de categoria</a></li>
</ul>
</li>
<li><a href="#seeAlso">Consulte Também</a>
<ul class="sectlevel2">
<li><a href="#_recursos_do_netbeans">Recursos do NetBeans</a></li>
<li><a href="#_recursos_do_ejb">Recursos do EJB</a></li>
<li><a href="#_recursos_do_jpa">Recursos do JPA</a></li>
<li><a href="#_recursos_do_glassfish">Recursos do GlassFish</a></li>
<li><a href="#_artigos_técnicos">Artigos Técnicos</a></li>
<li><a href="#_livros">Livros</a></li>
</ul>
</li>
<li><a href="#_referências">Referências</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="intro.html">Introdução</a></p>
</li>
<li>
<p><a href="design.html">Criando a Aplicação</a></p>
</li>
<li>
<p><a href="setup-dev-environ.html">Configurando o Ambiente de Desenvolvimento</a></p>
</li>
<li>
<p><a href="data-model.html">Criando o Modelo de Dados</a></p>
</li>
<li>
<p><a href="page-views-controller.html">Preparando as Views de Página e o Servlet do Controlador</a></p>
</li>
<li>
<p><a href="connect-db.html">Conectando a Aplicação ao Banco de Dados</a></p>
</li>
<li>
<p><strong>Adicionando Classes de Entidade e Beans de Sessão</strong></p>
</li>
<li>
<p><a href="manage-sessions.html">Gerenciando Sessões</a></p>
</li>
<li>
<p><a href="transaction.html">Integrando a Lógica de Negócios Transacional</a></p>
</li>
<li>
<p><a href="language.html">Adicionando o Suporte a Idioma</a></p>
</li>
<li>
<p><a href="security.html">Protegendo a Aplicação</a></p>
</li>
<li>
<p><a href="test-profile.html">Testando e Criando Perfis</a></p>
</li>
<li>
<p><a href="conclusion.html">Conclusão</a></p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../images_www/articles/68/netbeans-stamp-68-69.png" alt="netbeans stamp 68 69">
</div>
<div class="title">Figure 1. O conteúdo desta página se aplica ao NetBeans IDE, versões e 6.8 e 6.9</div>
</div>
<div class="paragraph">
<p>Esta unidade do tutorial introduz as tecnologias <a href="http://java.sun.com/products/ejb/">Enterprise JavaBeans</a> (EJB) e <a href="http://java.sun.com/javaee/technologies/persistence.jsp">Java Persistence</a> (JPA). Nela, você utiliza dois dos assistentes do IDE que são essenciais para o desenvolvimento do Java EE. São elas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Classes de Entidade do assistente de Banco de Dados:</strong> Cria uma classe de entidade da Java Persistence API para cada tabela de banco de dados selecionada, completa com anotações de consulta nomeadas, campos que representam colunas e relacionamento que representam chaves estrangeiras.</p>
</li>
<li>
<p><strong>Beans de Sessão para o assistente de Classes de Entidade:</strong> Cria uma fachada de sessão do EJB para cada classe de entidade com métodos de acesso básicos.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Esses dois assistentes fornecem uma maneira eficaz de configurar rapidamente o modelo para sua aplicação. Se reexaminar o <a href="design.html#mvcDiagram">diagrama de MVC</a> para a aplicação que está construindo, poderá ver onde beans de sessão EJB e classes de entidade JPA se encaixam na sua estrutura.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/mvc-diagram.png" alt="mvc diagram">
</div>
<div class="title">Figure 2. Diagrama MVC da aplicação AffableBean</div>
</div>
<div class="paragraph">
<p>Nesta unidade, as classes de entidade criadas formam uma representação baseada em Java do banco de dados <code>affablebean</code>. Enquanto cada classe de entidade representa uma tabela do banco de dados, instâncias de classes de entidade correspondem a registros que podem ser salvos (ou seja, <em>persistidos</em>) no banco de dados. A lógica de negócios da aplicação é encapsulada por beans de sessão, que podem ser utilizados como classes de <em>fachada</em> que ativam o CRUD (Create-Read-Update-Delete, Criar, Ler, Atualizar) às entidades (conforme demonstrado aqui) ou podem conter códigos que implementam ações específicas para sua aplicação. (Um exemplo disso é fornecido na <a href="transaction.html">Unidade 9: Integrando a Lógica de Negócios Transacional</a>).</p>
</div>
<div class="paragraph">
<p>Você pode exibir uma demonstração ao vivo da aplicação construída neste tutorial: <a href="http://dot.netbeans.org:8080/AffableBean/">Aplicação de Demonstração do Tutorial do NetBeans E-commerce</a></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Software ou Recurso</th>
<th class="tableblock halign-left valign-top">Versão Necessária</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/downloads/index.html">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pacote Java, 6.8 ou 6.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java Development Kit (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">versão 6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#glassFish">GlassFish Server</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">v3 ou Open Source Edition 3.0.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://dev.mysql.com/downloads/mysql/">Servidor de banco de dados MySQL</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">versão 5.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot3.zip">Projeto AffableBean</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">snapshot 3</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Observações:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>O NetBeans IDE requer o Java Development Kit (JDK) para ser executado adequadamente. Se você não tiver nenhum dos recursos listados acima, o JDK deverá ser o primeiro item a ser submetido a download e instalado.</p>
</li>
<li>
<p>O Pacote Java do NetBeans IDE inclui o Java Web e tecnologias EE, que são necessárias para a aplicação construída neste tutorial.</p>
</li>
<li>
<p>O pacote Java do NetBeans IDE também inclui o GlassFish Server, necessário para este tutorial. Você poderia <a href="https://glassfish.dev.java.net/public/downloadsindex.html">fazer download do GlassFish Server independentemente</a>, mas a versão fornecida pelo NetBeans do qual fez download tem a vantagem adicional de ser registrada automaticamente no IDE.</p>
</li>
<li>
<p>Você pode seguir esta unidade do tutorial sem ter concluído as unidades anteriores. Para isso, consulte as <a href="setup.html">instruções de configuração</a>, que descrevem como preparar o banco de dados e estabelecer uma conectividade entre o IDE, o GlassFish e o MySQL.</p>
</li>
<li>
<p>O <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot4.zip">Snapshot 4</a> do projeto <code>AffableBean</code> está disponível para download e corresponde ao estado do projeto após a conclusão desta unidade usando o NetBeans IDE 6.9.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="whatEJB">O que são as Tecnologias EJB e JPA?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Até agora, o projeto que você vem desenvolvendo neste tutorial poderia ser executado em um servidor web com um contêiner do servlet, como o Apache Tomcat. Afinal, até agora, só foram utilizadas as tecnologias JSTL e servlet e estão se conectando ao banco de dados diretamente utilizando JDBC. Na realidade, seria possível, teoricamente, continuar a desenvolver a aplicação utilizando apenas essas tecnologias, e codificar, ao mesmo tempo, para todos os aspectos da aplicaçãoo, incluindo segurança de thread, transações e segurança. No entanto, ao utilizar o Enterprise beans com classes de entidade JPA, você pode se concentrar na lógica de negócios da aplicação e usar, ao mesmo tempo, soluções que já foram testadas. As seções a seguir apresentam as duas tecnologias e definem sua atribuição no desenvolvimento EE.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#ejb">Enterprise JavaBeans</a></p>
</li>
<li>
<p><a href="#jpa">Persistência Java</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="ejb">Enterprise JavaBeans</h3>
<div class="paragraph">
<p>A <a href="http://java.sun.com/products/ejb/">página oficial do produto EJB</a> descreve a tecnologia EnterPrise JavaBeans como uma "arquitetura do componente do servidor" que "ativa o desenvolvimento rápido e simplificado de aplicações distribuídas, transacionais, seguras e portáteis". Voce pode aplicar EJBs (ou seja., Enterprise beans) aos projetos, e os serviços fornecidos pela tecnologia permanecerão transparentes para você como desenvolvedor, eliminando, assim, a tarefa tediosa e geralmente propensa a erros de adicionar vários códigos de placa que seriam, de outra maneira, necessários. Se for novo no desenvolvimento EE, pode questionar a necessidade de EJBs na aplicação Java Web. O livro <a href="http://www.manning.com/panda/">EJB 3 Em Ação</a>, de Debu Panda, Reza Rahman e Derek Lane, parafraseia muito bem a atribuição da tecnologia EJB:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>_Embora muitas pessoas pensem que EJBs são um exagero para desenvolvimento de aplicações Web relativamente simples e de tamanho moderado, isso não é verdade. Quando se constrói uma casa, não se constrói tudo desde o início. Em vez disso, se compra materiais ou até mesmo serviços terceirizados, conforme ncessário. Também não é muito prático construir uma aplicação corporativa desde o início. A maioria das aplicações de servidor tem muito em comum, incluindo a rotatividade da lógica de negócios, gerenciamento do estado da aplicação, armazenamento e recuperação de informações de um banco de dados relacional, gerenciamento de transações, implementação de segurança, execução de processamento assíncrono, integração de sistemas, e assim por diante.</p>
</div>
<div class="paragraph">
<p>Como framework, o contêiner do EJB fornece esses tipos de funcionalidade comum, como serviços de fábrica, de modo que os componentes do EJB podem utilizá-los nas aplicações sem reinventar a roda. Por exemplo, vamos dizer que quando se constrói um módulo de cartão de crédito na aplicação Web, você escreve muito código complexo e propenso ao erro para gerenciar transações e controle de acesso de segurança. Isso poderia ser evitado utilizando os serviços de transação declarativa e de segurança fornecidos pelo contêiner EJB. Esses serviços, bem como muitos outros, estão disponíveis para componentes do EJB quando eles são implantados em um contêiner EJB. Isso significa escrever aplicações de alta qualidade e ricos em funcionalidades muito mais rápido do que você poderia pensar._<sup><a href="#footnote1">[1]</a></sup></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>É possível pensar no EJB como componentes ou classes Java que são incorporadas no projeto, bem como um <em>framework</em> que fornece vários serviços relacionados à empresa. Alguns dos serviços que aproveitamos neste tutorial estão descritos em <a href="http://www.manning.com/panda/">EJB 3 Em Ação</a> como se segue:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Criando pools:</strong> Para cada componente do EJB, a plataforma EJB cria um pool de instâncias do componente que são compartilhadas pelos clientes. Em qualquer ponto no tempo, cada instância do pool tem permissão de ser utilizada apenas por um único cliente. Assim que uma instância tiver terminado de atender a um cliente, ela é devolvida para o pool para reutilização, em vez de ser frivolamente descartada na lixeira para ser coletada novamente depois.</p>
</li>
<li>
<p><strong>Segurança de Thread:</strong> O EJB torna todos os componentes seguros para thread e com alto desempenho, de maneira que sejam completamente invisíveis. Isso significa você pode escrever os componentes do servidor como se estivesse desenvolvendo uma aplicação desktop de um único thread. Não importa a complexidade do componente em si, o EJB se certificará de que ele seja seguro para thread.</p>
</li>
<li>
<p><strong>Transações:</strong> O EJB oferece suporte a gerenciamento de transações declarativas que o ajuda a adicionar comportamento transacional aos componentes utilizando a configuração simples em vez do código. Na realidade, é possível designar qualquer método de componente como sendo transacional. Se o método for concluído normalmente, o EJB confirmará a transação e tornará as alterações de dados feitas pelo método permanentes. Caso contrário, a transação será desfeita. As transações EJB gerenciadas por contêiner são demonstradas na Unidade 9, <a href="transaction.html">Integrando a Lógica de Negócios Transacional</a>.</p>
</li>
<li>
<p><strong>Segurança:</strong> o EJB suporta a integração com a API Java Authentication and Authorization Service (JAAS) e, portanto, é fácil externalizar por completo a segurança e proteger a aplicação usando uma configuração simples, em vez de encher sua aplicação com códigos de segurança.<sup><a href="#footnote2">[2]</a></sup> Na Unidade 11, <a href="security.html#secureEJB">Protegendo a Aplicação</a>, a demonstração da anotação &lt;a href="http://download.oracle.com/javaee/6/api/javax/annotation/security/RolesAllowed.html" target="_blank"`@RolesAllowed` do EJB é fornecida.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="jpa">Persistência de Java</h3>
<div class="paragraph">
<p>No contexto do Java Enterprise, <em>persistência</em> refere-se ao ato de armazenar automaticamente os dados contidos em objetos Java em um banco de dados relacional. A <a href="http://java.sun.com/javaee/technologies/persistence.jsp">Java Persistence API</a> (JPA) é uma tecnologia de mapeamento objeto-relacional (ORM) que permite às aplicações gerenciar dados entre objetos Java e um banco de dados relacional, de maneira transparente para o desenvolvedor. Isso significa que o JPA pode ser aplicado aos projetos criando e configurando um conjunto de classes Java (<em>entidades</em>) que espelham seu modelo de dados. A aplicação poderá, em seguida, acessar essas entidades, como se estivesse acessando diretamente o banco de dados.</p>
</div>
<div class="paragraph">
<p>Existem várias vantagens em utilizar JPA nos projetos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A JPA tem sua própria linguagem rica e semelhante a SQL para consultas estáticas e dinâmicas. Utilizando a Java Persistence Query Language (JPQL), as aplicações permanecerão portáteis em diferentes fornecedores de banco de dados.</p>
</li>
<li>
<p>É possível evitar a tarefa de escrever código JDBC/SQL prolixo e propenso a erro.</p>
</li>
<li>
<p>A JPA fornece, de maneira transparente, serviços para cache de dados e otimização de desempenho.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="whatSession">O que são Beans de Sessão?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Beans de sessão do Enterprise são chamados por um cliente para realizar uma operação de negócio específica. O nome <em>sessão</em> implica que uma instância do bean está disponível pela duração de uma "unidade de trabalho". A <a href="http://jcp.org/aboutJava/communityprocess/final/jsr318/index.html">especificação do EJB 3.1</a> descreve um objeto de sessão típico como tendo as seguintes características:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>É executado em nome de um único cliente</p>
</li>
<li>
<p>Pode ter reconhecimento da transação</p>
</li>
<li>
<p>Atualiza dados compartilhados em um banco de dados subjacente</p>
</li>
<li>
<p>Não representa dados compartilhados diretamente no banco de dados, embora possa acessar e atualizar esses dados</p>
</li>
<li>
<p>Tem vida relativamente curta</p>
</li>
<li>
<p>É removido quando o contêiner EJB trava. O cliente tem que restabelecer um novo objeto de sessão para continuar o cálculo.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>O EJB fornece três tipos de beans de sessão: <em>com estado</em>, <em>sem estado</em> e <em>singleton</em>. As seguintes descrições são adaptadas do <a href="http://download.oracle.com/docs/cd/E17410_01/javaee/6/tutorial/doc/index.html">Tutorial do Java EE 6</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Com estado:</strong> O estado do bean é mantido em vários chamados de método. O "estado" se refere aos valores de suas variáveis de instância. Como o cliente interage com o bean, esse estado é normalmente chamado de estado <em>conversacional</em>.</p>
</li>
<li>
<p><strong>Sem estado:</strong> Beans sem estado são utilizados para operações que podem ocorrer em uma única chamada de método. Quando o método finaliza o processamento, o estado do bean específico do cliente não é retido. Um bean de sessão sem estado não mantém, portanto, um estado conversacional com o cliente.</p>
</li>
<li>
<p><strong>Singleton:</strong> Um bean de sessão singleton é instanciado uma vez por aplicação e existe durante o ciclo de vida da aplicação. Beans de sessão singleton são projetados para circunstâncias em que uma única instância de enterprise bean é compartilhada e acessada de forma concorrente pelos clientes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Para obter mais informações sobre beans de sessão EJB, consulte o <a href="http://download.oracle.com/docs/cd/E17410_01/javaee/6/tutorial/doc/gipjg.html">Tutorial do Java EE 6: O que é um bean de sessão?</a>.</p>
</div>
<div class="paragraph">
<p>Com a finalidade de desenvolver a aplicação de e-commerce neste tutorial, trabalharemos apenas com beans de sessão sem estado.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="specification">Sobre Especificações e Implementações</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As tecnologias EJB e JPA são definidas pelas seguintes especificações:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://jcp.org/en/jsr/summary?id=317">JSR 317: Java Persistence 2.0</a></p>
</li>
<li>
<p><a href="http://jcp.org/en/jsr/summary?id=318">JSR 318: Enterprise JavaBeans 3.1</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Essas especificações definem as tecnologias. Para aplicar uma tecnologia ao projeto, no entanto, será necessário utilizar uma <em>implementação</em> da especificação. Quando uma especificação se torna finalizada, ela inclui uma implementação de referência, que é uma implementação gratuita da tecnologia. Caso ache este conceito confuso, considere a seguinte analogia: Uma composição musical (ou seja, as notas em uma página) define uma peça musical. Quando um músico a aprende a composição e grava sua apresentação, ele cria uma <em>interpretação</em> da peça. Dessa maneira, a composição musical é semelhante à especificação técnica e a gravação do músico corresponde à implementação da especificação.</p>
</div>
<div class="paragraph">
<p>Consulte <a href="intro.html#jcp">O que é o Processo da Comunidade Java?</a> para obter uma explicação das especificações técnicas Java e como elas são formalmente padronizadas.</p>
</div>
<div class="paragraph">
<p>Se examinar as páginas de download das releases finais das especificações do EJB e do JPA, encontrará links para as seguintes implementações de referência:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>JPA:</strong> <a href="http://www.eclipse.org/eclipselink/downloads/ri.php">http://www.eclipse.org/eclipselink/downloads/ri.php</a></p>
</li>
<li>
<p><strong>EJB:</strong> <a href="http://glassfish.dev.java.net/downloads/ri">http://glassfish.dev.java.net/downloads/ri</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Implementações da especificação da JPA são chamadas de <em>provedores de persistência</em> e o provedor de persistência que foi escolhido como a implementação de referência da especificação da JPA 2.0 é chamado de <a href="http://www.eclipse.org/eclipselink/">EclipseLink</a>.</p>
</div>
<div class="paragraph">
<p>Se examinar o link para a implementação de referência do EJB, chegará em uma página que lista não apenas a implementação para o EJB, mas para todas as implementações de referência fornecidas pelo <a href="https://glassfish.dev.java.net/">Projeto GlassFish</a>. O motivo para isso é que o Projeto GlassFish forma a implementação de referência da especificação da plataforma Java EE 6 (<a href="http://jcp.org/en/jsr/summary?id=316">JSR 316</a>). O servidor de aplicações GlassFish v3 (ou o Open Source Edition), que você está utilizando para construir o projeto de e-commerce neste tutorial, contém as implementações de referência de todas as tecnologias desenvolvidas pelo Projeto GlassFish. Assim, ele é referenciado como um <em>contêiner</em> Java EE 6.</p>
</div>
<div class="paragraph">
<p>Um contêiner Java EE contém três componentes essenciais: um contêiner web (ou seja, servlet), um contêiner EJB e um provedor de persistência. O cenário de implantação para a aplicação de e-commerce é exibido no diagrama a seguir. As classes de entidade criadas nesta unidade são gerenciadas pelo provedor de persistência. Os beans de sessão criados nesta unidade são gerenciados pelo contêiner EJB. As views são renderizadas nas páginas JSP, que são gerenciadas pelo contêiner web.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/java-ee-container.png" alt="java ee container">
</div>
<div class="title">Figure 3. Como um contêiner Java EE, o GlassFish v3 contém contêineres Web e EJB e o EclipseLink, o provedor de persistência</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="addEntity">Adicionando Classes de Entidade</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Comece utilizando Classes de Entidade do IDE do assistente de Banco de dados para gerar classes de entidade com base no esquema <code>affablebean</code>. O assistente conta com o provedor de persistência subjacente para realizar essa tarefa.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abra o <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot3.zip">snapshot do projeto</a> no IDE. No IDE, Pressione Ctrl-Shift-O (âŚ�-Shift-O no Mac) e navegue para o local em seu computador onde você descompactou o arquivo de download.</p>
</li>
<li>
<p>Pressione Ctrl-N (⌘-N no Mac) para abrir o assistente de Arquivo.</p>
</li>
<li>
<p>Selecione a categoria Persistência e, em seguida, selecione Classes de Entidade em Banco de Dados. Clique em Próximo.</p>
</li>
<li>
<p>Na Etapa 2: Tabelas de Banco de Dados, escolha <code>jdbc/affablebean</code> na lista drop-down Fonte de Dados. A lista drop-down é preenchida por fontes de dados registradas no servidor de aplicações.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Quando você escolhe a fonte de dados <code>jdbc/affablebean</code>, o IDE varre o banco de dados e lista as tabelas de banco de dados no painel Tabelas Disponíveis.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/entity-from-database.png" alt="entity from database">
</div>
<div class="title">Figure 4. Escolha uma origem de dados disponível para ter o IDE lido em tabelas de banco de dados</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Clique no botão Adicionar Tudo e, em seguida, em Próximo.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Etapa 3 do assistente de Classes de Entidade do Banco de dados é um pouco diferente entre o NetBeans IDE 6.8 e 6.9. Dependendo da versão do IDE que você está usando, execute as seguintes etapas.</p>
<div class="ulist">
<ul>
<li>
<p><a href="#68">NetBeans IDE 6.8</a></p>
</li>
<li>
<p><a href="#69">NetBeans IDE 6.9</a></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>[[68]]
==== NetBeans IDE 6.8</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/entity-classes-68.png" alt="entity classes 68">
</div>
<div class="title">Figure 5. Netbeans 6.8: assistente Classes de Entidade do Banco de Dados, Etapa 3: Classes de Entidade</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Digite <strong>entity</strong> (entidade) no campo Pacote. O assistente criará um novo pacote para as classes de entidade depois da conclusão.</p>
</li>
<li>
<p>Clique no botão Criar Unidade de Persistência. A caixa de diálogo Criar Unidade de Persistência será aberta.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/create-pu.png" alt="create pu">
</div>
<div class="title">Figure 6. Use a caixa de diálogo Criar Unidade de Persistência para gerar um arquivo persistence.xml</div>
</div>
<div class="paragraph">
<p>Uma <em>unidade de persistência</em> se refere a uma coleção de classes de entidade que existem em uma aplicação. A caixa de diálogo acima gera um arquivo <code>persistence.xml</code>, que é usado por seu provedor de persistência para especificar as definições de configuração da unidade de persistência. Note que "EclipseLink (JPA 2. 0)" é a seleção default para o servidor associado ao projeto. Deixe "Estratégia de Geração de Tabela" definido como &#8220;None&#8221;. Isso impede o provedor de persistência de afetar o banco de dados. (Por exemplo, se desejar que o provedor de persistência delete e, em seguida, recrie o banco de dados com base nas classes de entidade existentes, seria possível definir a estratégia como &#8220;Drop and Create&#8221;. Essa ação seria, em seguida, executada toda vez que o projeto fosse implantado).</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Clique em Criar.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>De volta à Etapa 3: Classes de Entidade, note que os nomes de classes das entidades são baseados em tabelas de banco de dados. Por exemplo, a entidade <code>CustomerOrder</code> é mapeada para a tabela de banco de dados <code>customer_order</code>. Além disso, note que a opção "Gerar Anotações de Consulta Nomeada para Campos Persistentes" está selecionada por default. Começaremos utilizando várias consultas nomeadas posteriormente neste tutorial.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Prossiga para a <a href="#step7">etapa 7</a> abaixo.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>[[69]]
==== NetBeans IDE 6.9</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/entity-classes-69.png" alt="entity classes 69">
</div>
<div class="title">Figure 7. Netbeans 6.9: assistente Classes de Entidade do Banco de Dados, Etapa 3: Classes de Entidade</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Digite <strong>entity</strong> (entidade) no campo Pacote. O assistente criará um novo pacote para as classes de entidade depois da conclusão.</p>
</li>
<li>
<p>Observe o seguinte:</p>
<div class="ulist">
<ul>
<li>
<p>Os nomes das classes das entidades são baseados em tabelas de banco de dados. Por exemplo, a entidade <code>CustomerOrder</code> será mapeada para a tabela de banco de dados <code>customer_order</code>.</p>
</li>
<li>
<p>A opção "Gerar Anotações de Consulta Nomeada para Campos Persistentes" é selecionada por default. Começaremos utilizando várias consultas nomeadas posteriormente neste tutorial.</p>
</li>
<li>
<p>A opção "Criar Unidade de Persistência" é selecionada por default. Uma <em>unidade de persistência</em> é uma coleção de classes de entidade que existem em uma aplicação. A unidade de persistência é definida por um arquivo de configuração <code>persistence.xml</code>, que é lido pelo seu provedor de persistência. Portanto, ativar esta opção significa que o assistente também gerará um arquivo <code>persistence.xml</code> e irá preenchê-lo com as definições default.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Clique em Finalizar. As classes de entidade JPA são geradas com base nas tabelas de banco de dados <code>affablebean</code>. Você pode examinar as classes de entidade na janela Projetos, expandindo o pacote <code>entity</code> recém-criado. Observe também que a nova unidade de persistência existe no nó Arquivos de Configuração.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/entity-classes.png" alt="entity classes">
</div>
<div class="title">Figure 8. Exibir novas classes de entidade na janela Projetos</div>
</div>
<div class="paragraph">
<p>Note que o assistente gerou uma classe de entidade adicional, <code>OrderedProductPK</code>. Lembre-se de que a tabela <code>ordered_product</code> do modelo de dados utiliza uma chave primária composta que inclui as chaves primárias das tabelas <code>customer_order</code> e <code>product</code>. (Consulte <a href="data-model.html#manyToMany">Criação de Modelo de Dados: Criando Relacionamentos Muitos para Muitos</a>). Por esse motivo, o provedor de persistência cria uma classe de entidade separada para a chave composta e <em>incorpora-a</em> na entidade <code>OrderedProduct</code>. É possível abrir <code>OrderedProduct</code> no editor para inspecioná-lo. A JPA utiliza a anotação <code>@EmbeddedId</code> para significar que a classe que pode ser incorporada é uma chave primária composta.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class OrderedProduct implements Serializable {
    private static final long serialVersionUID = 1L;
    *@EmbeddedId*
    protected OrderedProductPK orderedProductPK;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pressione Ctrl-Espaço na anotação <code>@EmbeddedId</code> para chamar a documentação da API.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/embedded-id.png" alt="embedded id">
</div>
<div class="title">Figure 9. Pressione Ctrl-Espaço para chamar a documentação da API</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Abra a unidade de persistência (<code>persistence. xml</code>) no editor. O IDE fornece uma view do Design das unidades de persistência, além da view XML. A view do Design fornece uma maneira conveniente de fazer mudanças na configuração para o gerenciamento do projeto do provedor de persistência.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/persistence-unit.png" alt="persistence unit">
</div>
<div class="title">Figure 10. View do Design da unidade de persistência AffableBeanPU</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Clique na guia XML na parte superior da unidade de persistência <code>AffableBeanPU</code> para abrir a view XML. Adicione a propriedade a seguir ao arquivo.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;persistence-unit name="AffableBeanPU" transaction-type="JTA"&gt;
  &lt;jta-data-source&gt;jdbc/affablebean&lt;/jta-data-source&gt;
  *&lt;properties&gt;
    &lt;property name="eclipselink.logging.level" value="FINEST"/&gt;
  &lt;/properties&gt;*
&lt;/persistence-unit&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Defina a propriedade de nível de log como <code>FINEST</code> para que possa exibir toda a saída possível produzida pelo provedor de persistência quando a aplicação é executada. Isso permite ver o SQL que o provedor de persistência está utilizando no banco de dados e pode facilitar em qualquer depuração necessária.</p>
</div>
<div class="paragraph">
<p>Consulte a documentação oficial do EclipseLink para obter uma explicação do log e uma lista de todos os valores de log: <a href="http://wiki.eclipse.org/EclipseLink/Examples/JPA/Logging">Como Configurar o Log</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="addSession">Adicionando Beans de Sessão</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nesta seção, utilizamos os Beans de Sessão do IDE para o assistente de Classes de Entidade gerar uma <em>fachada de sessão</em> do EJB para cada uma das classes de entidade que foram criadas. Cada bean de sessão conterá métodos de acesso básico para sua respectiva classe de entidade.</p>
</div>
<div class="paragraph">
<p>Uma <em>fachada de sessão</em> é um padrão de design anunciado no <a href="http://java.sun.com/blueprints/enterprise/index.html">programa Enterprise BluePrints</a>. Conforme informado no <a href="http://java.sun.com/blueprints/corej2eepatterns/Patterns/SessionFacade.html">Catálogo de Padrões do J2EE Principal</a>, ele tenta resolver problemas comuns que surgem em um ambiente de aplicação de várias camadas, como:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Acoplamento rígido, que leva à dependência direta entre clientes e objetos de negócio</p>
</li>
<li>
<p>Muitas chamadas de método entre cliente e servidor, que levam a problemas de desempenho da rede</p>
</li>
<li>
<p>Falta de uma estratégia de acesso de cliente uniforme, expondo os objetos do negócio a mau uso</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Uma fachada de sessão abstrai as interações do objeto de negócio subjacente e fornece uma camada de serviço que expõe apenas a funcionalidade necessária. Assim, ela oculta, da view do cliente, as interações complexas entre os participantes. Portanto, o bean de sessão (que representa a fachada da sessão) gerencia os relacionamentos entre os objetos do negócio. O bean de sessão também gerencia o ciclo de vida desses participantes criando-os, localizando-os, modificando-os e deletando-os, conforme necessário, pelo fluxo de trabalho.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pressione Ctrl-N (⌘-N no Mac) para abrir o assistente de Arquivo.</p>
</li>
<li>
<p>Selecione a categoria Persistência e selecione Beans de Sessão para Classes de Entidade.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/session-beans-for-entity-classes.png" alt="session beans for entity classes">
</div>
<div class="title">Figure 11. Selecione Beans de Sessão para Classes de Entidade para gerar uma fachada da sessão para seu modelo de persistência</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Clique em Próximo.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Na Etapa 2: Classes de Entidade, note que todas as classes de entidade contidas no projeto estão listadas à esquerda, em Classes de Entidade Disponíveis. Clique em Adicionar Tudo. Todas as classes de entidade são movidas para a direita, em Classes de Entidade Selecionadas.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Clique em Próximo.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Na Etapa 3: Beans de Sessão Gerados, digite <strong>session</strong> no campo Pacote.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/generated-session-beans.png" alt="generated session beans">
</div>
<div class="title">Figure 12. Especifique o local dos novos beans de sessão e se deseja criar interfaces</div>
</div>
<div class="paragraph">
<p><strong>Observação:</strong> É possível utilizar o assistente para gerar interfaces locais e remotas para os beans de sessão. Embora haja vantagens em programar beans de sessão para interfaces (Por exemplo, ocultar interações de objetos de negócio atrás de uma interface permite desacoplar ainda mais o cliente de sua lógica de negócio. Isso também significa que você pode codificar várias implementações da interface para a aplicação, se necessário for) e isso está fora do escopo do tutorial. Note que as versões do EJB anteriores a 3.1 <em>requerem</em> a implementação de uma interface para cada bean de sessão.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Clique em Finalizar. O IDE gera beans de sessão para cada uma das classes de entidade contidas no projeto. Na janela Projetos, expanda o novo pacote <code>session</code> para examinar os beans de sessão.</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">NetBeans 6.8</th>
<th class="tableblock halign-left valign-top">NetBeans 6.9</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/projects-window-session-beans.png" alt="projects window session beans" title="Examinar novos beans de sessão na janela Projetos"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/projects-window-session-beans-69.png" alt="projects window session beans 69" title="Examinar novos beans de sessão na janela Projetos"></span></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Observação:</strong> Como mostrado acima, o NetBeans IDE 6.9 fornece alguns aprimoramentos na maneira como o assistente Beans de Sessão para Classes de Entidade gera classes de fachadas. Ou seja, o código "boiler-plate” que é comum a todas as classes é desconsiderado em uma classe abstrata denominada <code>AbstractFacade</code>. Caso esteja trabalhando na versão 6.9, abra qualquer uma das classes de fachada que foram geradas (sem ser a <code>AbstractFacade</code>). Você verá que a classe estende a <code>AbstractFacade</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Abra uma fachada de sessão no editor, por exemplo, <code>ProductFacade</code>. Todas as fachadas de sessão geradas instanciam um <a href="http://java.sun.com/javaee/6/docs/api/javax/persistence/EntityManager.html">`EntityManager`</a> usando a anotação <a href="http://download.oracle.com/javaee/6/api/javax/persistence/PersistenceContext.html">`@PersistenceContext`</a>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@PersistenceContext(unitName = "AffableBeanPU")
private EntityManager em;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A anotação <code>@PersistenceContext</code> é usada para injetar um <code>EntityManager</code> gerenciado por contêiner na classe. Em outras palavras, nós confiamos no contêiner EJB do GlassFish para abrir e fechar os <code>EntityManager`s, onde e quando necessário. O elemento `unitName</code> especifica a unidade de persistência <code>AffableBeanPU</code>, que foi definida no arquivo <code>persistence.xml</code> da aplicação.</p>
</div>
<div class="paragraph">
<p>O <code>EntityManager</code> é um componente integrante da Java Persistence API e é responsável por executar ações de persistência no banco de dados. O livro <a href="http://www.manning.com/panda/">EJB 3 em ação</a> descreve o <code>EntityManager</code> como se segue:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><em>A interface <code>EntityManager</code> do JPA gerencia entidades em termos de fornecer, realmente, serviços de persistência. Embora as entidades digam a um provedor JPA como são mapeadas para o banco de dados, elas não fazem a própria persistência. A interface <code>EntityManager</code> lê os metadados ORM para uma entidade e executa operações de persistência.</em></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Sua aplicação contém, agora, um modelo de persistência do banco de dados <code>affablebean</code> na forma de classes de entidade JPA. Também contém uma fachada de sessão que consiste em Enterprise beans que podem ser utilizados para acessar as classes de entidade. A próxima seção demonstra como você pode acessar o banco de dados utilizando os beans de sessão e as classes de entidade.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="access">Acessando Dados com EJBs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Na <a href="connect-db.html">unidade anterior do tutorial</a>, vimos como acessar o banco de dados da aplicação configurando uma fonte de dados no GlassFish, adicionando uma referência de recurso ao descritor de implantação da aplicação e utilizando tags JSTJ <code>&lt;sql&gt;</code> nas páginas JSP da aplicação. Essa técnica é valiosa, pois permite configurar, rapidamente, protótipos que incluem dados do banco de dados. No entanto, não é um cenário realista para aplicações médias ou grandes, ou para aplicações gerenciadas por uma equipe de desenvolvedores, já que seria difícil de mantê-la ou ampliá-la. Além disso, se estiver desenvolvendo a aplicação em várias camadas ou estiver aderindo ao padrão MVC, não seria aconselhável manter o código de acesso de dados no front-end. Utilizar Enterprise beans com um modelo de persistência permite melhor conformidade com o padrão MVC, desacoplando, de maneira eficaz, os componentes do modelo e da apresentação.</p>
</div>
<div class="paragraph">
<p>As instruções a seguir demonstram como começar a utilizar os beans de sessão e de entidade no projeto <code>AffableBean</code>. Você removerá a lógica de acesso a dados JSTL que configurou anteriormente para as páginas de índice e de categoria. No lugar dela, utilizará os métodos de acesso de dados fornecidos pelos beans de sessão e armazenará os dados em variáveis de escopo para que possam ser recuperados das views de páginas do front-end. Trataremos da página de índice primeiro e, em seguida, iremos para a página de categoria, mais complicada.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#index">página de índice</a></p>
</li>
<li>
<p><a href="#category">página de categoria</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="index">página de índice</h3>
<div class="paragraph">
<p>A página de índice requer dados para as quatro categorias de produtos. Na configuração atual, as tags JSTL <code>&lt;sql&gt;</code> consultam o banco de dados por detalhes da categoria toda vez que a página de índice for solicitada. Como essas informações são raramente modificadas, faz mais sentido do ponto de vista do desempenho executar a consulta apenas uma vez após a implantação da aplicação e armazenar os dados em um atributo de escopo de aplicação. Podemos realizar isso adicionando esse código ao método <code>init</code> do <code>ControllerServlet</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Na janela Projetos, clique duas vezes no nó Pacotes de Código-Fonte &gt; <code>controller</code> &gt; <code>ControllerServlet</code> para abri-lo no editor.</p>
</li>
<li>
<p>Declare uma instância de <code>CategoryFacade</code> e aplique a anotação <code>@EJB</code> à instância.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class ControllerServlet extends HttpServlet {

    *@EJB
    private CategoryFacade categoryFacade;*

    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A anotação <code>@EJB</code> instrui o contêiner EJB a instanciar a variável <code>categoryFacade</code> com o EJB nomeado <code>CategoryFacade</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Utilize as dicas do IDE para adicionar instruções de importação para:</p>
<div class="ulist">
<ul>
<li>
<p><code>javax.ejb.EJB</code></p>
</li>
<li>
<p><code>session.CategoryFacade</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Pressionar Ctrl-Shift-I (⌘-Shift-I no Mac) adiciona, automaticamente, importações necessárias à classe.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Adicione o seguinte método <code>init</code> à classe. O contêiner da Web inicializa o servlet chamando seu método <code>init</code>. Isso ocorre apenas uma vez, após o servlet carregar e antes de ele começar a atender solicitações.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class ControllerServlet extends HttpServlet {

    @EJB
    private CategoryFacade categoryFacade;

    *public void init() throws ServletException {

        // store category list in servlet context
        getServletContext().setAttribute("categories", categoryFacade.findAll());
    }*

    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Aqui, aplica-se o método <code>findAll</code> da classe de fachada para consultar o banco de dados por todos os registros de <code>Category</code>. Em seguida, define-se a <code>List</code> resultante de objetos de <code>Category</code> como um atributo que pode ser referenciado pela string &#8220;categories&#8221;. Colocar a referência no <code>ServletContext</code> significa que a referência existe em um escopo que abrange toda a aplicação.</p>
</div>
<div class="paragraph">
<p>Para determinar rapidamente a assinatura de método do método <code>findAll</code>, mantenha o mouse sobre o método enquanto pressiona a tecla Ctrl (⌘ no Mac). (A imagem abaixo exibe a mensagem pop-up que aparece ao usar o NetBeans IDE 6.8.)</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/method-signature.png" alt="method signature">
</div>
<div class="title">Figure 13. Coloque o mouse sobre o método e mantenha pressionada a tecla Ctrl para exibir sua assinatura</div>
</div>
<div class="paragraph">
<p>Clicar no hiperlink permite navegar diretamente para o método.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Utilize a dica do IDE para adicionar a anotação <code>@Overrides</code>. O método <code>init</code> é definido pela superclasse do <code>HttpServlet</code>, <code>GenericServlet</code>.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/override.png" alt="override">
</div>
<div class="title">Figure 14. Utilize a dica do IDE para adicionar a anotação @Overrides para o método</div>
</div>
<div class="paragraph">
<p>Adicionar a anotação não é necessário, mas oferece várias vantagens:
* Permite utilizar a verificação do compilador para garantir que você esteja, realmente, substituindo o método que supõe estar substituindo.
* Melhora a legibilidade, já que se torna claro quando os métodos do código-fonte estão sendo substituídos.</p>
</div>
<div class="paragraph">
<p>Para obter mais informações sobre anotações, consulte <a href="http://download.oracle.com/javase/tutorial/java/javaOO/annotations.html">Tutoriais Java: Anotações</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Agora que configurou um atributo de escopo da aplicação que contém uma lista de categorias, modifique a página de índice para acessar o atributo recém-criado.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Clique duas vezes no nó Páginas Web &gt; <code>index.jsp</code> na janela Projetos para abrir o arquivo no editor.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Comente (ou delete) a instrução <code>&lt;sql:query&gt;</code> que está listada na parte superior do arquivo. Para comentar código no editor, realce o código e pressione Ctrl-/ (⌘-/ no Mac).</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/commented-out.png" alt="commented out">
</div>
<div class="title">Figure 15. Pressione Ctrl-/ para comentar um snippet de código no editor</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Modifique a tag <code>&lt;c:forEach&gt;</code> de abertura para que o atributo <code>items</code> faça referência ao novo atributo <code>categories</code> de escopo da aplicação.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;c:forEach var="category" items="*${categories}*"&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Abra o descritor de implantação web do projeto. Pressione Alt-Shift-O (Ctrl-Shift-O no Mac) e na caixa de diálogo Ir para Arquivo, digite &#8220;web&#8221; e clique em OK.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/go-to-file.png" alt="go to file">
</div>
<div class="title">Figure 16. Use a caixa de diálogo Ir para Arquivo para abrir rapidamente arquivos no editor</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>Comente (ou delete) a entrada <code>&lt;resource-ref&gt;</code>. A entrada foi necessária para as tags <code>&lt;sql&gt;</code>, a fim de identificar a fonte de dados registrada no servidor. Agora contamos com a JPA para acessar o banco de dados e a fonte de dados <code>jdbc/affablebean</code> já foi especificada na unidade de persistência. (Consulte a <a href="#pu">View do design da unidade de persistência do projeto</a> acima).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Realce toda a entrada <code>&lt;resource-ref&gt;</code> e pressione Ctrl-/ (⌘-/ no Mac).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">*&lt;!-- *&lt;resource-ref&gt;
         &lt;description&gt;Connects to database for AffableBean application&lt;/description&gt;
         &lt;res-ref-name&gt;jdbc/affablebean&lt;/res-ref-name&gt;
         &lt;res-type&gt;javax.sql.ConnectionPoolDataSource&lt;/res-type&gt;
         &lt;res-auth&gt;Container&lt;/res-auth&gt;
         &lt;res-sharing-scope&gt;Shareable&lt;/res-sharing-scope&gt;
     &lt;/resource-ref&gt; *--&gt;*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="11">
<li>
<p>Execute o projeto. Clique no botão Executar Projeto (<span class="image"><img src="images/run-project-btn.png" alt="run project btn"></span>). A página de índice do projeto será aberta no browser e você verá que todos os nomes e imagens das quatro categorias serão exibidos.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/index-page.png" alt="index page">
</div>
<div class="title">Figure 17. Verifique se a página de índice pode recuperar detalhes da categoria</div>
</div>
</div>
<div class="sect2">
<h3 id="category">página de categoria</h3>
<div class="paragraph">
<p>A <a href="design.html#category">página de categoria</a> requer três partes de dados para ser renderizada adequadamente:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>dados da categoria:</strong> para botões de categoria da coluna esquerda</p>
</li>
<li>
<p><strong>categoria selecionada:</strong> a categoria selecionada é realçada na coluna esquerda e o nome da categoria selecionada é exibido acima da tabela de produtos</p>
</li>
<li>
<p><strong>dados do produto para a categoria selecionada:</strong> para produtos exibidos na tabela de produtos</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Vamos abordar cada uma das três partes de dados individualmente.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#categoryData">dados da categoria</a></p>
</li>
<li>
<p><a href="#selectedCategoryData">categoria selecionada</a></p>
</li>
<li>
<p><a href="#productData">dados do produto para a categoria selecionada</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="categoryData">dados da categoria</h4>
<div class="paragraph">
<p>Para explicar os dados da categoria, podemos reutilizar o atributo <code>categories</code> criado para a página de índice.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abra <code>category.jsp</code> no editor e comente (Ctrl-/; ⌘-/ no Mac) as instruções JSTL <code>&lt;sql&gt;</code> listadas na parte superior do arquivo.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/comment-out-sql.png" alt="comment out sql">
</div>
<div class="title">Figure 18. Comente instruções JSTL &lt;sql&gt; na página da categoria</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Modifique a tag <code>&lt;c:forEach&gt;</code> de abertura para que o atributo <code>itens</code> faça referência ao atributo <code>categorias</code> de escopo da aplicação. (Isso é idêntico ao que foi feito acima para <code>index.jsp</code>).</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;c:forEach var="category" items="*${categories}*"&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Execute o projeto para examinar o estado atual da página da categoria. Clique no botão Executar Projeto (<span class="image"><img src="images/run-project-btn.png" alt="run project btn"></span>). Quando a página de índice do projeto abrir no browser, clique em qualquer uma das quatro categorias. Os botões de categoria na coluna esquerda serão exibidos e funcionarão como esperado.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/category-page-left-column.png" alt="category page left column">
</div>
<div class="title">Figure 19. Os botões de categoria na coluna esquerdo serão exibidos e funcionarão conforme esperado</div>
</div>
</div>
<div class="sect3">
<h4 id="selectedCategoryData">categoria selecionada</h4>
<div class="paragraph">
<p>Para recuperar a categoria selecionada, podemos utilizar a <code>categoryFacade</code> que já criamos para encontrar a <code>Category</code> cujo ID corresponda à string de consulta.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abra o <code>ControllerServlet</code> no editor. (Se já estiver aberto, pressione Ctrl-Tab e escolha na lista pop-up).</p>
</li>
<li>
<p>Inicie a implementação da funcionalidade para adquirir a categoria selecionada. Localize o comentário <code>TODO: Implement category request</code>, delete-o e adicione o seguinte código (em <strong>negrito</strong>).</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// if category page is requested
if (userPath.equals("/category")) {

    *// get categoryId from request
    String categoryId = request.getQueryString();

    if (categoryId != null) {

    }*

// if cart page is requested
} else if (userPath.equals("/viewCart")) {</code></pre>
</div>
</div>
<div class="paragraph">
<p>Você recupera o ID da categoria solicitada chamando <code>getQueryString()</code> na solicitação.</p>
</div>
<div class="paragraph">
<p>*Observação: * A lógica para determinar a categoria selecionada nos botões de categoria da coluna esquerda já está implementada em <code>category. jsp</code> utilizando uma expressão EL, o que é comparável a chamar <code>getQueryString()</code> no servlet. A expressão EL é: <code>pageContext.request.queryString</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Adicione a seguinte linha de código na instrução <code>if</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// get categoryId from request
String categoryId = request.getQueryString();

if (categoryId != null) {

    *// get selected category
    selectedCategory = categoryFacade.find(Short.parseShort(categoryId));*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Você utiliza o método <code>find</code> da <code>CategoryFacade</code> para recuperar o objeto`Category` com base no ID da categoria solicitada. Observe que é necessário difundir <code>categoryId</code> para um <code>Short</code>, já que é o tipo utilizado para o campo <code>id</code> na classe de entidade <code>Category</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Clique no badge (<span class="image"><img src="images/editor-badge.png" alt="editor badge"></span>) na margem esquerda para usar a dica do editor para declarar <code>selectedCategory</code> como uma variável local dentro do método <code>doGet</code>.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/local-variable.png" alt="local variable">
</div>
<div class="title">Figure 20. Usar dicas Editor para declarar variáveis locais</div>
</div>
<div class="paragraph">
<p>Como a <code>selectedCategory</code> é um tipo de <code>Category</code> que ainda não foi importada para a classe, o IDE adiciona automaticamente uma instrução de importação para <code>entity.Category</code> na parte superior do arquivo.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Adicione a seguinte linha para colocar o objeto <code>Category</code> recuperado no escopo da solicitação.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// get categoryId from request
String categoryId = request.getQueryString();

if (categoryId != null) {

    // get selected category
    selectedCategory = categoryFacade.find(Short.parseShort(categoryId));

    *// place selected category in request scope
    request.setAttribute("selectedCategory", selectedCategory);*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>No editor, mude para <code>category. jsp</code>. (Pressione Ctrl-Tab e escolha na lista pop-up).</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Localize <code>&lt;p id="categoryTitle"&gt;</code> e faça a seguinte alteração.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;p id="categoryTitle"&gt;
    &lt;span style="background-color: #f5eabe; padding: 7px;"&gt;*${selectedCategory.name}*&lt;/span&gt;
&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Agora você está utilizando o atributo <code>selectedCategory</code>, que acabou de colocar no escopo da solicitação do <code>ControllerServlet</code>. Utilizar &#8220;.name&#8221; na expressão EL chama o método <code>getName</code> no objeto <code>Category</code> dado.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Retorne ao browser e atualize a página da categoria. O nome da categoria selecionada será exibido, agora, na página.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/category-page-selected-category.png" alt="category page selected category">
</div>
<div class="title">Figure 21. O nome da categoria selecionada será exibido na página da categoria</div>
</div>
</div>
<div class="sect3">
<h4 id="productData">dados do produto para a categoria selecionada</h4>
<div class="paragraph">
<p>Para recuperar todos os produtos de uma categoria selecionada, faremos uso do método <code>getProductCollection()</code> da entidade <code>Category</code>. Comece por chamar este método em <code>selectedCategory</code> para obter uma coleção de todos os <code>Product</code> associados à <code>selectedCategory</code>. A seguir, armazene a coleção de produtos como um atributo no escopo da solicitação e, finalmente, referencie o atributo com escopo na view da página <code>category.jsp</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>No <code>ControllerServlet</code>, adicione a seguinte instrução ao código que gerencia a solicitação da categoria.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// if category page is requested
if (userPath.equals("/category")) {

    // get categoryId from request
    String categoryId = request.getQueryString();

    if (categoryId != null) {

        // get selected category
        selectedCategory = categoryFacade.find(Short.parseShort(categoryId));

        // place selected category in request scope
        request.setAttribute("selectedCategory", selectedCategory);

        *// get all products for selected category
        categoryProducts = selectedCategory.getProductCollection();*
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Chamar <code>getProductCollection()</code> aqui permite obter uma coleção de todos os <code>Product`s associados a `selectedCategory</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Utilize a dica do editor para definir <code>categoryProducts</code> como uma variável local para o método <code>doGet</code>.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/local-variable2.png" alt="local variable2">
</div>
<div class="title">Figure 22. Usar dicas Editor para declarar variáveis locais</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Coloque a coleção de <code>Products</code> no escopo da solicitação, de modo que possa ser recuperado do front-end da aplicação.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// if category page is requested
if (userPath.equals("/category")) {

    // get categoryId from request
    String categoryId = request.getQueryString();

    if (categoryId != null) {

        // get selected category
        selectedCategory = categoryFacade.find(Short.parseShort(categoryId));

        // place selected category in request scope
        request.setAttribute("selectedCategory", selectedCategory);

        // get all products for selected category
        categoryProducts = selectedCategory.getProductCollection();

        *// place category products in request scope
        request.setAttribute("categoryProducts", categoryProducts);
    }*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Abra o arquivo <code>category.jsp</code> no editor e faça a seguinte alteração à tabela de produtos.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;table id="productTable"&gt;

    &lt;c:forEach var="product" items="*${categoryProducts}*" varStatus="iter"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A tag <code>&lt;c:forEach&gt;</code> agora faz referência à coleção <code>categoryProducts</code>. O loop <code>c:forEach</code> agora se repetirá sobre cada objeto <code>Product</code> contido na coleção e extrairá os dados de acordo.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Pressione F6 (fn-F6 no Mac) para executar o projeto. Navegue para a página da categoria no browser e note que todos os produtos agora são exibidos para cada categoria.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/category-page-product-table.png" alt="category page product table">
</div>
<div class="title">Figure 23. A tabela Produto exibe produtos de uma determinada categoria</div>
</div>
<div class="paragraph">
<p>Esta unidade do tutorial forneceu uma breve introdução às tecnologias JPA e EJB. Também descreveu a atribuição das especificações JAVA e como suas implementações de referência são utilizadas pelo servidor de aplicações GlassFish. Em seguida, demonstrou como criar um conjunto de classes de entidade JPA que fornecem uma implementação Java do banco de dados do projeto. Em seguida, seguindo o padrão <em>fachada de sessão</em>, mostrou como criar um conjunto de beans de sessão EJB que existem na parte superior das classes de entidade e permitir acesso conveniente a eles. Finalmente, você modificou o projeto <code>AffableBean</code> para utilizar os novos beans de sessão e entidades para acesso a banco de dados necessários nas páginas de índice e de categoria.</p>
</div>
<div class="paragraph">
<p>Você pode baixar o <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot4.zip">snapshot 4</a> do projeto <code>AffableBean</code>, que corresponde ao estado do projeto depois da conclusão desta unidade usando o NetBeans IDE 6.9.</p>
</div>
<div class="paragraph">
<p>Na próxima unidade exploraremos o gerenciamento de sessão e como ativar a aplicação para lembrar a ação de um usuário, conforme ele ou ela clica pelo site. Isso é a chave para implementar um mecanismo de carrinho de compras em uma aplicação de e-commerce.</p>
</div>
<div class="paragraph">
<p>link:/about/contact_form.html?to=3&amp;subject=Feedback: NetBeans E-commerce Tutorial - Adding Entity Classes and Session Beans[Envie-nos Seu Feedback]</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="seeAlso">Consulte Também</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_recursos_do_netbeans">Recursos do NetBeans</h3>
<div class="ulist">
<ul>
<li>
<p><a href="../../../trails/java-ee.html">Trilha do Aprendizado do Java EE e Java Web</a></p>
</li>
<li>
<p><a href="../javaee-intro.html">Introdução à Tecnologia Java EE</a></p>
</li>
<li>
<p><a href="../javaee-gettingstarted.html">Introdução às Aplicações do Java EE 6</a></p>
</li>
<li>
<p><a href="../secure-ejb.html">Construindo Enterprise Beans Seguros no Java EE</a></p>
</li>
<li>
<p><a href="../javaee-entapp-ejb.html">Criando uma Aplicação Enterprise com o EJB 3.1</a></p>
</li>
<li>
<p><a href="../jpa-eclipselink-screencast.html">Utilizando o Suporte do JPA com EclipseLink</a> [screencast]</p>
</li>
<li>
<p><a href="../../screencasts.html">Tutoriais e Demonstrações em Vídeo para NetBeans IDE 6.x</a></p>
</li>
<li>
<p><a href="http://refcardz.dzone.com/refcardz/netbeans-java-editor-68">Cartão de Referência do NetBeans Java Editor 6.8</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_recursos_do_ejb">Recursos do EJB</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Página do Produto:</strong> <a href="http://java.sun.com/products/ejb/">Tecnologia Enterprise JavaBeans</a></p>
</li>
<li>
<p><strong>Download da especificação:</strong> <a href="http://jcp.org/aboutJava/communityprocess/final/jsr318/index.html">JSR 318: Release Final do EJB 3.1</a></p>
</li>
<li>
<p><strong>Implementação de referência:</strong> <a href="http://glassfish.dev.java.net/downloads/ri">http://glassfish.dev.java.net/downloads/ri</a></p>
</li>
<li>
<p><strong>Fórum Oficial:</strong> <a href="http://forums.sun.com/forum.jspa?forumID=13">Tecnologias Enterprise: Enterprise JavaBeans</a></p>
</li>
<li>
<p><strong>Tutorial do Java EE 6:</strong> <a href="http://download.oracle.com/docs/cd/E17410_01/javaee/6/tutorial/doc/bnblr.html">Parte IV: Enterprise Beans</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_recursos_do_jpa">Recursos do JPA</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Página do produto:</strong> <a href="http://java.sun.com/javaee/technologies/persistence.jsp">Java Persistence API</a></p>
</li>
<li>
<p><strong>Download da Especificação:</strong> <a href="http://jcp.org/aboutJava/communityprocess/final/jsr317/index.html">JSR 317: Release Final do Java Persistence 2.0</a></p>
</li>
<li>
<p><strong>Implementação de referência:</strong> <a href="http://www.eclipse.org/eclipselink/downloads/ri.php">http://www.eclipse.org/eclipselink/downloads/ri.php</a></p>
</li>
<li>
<p><strong>Tutorial do Java EE 6:</strong> <a href="http://download.oracle.com/docs/cd/E17410_01/javaee/6/tutorial/doc/bnbpy.html">Parte VI: Persistência</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_recursos_do_glassfish">Recursos do GlassFish</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://glassfish.dev.java.net/docs/index.html">Documentação do GlassFish v3</a></p>
</li>
<li>
<p><a href="http://www.sun.com/offers/details/GlassFish_Tomcat.html">Aprendendo GlassFish para Usuários do Tomcat</a></p>
</li>
<li>
<p><a href="https://glassfish.dev.java.net/javaee5/persistence/persistence-example.html">Projeto GlassFish: Exemplo de Java Persistence</a></p>
</li>
<li>
<p><a href="http://docs.sun.com/app/docs/doc/820-7759">Seu Primeiro Contato: Uma Introdução à Plataforma Java EE</a></p>
</li>
<li>
<p><a href="https://glassfish.dev.java.net/downloads/ri/">Downloads da Implementação da Referência</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_artigos_técnicos">Artigos Técnicos</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.theserverside.com/news/1363656/New-Features-in-EJB-31">Novas funcionalidades no EJB 3.1</a></p>
</li>
<li>
<p><a href="http://www.ibm.com/developerworks/java/library/j-ejb1008.html">Melhores Práticas do EJB: Proteção do Bean de Entidade</a></p>
</li>
<li>
<p><a href="http://java.sun.com/blueprints/corej2eepatterns/Patterns/SessionFacade.html">Padrões Core J2EE: Fachada de Sessão</a></p>
</li>
<li>
<p><a href="http://www.ibm.com/developerworks/websphere/library/techarticles/0106_brown/sessionfacades.html">Regras e Padrões para Fachadas de Sessão</a></p>
</li>
<li>
<p><a href="http://www.oracle.com/technology/sample_code/tech/java/j2ee/designpattern/businesstier/sessionfacade/readme.html">Aplicação de Padrão de Design: Fachada de Sessão</a></p>
</li>
<li>
<p><a href="http://www.ibm.com/developerworks/websphere/library/bestpractices/using_httpservlet_method.html">+Melhor Prática: Utilizando o Método <code>init</code> do HttpServlet +</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_livros">Livros</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.amazon.com/Beginning-Java-EE-GlassFish-Second/dp/143022889X/ref=dp_ob_title_bk">Iniciando o Java EE 6 com o GlassFish 3</a></p>
</li>
<li>
<p><a href="http://www.amazon.com/Java-EE-GlassFish-Application-Server/dp/1849510369/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1281888153&amp;sr=1-1">Java EE 6 com o Servidor de Aplicações GlassFish 3</a></p>
</li>
<li>
<p><a href="http://www.apress.com/book/view/1590598954">Pro NetBeans IDE 6 Rich Client Platform Edition</a></p>
</li>
<li>
<p><a href="http://www.amazon.com/Real-World-Patterns-Rethinking-Practices/dp/0557078326/ref=pd_sim_b_4">Padrões do Java EE no Mundo Real: Repensando as Melhores Práticas</a></p>
</li>
<li>
<p><a href="http://www.amazon.com/Patterns-Enterprise-Application-Architecture-Martin/dp/0321127420/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1281985949&amp;sr=1-1">Padrões de Arquitetura da Aplicação Corporativa</a></p>
</li>
<li>
<p><a href="http://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1281985959&amp;sr=1-1">Design Conduzido pelo Domínio: Combatendo a Complexidade no Coração do Software</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_referências">Referências</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#1">^</a> Adaptado de <a href="http://www.manning.com/panda/">EJB 3 em ação</a> Capítulo 1, seção 1.1.2: EJB como framework.</p>
</li>
<li>
<p><a href="#2">^</a> Há muitos outros serviços fornecidos pelo EJB. Para obter uma lista mais abrangente, consulte <a href="http://www.manning.com/panda/">EJB 3 em ação</a>, Capítulo 1, seção 1.3.3: Ganhando funcionalidade com serviços EJB.</p>
</li>
</ol>
</div>
</div>
</div>
      
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/kb/docs/javaee/ecommerce/entity-session_pt_BR.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
