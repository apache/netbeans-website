
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans プラットフォームペイントアプリケーションのチュートリアル</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans プラットフォームペイントアプリケーションのチュートリアル - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, NetBeans プラットフォームペイントアプリケーションのチュートリアル">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 12.3</h1>
            <p><a class="button success" href="/download/nb123/nb123.html">Find out more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">NetBeans プラットフォームペイントアプリケーションのチュートリアル</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/67/nbm-paintapp_ja.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_ペイントアプリケーションについて">ペイントアプリケーションについて</a></li>
<li><a href="#_ペイントアプリケーションの設定">ペイントアプリケーションの設定</a>
<ul class="sectlevel2">
<li><a href="#_アプリケーションスケルトンの作成">アプリケーションスケルトンの作成</a></li>
<li><a href="#_ライブラリラッパーモジュールの作成">ライブラリラッパーモジュールの作成</a></li>
<li><a href="#_モジュールの作成">モジュールの作成</a></li>
<li><a href="#_モジュールの依存関係の指定">モジュールの依存関係の指定</a></li>
</ul>
</li>
<li><a href="#_ペイントキャンバスの作成と埋め込み">ペイントキャンバスの作成と埋め込み</a>
<ul class="sectlevel2">
<li><a href="#_キャンバスの作成">キャンバスの作成</a></li>
<li><a href="#_topcomponent_クラスの準備">TopComponent クラスの準備</a></li>
<li><a href="#_topcomponent_クラスの初期化">TopComponent クラスの初期化</a></li>
<li><a href="#_スケルトンメソッドの記入">スケルトンメソッドの記入</a></li>
<li><a href="#_ディスクへの画像の保存">ディスクへの画像の保存</a></li>
</ul>
</li>
<li><a href="#_new_canvasメニュー項目の作成">「New Canvas」メニュー項目の作成</a></li>
<li><a href="#_save_canvasメニュー項目の作成">「Save Canvas」メニュー項目の作成</a></li>
<li><a href="#_最後の仕上げ">最後の仕上げ</a></li>
<li><a href="#_配布用の作成">配布用の作成</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>このチュートリアルでは、NetBeans プラットフォーム上でリッチクライアントアプリケーションを開発するための、NetBeans IDE の基本的な使用方法を学習します。NetBeans プラットフォーム上でアプリケーションを開発する場合は、NetBeans IDE のコア上で開発します。IDE に属するモジュールでアプリケーションに関係ないものはすべて除外されますが、役に立つものは保持されます。IDE のコアですでに利用できる機能を再利用することで、多くの時間と労力を節約できます。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
このドキュメントでは NetBeans IDE 6.5 リリースを使用します。NetBeans IDE 6.0.x を使用している場合、 <a href="60/nbm-paintapp_ja.html">このドキュメントの 6.0/6.1 バージョン</a>を参照してください。
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ペイントアプリケーションについて">ペイントアプリケーションについて</h2>
<div class="sectionbody">
<div class="paragraph">
<p>このチュートリアルは、できるだけすばやく作業を進められるように作られています。NetBeans プラットフォームで簡単なアプリケーションを作成してインストールします。このアプリケーションを使用することによって、画面にペイントし、その結果を保存できます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/result-without-menus-60.png" alt="result without menus 60">
</div>
</div>
<div class="paragraph">
<p>この初期バージョンは決して本格的なペイントアプリケーションではありませんが、NetBeans プラットフォーム上でアプリケーションを作成する非常に簡単な例を紹介します。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
リッチクライアントアプリケーションではなく、NetBeans モジュールについて学習する場合は、 <a href="nbm-google_ja.html">NetBeans プラグインクイックスタート</a>のチュートリアルを参照してください。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>このチュートリアルでは、IDE に付属しているサンプルのアプリケーションを再作成します。最終的な成果物を確認するため、またはこのチュートリアルを作業する間に発生する問題をトラブルシューティングするために、次の場所にある「新規プロジェクト」ウィザードからサンプルを取得します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/sample-in-new-project-60.png" alt="sample in new project 60">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ペイントアプリケーションの設定">ペイントアプリケーションの設定</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この節では、アプリケーションの構造を作成します。まず、ウィザードでアプリケーションスケルトンを作成する必要があります。アプリケーションはライブラリに依存するため、ライブラリの JAR ファイルを格納するライブラリラッパーモジュールも作成します。最後に、コードを格納するモジュールを作成します。</p>
</div>
<div class="sect2">
<h3 id="_アプリケーションスケルトンの作成">アプリケーションスケルトンの作成</h3>
<div class="paragraph">
<p>「NetBeans プラットフォームアプリケーション」テンプレートでアプリケーションのスケルトンを作成します。スケルトンは、アプリケーションの基礎を形成するために一緒になって機能する一連のモジュールで構成されます。「プロジェクトプロパティー」ダイアログを使用し、アプリケーションのスプラッシュ画面、アプリケーション名、および使用する NetBeans モジュールの種類と数の割り当てを行います。配布用 ZIP の作成や Java WebStart (JNLP) アプリケーションの構築などのアクションを利用することもできます。これらのアクションは、アプリケーションをほかのユーザーが利用できるようにするための重要なツールです。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「ファイル」&gt;「新規プロジェクト」を選択します。「カテゴリ」で「NetBeans モジュール」を選択します。プロジェクトで「NetBeans プラットフォームアプリケーション」を選択します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/paintapp-proj-wiz.png" alt="paintapp proj wiz">
</div>
</div>
<div class="paragraph">
<p>「次へ」をクリックします。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「名前と場所」パネルで、「プロジェクト名」に「 <code>PaintApp</code> 」と入力します。「プロジェクトの場所」を使用コンピュータ上の任意のフォルダに変更します。「主プロジェクトとして設定」チェックボックスがすでに選択されていることを確認します。「完了」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>新規アプリケーションスケルトンが IDE で開きます。「プロジェクト」ウィンドウには、2 つのノードが含まれています。1 つ目の「モジュール」ノードは、アプリケーションに、モジュールおよびライブラリラッパーモジュールを手動で追加するためのものです。また、「モジュール」ウィザードまたは「ライブラリラッパーモジュール」ウィザードを使用すると、作成するモジュールを自動的にアプリケーションに追加できます。</p>
</div>
</div>
<div class="sect2">
<h3 id="_ライブラリラッパーモジュールの作成">ライブラリラッパーモジュールの作成</h3>
<div class="paragraph">
<p>ライブラリラッパーモジュールは、JAR ファイルにコードが含まれないモジュールで、ライブラリへの単なるポインタです。これによってライブラリが NetBeans モジュールに変換されると、元の JAR ファイルを変更しなくても、NetBeans クラスローダーシステムのすべての保護が適用されます。その結果、アプリケーションは別の NetBeans モジュールに依存する場合と同じように、そのライブラリに依存することができます。また、このライブラリの新しいバージョンが利用できるようになった場合、ラッパーライブラリ用の NetBeans モジュール (NBM) ファイルを 1 つ配布するだけで、新しいバージョンの配布が可能になります。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
NetBeans プラットフォーム上で構築を行う利点の 1 つは、ユーザーインタフェースが、Java の標準ユーザーインタフェースツールキットである Swing に基づいていることです。Swing は長い間使用されてきたので、アプリケーションに再利用できる Swing コンポーネントが数多くあります。このチュートリアルでは、既存のカラーチューザ (ソースは  <code>contrib/coloreditor</code>  の下の NetBeans CVS 内にある) を再利用します。JAR ファイルは  <code>ColorChooser.jar</code>  という名前です。ライブラリは <a href="http://web.archive.org/web/20081119053233/http://colorchooser.dev.java.net/">ここ</a>からダウンロードできます。それをファイルシステム内の任意の場所に保存します。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>次の手順に従って、 <code>ColorChooser.jar</code>  ファイルのためのライブラリラッパーモジュールを作成します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「ファイル」&gt;「新規プロジェクト」を選択します。「カテゴリ」で「NetBeans モジュール」を選択します。プロジェクトで、「ライブラリラッパーモジュール」を選択し、「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「ライブラリを選択」パネルで、「ライブラリ」テキストボックスに  <code>ColorChooser.jar</code>  のパスを入力するか、その場所を参照します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「ライセンス」テキストフィールドは空のままにしておきます。最終成果物の配布を予定している場合は、外部ライブラリのライセンスファイルを含めるようにします。「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「名前と場所」パネルで「プロジェクト名」を入力し、「プロジェクトの場所」を設定します。次に、「モジュールスイートに追加」ドロップダウンに、モジュールがアプリケーションに追加されることが示されていることを確認します。「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>「基本モジュール構成」パネルで、次のように「コード名ベース」に一意の名前を入力し、モジュール表示名とモジュールのローカライズ版バンドルの場所を指定します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/lib-wrap-1.png" alt="lib wrap 1">
</div>
</div>
<div class="paragraph">
<p>「完了」をクリックします。</p>
</div>
<div class="paragraph">
<p>選択した  <code>colorchooser.jar</code>  をラップするモジュールが IDE で作成されます。新しいモジュールの構造は、「プロジェクト」ウィンドウに表示されます。アプリケーションの構造にある「モジュール」ノードは、モジュールがアプリケーションの一部であることを示します。</p>
</div>
</div>
<div class="sect2">
<h3 id="_モジュールの作成">モジュールの作成</h3>
<div class="paragraph">
<p>ここでは、作成する実際のコードを含めるモジュールが必要になります。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「ファイル」&gt;「新規プロジェクト」を選択します。「カテゴリ」で「NetBeans モジュール」を選択します。「プロジェクト」で「モジュール」を選択し、「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「名前と場所」パネルで、「プロジェクト名」に「 <code>Paint</code> 」と入力します。「プロジェクトの場所」を使用コンピュータ上の任意のフォルダに変更します。「モジュールスイートに追加」ラジオボタンが選択され、「モジュールスイート」ドロップダウンリストで  <code>PaintApp</code>  アプリケーションが選択されていることを確認します。「主プロジェクトとして設定」チェックボックスを選択します。「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「基本モジュール構成」パネルで、「 <code>org.netbeans.paint</code> 」と入力します。「モジュール表示名」は  <code>Paint</code>  のままにしておきます。「ローカライズ版バンドル」の場所はそのままにします。「XML レイヤーを生成」を選択し、提案された場所を変更しないと、ローカライズ版バンドルと XML レイヤーファイルは  <code>org.netbeans.paint</code>  という名前のパッケージに格納されます。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>これらのファイルには、次の役割があります。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>*ローカライズ版バンドル。*国際化のための言語固有の文字列を指定します。</p>
</li>
<li>
<p>*XML レイヤー。*NeｔBeans プラットフォームアプリケーションにメニューやツールバーボタンなどの項目を登録します。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>「完了」をクリックします。</p>
</div>
<div class="paragraph">
<p>IDE によって  <code>Paint</code>  プロジェクトが作成されます。このプロジェクトには、ソースや、プロジェクトの Ant 構築スクリプトなどのプロジェクトメタデータがすべて含まれます。IDE でプロジェクトが開きます。「プロジェクト」ウィンドウ (Ctrl-1) で、プロジェクトの論理構造を表示できます。また、「ファイル」ウィンドウ (Ctrl-2) で、プロジェクトのファイル構造を表示できます。たとえば、「プロジェクト」ウィンドウは次のように表示されます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/paintapp-start-1.png" alt="paintapp start 1">
</div>
</div>
<div class="paragraph">
<p>プロジェクトには、ローカライズ版バンドルおよび XML レイヤーのほかに、次の重要なファイルも含まれます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>*モジュールのマニフェスト。*プロジェクトがモジュールであることを宣言します。また、XML レイヤーの場所、ローカライズ版バンドルの場所、モジュールのバージョンなどの、モジュール固有の設定も行います。</p>
</li>
<li>
<p><strong>構築スクリプト。</strong> <code>nbproject/build-impl.xml</code>  内の指定よりも優先される、独自の Ant ターゲットをここに作成できます。</p>
</li>
<li>
<p>*プロジェクトメタデータ。*プロジェクトの種類、内容、プラットフォーム、クラスパス、依存関係、プロジェクトのコマンドと Ant スクリプト内のターゲットのマッピングなどの情報が含まれます。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>このチュートリアルでは、これらの情報を変更する必要はありません。</p>
</div>
</div>
<div class="sect2">
<h3 id="_モジュールの依存関係の指定">モジュールの依存関係の指定</h3>
<div class="paragraph">
<p><a href="http://bits.netbeans.org/dev/javadoc/index.html">NetBeans API</a> に属するいくつかのクラスをサブクラス化する必要があります。また、そのプロジェクトは  <code>ColorChooser.jar</code>  ファイルに依存します。すべての NetBeans API はモジュールによって実装されます。そのため、これらの作業の両方を完成することは、モジュールの実行に必要なモジュールの一覧にいくつかのモジュールを追加することを意味します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「プロジェクト」ウィンドウで、 <code>Paint</code>  プロジェクトノードを右クリックし、「プロパティー」を選択します。「プロジェクトプロパティー」ダイアログが開きます。「カテゴリ」で「ライブラリ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>次の表に表示されている API のそれぞれについて、「依存関係を追加&#8230;&#8203;」をクリックし、「フィルタ」テキストボックスにサブクラス化するクラスの名前の入力を開始します。</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>クラス</strong></th>
<th class="tableblock halign-left valign-top"><strong>API</strong></th>
<th class="tableblock halign-left valign-top"><strong>目的</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ColorChooser</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ColorChooser</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">作成したカラーチューザコンポーネントのライブラリラッパーモジュール</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DataObject</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>データシステム API</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DataObject クラスを含む NetBeans モジュール</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DialogDisplayer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ダイアログ API</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ユーザー通知の作成、ダイアログの説明、およびその表示を可能にします</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AbstractFile</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ファイルシステム API</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">一定の方法でファイルにアクセスする共通の API を提供します</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AbstractNode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ノード API</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NetBeans 内のオブジェクトを視覚化する主機構として機能します</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>StatusDisplayer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>UI ユーティリティー API</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">メインウィンドウのステータスバーの作成に使用される StatusDisplayer クラス</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WeakListeners</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ユーティリティー API</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WeakListeners クラスを含みます</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TopComponent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ウィンドウシステム API</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TopComponent JPanel クラスを含みます</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>上記の表の最初の列には、このチュートリアルでサブクラス化するすべてのクラスが一覧表示されています。それぞれについて、「フィルタ」にクラス名を入力し始めると、「モジュール」リストの表示が絞り込まれます。表の 2 番目の列を使用して、絞り込まれた「モジュール」リストから適切な API (または  <code>ColorChooser</code>  の場合はライブラリ) を選択し、「了解」をクリックして選択を確認します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/libfilter-60.png" alt="libfilter 60">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「了解」をクリックして、「プロジェクトプロパティー」ダイアログを終了します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「プロジェクト」ウィンドウで、Paint モジュールのプロジェクトノードが展開されていない場合は展開します。次に「重要なファイル」ノードを展開し、「プロジェクトメタデータ」ノードをダブルクリックします。選択した API はモジュールの依存関係として宣言されています。</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ペイントキャンバスの作成と埋め込み">ペイントキャンバスの作成と埋め込み</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_キャンバスの作成">キャンバスの作成</h3>
<div class="paragraph">
<p>次の手順では、ユーザーがペイントする実際のコンポーネントを作成します。ここでは、純粋な Swing コンポーネントを使用するため、その実装の詳細は省略し、最終バージョンのみを提供します。ライブラリラッパーモジュールを作成したカラーチューザ Bean が、このパネルのソースコードに使用されます。完成したアプリケーションを実行すると、画像編集用パネルのツールバーでこのカラーチューザ Bean を確認できます。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「プロジェクト」ウィンドウで、「 <code>Paint</code> 」ノード、「ソースパッケージ」ノードを順に展開し、「 <code>org.netbeans.paint</code> 」ノードを右クリックします。「新規」&gt;「Java クラス」を選択します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>クラス名として「 <code>PaintCanvas</code> 」と入力します。パッケージの一覧に  <code>org.netbeans.paint</code>  があることを確認します。「完了」をクリックします。ソースエディタに  <code>PaintCanvas.java</code>  が表示されます。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>このファイルのデフォルトの内容を <a href="https://netbeans.apache.org/platform/guide/tutorials/paintTutorial/PaintCanvas.java">ここ</a>に示す内容で置き換えます。パッケージに  <code>org.netbeans.paint</code>  以外の名前を付けた場合は、ソースエディタでパッケージ名を修正します。</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_topcomponent_クラスの準備">TopComponent クラスの準備</h3>
<div class="paragraph">
<p>ここでは、 <a href="http://bits.netbeans.org/dev/javadoc/index.html">NetBeans API</a> を利用する最初のクラスを作成します。それは  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-windows/org/openide/windows/TopComponent.html">TopComponent</a></code>  クラスです。 <code>TopComponent</code>  クラスは、NetBeans のウィンドウシステムで操作可能な  <code>JPanel</code>  クラスであり、メインウィンドウのタブ付きコンテナ内に配置できます。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「プロジェクト」ウィンドウで、「 <code>Paint</code> 」ノード、「ソースパッケージ」ノードを順に展開し、「 <code>org.netbeans.paint</code> 」ノードを右クリックします。「新規」&gt;「Java クラス」を選択します。
クラス名として「 <code>PaintTopComponent</code> 」と入力します。パッケージの一覧に <code>org.netbeans.paint</code> があることを確認します。「完了」をクリックします。ソースエディタに <code>PaintTopComponent.java</code> が表示されます。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>ファイルの最上部近くにあるクラス宣言を次のように変更します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class PaintTopComponent extends TopComponent implements ActionListener, ChangeListener {</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Ctrl-Shift-I キーを押してインポートを修正し、ダイアログで「了解」をクリックします。このファイルの最上部にある、必要なインポートパッケージの宣言は IDE によって行われます。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>入力したクラス宣言の下に赤い線が表示されます。その行にカーソルを置くと、左側の余白に電球が表示されます。次に示すように、電球をクリックするか、Alt-Enter キーを押します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/lightbulb-60.png" alt="lightbulb 60">
</div>
</div>
<div class="paragraph">
<p>「すべての抽象メソッドの実装」を選択します。IDE によって、2 つのメソッド  <code>actionPerformed()</code>  と  <code>stateChanged()</code>  のスケルトンが生成されます。このチュートリアルでは、あとでこれらの記述を行います。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>次の 3 つの変数の宣言を  <code>PaintTopComponent</code>  クラスの最上部に追加し、インポート文を修正します (Ctrl-Shift-I)。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    private PaintCanvas canvas = new PaintCanvas(); //ユーザーが描画するコンポーネント
    private JComponent preview; //ペイントブラシサイズを示すツールバーのコンポーネント
    private static int ct = 0; //新しい画像の名前を用意するために使用するカウンタ</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>今度は、2 つのボイラープレートメソッドを実装する必要があります。1 つはアプリケーションの停止時に、開いているウィンドウを無視するようにウインドウシステムに指示するものです。もう 1 つは、コンポーネントの一意の文字列 ID 用のベース文字列を提供するものです。各  <code>TopComponent</code>  には、 <code>TopComponent</code>  を保存するときに使用される一意の文字列 ID があります。次の 2 つのメソッドを  <code>PaintTopComponent</code>  クラスに挿入します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    @Override
    public int getPersistenceType() {
        return PERSISTENCE_NEVER;
    }

    @Override
    public String preferredID() {
        return "Image";
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>クラスは次のようになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class PaintTopComponent extends TopComponent implements ActionListener, ChangeListener {

    private PaintCanvas canvas = new PaintCanvas(); //ユーザーが描画するコンポーネント
    private JComponent preview; //ペイントブラシサイズを示すツールバーのコンポーネント
    private static int ct = 0; //新しい画像の名前を用意するために使用するカウンタ

    public PaintTopComponent() {
    }

    @Override
    public void actionPerformed(ActionEvent arg0) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void stateChanged(ChangeEvent arg0) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public int getPersistenceType() {
        return PERSISTENCE_NEVER;
    }

    @Override
    public String preferredID() {
        return "Image";
    }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_topcomponent_クラスの初期化">TopComponent クラスの初期化</h3>
<div class="paragraph">
<p>この節では、ユーザーインタフェースを初期化するコードを追加します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>コンストラクタを定義し、次のインポート文を修正します (Ctrl-Shift-I)。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    public PaintTopComponent() {

        initComponents();

        String displayName = NbBundle.getMessage(
                PaintTopComponent.class,
                "UnsavedImageNameFormat",
                new Object[] { new Integer(ct++) }
        );

        setDisplayName(displayName);

    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>このコードは非常に簡潔です。最初の呼び出しは、まだ作成されていない  <code>initComponents()</code>  メソッドに対するものです。このメソッドは、ツールバーおよび PaintCanvas を  <code>TopComponent</code>  に追加します。このメソッドはまだ作成されていないので、その下に赤い線が表示されています。前と同じように電球をクリックするか Alt-Enter キーを押して、提案を受け入れます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/lightbulb-initcomponents-60.png" alt="lightbulb initcomponents 60">
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>``initComponents()``  メソッドのスケルトンが生成されます。</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「プロジェクト」ウィンドウで  <code>org.netbeans.paint</code>  パッケージを展開します。 <code>Bundle.properties</code>  ファイルをダブルクリックして、ソースエディタで開きます。最後の部分に、次の行を追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    UnsavedImageNameFormat=Image {0}</code></pre>
</div>
</div>
<div class="paragraph">
<p>これは、アプリケーションの新しい画像ファイルを、ユーザーが保存する前に識別するために使用されるテキストを指定します。たとえば、完成したアプリケーションではじめて「New Canvas」をクリックすると、ソースエディタ上に「Image 0」というラベルのタブが表示されます。次に進む前に、このファイルを必ず保存します。</p>
</div>
</div>
<div class="sect2">
<h3 id="_スケルトンメソッドの記入">スケルトンメソッドの記入</h3>
<div class="paragraph">
<p>この節では、アプリケーションのユーザーインタフェースをコーディングします。レイアウトを視覚的にデザインするために、IDE の GUI ビルダーを使用することもできます。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><code>initComponents()</code>  メソッドでコンポーネントをパネルにインストールすると、ユーザーが対話できます。 <code>PaintTopComponent.java</code>  クラスの前の節で、そのスケルトンメソッドを作成しました。そこに、次のように記述します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    private void initComponents() {

        setLayout(new BorderLayout());
        JToolBar bar = new JToolBar();

        ColorChooser fg = new ColorChooser();
        preview = canvas.createBrushSizeView();

        //ツールバーを構築

        //コンポーネントがつぶれないようにする
        Dimension min = new Dimension(32, 32);
        preview.setMaximumSize(min);
        fg.setPreferredSize(new Dimension(16, 16));
        fg.setMinimumSize(min);
        fg.setMaximumSize(min);

        JButton clear = new JButton(
          	    NbBundle.getMessage(PaintTopComponent.class, "LBL_Clear"));

        JLabel fore = new JLabel(
         	    NbBundle.getMessage(PaintTopComponent.class, "LBL_Foreground"));

        fg.addActionListener(this);
        clear.addActionListener(this);

        JSlider js = new JSlider();
        js.setMinimum(1);
        js.setMaximum(24);
        js.setValue(canvas.getDiam());
        js.addChangeListener(this);

        fg.setColor(canvas.getColor());

        bar.add(clear);
        bar.add(fore);
        bar.add(fg);
        JLabel bsize = new JLabel(
     	    NbBundle.getMessage(PaintTopComponent.class, "LBL_BrushSize"));

        bar.add(bsize);
        bar.add(js);
        bar.add(preview);

        JLabel spacer = new JLabel("   "); //ブラシプレビューが
        //ツールバーの端まで広がらない
        //ようにするスペーサ

        spacer.setPreferredSize(new Dimension(400, 24));
        bar.add(spacer);

        //ツールバーおよび描画処理コンポーネントを配置
        add(bar, BorderLayout.NORTH);
        add(canvas, BorderLayout.CENTER);

    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ctrl-Shift-I キーを押して、必要なインポート文を生成します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>生成したほかの 2 つのメソッドにも記述します。これらのメソッドは、 <code>PaintTopComponent</code>  クラスの監視に使用されます。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    public void actionPerformed(ActionEvent e) {

        if (e.getSource() instanceof JButton) {
           canvas.clear();
        } else if (e.getSource() instanceof ColorChooser) {
           ColorChooser cc = (ColorChooser) e.getSource();
           canvas.setPaint (cc.getColor());
        }

        preview.paintImmediately(0, 0, preview.getWidth(), preview.getHeight());

    }</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    public void stateChanged(ChangeEvent e) {

        JSlider js = (JSlider) e.getSource();
        canvas.setDiam (js.getValue());
        preview.paintImmediately(0, 0, preview.getWidth(), preview.getHeight());

    }</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p><code>Bundle.properties</code>  ファイルの最後に、次のキーと値のペアを追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    LBL_Clear = Clear
    LBL_Foreground = Foreground
    LBL_BrushSize = Brush Size</code></pre>
</div>
</div>
<div class="paragraph">
<p>次に進む前に、このファイルを必ず保存します。</p>
</div>
</div>
<div class="sect2">
<h3 id="_ディスクへの画像の保存">ディスクへの画像の保存</h3>
<div class="paragraph">
<p>新しいアプリケーションで、作成した画像を保存できるようにします。次のコードを  <code>PaintTopComponent</code>  クラスに含めると、この機能が有効になります。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>次のコードを  <code>PaintTopComponent</code>  クラスに挿入します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    public void save() throws IOException {

        if (getDisplayName().endsWith(".png")) {
	    doSave(new File(getDisplayName()));
        } else {
	    saveAs();
        }

    }</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    public void saveAs() throws IOException {

        JFileChooser ch = new JFileChooser();
        if (ch.showSaveDialog(this) == JFileChooser.APPROVE_OPTION &amp;amp;&amp;amp; ch.getSelectedFile() != null) {

	    File f = ch.getSelectedFile();

	    if (!f.getPath().endsWith(".png")) {
	        f = new File(f.getPath() + ".png");
	    }

	    if (!f.exists()) {

	        if (!f.createNewFile()) {
		    String failMsg = NbBundle.getMessage(
		             PaintTopComponent.class,
			    "MSG_SaveFailed", new Object[] { f.getPath() }
	            );
		    JOptionPane.showMessageDialog(this, failMsg);
		    return;
	        }

	    } else {
	        String overwriteMsg = NbBundle.getMessage(
		    PaintTopComponent.class,
                    "MSG_Overwrite", new Object[] { f.getPath() }
	        );

	        if (JOptionPane.showConfirmDialog(this, overwriteMsg)
	        != JOptionPane.OK_OPTION) {
		    return;
	        }

	    }

	    doSave(f);

        }

    }</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    private void doSave(File f) throws IOException {

        BufferedImage img = canvas.getImage();
        ImageIO.write(img, "png", f);
        String statusMsg = NbBundle.getMessage(PaintTopComponent.class,
            "MSG_Saved", new Object[] { f.getPath() });
        StatusDisplayer.getDefault().setStatusText(statusMsg);
        setDisplayName(f.getName());

    }</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><code>Bundle.properties</code>  ファイルに次の行を追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    MSG_SaveFailed = Could not write to file {0}
    MSG_Overwrite = {0} exists.  Overwrite?
    MSG_Saved = Saved image to {0}</code></pre>
</div>
</div>
<div class="paragraph">
<p>次に進む前に、このファイルを必ず保存します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Ctrl-Shift-I キーを押して、インポート文を修正します。 <code>File</code>  クラスに 2 つの完全修飾名があることがわかります。 <code>java.io.File</code>  オプションを選択します。</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_new_canvasメニュー項目の作成">「New Canvas」メニュー項目の作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>「モジュールの開発」ファイルテンプレートを使用して、モジュールの機能の基礎を作成します。ファイルテンプレートを使用すると、IDE は作成した項目を  <code>layer.xml</code>  ファイルに登録します。ファイルテンプレートを作成するウィザードを使用したあと、 <a href="https://bits.netbeans.org/dev/javadoc/">NetBeans API</a> を使用してモジュールの開発を継続します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「プロジェクト」ウィンドウで Paint モジュールのプロジェクトノードを右クリックし、「新規」&gt;「その他」を選択します。「新規ファイル」ウィザードで、「カテゴリ」から「モジュールの開発」を選択し、「ファイルの種類」から「アクション」を選択します。「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「アクションの種類」パネルで、デフォルトを受け入れます。「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「GUI 登録」パネルで、「大域メニュー項目」と「大域ツールバーボタン」を選択します。次の値を設定します。</p>
<div class="ulist">
<ul>
<li>
<p><strong>カテゴリ:</strong> 編集</p>
</li>
<li>
<p><strong>メニュー:</strong> ファイル</p>
</li>
<li>
<p><strong>位置:</strong> 任意の場所</p>
</li>
<li>
<p><strong>ツールバー:</strong> ファイル</p>
</li>
<li>
<p><strong>位置:</strong> 任意の場所</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
ファイルのメニュー内およびファイルのツールバー内であれば、アクションはどこに置いてもかまいません。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>画面は次のようになります。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/newcanvasaction-60.png" alt="newcanvasaction 60">
</div>
</div>
<div class="paragraph">
<p>「次へ」をクリックします。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「名前、アイコン、および場所」パネルで、「クラス名」に「 <code>NewCanvasAction</code> 」、「表示名」に「 <code>New Canvas</code> 」と入力します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「アイコン」で、アイコン
image::images/new_icon.png[] を参照します (右クリックして  <code>org.netbeans.paint</code>  フォルダに保存)。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>「完了」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>IDE によって  <code>org.netbeans.paint</code>  に  <code>NewCanvasAction.java</code>  が作成され、ソースエディタに表示されます。次が表示されます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package org.netbeans.paint;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public final class NewCanvasAction implements ActionListener {

    public void actionPerformed(ActionEvent e) {
        // TODO implement action body
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>「GUI 登録」パネルで指定したように、アクションのクラスが IDE によってメニュー項目およびツールバーボタンとして、アイコンおよび表示名に関する情報とともに  <code>layer.xml</code>  ファイルに登録されます。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>ソースエディタで  <code>NewCanvasAction.java</code>  を開き、 <code>performAction()</code>  メソッドに次のように記述します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    public void performAction() {

        PaintTopComponent tc = new PaintTopComponent();
	tc.open();
	tc.requestActive();
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>これを実行すると、単純に画像編集コンポーネントの新しいインスタンスが作成され、メインウィンドウに表示されます。さらに、キーボードフォーカスが移動されてそのタブが選択され、有効化されます。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_save_canvasメニュー項目の作成">「Save Canvas」メニュー項目の作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>前の節では「新規アクション」ウィザードを使用してメニュー項目を作成しました。ここでは画像を保存します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「プロジェクト」ウィンドウで Paint モジュールのプロジェクトノードを右クリックし、「新規」&gt;「その他」を選択します。「新規ファイル」ウィザードで、「カテゴリ」から「モジュールの開発」を選択し、「ファイルの種類」から「アクション」を選択します。「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「アクションの種類」パネルで、デフォルトを受け入れます。「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「GUI 登録」パネルで、「大域メニュー項目」と「大域ツールバーボタン」を選択します。次の値を設定します。</p>
<div class="ulist">
<ul>
<li>
<p><strong>カテゴリ:</strong> 編集</p>
</li>
<li>
<p><strong>メニュー:</strong> ファイル</p>
</li>
<li>
<p><strong>位置:</strong> 任意の場所</p>
</li>
<li>
<p><strong>ツールバー:</strong> ファイル</p>
</li>
<li>
<p><strong>位置:</strong> 任意の場所</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
ファイルのメニュー内およびファイルのツールバー内であれば、アクションはどこに置いてもかまいません。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>「次へ」をクリックします。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「名前、アイコン、および場所」パネルで、「クラス名」に「 <code>SaveCanvasAction</code> 」、「表示名」に「 <code>Save Canvas</code> 」と入力します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「アイコン」に、アイコン
image::images/save_icon.png[] をペーストします (右クリックして  <code>org.netbeans.paint</code>  フォルダに保存)。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>「完了」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>IDE によって  <code>org.netbeans.paint</code>  に  <code>SaveCanvasAction.java</code>  が作成され、ソースエディタに表示されます。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p><code>CallableSystemAction</code>  が拡張され、 <code>PropertyChangeListener</code>  が実装されるように、クラスの署名を変更します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public final class SaveCanvasAction extends CallableSystemAction implements PropertyChangeListener</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>ソースエディタで、 <code>SaveCanvasAction.java</code>  が開いていることを確認し、 <code>performAction()</code>  メソッドに次のように記述します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    @Override
    public void performAction(ActionEvent e) {
        TopComponent tc = TopComponent.getRegistry().getActivated();

        if (tc instanceof PaintTopComponent) {

            try {
                ((PaintTopComponent) tc).saveAs();
            } catch (IOException ioe) {
                ErrorManager.getDefault().notify(ioe);
            }

        } else {

            //Theoretically the active component could have changed
            //between the time the menu item or toolbar button was
            //pressed and when the action was invoked.
            //理論上は可能
            Toolkit.getDefaultToolkit().beep();

        }

    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ctrl-Shift-I キーを押して、必要なインポート文を生成します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fiximports-60.png" alt="fiximports 60">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p><code>CallableSystemAction</code>  クラスで次のようにメソッドを記述します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    @Override
    public String getName() {
        return "Save Canvas";
    }

    @Override
    public HelpCtx getHelpCtx() {
        return null;
    }</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p><code>PropertyChangeListener</code>  で次のように  <code>propertyChange()</code>  メソッドを記述します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    @Override
    public void propertyChange(PropertyChangeEvent evt) {

        if (TopComponent.Registry.PROP_ACTIVATED.equals(evt.getPropertyName())){
	    updateEnablement();
        }

    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>赤い線が表示されたら、Alt-Enter キーを押して、IDE が  <code>SaveCanvasAction</code>  クラスに  <code>updateEnablement()</code>  メソッドを作成できるようにします。</p>
</div>
<div class="paragraph">
<p>次に、 <code>updateEnablement()</code>  メソッドを次のように定義します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    private void updateEnablement() {

        setEnabled(TopComponent.getRegistry().getActivated()
        instanceof PaintTopComponent);

    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>最後に、コンストラクタを次のように定義します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    public SaveCanvasAction() {

        TopComponent.getRegistry().addPropertyChangeListener (
	    WeakListeners.propertyChange(this,
	    TopComponent.getRegistry()));

        updateEnablement();

    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>赤い線が表示されたら、Alt-Enter キーを押して、IDE が  <code>org.openide.util.WeakListeners</code>  をインポートできるようにします。</p>
</div>
<div class="paragraph">
<p>特に興味深いのは、プロパティー変更リスナーを追加するコードです。 <code>TopComponent.Registry</code>  は、システムで開かれているすべての  <code>TopComponents</code>  のレジストリ、つまり開かれているすべてのタブのレジストリです。ここで行いたいことは、その変更の待機と、フォーカスのある対象に応じた、アクションの有効化または無効化です。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
プロパティー変更リスナーを直接接続するのではなく、 <code>WeakListeners.propertyChange()</code>  を呼び出します。これを実行すると、アクションを弱参照するプロパティー変更リスナーが生成されます。実際には、アプリケーションが開かれているかぎりこのアクションは存続します。リスナーを接続していて、切り離すコードが存在しない場合は、弱参照リスナーを使用するほうが良く、また将来の保証があります。そうでない場合、メモリーリークが発生する可能性があります。レジストリがリスナーのリスト内にアクションの参照を保持しているため、アクションに対するガベージコレクションが行われません。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>「プロジェクト」ウィンドウには、次のように表示されます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/final-paint-module.png" alt="final paint module">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_最後の仕上げ">最後の仕上げ</h2>
<div class="sectionbody">
<div class="paragraph">
<p>もちろん、作成するのはよく微調整されたアプリケーションです。そのために実行できる最終手順がいくつかあります。まず、アプリケーション用のスプラッシュ画面を作成し、配布用 ZIP および JNLP アプリケーションを作成します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><code>PaintApp</code>  プロジェクトを実行します。アプリケーションが起動したら、メイン画面のサイズをかなり小さくして、スプラッシュ画面を描画します。「保存」ボタンを使用して、スプラッシュ画面を保存します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>元のプロジェクトで、 <code>PaintApp</code>  ノードを右クリックして「プロパティー」を選択し、「プロジェクトプロパティー」ダイアログで「構築」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「スタンドアロンアプリケーションを作成」を選択します。「ブランド名」(IDE によって生成される起動ツール名になる) および「アプリケーションタイトル」(アプリケーションのタイトルバーに表示される) を指定できます。デフォルトでは、次のように表示されます。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/splashscreen1-60.png" alt="splashscreen1 60">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「スプラッシュ画面」をクリックします。スプラッシュ画面を参照します。スプラッシュ画面がない場合は、 <a href="https://netbeans.apache.org/platform/images/tutorials/paintapp/splash.gif">これ</a>を使用できます。「了解」をクリックし、アプリケーションに接続します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/splashscreen-60.png" alt="splashscreen 60">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Paint モジュールの  <code>layer.xml</code>  ファイルで、「メニュー」フォルダ内の次のタグを追加します。これらのタグによって、Paint アプリケーションには不要な「移動」および「表示」のメニューが削除されます。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;file name="GoTo_hidden"/&gt;
&lt;file name="View_hidden"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>また、前述のタグを手動で追加する代わりに、 <code>layer.xml</code>  ファイルの「 <code>&lt;コンテキスト内のこのレイヤー&gt;</code> 」ノード内にあるフォルダを削除できます。これを行うには、「 <code>&lt;コンテキスト内のこのレイヤー&gt;</code> 」を展開し、「メニュバー」ノードを展開します。「移動」および「表示」ノードの右クリックメニューから「削除」を選択します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>最後に、もう一度アプリケーションを実行し、スプラッシュ画面を確認します。アプリケーションが起動したら、タイトルバーに指定したタイトルが表示されていることを確認します。また、次のように、メニュー項目、ツールバーボタン、およびその他の機能も少なくなっています。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/result-without-menus-60.png" alt="result without menus 60">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_配布用の作成">配布用の作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ここで、配布用メディアを選択します。 <code>PaintApp</code>  ノードを右クリックして「配布用 ZIP を作成」を選択し、必要なモジュールとファイルをすべて含むアプリケーション全体を zip ファイルとしてパッケージ化します。また、「JNLP アプリケーションを構築」を選択し、Web サーバーに配置して Web ページから直接リンクできる、アプリケーションの JavaWebStart™ バージョンを作成することもできます。これには正しい URL を設定する必要があります。生成された記述子は file: プロトコルを使用するため、ローカルで Web から起動できる配布版をテストできます。</p>
</div>
<div class="paragraph">
<p>以上でチュートリアルは終了です。NetBeans プラットフォーム上での最初のアプリケーションの構築が完了しました。次は、 <a href="https://netbeans.apache.org/tutorials/nbm-feedreader.html">NetBeans プラットフォームフィードリーダーのチュートリアル</a>です。</p>
</div>
<div class="paragraph">
<p><a href="http://netbeans.apache.org/community/mailing-lists.html">ご意見をお寄せください</a></p>
</div>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/67/nbm-paintapp_ja.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1><a href="/about/index.html">About</a></h1>
                <ul>
                    <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb110/nb110.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="/plugins/index.html">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2020 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
