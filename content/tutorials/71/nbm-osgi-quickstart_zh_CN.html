
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>在 NetBeans 平台中使用 OSGi 的快速入门</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="在 NetBeans 平台中使用 OSGi 的快速入门 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, 在 NetBeans 平台中使用 OSGi 的快速入门">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">在 NetBeans 平台中使用 OSGi 的快速入门</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/71/nbm-osgi-quickstart_zh_CN.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_设置环境">设置环境</a></li>
<li><a href="#_创建应用程序">创建应用程序</a></li>
<li><a href="#_导入_osgi_包">导入 OSGi 包</a></li>
<li><a href="#_运行应用程序">运行应用程序</a></li>
<li><a href="#_深入阅读">深入阅读</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>本文档快速演示了如何将 OSGi 包集成到 NetBeans 平台应用程序中。</p>
</div>
<div class="paragraph">
<p>本教程重点介绍一个基于 <a href="http://www.aqute.biz/Code/Download#sudoku">由 Peter Kriens 开发的 Sudoku 游戏</a>的 "hello world" 方案。您需要导入构成 Sudoku 游戏的 OSGi 包，以及所需的相关 Equinox 包。在部署该应用程序之后，Web 浏览器中会显示以下应用程序：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="http://netbeans.dzone.com/sites/all/files/sudokugame-4.png" alt="sudokugame 4">
</div>
</div>
<div class="paragraph">
<p>在学完此简单方案后，本教程结尾的“深入阅读”部分还列出了更多有用的方案。</p>
</div>
<div class="paragraph">
<p>*注意：*为开发适用于 NetBeans 平台的应用程序，您无需下载该平台的独立版本。通常，您是在 NetBeans IDE 中开发应用程序和模块，并且只包含运行 NetBeans 平台和您的应用程序所需的模块。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_设置环境">设置环境</h2>
<div class="sectionbody">
<div class="paragraph">
<p>除了下载上面列出的软件以外，您还需要执行一些步骤来准备您的环境，如下所述。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在您磁盘上的文件系统中创建一个新文件夹。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>将 Equinox 分发中的以下文件存放在该文件夹中：</p>
<div class="ulist">
<ul>
<li>
<p>javax.servlet_xxx.jar</p>
</li>
<li>
<p>org.eclipse.equinox.ds_xxx.jar</p>
</li>
<li>
<p>org.eclipse.equinox.http_xxx.jar</p>
</li>
<li>
<p>org.eclipse.equinox.util_xxx.jar</p>
</li>
<li>
<p>org.eclipse.osgi.services_xxx.jar</p>
</li>
<li>
<p>org.eclipse.osgi_xxx.jar</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>将下面两个 Sudoku JAR 也存放在上述 JAR 所在的文件夹中：</p>
<div class="ulist">
<ul>
<li>
<p>aQute.sudoku.jar</p>
</li>
<li>
<p>aQute.webrpc.jar</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>现在，您已将要导入的 OSGi 包集中存放在一个位置，从该位置可以将这些包集成到应用程序中。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_创建应用程序">创建应用程序</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在准备好所有必需的 OSGi 包之后，请按照下面所述创建新的 NetBeans 平台应用程序。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>选择“文件”|“新建项目”，然后选择通过 Equinox 模板创建基于 Equinox 的 NetBeans 平台应用程序：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="http://netbeans.dzone.com/sites/all/files/sudokugame-5.png" alt="sudokugame 5">
</div>
</div>
<div class="paragraph">
<p>单击“下一步”。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>为该应用程序指定名称，如下所示。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="http://netbeans.dzone.com/sites/all/files/sudokugame-3.png" alt="sudokugame 3">
</div>
</div>
<div class="paragraph">
<p>单击“完成”。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>您可以运行通过上述模板生成的应用程序，随即您会看到包含一个窗口的应用程序，其中显示了构成应用程序的所有 NetBeans 模块和 OSGi 包。</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_导入_osgi_包">导入 OSGi 包</h2>
<div class="sectionbody">
<div class="paragraph">
<p>除了下载上面列出的软件以外，您还需要执行一些步骤来准备您的环境，如下所述。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在“项目”窗口中右键单击该应用程序，选择“属性”，转至“库”标签，单击“添加群集”，然后浏览到上述 JAR 所在的文件夹。随即会打开一个向导，以便您将这些 JAR 转换为一个“群集”（即一组将被合并到应用程序中的相关模块/包）。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="http://netbeans.dzone.com/sites/all/files/sudokugame-1.png" alt="sudokugame 1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>如上所示，将所有导入的 OSGi 包设置为“启用”，以便在应用程序启动时可以装入并使用这些包。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>单击“完成”后，将会更新 "platform.properties" 配置文件。它应该与以下内容类似：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">cluster.path.extra=netbinox:\../../path/to/my/nbsudokugame/folder
disabled.modules.extra=org.netbeans.libs.felix
cluster.path=\
    ${nbplatform.active.dir}/harness:\
    ${nbplatform.active.dir}/platform:\
    ${cluster.path.extra}
disabled.modules=\
    org.jdesktop.layout,\
    org.netbeans.api.visual,\
    org.netbeans.core.execution,\
    org.netbeans.core.multiview,\
    org.netbeans.insane,\
    org.netbeans.libs.felix,\
    org.netbeans.libs.jsr223,\
    org.netbeans.modules.apisupport.harness,\
    org.netbeans.modules.apisupport.tc.cobertura,\
    org.netbeans.modules.autoupdate.services,\
    org.netbeans.modules.autoupdate.ui,\
    org.netbeans.modules.core.kit,\
    org.netbeans.modules.favorites,\
    org.netbeans.modules.jellytools.platform,\
    org.netbeans.modules.jemmy,\
    org.openide.compat,\
    org.openide.execution,\
    org.openide.options,\
    org.openide.util.enumerations
nbplatform.active=default</code></pre>
</div>
</div>
<div class="paragraph">
<p>*注意：*上面的第一行指向您之前创建的文件夹。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>然后，将以下代码行添加到应用程序的 "project.properties" 配置文件中，该代码指定将不显示闪屏，并且还指定了用于部署应用程序的端口：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">run.args.extra=--nosplash -J-Dorg.osgi.service.http.port=8080</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_运行应用程序">运行应用程序</h2>
<div class="sectionbody">
<div class="paragraph">
<p>现在，该应用程序已准备就绪，可以按照如下所述进行部署。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>运行应用程序！随即会部署应用程序中的所有 OSGi 包和 NetBeans 模块。同时，还会部署用于查看已部署的 OSGi 包和 NetBeans 模块的应用程序，最终提供的桌面应用程序可使您非常方便地监视当前已部署的项目：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="http://netbeans.dzone.com/sites/all/files/sudokugame-6_0.png" alt="sudokugame 6 0">
</div>
</div>
<div class="paragraph">
<p>或者，也可以删除提供上述窗口的整个模块。然后，删除上述窗口需要的所有模块，即删除窗口系统、操作系统及其他所有内容，但 OSGi 集成所需的一些 JAR 除外，这些 JAR 包括：引导、启动、文件系统、模块系统、实用程序和查找。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">cluster.path.extra=netbinox:\../../path/to/my/nbsudokugame/folder
disabled.modules.extra=org.netbeans.libs.felix
cluster.path=\
    ${nbplatform.active.dir}/harness:\
    ${nbplatform.active.dir}/platform:\
    ${cluster.path.extra}
disabled.modules=\
    org.jdesktop.layout,\
    org.netbeans.api.annotations.common,\
    org.netbeans.api.progress,\
    org.netbeans.api.visual,\
    org.netbeans.core,\
    org.netbeans.core.execution,\
    org.netbeans.core.io.ui,\
    org.netbeans.core.multiview,\
    org.netbeans.core.nativeaccess,\
    org.netbeans.core.output2,\
    org.netbeans.core.ui,\
    org.netbeans.core.windows,\
    org.netbeans.insane,\
    org.netbeans.libs.felix,\
    org.netbeans.libs.jna,\
    org.netbeans.libs.jsr223,\
    org.netbeans.libs.junit4,\
    org.netbeans.modules.apisupport.harness,\
    org.netbeans.modules.apisupport.tc.cobertura,\
    org.netbeans.modules.applemenu,\
    org.netbeans.modules.autoupdate.services,\
    org.netbeans.modules.autoupdate.ui,\
    org.netbeans.modules.core.kit,\
    org.netbeans.modules.editor.mimelookup,\
    org.netbeans.modules.editor.mimelookup.impl,\
    org.netbeans.modules.favorites,\
    org.netbeans.modules.javahelp,\
    org.netbeans.modules.jellytools.platform,\
    org.netbeans.modules.jemmy,\
    org.netbeans.modules.keyring,\
    org.netbeans.modules.masterfs,\
    org.netbeans.modules.nbjunit,\
    org.netbeans.modules.options.api,\
    org.netbeans.modules.options.keymap,\
    org.netbeans.modules.print,\
    org.netbeans.modules.progress.ui,\
    org.netbeans.modules.queries,\
    org.netbeans.modules.sendopts,\
    org.netbeans.modules.settings,\
    org.netbeans.modules.spi.actions,\
    org.netbeans.spi.quicksearch,\
    org.netbeans.swing.outline,\
    org.netbeans.swing.plaf,\
    org.netbeans.swing.tabcontrol,\
    org.openide.actions,\
    org.openide.awt,\
    org.openide.compat,\
    org.openide.dialogs,\
    org.openide.execution,\
    org.openide.explorer,\
    org.openide.io,\
    org.openide.loaders,\
    org.openide.nodes,\
    org.openide.options,\
    org.openide.text,\
    org.openide.util.enumerations,\
    org.openide.windows
nbplatform.active=default</code></pre>
</div>
</div>
<div class="paragraph">
<p>然后，您将获得一个非常适合进行模块化 Web 开发的非 GUI 应用程序（即服务器应用程序）。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>现在，在浏览器中输入以下 URL（可选，使用 NetBeans UI 实用程序 API 中的 URLDisplayer.getDefault() 以编程方式在所需的位置打开浏览器），随即会部署 Sudoku 游戏中定义的 "index.html" 并将其显示在浏览器中，接下来您便可以开始玩 Suduko 游戏：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">http://localhost:8080/rpc/sudoku/index.html</code></pre>
</div>
</div>
<div class="paragraph">
<p>恭喜！您已将第一批 OSGi 包集成到了 NetBeans 平台应用程序中。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_深入阅读">深入阅读</h2>
<div class="sectionbody">
<div class="paragraph">
<p>现在，您已经学完了本教程并了解了在 NetBeans 平台应用程序中重用 OSGi 包所需执行的步骤，接下来可以参阅以下相关文档和更高级的方案：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.osgi.org/blog/2006_09_01_archive.html">Peter Kriens 和 Sudoku 游戏</a></p>
</li>
<li>
<p><a href="http://wiki.apidesign.org/wiki/NetbinoxTutorial">Jaroslav Tulach 和 Netbinox</a></p>
</li>
<li>
<p>Toni Epple 的 OSGi/NetBeans  <a href="http://eppleton.sharedhost.de/blog/?p=662">博客文章</a>和 <a href="http://eppleton.sharedhost.de/blog/?s=Frankenstein%27s+IDE">演示</a></p>
</li>
<li>
<p>Gunnar Reinseth 的 NetBeans 与 EMF 集成（ <a href="http://eclipse.dzone.com/emf-on-netbeans-rcp">第 1 部分</a>， <a href="http://eclipse.dzone.com/emf-on-netbeans-rcp-2">第 2 部分</a>）</p>
</li>
<li>
<p>还可以阅读  <a href="http://java.dzone.com/news/new-cool-tools-osgi-developers">OSGi 开发者的新炫酷工具</a></p>
</li>
</ul>
</div>
</div>
</div>
        
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/71/nbm-osgi-quickstart_zh_CN.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
