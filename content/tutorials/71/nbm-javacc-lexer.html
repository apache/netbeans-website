
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>JavaCC Lexer Generator Integration Tutorial for NetBeans Platform 7.1</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="JavaCC Lexer Generator Integration Tutorial for NetBeans Platform 7.1 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, JavaCC Lexer Generator Integration Tutorial for NetBeans Platform 7.1">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="/plugins/index.html">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Just released!</div>
            <h1 syle='font-size: 2rem'>Apache NetBeans 11.3</h1>
            <p><a class="button success" href="/download/nb113/index.html">Find out more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">JavaCC Lexer Generator Integration Tutorial for NetBeans Platform 7.1</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/71/nbm-javacc-lexer.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_creating_the_module">Creating the Module</a></li>
<li><a href="#_recognizing_sj_files">Recognizing SJ Files</a></li>
<li><a href="#_generating_a_lexer_from_javacc">Generating a Lexer from JavaCC</a></li>
<li><a href="#_integrating_the_javacc_lexer_with_netbeans_apis">Integrating the JavaCC Lexer with NetBeans APIs</a></li>
<li><a href="#_registering_the_netbeans_lexer">Registering the NetBeans Lexer</a></li>
<li><a href="#_defining_tokens_and_assigning_colors">Defining Tokens and Assigning Colors</a></li>
<li><a href="#_next_steps">Next Steps</a></li>
<li><a href="#_appendix">Appendix</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial shows you how to generate a lexer with  <a href="https://javacc.github.io/javacc//">JavaCC</a> and use it to create editor features for applications created on top of the NetBeans Platform.</p>
</div>
<div class="paragraph">
<p>Though some explanations of JavaCC are given in this tutorial, the focus here is not on JavaCC as such. For background information and a thorough understanding of JavaCC, see the related website. The intended audience of this tutorial is the JavaCC user who would like to integrate a generated JavaCC lexer into NetBeans Platform applications. JavaCC is discussed only in so far as it is needed to set up a scenario for using the related NetBeans APIs.</p>
</div>
<div class="paragraph">
<p>This tutorial is the official version of the first part of  <a href="http://wiki.netbeans.org/How_to_create_support_for_a_new_language">http://wiki.netbeans.org/How_to_create_support_for_a_new_language</a>, which, aside from being a rough draft, is partly obsolete and out of date for NetBeans Platform 7.1.</p>
</div>
<div class="paragraph">
<p>A basic overview of the steps to be taken during the instructions that follow can be seen here:</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>JavaCC is a generator for Java lexers and Java parsers. A Java lexer and parser generator is a tool that reads a grammar specification and converts it to a Java program that can recognize matches to the grammar.</p>
</div>
<div class="paragraph">
<p>This tutorial focuses specifically on lexers. Lexical analysis, or "lexing", is the process of converting a sequence of characters into a sequence of tokens. Functionality that performs lexical analysis is called a lexical analyzer, a lexer, or a scanner. In this tutorial, the term "lexer" will be used. A lexer typically exists as a single function called by a parser. For example, while a typical lexer recognizes parentheses as tokens, it does nothing to ensure that an opening parentheses is matched by a closing parentheses, which is a task for a parser.</p>
</div>
<div class="paragraph">
<p>Part 2 of this tutorial, the  <a href="nbm-javacc-parser.html">JavaCC Parser Generator Integration Tutorial</a>, shows you how to create a parser that parses the same text that the lexer in this tutorial lexes.</p>
</div>
<div class="paragraph">
<p>The NetBeans Platform provides hooks for integrating a lexer into your own Java desktop application on the NetBeans Platform. For example, in this tutorial, you use a sample grammar specification provided by JavaCC to generate a lexer and use it to create syntax coloring in an editor for a simplified Java language defined by the sample grammar specification:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/result-1.png" alt="result 1">
</div>
</div>
<div class="paragraph">
<p>Users of your editor will be able to customize syntax colors via the Options window in the application:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/result-2.png" alt="result 2">
</div>
</div>
<div class="paragraph">
<p>The source code you will have by the end of this tutorial will be as follows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/lexer-5.png" alt="lexer 5">
</div>
</div>
<div class="paragraph">
<p>The principles you learn in this tutorial should help you integrate a JavaCC-based lexer of your own.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_module">Creating the Module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we use a wizard to create the source structure that every NetBeans module requires. The source structure consists of certain folders in specific places and a set of files that are always needed. For example, every NetBeans module requires a  <code>nbproject</code>  folder, which holds the project&#8217;s metadata.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Choose File &gt; New Project (Ctrl-Shift-N). Under Categories, select NetBeans Modules. Under Projects, select Module. Click Next.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
In the Name and Location panel, type  <code>SimpleJava</code>  in Project Name. Change the Project Location to any directory on your computer. Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the Basic Module Configuration panel, type  <code>org.simplejava</code>  as the Code Name Base. Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The IDE creates the  <code>SimpleJava</code>  project:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/code-1.png" alt="code 1">
</div>
</div>
<div class="paragraph">
<p>The project contains all of your sources and project metadata, such as the project&#8217;s Ant build script. The project opens in the IDE. You can view its logical structure in the Projects window (Ctrl-1) and its file structure in the Files window (Ctrl-2).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_recognizing_sj_files">Recognizing SJ Files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we use a wizard to create the classes necessary for recognizing "SimpleJava" files, for which we will create the new "text/x-sj" MIME type, which will recognize files with ".sj" as their file extension.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the project node and choose New &gt; Other &gt; Module Development &gt; File Type.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the File Recognition panel, do the following:</p>
<div class="ulist">
<ul>
<li>
<p>Type  <code>text/x-sj</code>  in the MIME Type edit box.</p>
</li>
<li>
<p>Type  <code>.sj .SJ</code>  in the by Filename Extension edit box.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The File Recognition panel should now look as follows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/code-2.png" alt="code 2">
</div>
</div>
<div class="paragraph">
<p>Note the following about the fields in the File Recognition panel:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>MIME Type.</strong> Specifies the data object&#8217;s unique MIME type.</p>
</li>
<li>
<p><strong>Filename Extension.</strong> Specifies one or more file extensions that the IDE will recognize as belonging to the specified MIME type. The file extension can optionally be preceded by a dot. Separators are commas, spaces, or both. Therefore, all of the following are valid:</p>
</li>
<li>
<p><code>.abc,.def</code></p>
</li>
<li>
<p><code>.abc .def</code></p>
</li>
<li>
<p><code>abc def</code></p>
</li>
<li>
<p><code>abc,.def ghi, .wow</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s imagine that SJ files are not case-sensitive. For this reason, you specify <em>two</em> file extensions in this tutorialâ€” <code>.sj</code>  and  <code>.SJ</code> .</p>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the Name and Location panel, type  <code>Abc</code>  as the Class Name Prefix and browse to any 16x16 pixel image file as the new file type&#8217;s icon, as shown below.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/code-3.png" alt="code 3">
</div>
</div>
<div class="paragraph">
<p><strong>Note:</strong> You can use any icon of a 16x16 pixel dimension. If you like, you can right-click on this one and save it locally, and then specify it in the wizard step above:
image::images/JavaIcon.gif[]</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The Projects window should now look as follows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/code-4.png" alt="code 4">
</div>
</div>
<div class="paragraph">
<p>Each of the newly generated files is briefly introduced:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SJDataObject.java.</strong> Represents one or more file types, letting you parse and process the underlying file content. For more information, see  <a href="https://netbeans.apache.org/wiki/devfaqdataobject">What is a DataObject?</a>.</p>
</li>
<li>
<p><strong>SJResolver.xml.</strong> Maps the  <code>.sj</code>  and  <code>.SJ</code>  extensions to the MIME type. The MIME type resolver, uses  <a href="http://bits.netbeans.org/dev/javadoc/org-openide-filesystems/org/openide/filesystems/doc-files/resolverDocumentation.html">these</a> rules to determine whether a file is recognized.</p>
</li>
<li>
<p><strong>SJTemplate.sj.</strong> Provides the basis of a file template that is registered in the system via the  <code>package-info.java</code>  class, which has been generated into the module as can be seen in the screenshot above, such that it will be installed in the New File dialog as a new template.</p>
</li>
<li>
<p><strong>SJVisualElement.java.</strong> Is a  <code>JPanel</code>  annotated such that it will integrate into your editor for the  <code>text/x-sj</code>  file type, providing a first visual panel. Copy it and tweak its annotations to begin creating additional visual panels.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the  <code>layer.xml</code>  file, you should see the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;folder name="Loaders"&gt;
    &lt;folder name="text"&gt;
        &lt;folder name="x-sj"&gt;
            &lt;folder name="Actions"&gt;
                &lt;file name="org-openide-actions-CopyAction.shadow"&gt;
                    &lt;attr name="originalFile" stringvalue="Actions/Edit/org-openide-actions-CopyAction.instance"/&gt;
                    &lt;attr name="position" intvalue="400"/&gt;
                &lt;/file&gt;
                &lt;file name="org-openide-actions-CutAction.shadow"&gt;
                    &lt;attr name="originalFile" stringvalue="Actions/Edit/org-openide-actions-CutAction.instance"/&gt;
                    &lt;attr name="position" intvalue="300"/&gt;
                &lt;/file&gt;
                &lt;file name="org-openide-actions-DeleteAction.shadow"&gt;
                    &lt;attr name="originalFile" stringvalue="Actions/Edit/org-openide-actions-DeleteAction.instance"/&gt;
                    &lt;attr name="position" intvalue="600"/&gt;
                &lt;/file&gt;
                &lt;file name="org-openide-actions-FileSystemAction.shadow"&gt;
                    &lt;attr name="originalFile" stringvalue="Actions/System/org-openide-actions-FileSystemAction.instance"/&gt;
                    &lt;attr name="position" intvalue="1100"/&gt;
                &lt;/file&gt;
                &lt;file name="org-openide-actions-OpenAction.shadow"&gt;
                    &lt;attr name="originalFile" stringvalue="Actions/System/org-openide-actions-OpenAction.instance"/&gt;
                    &lt;attr name="position" intvalue="100"/&gt;
                &lt;/file&gt;
                &lt;file name="org-openide-actions-PropertiesAction.shadow"&gt;
                    &lt;attr name="originalFile" stringvalue="Actions/System/org-openide-actions-PropertiesAction.instance"/&gt;
                    &lt;attr name="position" intvalue="1400"/&gt;
                &lt;/file&gt;
                &lt;file name="org-openide-actions-RenameAction.shadow"&gt;
                    &lt;attr name="originalFile" stringvalue="Actions/System/org-openide-actions-RenameAction.instance"/&gt;
                    &lt;attr name="position" intvalue="700"/&gt;
                &lt;/file&gt;
                &lt;file name="org-openide-actions-SaveAsTemplateAction.shadow"&gt;
                    &lt;attr name="originalFile" stringvalue="Actions/System/org-openide-actions-SaveAsTemplateAction.instance"/&gt;
                    &lt;attr name="position" intvalue="900"/&gt;
                &lt;/file&gt;
                &lt;file name="org-openide-actions-ToolsAction.shadow"&gt;
                    &lt;attr name="originalFile" stringvalue="Actions/System/org-openide-actions-ToolsAction.instance"/&gt;
                    &lt;attr name="position" intvalue="1300"/&gt;
                &lt;/file&gt;
                &lt;file name="sep-1.instance"&gt;
                    &lt;attr name="instanceClass" stringvalue="javax.swing.JSeparator"/&gt;
                    &lt;attr name="position" intvalue="200"/&gt;
                &lt;/file&gt;
                &lt;file name="sep-2.instance"&gt;
                    &lt;attr name="instanceClass" stringvalue="javax.swing.JSeparator"/&gt;
                    &lt;attr name="position" intvalue="500"/&gt;
                &lt;/file&gt;
                &lt;file name="sep-3.instance"&gt;
                    &lt;attr name="instanceClass" stringvalue="javax.swing.JSeparator"/&gt;
                    &lt;attr name="position" intvalue="800"/&gt;
                &lt;/file&gt;
                &lt;file name="sep-4.instance"&gt;
                    &lt;attr name="instanceClass" stringvalue="javax.swing.JSeparator"/&gt;
                    &lt;attr name="position" intvalue="1000"/&gt;
                &lt;/file&gt;
                &lt;file name="sep-5.instance"&gt;
                    &lt;attr name="instanceClass" stringvalue="javax.swing.JSeparator"/&gt;
                    &lt;attr name="position" intvalue="1200"/&gt;
                &lt;/file&gt;
            &lt;/folder&gt;
            &lt;folder name="Factories"&gt;
                &lt;file name="SJDataLoader.instance"&gt;
                    &lt;attr name="dataObjectClass" stringvalue="org.simplejava.SJDataObject"/&gt;
                    &lt;attr name="iconBase" stringvalue="org/simplejava/JavaIcon.gif"/&gt;
                    &lt;attr name="instanceCreate" methodvalue="org.openide.loaders.DataLoaderPool.factory"/&gt;
                    &lt;attr name="mimeType" stringvalue="text/x-sj"/&gt;
                &lt;/file&gt;
            &lt;/folder&gt;
        &lt;/folder&gt;
    &lt;/folder&gt;
&lt;/folder&gt;
&lt;folder name="Services"&gt;
    &lt;folder name="MIMEResolver"&gt;
        &lt;file name="SJResolver.xml" url="SJResolver.xml"&gt;
            &lt;attr name="displayName" bundlevalue="org.simplejava.Bundle#Services/MIMEResolver/SJResolver.xml"/&gt;
        &lt;/file&gt;
    &lt;/folder&gt;
&lt;/folder&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Each  <code>&lt;file&gt;</code>  under  <code>&lt;folder name="Actions"&gt;</code>  associates the files of the  <code>text/x-sj</code>  mime type with one of the predefined actions provided by the NetBeans Platform. A " <code>.shadow</code> " file means that the action specification is actually somewhere else in the NetBeans virtual filesystem, as specified by the  <code>originalFile</code>  attribute. To add more actions for SJ files, see the  <a href="https://netbeans.apache.org/tutorials/nbm-filetype.html">File Type Integration Tutorial</a>.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Right-click the module and choose Run. The application starts up, installing your module. Go to the Favorites window (Ctrl-3) and open a few files on computer that have ".sj" as their file extension.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You should see your icon is shown for the file type, the Actions registered in the  <code>layer.xml</code>  are shown when you right-click the file in the Favorites window, and three tabs are shown in the editor (the source tab, the visual tab created above, and the history tab):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/code-5.png" alt="code 5">
</div>
</div>
<div class="paragraph">
<p>Create a new Java project and then go to the New File dialog, where you should see that your template has been registered:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/code-6.png" alt="code 6">
</div>
</div>
<div class="paragraph">
<p>You now have a basic file type recognition infrastructure set up. In the next section, we generate a lexer via JavaCC and then use it to add syntax coloring for the SJ file type.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_generating_a_lexer_from_javacc">Generating a Lexer from JavaCC</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s now use JavaCC to generate a lexer!</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Download "javacc-4.0.zip" from "https://javacc.dev.java.net" and unpack it to a folder somewhere in your computer, named, for example, "/myjavacc40":</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/javacc-1.png" alt="javacc 1">
</div>
</div>
<div class="paragraph">
<p>In this section, for purposes of this example, we will use the grammar specified in the  <code>Java1.5.jj</code>  file, together with the  <code>Token.java</code>  file from the example</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/javacc-2.png" alt="javacc 2">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can try to use a different version of JavaCC, but there could be a differences in the generated files making the result incompatible with the sections that follow.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Create a new package named  <code>org.simplejava.jcclexer</code>  in your project. Copy the two files mentioned above,  <code>Java1.5.jj</code>  and  <code>Token.java</code> , into the new package:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/javacc-3.png" alt="javacc 3">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The  <code>Token</code>  class does not yet compile because the class it references,  <code>JavaParserConstants</code> , does not yet exist. It will be generated at the end of this section of the tutorial by JavaCC and at that stage the  <code>Token</code>  class will compile.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We&#8217;re now going to tweak the  <code>Java1.5.jj</code>  file so that it fits our specific needs.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Firstly, we need to make sure that the classes that JavaCC will generate for us will be generated into the correct package, that is, the package where we copied the two files above. Add "package org.simplejava.jcclexer;" to  <code>Java1.5.jj</code>  file after the "PARSER_BEGIN(JavaParser)" line, so that the files will be generated in the correct package:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">PARSER_BEGIN(JavaParser)

*package org.simplejava.jcclexer;*

import java.io.*;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>The  <code>Java1.5.jj</code>  file contains the descriptions of tokens for the Java parser. That&#8217;s nearly what we need for our own Java lexer, though there are some differences. The lexer defined for the parser hides some types of tokens, such as comments and whitespaces. However, we need to see such tokens in the NetBeans lexer because we want to define special colors for comments. Therefore, we need to change that in our JavaCC file.</p>
<div class="ulist">
<ul>
<li>
<p>Change:</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">SKIP :
{
  " "
| "\t"
| "\n"
| "\r"
| "\f"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">TOKEN :
{
  &lt; WHITESPACE:
  " "
| "\t"
| "\n"
| "\r"
| "\f"&gt;
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>For the same reason, change all SPECIAL_TOKEN definitions:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">SPECIAL_TOKEN :
{
  &lt;SINGLE_LINE_COMMENT: "//" (~["\n","\r"])* ("\n" | "\r" | "\r\n")?&gt;
}

&lt;IN_FORMAL_COMMENT&gt;
SPECIAL_TOKEN :
{
  &lt;FORMAL_COMMENT: "*/" &gt; : DEFAULT
}

&lt;IN_MULTI_LINE_COMMENT&gt;
SPECIAL_TOKEN :
{
  &lt;MULTI_LINE_COMMENT: "*/" &gt; : DEFAULT
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>to TOKEN definitions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">TOKEN :
{
  &lt;SINGLE_LINE_COMMENT: "//" (~["\n","\r"])* ("\n" | "\r" | "\r\n")?&gt;
}

&lt;IN_FORMAL_COMMENT&gt;
TOKEN :
{
  &lt;FORMAL_COMMENT: "*/" &gt; : DEFAULT
}

&lt;IN_MULTI_LINE_COMMENT&gt;
TOKEN :
{
  &lt;MULTI_LINE_COMMENT: "*/" &gt; : DEFAULT
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Because we will use our  <code>Java1.5.jj</code>  grammar file to create a lexer only, we can simplify it. Add this line, which sets the BUILD_PARSER property to false:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">options {
  JAVA_UNICODE_ESCAPE = true;
  ERROR_REPORTING = false;
  STATIC = false;
  JDK_VERSION = "1.5";
  *BUILD_PARSER = false;*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Part of the  <code>Java1.5.jj</code>  file is obsolete for our purposes, so let&#8217;s delete some sections. Firstly, keep the PARSER_BEGIN and PARSER_END sections, but delete the JavaParser class body, so that you&#8217;re left with exactly this:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">PARSER_BEGIN(JavaParser)

package org.simplejava.jcclexer;

public class JavaParser {}

PARSER_END(JavaParser)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Though the parser start and end lines remain, the body of the class should now be empty and have exactly the content shown above.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Also delete everything from these lines down to the end of the file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">/*****************************************
 * THE JAVA LANGUAGE GRAMMAR STARTS HERE *
 *****************************************/</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>The  <code>Java1.5.jj</code>  file is ready now and we can "compile" it from the command line:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">cd /myprojects/simplejava/src/org/simplejava/jcclexer
/myjavacc40/bin/javacc Java1.5.jj</code></pre>
</div>
</div>
<div class="paragraph">
<p>The result should be as follows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/code-7.png" alt="code 7">
</div>
</div>
<div class="paragraph">
<p>As you can see, JavaCC has generated the following files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JavaCharStream.java</p>
</li>
<li>
<p>JavaParserConstants.java</p>
</li>
<li>
<p>JavaParserTokenManager.java</p>
</li>
<li>
<p>ParseException.java</p>
</li>
<li>
<p>TokenMgrError.java</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All the files should be compilable, that is, there should be no error marks anywhere in the module, as can be seen in the screenshot above.</p>
</div>
<div class="paragraph">
<p>You&#8217;ve now completed the JavaCC part of the tutorial. The time has come to use the generated files to create a new NetBeans Lexer plugin.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_integrating_the_javacc_lexer_with_netbeans_apis">Integrating the JavaCC Lexer with NetBeans APIs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we take the files generated in the previous section and integrate them with the  <a href="http://bits.netbeans.org/dev/javadoc/org-netbeans-modules-lexer/overview-summary.html">NetBeans Lexer API</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the Projects window, right-click the Libraries node, and choose Add Module Dependency, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/lexer-1.png" alt="lexer 1">
</div>
</div>
<div class="paragraph">
<p>Look for the "Lexer" module in the list:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/lexer-2.png" alt="lexer 2">
</div>
</div>
<div class="paragraph">
<p>When you click OK, you should see the "Lexer" module is now a dependency in your module:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/lexer-3.png" alt="lexer 3">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In your module, create a new package named  <code>org.simplejava.lexer</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>The first class you need to implement is  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-netbeans-modules-lexer/org/netbeans/api/lexer/TokenId.html">org.netbeans.api.lexer.TokenId</a></code> .  <code>TokenId</code>  represents one type of token. It has three properties:</p>
<div class="ulist">
<ul>
<li>
<p><code>name.</code>  Unique name of the token type, such as  <code>"KEYWORD_IF".</code></p>
</li>
<li>
<p><code>id.</code>  Unique number.</p>
</li>
<li>
<p><code>primaryCategory.</code>  Used for sharing a token coloring among multiple token types.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Create a class named  <code>SJTokenId</code>  and define it as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">package org.simplejava.lexer;

import org.netbeans.api.lexer.TokenId;

public class SJTokenId implements TokenId {

    private final String name;
    private final String primaryCategory;
    private final int id;

    SJTokenId(
            String name,
            String primaryCategory,
            int id) {
        this.name = name;
        this.primaryCategory = primaryCategory;
        this.id = id;
    }

    @Override
    public String primaryCategory() {
        return primaryCategory;
    }

    @Override
    public int ordinal() {
        return id;
    }

    @Override
    public String name() {
        return name;
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>The next class you need to implement is  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-netbeans-modules-lexer/org/netbeans/spi/lexer/LanguageHierarchy.html">org.netbeans.spi.lexer.LanguageHierarchy</a></code> .  <code>LanguageHierarchy</code>  provides a list of token types for our language and creates a new instance of our lexer.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Create a class named  <code>SJLanguageHierarchy</code>  and define it as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">package org.simplejava.lexer;

import java.util.*;
import org.netbeans.spi.lexer.LanguageHierarchy;
import org.netbeans.spi.lexer.Lexer;
import org.netbeans.spi.lexer.LexerRestartInfo;

public class SJLanguageHierarchy extends LanguageHierarchy&lt;SJTokenId&gt; {

    private static List&lt;SJTokenId&gt; tokens;
    private static Map&lt;Integer, SJTokenId&gt; idToToken;

    private static void init() {
        tokens = Arrays.&lt;SJTokenId&gt;asList(new SJTokenId[]{
            //[PENDING]
        });
        idToToken = new HashMap&lt;Integer, SJTokenId&gt;();
        for (SJTokenId token : tokens) {
            idToToken.put(token.ordinal(), token);
        }
    }

    static synchronized SJTokenId getToken(int id) {
        if (idToToken == null) {
            init();
        }
        return idToToken.get(id);
    }

    @Override
    protected synchronized Collection&lt;SJTokenId&gt; createTokenIds() {
        if (tokens == null) {
            init();
        }
        return tokens;
    }

    @Override
    protected synchronized Lexer&lt;SJTokenId&gt; createLexer(LexerRestartInfo&lt;SJTokenId&gt; info) {
        return new SJLexer(info);
    }

    @Override
    protected String mimeType() {
        return "text/x-sj";
    }

}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Because the  <code>SJLexer</code>  class does not yet exist, a red error mark is shown in the NetBeans editor in the new declaration for the non-existent  <code>SJLexer</code>  class. You will define this class in the next step.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>The last class you need to implement is  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-netbeans-modules-lexer/org/netbeans/spi/lexer/Lexer.html">org.netbeans.spi.lexer.Lexer</a></code> .  <code>Lexer</code>  reads input text and returns tokens for it. In our case, the Lexer implementation needs to delegate to the lexer generated by JavaCC.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Create a class named  <code>SJLexer</code>  and define it as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">package org.simplejava.lexer;

import org.netbeans.spi.lexer.Lexer;
import org.netbeans.spi.lexer.LexerRestartInfo;
import org.simplejava.jcclexer.JavaCharStream;
import org.simplejava.jcclexer.JavaParserTokenManager;
import org.simplejava.jcclexer.Token;

class SJLexer implements Lexer&lt;SJTokenId&gt; {

    private LexerRestartInfo&lt;SJTokenId&gt; info;
    private JavaParserTokenManager javaParserTokenManager;

    SJLexer(LexerRestartInfo&lt;SJTokenId&gt; info) {
        this.info = info;
        JavaCharStream stream = new JavaCharStream(info.input());
        javaParserTokenManager = new JavaParserTokenManager(stream);
    }

    @Override
    public org.netbeans.api.lexer.Token&lt;SJTokenId&gt; nextToken() {
        Token token = javaParserTokenManager.getNextToken();
        if (info.input().readLength() &lt; 1) {
            return null;
        }
        return info.tokenFactory().createToken(SJLanguageHierarchy.getToken(token.kind));
    }

    @Override
    public Object state() {
        return null;
    }

    @Override
    public void release() {
    }

}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The class above does not compile at the moment because  <code>JavaCharStream</code>  has not been defined to receive a  <code>LexerInput</code> . In the next step, we rewrite the  <code>JavaCharStream</code>  class generated by JavaCC. Our new version of  <code>JavaCharStream</code> , listed in the next step, reads input characters from  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-netbeans-modules-lexer/org/netbeans/spi/lexer/LexerInput.html">org.netbeans.spi.lexer.LexerInput</a></code> , instead of the standard  <code>InputStream</code> .
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Because we are now using  <code>LexerInput</code>  instead of  <code>InputStream</code> , another change in  <code>JavaCharStream</code>  is needed because the  <code>JavaParserTokenManager</code>  created by JavaCC is designed to work with a  <code>java.io.Reader</code>  and recognizes a &lt;EOF&gt; when the  <code>io.Reader</code>  throws an  <code>IOException</code> . However, though the  <code>LexerInput</code>  class logically corresponds to  <code>java.io.Reader</code> , its  <code>read()</code>  method does not throw a checked exception. Hence the  <code>BeginToken</code>  and the  <code>readChar</code>  methods below validate the returned character and throw the exception, if necesary.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">package org.simplejava.jcclexer;

import java.io.IOException;
import java.io.InputStream;
import java.io.Reader;
import java.io.UnsupportedEncodingException;
import org.netbeans.spi.lexer.LexerInput;

public class JavaCharStream {

    private LexerInput input;

    static boolean staticFlag;

    public JavaCharStream(LexerInput input) {
        this.input = input;
    }

    JavaCharStream(Reader stream, int i, int i0) {
        throw new UnsupportedOperationException("Not yet implemented");
    }

    JavaCharStream(InputStream stream, String encoding, int i, int i0) throws UnsupportedEncodingException {
        throw new UnsupportedOperationException("Not yet implemented");
    }

    char BeginToken() throws IOException {
        return readChar();
    }

    String GetImage() {
        return input.readText().toString();
    }

    public char[] GetSuffix(int len) {
        if (len &gt; input.readLength()) {
            throw new IllegalArgumentException();
        }
        return input.readText(input.readLength() - len, input.readLength()).toString().toCharArray();
    }

    void ReInit(Reader stream, int i, int i0) {
        throw new UnsupportedOperationException("Not yet implemented");
    }

    void ReInit(InputStream stream, String encoding, int i, int i0) throws UnsupportedEncodingException {
        throw new UnsupportedOperationException("Not yet implemented");
    }

    void backup(int i) {
        input.backup(i);
    }

    int getBeginColumn() {
        return 0;
    }

    int getBeginLine() {
        return 0;
    }

    int getEndColumn() {
        return 0;
    }

    int getEndLine() {
        return 0;
    }

    char readChar() throws IOException {
        int result = input.read();
        if (result == LexerInput.EOF) {
            throw new IOException("LexerInput EOF");
        }
        return (char) result;
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>After replacing the generated  <code>JavaCharStream</code>  with the code in the previous step, everything should compile and your module structure should be as follows:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/lexer-4.png" alt="lexer 4">
</div>
</div>
<div class="paragraph">
<p>You now have an implementation of the NetBeans Lexer API based on a JavaCC lexer generated from a JavaCC grammar definition. In the next section, you register your NetBeans lexer so that the NetBeans Platform infrastructure can find it and load it into the application.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_registering_the_netbeans_lexer">Registering the NetBeans Lexer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You now have a NetBeans lexer. We need to register it so that it can be used.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In  <code>SJTokenId</code> , define the following method, which returns an instance of  <code>org.netbeans.api.lexer.Language</code> :</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public static Language&lt;SJTokenId&gt; getLanguage() {
    return new SJLanguageHierarchy().language();
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>The instance created statically above needs to be called from somewhere. The call is done from the  <code>layer.xml</code>  file, within the  <code>CslPlugins</code>  folder, where you register the class below as a language instance, via the class annotation  <code>@LanguageRegistration</code> :</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">package org.simplejava;

import org.netbeans.api.lexer.Language;
import org.netbeans.modules.csl.spi.DefaultLanguageConfig;
import org.netbeans.modules.csl.spi.LanguageRegistration;
import org.simplejava.lexer.SJTokenId;

@LanguageRegistration(mimeType = "text/x-sj")
public class SJLanguage extends DefaultLanguageConfig {

    @Override
    public Language getLexerLanguage() {
        return SJTokenId.getLanguage();
    }

    @Override
    public String getDisplayName() {
        return "SJ";
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the module containing the above class is built, the  <code>generated-layer.xml</code>  file in the module&#8217;s 'build' folder, which is visible in the Files window (Ctrl - 2) contains many new entries, providing many default features for your language.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_defining_tokens_and_assigning_colors">Defining Tokens and Assigning Colors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s now work with the actual tokens that we&#8217;re going to need. First, we&#8217;ll update the  <code>SJLanguageHierarchy</code>  with our tokens. After that, we&#8217;ll map the tokens to fonts and colors. Finally, we&#8217;ll register our new files in the virtual filesystem of the application we&#8217;re working on.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Look in the generated  <code>JavaParserConstants</code>  file and notice the tokens that have been generated by JavaCC.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public interface JavaParserConstants {

  int EOF = 0;
  int WHITESPACE = 1;
  int SINGLE_LINE_COMMENT = 4;
  int FORMAL_COMMENT = 5;
  int MULTI_LINE_COMMENT = 6;
  int ABSTRACT = 8;
  int ASSERT = 9;
  int BOOLEAN = 10;
  int BREAK = 11;
  int BYTE = 12;
  ...
  ...
  ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now tweak and then copy the tokens above into your  <code>SJLanguageHierarchy</code>  file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">tokens = Arrays.asList(new SJTokenId[]{
    new SJTokenId("EOF", "whitespace", 0),
    new SJTokenId("WHITESPACE", "whitespace", 1),
    new SJTokenId("SINGLE_LINE_COMMENT", "comment", 4),
    new SJTokenId("FORMAL_COMMENT", "comment", 5),
    new SJTokenId("MULTI_LINE_COMMENT", "comment", 6),
    new SJTokenId("ABSTRACT", "keyword", 8),
    new SJTokenId("ASSERT", "keyword", 9),
    new SJTokenId("BOOLEAN", "keyword", 10),
    new SJTokenId("BREAK", "keyword", 11),
    new SJTokenId("BYTE", "keyword", 12),
    ...
    ...
    ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the <a href="#appendix">Appendix</a> for the complete list of tokens. Copy them from the appendix into your module.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Next, we need to map the categories to fonts and colors. This is done declaratively, in an XML file, where we list the categories and then declare the fonts and colors that should be applied. In the main package of the module, that is,  <code>org.simplejava</code> , create a new XML file named  <code>FontAndColors.xml</code> , with the following content:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;!DOCTYPE fontscolors PUBLIC
    "-//NetBeans//DTD Editor Fonts and Colors settings 1.1//EN"
    "https://netbeans.org/dtds/EditorFontsColors-1_1.dtd"&gt;
&lt;fontscolors&gt;
    &lt;fontcolor name="character" default="char"/&gt;
    &lt;fontcolor name="errors" default="error"/&gt;
    &lt;fontcolor name="identifier" default="identifier"/&gt;
    &lt;fontcolor name="keyword" default="keyword" foreColor="red"/&gt;
    &lt;fontcolor name="literal" default="keyword" /&gt;
    &lt;fontcolor name="comment" default="comment"/&gt;
    &lt;fontcolor name="number" default="number"/&gt;
    &lt;fontcolor name="operator" default="operator"/&gt;
    &lt;fontcolor name="string" default="string"/&gt;
    &lt;fontcolor name="separator" default="separator"/&gt;
    &lt;fontcolor name="whitespace" default="whitespace"/&gt;
    &lt;fontcolor name="method-declaration" default="method"&gt;
        &lt;font style="bold" /&gt;
    &lt;/fontcolor&gt;
&lt;/fontscolors&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This file defines how to visualize the tokens produced by the lexer.</p>
</div>
<div class="paragraph">
<p>The  <code>fontcolor</code>  tag properties are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>name: Name or primaryCategory of your token (or tokens).</p>
</li>
<li>
<p>default: Name of default coloring. All properties that are not defined explicitly are inherited from this default coloring. Default coloring is customizable in the Options window.</p>
</li>
<li>
<p>foreColor: Foreground color.</p>
</li>
<li>
<p>bgColor: Background color.</p>
</li>
<li>
<p>underline: Underlined color. Token will be underlined if specified.</p>
</li>
<li>
<p>strikeThrough: Strike through color.</p>
</li>
<li>
<p>waveUnderlined: Wave underlined color.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The  <code>fontcolor</code>  tag can contain a nested font tag. The  <code>font</code>  tag has the following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>name: Name of font.</p>
</li>
<li>
<p>size: Font size.</p>
</li>
<li>
<p>style: Bold or italic style.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>1.
Copy the following code into the template file. Not only will you use the template file, that is,  <code>SJTemplate.sj</code> , as a template in the New File dialog, but also as example text to be shown in the Options window, where the user will be able to see the effect of their customized fonts and colors.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">/**
 * SimpleJavadoc comment for

[source,java]</code></pre>
</div>
</div>
<div class="paragraph">
<p>SimpleJavaExample</p>
</div>
<div class="listingblock">
<div class="content">
<pre> class.
 * @author Simple Joe Smith
 */
public class SimpleJavaExample {

    @Deprecated public String method (int param) {
        return "SimpleString " + '-' + 1.2;
    }// line comment

}</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Add the following key/value pairs into the  <code>Bundle.properties</code>  file of the main package, that is, the  <code>Bundle.properties</code>  file found in  <code>org.simplejava</code> :</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">text/x-sj=Simple Java
character=Character
errors=Error
identifier=Identifier
keyword=Keyword
literal=Literal
comment=Comment
number=Number
operator=Operator
string=String
separator=Separator
whitespace=Whitespace
method-declaration=Method Declaration</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above values will be shown in the Options window, in the panel where the user will be able to change the predefined fonts and colors per category.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Register the  <code>FontAndColors.xml</code>  file, as well as the example file into the  <code>layer.xml</code>  file:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;folder name="Editors"&gt;
    &lt;folder name="text"&gt;
        &lt;folder name="x-sj"&gt;
            *&lt;attr name="SystemFileSystem.localizingBundle" stringvalue="org.simplejava.Bundle"/&gt;*
            *&lt;folder name="FontsColors"&gt;
                &lt;folder name="NetBeans"&gt;
                    &lt;folder name="Defaults"&gt;
                        &lt;file name="FontAndColors.xml" url="FontAndColors.xml"&gt;
                            &lt;attr name="SystemFileSystem.localizingBundle" stringvalue="org.simplejava.Bundle"/&gt;
                        &lt;/file&gt;
                    &lt;/folder&gt;
                &lt;/folder&gt;
            &lt;/folder&gt;*
        &lt;/folder&gt;
    &lt;/folder&gt;
&lt;/folder&gt;
*&lt;folder name="OptionsDialog"&gt;
    &lt;folder name="PreviewExamples"&gt;
        &lt;folder name="text"&gt;
            &lt;file name="x-sj" url="SJTemplate.sj"/&gt;
        &lt;/folder&gt;
    &lt;/folder&gt;
&lt;/folder&gt;*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Check that your module now has this content:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/lexer-5.png" alt="lexer 5">
</div>
</div>
<div class="paragraph">
<p>Run the module, open an SJ file, and you should see the correct coloring, as defined in the files above:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/result-1.png" alt="result 1">
</div>
</div>
<div class="paragraph">
<p>Look in the Options window, under the Tools menu, and you should be able to change the fonts and colors for the file type.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/result-2.png" alt="result 2">
</div>
</div>
<div class="paragraph">
<p><a href="http://netbeans.apache.org/community/mailing-lists.html">Send Us Your Feedback</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_steps">Next Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial is the official version of the first part of  <a href="http://wiki.netbeans.org/How_to_create_support_for_a_new_language">http://wiki.netbeans.org/How_to_create_support_for_a_new_language</a>, which, aside from being a rough draft, is partly obsolete and out of date for NetBeans Platform 7.1.</p>
</div>
<div class="paragraph">
<p>Part 2 of this tutorial, the  <a href="nbm-javacc-parser.html">JavaCC Parser Generator Integration Tutorial</a>, shows you how to create a parser that parses the same text that the lexer in this tutorial lexes.</p>
</div>
<div class="paragraph">
<p>For more information about creating and developing NetBeans modules, see the following resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://netbeans.apache.org/platform/index.html">NetBeans Platform Homepage</a></p>
</li>
<li>
<p><a href="https://bits.netbeans.org/dev/javadoc/">NetBeans API List (Current Development Version)</a></p>
</li>
<li>
<p><a href="https://netbeans.apache.org/kb/docs/platform.html">Other Related Tutorials</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appendix">Appendix</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The complete list of tokens, referred to in step 1 of the section <a href="#defining">Defining Tokens and Assigning Colors</a> above, is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">tokens = Arrays.asList(new SJTokenId[]{
    new SJTokenId("EOF", "whitespace", 0),
    new SJTokenId("WHITESPACE", "whitespace", 1),
    new SJTokenId("SINGLE_LINE_COMMENT", "comment", 4),
    new SJTokenId("FORMAL_COMMENT", "comment", 5),
    new SJTokenId("MULTI_LINE_COMMENT", "comment", 6),
    new SJTokenId("ABSTRACT", "keyword", 8),
    new SJTokenId("ASSERT", "keyword", 9),
    new SJTokenId("BOOLEAN", "keyword", 10),
    new SJTokenId("BREAK", "keyword", 11),
    new SJTokenId("BYTE", "keyword", 12),
    new SJTokenId("CASE", "keyword", 13),
    new SJTokenId("CATCH", "keyword", 14),
    new SJTokenId("CHAR", "keyword", 15),
    new SJTokenId("CLASS", "keyword", 16),
    new SJTokenId("CONST", "keyword", 17),
    new SJTokenId("CONTINUE", "keyword", 18),
    new SJTokenId("_DEFAULT", "keyword", 19),
    new SJTokenId("DO", "keyword", 20),
    new SJTokenId("DOUBLE", "keyword", 21),
    new SJTokenId("ELSE", "keyword", 22),
    new SJTokenId("ENUM", "keyword", 23),
    new SJTokenId("EXTENDS", "keyword", 24),
    new SJTokenId("FALSE", "keyword", 25),
    new SJTokenId("FINAL", "keyword", 26),
    new SJTokenId("FINALLY", "keyword", 27),
    new SJTokenId("FLOAT", "keyword", 28),
    new SJTokenId("FOR", "keyword", 29),
    new SJTokenId("GOTO", "keyword", 30),
    new SJTokenId("IF", "keyword", 31),
    new SJTokenId("IMPLEMENTS", "keyword", 32),
    new SJTokenId("IMPORT", "keyword", 33),
    new SJTokenId("INSTANCEOF", "keyword", 34),
    new SJTokenId("INT", "keyword", 35),
    new SJTokenId("INTERFACE", "keyword", 36),
    new SJTokenId("LONG", "keyword", 37),
    new SJTokenId("NATIVE", "keyword", 38),
    new SJTokenId("NEW", "keyword", 39),
    new SJTokenId("NULL", "keyword", 40),
    new SJTokenId("PACKAGE", "keyword", 41),
    new SJTokenId("PRIVATE", "keyword", 42),
    new SJTokenId("PROTECTED", "keyword", 43),
    new SJTokenId("PUBLIC", "keyword", 44),
    new SJTokenId("RETURN", "keyword", 45),
    new SJTokenId("SHORT", "keyword", 46),
    new SJTokenId("STATIC", "keyword", 47),
    new SJTokenId("STRICTFP", "keyword", 48),
    new SJTokenId("SUPER", "keyword", 49),
    new SJTokenId("SWITCH", "keyword", 50),
    new SJTokenId("SYNCHRONIZED", "keyword", 51),
    new SJTokenId("THIS", "keyword", 52),
    new SJTokenId("THROW", "keyword", 53),
    new SJTokenId("THROWS", "keyword", 54),
    new SJTokenId("TRANSIENT", "keyword", 55),
    new SJTokenId("TRUE", "keyword", 56),
    new SJTokenId("TRY", "keyword", 57),
    new SJTokenId("VOID", "keyword", 58),
    new SJTokenId("VOLATILE", "keyword", 59),
    new SJTokenId("WHILE", "keyword", 60),
    new SJTokenId("INTEGER_LITERAL", "literal", 61),
    new SJTokenId("DECIMAL_LITERAL", "literal", 62),
    new SJTokenId("HEX_LITERAL", "literal", 63),
    new SJTokenId("OCTAL_LITERAL", "literal", 64),
    new SJTokenId("FLOATING_POINT_LITERAL", "literal", 65),
    new SJTokenId("DECIMAL_FLOATING_POINT_LITERAL", "literal", 66),
    new SJTokenId("DECIMAL_EXPONENT", "number", 67),
    new SJTokenId("HEXADECIMAL_FLOATING_POINT_LITERAL", "literal", 68),
    new SJTokenId("HEXADECIMAL_EXPONENT", "number", 69),
    new SJTokenId("CHARACTER_LITERAL", "literal", 70),
    new SJTokenId("STRING_LITERAL", "literal", 71),
    new SJTokenId("IDENTIFIER", "identifier", 72),
    new SJTokenId("LETTER", "literal", 73),
    new SJTokenId("PART_LETTER", "literal", 74),
    new SJTokenId("LPAREN", "operator", 75),
    new SJTokenId("RPAREN", "operator", 76),
    new SJTokenId("LBRACE", "operator", 77),
    new SJTokenId("RBRACE", "operator", 78),
    new SJTokenId("LBRACKET", "operator", 79),
    new SJTokenId("RBRACKET", "operator", 80),
    new SJTokenId("SEMICOLON", "operator", 81),
    new SJTokenId("COMMA", "operator", 82),
    new SJTokenId("DOT", "operator", 83),
    new SJTokenId("AT", "operator", 84),
    new SJTokenId("ASSIGN", "operator", 85),
    new SJTokenId("LT", "operator", 86),
    new SJTokenId("BANG", "operator", 87),
    new SJTokenId("TILDE", "operator", 88),
    new SJTokenId("HOOK", "operator", 89),
    new SJTokenId("COLON", "operator", 90),
    new SJTokenId("EQ", "operator", 91),
    new SJTokenId("LE", "operator", 92),
    new SJTokenId("GE", "operator", 93),
    new SJTokenId("NE", "operator", 94),
    new SJTokenId("SC_OR", "operator", 95),
    new SJTokenId("SC_AND", "operator", 96),
    new SJTokenId("INCR", "operator", 97),
    new SJTokenId("DECR", "operator", 98),
    new SJTokenId("PLUS", "operator", 99),
    new SJTokenId("MINUS", "operator", 100),
    new SJTokenId("STAR", "operator", 101),
    new SJTokenId("SLASH", "operator", 102),
    new SJTokenId("BIT_AND", "operator", 103),
    new SJTokenId("BIT_OR", "operator", 104),
    new SJTokenId("XOR", "operator", 105),
    new SJTokenId("REM", "operator", 106),
    new SJTokenId("LSHIFT", "operator", 107),
    new SJTokenId("PLUSASSIGN", "operator", 108),
    new SJTokenId("MINUSASSIGN", "operator", 109),
    new SJTokenId("STARASSIGN", "operator", 110),
    new SJTokenId("SLASHASSIGN", "operator", 111),
    new SJTokenId("ANDASSIGN", "operator", 112),
    new SJTokenId("ORASSIGN", "operator", 113),
    new SJTokenId("XORASSIGN", "operator", 114),
    new SJTokenId("REMASSIGN", "operator", 115),
    new SJTokenId("LSHIFTASSIGN", "operator", 116),
    new SJTokenId("RSIGNEDSHIFTASSIGN", "operator", 117),
    new SJTokenId("RUNSIGNEDSHIFTASSIGN", "operator", 118),
    new SJTokenId("ELLIPSIS", "operator", 119),
    new SJTokenId("RUNSIGNEDSHIFT", "operator", 120),
    new SJTokenId("RSIGNEDSHIFT", "operator", 121),
    new SJTokenId("GT", "operator", 122)
});</code></pre>
</div>
</div>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/71/nbm-javacc-lexer.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1><a href="/about/index.html">About</a></h1>
                <ul>
                    <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb110/nb110.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="/plugins/index.html">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2019 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
