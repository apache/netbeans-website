
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans Platform Selection Tutorial Using Maven</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans Platform Selection Tutorial Using Maven - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, NetBeans Platform Selection Tutorial Using Maven">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">NetBeans Platform Selection Tutorial Using Maven</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/71/nbm-maven-modulesuite.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_creating_the_netbeans_platform_application">Creating the NetBeans Platform Application</a></li>
<li><a href="#_creating_an_api">Creating an API</a>
<ul class="sectlevel2">
<li><a href="#_creating_a_class_in_the_myapi_module">Creating a Class in the MyAPI Module</a></li>
<li><a href="#_exposing_the_package">Exposing the Package</a></li>
</ul>
</li>
<li><a href="#_listening_to_the_selection">Listening to the Selection</a>
<ul class="sectlevel2">
<li><a href="#_creating_the_module">Creating the Module</a></li>
<li><a href="#_creating_the_viewer_window">Creating the Viewer Window</a></li>
</ul>
</li>
<li><a href="#_publishing_a_selected_object">Publishing a Selected Object</a>
<ul class="sectlevel2">
<li><a href="#_creating_the_module_2">Creating the Module</a></li>
<li><a href="#_creating_the_editor_window">Creating the Editor Window</a></li>
</ul>
</li>
<li><a href="#_building_and_running_the_application">Building and Running the Application</a></li>
<li><a href="#_changing_selected_objects_dynamically">Changing Selected Objects Dynamically</a></li>
<li><a href="#_see_also">See Also</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This document demonstrates how to create a NetBeans Platform Module Suite from Maven archetypes and build and install the suite in your installation of the IDE. In this tutorial you will create a Maven module suite project that contains three NetBeans modules as sub-projects. The Maven project that contains the sub-projects is a simple POM project that declares how the suite is compiled and the installation target.</p>
</div>
<div class="paragraph">
<p>This document is based on the Ant-based  <a href="https://netbeans.apache.org/tutorials/nbm-selection-1.html">NetBeans Selection Management Tutorial</a> and illustrates some of the differences between using Ant and Maven to develop NetBeans Platform module suites. After you understand some of the differences, you can easily proceed through other tutorials on the the  <a href="https://netbeans.apache.org/kb/docs/platform.html">NetBeans Platform Learning Trail</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You do not need to download Maven because it is bundled with the IDE. Optionally, use your own download of Maven, in which case use the Options window to configure your Maven settings.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Before starting this tutorial you may want to familiarize yourself with the following introductory Maven documentation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://wiki.netbeans.org/MavenBestPractices">Best Practices for Maven in NetBeans IDE</a></p>
</li>
<li>
<p><a href="http://www.sonatype.com/books/maven-book/reference/introduction.html">Chapter 1. Introducing Apache Maven</a> (from  <a href="http://www.sonatype.com/books/maven-book/reference/public-book.html">Maven: The Definitive Guide</a>)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_netbeans_platform_application">Creating the NetBeans Platform Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section you use the New Project wizard to create a NetBeans Platform Module Suite from a Maven archetype. The wizard will create a POM project that will contain the module projects. In the wizard you will also create a module as a sub-project of the suite.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Open the New Project wizard and select NetBeans Application in the Maven category:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic1.png" alt="maven suite 71 pic1">
</div>
<div class="title">Figure 1. Screenshot of Projects window</div>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Type <strong>MavenSelectionSuite</strong> for the Project Name:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic2.png" alt="maven suite 71 pic2">
</div>
<div class="title">Figure 2. Screenshot of Projects window</div>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Choose the NetBeans API version you want to use. Select Create Module Project and type <strong>MyAPI</strong> for the module name:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic3.png" alt="maven suite 71 pic3">
</div>
<div class="title">Figure 3. Screenshot of Projects window</div>
</div>
<div class="paragraph">
<p>Click Finish.</p>
</div>
<div class="paragraph">
<p>When you click Finish, the IDE creates a Maven reactor project, together with subprojects for branding, NetBeans Platform application actions, and the API module:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic4.png" alt="maven suite 71 pic4">
</div>
<div class="title">Figure 4. Screenshot of Projects window</div>
</div>
<div class="paragraph">
<p>MavenSelectionSuite-parent is a reactor project which is a container for sub-projects, in this case NetBeans Module projects. The reactor project does not contain any source files. The reactor&#8217;s POM contains instructions for compiling the application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;com.mycompany&lt;/groupId&gt;
    &lt;artifactId&gt;MavenSelectionSuite-parent&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;packaging&gt;pom&lt;/packaging&gt;

    &lt;name&gt;MavenSelectionSuite-parent&lt;/name&gt;

    &lt;repositories&gt;
        &lt;!--
        Repository hosting NetBeans modules, especially APIs.
        Versions are based on IDE releases, e.g.: RELEASE691
        To create your own repository, use: nbm:populate-repository
        --&gt;
        &lt;repository&gt;
            &lt;id&gt;netbeans&lt;/id&gt;
            &lt;name&gt;NetBeans&lt;/name&gt;
            &lt;url&gt;http://bits.netbeans.org/maven2/&lt;/url&gt;
        &lt;/repository&gt;
    &lt;/repositories&gt;

    &lt;dependencyManagement&gt;
        &lt;dependencies&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;junit&lt;/groupId&gt;
                &lt;artifactId&gt;junit&lt;/artifactId&gt;
                &lt;version&gt;4.8.2&lt;/version&gt;
                &lt;scope&gt;test&lt;/scope&gt;
            &lt;/dependency&gt;
        &lt;/dependencies&gt;
    &lt;/dependencyManagement&gt;

    &lt;build&gt;
        &lt;pluginManagement&gt;
            &lt;plugins&gt;
                &lt;plugin&gt;
                    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
                    &lt;artifactId&gt;nbm-maven-plugin&lt;/artifactId&gt;
                    &lt;version&gt;3.6&lt;/version&gt;
                    &lt;extensions&gt;true&lt;/extensions&gt;
                    &lt;configuration&gt;
                        &lt;brandingToken&gt;${brandingToken}&lt;/brandingToken&gt;
                        &lt;cluster&gt;${brandingToken}&lt;/cluster&gt;
                    &lt;/configuration&gt;
                &lt;/plugin&gt;
                &lt;plugin&gt;
                    &lt;!-- NetBeans 6.9+ requires JDK 6 --&gt;
                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
                    &lt;version&gt;2.3.2&lt;/version&gt;
                    &lt;configuration&gt;
                        &lt;source&gt;1.6&lt;/source&gt;
                        &lt;target&gt;1.6&lt;/target&gt;
                    &lt;/configuration&gt;
                &lt;/plugin&gt;
                &lt;plugin&gt;
                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;
                    &lt;version&gt;2.3.1&lt;/version&gt;
                &lt;/plugin&gt;
            &lt;/plugins&gt;
        &lt;/pluginManagement&gt;
    &lt;/build&gt;

    &lt;modules&gt;
        &lt;module&gt;branding&lt;/module&gt;
        &lt;module&gt;application&lt;/module&gt;
        &lt;module&gt;MyAPI&lt;/module&gt;
    &lt;/modules&gt;

    &lt;properties&gt;
        &lt;netbeans.version&gt;RELEASE71-BETA&lt;/netbeans.version&gt;
        &lt;brandingToken&gt;mavenselectionsuite&lt;/brandingToken&gt;
    &lt;/properties&gt;

&lt;/project&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see above, the reactor provides a list of the modules that will be included when you build the project. You can see that the MyAPI project is listed as one of these modules.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_an_api">Creating an API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You created the MyAPI module when you created the module suite, but now you need to create a class in the module and expose the class to other modules.</p>
</div>
<div class="sect2">
<h3 id="_creating_a_class_in_the_myapi_module">Creating a Class in the MyAPI Module</h3>
<div class="paragraph">
<p>In this exercise you will create a simple class named  <code>Event</code> . Each instance of  <code>Event</code>  will be unique because the field  <code>index</code>  is incremented by 1 each time a new instance of  <code>Event</code>  is created.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the  <code>com.mycompany.mavenselectionsuite</code>  package, create a new Java class named <strong>Event</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Modify the class to declare the following fields and getters:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package com.mycompany.mavenselectionsuite;

import java.util.Date;

public final class Event {

   private final Date date = new Date();
   private static int count = 0;
   private final int index;

   public Event() {
      index = count++;
   }

   public Date getDate() {
      return date;
   }

   public int getIndex() {
      return index;
   }

   public String toString() {
       return index + " - " + date;
   }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exposing_the_package">Exposing the Package</h3>
<div class="paragraph">
<p>In this tutorial you will create additional modules that will need to access the  <code>Event</code>  class. In this exercise, you will make the contents of the package that contains the  <code>Event</code>  class public so that other modules can access it. To declare the  <code>com.mycompany.mavenselectionsuite</code>  package as public, you will modify the  <code>configuration</code>  element of  <code>nbm-maven-plugin</code>  in the POM to specify the packages that are exported as public. You can make the changes to the POM in the editor or by selecting the packages to make public in the project&#8217;s Properties window.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the MyAPI project node and choose Properties to open the Properties window.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
Select the <strong>com.mycompany.mavenselectionsuite</strong> package in the <strong>Public Packages</strong> category:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic5.png" alt="maven suite 71 pic5">
</div>
<div class="title">Figure 5. screenshot</div>
</div>
<div class="paragraph">
<p>Click OK.</p>
</div>
<div class="paragraph">
<p>When you select a package to export, the IDE modifies the  <code>nbm-maven-plugin</code>  element in the POM to specify the package:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
    &lt;artifactId&gt;nbm-maven-plugin&lt;/artifactId&gt;
    &lt;extensions&gt;true&lt;/extensions&gt;
    &lt;configuration&gt;
        &lt;publicPackages&gt;
            *&lt;publicPackage&gt;com.mycompany.mavenselectionsuite&lt;/publicPackage&gt;*
        &lt;/publicPackages&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Right-click the project and choose Build. When you build the project, the  <code>nbm-maven-plugin</code>  will generate a manifest header in the  <code>MANIFEST.MF</code>  of the JAR, to specify the public package:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Built-By: geertjan
Build-Jdk: 1.7.0
OpenIDE-Module-Localizing-Bundle: com/mycompany/mavenselectionsuite/Bu
 ndle.properties
OpenIDE-Module-Specification-Version: 1.0
OpenIDE-Module-Implementation-Version: 1.0-20111222
OpenIDE-Module-Build-Version: 201112221054
OpenIDE-Module: com.mycompany.MyAPI
*OpenIDE-Module-Public-Packages: com.mycompany.mavenselectionsuite.**
OpenIDE-Module-Requires: org.openide.modules.ModuleFormat1
OpenIDE-Module-Display-Category: com.mycompany
OpenIDE-Module-Name: MyAPI
OpenIDE-Module-Short-Description: &lt;undefined&gt;
OpenIDE-Module-Long-Description: &lt;undefined&gt;
OpenIDE-Module-Module-Dependencies: org.netbeans.api.annotations.commo
 n/1 &gt; 1.10.1</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information, see the  <a href="http://bits.netbeans.org/mavenutilities/nbm-maven-plugin/manifest-mojo.html#publicPackages">nbm-maven-plugin manifest documentation</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_listening_to_the_selection">Listening to the Selection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section you will create a new module named MyViewer and add a window component and two text fields. The component will implement  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-util-lookup/org/openide/util/LookupListener.html">LookupListener</a></code>  to listen for changes to the selection.</p>
</div>
<div class="sect2">
<h3 id="_creating_the_module">Creating the Module</h3>
<div class="paragraph">
<p>In this exercise you will create the MyViewer NetBeans module in the  <code>MavenSelectionSuite</code>  directory.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Choose File &gt; New Project from the main menu (Ctrl-Shift-N). Select NetBeans Module from the Maven category:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic6.png" alt="maven suite 71 pic6">
</div>
<div class="title">Figure 6. screenshot</div>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Type <strong>MyViewer</strong> as the Project Name. Make sure to set the Project Location to the  <code>MavenSelectionSuite</code>  directory:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic7.png" alt="maven suite 71 pic7">
</div>
<div class="title">Figure 7. screenshot</div>
</div>
<div class="paragraph">
<p>Click Next. Select the NetBeans API version you&#8217;d like to use. Click Finish.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>The module is going to use the API module, therefore we need to set a dependency in the viewer module on the API module. Right-click the Dependencies node in the MyViewer project and choose Add Dependency:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic8.png" alt="maven suite 71 pic8">
</div>
<div class="title">Figure 8. screenshot</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Select the MyAPI module in the Open Projects tab:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic9.png" alt="maven suite 71 pic9">
</div>
<div class="title">Figure 9. screenshot</div>
</div>
<div class="paragraph">
<p>When you click Add above, the IDE adds the API module to the list of dependencies of the MyViewer module. You can see the new dependency in the POM of the MyViewer module and displayed as a new node under the Dependencies node of the MyViewer module.</p>
</div>
<div class="paragraph">
<p>You&#8217;ve now learned how to create a new module in your application and you&#8217;ve also learned how to set dependencies between your modules. Once a dependency has been set, a module can use the publicly exposed classes of the modules it depends on.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_the_viewer_window">Creating the Viewer Window</h3>
<div class="paragraph">
<p>In this exercise you will create a GUI component in your viewer module. The data displayed in the GUI component will be retrieved from the Lookup. That means you will learn how to listen to the selection and how to update your GUI component whenever an object of interest is published into the Lookup.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the MyViewer project and choose New &gt; Window.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
Select <strong>explorer</strong> and select Open on Application Start:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic01.png" alt="maven suite 71 pic01">
</div>
<div class="title">Figure 10. screenshot</div>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Type <strong>MyViewer</strong> as the Class Name Prefix:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic02.png" alt="maven suite 71 pic02">
</div>
<div class="title">Figure 11. screenshot</div>
</div>
<div class="paragraph">
<p>Click Finish. You should see you have a new NetBeans Platform window component ready to be designed within the Matisse GUI Builder:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic03.png" alt="maven suite 71 pic03">
</div>
<div class="title">Figure 12. screenshot</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Drag two Labels from the Palette into the window component:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic04.png" alt="maven suite 71 pic04">
</div>
<div class="title">Figure 13. screenshot</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Click the Source tab and modify the class signature to implement  <code>LookupListener</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class MyViewerTopComponent extends TopComponent *implements LookupListener* {</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Add the following  <code>private</code>  field  <code>result</code>  and set the initial value to null.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private Lookup.Result&lt;Event&gt; result = null;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Implement the LookupListener&#8217;s "resultChanged" method as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Override
public void resultChanged(LookupEvent le) {
    if (!result.allInstances().isEmpty()) {
        for (Event event : result.allInstances()) {
            jLabel1.setText(Integer.toString(event.getIndex()));
            jLabel2.setText(event.getDate().toString());
        }
    } else {
        jLabel1.setText("[no selection]");
        jLabel2.setText("");
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Make the following additions to the  <code>componentOpened()</code>  and  <code>componentClosed()</code>  methods that have already been created in the class by the New Window wizard:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Override
public void componentOpened() {
    *result = Utilities.actionsGlobalContext().lookupResult(Event.class);
    result.addLookupListener(this);*
}

@Override
public void componentClosed() {
    *result.removeLookupListener (this);*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>By using  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-util/org/openide/util/Utilities.html#actionsGlobalContext%28%29">Utilities.actionsGlobalContext()</a></code> , each time a component is opened, the window listens globally for Event objects. Whenever a new Event is published into the Lookup, the "resultChanged" method is automatically triggered to handle the event.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_publishing_a_selected_object">Publishing a Selected Object</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section you will create a new module called MyEditor. The module will contain a  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-windows/org/openide/windows/TopComponent.html">TopComponent</a></code>  that will publish instances of the  <code>Event</code>  object into the Lookup of the TopComponent. When the user selects the TopComponent, the objects in its Lookup will be available globally. Once published globally, the viewer window created in the previous section, which is listening for Events in the global Lookup, will automatically update itself.</p>
</div>
<div class="sect2">
<h3 id="_creating_the_module_2">Creating the Module</h3>
<div class="paragraph">
<p>In this exercise you will create a NetBeans module in the  <code>MavenSelectionSuite</code>  directory and add a dependency on the MyAPI module.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Choose File &gt; New Project from the main menu. Select NetBeans Module from the Maven category:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic6.png" alt="maven suite 71 pic6">
</div>
<div class="title">Figure 14. screenshot</div>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Type <strong>MyEditor</strong> as the Project Name. Make sure to set the Project Location to the  <code>MavenSelectionSuite</code>  directory:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic05.png" alt="maven suite 71 pic05">
</div>
<div class="title">Figure 15. screenshot</div>
</div>
<div class="paragraph">
<p>Click Next. Select the NetBeans API version you&#8217;d like to use. Click Finish.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Just like you did in the previous section, you need to set a dependency on the API module, so that you can use its public packages. Right-click the Dependencies node in the MyEditor project and choose Add Dependency:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic06.png" alt="maven suite 71 pic06">
</div>
<div class="title">Figure 16. screenshot</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Select the MyAPI module in the Open Projects tab:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic07.png" alt="maven suite 71 pic07">
</div>
<div class="title">Figure 17. screenshot</div>
</div>
<div class="paragraph">
<p>You&#8217;ve now created a second module. In this module, you&#8217;ll now create a TopComponent where new Events will be published into the Lookup.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_the_editor_window">Creating the Editor Window</h3>
<div class="paragraph">
<p>In this exercise you will create the window that opens in the editor area when invoked from a menu item in the main menubar of the application.</p>
</div>
<div class="paragraph">
<p>Rather than using the New Window wizard, as done in the previous section, you will create a normal Java class here, then extend  <code>TopComponent</code> , and use the same annotations you previously used to register the window in the NetBeans Platform application. You&#8217;ll learn that you do not need to use the wizards in the IDE to create the artifacts needed to integrate with the NetBeans Platform.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Create a new Java class named "MyEditorTopComponent".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Modify the constructor to create a new instance of  <code>Event</code>  each time the class is invoked, together with a text field to display the currently published object.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package com.mycompany.myeditor;

import com.mycompany.mavenselectionsuite.Event;
import java.awt.BorderLayout;
import javax.swing.JTextField;
import org.openide.awt.ActionID;
import org.openide.awt.ActionReference;
import org.openide.util.NbBundle.Messages;
import org.openide.util.lookup.Lookups;
import org.openide.windows.TopComponent;

@TopComponent.Description(preferredID = "MyEditorTopComponent",
persistenceType = TopComponent.PERSISTENCE_NEVER)
@TopComponent.Registration(mode = "editor", openAtStartup = false)
@ActionID(category = "Window", id = "com.mycompany.myeditor.MyEditorTopComponent")
@ActionReference(path = "Menu/Window")
@TopComponent.OpenActionRegistration(displayName = "#CTL_MyEditorAction")
@Messages({
    "CTL_MyEditorAction=MyEditor",
    "CTL_MyEditorTopComponent=MyEditor Window",
    "HINT_MyEditorTopComponent=This is a MyEditor window"
})
public final class MyEditorTopComponent extends TopComponent {

    public MyEditorTopComponent() {

        setName(Bundle.CTL_MyEditorTopComponent());
        setToolTipText(Bundle.HINT_MyEditorTopComponent());

        Event obj = new Event();
        associateLookup(Lookups.singleton(obj));

        setLayout(new BorderLayout());

        JTextField displayField = new JTextField();
        add(displayField, BorderLayout.NORTH);
        displayField.setText("Event #" + obj.getIndex() + " created at " + obj.getDate());

        setDisplayName("MyEditor " + obj.getIndex());

    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The  <code>associateLookup(Lookups.singleton(obj));</code>  line in the constructor will create a Lookup that contains the new instance of  <code>Event</code> .</p>
</div>
<div class="paragraph">
<p>The text field in the component only displays the index value and date from the  <code>Event</code> . This will enable you to see that each MyEditor component is unique and that MyViewer is displaying the details of the MyEditor component that has the focus.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_and_running_the_application">Building and Running the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that the target installation of the IDE is specified, you can use the Run command on the <strong>MavenSelectionSuite-app</strong> project. Before you do so, you need to add the viewer module and editor module as dependencies of the <strong>MavenSelectionSuite-app</strong> project.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the Dependencies node of the <strong>MavenSelectionSuite-app</strong> project and choose Add Dependency:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic11.png" alt="maven suite 71 pic11">
</div>
<div class="title">Figure 18. screenshot</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the Open Projects tab, choose "MyViewer" and click Add:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic12.png" alt="maven suite 71 pic12">
</div>
<div class="title">Figure 19. screenshot</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Repeat the steps above to add the "MyEditor" module as a dependency of the <strong>MavenSelectionSuite-app</strong> project.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Right-click <strong>MavenSelectionSuite-app</strong> project and choose Run. The application starts up, consisting of the NetBeans Platform, together with the custom modules you created.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic13.png" alt="maven suite 71 pic13">
</div>
<div class="title">Figure 20. screenshot</div>
</div>
<div class="paragraph">
<p>The MyViewer window opens when the application starts and displays the two labels. You can now choose MyEditor from the Window menu, multiple times, to open multiple MyEditor components in the editor area. The MyViewer window will display the details of the currently selected MyEditor component.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_changing_selected_objects_dynamically">Changing Selected Objects Dynamically</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Currently, a new  <code>Event</code>  is created each time you open a new MyEditor component. In this section you will add a button to the MyEditor component. Whenever the button is clicked, the MyEditor component&#8217;s current  <code>Event</code>  object will be replaced with a new one.</p>
</div>
<div class="paragraph">
<p>In short, you will modify the code to use  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-util-lookup/org/openide/util/lookup/InstanceContent.html">InstanceContent</a></code>  to dynamically handle changes to the content of the Lookup.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Change the MyEditorTopComponent to the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package com.mycompany.myeditor;

import com.mycompany.mavenselectionsuite.Event;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Collections;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JTextField;
import org.openide.awt.ActionID;
import org.openide.awt.ActionReference;
import org.openide.util.NbBundle.Messages;
import org.openide.util.lookup.AbstractLookup;
import org.openide.util.lookup.InstanceContent;
import org.openide.windows.TopComponent;

@TopComponent.Description(preferredID = "MyEditorTopComponent",
persistenceType = TopComponent.PERSISTENCE_NEVER)
@TopComponent.Registration(mode = "editor", openAtStartup = false)
@ActionID(category = "Window", id = "com.mycompany.myeditor.MyEditorTopComponent")
@ActionReference(path = "Menu/Window")
@TopComponent.OpenActionRegistration(displayName = "#CTL_MyEditorAction")
@Messages({
    "CTL_MyEditorAction=MyEditor",
    "CTL_MyEditorTopComponent=MyEditor Window",
    "HINT_MyEditorTopComponent=This is a MyEditor window"
})
public final class MyEditorTopComponent extends TopComponent {

    private final InstanceContent content = new InstanceContent();

    public MyEditorTopComponent() {

        setName(Bundle.CTL_MyEditorTopComponent());
        setToolTipText(Bundle.HINT_MyEditorTopComponent());

        associateLookup(new AbstractLookup(content));

        setLayout(new BoxLayout(this, BoxLayout.LINE_AXIS));

        final JTextField displayField = new JTextField();
        add(displayField);

        JButton replaceButton = new JButton("Replace");
        add(replaceButton);
        replaceButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                Event obj = new Event();
                displayField.setText("Event #" + obj.getIndex() + " created at " + obj.getDate());
                setDisplayName("MyEditor " + obj.getIndex());
                content.set(Collections.singleton(obj), null);
            }
        });

    }

}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To be able to publish the  <code>InstanceContent</code> , you are now using  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-util-lookup/org/openide/util/lookup/AbstractLookup.html#AbstractLookup%28org.openide.util.lookup.AbstractLookup.Content%29">AbstractLookup</a></code>  instead of  <code>Lookup</code>  in the constructor.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You have moved several statements into the new button&#8217;s action event handler.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>When you run the application again, you will see the new button in each MyEditor component:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_71_pic14.png" alt="maven suite 71 pic14">
</div>
<div class="title">Figure 21. screenshot</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>When you click the button, the index number in the text field will increase. The label in the MyViewer window will also update to correspond to the new value.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This tutorial demonstrated how to create and run a NetBeans Platform application that you create from a Maven archetype. You saw how applications are structured and how you configure a modules POM to specify public packages. Most important of all, you learned how to publish objects into the selection and how to listen for them and update other parts of the application accordingly. For more examples on how to build NetBeans Platform applications, see the tutorials listed in the  <a href="https://netbeans.apache.org/kb/docs/platform.html">NetBeans Platform Learning Trail</a>.</p>
</div>
<div class="paragraph">
<p><a href="http://netbeans.apache.org/community/mailing-lists.html"> Send Us Your Feedback</a></p>
</div>
<div class="paragraph">
<p> </p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also">See Also</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information about creating and developing on the NetBeans Platform, see the following resources.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://netbeans.apache.org/kb/docs/platform.html">NetBeans Platform Learning Trail</a></p>
</li>
<li>
<p><a href="https://netbeans.apache.org/wiki/">NetBeans Developer FAQ</a></p>
</li>
<li>
<p><a href="http://bits.netbeans.org/dev/javadoc/">NetBeans API Javadoc</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you have any questions about the NetBeans Platform, feel free to write to the mailing list, <a href="mailto:dev@platform.netbeans.org">dev@platform.netbeans.org</a>, or view the  <a href="https://mail-archives.apache.org/mod_mbox/netbeans-dev/">NetBeans Platform mailing list archive</a>.</p>
</div>
</div>
</div>
        
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/71/nbm-maven-modulesuite.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
