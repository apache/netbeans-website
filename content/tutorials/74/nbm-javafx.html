
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans Platform JavaFX Porting Tutorial</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans Platform JavaFX Porting Tutorial - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, NetBeans Platform JavaFX Porting Tutorial">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>

  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">NetBeans Platform JavaFX Porting Tutorial</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/74/nbm-javafx.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_examining_the_swing_interop_sample">Examining the Swing Interop Sample</a></li>
<li><a href="#_setting_up_the_application">Setting Up the Application</a></li>
<li><a href="#_embedding_a_javafx_chart_in_a_topcomponent">Embedding a JavaFX Chart in a TopComponent</a>
<ul class="sectlevel2">
<li><a href="#_create_the_module">Create the Module</a></li>
<li><a href="#_create_the_topcomponent">Create the TopComponent</a></li>
<li><a href="#_set_dependency_on_the_javafx_runtime">Set Dependency on the JavaFX Runtime</a></li>
<li><a href="#_port_the_javafx_chart">Port the JavaFX Chart</a></li>
</ul>
</li>
<li><a href="#_splitting_the_table_from_the_chart">Splitting the Table from the Chart</a>
<ul class="sectlevel2">
<li><a href="#_create_the_stock_trader_api_module">Create the Stock Trader API Module</a></li>
<li><a href="#_create_the_bar_chart_module">Create the Bar Chart Module</a></li>
</ul>
</li>
<li><a href="#_plugging_in_new_charts">Plugging in New Charts</a>
<ul class="sectlevel2">
<li><a href="#_create_the_pie_chart_module">Create the Pie Chart Module</a></li>
<li><a href="#_create_the_area_chart_module">Create the Area Chart Module</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial provides step-by-step instructions for integrating JavaFX features into a NetBeans Platform application. Since the NetBeans Platform is typically used as a basis for corporate applications, the JavaFX chart components are ideal candidates for integration into NetBeans Platform applications. JavaFX, as a whole, is focused on bringing special effects to Java. In the context of charts, JavaFX provides a set of predefined charts, each of which can be animated, which is particularly useful to show changes in values presented in a chart.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://blogs.oracle.com/geertjan_images/resource/stock-trader-client-nb.pnh.png" alt="stock trader client nb.pnh">
</div>
</div>
<div class="paragraph">
<p>At the end of this tutorial, you will have various JavaFX charts in a NetBeans Platform application, as can be seen above, together with instructions and an API for plugging in additional charts.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_examining_the_swing_interop_sample">Examining the Swing Interop Sample</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We begin by looking at a sample that comes with NetBeans IDE. It provides all the JavaFX code we&#8217;ll need. In the following sections, we&#8217;ll port the code to a NetBeans Platform application.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Choose File &gt; New Project (Ctrl+Shift+N). Under Categories, select Samples | JavaFX. Under Projects, select SwingInterop.
image::images/javafx_72_swinginterop-1.png[] Click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the Name and Location panel, specify where the project should be stored:
image::images/javafx_72_swinginterop-2.png[] Click Finish.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Browse through the structure of your new application:
image::images/javafx_72_swinginterop-3.png[]</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Right-click the application and choose Run. You should now see the following:
image::images/javafx_72_swinginterop-4.png[]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Change the first value in the 2008 table and press Enter. Notice that the chart is animated while the value changes.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>For the application we&#8217;re going to create, we don&#8217;t need the "Web Browser" tab. Let&#8217;s modify the sample application so that we have exactly the code we need. All the changes below apply to the class  <code>SwingInterop.java</code> , because we can use  <code>SampleTableModel</code>  unchanged.</p>
<div class="ulist">
<ul>
<li>
<p>Delete the  <code>createBrowser()</code>  method.</p>
</li>
<li>
<p>Delete all references to  <code>browserFxPanel</code> , which is the  <code>JFXPanel</code>  that embeds the JavaFX web view, which we do not need.</p>
</li>
<li>
<p>Replace the  <code>JTabbedPane</code>  and  <code>JSplitPane</code>  with a  <code>JPanel</code> .</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The  <code>init</code>  method should now be as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void init() {

    tableModel = new SampleTableModel();
    // create javafx panel for charts
    chartFxPanel = new JFXPanel();
    chartFxPanel.setPreferredSize(new Dimension(PANEL_WIDTH_INT, PANEL_HEIGHT_INT));

    JPanel panel = new JPanel();
    panel.setLayout(new BorderLayout());

    //JTable
    JTable table = new JTable(tableModel);
    table.setAutoCreateRowSorter(true);
    table.setGridColor(Color.DARK_GRAY);
    SwingInterop.DecimalFormatRenderer renderer = new SwingInterop.DecimalFormatRenderer();
    renderer.setHorizontalAlignment(JLabel.RIGHT);
    for (int i = 0; i &lt; table.getColumnCount(); i++) {
        table.getColumnModel().getColumn(i).setCellRenderer(renderer);
    }

    JScrollPane tablePanel = new JScrollPane(table);
    tablePanel.setPreferredSize(new Dimension(PANEL_WIDTH_INT, TABLE_PANEL_HEIGHT_INT));

    JPanel chartTablePanel = new JPanel();
    chartTablePanel.setLayout(new BorderLayout());
    chartTablePanel.add(chartFxPanel, BorderLayout.CENTER);

    panel.add(chartTablePanel, BorderLayout.CENTER);
    panel.add(tablePanel, BorderLayout.SOUTH);

    add(panel, BorderLayout.CENTER);

    // create JavaFX scene
    Platform.runLater(new Runnable() {
        public void run() {
            createScene();
        }
    });

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the application again and you should see the following, that is, the JavaFX chart is now directly in a  <code>JPanel</code> :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/javafx_72_swinginterop-5.png" alt="javafx 72 swinginterop 5">
</div>
</div>
<div class="paragraph">
<p>You now have code that is ready to be ported to a NetBeans Platform application.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_up_the_application">Setting Up the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s imagine that we&#8217;re creating a stock trader application. That provides a desktop client scenario where JavaFX charts would be useful to integrate.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Choose File &gt; New Project (Ctrl+Shift+N). Under Categories, select NetBeans Modules. Under Projects, select NetBeans Platform Application:
image::images/javafx_72_new-app-1.png[] Click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the Name and Location panel:</p>
<div class="ulist">
<ul>
<li>
<p>In the Project Name field, type  <code>StockTraderClient</code> .</p>
</li>
<li>
<p>In the Project Location field, change the value to any directory on your computer where the application will be stored.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/javafx_72_new-app-2.png" alt="javafx 72 new app 2">
</div>
</div>
<div class="paragraph">
<p>Click Finish. The IDE creates the  <code>StockTraderClient</code>  project:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/javafx_72_new-app-3.png" alt="javafx 72 new app 3">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Right-click the Modules node and choose Add New Library:
image::images/javafx_72_new-app-4.png[]</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Click Browse and browse to the  <code>jfxrt.jar</code>  in the JavaFX Runtime:
image::images/javafx_72_new-app-5.png[]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Click Select, then click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p><code>jfxrt</code>  should be the project name:
image::images/javafx_72_new-app-6.png[]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Type  <code>javafx</code>  as the code name base:
image::images/javafx_72_new-app-7.png[]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The code name base is a unique identifier for a module. In the case of a library wrapper module, you&#8217;ll typically use the name of the root package, such as  <code>org.netbeans</code> , but in the case of JavaFX it is  <code>javafx</code> , as the code name base.</p>
</div>
<div class="paragraph">
<p>Click Finish. The application now has a new module called  <code>jfxrt</code> , which wraps the JavaFX runtime JAR:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/javafx_72_new-app-8.png" alt="javafx 72 new app 8">
</div>
</div>
<div class="paragraph">
<p>1.
In the JavaFX Runtime distribution, you&#8217;ll find a long list of native libraries.</p>
</div>
<div class="paragraph">
<p>If you use Java 7 Update 6 or later, you will not need to include the native libraries in your application, because the JDK and JRE already include them.</p>
</div>
<div class="paragraph">
<p>For example, for Windows, the list looks like the image on the left. Switch to the Files window. Expand the  <code>jfxrt</code>  folder and create a new subfolder within  <code>release</code> , named  <code>modules/bin</code> . Into that folder, copy all the native libraries, as shown in the image on the right:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/javafx_72_jfx-rt-1.png" alt="javafx 72 jfx rt 1">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/javafx_72_jfx-rt-2.png" alt="javafx 72 jfx rt 2">
</div>
</div>
<div class="paragraph">
<p>Your application now contains the  <code>jfxrt.jar</code> , as well as the native libraries required by JavaFX.</p>
</div>
<div class="paragraph">
<p>You&#8217;re now ready to create a module where you&#8217;ll embed the JavaFX chart into a  <code>TopComponent</code> .</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_embedding_a_javafx_chart_in_a_topcomponent">Embedding a JavaFX Chart in a TopComponent</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We begin by creating a new module. Then we use the New Window wizard to create a new  <code>TopComponent</code> . We set a dependency on the  <code>jfxrt</code>  module so that the  <code>TopComponent</code>  can access JavaFX packages. Then we round off the section by moving the code from the Swing Interop sample into the  <code>TopComponent</code> .</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#create-module">Create the Module</a></p>
</li>
<li>
<p><a href="#create-topcomponent">Create the TopComponent</a></p>
</li>
<li>
<p><a href="#set-dependency">Set Dependency on the JavaFX Runtime</a></p>
</li>
<li>
<p><a href="#port-chart">Port the JavaFX Chart</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_create_the_module">Create the Module</h3>
<div class="paragraph">
<p>In this section, you use the New Module wizard to create a new module.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the Modules node and choose Add New:
image::images/javafx_72_new-module-1.png[]</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>The module we&#8217;re now creating is going to contain the core functionality of the application. Ultimately, there&#8217;ll be many modules that will be optional, such as a range of charting windows, while this module will always remain essential to the application. Hence, we will name this module  <code>Core</code> :
image::images/javafx_72_new-module-2.png[]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>We imagine that we own a URL  <code>stocktrader.org</code> , which means that that URL is unique. Turning the URL around, we arrive at the prefix of the code base for all our functionality modules. Next, in this particular case, we add  <code>core</code> , since that is the name of our module and so we have  <code>org.stocktrader.core</code>  as the unique identifier of our module:
image::images/javafx_72_new-module-3.png[]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Click Finish. We now have a new module in our application, named  <code>Core</code> :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/javafx_72_new-module-4.png" alt="javafx 72 new module 4">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_create_the_topcomponent">Create the TopComponent</h3>
<div class="paragraph">
<p>In this section, you use the New Window wizard to create a new window.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the  <code>org.stocktrader.core</code>  package and choose New | Other. In the Module Development category, choose Window:
image::images/javafx_72_new-window-1.png[]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the Window Position drop-down, choose "editor". Select "Open on Application Start":
image::images/javafx_72_new-window-2.png[]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Type "Core" as class name prefix:
image::images/javafx_72_new-window-3.png[]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Click Finish. We now have a new window in our application, named  <code>CoreTopComponent</code> , together with libraries that are the dependencies required by  <code>CoreTopComponent</code> :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/javafx_72_new-window-4.png" alt="javafx 72 new window 4">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_set_dependency_on_the_javafx_runtime">Set Dependency on the JavaFX Runtime</h3>
<div class="paragraph">
<p>In this section, you make the JavaFX classes accessible to your  <code>TopComponent</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the Libraries node and choose Add Module Dependency:
image::images/javafx_72_set-dep-1.png[]</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Scroll down to your  <code>jfxrt</code>  module:
image::images/javafx_72_set-dep-2.png[]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Click OK. We now have a new dependency on the JavaFX Runtime, so that we can use the JavaFX classes in our  <code>TopComponent</code> :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/javafx_72_set-dep-3.png" alt="javafx 72 set dep 3">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_port_the_javafx_chart">Port the JavaFX Chart</h3>
<div class="paragraph">
<p>In this section, you move the useful parts of the Swing Interop sample into your Core module.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Copy the  <code>SampleTableModel.java</code>  file into the  <code>org.stocktrader.core</code>  package. Do so by copying the class, right-clicking on the package where you want to copy it to, and choosing Paste | Refactor Copy and then clicking the Refactor button.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Copy the fields at the top of the  <code>SwingInterop.java</code>  file to the top of the  <code>TopComponent</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Copy the methods  <code>createScene</code> ,  <code>createBarChart</code> , and  <code>DecimalFormatRenderer</code>  into the body of the  <code>TopComponent</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Copy the  <code>init</code>  method into the  <code>TopComponent</code>  and change  <code>SwingInterop.DecimalFormatRenderer</code>  to  <code>DecimalFormatRenderer</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Change the constructor of the  <code>TopComponent</code>  to set the layout and to call the  <code>init</code>  metod, as follows, that is, by adding the two highlighted lines below:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public CoreTopComponent() {
    initComponents();
    setName(Bundle.CTL_CoreTopComponent());
    setToolTipText(Bundle.HINT_CoreTopComponent());
    *setLayout(new BorderLayout());
    init();*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Right-click the application, choose Run, and the application starts up, showing the JavaFX chart, together with the  <code>JTable</code>  that controls it:
image::images/javafx_72_result-1.png[]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Change the first value in the 2008 table and press Enter. Notice that the chart is animated while the value changes.</p>
</div>
<div class="paragraph">
<p>In this section, you integrated a JavaFX chart into a  <code>TopComponent</code> . In the next section, we will begin to make the application more modular. By the end of that section, the  <code>JTable</code>  will be in one module, while the JavaFX Chart will be in another.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_splitting_the_table_from_the_chart">Splitting the Table from the Chart</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To make the application more modular, we will move the JavaFX chart into a separate module. Because the interaction between the JavaFX chart and the  <code>JTable</code>  is done via the  <code>SampleTableModel</code> , we will move that class into a separate module, too. That module will be the API between the table and the chart.</p>
</div>
<div class="paragraph">
<p>When you complete this section, you will have a modular infrastructure letting you provide alternative JavaFX charts, which will all be made available by separate modules that integrate with the  <code>SampleTableModel</code>  in the API module.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#create-api">Create the Stock Trader API Module</a></p>
</li>
<li>
<p><a href="#create-bar">Create the Bar Chart Module</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_create_the_stock_trader_api_module">Create the Stock Trader API Module</h3>
<div class="paragraph">
<p>In this section, you create a new module for the  <code>SampleTableModel</code>  class. You expose the package containing the class and you set a dependency on it in the  <code>Core</code>  module.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click on the StockTraderClient&#8217;s Modules node and choose Add New. Create a new module, named  <code>StockTraderAPI</code> . When you click Next, set  <code>org.stocktrader.api</code>  as the code name base for the module. Click Finish and you will have a new module, named StockTraderAPI.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Right-click on the StockTraderClient&#8217;s Libraries node and choose Add Module Dependency. Set a dependency on the  <code>jfxrt</code>  module and click Finish. Your API module now has access to the JavaFX classes.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the Core module, right-click on  <code>SampleTableModel</code>  and choose Cut. Next, in the StockTraderAPI module, right-click on the  <code>org.stocktrader.api</code>  package and choose Paste | Refactor Copy and then click Refactor. The class is moved into the new package, while it&#8217;s package statement has been updated.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Create a new Java class named  <code>StockTraderUtilities</code>  in the  <code>org.stocktrader.api</code>  package. In this class, create a method that will ensure that only one instance of  <code>SampleTableModel</code>  is made available:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package org.stocktrader.api;

public class StockTraderUtilities {

    private static SampleTableModel stm = null;

    public static SampleTableModel getSampleTableModel() {
        if (stm == null){
            return stm = new SampleTableModel();
        } else {
            return stm;
        }
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Right-click on the StockTraderAPI project node and choose Properties. In the Project Properties dialog, click the API Versioning tab. Then put a checkmark next to the package containing the classes that you want to expose to the rest of the application, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/javafx_72_new-api-0.png" alt="javafx 72 new api 0">
</div>
</div>
<div class="paragraph">
<p>Click OK. Now the package containing our classes has been exposed to the rest of the application.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>In the Core module, right-click on Libraries node and choose Add Module Dependency. Set a dependency on the StockTraderAPI.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
Check that the structure of the application is now as follows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/javafx_72_new-api-7.png" alt="javafx 72 new api 7">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_create_the_bar_chart_module">Create the Bar Chart Module</h3>
<div class="paragraph">
<p>In this section, you create a module containing a  <code>TopComponent</code>  where you will embed the JavaFX chart that is currently in the  <code>CoreTopComponent</code> . Since the table and the JavaFX chart interact via the  <code>SampleTableModel</code> , the modules containing the table and the chart will both depend on the StockTraderAPI module.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click on the StockTraderClient&#8217;s Modules node and choose Add New. Create a new module, named  <code>BarChart</code> . When you click Next, set  <code>org.stocktrader.chart.bar</code>  as the code name base and "Chart - Bar" as the display name. Click Finish and you will have a new module, named "Chart - Bar", which we will refer to below as the "bar chart module".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Right-click on the bar chart module&#8217;s Libraries node and choose Add Module Dependency. Set a dependency on the  <code>jfxrt</code>  module and click Finish. The bar chart module now has access to the JavaFX classes. Also set a dependency on the StockTraderAPI module, so that the bar chart module will have access to the table model.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the bar chart module, use the New Window wizard to create a new window in the editor position, which should open at start up, with  <code>BarChart</code>  as the class name prefix.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Open  <code>CoreTopComponent</code>  and  <code>BarChartTopComponent</code>  and do the following:</p>
<div class="ulist">
<ul>
<li>
<p>Move the methods  <code>createScene</code>  and  <code>createBarChart</code>  into the  <code>BarChartTopComponent</code> .</p>
</li>
<li>
<p>Delete  <code>DecimalFormatRenderer</code>  and all references to it. We&#8217;ll not use it at the moment, since it&#8217;s not directly relevant to the application we&#8217;re creating.</p>
</li>
<li>
<p>Move the fields  <code>chartFxPanel</code>  and  <code>chart</code>  into the  <code>BarChartTopComponent</code> .</p>
</li>
<li>
<p>Copy the field  <code>tableModel</code>  into the  <code>BarChartTopComponent</code>  because both  <code>TopComponents</code>  will need to have access to this class.</p>
</li>
<li>
<p>In  <code>CoreTopComponent</code> , clean up the  <code>init</code>  method, so that it only contains the code that you actually need:</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void init() {
    tableModel = StockTraderUtilities.getSampleTableModel();
    JTable table = new JTable(tableModel);
    table.setAutoCreateRowSorter(true);
    table.setGridColor(Color.DARK_GRAY);
    add(table, BorderLayout.CENTER);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similarly, in  <code>BarChartTopComponent</code> , create an  <code>init</code>  method that only contains the chart-related code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void init() {
    tableModel = StockTraderUtilities.getSampleTableModel();
    chartFxPanel = new JFXPanel();
    add(chartFxPanel, BorderLayout.CENTER);
    //Make sure to add the line below:
    Platform.setImplicitExit(false);
    Platform.runLater(new Runnable() {
        public void run() {
            createScene();
        }
    });
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`` link:http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html[Platform.setImplicitExit]``  sets the implicitExit attribute to the specified value. If this attribute is true, the JavaFX runtime will implicitly shutdown when the last window is closed; the JavaFX launcher will call the Application.stop() method and terminate the JavaFX application thread. If this attribute is false, the application will continue to run normally even after the last window is closed, until the application calls exit(). The default value is true.</pre>
</div>
</div>
<div class="paragraph">
<p>Notice how modulerizing the code is little more than refactoring. And, in the end, you have code that is much clearer than it was in the beginning.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In  <code>BarChartTopComponent</code> , add these lines to the end of the constructor, to set the layout and call the  <code>init</code>  method:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">setLayout(new BorderLayout());
init();</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>In  <code>CoreTopComponent</code> , change the  <code>@TopComponent.Registration</code>  so that "mode" is set to "output", instead of "editor". That way, our table will be displayed at the bottom of the application frame, while the chart will be displayed in the editor area, which makes for a better appearance.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Check that your application now has the following structure:
image::images/javafx_72_result-3.png[]</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Right-click the application, choose Run, and the application starts up, showing the JavaFX chart, together with the  <code>JTable</code>  that controls it. This time, however, the table and the chart are in separate windows, though they&#8217;re able to interact because they share a common table model:
image::images/javafx_72_result-2.png[]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Change a value in the table and press Enter. Notice that the chart is animated while the value changes.</p>
</div>
<div class="paragraph">
<p>In the final section of this tutorial, we will add new modules, each containing new JavaFX charts, which will be integrated with the rest of the application because they will all share the same table model.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_plugging_in_new_charts">Plugging in New Charts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we add new modules providing a JavaFX pie chart and a JavaFX area chart. They will both be animated, just like the bar chart. Whenever the user changes a value in the table, all charts will be animated while performing the change.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#create-pie">Create the Pie Chart Module</a></p>
</li>
<li>
<p><a href="#create-area">Create the Area Chart Module</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_create_the_pie_chart_module">Create the Pie Chart Module</h3>
<div class="paragraph">
<p>In this section, you create a module containing a  <code>TopComponent</code>  where you will embed the JavaFX pie chart. The module will need to have access to the JavaFX classes, as well as to the Stock Trader API.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click on the StockTraderClient&#8217;s Modules node and choose Add New. Create a new module, named  <code>PieChart</code> . When you click Next, set  <code>org.stocktrader.chart.pie</code>  as the code name base and "Chart - Pie" as the display name. Click Finish and you will have a new module, named "Chart - Pie", which we will refer to below as the "pie chart module".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Right-click on the bar chart module&#8217;s Libraries node and choose Add Module Dependency. Set a dependency on the  <code>jfxrt</code>  module and click Finish. The pie chart module now has access to the JavaFX classes. Also set a dependency on the StockTraderAPI module, so that the pie chart module will have access to the table model.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
In the pie chart module, use the New Window wizard to create a new window in the explorer position, which is the left-most window in the NetBeans Platform, which should open at start up:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/javafx_72_new-pie-1.png" alt="javafx 72 new pie 1">
</div>
</div>
<div class="paragraph">
<p>Click Next and set  <code>PieChart</code>  as the class name prefix. Click Finish.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Copy the code you added to the  <code>BarChartTopComponent</code>  into the  <code>PieChartTopComponent</code> . However, instead of a bar chart, you now want to create a pie chart:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public PieChart createPieChart() {
    ObservableList data = FXCollections.observableArrayList();
    List&lt;String&gt; columnNames = tableModel.getColumnNames();
    for (String string : columnNames) {
        data.add(new PieChart.Data(string, 20));
    }
    final PieChart chart = new PieChart(FXCollections.observableArrayList(data));
    tableModel.addTableModelListener(new TableModelListener() {
        public void tableChanged(TableModelEvent e) {
            if (e.getType() == TableModelEvent.UPDATE) {
                final int row = e.getFirstRow();
                final int column = e.getColumn();
                final Object value = ((SampleTableModel) e.getSource()).getValueAt(row, column);
                Platform.setImplicitExit(false);
                Platform.runLater(new Runnable() {
                    public void run() {
                        PieChart.Data s = chart.getData().get(row);
                        s.setPieValue((Double)value);
                    }
                });
            }
        }
    });
    chart.setId("BasicPie");
    return chart;
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Run the application and notice that you now have a pie chart and that, when you make changes to the table, the pie chart animates together with the bar chart:
image::images/javafx_72_result-4.png[]</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_create_the_area_chart_module">Create the Area Chart Module</h3>
<div class="paragraph">
<p>In this section, you create a module containing a  <code>TopComponent</code>  where you will embed the JavaFX area chart.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Follow all the steps in the previous section, using "AreaChart" as the project name,  <code>org.stocktrader.chart.area</code>  as the code name base, and "Chart - Area" as the display name. Add dependencies on the  <code>jfxrt</code>  module and on the Stock Trader API. Use the New Window wizard to create a new  <code>TopComponent</code> , in the properties position, which should open at start up.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Copy the code you added to the  <code>BarChartTopComponent</code>  into the  <code>AreaChartTopComponent</code> . However, instead of a bar chart, you now want to create an area chart:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">protected AreaChart&lt;Number, Number&gt; createAreaChart() {
    NumberAxis xAxis = new NumberAxis();
    NumberAxis yAxis = new NumberAxis();
    AreaChart&lt;Number,Number&gt; ac = new AreaChart&lt;Number,Number&gt;(xAxis,yAxis);
    // setup chart
    ac.setTitle("Area Chart Example");
    xAxis.setLabel("X Axis");
    yAxis.setLabel("Y Axis");
    // add starting data
    for (int s=0;s&lt;3;s++) {
        XYChart.Series&lt;Number,Number&gt; series = new XYChart.Series&lt;Number,Number&gt;();
        series.setName("Data Series "+s);
        double x = 0;
        while (x&lt;95) {
            series.getData().add(new XYChart.Data&lt;Number,Number&gt;(x, Math.random()*99));
            x += 5 + (15*Math.random());
        }
        series.getData().add(new XYChart.Data&lt;Number,Number&gt;(99d, Math.random()*99));
        ac.getData().add(series);
    }
    return ac;
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Run the application and notice that you now have three charts that, when you make changes to the table, all change simultaneously:
image::images/javafx_72_result-5.png[]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The tutorial is complete. You have created a modular application on the NetBeans Platform, while making use of JavaFX chart technology:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/javafx_72_result-6.png" alt="javafx 72 result 6">
</div>
</div>
<div class="paragraph">
<p><a href="http://netbeans.apache.org/community/mailing-lists.html"> Send Us Your Feedback</a></p>
</div>
</div>
</div>
</div>
        
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/74/nbm-javafx.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
