
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans 向导模块教程</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans 向导模块教程 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, NetBeans 向导模块教程">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">NetBeans 向导模块教程</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/69/nbm-wizard_zh_CN.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_创建模块项目">创建模块项目</a></li>
<li><a href="#_创建向导基础结构">创建向导基础结构</a></li>
<li><a href="#_注册向导操作类">注册向导操作类</a></li>
<li><a href="#_设计向导内容">设计向导内容</a></li>
<li><a href="#_处理用户数据">处理用户数据</a></li>
<li><a href="#_验证用户数据">验证用户数据</a></li>
<li><a href="#_在重新启动时永久保留数据">在重新启动时永久保留数据</a></li>
<li><a href="#_标记向导">标记向导</a></li>
<li><a href="#_深入阅读">深入阅读</a></li>
<li><a href="#_版本控制">版本控制</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>在本教程中，您将了解如何使用  <a href="http://bits.netbeans.org/dev/javadoc/org-openide-dialogs/org/openide/package-summary.html">NetBeans 对话框 API</a> 的向导类提供的主要功能。</p>
</div>
<div class="paragraph">
<p>在 NetBeans 平台应用程序中，可以创建很多不同种类的向导。如果要创建在“新建项目”对话框中显示的向导，请参见 <a href="https://netbeans.apache.org/tutorials/nbm-projectsamples.html">项目样例模块教程</a>。如果要创建在“新建文件”对话框中显示的向导，请参见 <a href="https://netbeans.apache.org/tutorials/nbm-filetemplates.html">文件模板模块教程</a>。在本教程中，将创建一个在单击工具栏按钮时显示的常规向导。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_创建模块项目">创建模块项目</h2>
<div class="sectionbody">
<div class="paragraph">
<p>我们首先使用“新建模块”项目向导。在向导完成后，我们将获得每个 NetBeans 模块所需的基本源结构以及一些缺省文件。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>选择“文件”&gt;“新建项目”(Ctrl+Shift+N)。在“类别”下选择“NetBeans 模块”。在“项目”下选择“模块”。单击“下一步”。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>在“名称和位置”面板的“项目名称”字段中键入  <code>DemoWizard</code> 。将项目位置更改为计算机上的任意目录。将“独立模块”选项和“设置为主项目”复选框保留为选中状态。单击“下一步”。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>在“基本模块配置”面板的“代码名称基”中键入  <code>org.demo.wizard</code> 。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>选择“生成 XML 层”。保留本地化包和 XML 层文件的位置，以将其存储在名为  <code>org/demo/wizard</code>  的包中。单击“完成”。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>IDE 将创建  <code>DemoWizard</code>  项目。此项目包含所有源代码和项目 meta 数据，例如项目的 Ant 生成脚本。此项目在 IDE 中打开。您可以在“项目”窗口 (Ctrl-1) 中查看其逻辑结构，在“文件”窗口 (Ctrl-2) 中查看其文件结构。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_创建向导基础结构">创建向导基础结构</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在此部分，我们使用“向导”向导在模块中添加向导桩模块。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在“项目”窗口中，右键单击 "DemoWizard" 项目节点，选择“新建”|“其他”，然后选择“模块开发”|“向导”：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_wizard-wizard.png" alt="wizard wizard wizard">
</div>
</div>
<div class="paragraph">
<p>单击“下一步”。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>在“向导类型”面板中，在“向导面板数”字段中键入 2，并将其他值保持不变：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_wizard-wizard-3.png" alt="wizard wizard wizard 3">
</div>
</div>
<div class="paragraph">
<p>上述面板中的字段如下所示：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>注册类型</strong>。确定用户访问向导的位置。如果选择“定制”，“向导”向导将创建一个新的操作类，可用于打开并初始化向导。如果选择“新建文件”，“向导”向导将在模块的  <code>layer.xml</code>  文件中注册向导。</p>
</li>
<li>
<p><strong>向导步骤顺序</strong>。确定向导是否为线性的，或者向导用户能否跳过向导步骤，具体取决于先前在向导中选择的内容。线性向导是“静态的”（缺省设置）；而具有可跳过步骤的向导需要定制迭代器类，这是在选择“动态”时创建的。</p>
</li>
<li>
<p><strong>向导面板数</strong>。确定将创建的向导面板数。对于每个向导步骤，将创建两个 Java 文件（视图和控制器）。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>单击“下一步”。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>在“名称和位置”面板的“类名前缀”中键入  <code>Demo</code> ，然后从“包”下拉列表中选择主包：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_wizard-wizard-4.png" alt="wizard wizard wizard 4">
</div>
</div>
<div class="paragraph">
<p>单击“完成”。</p>
</div>
<div class="paragraph">
<p>在“项目”窗口中，您现在应看到如下内容：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_projects-window.png" alt="wizard projects window">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_注册向导操作类">注册向导操作类</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在此部分，我们将修改操作类，并在  <code>layer.xml</code>  文件中注册该类。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>打开  <code>DemoWizardAction.java</code>  文件，然后将所有代码替换为以下内容：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package org.demo.wizard;

import java.awt.Component;
import java.awt.Dialog;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.text.MessageFormat;
import javax.swing.JComponent;
import org.openide.DialogDisplayer;
import org.openide.WizardDescriptor;

public final class DemoWizardAction implements ActionListener {

    private WizardDescriptor.Panel[] panels;

    public void actionPerformed(ActionEvent e) {
        WizardDescriptor wizardDescriptor = new WizardDescriptor(getPanels());
        // {0} will be replaced by WizardDesriptor.Panel.getComponent().getName()
        wizardDescriptor.setTitleFormat(new MessageFormat("{0}"));
        wizardDescriptor.setTitle("Your wizard dialog title here");
        Dialog dialog = DialogDisplayer.getDefault().createDialog(wizardDescriptor);
        dialog.setVisible(true);
        dialog.toFront();
        boolean cancelled = wizardDescriptor.getValue() != WizardDescriptor.FINISH_OPTION;
        if (!cancelled) {
            // do something
        }
    }

    /**
     * Initialize panels representing individual wizard's steps and sets
     * various properties for them influencing wizard appearance.
     */
    private WizardDescriptor.Panel[] getPanels() {
        if (panels == null) {
            panels = new WizardDescriptor.Panel[]{
                        new DemoWizardPanel1(),
                        new DemoWizardPanel2()
                    };
            String[] steps = new String[panels.length];
            for (int i = 0; i &lt; panels.length; i++) {
                Component c = panels[i].getComponent();
                // Default step name to component name of panel. Mainly useful
                // for getting the name of the target chooser to appear in the
                // list of steps.
                steps[i] = c.getName();
                if (c instanceof JComponent) { // assume Swing components
                    JComponent jc = (JComponent) c;
                    // Sets step number of a component
                    // TODO if using org.openide.dialogs &gt;= 7.8, can use WizardDescriptor.PROP_*:
                    jc.putClientProperty("WizardPanel_contentSelectedIndex", new Integer(i));
                    // Sets steps names for a panel
                    jc.putClientProperty("WizardPanel_contentData", steps);
                    // Turn on subtitle creation on each step
                    jc.putClientProperty("WizardPanel_autoWizardStyle", Boolean.TRUE);
                    // Show steps on the left side with the image on the background
                    jc.putClientProperty("WizardPanel_contentDisplayed", Boolean.TRUE);
                    // Turn on numbering of all steps
                    jc.putClientProperty("WizardPanel_contentNumbered", Boolean.TRUE);
                }
            }
        }
        return panels;
    }

    public String getName() {
        return "Start Sample Wizard";
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>我们将使用与生成的内容相同的代码，所不同的是，我们将实现  <code>ActionListener</code>  而不是  <code>CallableSystemAction</code> 。这样做是因为， <code>ActionListener</code>  是一个标准 JDK 类，而  <code>CallableSystemAction</code>  不是。从 NetBeans 平台 6.5 开始，我们可以改用标准 JDK 类，这种类使用更简便，并且需要的代码更少。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>在  <code>layer.xml</code>  文件中注册操作类，如下所示：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;filesystem&gt;
    &lt;folder name="Actions"&gt;
        &lt;folder name="File"&gt;
            &lt;file name="org-demo-wizard-DemoWizardAction.instance"&gt;
                &lt;attr name="delegate" newvalue="org.demo.wizard.DemoWizardAction"/&gt;
                &lt;attr name="iconBase" stringvalue="org/demo/wizard/icon.png"/&gt;
                &lt;attr name="instanceCreate" methodvalue="org.openide.awt.Actions.alwaysEnabled"/&gt;
                &lt;attr name="noIconInMenu" stringvalue="false"/&gt;
            &lt;/file&gt;
        &lt;/folder&gt;
    &lt;/folder&gt;
    &lt;folder name="Toolbars"&gt;
        &lt;folder name="File"&gt;
            &lt;file name="org-demo-wizard-DemoWizardAction.shadow"&gt;
                &lt;attr name="originalFile" stringvalue="Actions/File/org-demo-wizard-DemoWizardAction.instance"/&gt;
                &lt;attr name="position" intvalue="0"/&gt;
            &lt;/file&gt;
        &lt;/folder&gt;
    &lt;/folder&gt;
&lt;/filesystem&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>"iconBase" 元素指向主包中名为 "icon.png" 的图像。可以使用您自己以该名称命名的图像，并确保该图像为 16x16 像素大小，或者使用以下图像：
image::images/wizard_icon.png[]</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>运行该模块。将启动应用程序，将会在  <code>layer.xml</code>  文件中指定的位置看到该工具栏按钮：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_result-1.png" alt="wizard result 1">
</div>
</div>
<div class="paragraph">
<p>单击该按钮，将会显示向导：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_result-2.png" alt="wizard result 2">
</div>
</div>
<div class="paragraph">
<p>单击“下一步”，将会发现最终面板中的“完成”按钮已启用：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_result-3.png" alt="wizard result 3">
</div>
</div>
<div class="paragraph">
<p>现在，向导基础结构可以正常工作了，让我们添加一些内容。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_设计向导内容">设计向导内容</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在此部分，我们将在向导中添加一些内容并定制其基本功能。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>打开  <code>DemoWizardAction.java</code>  文件，将会发现您可以为向导设置各种不同的定制属性：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_wizard-tweaking.png" alt="wizard wizard tweaking">
</div>
</div>
<div class="paragraph">
<p>可以在 <a href="http://ui.netbeans.org/docs/ui_apis/wide/index.html">此处</a>了解这些属性的相关信息。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>在  <code>DemoWizardAction.java</code>  中，将  <code>wizardDescriptor.setTitle</code>  更改为以下内容：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">wizardDescriptor.setTitle("Music Selection");</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>打开  <code>DemoVisualPanel1.java</code>  和  <code>DemoVisualPanel2.java</code>  文件，并使用 "Matisse" GUI 生成器添加一些 Swing 组件，如下所示：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_panel-1-design.png" alt="wizard panel 1 design">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_panel-2-design.png" alt="wizard panel 2 design">
</div>
</div>
<div class="paragraph">
<p>从上面可以看到  <code>DemoVisualPanel1.java</code>  和  <code>DemoVisualPanel2.java</code>  文件以及一些 Swing 组件。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>在“源”视图中打开这两个面板，然后将其  <code>getName()</code>  方法分别更改为 "Name and Address" 和 "Musician Details"。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
再次运行该模块。在打开向导时，将会看到如下内容，具体取决于添加的 Swing 组件和提供的定制内容：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_result-4.png" alt="wizard result 4">
</div>
</div>
<div class="paragraph">
<p>上面向导左侧边栏中的图像是在  <code>DemoWizardAction.java</code>  文件中设置的，如下所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">wizardDescriptor.putProperty("WizardPanel_image", ImageUtilities.loadImage("org/demo/wizard/banner.png", true));</code></pre>
</div>
</div>
<div class="paragraph">
<p>现在，您已设计了向导内容，让我们添加一些代码以处理用户将输入的数据。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_处理用户数据">处理用户数据</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在此部分，您将了解如何在面板之间传递用户数据，以及在单击“完成”后如何向用户显示结果。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在  <code>WizardPanel</code>  类中，使用  <code>storeSettings</code>  方法检索可视面板中的数据集。例如，在  <code>DemoVisualPanel1.java</code>  文件中创建 getter，然后从  <code>DemoWizardPanel1.java</code>  文件中访问它们，如下所示：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void storeSettings(Object settings) {
    ((WizardDescriptor) settings).putProperty("name", ((DemoVisualPanel1)getComponent()).getNameField());
    ((WizardDescriptor) settings).putProperty("address", ((DemoVisualPanel1)getComponent()).getAddressField());
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>接下来，使用  <code>DemoWizardAction.java</code>  文件检索已设置的属性，并使用这些属性执行一些操作：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void actionPerformed(ActionEvent e) {
    WizardDescriptor wizardDescriptor = new WizardDescriptor(getPanels());
    // {0} will be replaced by WizardDesriptor.Panel.getComponent().getName()
    wizardDescriptor.setTitleFormat(new MessageFormat("{0}"));
    wizardDescriptor.setTitle("Music Selection");
    Dialog dialog = DialogDisplayer.getDefault().createDialog(wizardDescriptor);
    dialog.setVisible(true);
    dialog.toFront();
    boolean cancelled = wizardDescriptor.getValue() != WizardDescriptor.FINISH_OPTION;
    if (!cancelled) {
        *String name = (String) wizardDescriptor.getProperty("name");
        String address = (String) wizardDescriptor.getProperty("address");
        DialogDisplayer.getDefault().notify(new NotifyDescriptor.Message(name + " " + address));*
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>也可以按其他方式使用  <code>NotifyDescriptor</code> ，如代码完成框所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_notifydescriptor.png" alt="wizard notifydescriptor">
</div>
</div>
<div class="paragraph">
<p>现在，您已知道如何处理用户输入的数据了。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_验证用户数据">验证用户数据</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在此部分，您将了解在向导中单击“下一步”后如何验证用户输入的内容。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在  <code>DemoWizardPanel1</code>  中，更改类签名以实现  <code>WizardDescriptor.ValidatingPanel</code>  而不是  <code>WizardDescriptor.Panel</code> ：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class DemoWizardPanel1 implements WizardDescriptor.ValidatingPanel</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>在类顶部，将  <code>JComponent</code>  声明更改为带类型的声明：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private DemoVisualPanel1 component;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>实现所需的抽象方法，如下所示：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Override
public void validate() throws WizardValidationException {

    String name = component.getNameTextField().getText();
    if (name.equals("")){
        throw new WizardValidationException(null, "Invalid Name", null);
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>运行该模块。单击“下一步”，无需在“名称”字段中输入任何内容，将会看到以下结果。另外，还会发现由于验证失败而无法移到下一面板：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_validation1.png" alt="wizard validation1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>（可选）在名称字段为空时禁用“下一步”按钮。首先，在类顶部声明一个布尔值：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private boolean isValid = true;</code></pre>
</div>
</div>
<div class="paragraph">
<p>然后覆盖  <code>isValid()</code> ，如下所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Override
public boolean isValid() {
    return isValid;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>在调用  <code>validate()</code>  时（单击“下一步”按钮时调用），将返回 false：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Override
public void validate() throws WizardValidationException {

    String name = component.getNameTextField().getText();
    if (name.equals("")) {
        *isValid = false;*
        throw new WizardValidationException(null, "Invalid Name", null);
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>或者，也可以最初将布尔值设置为 false。然后实现  <code>DocumentListener</code> ，在字段上添加一个侦听程序；当用户在字段中键入某些内容时，将布尔值设置为 true 并调用  <code>isValid()</code> 。</p>
</div>
<div class="paragraph">
<p>现在，您已知道如何验证用户输入的数据了。</p>
</div>
<div class="paragraph">
<p>有关验证用户输入的详细信息，请参见本教程结尾的 Tom Wheeler 样例。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_在重新启动时永久保留数据">在重新启动时永久保留数据</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在此部分，您将了解如何在关闭应用程序时存储数据，以及在重新启动后打开向导时如何检索数据。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在  <code>DemoWizardPanel1.java</code>  中覆盖  <code>readSettings</code>  和  <code>storeSettings</code>  方法，如下所示：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">*JTextField nameField = ((DemoVisualPanel1) getComponent()).getNameTextField();
JTextField addressField = ((DemoVisualPanel1) getComponent()).getAddressTextField();*

@Override
public void readSettings(Object settings) {
    *nameField.setText(NbPreferences.forModule(DemoWizardPanel1.class).get("namePreference", ""));
    addressField.setText(NbPreferences.forModule(DemoWizardPanel1.class).get("addressPreference", ""));*
}

@Override
public void storeSettings(Object settings) {
    ((WizardDescriptor) settings).putProperty("name", nameField.getText());
    ((WizardDescriptor) settings).putProperty("address", addressField.getText());
    *NbPreferences.forModule(DemoWizardPanel1.class).put("namePreference", nameField.getText());
    NbPreferences.forModule(DemoWizardPanel1.class).put("addressPreference", addressField.getText());*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>再次运行该模块，然后在向导的第一个面板中键入名称和地址：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_nbpref1.png" alt="wizard nbpref1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>关闭应用程序，打开“文件”窗口，然后查看应用程序的  <code>build</code>  文件夹中的属性文件。现在，将会找到如下设置：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_nbpref2.png" alt="wizard nbpref2">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>再次运行应用程序，然后在打开向导时，将自动使用上面指定的设置定义向导字段中的值。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>现在，您已知道如何在重新启动时永久保留向导数据了。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_标记向导">标记向导</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在此部分，我们将“下一步”按钮的字符串（由向导基础结构提供）标记为 "Advance"。</p>
</div>
<div class="paragraph">
<p>术语“标记”表示定制（即，通常指在同一语言中进行少量修改），而“国际化”或“本地化”表示翻译为其他语言。有关 NetBeans 模块本地化的信息，请 <a href="http://translatedfiles.netbeans.org/index-l10n.html">转至此处</a>。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在“文件”窗口中，展开应用程序的  <code>branding</code>  文件夹，然后创建下面突出显示的文件夹/文件结构：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_branding-1.png" alt="wizard branding 1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>定义文件内容，如下所示：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">CTL_NEXT=&amp;amp;Advance &gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>您可能要标记的其他字符串如下所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">CTL_CANCEL
CTL_PREVIOUS
CTL_FINISH
CTL_ContentName</code></pre>
</div>
</div>
<div class="paragraph">
<p>缺省情况下，将 "CTL_ContentName" 关键字设置为 "Steps"；如果 "WizardPanel_autoWizardStyle" 属性未设置为 "FALSE"，则会在向导左面板中使用该关键字。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>运行应用程序，“下一步”按钮将标记为 "Advance"：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_branding-2.png" alt="wizard branding 2">
</div>
</div>
<div class="paragraph">
<p>（可选）使用  <code>DemoWizardAction.java</code>  文件（如上所述）删除向导的整个左侧部分，如下所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java"> wizardDescriptor.putProperty("WizardPanel_autoWizardStyle", Boolean.FALSE);</code></pre>
</div>
</div>
<div class="paragraph">
<p>上述设置将导致向导如下所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_branding-3.png" alt="wizard branding 3">
</div>
</div>
<div class="paragraph">
<p>现在，您已知道如何将向导基础结构中定义的字符串标记为您自己的标记版本了。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_深入阅读">深入阅读</h2>
<div class="sectionbody">
<div class="paragraph">
<p>我们在线提供了一些相关信息：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tom Wheeler 的 NetBeans 站点（单击下面的图像）：</p>
</li>
</ul>
</div>
<div class="openblock feature">
<div class="content">
<div class="imageblock left">
<div class="content">
<a class="image" href="http://www.tomwheeler.com/netbeans/"><img src="images/wizard_tom.png" alt="wizard tom"></a>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>虽然是为 NetBeans 5.5 编写的，但已成功在带有 JDK 1.6 的 Ubuntu Linux 上针对 NetBeans IDE 6.5.1 测试了上述样例。</p>
</div>
<div class="paragraph">
<p>该样例在说明如何验证用户数据方面尤其有用。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Geertjan 的博客:</p>
</li>
<li>
<p><a href="http://blogs.oracle.com/geertjan/entry/how_wizards_work">向导工作方式：第 1 部分 - 简介</a></p>
</li>
<li>
<p><a href="http://blogs.oracle.com/geertjan/entry/how_wizards_work_part_2">向导工作方式：第 2 部分 - 各种类型</a></p>
</li>
<li>
<p><a href="http://blogs.oracle.com/geertjan/entry/how_wizards_work_part_3">向导工作方式：第 3 部分 - 第一个向导</a></p>
</li>
<li>
<p><a href="http://blogs.oracle.com/geertjan/entry/how_wizards_work_part_4">向导工作方式：第 4 部分 - 您自己的迭代器</a></p>
</li>
<li>
<p><a href="http://blogs.oracle.com/geertjan/entry/how_wizards_work_part_5">向导工作方式：第 5 部分 - 重新使用和嵌入现有面板</a></p>
</li>
<li>
<p><a href="http://blogs.oracle.com/geertjan/entry/creating_a_better_java_class">创建更好的 Java 类向导</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_版本控制">版本控制</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>版本</strong></th>
<th class="tableblock halign-left valign-top"><strong>日期</strong></th>
<th class="tableblock halign-left valign-top"><strong>更改</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2009 年 3 月 31 日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">初始版本。待更改项：</p>
<p class="tableblock">* <span class="line-through">添加了有关验证用户输入的部分。</span>
* <span class="line-through">添加了有关在向导中存储/检索数据的部分。</span>
* 添加了一个表以列出所有 WizardDescriptor 属性。
* 添加了一个表以列出并说明所有向导 API 类。
* 添加了指向 Javadoc 的链接。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2009 年 4 月 1 日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">添加了一个验证部分，其中包括用于禁用“下一步”按钮的代码。另外，还添加了持久性部分。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2009 年 4 月 10 日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">整合了 Tom Wheeler 提供的注释，重新编写了标记部分，以便实际讲述标记内容，并引用了可以找到本地化信息的位置。</p></td>
</tr>
</tbody>
</table>
</div>
</div>
        
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/69/nbm-wizard_zh_CN.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
