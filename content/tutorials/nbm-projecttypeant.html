
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans Ant-Based Project Type Module Tutorial</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans Ant-Based Project Type Module Tutorial - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, NetBeans Ant-Based Project Type Module Tutorial">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>

  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">NetBeans Ant-Based Project Type Module Tutorial</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/nbm-projecttypeant.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_introduction_to_project_types">Introduction to Project Types</a></li>
<li><a href="#_creating_the_module_project">Creating the Module Project</a></li>
<li><a href="#_setting_dependencies">Setting Dependencies</a></li>
<li><a href="#_creating_the_project">Creating the Project</a></li>
<li><a href="#_creating_the_logical_view_provider">Creating the Logical View Provider</a></li>
<li><a href="#_creating_the_nodes">Creating the Nodes</a></li>
<li><a href="#_integrating_the_ant_build_tool">Integrating the Ant Build Tool</a></li>
<li><a href="#_installing_the_module">Installing the Module</a></li>
<li><a href="#_next_steps">Next Steps</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial demonstrates how to create a new project type for projects that need to use Ant as their build tool.</p>
</div>
<div class="paragraph">
<p>This tutorial assumes you want to create a project type for projects that need to use Ant as their build tool. If this is not the case, you should use the  <a href="nbm-projecttype.html">NetBeans Project Type Module Tutorial</a> instead.</p>
</div>
<div class="paragraph">
<p>You will also make use of this icon, which you can right-click here and download:
image::images/projecttypes_icon1.png[]</p>
</div>
<div class="paragraph">
<p>Optionally, for troubleshooting purposes, you can  <a href="http://kenai.com/projects/nb-antprojectsample">download the completed sample</a> and inspect the sources.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction_to_project_types">Introduction to Project Types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <em>project type</em> is a NetBeans Platform term for a grouping of folders and files that is treated as a single unit. Treating related folders and files as a single unit makes working with them easier for the end user.One way in which a project type simplifies life for the user is that you are able to fill the Projects window only with those folders and files that the end user is most likely to work.</p>
</div>
<div class="paragraph">
<p>For example, the Java project type in NetBeans IDE helps the end user to work with the folders and files belonging to a single Java application. As you can see below, the folders and files the end user most needs to work with are shown in the Projects window:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projecttypes_sample-3.png" alt="projecttypes sample 3">
</div>
</div>
<div class="paragraph">
<p>In this tutorial, we will create a project type that will look as follows in the Projects window:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projecttypes_demo-6.png" alt="projecttypes demo 6">
</div>
</div>
<div class="paragraph">
<p>Our project type will be defined by specific entries in the project&#8217;s  <code>project.xml</code>  file. The "Build Project" menu item, shown in the screenshot above, will call the "compile" target in the "build.xml" file, both of which are assumed to be present.</p>
</div>
<div class="paragraph">
<p>The following are the main NetBeans API classes we will be implementing in this tutorial:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Class</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code> <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-projectapi/org/netbeans/api/project/Project.html">org.netbeans.api.project.Project</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents the project.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code> <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-projectuiapi/org/netbeans/spi/project/ui/LogicalViewProvider.html">org.netbeans.spi.project.ui.LogicalViewProvider</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the logical view for the project.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code> <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-projectapi/org/netbeans/api/project/ProjectInformation.html">org.netbeans.api.project.ProjectInformation</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides supplemental information for the project.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code> <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-projectuiapi/org/netbeans/spi/project/ui/support/NodeFactory.html">org.netbeans.spi.project.ui.support.NodeFactory</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides one or more nodes for the logical view.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code> <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-projectapi/org/netbeans/spi/project/ActionProvider.html">org.netbeans.spi.project.ActionProvider</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides one or more actions for the project.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>At the end of this tutorial, your module source structure will be as follows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projecttypes_demo-7.png" alt="projecttypes demo 7">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_module_project">Creating the Module Project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We begin by working through the New Module Project wizard. At the end of it, we will have a basic source structure, with some default files, that every NetBeans module requires.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Choose File &gt; New Project (Ctrl+Shift+N). Under Categories, select NetBeans Modules. Under Projects, select Module. Click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the Name and Location panel, type  <code>DemoProjectType</code>  in the Project Name field. Change the Project Location to any directory on your computer. Leave the Standalone Module option and Set as Main Project checkbox selected. Click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the Basic Module Configuration panel, type  <code>org.netbeans.demo.project</code>  in Code Name Base.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Do not select "Generate XML Layer", since our module will not need a  <code>layer.xml</code>  file. Leave the location of the localizing bundle so that it will be stored in a package with the name  <code>org/netbeans/demo/project</code> . Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The IDE creates the  <code>DemoProjectType</code>  project. The project contains all of your sources and project metadata, such as the project&#8217;s Ant build script. The project opens in the IDE. You can view its logical structure in the Projects window (Ctrl-1) and its file structure in the Files window (Ctrl-2).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_dependencies">Setting Dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We will need to make use of several NetBeans APIs. In this step, we select the modules that provide the NetBeans APIs that we will need.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the project node and choose Properties. The Project Properties dialog box opens.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the Libraries panel, add dependencies on the following modules:</p>
<div class="ulist">
<ul>
<li>
<p>Ant</p>
</li>
<li>
<p>Ant-Based Project Support</p>
</li>
<li>
<p>Datasystems API</p>
</li>
<li>
<p>Dialogs API</p>
</li>
<li>
<p>Execution API</p>
</li>
<li>
<p>File System API</p>
</li>
<li>
<p>Module System API</p>
</li>
<li>
<p>Nodes API</p>
</li>
<li>
<p>Project API</p>
</li>
<li>
<p>Project UI API</p>
</li>
<li>
<p>UI Utilities API</p>
</li>
<li>
<p>Utilities API</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
Expand the module&#8217;s Libraries node in the Projects window and make sure that the list of APIs is as shown in the Libraries node below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projecttypes_demo-7.png" alt="projecttypes demo 7">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_project">Creating the Project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Next, we implement the  <code> <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-projectapi/org/netbeans/api/project/Project.html">org.netbeans.api.project.Project</a></code>  class.</p>
</div>
<div class="paragraph">
<p>At the end of this section, when you open a folder containing a  <code>nbprojects</code>  folder that has a  <code>project.xml</code>  with content as defined below&#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="https://netbeans.org/ns/project/1"&gt;
    &lt;type&gt;org.netbeans.demo.project.DemoProject&lt;/type&gt;
    &lt;configuration&gt;
        &lt;data xmlns="https://netbeans.org/ns/demo-project/1"&gt;
            &lt;name&gt;test&lt;/name&gt;
        &lt;/data&gt;
    &lt;/configuration&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#8230;&#8203;all the folders and files will be shown in the Projects window, just like the Files window, as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projecttypes_demo-1.png" alt="projecttypes demo 1">
</div>
</div>
<div class="paragraph">
<p>In subsequent sections, we&#8217;ll filter the display in the Projects window. For now, we&#8217;ll simply show everything the project provides.</p>
</div>
<div class="paragraph">
<p>Do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Create a Java class called  <code>DemoProject</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Change the default code to the following. Notice that we begin with an annotation that registers the project as applying to projects that have a  <code>project.xml</code>  as defined above.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@AntBasedProjectRegistration(type = "org.netbeans.demo.project.DemoProject",
iconResource = "org/netbeans/demo/project/icon1.png",
sharedName = "data",
sharedNamespace = "https://netbeans.org/ns/demo-project/1",
privateName = "project-private",
privateNamespace = "https://netbeans.org/ns/demo-project-private/1")
public class DemoProject implements <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-projectapi/org/netbeans/api/project/Project.html">Project</a> {

    final AntProjectHelper helper;

    public DemoProject(AntProjectHelper helper) {
        this.helper = helper;
    }

    @Override
    public Lookup getLookup() {
        return Lookups.fixed(new Object[]{
                    new Info()
                });
    }

    @Override
    public FileObject getProjectDirectory() {
        return helper.getProjectDirectory();
    }

    private final class Info implements <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-projectapi/org/netbeans/api/project/ProjectInformation.html">ProjectInformation</a> {

        @Override
        public String getName() {
            return helper.getProjectDirectory().getName();
        }

        public String getDisplayName() {
            return getName();
        }

        @Override
        public Icon getIcon() {
            return new ImageIcon(ImageUtilities.loadImage(
                    "org/netbeans/demo/project/icon1.png"));
        }

        @Override
        public void addPropertyChangeListener(PropertyChangeListener pcl) {
        }

        @Override
        public void removePropertyChangeListener(PropertyChangeListener pcl) {
        }

        @Override
        public Project getProject() {
            return DemoProject.this;
        }
    }

}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_logical_view_provider">Creating the Logical View Provider</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Next, we implement the  <code> <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-projectuiapi/org/netbeans/spi/project/ui/LogicalViewProvider.html">org.netbeans.spi.project.ui.LogicalViewProvider</a></code>  class.</p>
</div>
<div class="paragraph">
<p>Once we have implemented the  <code>LogicalViewProvider</code> , we&#8217;ll have filtered out everything from the Projects window, other than the project node.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projecttypes_demo-2.png" alt="projecttypes demo 2">
</div>
</div>
<div class="paragraph">
<p>Once we have achieved the above, we&#8217;ll begin registering nodes in the project&#8217;s lookup. In doing so, we&#8217;ll let the project display nodes that supplement the project node in the Projects window.</p>
</div>
<div class="paragraph">
<p>Do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Create a Java class called  <code>DemoProjectLogicalView</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Change the default code to the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">class DemoProjectLogicalView implements <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-projectuiapi/org/netbeans/spi/project/ui/LogicalViewProvider.html">LogicalViewProvider</a> {

    private final DemoProject project;

    public DemoProjectLogicalView(DemoProject project) {
        this.project = project;
    }

    @Override
    public org.openide.nodes.Node createLogicalView() {
        return new RootNode(project);
    }

    private static final class RootNode extends AbstractNode {

        public static final String DEMO_PROJECT_ICON_PATH =
                "org/netbeans/demo/project/icon1.png";
        public static final String REGISTERED_NODE_LOCATION =
                "Projects/org-netbeans-demo-project-DemoProject/Nodes";
        final DemoProject project;

        public RootNode(DemoProject project) {
            super(NodeFactorySupport.createCompositeChildren(project, REGISTERED_NODE_LOCATION), Lookups.singleton(project));
            this.project = project;
            setIconBaseWithExtension(DEMO_PROJECT_ICON_PATH);
        }

        @Override
        public Action[] getActions(boolean arg0) {
            Action[] nodeActions = new Action[7];
            nodeActions[0] = CommonProjectActions.newFileAction();
            //The 'null' is a reference to no properties being used, in this case.
            nodeActions[1] = ProjectSensitiveActions.projectCommandAction(ActionProvider.COMMAND_BUILD, "Build Project", null);
            nodeActions[2] = CommonProjectActions.copyProjectAction();
            nodeActions[3] = CommonProjectActions.deleteProjectAction();
            nodeActions[5] = CommonProjectActions.setAsMainProjectAction();
            nodeActions[6] = CommonProjectActions.closeProjectAction();
            return nodeActions;
        }

        @Override
        public Image getIcon(int type) {
            return ImageUtilities.loadImage(DEMO_PROJECT_ICON_PATH);
        }

        @Override
        public Image getOpenedIcon(int type) {
            return getIcon(type);
        }

        @Override
        public String getDisplayName() {
            return project.getProjectDirectory().getName();
        }
    }

    @Override
    public Node findPath(Node root, Object target) {
        //leave unimplemented for now
        return null;
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the  <code>DemoProject</code> , register the logical view provider that you created above. Register the logical view provider in the  <code>DemoProject</code>  lookup, as shown in the line in below by:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Override
public Lookup getLookup() {
    return Lookups.fixed(new Object[]{
                new Info(),
                *new DemoProjectLogicalView(this),*
            });
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Run the project and you should see that only the project node is shown in the Projects window:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projecttypes_demo-2.png" alt="projecttypes demo 2">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Let&#8217;s now begin registering nodes for our logical view. In our logical view, we defined a constant named REGISTERED_NODE_LOCATION. That constant points to the place in the System Filesystem where the logical view will look for its nodes.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Create a new class called  <code>DemoNodeFactory</code>  and define it as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@NodeFactory.Registration(projectType="org-netbeans-demo-project-DemoProject", position=200)
public class DemoNodeFactory implements <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-projectuiapi/org/netbeans/spi/project/ui/support/NodeFactory.html">NodeFactory</a> {

    public DemoNodeFactory() {
    }

    @Override
    public NodeList createNodes(Project proj) {
        try {
            AbstractNode nd = new AbstractNode(Children.LEAF);
            nd.setDisplayName("Hello World!");
            return NodeFactorySupport.fixedNodeList(nd);
        } catch (DataObjectNotFoundException ex) {
            Exceptions.printStackTrace(ex);
        }
        return NodeFactorySupport.fixedNodeList();
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Install the module again and you should see your dummy node:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projecttypes_demo-3.png" alt="projecttypes demo 3">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Finally, let&#8217;s enable some of the menu items on the project node. Do so by adding the project to the lookup of the  <code>RootNode</code> . The  <code>RootNode</code>  is defined in  <code>DemoProject</code>  and should be supplemented by the addition shown in bold below:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public RootNode(DemoProject project) {
    super(NodeFactorySupport.createCompositeChildren
            (project, REGISTERED_NODE_LOCATION), *Lookups.singleton(project)*);
    this.project = project;
    setIconBaseWithExtension(DEMO_PROJECT_ICON_PATH);
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Install the module again and you should see the following, i.e., various menu items are now functioning on the project node:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projecttypes_demo-4.png" alt="projecttypes demo 4">
</div>
</div>
<div class="paragraph">
<p>In the next section, we will add a real node to the logical view in the Projects window.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_nodes">Creating the Nodes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Next, we work some more with the  <code> <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-projectuiapi/org/netbeans/spi/project/ui/support/NodeFactory.html">org.netbeans.spi.project.ui.support.NodeFactory</a></code>  class and we extend the  <code> <a href="https://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/nodes/FilterNode.html">org.openide.nodes.FilterNode</a></code> .</p>
</div>
<div class="paragraph">
<p>At the end of this section, when you open a folder containing a  <code>project.xml</code>  file as specified above, all the folders and files will be shown in the Projects window, just like the Files window, as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projecttypes_demo-5.png" alt="projecttypes demo 5">
</div>
</div>
<div class="paragraph">
<p>In subsequent sections, we&#8217;ll filter the display in the Projects window. For now, we&#8217;ll simply show everything the project provides.</p>
</div>
<div class="paragraph">
<p>Do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Replace  <code>DemoNodeFactory</code>  with the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@NodeFactory.Registration(projectType="org-netbeans-demo-project-DemoProject", position=200)
public class DemoNodeFactory implements <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-projectuiapi/org/netbeans/spi/project/ui/support/NodeFactory.html">NodeFactory</a> {

    public DemoNodeFactory() {
    }

    @Override
    public NodeList createNodes(Project proj) {
        try {
            DemoFilterNode nd = new DemoFilterNode(proj);
            return NodeFactorySupport.fixedNodeList(nd);
        } catch (DataObjectNotFoundException ex) {
            Exceptions.printStackTrace(ex);
        }
        return NodeFactorySupport.fixedNodeList();
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Next, we look for the "nbproject" folder in our application and create a  <code>FilterNode</code>  for that folder, so we can display it in the logical view of the project.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Create a new class called  <code>DemoFilterNode</code>  and define it as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class DemoFilterNode extends <a href="https://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/nodes/FilterNode.html">FilterNode</a> {

    private static Image smallImage =
            ImageUtilities.loadImage("org/netbeans/demo/project/icon1.png"); // NOI18N

    public DemoFilterNode(Project proj) throws DataObjectNotFoundException {
        super(DataObject.find(proj.getProjectDirectory().getFileObject("nbproject")).getNodeDelegate());
    }

    @Override
    public String getDisplayName() {
        return "Important Files";
    }

    //Next, we add icons, for the default state, which is
    //closed, and the opened state; we will make them the same.
    //Icons in project logical views are
    //based on combinations--you must combine the node's own icon
    //with a distinguishing badge that is merged with it. Here we
    //first obtain the icon from a data folder, then we add our
    //badge to it by merging it via a NetBeans API utility method:
    @Override
    public Image getIcon(int type) {
        DataFolder root = DataFolder.findFolder(FileUtil.getConfigRoot());
        Image original = root.getNodeDelegate().getIcon(type);
        return ImageUtilities.mergeImages(original, smallImage, 7, 7);
    }

    @Override
    public Image getOpenedIcon(int type) {
        DataFolder root = DataFolder.findFolder(FileUtil.getConfigRoot());
        Image original = root.getNodeDelegate().getIcon(type);
        return ImageUtilities.mergeImages(original, smallImage, 7, 7);
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Install the module again and you should see the "nbproject" folder presented in the Projects window, with the label and icons defined above:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projecttypes_demo-5.png" alt="projecttypes demo 5">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_integrating_the_ant_build_tool">Integrating the Ant Build Tool</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Finally, we add a new menu item to the project&#8217;s contextual menu. We then hook that menu item to the "compile" target in the project&#8217;s  <code>build.xml</code>  file, which we&#8217;ll assume is in the application&#8217;s root directory.</p>
</div>
<div class="paragraph">
<p>Do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>First, add an  <code>ActionProvider</code>  implementation to the project&#8217;s lookup, as shown below. Note that included in the  <code>DemoActionProvider</code>  is the Build command:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@AntBasedProjectRegistration(type = "org.netbeans.demo.project.DemoProject",
iconResource = "org/netbeans/demo/project/icon1.png",
sharedName = "data",
sharedNamespace = "https://netbeans.org/ns/demo-project/1",
privateName = "project-private",
privateNamespace = "https://netbeans.org/ns/demo-project-private/1")
public class DemoProject implements <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-projectapi/org/netbeans/api/project/Project.html">Project</a> {

    final AntProjectHelper helper;

    public DemoProject(AntProjectHelper helper) {
        this.helper = helper;
    }

    @Override
    public Lookup getLookup() {
        return Lookups.fixed(new Object[]{
                    new Info(),
                    new DemoProjectLogicalView(this),
                    <mark>new DemoActionProvider(),</mark>
                    });
    }

    @Override
    public FileObject getProjectDirectory() {
        return helper.getProjectDirectory();
    }

    private final class Info implements <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-projectapi/org/netbeans/api/project/ProjectInformation.html">ProjectInformation</a> {

        @Override
        public String getName() {
            return helper.getProjectDirectory().getName();
        }

        public String getDisplayName() {
            return getName();
        }

        @Override
        public Icon getIcon() {
            return new ImageIcon(ImageUtilities.loadImage(
                    "org/netbeans/demo/project/icon1.png"));
        }

        @Override
        public void addPropertyChangeListener(PropertyChangeListener pcl) {
        }

        @Override
        public void removePropertyChangeListener(PropertyChangeListener pcl) {
        }

        @Override
        public Project getProject() {
            return DemoProject.this;
        }
    }

    <mark>private final class DemoActionProvider implements <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-projectapi/org/netbeans/spi/project/ActionProvider.html">ActionProvider</a> {

        private String[] supported = new String[]{
            ActionProvider.COMMAND_DELETE,
            ActionProvider.COMMAND_COPY,
            ActionProvider.COMMAND_BUILD,};

        @Override
        public String[] getSupportedActions() {
            return supported;
        }

        @Override
        public void invokeAction(String string, Lookup lookup) throws IllegalArgumentException {
            if (string.equals(ActionProvider.COMMAND_DELETE)) {
                DefaultProjectOperations.performDefaultDeleteOperation(DemoProject.this);
            }
            if (string.equals(ActionProvider.COMMAND_COPY)) {
                DefaultProjectOperations.performDefaultCopyOperation(DemoProject.this);
            }
            //Here we find the Ant script and call the target we need!
            if (string.equals(ActionProvider.COMMAND_BUILD)) {
                try {
                    FileObject buildImpl = helper.getProjectDirectory().getFileObject("build.xml");
                    ActionUtils.runTarget(buildImpl, new String[]{"compile"}, null);
                } catch (IOException ex) {
                    Exceptions.printStackTrace(ex);
                }
            }
        }

        @Override
        public boolean isActionEnabled(String command, Lookup lookup) throws IllegalArgumentException {
            if command.equals(ActionProvider.COMMAND_DELETE) {
                return true;
            } else if command.equals(ActionProvider.COMMAND_COPY) {
                return true;
            } else if command.equals(ActionProvider.COMMAND_BUILD) {
                return true;
            } else {
                throw new IllegalArgumentException(command);
            }
        }
    }</mark>

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Next, let&#8217;s add the Build command to the logical view. In  <code>DemProjectLogicalView</code> , rewrite  <code>getActions</code>  as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Override
public Action[] getActions(boolean arg0) {
    Action[] nodeActions = new Action[7];
    nodeActions[0] = CommonProjectActions.newFileAction();
    //The 'null' indicates that the default icon will be used:
    nodeActions[1] = ProjectSensitiveActions.projectCommandAction(ActionProvider.COMMAND_BUILD, "Build Project", null);
    nodeActions[2] = CommonProjectActions.copyProjectAction();
    nodeActions[3] = CommonProjectActions.deleteProjectAction();
    nodeActions[5] = CommonProjectActions.setAsMainProjectAction();
    nodeActions[6] = CommonProjectActions.closeProjectAction();
    return nodeActions;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installing_the_module">Installing the Module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Finally, we install the module and make use of the result.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Check that the module looks as follows in the Projects window:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projecttypes_demo-7.png" alt="projecttypes demo 7">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Right-click the module project and choose "Run". The application for which the module is being created starts up and the module installs into it.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
Choose File | Open Project and browse to a folder that has a subfolder named "nbprojects" containing a  <code>project.xml</code>  with this content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="https://netbeans.org/ns/project/1"&gt;
    &lt;type&gt;org.netbeans.demo.project.DemoProject&lt;/type&gt;
    &lt;configuration&gt;
        &lt;data xmlns="https://netbeans.org/ns/demo-project/1"&gt;
            &lt;name&gt;test&lt;/name&gt;
        &lt;/data&gt;
    &lt;/configuration&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The root directory of the project should have a  <code>build.xml</code>  file with content such as the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project name="" default="default" basedir="."&gt;
    &lt;target name="compile"&gt;
        &lt;echo&gt;Compiling...&lt;/echo&gt;
    &lt;/target&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Open the project and you should see the Projects window displaying the project&#8217;s "nbprojects" folder. Right-click the project node and notice the project-level menu items that you defined earlier. Right-click the "Build Project" command and you should be able to build the project.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projecttypes_demo-6.png" alt="projecttypes demo 6">
</div>
</div>
<div class="paragraph">
<p><a href="../community/mailing-lists.html">Send Us Your Feedback</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_steps">Next Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information about creating and developing NetBeans modules, see the following resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../kb/docs/platform.html">Other Related Tutorials</a></p>
</li>
<li>
<p><a href="https://bits.netbeans.org/dev/javadoc/index.html">NetBeans API Javadoc</a></p>
</li>
</ul>
</div>
</div>
</div>
        
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/nbm-projecttypeant.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
