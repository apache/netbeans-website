
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans Code Snippet Module Tutorial</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans Code Snippet Module Tutorial - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, NetBeans Code Snippet Module Tutorial">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="/plugins/index.html">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Just released!</div>
            <h1 syle='font-size: 2rem'>Apache NetBeans 11.3</h1>
            <p><a class="button success" href="/download/nb113/index.html">Find out more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">NetBeans Code Snippet Module Tutorial</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/68/nbm-palette-api1.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_introduction_to_code_snippets">Introduction to Code Snippets</a></li>
<li><a href="#_setting_up_the_module_project">Setting up the Module Project</a>
<ul class="sectlevel2">
<li><a href="#_creating_the_module_project">Creating the Module Project</a></li>
<li><a href="#_specifying_the_module_s_dependencies">Specifying the Module&#8217;s Dependencies</a></li>
</ul>
</li>
<li><a href="#_coding_the_code_snippet">Coding the Code Snippet</a>
<ul class="sectlevel2">
<li><a href="#_creating_the_code_snippet">Creating the Code Snippet</a></li>
<li><a href="#_defining_the_insertion">Defining the Insertion</a></li>
</ul>
</li>
<li><a href="#_declaring_and_registering_the_code_snippet">Declaring and Registering the Code Snippet</a>
<ul class="sectlevel2">
<li><a href="#_declaring_the_code_snippet">Declaring the Code Snippet</a></li>
<li><a href="#_registering_the_code_snippet">Registering the Code Snippet</a></li>
<li><a href="#_optional_adding_a_customizer">Optional: Adding a Customizer</a></li>
</ul>
</li>
<li><a href="#_building_and_installing_the_code_snippet">Building and Installing the Code Snippet</a>
<ul class="sectlevel2">
<li><a href="#_trying_out_the_code_snippet">Trying Out the Code Snippet</a></li>
<li><a href="#_creating_a_shareable_module_binary">Creating a Shareable Module Binary</a></li>
</ul>
</li>
<li><a href="#_next_steps">Next Steps</a></li>
<li><a href="#_versioning">Versioning</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial demonstrates how to create and add code snippets to the HTML/JSP Component Palette. Code snippets are small pieces of code that can be dragged from a component palette and dropped in the Source Editor. They serve to speed up coding. The HTML/JSP Component Palette has several code snippets already, but you might want to add some additional ones and share them with others.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This document uses the NetBeans IDE 6.5 Release. If you are using an earlier version, see  <a href="60/nbm-palette-api1.html">the 6.0/6.1 version of this document</a>.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/netbeans-stamp-65-67-68.gif" alt="netbeans stamp 65 67 68">
</div>
<div class="title">Figure 1. Content on this page applies to NetBeans IDE 6.5, 6.7, 6.8</div>
</div>
<div class="paragraph">
<p><strong>To follow this tutorial, you need the software and resources listed in the following table.</strong></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Software or Resource</th>
<th class="tableblock halign-left valign-top">Version Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.apache.org/download/index.html">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">version 6.5 or above</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html">Java Developer Kit (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version 6 or
version 5</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Optionally, for troubleshooting purposes, you can  <a href="https://netbeans.org/files/documents/4/637/newhtmlsnippets.zip">download the completed sample</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction_to_code_snippets">Introduction to Code Snippets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To create a code snippet, you use the  <a href="http://bits.netbeans.org/dev/javadoc/org-netbeans-spi-palette/overview-summary.html">NetBeans Palette API</a>. A code snippet requires the following files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A Java class that defines the piece of code to be dragged into the Source Editor.</p>
</li>
<li>
<p>A display name for the palette item.</p>
</li>
<li>
<p>A tooltip for the palette item.</p>
</li>
<li>
<p>A 16x16 pixel image for the 'Small Icon' display.</p>
</li>
<li>
<p>A 32x32 pixel image for the 'Big Icon' display.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After you have created or added the above files to the NetBeans module, you declare them in a resource declaration XML file, which you register in the NetBeans System Filesystem by using the  <code>layer.xml</code>  file.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_up_the_module_project">Setting up the Module Project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you start writing the module, you have to make sure you that your project is set up correctly. The IDE provides a wizard that sets up all the basic files needed for a module.</p>
</div>
<div class="sect2">
<h3 id="_creating_the_module_project">Creating the Module Project</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Choose File &gt; New Project (Ctrl+Shift+N). Under Categories, select NetBeans Modules. Under Projects, select Module. Click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the Name and Location panel, type  <code>Newhtmlsnippets</code>  in the Project Name field. Change the Project Location to any directory on your computer. Leave the Standalone Module option and Set as Main Project checkbox selected. Click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the Basic Module Configuration panel, type  <code>org.netbeans.modules.newhtmlsnippets</code>  in Code Name Base.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Select "Generate XML Layer". Leave the locations of both the localizing bundle and the XML layer file so that they will be stored in a package with the name  <code>org/netbeans/modules/newhtmlsnippets</code> . Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The IDE creates the  <code>Newhtmlsnippets</code>  project. The project contains all of your sources and project metadata, such as the project&#8217;s Ant build script. The project opens in the IDE. You can view its logical structure in the Projects window (Ctrl-1) and its file structure in the Files window (Ctrl-2).</p>
</div>
</div>
<div class="sect2">
<h3 id="_specifying_the_module_s_dependencies">Specifying the Module&#8217;s Dependencies</h3>
<div class="paragraph">
<p>You will need to use several classes that belong to the  <a href="http://bits.netbeans.org/dev/javadoc/index.html">NetBeans APIs</a>. Each has to be declared as a module dependency. Use the Project Properties dialog box for this purpose.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the Projects window, right-click the  <code>Newhtmlsnippets</code>  project node and choose Properties. In the Project Properties dialog box, click Libraries.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
For each of the following, click "Add&#8230;&#8203;", select the name from the Module list, and then click OK to confirm it:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Common Palette</p>
</li>
<li>
<p>Text API</p>
</li>
<li>
<p>Utilities API</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Click OK to exit the Project Properties dialog box.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the Projects window, expand the Important Files node, double-click the Project Metadata node, and note that the APIs you selected have been declared as Module dependencies.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_coding_the_code_snippet">Coding the Code Snippet</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, you create  <code>BR.java</code> , which defines a code snippet for an HTML line break. By implementing the  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-text/org/openide/text/ActiveEditorDrop.html">ActiveEditorDrop</a></code>  class, you let the NetBeans APIs provide the infrastructure for a palette item for NetBeans editors. You also create  <code>HTMLPaletteUtilities.java</code> , which defines the insertion of the tag in the editor.</p>
</div>
<div class="sect2">
<h3 id="_creating_the_code_snippet">Creating the Code Snippet</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the  <code>org.netbeans.modules.newhtmlsnippets</code>  node and choose New &gt; Java Class. Type  <code>BR</code>  in Class Name, make sure that the  <code>org.netbeans.modules.newhtmlsnippets</code>  package is selected in the Package drop-down list, and click Finish.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Replace the default content of the  <code>BR.java</code>  file with the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">package org.netbeans.modules.newhtmlsnippets;

import javax.swing.text.BadLocationException;
import javax.swing.text.JTextComponent;
import org.netbeans.modules.newhtmlsnippets.HTMLPaletteUtilities;
import  link:http://bits.netbeans.org/dev/javadoc/org-openide-text/org/openide/text/ActiveEditorDrop.html[org.openide.text.ActiveEditorDrop];

public class BR implements  link:http://bits.netbeans.org/dev/javadoc/org-openide-text/org/openide/text/ActiveEditorDrop.html[ActiveEditorDrop] {

    public BR() {
    }

    private String createBody() {
        String Br = "&lt;br&gt;";
        return Br;
    }

    public boolean  link:http://bits.netbeans.org/dev/javadoc/org-openide-text/org/openide/text/ActiveEditorDrop.html#handleTransfer(javax.swing.text.JTextComponent)[handleTransfer(JTextComponent targetComponent]) {
        String body = createBody();
        try {
            HTMLPaletteUtilities.insert(body, targetComponent);
        } catch (BadLocationException ble) {
            return false;
        }
        return true;
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Right-click in the Source Editor and choose Format (Alt-Shift-F).</p>
</div>
<div class="paragraph">
<p>A red error message remains because you have not created the  <code>HTMLPaletteUtilities</code>  class yet, which you will do in the next section.</p>
</div>
</div>
<div class="sect2">
<h3 id="_defining_the_insertion">Defining the Insertion</h3>
<div class="paragraph">
<p>In this section, you create the  <code>HTMLPaletteUtilities</code>  class, which defines the place where the snippet will be dropped.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the  <code>org.netbeans.modules.newhtmlsnippets</code>  node and choose New &gt; Java Class. Type  <code>HTMLPaletteUtilities</code>  in Class Name, make sure that the  <code>org.netbeans.modules.newhtmlsnippets</code>  package is selected in the Package drop-down list, and click Finish.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Replace the default content of the  <code>HTMLPaletteUtilities.java</code>  file with the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">package org.netbeans.modules.newhtmlsnippets;

import javax.swing.text.BadLocationException;
import javax.swing.text.Caret;
import javax.swing.text.Document;
import javax.swing.text.JTextComponent;
import javax.swing.text.StyledDocument;
import  link:https://bits.netbeans.org/dev/javadoc/org-openide-text/org/openide/text/NbDocument.html[org.openide.text.NbDocument];

public class HTMLPaletteUtilities {

    public static void insert(final String s,final JTextComponent target) throws BadLocationException {

        final StyledDocument doc = (StyledDocument)target.getDocument();

        class AtomicChange implements Runnable {

            public void run() {
                Document value = target.getDocument();
                if (value == null)
                    return;
                try {
                    insert(s, target, doc);
                } catch (BadLocationException e) {}
            }
        }

        try {
link:https://bits.netbeans.org/dev/javadoc/org-openide-text/org/openide/text/NbDocument.html#runAtomicAsUser(javax.swing.text.StyledDocument,%20java.lang.Runnable)[NbDocument.runAtomicAsUser(doc, new AtomicChange())];
        } catch (BadLocationException ex) {}

    }

    private static int insert(String s, JTextComponent target, Document doc) throws BadLocationException {

        int start = -1;

        try {

            *//firstly, find selected text range:*
            Caret caret = target.getCaret();
            int p0 = Math.min(caret.getDot(), caret.getMark());
            int p1 = Math.max(caret.getDot(), caret.getMark());
            doc.remove(p0, p1 - p0);

            *//then, replace selected text range with the inserted one:*
            start = caret.getDot();
            doc.insertString(start, s, null);

        } catch (BadLocationException ble) {}

        return start;

    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Right-click in the Source Editor and choose Format (Alt-Shift-F).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_declaring_and_registering_the_code_snippet">Declaring and Registering the Code Snippet</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Code snippets are registered in two phases. Firstly, you declare a code snippet in an XML file that conforms to the NetBeans Editor Palette Item DTD. In this XML file, you declare your  <code>ActiveEditorDrop</code>  implementation class, a 16x16 pixel icon, a 32x32 pixel icon, a display name, and a tooltip.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Use the 1.0 version of the DTD if you want the display name and tooltip to be defined in a properties file. Use the 1.1 version of the DTD if you want to declare the display name and tooltip witin the XML file itself. Both approaches are described below.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Secondly, you register the XML file in the  <code>layer.xml</code>  file, in the palette&#8217;s folder.</p>
</div>
<div class="sect2">
<h3 id="_declaring_the_code_snippet">Declaring the Code Snippet</h3>
<div class="paragraph">
<p>The NetBeans Editor Palette Item DTD is used to declare the  <code>ActiveEditorDrop</code>  class, the icons, the display name, and the tooltip.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the  <code>org.netbeans.modules.newhtmlsnippets</code>  package node and choose New &gt; Other. Select XML Document in the XML folder and click Next. Type  <code>BR</code>  in File Name. Type  <code>\resources</code>  at the end of  <code>src\org\netbeans\modules\newhtmlsnippets</code>  in Folder. Click Finish.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Replace the default content of the  <code>BR.xml</code>  file with the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE editor_palette_item PUBLIC "-//NetBeans//Editor Palette Item 1.0//EN"
  "https://netbeans.org/dtds/editor-palette-item-1_0.dtd"&gt;

&lt;editor_palette_item version="1.0"&gt;

    &lt;class name="org.netbeans.modules.newhtmlsnippets.BR" /&gt;

    &lt;icon16 urlvalue="org/netbeans/modules/newhtmlsnippets/resources/BR16.png" /&gt;
    &lt;icon32 urlvalue="org/netbeans/modules/newhtmlsnippets/resources/BR32.png" /&gt;

    &lt;description localizing-bundle="org.netbeans.modules.newhtmlsnippets.Bundle"
               display-name-key="NAME_html-BR"
               tooltip-key="HINT_html-BR" /&gt;

&lt;/editor_palette_item&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the 1.1 DTD, you can define the display name and tooltip without using a properties file. Below, only the difference with the previous XML file definition is highlighted:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE editor_palette_item PUBLIC "*-//NetBeans//Editor Palette Item 1.1//EN*"
  "https://netbeans.org/dtds/*editor-palette-item-1_1.dtd*"&gt;

&lt;editor_palette_item version="1.0"&gt;

    &lt;class name="org.netbeans.modules.newhtmlsnippets.BR" /&gt;

    &lt;icon16 urlvalue="org/netbeans/modules/newhtmlsnippets/resources/BR16.png" /&gt;
    &lt;icon32 urlvalue="org/netbeans/modules/newhtmlsnippets/resources/BR32.png" /&gt;

    *&lt;inline-description&gt;
       &lt;display-name&gt;New Line&lt;/display-name&gt;
       &lt;tooltip&gt;
           &lt;b&gt;
              br
           &lt;/b&gt;
       &lt;/tooltip&gt;
    &lt;/inline-description&gt;*

&lt;/editor_palette_item&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can choose either of the two approaches above, depending on your requirements.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Add a 16x16 pixel icon and a 32x32 pixel icon to the new  <code>resources</code>  folder. Name them  <code>BR16.png</code>  and  <code>BR32.png</code> . They can also be in other icon formats, such as GIF or JPG. Make sure that the resource is correctly declared in the  <code>BR.xml</code>  file. You can right-click them here and then save them to your module&#8217;s source structure:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/BR32.png" alt="BR32">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/BR16.png" alt="BR16">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>If you want to use a properties file for declaring the palette item&#8217;s display name and tooltip, which implies that you are using the 1.0 DTD, add the following to the  <code>Bundle.properties</code>  file:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/bundle-60.png" alt="bundle 60">
</div>
</div>
<div class="paragraph">
<p>At this point, the project source structure should be as follows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/65-proj-1.png" alt="65 proj 1">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_registering_the_code_snippet">Registering the Code Snippet</h3>
<div class="paragraph">
<p>The  <code>layer.xml</code>  file registers the user interface elements of your module in your application, which in this case is the IDE. Here, we need to register the palette item in the  <code>layer.xml</code>  file so that the item will appear in the HTML Palette.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Add the following tags to the  <code>layer.xml</code>  file, between the  <code>&lt;filesystem&gt;</code>  tags:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;folder name="HTMLPalette"&gt;
   &lt;folder name="HTML"&gt;
      &lt;file name="BR.xml" url="resources/BR.xml"&gt;
         &lt;attr name="position" intvalue="150"/&gt;
      &lt;/file&gt;
   &lt;/folder&gt;
&lt;/folder&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Optionally, you can reorder the items in the palette. When you do so, you can use the user interface provided for this purpose to do so.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Expand the  <code>layer.xml</code>  node and then expand  <code>&lt;this layer in context&gt;</code> . A folder appears for every folder declared by every  <code>layer.xml</code>  file of every module registered in the IDE.</p>
</div>
<div class="paragraph">
<p>Notice that the "HTMLPalette" folder is marked in bold. This matches the name of the folder you created in your own  <code>layer.xml</code>  file. Expand the folder and notice that its subfolder, HTML, is also in bold. Expand the HTML folder and notice that the  <code>BR.xml</code>  resource declaration file that you declared has been added to the resource declaration files provided by other modules:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/65-layer.png" alt="65 layer">
</div>
</div>
<div class="paragraph">
<p>When you right-click on the node, several options are available, such as "Delete" and "Copy".</p>
</div>
<div class="paragraph">
<p>As an experiment, drag the "New Line" node and drop it right below the "Table" node. Double-click the  <code>layer.xml</code>  file and notice that the value of the "position" element changes whenever you move the "New Line" node to a different place.</p>
</div>
</div>
<div class="sect2">
<h3 id="_optional_adding_a_customizer">Optional: Adding a Customizer</h3>
<div class="paragraph">
<p>Optionally, you can let a  <code>JPanel</code>  appear when the palette item is dropped. In the  <code>JPanel</code> , you can let the user define values for attributes that relate to the tag that is about to be created. However, note that adding such a customizer is optional. In the case of a line break, which is what we are creating in this tutorial, there are no attributes that relate to the BR tag. For that reason, to illustrate the customizer functionality, we will add a comment before the BR tag, by means of a customizer.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you check out the  <code>html</code>  module from the NetBeans sources, you will find many examples of customizers in the  <code>org/netbeans/modules/html/palette/items</code>  package.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Add a dependency on the NetBeans  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-dialogs/overview-summary.html">Dialogs API</a></code> .</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
Use the New File dialog (Ctrl-N) to create a  <code>JPanel</code>  in the  <code>org.netbeans.modules.newhtmlsnippets</code>  package. Name it  <code>BRCustomizer</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Use the Pallette (Ctrl-Shift-8) to drag and drop a  <code>JLabel</code>  and a  <code>JTextField</code>  onto the  <code>JPanel</code>  and arrange the  <code>JPanel</code>  as follows:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/customizer-in-palette-60.png" alt="customizer in palette 60">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>You will need to declare the following at the top of the  <code>BRCustomizer</code>  class:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private Dialog dialog = null;
private DialogDescriptor descriptor = null;
private boolean dialogOK = false;

BR br;
JTextComponent target;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Rewrite the  <code>BRCustomizer</code>  constructor as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public BRCustomizer(BR br, JTextComponent target) {
    this.br = br;
    this.target = target;

    initComponents();
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>In your  <code>BRCustomizer</code>  class, add this method, so that, in the next steps, you can open the customizer from your  <code>ActiveEditorDrop</code>  implementation class:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public boolean showDialog() {

    dialogOK = false;

    String displayName = "";
    try {
        displayName = NbBundle.getBundle("org.netbeans.modules.newhtmlsnippets.Bundle").getString("NAME_html-BR"); // NOI18N
    } catch (Exception e) {
        //Handle the exception here.
    }

    descriptor = new DialogDescriptor(this, NbBundle.getMessage(BRCustomizer.class, "LBL_Customizer_InsertPrefix") + " " + displayName, true,
            DialogDescriptor.OK_CANCEL_OPTION, DialogDescriptor.OK_OPTION,
            new ActionListener() {

                public void actionPerformed(ActionEvent e) {
                    if (descriptor.getValue().equals(DialogDescriptor.OK_OPTION)) {
                        evaluateInput();
                        dialogOK = true;
                    }
                    dialog.dispose();
                }

            });

    dialog = DialogDisplayer.getDefault().createDialog(descriptor);
    dialog.setVisible(true);
    repaint();

    return dialogOK;

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Define the  <code>evaluateInput()</code>  method, which is called in the  <code>showDialog()</code>  method above, as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private void evaluateInput() {

   String comment = jTextField1.getText();
   br.setComment(comment);

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Add to the  <code>Bundle.properties</code>  file:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">LBL_Customizer_InsertPrefix=Insert
NAME_html-BR=Line Break</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Hook your customizer into the  <code>ActiveEditorDrop</code>  implementation class as follows (only the lines that are changed are highlighted below):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">package org.netbeans.modules.newhtmlsnippets;

import javax.swing.text.BadLocationException;
import javax.swing.text.JTextComponent;
import org.netbeans.modules.newhtmlsnippets.HTMLPaletteUtilities;
import  link:https://bits.netbeans.org/dev/javadoc/org-openide-text/org/openide/text/ActiveEditorDrop.html[org.openide.text.ActiveEditorDrop];

public class BR implements  link:https://bits.netbeans.org/dev/javadoc/org-openide-text/org/openide/text/ActiveEditorDrop.html[ActiveEditorDrop] {

    *private String comment = "";*

    public BR() {
    }

    private String createBody() {
        *comment = getComment();
        String Br = "&lt;!-- " + comment + " --&gt;"
                + "\n        &lt;br&gt;";*
        return Br;
    }

    public boolean  link:https://bits.netbeans.org/dev/javadoc/org-openide-text/org/openide/text/ActiveEditorDrop.html#handleTransfer(javax.swing.text.JTextComponent)[handleTransfer(JTextComponent targetComponent]) {

        *BRCustomizer c = new BRCustomizer(this, targetComponent);
        boolean accept = c.showDialog();
        if (accept) {*
            String body = createBody();
            try {
                HTMLPaletteUtilities.insert(body, targetComponent);
            } catch (BadLocationException ble) {
                *accept = false;*
            }
        }
        *return accept;*

    }

    *public String getComment() {
        return comment;
    }

    public void setComment(String comment) {
        this.comment = comment;
    }*

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your project source structure should now include your  <code>JPanel</code> :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/65-proj-2.png" alt="65 proj 2">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_and_installing_the_code_snippet">Building and Installing the Code Snippet</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now we need to think about installation and distribution. In the first section below, we install the code snippet, next we create an NBM file and examine distribution channels.</p>
</div>
<div class="sect2">
<h3 id="_trying_out_the_code_snippet">Trying Out the Code Snippet</h3>
<div class="paragraph">
<p>Install and try out the code snippet, by following the steps below.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the Projects window, right-click the  <code>Newhtmlsnippets</code>  project and choose Run.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The module is built and installed in the target platform. The target platform opens so that you can try out your new module. The default target platform is the installation used by the current instance of the development IDE.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Create a new HTML file in the IDE. When the HTML file opens, it displays the Component Palette (Ctrl-Shift-8) with one additional code snippet, called "New Line", with a tooltip that displays the result of dragging-and-dropping the item:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/result1-60.png" alt="result1 60">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Drag the 'New Line' item into the Source Editor and, if you completed the optional section on creating a customizer (above), you will see a customizer:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/customizer-in-action-60.png" alt="customizer in action 60">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Type a comment, click OK, and notice that a new  <code>&lt;br&gt;</code>  tag is inserted at the cursor, together with an HTML comment:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/result2-60.png" alt="result2 60">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Above, the text "breaking up the paragraph with a line break" was typed into the customizer.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_shareable_module_binary">Creating a Shareable Module Binary</h3>
<div class="paragraph">
<p>An NBM file is the binary version of the module that provides the code snippet. Below, using one menu item, we create the NBM file.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the Projects window, right-click the  <code>newhtmlsnippet</code>  project and choose Create NBM.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The NBM file is created and you can view it in the Files window (Ctrl-2), as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/65-proj-3.png" alt="65 proj 3">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Make the module available to others via, for example, the  <a href="http://plugins.netbeans.org/PluginPortal/">Plugin Portal</a>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>The recipient can install the module by using their IDE&#8217;s Plugin Manager. They would choose Tools &gt; Plugins from the main menu.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a href="http://netbeans.apache.org/community/mailing-lists.html">Send Us Your Feedback</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_steps">Next Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information about creating and developing NetBeans modules, see the following resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://netbeans.apache.org/kb/docs/platform.html">Other Related Tutorials</a></p>
</li>
<li>
<p><a href="http://bits.netbeans.org/dev/javadoc/index.html">NetBeans API Javadoc</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_versioning">Versioning</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Version</strong></th>
<th class="tableblock halign-left valign-top"><strong>Date</strong></th>
<th class="tableblock halign-left valign-top"><strong>Changes</strong></th>
<th class="tableblock halign-left valign-top"><strong>Open Issues</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">28 November 2005</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* Is it the same for Swing/AWT Components?
* How could formatting/indentation be different?
* Need to add explanation for adding own dialog box for predefining values.
* Need new screenshot of the Component Palette, to show the new snippet under the existing Table snippet.
* Explanatory text for the use of the NetBeans APIs to be added.
* Show how to share snippets between palettes via shadow files.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 December 2005</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* Fixed  <a href="https://bz.apache.org/netbeans/show_bug.cgi?id=69620">issue 69620</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8 December 2005</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* Fixed  <a href="https://bz.apache.org/netbeans/show_bug.cgi?id=69766">issue 69766</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 June 2007</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">* Began updating for 6.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 November 2008</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* Began updating for 6.5</p></td>
</tr>
</tbody>
</table>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/68/nbm-palette-api1.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1><a href="/about/index.html">About</a></h1>
                <ul>
                    <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb110/nb110.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="/plugins/index.html">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2019 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
