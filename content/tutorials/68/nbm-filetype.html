
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>File Type Integration Tutorial</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="File Type Integration Tutorial - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, File Type Integration Tutorial">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>

  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">File Type Integration Tutorial</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/68/nbm-filetype.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_introduction_to_file_type_integration">Introduction to File Type Integration</a></li>
<li><a href="#_creating_the_module_project">Creating the Module Project</a></li>
<li><a href="#_recognizing_abc_files">Recognizing Abc Files</a></li>
<li><a href="#_installing_and_trying_out_the_functionality">Installing and Trying Out the Functionality</a></li>
<li><a href="#_creating_features_for_abc_files">Creating Features for Abc Files</a>
<ul class="sectlevel2">
<li><a href="#_adding_an_action">Adding an Action</a></li>
<li><a href="#_opening_the_file_into_a_window">Opening the File into a Window</a></li>
<li><a href="#_creating_a_multiview_window">Creating a Multiview Window</a></li>
</ul>
</li>
<li><a href="#_creating_a_shareable_module_binary">Creating a Shareable Module Binary</a></li>
<li><a href="#_next_steps">Next Steps</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial shows you how to write a module that lets the IDE, or any other application built on the NetBeans Platform, recognize a new file type.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This document uses the NetBeans IDE 6.5 Release. If you are using NetBeans IDE 6.x, see  <a href="60/nbm-filetype.html">the 6.1 version of this document</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction_to_file_type_integration">Introduction to File Type Integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>File types that are recognized in the IDE have their own icons, menu items, and behavior. The "files" being shown are  <code>FileObjects</code> —wrappers around  <code>java.io.File</code>  or, in the case of configuration files, typically wrappers around data stored in some other way, such as inside XML files in modules. What you actually <em>see</em> are  <code>Nodes</code> , which provide functionality like actions and localized names to objects like files. In between  <code>Nodes</code>  and  <code>FileObjects</code>  are  <code>DataObjects</code> . A  <code>DataObject</code>  is like a  <code>FileObject</code> , except that it knows what kind of file is being shown, and there are usually different types of  <code>DataObject</code>  for files with different extensions and XML files with different namespaces. Each  <code>DataObject</code>  is provided by a different module, each implementing support for one or more file types—for example, the Image module makes it possible to recognize and open  <code>.gif</code>  and  <code>.png</code>  files.</p>
</div>
<div class="paragraph">
<p>A module that recognizes a file type installs a  <code>DataLoader</code> —a factory for a file-type-specific  <code>DataObject</code> . When a folder is expanded, the IDE asks each known  <code>DataLoader</code> , "Do you know what this is?" The first one that says "Yes" creates the  <code>DataObject</code>  for the file. In order to actually display something for each file, the system calls  <code>DataObject.getNodeDelegate()</code>  for each  <code>DataObject</code>  and the  <code>Nodes</code>  are what you actually see in the IDE.</p>
</div>
<div class="paragraph">
<p>Below, the diagram on the left shows what each item mentioned above makes available:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetype_diagram-dataobject2.png" alt="filetype diagram dataobject2">
</div>
</div>
<div class="paragraph">
<p>In this tutorial, you create a module that installs a  <code>DataLoader</code>  for imaginary "Abc" files ( <code>.abc</code>  file extension). By default, a file with the "abc" extension is treated as any other file that the IDE does not recognize—it is treated as a text file and, as a result, the IDE provides the same functionality for Abc files as it does for text files. Once you have created the module, you will be shown how to enhance it with functionality that will be available to Abc files only. When you complete the development cycle, you can easily let others make use of your module—the IDE lets you create a binary that you can send to others, who can then install it through the Update Center.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_module_project">Creating the Module Project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we use a wizard to create the source structure that every NetBeans module requires. The source structure consists of certain folders in specific places and a set of files that are always needed. For example, every NetBeans module requires a  <code>nbproject</code>  folder, which holds the project&#8217;s metadata, and a  <code>layer.xml</code>  file, for declarative registration of items such as toolbar buttons and windows.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Choose File &gt; New Project (Ctrl-Shift-N). Under Categories, select NetBeans Modules. Under Projects, select Module and click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the Name and Location panel, type  <code>AbcFileType</code>  in Project Name. Change the Project Location to any directory on your computer, such as  <code>c:\mymodules</code> . Leave the Standalone Module radiobutton selected. The panel should now look as follows:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetype_65-projectwizard1.png" alt="filetype 65 projectwizard1">
</div>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the Basic Module Configuration panel, type  <code>org.myorg.abcfiletype</code>  as the Code Name Base. Add spaces to the suggested Module Display Name, so that it is changed to  <code>Abc File Type</code> . Select the "Generate XML Layer" checkbox and leave the location of the localizing bundle and XML layer as they are, so that they will be stored in a package with the name  <code>org/myorg/abcfiletype</code> . The panel should now look as follows:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetype_65-projectwizard2.png" alt="filetype 65 projectwizard2">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The IDE creates the  <code>Abc File Type</code>  project. The project contains all of your sources and project metadata, such as the project&#8217;s Ant build script. The project opens in the IDE. You can view its logical structure in the Projects window (Ctrl-1) and its file structure in the Files window (Ctrl-2). For example, the Projects window should now look as follows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetype_65-projectswindow1.png" alt="filetype 65 projectswindow1">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_recognizing_abc_files">Recognizing Abc Files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we use a wizard to create the classes necessary for recognizing Abc files as being distinct from all other files. As discussed at the start of this tutorial, we need a data object and a data loader, as well as a MIME type resolver, and registration entries in the  <code>layer.xml</code>  file, to do so. The New File Type wizard will create all of these for us.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the project node and choose New &gt; File Type.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the File Recognition panel, do the following:</p>
<div class="ulist">
<ul>
<li>
<p>Type  <code>text/x-abc</code>  in the MIME Type edit box.</p>
</li>
<li>
<p>Type  <code>.abc .ABC</code>  in the by Filename Extension edit box.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The File Recognition panel should now look as follows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetype_60-filewizard1.png" alt="filetype 60 filewizard1">
</div>
</div>
<div class="paragraph">
<p>Note the following about the fields in the File Recognition panel:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>MIME Type.</strong> Specifies the data object&#8217;s unique MIME type.</p>
</li>
<li>
<p>by</p>
</li>
<li>
<p><strong>Filename Extension.</strong> Specifies one or more file extensions that the IDE will recognize as belonging to the specified MIME type. The file extension can optionally be preceded by a dot. Separators are commas, spaces, or both. Therefore, all of the following are valid:</p>
</li>
<li>
<p><code>.abc,.def</code></p>
</li>
<li>
<p><code>.abc .def</code></p>
</li>
<li>
<p><code>abc def</code></p>
</li>
<li>
<p><code>abc,.def ghi, .wow</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s imagine that Abc files be case-sensitive. For this reason, you specify <em>two</em> MIME types in this tutorial— <code>.abc</code>  and  <code>.ABC</code> .</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>XML Root Element.</strong> Specifies a unique namespace that distinguishes the XML file type from all other XML file types. Since many XML files have the same extension ( <code>xml</code> ), the IDE distinguishes between XML files via their XML root elements. More specifically, the IDE can distinguish between namespaces and the first XML element in XML files. You can use this to, for example, distinguish between a JBoss deployment descriptor and a WebLogic deployment descriptor. Once you have made this distinction, you can ensure that menu items added to the JBoss deployment descriptor&#8217;s contextual menu are not available to the WebLogic deployment descriptor. For an example, see the  <a href="nbm-palette-api2.html">NetBeans Component Palette Module Tutorial</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the Name and Location panel, type  <code>Abc</code>  as the Class Name Prefix and browse to any 16x16 pixel image file as the new file type&#8217;s icon, as shown below.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetype_65-filewizard2.png" alt="filetype 65 filewizard2">
</div>
</div>
<div class="paragraph">
<p><strong>Note:</strong> You can use any icon of a 16x16 pixel dimension. If you like, you can click on this one and save it locally, and then specify it in the wizard step above:
image::images/filetype_Datasource.gif[]</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The Projects window should now look as follows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetype_65-projectswindow2.png" alt="filetype 65 projectswindow2">
</div>
</div>
<div class="paragraph">
<p>Each of the newly generated files is briefly introduced:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>AbcDataObject.java.</strong> Wraps a  <code>FileObject</code> . DataObjects are produced by DataLoaders. For more information, see  <a href="https://netbeans.apache.org/wiki/devfaqdataobject">What is a DataObject?</a>.</p>
</li>
<li>
<p><strong>AbcResolver.xml.</strong> Maps the  <code>.abc</code>  and  <code>.ABC</code>  extensions to the MIME type. The  <code>AbcDataLoader</code>  only recognizes the MIME type; it does not know about the file extension.</p>
</li>
<li>
<p><strong>AbcTemplate.abc.</strong> Provides the basis of a file template that is registered in the  <code>layer.xml</code>  such that it will be installed in the New File dialog as a new template.</p>
</li>
<li>
<p><strong>AbcDataObjectTest.java.</strong> JUnit test class for the  <code>DataObject</code> .</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the  <code>layer.xml</code>  file, you should see the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;folder name="Loaders"&gt;
    &lt;folder name="text"&gt;
        &lt;folder name="x-abc"&gt;
            &lt;folder name="Actions"&gt;
                &lt;file name="org-myorg-abcfiletype-MyAction.shadow"&gt;
                    &lt;attr name="originalFile" stringvalue="Actions/Edit/org-myorg-abcfiletype-MyAction.instance"/&gt;
                    &lt;attr name="position" intvalue="600"/&gt;
                &lt;/file&gt;
                &lt;file name="org-openide-actions-CopyAction.instance"&gt;
                    &lt;attr name="position" intvalue="100"/&gt;
                &lt;/file&gt;
                &lt;file name="org-openide-actions-CutAction.instance"&gt;
                    &lt;attr name="position" intvalue="200"/&gt;
                &lt;/file&gt;
                &lt;file name="org-openide-actions-DeleteAction.instance"&gt;
                    &lt;attr name="position" intvalue="300"/&gt;
                &lt;/file&gt;
                &lt;file name="org-openide-actions-FileSystemAction.instance"&gt;
                    &lt;attr name="position" intvalue="400"/&gt;
                &lt;/file&gt;
                &lt;file name="org-openide-actions-OpenAction.instance"&gt;
                    &lt;attr name="position" intvalue="500"/&gt;
                &lt;/file&gt;
                &lt;file name="org-openide-actions-PropertiesAction.instance"&gt;
                    &lt;attr name="position" intvalue="700"/&gt;
                &lt;/file&gt;
                &lt;file name="org-openide-actions-RenameAction.instance"&gt;
                    &lt;attr name="position" intvalue="800"/&gt;
                &lt;/file&gt;
                &lt;file name="org-openide-actions-SaveAsTemplateAction.instance"&gt;
                    &lt;attr name="position" intvalue="900"/&gt;
                &lt;/file&gt;
                &lt;file name="org-openide-actions-ToolsAction.instance"&gt;
                    &lt;attr name="position" intvalue="1000"/&gt;
                &lt;/file&gt;
                &lt;file name="sep-1.instance"&gt;
                    &lt;attr name="instanceClass" stringvalue="javax.swing.JSeparator"/&gt;
                    &lt;attr name="position" intvalue="1100"/&gt;
                &lt;/file&gt;
                &lt;file name="sep-2.instance"&gt;
                    &lt;attr name="instanceClass" stringvalue="javax.swing.JSeparator"/&gt;
                    &lt;attr name="position" intvalue="1200"/&gt;
                &lt;/file&gt;
                &lt;file name="sep-3.instance"&gt;
                    &lt;attr name="instanceClass" stringvalue="javax.swing.JSeparator"/&gt;
                    &lt;attr name="position" intvalue="1300"/&gt;
                &lt;/file&gt;
                &lt;file name="sep-4.instance"&gt;
                    &lt;attr name="instanceClass" stringvalue="javax.swing.JSeparator"/&gt;
                    &lt;attr name="position" intvalue="1400"/&gt;
                &lt;/file&gt;
            &lt;/folder&gt;
            &lt;folder name="Factories"&gt;
                &lt;file name="AbcDataLoader.instance"&gt;
                    &lt;attr name="SystemFileSystem.icon" urlvalue="nbresloc:/org/myorg/abcfiletype/Datasource.gif"/&gt;
                    &lt;attr name="dataObjectClass" stringvalue="org.myorg.abcfiletype.AbcDataObject"/&gt;
                    &lt;attr name="instanceCreate" methodvalue="org.openide.loaders.DataLoaderPool.factory"/&gt;
                    &lt;attr name="mimeType" stringvalue="text/x-abc"/&gt;
                &lt;/file&gt;
            &lt;/folder&gt;
        &lt;/folder&gt;
    &lt;/folder&gt;
&lt;/folder&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installing_and_trying_out_the_functionality">Installing and Trying Out the Functionality</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s now install the module and then use the basic functionality we&#8217;ve created so far. The IDE uses an Ant build script to build and install your module. The build script is created for you when you create the project.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the Projects window, right-click the  <code>Abc File Type</code>  project and choose Run.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A new instance of the IDE starts, installing your module into itself.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Use the New Project dialog (Ctrl-Shift-N) to create any kind of application in the IDE.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Right-click the application node and choose New &gt; Other. In the Other category, a template is available for working with the new file type:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetype_60-action4.png" alt="filetype 60 action4">
</div>
</div>
<div class="paragraph">
<p>Complete the wizard and you will have created a template that can be used for starting off the user&#8217;s work with the given file type.</p>
</div>
<div class="paragraph">
<p>If you want to provide default code via the template, add the code to the  <code>AbcTemplate.abc</code>  file that the New File Type wizard created for you.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_features_for_abc_files">Creating Features for Abc Files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that the NetBeans Platform is able to distinguish Abc files from all other types of files, it is time to add features specifically for these types of files. In this section, we add a menu item on the right-click contextual menu of the file&#8217;s node in the explorer windows, such as in the Projects window, and we enable the file to open into a window, instead of into an editor.</p>
</div>
<div class="sect2">
<h3 id="_adding_an_action">Adding an Action</h3>
<div class="paragraph">
<p>In this subsection, we use the New Action wizard to create a Java class that will perform an action for our file type. The wizard will also register the class in the  <code>layer.xml</code>  file such that the user will be able to invoke the action from the right-click contextual menu of the file type&#8217;s node in an explorer window.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the project node and choose New &gt; Action.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the Action Type panel, click Conditionally Enabled. Type  <code>AbcDataObject</code> , which is the name of the data object generated above by the New File Type wizard, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetype_60-action1.png" alt="filetype 60 action1">
</div>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the GUI Registration panel, select the 'Edit' category in the Category drop-down list. The Category drop-down list controls where an action is shown in the Keyboard Shortcuts editor in the IDE.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Next, Unselect Global Menu Item and then select File Type Contect Menu Item. In the Content Type drop-down list, select the MIME type you specified above in the New File Type wizard, as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetype_60-action2.png" alt="filetype 60 action2">
</div>
</div>
<div class="paragraph">
<p>Notice that you can set the position of the menu item and that you can separate the menu item from the item before it and after it. Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>In the Name and Location panel, type  <code>MyAction</code>  as the Class Name and type  <code>My Action</code>  as the Display Name. Menu items provided by contextual menus do not display icons. Therefore, click Finish and  <code>MyAction.java</code>  is added to the  <code>org.myorg.abcfiletype</code>  package.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>In the Source Editor, add some code to the action&#8217;s  <code>actionPerformed</code>  method:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Override
public void actionPerformed(ActionEvent ev) {
   FileObject f = context.getPrimaryFile();
   String displayName = FileUtil.getFileDisplayName(f);
   String msg = "I am " + displayName + ". Hear me roar!";
   NotifyDescriptor nd = new NotifyDescriptor.Message(msg);
   DialogDisplayer.getDefault().notify(nd);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Press Ctrl-Shift-I. The IDE automatically adds import statements to the top of the class.</p>
</div>
<div class="paragraph">
<p>Some code is still underlined in red, to indicate that not all of the required packages are on the classpath. Right-click the project node, choose Properties, and click Libraries in the Project Properties dialog box. Click add at the top of the Libraries pane and add the Dialogs API.</p>
</div>
<div class="paragraph">
<p>In the  <code>MyAction.java</code>  class, press Ctrl-Shift-I again. The red underlining disappears because the IDE finds the required packages in the Dialogs API.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>In the Important Files node, expand XML Layer. The two nodes  <code>&lt;this layer&gt;</code>  and  <code>&lt;this layer in context&gt;</code> , together with their subnodes, make up the  <a href="https://netbeans.apache.org/tutorials/nbm-glossary.html">System Filesystem</a> Browser. Expand  <code>&lt;this layer&gt;</code> , expand  <code>Loaders</code> , continue expanding nodes until you see the  <code>Action</code>  that you created above.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Drag-and-drop  <code>My Action</code>  so that it appears below the  <code>Open</code>  action, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetype_60-action3.png" alt="filetype 60 action3">
</div>
</div>
<div class="paragraph">
<p>As you can see from the last two steps, the System Filesystem Browser can be used to quickly reorganize the sequence of the items that are registered in the System Filesystem.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Run the module again, as you did in the previous section.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Create an ABC file, using the template shown in the previous section, and right-click the file&#8217;s node in one of the explorer views, such as in the Projects window or Favorites window.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Notice that the Abc file has the icon you assigned to it in its module and that the list of actions defined in its  <code>layer.xml</code>  file is available from the right-click contextual menu:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetype_60-dummytemplate.png" alt="filetype 60 dummytemplate">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>Choose the new menu item, the Abc file&#8217;s name and location are shown:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetype_60-information.png" alt="filetype 60 information">
</div>
</div>
<div class="paragraph">
<p>You now know how to create a new action that appears in the context menu of a file of the given type, in the Projects window, Files window or the Favorites window.</p>
</div>
</div>
<div class="sect2">
<h3 id="_opening_the_file_into_a_window">Opening the File into a Window</h3>
<div class="paragraph">
<p>By default, when the user opens a file of the type that we have defined in this tutorial, the file will open into a basic editor. However, sometimes you may want to create a visual representation of the file, and let the user drag and drop widgets onto the visual representation. The first step in creating such a user interface is to let the user open the file into a window. This subsection shows you how to do that.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the project node and choose New &gt; Window Component. Set "editor" for Window Position and "Open on Application Start", as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetype_65-topc-1.png" alt="filetype 65 topc 1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Click Next and type "Abc" as the Class Name Prefix:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetype_65-topc-2.png" alt="filetype 65 topc 2">
</div>
</div>
<div class="paragraph">
<p>Click Finish.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Change the  <code>DataObject</code>  to use  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-loaders/org/openide/loaders/OpenSupport.html">OpenSupport</a></code>  instead of DataEditorSupport, by changing the  <code>DataObject&#8217;s</code>  constructor as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public AbcDataObject(FileObject pf, MultiFileLoader loader)
        throws DataObjectExistsException, IOException {

    super(pf, loader);
    CookieSet cookies = getCookieSet();
    *//cookies.add((Node.Cookie) DataEditorSupport.create(this, getPrimaryEntry(), cookies));
    cookies.add((Node.Cookie) new AbcOpenSupport(getPrimaryEntry()));*

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Create the  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-loaders/org/openide/loaders/OpenSupport.html">OpenSupport</a></code>  class:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">class AbcOpenSupport extends OpenSupport implements OpenCookie, CloseCookie {

    public AbcOpenSupport(AbcDataObject.Entry entry) {
        super(entry);
    }

    protected CloneableTopComponent createCloneableTopComponent() {
        AbcDataObject dobj = (AbcDataObject) entry.getDataObject();
        AbcTopComponent tc = new AbcTopComponent();
        tc.setDisplayName(dobj.getName());
        return tc;
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tweak the TopComponent to extend CloneableTopComponent, instead of TopComponent. Set the TopComponent&#8217;s class modifier, and its constructor&#8217;s modifier, to public instead of private.</p>
</div>
<div class="paragraph">
<p>Run the module again and then, when an Abc file is opened, the  <code>OpenSupport</code>  class handles the opening, such that it opens the file into the  <code>TopComponent</code>  instead of the basic editor that  <code>DataEditorSupport</code>  provides:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetype_65-topc-3.png" alt="filetype 65 topc 3">
</div>
</div>
<div class="paragraph">
<p>The  <a href="https://netbeans.apache.org/tutorials/nbm-visual_library.html">NetBeans Visual Library Tutorial</a> provides an example of what you can do to develop the TopComponent further such that it will visually display the content of a file that corresponds to the file type defined in this tutorial.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_multiview_window">Creating a Multiview Window</h3>
<div class="paragraph">
<p>Now that we are able to open a file into a window, let&#8217;s make the window more interesting. We&#8217;ll create a multiview window. The first tab of a multiview window is typically used to display a visual representation of the file, while the second tab typically shows the source view. More than two tabs can also be provided, each tab providing further levels of detail about the opened file.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the project node and choose Properties. In the Project Properties dialog, choose Libraries, and click Add. Set a dependency on " <a href="http://bits.netbeans.org/dev/javadoc/org-netbeans-core-multiview/overview-summary.html">MultiView Windows</a>". Click OK and then click OK again to exit the Project Properties dialog.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>For each tab that you want to create in the multiview window, create a class that implements  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-netbeans-core-multiview/org/netbeans/core/spi/multiview/MultiViewDescription.html">MultiViewDescription</a></code>  and  <code>Serializable</code> .</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For purposes of this tutorial, start by creating a class called  <code>AbcMultiviewDescription1</code> , implementing the specified classes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class AbcMultiviewDescription1 implements MultiViewDescription, Serializable {

    public int getPersistenceType() {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    public String getDisplayName() {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    public Image getIcon() {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    public HelpCtx getHelpCtx() {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    public String preferredID() {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    public MultiViewElement createElement() {
        throw new UnsupportedOperationException("Not supported yet.");
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the  <code>AbcMultiviewDescription1</code>  class above, the method  <code>createElement()</code>  returns a MultiViewElement. What you want to return here is your  <code>TopComponent</code> , which we will do in the next step.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Rewrite the class signature. To provide a multiview element for the description in the previous step, we need to implement  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-netbeans-core-multiview/org/netbeans/core/spi/multiview/MultiViewElement.html">MultiViewElement</a></code> :</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public final class AbcTopComponent extends TopComponent implements MultiViewElement {</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the  <code>TopComponent</code> , you now need to delete (or comment out) the methods  <code>findInstance()</code> ,  <code>getPersistenceType()</code> ,  <code>writeReplace()</code>  and  <code>preferredID()</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>For the moment, provide very simple implementations of each of the required methods. Start by defining a new  <code>JToolbar</code>  at the top of the  <code>TopComponent</code>  class:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private JToolBar toolbar = new JToolBar();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, implement the methods as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    public JComponent getVisualRepresentation() {
        return this;
    }

    public JComponent getToolbarRepresentation() {
        return toolbar;
    }

    public void setMultiViewCallback(MultiViewElementCallback arg0) {
    }

    public CloseOperationState canCloseElement() {
        return null;
    }

    public Action[] getActions() {
        return new Action[]{};
    }

    public Lookup getLookup() {
        return Lookups.singleton(this);
    }

    public void componentShowing() {
    }

    public void componentHidden() {
    }

    public void componentActivated() {
    }

    public void componentDeactivated() {
    }

    public UndoRedo getUndoRedo() {
        return UndoRedo.NONE;
    }</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Now you can redefine the  <code>AbcMultiviewDescription1</code>  as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class AbcMultiviewDescription1 implements MultiViewDescription, Serializable {

    public int getPersistenceType() {
        return TopComponent.PERSISTENCE_ALWAYS;
    }

    public String getDisplayName() {
        return "Tab 1";
    }

    public Image getIcon() {
        return ImageUtilities.loadImage("/org/myorg/abcfiletype/Datasource.gif");
    }

    public HelpCtx getHelpCtx() {
        return null;
    }

    public String preferredID() {
       return "AbcMultiviewDescription1";
    }

    public MultiViewElement createElement() {
        return new AbcTopComponent();
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Change the  <code>createCloneableTopComponent</code>  method in the  <code>OpenSupport</code>  class to open your  <code>TopComponent</code>  via the  <code>MultiViewDescription</code>  class you created above:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">protected CloneableTopComponent createCloneableTopComponent() {

    // Create an array of multiview descriptors:
    AbcMultiviewDescription1 firstTab = new AbcMultiviewDescription1();
    MultiViewDescription[] descriptionArray = { firstTab };

    // Create the multiview window:
    CloneableTopComponent tc = MultiViewFactory.createCloneableMultiView(descriptionArray, firstTab,  null);
    tc.setDisplayName(entry.getDataObject().getName());
    return tc;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The second argument in  <code>MultiViewFactory.createCloneableMultiView</code>  determines which of the tabs is open by default. Here it is  <code>firstTab</code> , the tab defined by  <code>AbcMultiViewDescription1</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Install and open the file again. Now you have a multiview window with one tab:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetype_65-mvdeployed.png" alt="filetype 65 mvdeployed">
</div>
</div>
<div class="paragraph">
<p>You now have a single tab in a multiview window. For each additional tab, create a new  <code>MultiviewDescription</code>  class, with a new  <code>TopComponent</code> , and then instantiate the  <code>MultiViewDescription</code>  class in the  <code>OpenSupport</code>  extension class, as shown above.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_shareable_module_binary">Creating a Shareable Module Binary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that the module is complete, you can let others use it. To do so, you need to create a binary "NBM" (NetBeans module) file and distribute it.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the Projects window, right-click the  <code>Abc File Type</code>  project and choose Create NBM.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The NBM file is created and you can view it in the Files window (Ctrl-2):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetype_60-shareable-nbm.png" alt="filetype 60 shareable nbm">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Make it available to others via, for example, the  <a href="http://plugins.netbeans.org/PluginPortal/">NetBeans Plugin Portal</a>. The recipient should use the Plugin Manager (Tools &gt; Plugins) to install it.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a href="http://netbeans.apache.org/community/mailing-lists.html">Send Us Your Feedback</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_steps">Next Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information about creating and developing NetBeans modules, see the following resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://netbeans.apache.org/platform/index.html">NetBeans Platform Homepage</a></p>
</li>
<li>
<p><a href="https://bits.netbeans.org/dev/javadoc/">NetBeans API List (Current Development Version)</a></p>
</li>
<li>
<p><a href="https://netbeans.apache.org/kb/docs/platform.html">Other Related Tutorials</a></p>
</li>
</ul>
</div>
</div>
</div>
        
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/68/nbm-filetype.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
