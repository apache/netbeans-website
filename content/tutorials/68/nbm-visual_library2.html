
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans Visual Database Explorer Tutorial</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans Visual Database Explorer Tutorial - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, NetBeans Visual Database Explorer Tutorial">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 12.6</h1>
            <p><a class="button success" href="/download/nb126/nb126.html">Find out more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">NetBeans Visual Database Explorer Tutorial</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/68/nbm-visual_library2.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_setting_up_the_module">Setting Up the Module</a></li>
<li><a href="#_creating_the_action">Creating the Action</a></li>
<li><a href="#_creating_the_window">Creating the Window</a></li>
<li><a href="#_creating_the_scene">Creating the Scene</a></li>
<li><a href="#_connect_the_database_to_the_scene">Connect the Database to the Scene</a></li>
<li><a href="#_next_steps">Next Steps</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In this tutorial, you will learn how to create a visual view on top of the content of a database:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/65-db-3.png" alt="65 db 3">
</div>
</div>
<div class="paragraph">
<p>Optionally, for troubleshooting purposes, you can  <a href="http://plugins.netbeans.org/PluginPortal/faces/PluginDetailPage.jsp?pluginid=14287">download the completed sample for NetBeans Platform 6.5</a> and inspect the sources.</p>
</div>
<div class="paragraph">
<p>All the information you need to know for working with the Visual Library API, as well as with the Database Explorer API, is collected at the following locations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://netbeans.apache.org/graph/">Visual Library Project Page</a></p>
</li>
<li>
<p><a href="https://netbeans.apache.org/graph/documentation.html">Visual Library 2.0 - Documentation</a></p>
</li>
<li>
<p><a href="http://bits.netbeans.org/dev/javadoc/org-netbeans-api-visual/overview-summary.html">Visual Library API Javadoc</a></p>
</li>
<li>
<p><a href="http://bits.netbeans.org/dev/javadoc/org-netbeans-modules-db/overview-summary.html">Database Explorer API Javadoc</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Also, see  <a href="http://www.javalobby.org/eps/netbeans_visual_library/">Roman Strobl&#8217;s Visual Library Screencast</a> on Javalobby.</p>
</div>
<div class="paragraph">
<p>Before continuing, you are assumed to have read the  <a href="https://netbeans.apache.org/tutorials/nbm-visual_library.html">NetBeans Visual Library Tutorial</a>, which gives you the basics for working with the Visual Library. The basics discussed in that tutorial will not be repeated here.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_up_the_module">Setting Up the Module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we use wizards to create a module project and a custom window component.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Choose File &gt; New Project (Ctrl+Shift+N). Under Categories, select NetBeans Modules. Under Projects, select Module. Click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the Name and Location panel, type  <code>DatabaseExplorerDemo</code>  in the Project Name field. Change the Project Location to any directory on your computer. Leave the Standalone Module option and Set as Main Project checkbox selected. Click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the Basic Module Configuration panel, type  <code>org.demo</code>  in Code Name Base.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
Select "Generate XML Layer". Leave the locations of both the localizing bundle and the XML layer file so that they will be stored in a package with the name  <code>org/demo</code> . Click Finish.</p>
</div>
<div class="paragraph">
<p>The IDE creates the  <code>DatabaseExplorerDemo</code>  project. The project contains all of your sources and project metadata, such as the project&#8217;s Ant build script. The project opens in the IDE. You can view its logical structure in the Projects window (Ctrl+1) and its file structure in the Files window (Ctrl+2).</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Right-click the project, choose Properties, click Libraries in the Project Properties dialog box and declare a dependency on the following APIs:</p>
<div class="ulist">
<ul>
<li>
<p>Database Explorer</p>
</li>
<li>
<p>Nodes API</p>
</li>
<li>
<p>Swing Layout Extensions Integration</p>
</li>
<li>
<p>UI Utilities API</p>
</li>
<li>
<p>Utilities API</p>
</li>
<li>
<p>Visual Library API</p>
</li>
<li>
<p>Window System API</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In 6.5, you need to set an implementation dependency on the Database Explorer API. Do so by selecting the Database Explorer item in the Libraries panel of the Project Properties dialog, clicking Edit, and then clicking 'Implementation Version'. By doing this, you are setting a dependency on internal classes that will change in future releases. Currently there is no other way of completing the scenario in this tutorial than to set an implementation dependency. In 7.0, a different approach will be taken and an implementation dependency will not be needed.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Click OK to close the Project Properties dialog.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_action">Creating the Action</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We will create an action that will only be enabled if the activated node has the  <code>ConnectionNode</code>  from the Database Explorer API in its Lookup.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the module project, choose New &gt; Other and choose Action from the Module Development category:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/65-db-1.png" alt="65 db 1">
</div>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Select 'Conditionally Enabled (use CookieAction)' and specify the following class as the capability that needs to be available for the menu item to be enabled:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">org.netbeans.modules.db.explorer.nodes.ConnectionNode</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see the following:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/65-db-2.png" alt="65 db 2">
</div>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the GUI Registration page, accept all the defaults. Click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Type "ShowDatabaseStructureAction" as the class name and then type "Show Database Structure" as the display name. Optionally, select an icon (16x16 pixels in size). Click Finish.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>In the editor, you will see a red error underline for the  <code>ConnectionNode</code>  class. Click the lightbulb in the left side of the editor to let the IDE add the import statement to the import declaration at the top of the class.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You now have a new  <code>CookieAction</code>  class that will be displayed in the main menu bar. However, it will only be enabled if the  <code>ConnectionNode</code>  class is available in the current Lookup.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_window">Creating the Window</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we create a new window component that will hold our scene.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the module project, choose New &gt; Other and choose Window Component from the Module Development category. Click Next. Choose  <code>editor</code>  in the drop-down list. Do not select Open on Application Start. Click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Type  <code>Demo</code>  in Class Name Prefix. Optionally, add an icon with a dimension of 16x16 pixels. Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Multiple files are generated, one of them is  <code>DemoTopComponent</code> . Open this file in Design mode.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Right-click in the TopComponent in Design mode, choose Set Layout, and select BorderLayout.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Switch to Source mode and change the  <code>getPersistenceType</code>  method to return  <code>TopComponent.PERSISTENCE_NEVER</code> .</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_scene">Creating the Scene</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Programming with the Visual Library API is similar to programming in Swing. You build and modify a tree of visual elements that are called "widgets". The root of the tree is represented by a Scene class which holds all the visual data of the scene. The scene is a widget. You have to create a scene view, which is a JComponent. You must then add the JComponent to a JScrollPane.</p>
</div>
<div class="paragraph">
<p>In this section, we add a JScrollPane to our TopComponent. Then we create a new Visual Library scene in a separate Java source file. Next, we pass the scene to the TopComponent, so that it can be displayed in the TopComponent&#8217;s JScrollPane. We then install the module project and display our first scene.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Use the Palette (Ctrl-Shift-8) to drop a  <code>JScrollPane</code>  on the TopComponent.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the  <code>org.demo</code>  package, create a Java class called  <code>DBGraphScene</code> . Let the class extend  <code>VMDGraphScene</code> .</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A red error underline and a lightbulb appears. Let the IDE generate the import statement.</p>
</div>
<div class="paragraph">
<p>A red error underline and a lightbulb appears again. Let the IDE generate the class&#8217;s abstract methods.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Replace the content of the class with the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import java.awt.Image;
import java.awt.Point;
import java.util.Arrays;
import java.util.List;
import org.netbeans.api.visual.vmd.VMDGraphScene;
import org.netbeans.api.visual.vmd.VMDNodeWidget;
import org.netbeans.api.visual.vmd.VMDPinWidget;
import org.openide.util.ImageUtilities;

public class DBGraphScene extends VMDGraphScene{

    private static final Image IMAGE_LIST = ImageUtilities.loadImage("org/demo/resources/list_16.png"); // NOI18N
    private static final Image IMAGE_CANVAS = ImageUtilities.loadImage("org/demo/resources/custom_displayable_16.png"); // NOI18N
    private static final Image IMAGE_COMMAND = ImageUtilities.loadImage("org/demo/resources/command_16.png"); // NOI18N
    private static final Image IMAGE_ITEM = ImageUtilities.loadImage("org/demo/resources/item_16.png"); // NOI18N
    private static final Image GLYPH_PRE_CODE = ImageUtilities.loadImage("org/demo/resources/preCodeGlyph.png"); // NOI18N
    private static final Image GLYPH_POST_CODE = ImageUtilities.loadImage("org/demo/resources/postCodeGlyph.png"); // NOI18N
    private static final Image GLYPH_CANCEL = ImageUtilities.loadImage("org/demo/resources/cancelGlyph.png"); // NOI18N
    private static int nodeID = 1;
    private static int edgeID = 1;

    public DBGraphScene() {
        String mobile = createNode (this, 100, 100, IMAGE_LIST, "menu", "List", null);
        createPin (this, mobile, "start", IMAGE_ITEM, "Start", "Element");
        String game = createNode (this, 600, 100, IMAGE_CANVAS, "gameCanvas", "MyCanvas", Arrays.asList (GLYPH_PRE_CODE, GLYPH_CANCEL, GLYPH_POST_CODE));
        createPin (this, game, "ok", IMAGE_COMMAND, "okCommand1", "Command");
        createEdge (this, "start", game);
        createEdge (this, "ok", mobile);
    }

    private static String createNode (VMDGraphScene scene, int x, int y, Image image, String name, String type, List&lt;Image&gt; glyphs) {
        String nodeID = "node" + DBGraphScene.nodeID ++;
        VMDNodeWidget widget = (VMDNodeWidget) scene.addNode (nodeID);
        widget.setPreferredLocation (new Point (x, y));
        widget.setNodeProperties (image, name, type, glyphs);
        scene.addPin (nodeID, nodeID + VMDGraphScene.PIN_ID_DEFAULT_SUFFIX);
        return nodeID;
    }


    private static void createPin (VMDGraphScene scene, String nodeID, String pinID, Image image, String name, String type) {
        ((VMDPinWidget) scene.addPin (nodeID, pinID)).setProperties (name, null);
    }


    private static void createEdge (VMDGraphScene scene, String sourcePinID, String targetNodeID) {
        String edgeID = "edge" + DBGraphScene.edgeID ++;
        scene.addEdge (edgeID);
        scene.setEdgeSource (edgeID, sourcePinID);
        scene.setEdgeTarget (edgeID, targetNodeID + VMDGraphScene.PIN_ID_DEFAULT_SUFFIX);
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Add an instance variable for the scene to the top of the TopComponent&#8217;s source code:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private DBGraphScene scene = new DBGraphScene();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Add the scene to the JScrollPane&#8217;s ViewportView, at the end of the TopComponent&#8217;s constructor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">jScrollPane1.setViewportView( scene.createView() );</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Right-click the module and choose Run. Open the Services window (Ctrl-5), right-click one of the database connection nodes, and then select "Demo" from the Window menu. The window component should open and show you the following:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/65-db-4.png" alt="65 db 4">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_connect_the_database_to_the_scene">Connect the Database to the Scene</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we connect to a selected database by using the Database Explorer API. We then pass the connection to the scene. In the scene, we parse the connection, extract the data, and visually display the data in the scene.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In your action class, you need to make a connection to a selected database and pass it to your window:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Override
protected void performAction(Node[] activatedNodes) {
    ConnectionNode connectionNode = activatedNodes[0].getLookup().lookup(ConnectionNode.class);
    DatabaseConnection databaseConnection = connectionNode.getInfo().getDatabaseConnection().getDatabaseConnection();
    if (databaseConnection.getJDBCConnection() == null) {
        ConnectionManager.getDefault().showConnectionDialog(databaseConnection);
    }
    Connection connection = databaseConnection.getJDBCConnection();
    DemoTopComponent win = DemoTopComponent.findInstance();
    win.open();
    win.requestActive();
    win.setConnection(connection);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A red error underline will appear below the last line, because it refers to a statement that we have not defined yet. We will do so in the next step.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Back in your window component, you need to receive the connection and call the scene, as shown below:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">final class DemoTopComponent extends TopComponent {

    private static DemoTopComponent instance;

    private static final String PREFERRED_ID = "DemoTopComponent";

    private DBGraphScene scene;

    private DemoTopComponent() {
        initComponents();
        setName(NbBundle.getMessage(DemoTopComponent.class, "CTL_DemoTopComponent"));
        setToolTipText(NbBundle.getMessage(DemoTopComponent.class, "HINT_DemoTopComponent"));
    }

    public void setConnection(Connection connection){
        scene = new DBGraphScene(connection);
        jScrollPane1.setViewportView( scene.createView() );
    }

    ...
    ...
    ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the scene, the constructor that receives the connection does not exist. We will create it in the next step. Until then, reference to that constructor, above, is underlined in red.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the  <code>DBGraphScene</code>  class, extend the code as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class DBGraphScene extends VMDGraphScene {

    private static final Image IMAGE_LIST = ImageUtilities.loadImage("org/demo/resources/list_16.png"); // NOI18N
    private static final Image IMAGE_ITEM = ImageUtilities.loadImage("org/demo/resources/item_16.png"); // NOI18N

    private static int edgeID = 1;

    public DBGraphScene(Connection connection) {
        try {
            createSceneFromConnection(connection);
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    private void createSceneFromConnection(Connection jdbcConnection) throws SQLException {
        ArrayList&lt;String&gt; tables = new ArrayList&lt;String&gt;();
        DatabaseMetaData databaseMetaData = jdbcConnection.getMetaData();
        String[] names = {"TABLE"};
        ResultSet resultSet = databaseMetaData.getTables(null, "%", "%", names);
        while (resultSet.next()) {
            String table = resultSet.getString("TABLE_NAME");
            tables.add(table);
            createNode(this, (int) (Math.random() * 800), (int) (Math.random() * 800), IMAGE_LIST, table, "Table", null);
            ResultSet columns = jdbcConnection.getMetaData().getColumns(null, null, table.toUpperCase(), "%");
            while (columns.next()) {
                String columnName = columns.getString("COLUMN_NAME");
                createPin(this, table, table + ":" + columnName, IMAGE_ITEM, columnName, columnName);
            }
        }
        for (String string : tables) {
            ResultSet resultSet1 = databaseMetaData.getExportedKeys(null, null, string);
            while (resultSet1.next()) {
                String pkTable = resultSet1.getString("PKTABLE_NAME");
                String pkColumn = resultSet1.getString("PKCOLUMN_NAME");
                String fkTable = resultSet1.getString("FKTABLE_NAME");
                String fkColumn = resultSet1.getString("FKCOLUMN_NAME");
                createEdge(this, fkTable + ":" + fkColumn, pkTable + ":" + pkColumn);
            }
        }
        this.moveTo(null);
    }

    private static String createNode(VMDGraphScene scene, int x, int y, Image image, String name, String type, java.util.List&lt;Image&gt; glyphs) {
        String node = name;
        VMDNodeWidget widget = (VMDNodeWidget) scene.addNode(node);
        widget.setPreferredLocation(new Point(x, y));
        widget.setNodeProperties(image, name, type, glyphs);
        return node;
    }

    private static void createPin(VMDGraphScene scene, String nodeID, String pinID, Image image, String name, String type) {
        ((VMDPinWidget) scene.addPin(nodeID, pinID)).setProperties(name, null);
    }

    private static void createEdge(VMDGraphScene scene, String sourcePinID, String targetPinID) {
        String edge = "edge" + DBGraphScene.edgeID++;
        scene.addEdge(edge);
        scene.setEdgeSource(edge, sourcePinID);
        scene.setEdgeTarget(edge, targetPinID);
    }

    private void moveTo(Point point) {
        int index = 0;
        for (String node : getNodes()) {
            getSceneAnimator().animatePreferredLocation(findWidget(node), point != null ? point : new Point(++index * 100, index * 100));
        }
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The  <code>createSceneFromConnection</code>  method gets the  <code>DatabaseMetadata ( jdbcConnection.getMetaData() )</code>  from the  <code>Connection</code> . With the subsequent calls to  <code>getTables</code> , the table structure is retrieved and the nodes of the graph are created. For every table,  <code>getColumns</code>  is called and a Pin is added for every column to the table node. These pins can be used in a subsequent step to create a connection between two tables. Now we iterate through the tables and call  <code>getExportedKeys</code>  to get hold of the  <code>ForeignKeys</code> . For every exported key, an edge is created between the pins of the related columns. The  <code>moveTo</code>  method does the animation when the window is opened.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Run the module again. Open the Services window. Expand the Databases node. Select one of the connection nodes. The "Show Database Structure" menu item, under the File menu, should now be enabled. Select it and now your scene should open and look as follows:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/65-db-3.png" alt="65 db 3">
</div>
</div>
<div class="paragraph">
<p>Congratulations, you have completed a Visual Library scene that connects to a database and visually displays its content.</p>
</div>
<div class="paragraph">
<p><a href="http://netbeans.apache.org/community/mailing-lists.html">Send Us Your Feedback</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_steps">Next Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information on working with the Visual Library API, see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.javalobby.org/eps/netbeans_visual_library/">Roman Strobl&#8217;s Visual Library Screencast</a> on Javalobby.</p>
</li>
<li>
<p><a href="https://netbeans.apache.org/graph/">Visual Library Project Page</a></p>
</li>
<li>
<p><a href="https://netbeans.apache.org/graph/documentation.html">Visual Library 2.0 - Documentation</a></p>
</li>
<li>
<p><a href="http://bits.netbeans.org/dev/javadoc/org-netbeans-api-visual/overview-summary.html">Visual Library API Javadoc</a></p>
</li>
<li>
<p><a href="http://bits.netbeans.org/dev/javadoc/org-netbeans-modules-db/overview-summary.html">Database Explorer API Javadoc</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>With thanks to Toni Epple, who wrote the first version of this tutorial,  <a href="http://wiki.netbeans.org/VisualDatabaseExplorer">A Visual Database Explorer for NetBeans</a>.</p>
</div>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/68/nbm-visual_library2.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1><a href="/about/index.html">About</a></h1>
                <ul>
                    <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb110/nb110.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2020 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
