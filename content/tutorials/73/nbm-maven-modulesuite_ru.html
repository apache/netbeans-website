
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Работа с наборами модулей на платформе NetBeans с помощью Maven</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Работа с наборами модулей на платформе NetBeans с помощью Maven - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, Работа с наборами модулей на платформе NetBeans с помощью Maven">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Работа с наборами модулей на платформе NetBeans с помощью Maven</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/73/nbm-maven-modulesuite_ru.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_использование_maven_в_среде_ide">Использование Maven в среде IDE</a>
<ul class="sectlevel2">
<li><a href="#_настройка_параметров_maven">Настройка параметров Maven</a></li>
<li><a href="#_просмотр_репозиториев_maven">Просмотр репозиториев Maven</a></li>
</ul>
</li>
<li><a href="#_создание_набора_модулей_на_платформе_netbeans">Создание набора модулей на платформе NetBeans</a></li>
<li><a href="#_изменение_модуля_myapi">Изменение модуля MyAPI</a>
<ul class="sectlevel2">
<li><a href="#_создание_класса_в_модуле_myapi">Создание класса в модуле MyAPI</a></li>
<li><a href="#_определение_общедоступных_пакетов">Определение общедоступных пакетов</a></li>
</ul>
</li>
<li><a href="#_создание_модуля_myviewer">Создание модуля MyViewer</a>
<ul class="sectlevel2">
<li><a href="#_создание_модуля">Создание модуля</a></li>
<li><a href="#_создание_оконного_компонента">Создание оконного компонента</a></li>
</ul>
</li>
<li><a href="#_создание_модуля_myeditor">Создание модуля MyEditor</a>
<ul class="sectlevel2">
<li><a href="#_создание_модуля_2">Создание модуля</a></li>
<li><a href="#_добавление_действия">Добавление действия</a></li>
<li><a href="#_добавление_компонента_редактора">Добавление компонента редактора</a></li>
</ul>
</li>
<li><a href="#_сборка_и_запуск_набора_модулей">Сборка и запуск набора модулей</a>
<ul class="sectlevel2">
<li><a href="#_объявление_прямых_зависимостей">Объявление прямых зависимостей</a></li>
<li><a href="#_определение_местоположения_установки_netbeans">Определение местоположения установки NetBeans</a></li>
<li><a href="#_запуск_приложения">Запуск приложения</a></li>
</ul>
</li>
<li><a href="#_динамическое_изменение_lookup">Динамическое изменение Lookup</a></li>
<li><a href="#_дополнительные_сведения">Дополнительные сведения</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>В этом документе описываются принципы создания набора модулей на платформе NetBeans из архетипов Maven, принципы построения и установки этого набора в среде IDE. В этом учебном курсе будет создан проект набора модулей Maven, содержащий три модуля на платформе NetBeans в качестве подпроектов. Проект Maven с подпроектами является простым проектом POM, объявляющим метод компиляции набора модулей и цель установки.</p>
</div>
<div class="paragraph">
<p>Этот документ основан на  <a href="https://netbeans.apache.org/tutorials/nbm-selection-1.html">Учебном курсе по управлению выбором NetBeans</a> на базе Ant и описывает различия между Ant и Maven при разработке наборов модулей на платформе NetBeans. После изучения отличий Maven от Ant можно легко пройти другие учебные курсы в  <a href="https://netbeans.apache.org/kb/docs/platform_ru.html">Учебной карте по платформе NetBeans</a>.</p>
</div>
<div class="paragraph">
<p>При отсутствии опыта работы с платформой NetBeans можно посмотреть серию демонстрационных роликов  <a href="https://netbeans.apache.org/tutorials/nbm-10-top-apis.html">10 лучших интерфейсов API NetBeans</a>.</p>
</div>
<div class="paragraph">
<p><strong>Содержимое</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#config">Использование Maven в среде IDE</a></p>
</li>
<li>
<p><a href="#config1">Настройка параметров Maven</a></p>
</li>
<li>
<p><a href="#config2">Просмотр репозиториев Maven</a></p>
</li>
<li>
<p><a href="#01">Создание набора модулей на платформе NetBeans</a></p>
</li>
<li>
<p><a href="#02">Изменение модуля MyAPI</a></p>
</li>
<li>
<p><a href="#02a">Создание класса</a></p>
</li>
<li>
<p><a href="#02b">Определение общедоступных пакетов</a></p>
</li>
<li>
<p><a href="#03">Создание модуля MyViewer</a></p>
</li>
<li>
<p><a href="#03b">Создание оконного компонента</a></p>
</li>
<li>
<p><a href="#04">Создание модуля MyEditor</a></p>
</li>
<li>
<p><a href="#04b">Добавление действия</a></p>
</li>
<li>
<p><a href="#04c">Добавление компонента редактора</a></p>
</li>
<li>
<p><a href="#05">Сборка и запуск набора модулей</a></p>
</li>
<li>
<p><a href="#05a">Объявление прямых зависимостей</a></p>
</li>
<li>
<p><a href="#05b">Определение местоположения установки NetBeans</a></p>
</li>
<li>
<p><a href="#05c">Запуск приложения</a></p>
</li>
<li>
<p><a href="#06">Динамическое изменение Lookup</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Для работы с этим учебным курсом требуется программное обеспечение и ресурсы, перечисленные в следующей таблице.</strong></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Для разработки приложений на платформе NetBeans не требуется загружать отдельную версию этой платформы. Как правило, разработка приложений и модулей осуществляется в среде IDE NetBeans, затем необходимо просто включить требуемые модули для выполнения платформы NetBeans и созданного приложения.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Перед изучением этого учебного курса можно ознакомиться со следующей документацией:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://netbeans.apache.org/wiki/">Часто задаваемые вопросы по разработке NetBeans </a></p>
</li>
<li>
<p><a href="http://wiki.netbeans.org/MavenBestPractices">Практические рекомендации по Apache Maven в NetBeans 6.x</a>;</p>
</li>
<li>
<p><a href="http://www.sonatype.com/books/maven-book/reference/introduction.html">Глава 1. Введение в Apache Maven</a> (из книги  <a href="http://www.sonatype.com/books/maven-book/reference/public-book.html">Maven: полное руководство</a>)</p>
</li>
<li>
<p><a href="https://netbeans.apache.org/kb/docs/java/gui-functionality_ru.html">Введение в разработку графического интерфейса </a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_использование_maven_в_среде_ide">Использование Maven в среде IDE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Если это первый опыт работы с Maven, следует проверить параметры настройки и обозреватель репозиториев Maven.</p>
</div>
<div class="sect2">
<h3 id="_настройка_параметров_maven">Настройка параметров Maven</h3>
<div class="paragraph">
<p>Для настройки поведения Maven в среде IDE и проверки корректности этой настройки перейдите на вкладку Maven в окне "Параметры".</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Выберите категорию "Разное" в окне "Параметры" и перейдите на вкладку Maven.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Укажите папку установки Maven (требуется версия 2.0.9 или более поздняя).</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Подтвердите корректность адреса к локальному репозиторию Maven.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Нажмите кнопку "ОК".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>В большинстве случаев при использовании типичной настройки Maven данные в окне "Параметры" уже корректны.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Поддержка Maven активируется как часть набора функциональных возможностей Java SE. Если в окне "Параметры" вкладка Maven недоступна, подтвердите активацию Java SE при создании приложения Java.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_просмотр_репозиториев_maven">Просмотр репозиториев Maven</h3>
<div class="paragraph">
<p>Артефакты, используемые Maven для создания всех проектов, сохраняются в локальном репозитории Maven. Если артефакт объявлен как зависимость проекта и еще не установлен, он загружается в локальный репозиторий из одного из зарегистрированных удаленных репозиториев.</p>
</div>
<div class="paragraph">
<p>Репозиторий NetBeans и некоторые известные индексированные репозитории Maven зарегистрированы и включены в список окна "Обозреватель репозитория" по умолчанию. Репозиторий NetBeans содержит большинство общедоступных артефактов, требуемых для создания проекта. Обозреватель репозиториев Maven можно использовать для просмотра содержимого локальных и удаленных репозиториев. Для просмотра локальных артефактов разверните узел "Локальный репозиторий". Артефакты, указанные в узлах удаленного репозитория, могут быть добавлены в качестве зависимостей проекта, однако не все из них представлены локально. Они добавляются к локальному репозиторию только в том случае, если объявляются в качестве зависимостей проекта.</p>
</div>
<div class="paragraph">
<p>Чтобы открыть обозреватель репозиториев Maven:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>выберите в главном меню "Окно" &gt; "Прочее" &gt; "Обозреватель репозиториев Maven".</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-quickstart68_maven-nbm-netbeans-repo.png" alt="maven quickstart68 maven nbm netbeans repo">
</div>
<div class="title">Figure 1. Снимок экрана: обозреватель репозиториев Maven</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_набора_модулей_на_платформе_netbeans">Создание набора модулей на платформе NetBeans</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе для построения набора модулей на платформе NetBeans из архетипа Maven используется мастер создания проекта. Мастер создает проект POM, содержащий проекты модулей. Также в мастере создается модуль в качестве подпроекта набора.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Откройте мастер создания проекта и выберите в категории Maven "Набор модулей Maven NetBeans". Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>В поле "Имя проекта" введите <strong>MavenSelectionSuite</strong>. Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Выберите команду "Создать проект модуля" и введите в поле "Имя модуля" <strong>MyAPI</strong>. Нажмите кнопку "Готово".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Готово" в среде IDE создаются проект MavenSelectionSuite и подпроект модуля на платформе NetBeans MyAPI.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_maven-suite-projectswindow.png" alt="maven suite maven suite projectswindow" width="Проекты""">
</div>
<div class="title">Figure 2. Снимок экрана: окно </div>
</div>
<div class="paragraph">
<p>MavenSelectionSuite - это проект POM, являющийся контейнером для подпроектов, в данном случае - проектов модуля на платформе NetBeans. Проект POM не содержит исходных файлов. POM проекта содержит указания по компиляции набора. При его просмотре видно, что значение  <code>pom</code>  установлено для упаковки.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">     &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;com.mycompany&lt;/groupId&gt;
    &lt;artifactId&gt;MavenSelectionSuite&lt;/artifactId&gt;
    *&lt;packaging&gt;pom&lt;/packaging&gt;*
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;MavenSelectionSuite Netbeans Module Suite&lt;/name&gt;
    ...
        &lt;properties&gt;
            &lt;netbeans.version&gt;RELEASE69&lt;/netbeans.version&gt;
        &lt;/properties&gt;
    *&lt;modules&gt;
        &lt;module&gt;MyAPI&lt;/module&gt;
    &lt;/modules&gt;*
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>POM также содержит список модулей, включаемых при построении проекта POM. Обратите внимание, что проект MyAPI приведен в качестве модуля.</p>
</div>
<div class="paragraph">
<p>Разверните узел "Модули" в окне "Проекты": проект MyAPI приводится в качестве модуля. В окне "Файлы" можно увидеть, что каталог проекта MyAPI расположен в каталоге  <code>MavenSelectionSuite</code> . При создании нового проекта в каталоге проекта POM проект автоматически добавляется в среде IDE в список модулей, включаемых при построении и запуске проекта POM.</p>
</div>
<div class="paragraph">
<p>При создании набора модулей на платформе NetBeans из архетипа Maven в мастере создания проекта не нужно указывать местоположение установки целевой платформы NetBeans, как это указывалось в среде Ant. Чтобы настроить установку платформы NetBeans, необходимо изменить элемент  <code>&lt;netbeans.installation&gt;</code>  в файле  <code>profiles.xml</code>  проекта POM и явным образом указать путь к установке платформы. Для получения дополнительных сведений обратитесь к разделу <a href="#05b">Определение местоположения установки NetBeans</a> в этом учебном курсе.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_изменение_модуля_myapi">Изменение модуля MyAPI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Модуль MyAPI был построен при создании набора модулей, однако теперь в этом модуле необходимо создать класс и представить его для других модулей.</p>
</div>
<div class="sect2">
<h3 id="_создание_класса_в_модуле_myapi">Создание класса в модуле MyAPI</h3>
<div class="paragraph">
<p>В этом упражнении описано создание простого класса с именем  <code>APIObject</code> . Все экземпляры класса  <code>APIObject</code>  уникальны, так как поле  <code>index</code>  увеличивается на единицу каждый раз при создании нового элемента  <code>APIObject</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Разверните проект MyAPI в окне "Проекты".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Щелкните узел "Исходные файлы" правой кнопкой мыши и выберите "Создать" &gt; "Java Class".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>В поле "Имя класса" введите <strong>APIObject</strong> и выберите в контекстном меню "Пакет"  <code>com.mycompany.mavenselectionsuite</code> . Нажмите кнопку "Готово".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Измените этот класс, чтобы объявить несколько полей и добавить следующие простые методы:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java"> public final class APIObject {

   private final Date date = new Date();
   private static int count = 0;
   private final int index;

   public APIObject() {
      index = count++;
   }

   public Date getDate() {
      return date;
   }

   public int getIndex() {
      return index;
   }

   public String toString() {
       return index + " - " + date;
   }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Исправьте операторы импорта и сохраните измененные данные.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_определение_общедоступных_пакетов">Определение общедоступных пакетов</h3>
<div class="paragraph">
<p>В этом учебном курсе будут созданы дополнительные модули, требуемые для получения доступа к методам в  <code>APIObject</code> . В этом упражнении содержимое модуля MyAPI будет объявлено общедоступным, чтобы другие модули могли получить доступ к методам. Чтобы объявить пакет  <code>com.mycompany.mavenselectionsuite</code>  общедоступным, необходимо изменить элемент  <code>configuration</code>  в  <code>nbm-maven-plugin</code>  в POM для указания пакетов, экспортируемых как общедоступные. Изменения в POM можно внести непосредственно в редакторе либо в окне "Проекты", указав пакеты, экспортируемые как общедоступные.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Щелкните узел проекта правой кнопкой мыши и выберите "Свойства", чтобы открыть окно свойств.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Выберите пакет <strong>com.mycompany.mavenselectionsuite</strong> в категории <strong>Общедоступные пакеты</strong>. Нажмите кнопку "ОК".
image::images/maven-suite_maven-suite-publicpackages.png[title="Категория "Общедоступные пакеты" в окне "Свойства""]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При выборе экспортируемого пакета среда IDE изменяет элемент  <code>nbm-maven-plugin</code>  в POM, чтобы указать пакет.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
    &lt;artifactId&gt;nbm-maven-plugin&lt;/artifactId&gt;
    &lt;extensions&gt;true&lt;/extensions&gt;
    &lt;configuration&gt;
        &lt;publicPackages&gt;
            *&lt;publicPackage&gt;com.mycompany.mavenselectionsuite&lt;/publicPackage&gt;*
        &lt;/publicPackages&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Щелкните проект правой кнопкой мыши и выберите команду "Построить".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При построении проекта элемент  <code>nbm-maven-plugin</code>  создает заголовок манифеста в  <code>MANIFEST.MF</code>  файла JAR, где указываются общедоступные пакеты.</p>
</div>
<div class="paragraph">
<p>Для получения дополнительных сведений обратитесь к  <a href="http://bits.netbeans.org/mavenutilities/nbm-maven-plugin/manifest-mojo.html#publicPackages">документации манифеста nbm-maven-plugin</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_модуля_myviewer">Создание модуля MyViewer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе будет создан новый модуль с именем MyViewer, а также добавлены оконный компонент и два текстовых поля. Этот компонент реализует  <code>LookupListener</code>  для прослушивания изменений в  <a href="https://netbeans.apache.org/wiki/devfaqlookup">Lookup</a>.</p>
</div>
<div class="sect2">
<h3 id="_создание_модуля">Создание модуля</h3>
<div class="paragraph">
<p>В этом упражнении будет создан модуль на платформе NetBeans MyViewer в каталоге  <code>MavenSelectionSuite</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Выберите в главном меню "Файл" &gt; "Новый проект" (CTRL+SHIFT+N).</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Выберите модуль Maven NetBeans из категории Maven. Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>В поле "Имя проекта" введите <strong>MyViewer</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Подтвердите местоположение проекта - каталог  <code>MavenSelectionSuite</code> . Нажмите кнопку "Готово".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>В окне "Проекты" щелкните правой кнопкой мыши узел "Библиотеки" и выберите команду "Добавить зависимость".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>На вкладке "Открыть проекты" выберите модуль на платформе NetBeans MyAPI. Нажмите кнопку "ОК".
image::images/maven-suite_maven-suite-addapi.png[title="Категория "Общедоступные пакеты" в окне "Свойства""]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При нажатии кнопки "ОК" среда IDE добавляет артефакт в список зависимостей в POM и выводит его в узле "Библиотеки".</p>
</div>
<div class="paragraph">
<p>Обратите внимание на POM для модуля MyViewer: вышестоящим проектом для модуля является MavenSelectionSuite, элемент  <code>nbm</code>  указан для  <code>packaging</code> , а элемент <strong>nbm-maven-plugin</strong> используется для построения проекта как модуля на платформе NetBeans.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
*&lt;parent&gt;
    &lt;groupId&gt;com.mycompany&lt;/groupId&gt;
    &lt;artifactId&gt;MavenSelectionSuite&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
&lt;/parent&gt;*
&lt;groupId&gt;com.mycompany&lt;/groupId&gt;
&lt;artifactId&gt;MyViewer&lt;/artifactId&gt;
*&lt;packaging&gt;nbm&lt;/packaging&gt;*
&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
&lt;name&gt;MyViewer NetBeans Module&lt;/name&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_создание_оконного_компонента">Создание оконного компонента</h3>
<div class="paragraph">
<p>В этом упражнении будет создан оконный компонент и добавлено два текстовых поля.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Щелкните проект MyViewer правой кнопкой мыши и выберите "Создать" &gt; "Окно".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Выберите в контекстном меню значение <strong>navigator</strong> и установите флажок "Открывать при запуске приложения". Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>В качестве префикса имени класса введите <strong>MyViewer</strong>. Нажмите кнопку "Готово".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Перетащите две метки из палитры в компонент и измените текст верхней метки на  <code>"[nothing selected]"</code> .
image::images/maven-suite_maven-suite-myviewertopcomponent.png[title="Текстовые поля в оконном компоненте"]</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Перейдите на вкладку "Исходный код" и измените сигнатуру класса, чтобы реализовать  <code>LookupListener</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class MyViewerTopComponent extends TopComponent *implements LookupListener* {</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Реализуйте абстрактные методы, установив курсор в режиме вставки в строке и удерживая нажатыми клавиши ALT+ВВОД.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Добавьте результат поля  <code>private</code>   <code>result</code>  и измените начальное значение на нулевое.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private Lookup.Result result = null;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Внесите следующие изменения в методы  <code>componentOpened()</code> ,  <code>componentClosed()</code>  и  <code>resultChanged()</code> :</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void componentOpened() {
    *result = Utilities.actionsGlobalContext().lookupResult(APIObject.class);
    result.addLookupListener(this);*
}

public void componentClosed() {
    *result.removeLookupListener (this);
    result = null;*
}

public void resultChanged(LookupEvent le) {
    *Lookup.Result r = (Lookup.Result) le.getSource();
    Collection c = r.allInstances();
    if (!c.isEmpty()) {
        APIObject o = (APIObject) c.iterator().next();
        jLabel1.setText (Integer.toString(o.getIndex()));
        jLabel2.setText (o.getDate().toString());
    } else {
        jLabel1.setText("[no selection]");
        jLabel2.setText ("");
    }*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>При каждом открытии компонента с помощью  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-util/org/openide/util/Utilities.html#actionsGlobalContext%28%29">Utilities.actionsGlobalContext()</a></code>  можно предоставить классу возможность глобального прослушивания объекта поиска для выбранного компонента. Lookup удаляется при закрытии компонента. Метод  <code>resultChanged()</code>  реализует  <code>LookupListener</code> , чтобы обновить метки JLabel в форме согласно выбранному объекту  <code>APIObject</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Исправьте операторы импорта и убедитесь, что элемент * <code>org.openide.util.Utilities</code> * добавлен. Сохраните изменения.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_модуля_myeditor">Создание модуля MyEditor</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе будет создан новый модуль с именем MyEditor. Модуль будет содержать компонент  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-windows/org/openide/windows/TopComponent.html">TopComponent</a></code> , предлагающий экземпляры  <code>APIObject</code>  через Lookup. Также будут открыты новые экземпляры компонента MyEditor.</p>
</div>
<div class="sect2">
<h3 id="_создание_модуля_2">Создание модуля</h3>
<div class="paragraph">
<p>В этом упражнении будет создан модуль на платформе NetBeans в каталоге  <code>MavenSelectionSuite</code>  и добавлена зависимость от модуля MyAPI.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>В главном меню выберите "Файл" &gt; "Новый проект".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Выберите модуль Maven NetBeans из категории Maven. Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>В поле "Имя проекта" введите <strong>MyEditor</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Подтвердите местоположение проекта - каталог  <code>MavenSelectionSuite</code> . Нажмите кнопку "Готово".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>В окне "Проекты" щелкните правой кнопкой мыши узел проекта "Библиотеки" и выберите команду "Добавить зависимость".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>На вкладке "Открыть проекты" выберите модуль на платформе NetBeans MyAPI. Нажмите кнопку "ОК".</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_добавление_действия">Добавление действия</h3>
<div class="paragraph">
<p>В этом упражнении будет создан класс, чтобы добавить в меню "Файл" пункт для открытия компонента с именем MyEditor. Этот компонент будет создан в следующем упражнении.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Для открытия диалогового окна "Новое действие" щелкните проект MyEditor правой кнопкой мыши и выберите в меню "Создать" команду "Действие".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Укажите параметр "Всегда включено". Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Оставьте значения по умолчанию на странице "Регистрация в интерфейсе". Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>В поле "Имя класса" введите <strong>OpenEditorAction</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>В поле "Отображаемое имя" введите <strong>Open Editor</strong>. Нажмите кнопку "Готово".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Среда IDE открывает в редакторе класс  <code>OpenEditorAction</code>  и добавляет в файл  <code>layer.xml</code>  следующие данные:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;filesystem&gt;
    &lt;folder name="Actions"&gt;
        &lt;folder name="Build"&gt;
            &lt;file name="com-mycompany-myeditor-OpenEditorAction.instance"&gt;
                &lt;attr name="delegate" newvalue="com.mycompany.myeditor.OpenEditorAction"/&gt;
                &lt;attr name="displayName" bundlevalue="com.mycompany.myeditor.Bundle#CTL_OpenEditorAction"/&gt;
                &lt;attr name="instanceCreate" methodvalue="org.openide.awt.Actions.alwaysEnabled"/&gt;
                &lt;attr name="noIconInMenu" boolvalue="false"/&gt;
            &lt;/file&gt;
        &lt;/folder&gt;
    &lt;/folder&gt;
    &lt;folder name="Menu"&gt;
        &lt;folder name="File"&gt;
            &lt;file name="com-mycompany-myeditor-OpenEditorAction.shadow"&gt;
                &lt;attr name="originalFile" stringvalue="Actions/Build/com-mycompany-myeditor-OpenEditorAction.instance"/&gt;
                &lt;attr name="position" intvalue="0"/&gt;
            &lt;/file&gt;
        &lt;/folder&gt;
    &lt;/folder&gt;
&lt;/filesystem&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Измените класс  <code>OpenEditorAction</code> , чтобы изменить метод  <code>actionPerformed</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void actionPerformed(ActionEvent e) {
    MyEditor editor = new MyEditor();
    editor.open();
    editor.requestActive();
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_добавление_компонента_редактора">Добавление компонента редактора</h3>
<div class="paragraph">
<p>В этом упражнении будет создан компонент MyEditor, открывающийся в области редактора после вызова классом  <code>OpenEditorAction</code> . Шаблон оконного компонента не будет использоваться, так как потребуется несколько экземпляров компонента и данный оконный компонент будет использоваться для создания единичных экземпляров. Вместо него будет использован шаблон формы JPanel. Затем для расширения компонента  <code>TopComponent</code>  указанный класс будет изменен.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Щелкните правой кнопкой мыши "Исходные файлы", выберите "Создать" &gt; "Прочее" и укажите в категории "Формы Swing GUI" форму JPanel. Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>В поле "Имя класса" введите <strong>MyEditor</strong> и укажите пакет  <code>com.mycompany.myeditor</code> . Нажмите кнопку "Готово".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Перетащите в компонент два текстовых поля.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Отмените для всех текстовых полей выбор свойства  <code>editable</code> , чтобы они были доступны только для чтения.
image::images/maven-suite_maven-suite-editableprop.png[title="Изменяемые свойства меток"]</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Перейдите на вкладку "Исходный код" и измените сигнатуру класса, чтобы расширить  <code>TopComponent</code>  вместо  <code>javax.swing.JPanel</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class MyEditor extends *TopComponent*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Установите курсор в режиме вставки в сигнатуру и нажмите клавиши ALT+ВВОД, чтобы исправить ошибку в коде путем поиска репозитория Maven и добавления зависимости от артефакта  <code>org.openide.windows</code> . Исправьте операторы импорта.
image::images/maven-suite_maven-suite-add-topcomponent.png[title="Изменяемые свойства меток"]</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Измените конструктор, чтобы каждый раз при выборе класса создавать новый экземпляр  <code>APIObject</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public MyEditor() {
    initComponents();
    *APIObject obj = new APIObject();
    associateLookup(Lookups.singleton(obj));
    jTextField1.setText("APIObject #" + obj.getIndex());
    jTextField2.setText("Created: " + obj.getDate());
    setDisplayName("MyEditor " + obj.getIndex());*

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Строка  <code>associateLookup(Lookups.singleton(obj));</code>  в конструкторе создаст Lookup, содержащий новый экземпляр объекта  <code>APIObject</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Исправьте операторы импорта и сохраните измененные данные.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>В текстовых полях в компоненте отображаются только индекс и дата объекта  <code>APIObject</code> . Это позволит определить, что каждый компонент MyEditor уникален, а MyViewer выводит подробные данные выбранного компонента MyEditor.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Ошибки в  <code>OpenEditorAction</code>  будут разрешены после сохранения изменений в  <code>MyEditor</code> .
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_сборка_и_запуск_набора_модулей">Сборка и запуск набора модулей</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Теперь можно запустить набор модулей, чтобы проверить корректность его сборки, установки и настройки.</p>
</div>
<div class="sect2">
<h3 id="_объявление_прямых_зависимостей">Объявление прямых зависимостей</h3>
<div class="paragraph">
<p>Перед построением и запуском набора модулей необходимо изменить одну из зависимостей проекта MyEditor. При попытке построения набора модулей прямо сейчас в окне "Вывод" появится сообщение о невозможности компиляции набора, так как модуль MyEditor требует доступности артефакта  <code>org.openide.util-lookup</code>  во время выполнения.</p>
</div>
<div class="paragraph">
<p>Щелкните узел проекта правой кнопкой мыши и выберите команду "Показать график зависимостей", чтобы просмотреть зависимости модуля.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_maven-suite-dependency-graph.png" alt="maven suite maven suite dependency graph">
</div>
<div class="title">Figure 3. График зависимостей артефакта</div>
</div>
<div class="paragraph">
<p>Обратите внимание, что у MyEditor нет прямой зависимости от  <code>org.openide.util-lookup</code> . Зависимость транзитивна, и артефакт доступен для проекта во время компиляции, однако зависимость должна быть прямой, если артефакт должен быть доступен во время выполнения. Необходимо изменить POM, чтобы объявить артефакт как прямую зависимость.</p>
</div>
<div class="paragraph">
<p>Объявить артефакт как прямую зависимость можно двумя способами: вручную изменив POM либо с помощью соответствующего пункта контекстного меню в окне "Проекты".</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Разверните узел "Библиотеки" модуля MyEditor.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Щелкните правой кнопкой мыши артефакт  <code>org.openide.util-lookup</code>  и выберите команду "Объявить как прямую зависимость".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При выборе команды "Объявить как прямую зависимость" среда IDE изменяет POM, чтобы добавить артефакт как зависимость.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Артефакт  <code>org.openide.util-lookup</code>  уже является прямой зависимостью модуля MyViewer.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_определение_местоположения_установки_netbeans">Определение местоположения установки NetBeans</h3>
<div class="paragraph">
<p>По умолчанию при использовании архетипа Maven для создания набора модулей на платформе NetBeans установка целевой платформы NetBeans не указывается. Чтобы установить и запустить набор модулей в среде IDE, необходимо указать путь к каталогу установки, изменив файл  <code>profiles.xml</code>  в проекте POM.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Разверните узел "Файлы проекта" в приложении MavenSelectionSuite и дважды щелкните файл  <code>profiles.xml</code> , чтобы открыть его в редакторе.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Измените элемент  <code>&lt;netbeans.installation&gt;</code> , чтобы указать путь к целевой платформе NetBeans и сохранить изменения.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;profile&gt;
   &lt;id&gt;netbeans-ide&lt;/id&gt;
   &lt;properties&gt;
       &lt;netbeans.installation&gt;/home/me/netbeans-6.9&lt;/netbeans.installation&gt;
   &lt;/properties&gt;
&lt;/profile&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Для этого пути необходимо указать каталог, содержащий каталог  <code>bin</code>  с выполняемым файлом.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Например, в OS X путь может выглядеть следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;netbeans.installation&gt;/Applications/NetBeans/NetBeans6.9.app/Contents/Resources/NetBeans&lt;/netbeans.installation&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_запуск_приложения">Запуск приложения</h3>
<div class="paragraph">
<p>После указания местоположения установки целевой среды IDE можно использовать команду "Выполнить" для проекта набора.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Щелкните MavenSelectionSuite правой кнопкой мыши и выберите команду "Выполнить".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При выборе команды "Выполнить" экземпляр среды IDE запускает установленный набор модулей.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_maven-suite-run1.png" alt="maven suite maven suite run1">
</div>
<div class="title">Figure 4.  Окна My Viewer и MyEditor</div>
</div>
<div class="paragraph">
<p>При запуске приложения откроется окно MyViewer, где отобразятся две текстовые метки. Теперь в меню "Файл" можно выбрать команду "Открыть редактор", чтобы открыть в области редактора компонент MyEditor. В окне MyViewer отобразятся подробные данные выбранного компонента MyEditor.</p>
</div>
<div class="paragraph">
<p>Действие "Выполнить" настроено для проекта набора модулей по умолчанию, чтобы использовать подключаемый модуль Reactor для рекурсивного построения модулей набора и добавления их в пакет. Можно открыть окно "Свойства" проекта, чтобы просмотреть задачи Maven, сопоставленные с действиями в среде IDE.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite_maven-suite-run-action.png" alt="maven suite maven suite run action">
</div>
<div class="title">Figure 5.  Окна My Viewer и MyEditor</div>
</div>
<div class="paragraph">
<p>В категории "Действия" в окне "Свойства" можно увидеть задачи, сопоставленные с действием "Выполнить".</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_динамическое_изменение_lookup">Динамическое изменение Lookup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Теперь каждый раз при открытии нового компонента MyEditor создается новый объект  <code>APIObject</code> . В этом разделе к компоненту MyEditor будет добавлена кнопка, с помощью которой текущий  <code>APIObject</code>  компонента будет заменяться на новый. Будет изменен код для  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-util-lookup/org/openide/util/lookup/InstanceContent.html">InstanceContent</a></code> , чтобы выполнять динамическую обработку изменений в содержимом Lookup.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Разверните проект MyEditor и откройте форму  <code>MyEditor</code>  в режиме проектирования в редакторе.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Перетащите кнопку в форму и измените текст кнопки на "Заменить".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Щелкните эту кнопку правой кнопкой мыши и выберите "События" &gt; "Действие" &gt; actionPerformed, чтобы создать метод обработчика события для кнопки и открыть форму в редакторе исходного кода.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Добавьте к классу следующее поле  <code>final</code> :</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class MyEditor extends TopComponent {
    *private final InstanceContent content = new InstanceContent();*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Чтобы воспользоваться  <code>InstanceContent</code> , в конструкторе необходимо использовать  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-util-lookup/org/openide/util/lookup/AbstractLookup.html#AbstractLookup%28org.openide.util.lookup.AbstractLookup.Content%29">AbstractLookup</a></code>  вместо  <code>Lookup</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Измените тело метода обработчика события  <code>jButton1ActionPerformed</code> , скопировав строки из конструктора класса и добавив вызов в  <code>content.set</code> . В результате метод должен выглядеть следующим образом:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    *APIObject obj = new APIObject();
    jTextField1.setText ("APIObject #" + obj.getIndex());
    jTextField2.setText ("Created: " + obj.getDate());
    setDisplayName ("MyEditor " + obj.getIndex());
    content.set(Collections.singleton (obj), null);*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Измените конструктор, чтобы удалить строки, скопированные в метод обработчика события, и измените  <code>associateLookup</code> , чтобы использовать  <code>AbstractLookup</code>  и добавить  <code>jButton1ActionPerformed(null);</code> . В результате конструктор должен выглядеть следующим образом:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java"> public MyEditor() {
    initComponents();
    *associateLookup(new AbstractLookup(content));
    jButton1ActionPerformed(null);*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>После добавления в конструктор  <code>jButton1ActionPerformed(null);</code>  можно убедиться, что компонент инициализируется при создании.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Исправьте операторы импорта и сохраните измененные данные.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При повторном запуске проекта набора модулей новая кнопка появится во всех компонентах MyEditor. При нажатии этой кнопки номер индекса в текстовых полях будет увеличиваться. Метка в окне MyViewer также будет обновляться в соответствии с новым значением.</p>
</div>
<div class="paragraph">
<p>В данном учебном курсе были рассмотрены принципы создания набора модулей на платформе NetBeans с помощью архетипа Maven, а также принципы его запуска. Были рассмотрены структура набора модулей и процесс настройки POM модулей для указания общедоступных пакетов. Также был рассмотрен процесс изменения вышестоящего проекта POM для указания местоположения установки целевой платформы NetBeans, чтобы команда "Выполнить" в среде IDE устанавливала набор и запускала новый экземпляр платформы. Дополнительные примеры построения приложений и модулей на платформе NetBeans приведены в учебных курсах  <a href="https://netbeans.apache.org/kb/docs/platform_ru.html">Учебной карты по платформе NetBeans</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_дополнительные_сведения">Дополнительные сведения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Дополнительные сведения о создании и разработке на платформе NetBeans приведены в следующих ресурсах:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://netbeans.apache.org/kb/docs/platform_ru.html">Учебная карта по платформе NetBeans</a></p>
</li>
<li>
<p><a href="https://netbeans.apache.org/wiki/">Часто задаваемые вопросы по разработке NetBeans </a></p>
</li>
<li>
<p><a href="http://bits.netbeans.org/dev/javadoc/">Документация Javadoc по интерфейсам API в среде NetBeans</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Если у вас возникли вопросы по платформе NetBeans, можно отправить их в список рассылки <a href="mailto:dev@platform.netbeans.org">dev@platform.netbeans.org</a> либо ознакомиться с  <a href="https://mail-archives.apache.org/mod_mbox/netbeans-dev/">Архивом списка рассылки по платформе NetBeans</a>.</p>
</div>
</div>
</div>
        
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/73/nbm-maven-modulesuite_ru.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
