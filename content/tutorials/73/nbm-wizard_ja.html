
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans ウィザードモジュールのチュートリアル</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans ウィザードモジュールのチュートリアル - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, NetBeans ウィザードモジュールのチュートリアル">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 12.1</h1>
            <p><a class="button success" href="/download/nb121/index.html">Find out more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">NetBeans ウィザードモジュールのチュートリアル</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/73/nbm-wizard_ja.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_モジュールプロジェクトの作成">モジュールプロジェクトの作成</a></li>
<li><a href="#_ウィザードインフラストラクチャーの作成">ウィザードインフラストラクチャーの作成</a></li>
<li><a href="#_ウィザードのアクションクラスの登録">ウィザードのアクションクラスの登録</a></li>
<li><a href="#_ウィザードの内容の設計">ウィザードの内容の設計</a></li>
<li><a href="#_ユーザーデータの処理">ユーザーデータの処理</a></li>
<li><a href="#_ユーザーデータの検査">ユーザーデータの検査</a></li>
<li><a href="#_再起動時のデータ持続">再起動時のデータ持続</a></li>
<li><a href="#_ウィザードのブランディング">ウィザードのブランディング</a></li>
<li><a href="#_参考情報">参考情報</a></li>
<li><a href="#_変更履歴">変更履歴</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>このチュートリアルでは、 <a href="http://bits.netbeans.org/dev/javadoc/org-openide-dialogs/org/openide/package-summary.html">NetBeans のダイアログ API</a> のウィザードクラスが提供する、主な機能の使用方法について学習します。</p>
</div>
<div class="paragraph">
<p>NetBeans プラットフォームアプリケーションでは、さまざまな種類のウィザードを作成できます。「新規プロジェクト」ダイアログに表示するウィザードを作成する場合は、「 <a href="https://netbeans.apache.org/tutorials/nbm-projectsamples.html">プロジェクトのサンプルモジュールのチュートリアル</a>」を参照してください。「新規ファイル」ダイアログに表示するウィザードを作成する場合は、「 <a href="https://netbeans.apache.org/tutorials/nbm-filetemplates.html">ファイルテンプレートモジュールのチュートリアル</a>」を参照してください。このチュートリアルでは、ツールバーでボタンをクリックしたときに表示される一般的なウィザードを作成します。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_モジュールプロジェクトの作成">モジュールプロジェクトの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>はじめに、「新規モジュールプロジェクト」ウィザードを実行します。最終的に、すべての NetBeans モジュールに必要な、いくつかのデフォルトファイルを持つ基本的なソース構造を作成します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「ファイル」&gt;「新規プロジェクト」(Ctrl-Shift-N) を選択します。「カテゴリ」で「NetBeans モジュール」を選択します。「プロジェクト」で「モジュール」を選択します。「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「名前と場所」パネルで、「プロジェクト名」フィールドに「 <code>DemoWizard</code> 」と入力します。「プロジェクトの場所」を使用コンピュータ上の任意のフォルダに変更します。「スタンドアロンモジュール」オプションはそのままにし、「主プロジェクトとして設定」チェックボックスを選択します。「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「基本モジュール構成」パネルで、コード名ベースに「 <code>org.demo.wizard</code> 」と入力します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「XML レイヤーを生成」を選択します。「ローカライズ版バンドル」と「XML レイヤー」のファイルの場所は両方ともそのままにしておきます。これらは、 <code>org/demo/wizard</code>  という名前のパッケージに格納されます。「完了」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>IDE によって  <code>DemoWizard</code>  プロジェクトが作成されます。このプロジェクトには、ソースや、プロジェクトの Ant 構築スクリプトなどのプロジェクトメタデータがすべて含まれます。IDE でプロジェクトが開きます。「プロジェクト」ウィンドウ (Ctrl-1) で、プロジェクトの論理構造を表示できます。また、「ファイル」ウィンドウ (Ctrl-2) で、プロジェクトのファイル構造を表示できます。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ウィザードインフラストラクチャーの作成">ウィザードインフラストラクチャーの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この節では、「ウィザード」ウィザードを使用して、モジュールにウィザードのスタブを追加します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「プロジェクト」ウィンドウで「DemoWizard」プロジェクトノードを右クリックし、「新規」&gt;「その他」を選択して、「モジュールの開発」&gt;「ウィザード」を選択します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard-wizard.png" alt="wizard wizard">
</div>
</div>
<div class="paragraph">
<p>「次へ」をクリックします。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「ウィザードの種類」パネルで、「ウィザードパネルの数」フィールドに「2」と入力し、その他の値はそのままにします。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard-wizard-3.png" alt="wizard wizard 3">
</div>
</div>
<div class="paragraph">
<p>前出のパネルのフィールドは次のようになります。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>登録の種類。</strong> ユーザーがウィザードにアクセスする場所を指定します。「カスタム」を選択した場合、「ウィザード」ウィザードは新しいアクションクラスを作成します。これは、ウィザードを開いたり、初期化したりするのに使用できます。「新規ファイル」を作成した場合、「ウィザード」ウィザードは、モジュールの  <code>layer.xml</code>  ファイルにウィザードを登録します。</p>
</li>
<li>
<p><strong>ウィザードステップのシーケンス。</strong> ウィザードをリニアにするか、またはウィザードでの選択によって、ウィザードのユーザーがウィザードの手順をスキップできるようにするかを指定します。リニアウィザードは「静的」で、これがデフォルトです。一方、手順をスキップできるウィザードにはカスタム反復子クラスが必要で、これは「動的」を選択した場合に作成されます。</p>
</li>
<li>
<p><strong>ウィザードパネルの数。</strong> 作成するウィザードパネルの数を指定します。ウィザードの各手順で、ビューとコントローラの 2 つの Java ファイルが作成されます。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>「次へ」をクリックします。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「名前と場所」パネルで、「クラス名の接頭辞」に「 <code>Demo</code> 」と入力し、「パッケージ」ドロップダウンリストから主パッケージを選択します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard-wizard-4.png" alt="wizard wizard 4">
</div>
</div>
<div class="paragraph">
<p>「完了」をクリックします。</p>
</div>
<div class="paragraph">
<p>「プロジェクト」ウィンドウは、次のようになっているはずです。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/projects-window.png" alt="projects window">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ウィザードのアクションクラスの登録">ウィザードのアクションクラスの登録</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この節では、アクションクラスを変更し、 <code>layer.xml</code>  ファイルに登録します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><code>DemoWizardAction.java</code>  ファイルを開き、すべてのコードを次のコードに置き換えます。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">package org.demo.wizard;

import java.awt.Component;
import java.awt.Dialog;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.text.MessageFormat;
import javax.swing.JComponent;
import org.openide.DialogDisplayer;
import org.openide.WizardDescriptor;

public final class DemoWizardAction implements ActionListener {

    private WizardDescriptor.Panel[] panels;

    public void actionPerformed(ActionEvent e) {
        WizardDescriptor wizardDescriptor = new WizardDescriptor(getPanels());
        // {0} は WizardDesriptor.Panel.getComponent().getName() によって置き換えられる
        wizardDescriptor.setTitleFormat(new MessageFormat("{0}"));
        wizardDescriptor.setTitle("Your wizard dialog title here");
        Dialog dialog = DialogDisplayer.getDefault().createDialog(wizardDescriptor);
        dialog.setVisible(true);
        dialog.toFront();
        boolean cancelled = wizardDescriptor.getValue() != WizardDescriptor.FINISH_OPTION;
        if (!cancelled) {
            // 何らかの処理
        }
    }

    /**
     * 個々のウィザードの手順を表すパネルを初期化し、
      * ウィザードの見た目に影響を与えるプロパティーを設定。
     */
    private WizardDescriptor.Panel[] getPanels() {
        if (panels == null) {
            panels = new WizardDescriptor.Panel[]{
                        new DemoWizardPanel1(),
                        new DemoWizardPanel2()
                    };
            String[] steps = new String[panels.length];
            for (int i = 0; i &lt; panels.length; i++) {
                Component c = panels[i].getComponent();
                // パネルのコンポーネント名に対するデフォルト手順名。
                // 主に、手順のリストに表示するターゲット選択用ダイアログの名前を取得するのに役立つ。
                steps[i] = c.getName();
                if (c instanceof JComponent) { // assume Swing components
                    JComponent jc = (JComponent) c;
                    // コンポーネントの手順の数を設定
                    // TODO org.openide.dialogs &gt;= 7.8 を使用する場合、WizardDescriptor.PROP_*: を使用できる
                    jc.putClientProperty("WizardPanel_contentSelectedIndex", new Integer(i));
                    // パネルの手順の名前を設定
                    jc.putClientProperty("WizardPanel_contentData", steps);
                    // 各手順のサブタイトルの作成をオン
                    jc.putClientProperty("WizardPanel_autoWizardStyle", Boolean.TRUE);
                    // 背景の画像とともに左側に手順を表示
                    jc.putClientProperty("WizardPanel_contentDisplayed", Boolean.TRUE);
                    // すべての手順の番号付けをオン
                    jc.putClientProperty("WizardPanel_contentNumbered", Boolean.TRUE);
                }
            }
        }
        return panels;
    }

    public String getName() {
        return "Start Sample Wizard";
    }

}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>``CallableSystemAction``  の代わりに  ``ActionListener``  を実装している以外は、生成されたのと同じコードを使用します。 ``ActionListener``  は標準の JDK クラスですが、 ``CallableSystemAction``  はそうではないため、このようにしています。NetBeans プラットフォーム 6.5 以降では、より便利でコードが少なくて済む、標準の JDK クラスを代わりに使用できます。</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>次のように、アクションクラスを  <code>layer.xml</code>  ファイルに登録します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;filesystem&gt;
    &lt;folder name="Actions"&gt;
        &lt;folder name="File"&gt;
            &lt;file name="org-demo-wizard-DemoWizardAction.instance"&gt;
                &lt;attr name="delegate" newvalue="org.demo.wizard.DemoWizardAction"/&gt;
                &lt;attr name="iconBase" stringvalue="org/demo/wizard/icon.png"/&gt;
                &lt;attr name="instanceCreate" methodvalue="org.openide.awt.Actions.alwaysEnabled"/&gt;
                &lt;attr name="noIconInMenu" stringvalue="false"/&gt;
            &lt;/file&gt;
        &lt;/folder&gt;
    &lt;/folder&gt;
    &lt;folder name="Toolbars"&gt;
        &lt;folder name="File"&gt;
            &lt;file name="org-demo-wizard-DemoWizardAction.shadow"&gt;
                &lt;attr name="originalFile" stringvalue="Actions/File/org-demo-wizard-DemoWizardAction.instance"/&gt;
                &lt;attr name="position" intvalue="0"/&gt;
            &lt;/file&gt;
        &lt;/folder&gt;
    &lt;/folder&gt;
&lt;/filesystem&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>「iconBase」要素は、主パッケージの「icon.png」という画像を指しています。その名前を付けた独自の画像を使用する場合、サイズが 16x16 ピクセルであることを確認してください。または、次の画像を使用してください。
image::images/icon.png[]</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>モジュールを実行します。アプリケーションが起動し、 <code>layer.xml</code>  ファイルで指定した場所に、ツールバーのボタンが表示されるはずです。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/result-1.png" alt="result 1">
</div>
</div>
<div class="paragraph">
<p>ボタンをクリックするとウィザードが表示されます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/result-2.png" alt="result 2">
</div>
</div>
<div class="paragraph">
<p>「次へ」をクリックすると、最後のパネルで「完了」ボタンが有効になっています。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/result-3.png" alt="result 3">
</div>
</div>
<div class="paragraph">
<p>これで、ウィザードのインフラストラクチャーが機能するようになりました。次に、内容をいくつか追加してみましょう。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ウィザードの内容の設計">ウィザードの内容の設計</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この節では、ウィザードに内容を追加し、基本的な機能をカスタマイズします。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><code>DemoWizardAction.java</code>  ファイルを開き、さまざまなカスタマイズプロパティーをウィザードに設定できることを確認してください。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard-tweaking.png" alt="wizard tweaking">
</div>
</div>
<div class="paragraph">
<p>これらのプロパティーについては、 <a href="http://ui.netbeans.org/docs/ui_apis/wide/index.html">ここ</a>を参照してください。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><code>DemoWizardAction.java</code>  で、 <code>wizardDescriptor.setTitle</code>  を次のように変更します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">wizardDescriptor.setTitle("Music Selection");</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p><code>DemoVisualPanel1.java</code>  ファイルと  <code>DemoVisualPanel2.java</code>  ファイルを開き、「Matisse」GUI ビルダーを使用して、次のような Swing コンポーネントをいくつか追加します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/panel-1-design.png" alt="panel 1 design">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/panel-2-design.png" alt="panel 2 design">
</div>
</div>
<div class="paragraph">
<p>ここでは、いくつかの Swing コンポーネントを持つ、 <code>DemoVisualPanel1.java</code>  ファイルと  <code>DemoVisualPanel2.java</code>  ファイルを確認できます。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「ソース」ビューで 2 つのパネルを開き、 <code>getName()</code>  メソッドをそれぞれ「Name and Address」および「Musician Details」に変更します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
モジュールを再実行します。ウィザードを開くと、追加した Swing コンポーネントと、行なったカスタマイズに応じて、次のようなものが表示されるはずです。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/result-4.png" alt="result 4">
</div>
</div>
<div class="paragraph">
<p>前出のウィザードにある左サイドバーの画像は、 <code>DemoWizardAction.java</code>  ファイルで次のように設定されています。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">wizardDescriptor.putProperty("WizardPanel_image", ImageUtilities.loadImage("org/demo/wizard/banner.png", true));</code></pre>
</div>
</div>
<div class="paragraph">
<p>これで、ウィザードの内容が設計されました。次に、ユーザーが入力するデータを処理するコードをいくつか追加してみましょう。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ユーザーデータの処理">ユーザーデータの処理</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この節では、ユーザーのデータをパネル間で受け渡す方法と、「完了」をクリックしたときに結果を表示する方法について学習します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><code>WizardPanel</code>  クラスで、 <code>storeSettings</code>  メソッドを使用して、ビジュアルパネルに設定されたデータを取得します。たとえば、 <code>DemoVisualPanel1.java</code>  ファイルに取得メソッドを作成し、 <code>DemoWizardPanel1.java</code>  ファイルから次のようにアクセスします。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public void storeSettings(Object settings) {
    ((WizardDescriptor) settings).putProperty("name", ((DemoVisualPanel1)getComponent()).getNameField());
    ((WizardDescriptor) settings).putProperty("address", ((DemoVisualPanel1)getComponent()).getAddressField());
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>次に、 <code>DemoWizardAction.java</code>  ファイルを使用して、設定したプロパティーを取得し、何か操作を行います。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public void actionPerformed(ActionEvent e) {
    WizardDescriptor wizardDescriptor = new WizardDescriptor(getPanels());
    // は次で置き換えられます: WizardDesriptor.Panel.getComponent().getName()
    wizardDescriptor.setTitleFormat(new MessageFormat("{0}"));
    wizardDescriptor.setTitle("Music Selection");
    Dialog dialog = DialogDisplayer.getDefault().createDialog(wizardDescriptor);
    dialog.setVisible(true);
    dialog.toFront();
    boolean cancelled = wizardDescriptor.getValue() != WizardDescriptor.FINISH_OPTION;
    if (!cancelled) {
        *String name = (String) wizardDescriptor.getProperty("name");
        String address = (String) wizardDescriptor.getProperty("address");
        DialogDisplayer.getDefault().notify(new NotifyDescriptor.Message(name + " " + address));*
    }
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>``NotifyDescriptor``  は、コード補完ボックスに示すように、ほかの方法にも使用できます。</pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/notifydescriptor.png" alt="notifydescriptor">
</div>
</div>
<div class="paragraph">
<p>これで、ユーザーが入力したデータを処理する方法を学習しました。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ユーザーデータの検査">ユーザーデータの検査</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この節では、ウィザードの「次へ」がクリックされたときに、ユーザーの入力を検査する方法を学習します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><code>DemoWizardPanel1</code>  で、 <code>WizardDescriptor.Panel</code>  の代わりに  <code>WizardDescriptor.ValidatingPanel</code>  を実装して、クラスの署名を変更します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class DemoWizardPanel1 implements WizardDescriptor.ValidatingPanel</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>クラスの最上位で、 <code>JComponent</code>  宣言を型指定宣言に変更します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private DemoVisualPanel1 component;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>次のように、必要な抽象メソッドを実装します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@Override
public void validate() throws WizardValidationException {

    String name = component.getNameTextField().getText();
    if (name.equals("")){
        throw new WizardValidationException(null, "Invalid Name", null);
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>モジュールを実行します。「Name」フィールドに何も入力せずに「次へ」をクリックすると、次のような結果が表示されるはずです。検査の結果がエラーであったため、次のパネルに移動することもできません。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/validation1.png" alt="validation1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>必要に応じて、名前フィールドが空の場合に「次へ」ボタンを無効にすることができます。クラスの最上位で、boolean の宣言から始めます。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private boolean isValid = true;</code></pre>
</div>
</div>
<div class="paragraph">
<p>次のように、 <code>isValid()</code>  をオーバーライドします。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@Override
public boolean isValid() {
    return isValid;
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>``validate()``  が呼び出されたとき、つまり「次へ」ボタンがクリックされたときに、false を返します。</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">@Override
public void validate() throws WizardValidationException {

    String name = component.getNameTextField().getText();
    if (name.equals("")) {
        *isValid = false;*
        throw new WizardValidationException(null, "Invalid Name", null);
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>または、boolean の初期状態を false に設定します。次に  <code>DocumentListener</code>  を実装してフィールドにリスナーを追加し、ユーザーがフィールドに何かを入力したときに boolean を true に設定して  <code>isValid()</code>  を呼び出します。</p>
</div>
<div class="paragraph">
<p>これで、ユーザーが入力したデータを検査する方法を学習しました。</p>
</div>
<div class="paragraph">
<p>ユーザー入力の検査の詳細については、このチュートリアルの最後にある Tom Wheeler のサンプルを参照してください。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_再起動時のデータ持続">再起動時のデータ持続</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この節では、アプリケーションが閉じるときにデータを格納する方法、および新しく開始したあとでウィザードが開くときにデータを取得する方法を学習します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><code>DemoWizardPanel1.java</code>  で、 <code>readSettings</code>  メソッドと  <code>storeSettings</code>  メソッドを次のようにオーバーライドします。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">*JTextField nameField = ((DemoVisualPanel1) getComponent()).getNameTextField();
JTextField addressField = ((DemoVisualPanel1) getComponent()).getAddressTextField();*

@Override
public void readSettings(Object settings) {
    *nameField.setText(NbPreferences.forModule(DemoWizardPanel1.class).get("namePreference", ""));
    addressField.setText(NbPreferences.forModule(DemoWizardPanel1.class).get("addressPreference", ""));*
}

@Override
public void storeSettings(Object settings) {
    ((WizardDescriptor) settings).putProperty("name", nameField.getText());
    ((WizardDescriptor) settings).putProperty("address", addressField.getText());
    *NbPreferences.forModule(DemoWizardPanel1.class).put("namePreference", nameField.getText());
    NbPreferences.forModule(DemoWizardPanel1.class).put("addressPreference", addressField.getText());*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>モジュールを再実行し、ウィザードの最初のパネルで名前とアドレスを入力します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/nbpref1.png" alt="nbpref1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>アプリケーションを閉じ、「ファイル」ウィンドウを開いて、アプリケーションの  <code>build</code>  フォルダ内のプロパティーファイルを確認します。設定が次のようになっているはずです。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/nbpref2.png" alt="nbpref2">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>アプリケーションを再実行し、次にウィザードを開いたとき、前に指定した設定が、ウィザード内のフィールドの値を定義するために自動的に使用されます。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>これで、再起動時にウィザードのデータを持続する方法を学習しました。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ウィザードのブランディング">ウィザードのブランディング</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この節では、ウィザードのインフラストラクチャーによって提供される「次へ」ボタンの文字列を、「詳細」にブランディングします。</p>
</div>
<div class="paragraph">
<p>「ブランディング」という用語は、カスタマイズの意味で使われます。「国際化」や「ローカリゼーション」が別の言語に翻訳することを指すのに対し、通常同じ言語間の小さな変更のことを意味します。NetBeans モジュールのローカリゼーションについては、 <a href="http://translatedfiles.netbeans.org/index-l10n.html">ここを参照</a>してください。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「ファイル」ウィンドウで、アプリケーションの  <code>branding</code>  フォルダを展開し、強調表示されているフォルダとファイルを作成します。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/branding-1.png" alt="branding 1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>ファイルの内容を次のように定義します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">CTL_NEXT=&amp;amp;Advance &gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>そのほかの文字列は次のようにブランディングしてもかまいません。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">CTL_CANCEL
CTL_PREVIOUS
CTL_FINISH
CTL_ContentName</code></pre>
</div>
</div>
<div class="paragraph">
<p>「CTL_ContentName」キーはデフォルトで「Steps」に設定されています。これは、「WizardPanel_autoWizardStyle」プロパティーが「FALSE」に設定されていない場合、ウィザードの左側のパネルで使用されます。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>アプリケーションを実行すると、「次へ」ボタンが「詳細」にブランディングされます。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/branding-2.png" alt="branding 2">
</div>
</div>
<div class="paragraph">
<p>必要に応じて、前に説明したように「 <code>DemoWizardAction.java</code> 」ファイルを使用して、次のようにウィザードの左側をすべて削除します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java"> wizardDescriptor.putProperty("WizardPanel_autoWizardStyle", Boolean.FALSE);</code></pre>
</div>
</div>
<div class="paragraph">
<p>この設定を行うと、ウィザードは次のように表示されます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/branding-3.png" alt="branding 3">
</div>
</div>
<div class="paragraph">
<p>これで、ウィザードのインフラストラクチャーで定義された文字列を、独自のバージョンにブランディングする方法を学習しました。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_参考情報">参考情報</h2>
<div class="sectionbody">
<div class="paragraph">
<p>関連情報のいくつかは、オンラインで入手できます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tom Wheeler の NetBeans のサイト (次の画像をクリック):</p>
</li>
</ul>
</div>
<div class="openblock feature">
<div class="content">
<div class="imageblock left">
<div class="content">
<a class="image" href="http://www.tomwheeler.com/netbeans/"><img src="images/tom.png" alt="tom"></a>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>これは NetBeans 5.5 向けに書かれたものですが、前出のサンプルは、JDK 1.6 を使用する Ubuntu Linux 上の NetBeans IDE 6.5.1 でも正しく使用できます。</p>
</div>
<div class="paragraph">
<p>このサンプルは、特にユーザーデータの検査方法を示す場合に役立ちます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Geertjan のブログ:</p>
</li>
<li>
<p><a href="http://blogs.oracle.com/geertjan/entry/how_wizards_work">ウィザードの仕組み: パート 1 — はじめに</a></p>
</li>
<li>
<p><a href="http://blogs.oracle.com/geertjan/entry/how_wizards_work_part_2">ウィザードの仕組み: パート 2 — さまざまなタイプ</a></p>
</li>
<li>
<p><a href="http://blogs.oracle.com/geertjan/entry/how_wizards_work_part_3">ウィザードの仕組み: パート 3 — 最初のウィザード</a></p>
</li>
<li>
<p><a href="http://blogs.oracle.com/geertjan/entry/how_wizards_work_part_4">ウィザードの仕組み: パート 4 — 独自の反復子</a></p>
</li>
<li>
<p><a href="http://blogs.oracle.com/geertjan/entry/how_wizards_work_part_5">ウィザードの仕組み: パート 5 — 既存のパネルの再使用と埋め込み</a></p>
</li>
<li>
<p><a href="http://blogs.oracle.com/geertjan/entry/creating_a_better_java_class">優れた Java クラスウィザードの作成</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_変更履歴">変更履歴</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>バージョン</strong></th>
<th class="tableblock halign-left valign-top"><strong>日付</strong></th>
<th class="tableblock halign-left valign-top"><strong>変更内容</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2009 年 3 月 31 日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">初期バージョン。内容</p>
<p class="tableblock">* <span class="line-through">ユーザー入力の検査に関する節を追加。</span>
* <span class="line-through">ウィザードからまたはウィザードへのデータの格納および取得に関する節を追加。</span>
* WizardDescriptor プロパティーをすべてリストした表を追加。
* ウィザードの API クラスをすべてリストおよび説明した表を追加。
* Javadoc へのリンクを追加。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2009 年 4 月 1 日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">検査に関する節を追加。「次へ」ボタンを無効にするコードを追加。持続に関する節も追加。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2009 年 4 月 10 日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tom Wheeler のコメントを統合し、ローカリゼーションの情報がある場所への参照を追加して、ブランディングの節を実際のブランディングの内容になるよう書き換え。</p></td>
</tr>
</tbody>
</table>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/73/nbm-wizard_ja.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1><a href="/about/index.html">About</a></h1>
                <ul>
                    <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb110/nb110.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="/plugins/index.html">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2019 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
