
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans Platform Schliemann Tutorial</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans Platform Schliemann Tutorial - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, NetBeans Platform Schliemann Tutorial">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>

  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">NetBeans Platform Schliemann Tutorial</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/60/nbm-prolog.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_contents">Contents</a></li>
<li><a href="#_prerequisite_knowledge">Prerequisite Knowledge</a></li>
<li><a href="#_required_software">Required Software</a></li>
<li><a href="#_setting_up_the_environment">Setting up the environment</a></li>
<li><a href="#_adding_prolog_support_to_netbeans_editor">Adding Prolog support to NetBeans Editor</a>
<ul class="sectlevel2">
<li><a href="#_tokens_definition">Tokens definition</a></li>
<li><a href="#_grammar_definition">Grammar definition</a></li>
<li><a href="#_folding_navigation_and_other_features">Folding, navigation and other features</a></li>
</ul>
</li>
<li><a href="#"></a></li>
<li><a href="#_further_reading">[[Further reading]]</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Welcome to the NetBeans Platform Schliemann tutorial. Schliemann is a project that allows you to define a programming language and integrate it to NetBeans IDE.</p>
</div>
<div class="paragraph">
<p>This tutorial shows how to add Prolog support to the NetBeans Editor. At the end of it, your prolog files in NetBeans IDE will look like that:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/prolog_60-finish.png" alt="prolog 60 finish">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contents">Contents</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">* <a href="#knowledge">Prerequisite Knowledge</a>
* <a href="#software">Required Software</a>
* <a href="#setting">Setting Up the Environment</a>
* <a href="#adding">Adding Prolog support</a></p>
<p class="tableblock">* <a href="#tokens">Tokens definition</a>
* <a href="#grammar">Grammar definition</a>
* <a href="#support">Folding, navigation and other features</a>
* <a href="#resources">Further reading</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisite_knowledge">Prerequisite Knowledge</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You are neither required to know anything about NetBeans Platform develop ment nor Prolog to work on this tutorial. We have choose Prolog as example for Schliemann because of the relative simplicity of its syntax.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_required_software">Required Software</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Since the version 6.0, the Generic Language Framework Studio is part of the distribution of NetBeans IDE. Therefore, the only software needed to go through this tutorial is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The J2SE&#8482; Development Kit (JDK), version 5.0 or compatible ( <a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html">download the most recent JDK</a>).</p>
</li>
<li>
<p>NetBeans IDE 6.0 ( <a href="https://netbeans.apache.org/download/index.html">download</a>).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_up_the_environment">Setting up the environment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Take the following steps to set up the environment, before to begin to add Prolog support:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the IDE, create a New Project and choose the type Module, in the category NetBeans Modules.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Name the project whatever you like (we use the name Prolog, in this tutorial) and finish.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Add a new file to your project of type Language Support. You can find this type in the category Module Development. We name this file "prolog", and the extesion is "nbs" (NetBeans Scripting). You will be also asked to provide a Mime Type and a list of extensions. In this tutorial we use  <code>text/x-prolog</code>  as Mime Type and  <code>pro</code>  as extension.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After those steps you should see the following files and NBS Template in your NetBeans IDE</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/prolog_60-setting.png" alt="prolog 60 setting">
</div>
</div>
<div class="paragraph">
<p>The file  <code>MIMEResolver.xml</code>  maps the "pro" file extension to the MIME type  <code>text/x-prolog</code> .</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_prolog_support_to_netbeans_editor">Adding Prolog support to NetBeans Editor</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The NBS default template contains code for an example language definition. If you compile and install the module now (right click on the project and select "Install/Reload in Development IDE"), after restarting the IDE you can try to create a new file with "pro" extension and paste the following code in it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">while (one) {
   two
   if (three) {
      four
   }
}
while (five) {
   six
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will notice syntax coloring, navigator window support, code folding and indentation. Now we begin to add Prolog support, so, the first step is deleting all the content of the file  <code>prolog.nbs</code> .</p>
</div>
<div class="sect2">
<h3 id="_tokens_definition">Tokens definition</h3>
<div class="paragraph">
<p>The lexical analyser is the first part of any language definition. In Schliemann tokens are defined by regular expressions and the keyword  <code>TOKEN</code>  is used. In the case of Prolog, the tokens that we define are the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">########################
# Definition of tokens #
########################

# Keywords
TOKEN:keyword:(
    "true" | "fail" | "!" | "at_end_of_stream" |
    "nl" | "repeat" | "halt" | "is" | "mod" | "rem"
)

TOKEN:special:( "." | ":-" | ",")


# Predefined predicates
TOKEN:function:(
    "abolish" | "abort" | "absolute_file_name" | "absolute_file_name" | "access_file" |
    "append" | "append" | "apply" | "apropos" | "arg" | "arithmetic_function" | "assert" |
    "assert" | "asserta" | "asserta" | "assertz" | "assertz" | "at_halt" | "at_initialization" |
    "atom" | "atom_char" | "atom_chars" | "atom_length" | "atom_to_term" | "atomic" |
    "autoload" | "bagof" | "between" | "block" | "break" | "call" | "call" | "call_dll_function" |
    "call_shared_object_function" | "character_count" | "chdir" | "checklist" | "clause" | "clause" |
    "clause_property" | "close" | "close_dde_conversation" | "close_dll" | "close_shared_object" |
    "compare" | "compiling" | "compound" | "concat" | "concat_atom" | "consult" | "context_module" |
    "convert_time" | "copy_term" | "current_arithmetic_function" | "current_atom" | "current_flag" |
    "current_foreign_library" | "current_functor" | "current_input" | "current_key" | "current_module" |
    "current_module" | "current_op" | "current_output" | "current_predicate" | "current_stream" |
    "dde_current_connection" | "dde_current_service" | "dde_execute" | "dde_register_service" |
    "dde_request" | "dde_unregister_service" | "debug" | "debugging" | "default_module" | "delete" |
    "delete_file" | "discontiguous" | "display" | "displayq" | "dwim_match" |
    "dwim_predicate" | "dynamic" | "ed" | "ed" | "edit" | "edit" | "edit_source" | "ensure_loaded" | "erase" |
    "exception" | "exists_directory" | "exists_file" | "exit" | "expand_file_name" |
    "expand_file_search_path" | "expand_term" | "explain" | "explain" | "export" | "export_list" |
    "feature" | "file_base_name" | "file_directory_name" | "file_search_path" | "fileerrors" |
    "findall" | "flag" | "flatten" | "float" | "flush" | "flush_output" | "forall" | "foreign_file" | "format" |
    "free_variables" | "functor" | "garbage_collect" | "gensym" | "get" | "get" | "get0" | "get_single_char" |
    "get_time" | "getenv" | "ground" | "hash_term" | "help" | "history_depth" | "ignore" | "import" |
    "index" | "initialization" | "int_to_atom" | "integer" | "intersection" | "is_absolute_file_name" |
    "is_list" | "is_set" | "keysort" | "last" | "leash" | "length" | "library_directory" | "limit_stack" |
    "line_count" | "line_position" | "list_to_set" | "listing" | "load_foreign" | "load_foreign_library" |
    "make" | "make_fat_filemap" | "make_library_index" | "maplist" | "member" | "merge" | "merge_set" |
    "module" | "module_transparent" | "msort" | "multifile" | "name" | "nodebug" | "nonvar" | "noprotocol" |
    "nospy" | "nospyall" | "not" | "notrace" | "nth0" | "nth1" | "nth_clause" | "number" | "number_chars" |
    "numbervars" | "once" | "op" | "open" | "open_dde_conversation" | "open_null_stream" |
    "open_shared_object" | "phrase" | "please" | "plus" | "portray" | "portray_clause" | "predicate_property" |
    "predsort" | "preprocessor" | "print" | "profile" | "profile_count" | "profiler" | "prolog" |
    "prolog_current_frame" | "prolog_frame_attribute" | "prolog_load_context" | "prolog_skip_level" |
    "prolog_to_os_filename" | "prolog_trace_interception" | "prompt1" | "prompt" | "proper_list" | "protocol" |
    "protocola" | "protocolling" | "put" | "qcompile" | "qload" | "qsave_program" | "qsave_program" |
    "read" | "read_clause" | "read_history" | "read_link" | "read_variables" | "recorda" | "recorded" | "recordz" |
    "redefine_system_predicate" | "rename_file" | "require" | "reset_profiler" | "restore" | "retract" |
    "retractall" | "reverse" | "same_file" | "save" | "save_program" | "save_program" | "see" | "seeing" | "seen" |
    "select" | "set_feature" | "set_input" | "set_output" | "set_tty" | "setarg" | "setenv" | "setof" | "sformat" |
    "shell" | "show_profile" | "sleep" | "sort" | "source_file" | "source_location" |"spy" | "stack_parameter" |
    "statistics" | "stream_position" | "string" | "string_length" | "string_to_atom" | "string_to_list" |
    "style_check" | "sublist" | "subset" | "substring" | "subtract" | "succ" | "swritef" | "tab" | "tell" | "telling" |
    "term_expansion" | "term_to_atom" | "time" | "time_file" | "tmp_file" | "told" | "trace" | "tracing" |
    "trim_stacks" | "tty_get_capability" | "tty_goto" | "tty_put" | "ttyflush" | "union" | "unknown" |
    "unload_foreign_library" | "unsetenv" | "use_module" | "use_module" | "var" | "visible" | "volatile"
    "wait_for_input" | "wildcard_match" | "write" | "write_ln" | "writef" | "writeq" |
    "abs" | "acos" | "asin" | "atan" | "atan" | "ceil" | "ceiling" | "cos" |
    "cputime" | "e" | "exp" | "float" | "float_fractional_part" | "float_integer_part" |
    "floor" | "integer" | "log" | "log10" | "max" | "min" | "random" |
    "round" | "truncate" | "pi" | "sign" | "sin" | "sqrt" | "tan" | "xor"
)

TOKEN:string:( "\"" [^ "\""]* "\"" )
TOKEN:string:( "\'" [^ "\'"]* "\'" )
TOKEN:list:( "[" - "]" )
TOKEN:operator: (
    [ "?"  "/" "*"  "-" "+"  "@" "#" "$" "%" "^" "\\"
    ]
)
TOKEN:boolean: (
    [ "&lt;" "&gt;" "=" ","  ";"  "&amp;amp;" "~" "|"
    ]
)

TOKEN:separator: ( ["(" ")" "[" "]" "{" "}"] )

TOKEN:variable:( ["A"-"Z" "_"] ["a"-"z" "A"-"Z" "0"-"9" "_"]* )
TOKEN:identifier:( ["a"-"z"] ["a"-"z" "A"-"Z" "0"-"9" "_"]* )
TOKEN:number:(  ["0"-"9"]+   ("." ["0"-"9"]+)? ("E" ("+" | "-" )? ["0"-"9"]+)? )
TOKEN:whitespace: ( [" " "\t" "\n" "\r"]* )
TOKEN:comment:( "/*" - "*/" )
TOKEN:line_comment:( "%" [^ "\n" "\r"]* ["\n" "\r"]+ )</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that it is possible to define different tokens with the same name, like  <code>string</code> . In this way we can apply the same processing to two different kinds of string but that semantically are identical.</p>
</div>
<div class="paragraph">
<p>For more detailed info on the syntax of tokens definition, take a look on the official Schliemann Language Definition,  <a href="http://wiki.netbeans.org/wiki/view/SchliemannNBSLanguageDescription#section-SchliemannNBSLanguageDescription-TokensDefinition.">here</a>.</p>
</div>
<div class="paragraph">
<p>For Prolog we have defined one token  <code>keyword</code> , that obviously represents the keywords of the language, one token  <code>function</code> , representing the predefined functions that exist in Prolog and the usual tokens  <code>string</code> ,  <code>operator</code> ,  <code>number</code> ,  <code>identifier</code>  or  <code>variable</code>  (all the variables in Prolog must begin with capital letter or _). Also you can find tokens describing comments (line and block) and whitespaces. This kind of tokens should receive a special treatment.</p>
</div>
<div class="paragraph">
<p>With the definition of tokens it is possible now to add syntax coloring. We can do that with this small piece of code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java"># Syntax Coloring
COLOR:function: {
    default_coloring:"default";
    font_type:"bold";
}

COLOR:line_comment: {
    default_coloring:"comment";
}

COLOR:list: {
    default_coloring:"string";
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is not necessary to specify a color for  <code>keyword</code> ,  <code>function</code> , etc, because there exists a default color for the tokens defined as keywords, or comments, or operator. Of course, it is possible to override the default syntax coloring. It is also possible to change other properties, like the font or the background color. For more info, take a look  <a href="http://wiki.netbeans.org/wiki/view/SchliemannNBSLanguageDescription#section-SchliemannNBSLanguageDescription-SyntaxColoringDefinition.">here</a>.</p>
</div>
<div class="paragraph">
<p>Copy and paste all the code above in your NBS file. If you install now the module in you Development IDE and restart NetBeans, you can see syntax coloring in a Prolog example file.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/prolog_60-tokens.png" alt="prolog 60 tokens">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_grammar_definition">Grammar definition</h3>
<div class="paragraph">
<p>First, comments and whitespaces should be ignored by the syntax analyser. This is achieved by using the keyword  <code>skip</code> .</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">SKIP:comment
SKIP:line_comment
SKIP:whitespace</code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point, it is important to speak about the AST View and the Tokens View. These two views provided by the IDE are really useful when you are using Schliemann, actually, they are essential if you want to debug your grammar or your tokens definition.</p>
</div>
<div class="paragraph">
<p>To activate them, right-click the file  <code>prolog.nbs</code>  in the Project window and select "AST View" and "Tokens View". Now, you should see the AST and the Tokens browser window. If you select now your prolog example file, while leaving the Tokens view open, you should see the tokens of this file. These two views always show the AST and tokens of the currently selected file.</p>
</div>
<div class="paragraph">
<p>An example of the Tokens View and AST View in action:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/prolog_60-tokensview.png" alt="prolog 60 tokensview">
</div>
</div>
<div class="paragraph">
<p>In Schliemann, grammar is described in form similar to JavaCC (extended  <a href="http://en.wikipedia.org/wiki/Backus�Naur_form">BNF</a>). The grammar must be  <a href="http://en.wikipedia.org/wiki/LL_parser">LL</a>, since  <a href="http://en.wikipedia.org/wiki/LR_parser">LR</a> and  <a href="http://en.wikipedia.org/wiki/LALR">LALR</a> grammar are not accepted.</p>
</div>
<div class="paragraph">
<p>There are some things that you should have into account when you are writing a grammar for Schliemann. First of all, the grammar should be LL(1) (that means that the parser can only look ahead one symbol when analyzing text). So if you have rules whose right hand sides start with the same element, you should transform these rules. For example, instead of writing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Statement = Fact | Clause;
Fact = Structure ".";
Clause = Structure ":-" ListOfStructures ".";</code></pre>
</div>
</div>
<div class="paragraph">
<p>which will not work properly, you should write something like that:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Statement = Structure ("." | ":-" ListOfStructures ".");</code></pre>
</div>
</div>
<div class="paragraph">
<p>Also, you must remove left recursion in your grammar, which implies that you cannot have rules like that:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">ListOfStructures = ListOfStructures BooleanOperation Structure;
ListOfStructures = Structure;</code></pre>
</div>
</div>
<div class="paragraph">
<p>but you should re-write the above as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">ListOfStructures = Structure (BooleanOperation Structure)* ;</code></pre>
</div>
</div>
<div class="paragraph">
<p>As a result of those transformations, the grammar you write is less strict than the original syntax definition of the language, don&#8217;t worry. You are not writing a compiler, so, if your grammar is not powerful enough to detect all the possible syntax errors, it is also OK.</p>
</div>
<div class="paragraph">
<p>Last, but not least, be patient. Schliemann is not a tool to write compilers, like ANTLR or yacc. It has some limitations and sometimes, if you have some errors in your tokens definition or in your grammar, you will not get any information about it. The error messages provide not really useful information and you should work out by inspection of your .nbs file or by trial and error.</p>
</div>
<div class="paragraph">
<p>After these remarks, we can go on to the grammar for Prolog. The syntax of prolog is deceptively simple. A logic program is made up of clauses and facts. A simplified definition of the grammar:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">clause := predicate ":-" (predicate)+ "."
fact := predicate "."</code></pre>
</div>
</div>
<div class="paragraph">
<p>Predicates can be function symbols with or without arguments or infix binary operators like "=". Aritmetic expressions can also appear. For more detail on Prolog there are several resources like  <a href="http://www.csupomona.edu/~jrfisher/www/prolog_tutorial/contents.html">this</a> or  <a href="http://kti.mff.cuni.cz/~bartak/prolog.old/index.html">this</a>, but for the purpose of this tutorial it is not important to understand deeply the Prolog syntax.</p>
</div>
<div class="paragraph">
<p>The complete Schliemann code that defines the prolog syntax is the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java"># Grammar definition

S = (Statement)*;

Statement = Structure ("." | ":-" ListOfStructures ".");


ListOfStructures = Structure (BooleanOperation Structure)* ;

Structure = Expression |
            ;

Functor =  | ;

Expression = BaseExpression ((Operation|"is"|"mod"|"rem") Expression)* |
            "(" BaseExpression ((Operation|"is"|"mod"|"rem") Expression)* ")" ;

Operation = ()+;
BooleanOperation = ()+ | "=.." | ",";

BaseExpression =  |
                 |
                 |
                Function |
                 ;

Function = Functor ["(" ListOfStructures ")"];</code></pre>
</div>
</div>
<div class="paragraph">
<p>Copy and paste the code above.</p>
</div>
</div>
<div class="sect2">
<h3 id="_folding_navigation_and_other_features">Folding, navigation and other features</h3>
<div class="paragraph">
<p>The tokens and grammar definition is the core of our Prolog support. Now, we can go on to more interesting and easy stuff. Copy and paste all the code below in your NBS file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java"># error highlighting
MARK:ERROR: {
    type:"Error";
    message:"Syntax error.";
}

MARK:error: {
    type:"Error";
    message:"Unexpected character.";
}

# brace completion
COMPLETE "{:}"
COMPLETE "(:)"
COMPLETE "[:]"
COMPLETE "\":\""
COMPLETE "\':\'"

# brace matching
BRACE "{:}"
BRACE "(:)"
BRACE "[:]"
BRACE "\":\""
BRACE "\':\'"

# indentation
INDENT ".*(((:-)\\s*)[^.]*)"

# code folding
FOLD:ListOfStructures: {
    expand_type_action_name:"Expand clause body";
    collapse_type_action_name:"Collapse clause body";
}

FOLD:comment: {
    expand_type_action_name:"Expand Comments";
    collapse_type_action_name:"Collapse Comments";
}

# navigator support
NAVIGATOR:Statement: {
    display_name: "$Structure$";
    icon: org.yourorghere.prolog.Prolog.statementIcon;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Thanks to our definition of the language, we can detect both lexical and syntactic errors and we can get these error marked. Also, add code folding is quite easy. In our case, we just add code folding for block comments and clauses. Any grammar rule can be folded.</p>
</div>
<div class="paragraph">
<p>As you can see, brace completion and brace matching are pretty intuitive. To add indentation is enough to write some regular expression after which the code should be automatically indented. The most interesting thing in this code is the navigator support. For every prolog statement, we display the text corresponding to the structure and the icon used depends on the kind of statement we are dealing with (fact or clause). To do that, the  <code>icon</code>  declaration refers to a method called  <code>statementIcon</code> , which is in the file  <code>Prolog.java</code> . Here is the content of that file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package org.yourorghere.prolog;

import org.netbeans.api.languages.ASTNode;
import org.netbeans.api.languages.ASTPath;
import org.netbeans.api.languages.SyntaxContext;

public class Prolog {


    public static String statementIcon (SyntaxContext context) {
        ASTPath path = context.getASTPath ();
        ASTNode node = (ASTNode) path.getLeaf ();
        node = node.getNode ("ListOfStructures");
        if (node != null) {
            return "/org/netbeans/modules/languages/resources/variable.gif";
        }

        return "/org/netbeans/modules/languages/resources/method.gif";
    }


}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To get this file working, you have to add a module dependency with the Generic Languages Framework. To do this, in the Projects Window, right click on "Libraries" and select "Add Module Dependency&#8230;&#8203;" and then look for the Generic Languages Framework. That method makes use of the AST generated by Schliemann. Basically, we search in the path whose root is a Statement node, another node of type  <code>ListOfStructures</code> . If this node is found, that means that the statement is a clause. Otherwise, it is a fact. This procedure can be also applied to the  <code>display_name</code>  declaration and so on.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id=""><a id="Files"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here you can download the code used in this tutorial:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="prolog.nbs">prolog.nbs</a></p>
</li>
<li>
<p><a href="Prolog.java">Prolog.java</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_further_reading">[[Further reading]]</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial shows only an introductory example of using Schliemann. You can find more information in the following links:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://netbeans.org/source/browse/scripting/">NetBeans Scripting Module</a></p>
</li>
<li>
<p><a href="https://netbeans.org/source/browse/languages/">NetBeans Languages Module</a></p>
</li>
<li>
<p><a href="http://wiki.netbeans.org/wiki/view/SchliemannNBSLanguageDescription">NBS Language Description</a></p>
</li>
<li>
<p><a href="http://blogs.oracle.com/geertjan/entry/interview_author_of_d_programming">Interview with the author of new D programming language editor</a>
<a href="http://blogs.oracle.com/geertjan/entry/interview_author_of_d_programming"> </a></p>
</li>
<li>
<p><a href="https://netbeans.apache.org/platform/articles/nbm_interview_caoyuan.html">Meet a NetBeans Module Writer: Caoyuan Deng</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="http://netbeans.apache.org/community/mailing-lists.html">Send Us Your Feedback</a></p>
</div>
</div>
</div>
        
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/60/nbm-prolog.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
