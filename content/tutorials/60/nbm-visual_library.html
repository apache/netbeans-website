
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans Visual Library Tutorial</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans Visual Library Tutorial - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, NetBeans Visual Library Tutorial">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 12.1</h1>
            <p><a class="button success" href="/download/nb121/index.html">Find out more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">NetBeans Visual Library Tutorial</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/60/nbm-visual_library.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_setting_up_the_module">Setting Up the Module</a></li>
<li><a href="#_creating_the_scene">Creating the Scene</a></li>
<li><a href="#_creating_a_component_palette_for_the_scene">Creating a Component Palette for the Scene</a></li>
<li><a href="#_adding_a_layerwidget">Adding a LayerWidget</a></li>
<li><a href="#_adding_an_iconnodewidget_via_drag_and_drop_functionality">Adding an IconNodeWidget via Drag and Drop Functionality</a></li>
<li><a href="#_adding_functionality_to_the_scene">Adding Functionality to the Scene</a></li>
<li><a href="#_adding_functionality_to_the_iconnodewidget">Adding Functionality to the IconNodeWidget</a></li>
<li><a href="#_next_steps">Next Steps</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In this tutorial, you will learn how to use the main features provided by the NetBeans Visual Library API. The Visual Library API is a visualization API, useful in the context of, for example, modeling and graphs.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is not the latest version of this document. It applies to NetBeans IDE 6.0/6.1 only.  <a href="../nbm-visual_library.html">Click here</a> to see the most up to date version.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Optionally, for troubleshooting purposes, you can  <a href="http://plugins.netbeans.org/PluginPortal/faces/PluginDetailPage.jsp?pluginid=2701">download the completed sample</a> and inspect the sources.</p>
</div>
<div class="paragraph">
<p>Also, you will use 3 icons in the tutorial. You can right-click them here and save them locally, then copy them to the module project&#8217;s location, after you create the module project later in this tutorial. Here are the 3 icons:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/image1.png" alt="image1">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/image2.png" alt="image2">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/image3.png" alt="image3">
</div>
</div>
<div class="paragraph">
<p>All the information you need to know for working with the Visual Library API is collected at these two locations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://netbeans.apache.org/graph/">Visual Library Project Page</a></p>
</li>
<li>
<p><a href="https://netbeans.apache.org/graph/documentation.html">Visual Library 2.0 - Documentation</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Also, see  <a href="http://www.javalobby.org/eps/netbeans_visual_library/">Roman Strobl&#8217;s Visual Library Screencast</a> on Javalobby.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_up_the_module">Setting Up the Module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we use wizards to create a module project and a custom window component.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Choose File &gt; New Project. In the New Project wizard, choose NetBeans Modules under Categories and Module under Projects. Click Next. Type  <code>ShapeSample</code>  in Project Name and set Project Location to an appropriate folder on your disk. If they are not selected, select Standalone Module and Set as Main Project. Click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Type  <code>org.netbeans.shapesample</code>  in Code Name Base and  <code>Shape Sample</code>  in Module Display Name. Click Finish.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Right-click the project, choose Properties, click Libraries in the Project Properties dialog box and declare a dependency on the following APIs:</p>
<div class="ulist">
<ul>
<li>
<p>Visual Library API</p>
</li>
<li>
<p>Utilities API</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Click OK.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Right-click the module project, choose New &gt; Other and choose Window Component from the NetBeans Module Development category. Click Next. Choose  <code>editor</code>  in the drop-down list and select Open on Application Start. Click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Type  <code>Shape</code>  in Class Name Prefix. Optionally, add an icon with a dimension of 16x16 pixels. Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Multiple files are generated, one of them is  <code>ShapeTopComponent</code> . Open this file in Design mode. You should now see this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/shapetopcomponent.png" alt="shapetopcomponent">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Right-click in the TopComponent in Design mode, choose Set Layout, and select BorderLayout.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_scene">Creating the Scene</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Programming with the Visual Library API is similar to programming in Swing. You build and modify a tree of visual elements that are called "widgets". The root of the tree is represented by a Scene class which holds all the visual data of the scene. The scene is a widget. You have to create a scene view, which is a JComponent. You must then add the JComponent to a JScrollPane.</p>
</div>
<div class="paragraph">
<p>In this section, we add a JScrollPane to our TopComponent. Then we create a new scene. Next, we pass the scene view to the TopComponent, so that it can be displayed in the TopComponent&#8217;s JScrollPane. We then install the module project and display our first scene.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Use the Palette (Ctrl-Shift-8) to drop a  <code>JScrollPane</code>  on the TopComponent. In the Inspector, right-click the  <code>JScrollPane</code> , choose Change Variable Name and type  <code>shapePane</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the  <code>org.netbeans.shapesample</code>  package, create a Java class called  <code>GraphSceneImpl</code> . Let the class extend  <code>GraphScene</code> .</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A red error underline and a lightbulb appears. Let the IDE generate the import statement.</p>
</div>
<div class="paragraph">
<p>A red error underline and a lightbulb appears again. Let the IDE generate the class&#8217;s abstract methods.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Create a dummy implementation of the class by adding meaningful identifiers and setting  <code>null</code>  to be returned where necessary, so that all of the class&#8217;s requirements are fulfilled:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class GraphSceneImpl extends GraphScene {

    public GraphSceneImpl() {
    }

    protected Widget attachNodeWidget(Object node) {
        return null;
    }

    protected Widget attachEdgeWidget(Object edge) {
        return null;
    }

    protected void attachEdgeSourceAnchor(Object edge, Object oldSourceNode, Object newSourceNode) {

    }

    protected void attachEdgeTargetAnchor(Object edge, Object oldTargetNode, Object newTargetNode) {

    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Now use the TopComponent&#8217;s constructor to hold an instance of the  <code>GraphSceneImpl</code>  class. To do so, add the following to the end of the  <code>ShapeTopComponent</code>  class&#8217;s constructor:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">GraphSceneImpl scene = new GraphSceneImpl();
myView = scene.createView();

shapePane.setViewportView(myView);
add(scene.createSatelliteView(), BorderLayout.WEST);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that we are creating two views. The first will be a large view for visualization of your graphs or models, and so on. The second is a satellite view, which we have placed in the WEST (i.e., the left side) of the TopComponent. This will let the user navigate quickly across the view and gives an overview of the entire scene.</p>
</div>
<div class="paragraph">
<p>Declare the view JComponent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private JComponent myView;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>When the IDE restarts, there&#8217;s no need to persist the TopComponent. In fact, doing so will cause an error in this case. Therefore, change PERSISTENCE_ALWAYS to PERSISTENCE_NEVER, as shown below:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public int getPersistenceType() {
   return TopComponent.PERSISTENCE_NEVER;
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Right-click the project node and choose "Install/Reload in Development IDE". If a warning message appears, click OK.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When the module installs, look under the Window menu and you will find a new menu item called "Shape", at the top of the list of menu items. Choose it and you will see the start of your Visual Library API implementation:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/firstscene.png" alt="firstscene">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_component_palette_for_the_scene">Creating a Component Palette for the Scene</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To do something useful with the Visual Library API, we will implement the  <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-spi-palette/overview-summary.html">Palette API</a> so that we end up with a Component Palette containing the shapes shown at the start of this tutorial. Later, we will add the Visual Library API&#8217;s drag and drop functionality so that we can drag and drop the shapes into the scene. After that, we will be able to enrich the scene with additional features, such as the ability to zoom and pan in the scene.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Since the focus of this tutorial is the Visual Library API, and not the Palette API, no time will be spent here explaining how the Palette API works. Many tutorials exist on this subject already ( <a href="https://netbeans.apache.org/kb/docs/platform.html">here</a>). Therefore, you can simply copy and paste the following files into a new package called  <code>org.netbeans.shapesample.palette</code> :</p>
<div class="ulist">
<ul>
<li>
<p><a href="images/Category.java">Category.java</a></p>
</li>
<li>
<p><a href="images/CategoryChildren.java">CategoryChildren.java</a></p>
</li>
<li>
<p><a href="images/CategoryNode.java">CategoryNode.java</a></p>
</li>
<li>
<p><a href="images/PaletteSupport.java">PaletteSupport.java</a></p>
</li>
<li>
<p><a href="images/Shape.java">Shape.java</a></p>
</li>
<li>
<p><a href="images/ShapeChildren.java">ShapeChildren.java</a></p>
</li>
<li>
<p><a href="images/ShapeNode.java">ShapeNode.java</a></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the same way as explained in step 3 of the section called "Getting Started", earlier in this tutorial, add dependencies on the Actions API, Nodes API, and Common Palette API.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Next, add the palette to the TopComponent&#8217;s Lookup, by adding this line to the end of the TopComponent&#8217;s constructor:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">associateLookup( Lookups.fixed( new Object[] { PaletteSupport.createPalette() } ) );</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>The IDE will prompt you to insert import statements for  <code>org.openide.util.lookup.Lookups</code>  and  <code>org.netbeans.shapesample.palette.PaletteSupport</code> . Accept the prompts and let the IDE generate the import statements.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Place the images found at the start of this tutorial into the  <code>org.netbeans.shapesample.palette</code>  package.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The Projects window should now look as follows:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/proj-window.png" alt="proj window">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Install the module again. When you open the TopComponent from the menu item, the new Component Palette is shown to the right of the scene:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/firstpalette.png" alt="firstpalette">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_a_layerwidget">Adding a LayerWidget</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A  <a href="https://netbeans.apache.org/graph/documentation.html#LayerWidget">LayerWidget</a> represents a glasspane, similar to JGlassPane in Swing. It is transparent by default. So, before we go any further, we will add a LayerWidget to the scene, so that we have somewhere to place the visible widgets that we will drag and drop onto the scene.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the  <code>GraphSceneImpl</code>  class, declare the LayerWidget:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private LayerWidget mainLayer;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the  <code>GraphSceneImpl</code>  class&#8217;s constructor, add the LayerWidget as a child of the scene:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">mainLayer = new LayerWidget (this);
addChild (mainLayer);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, when we drag and drop items from the palette as widgets to the scene, we will add them as children of the LayerWidget. Because LayerWidgets are transparent by default, you could have various LayerWidgets transparently on top of each other so that, for example, you can add a background image to the scene.</p>
</div>
<div class="paragraph">
<p>For details, see  <a href="https://netbeans.apache.org/graph/documentation.html#LayerWidget">LayerWidget</a> in the Javadoc.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_an_iconnodewidget_via_drag_and_drop_functionality">Adding an IconNodeWidget via Drag and Drop Functionality</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Earlier, we used the  <code>GraphSceneImpl</code>  class&#8217;s constructor to pass a scene to the TopComponent&#8217;s JScrollPane. So far, the scene exists but has no behavior. Behavior is added through actions. The action that we will look at in this section is called  <code> <a href="https://netbeans.apache.org/graph/documentation.html#AcceptAction">AcceptAction</a></code> . This action enables drag and drop functionality. The drag and drop functionality could be applied to a widget, but here we apply it to the scene itself.</p>
</div>
<div class="paragraph">
<p>We use  <code>createAcceptAction</code>  to specify what should happen when an item from the palette is dragged over the scene. Two methods are involved here. The first,  <code>isAcceptable()</code> , is used to determine whether the item is acceptable to the scene. Here you can test the item, by using the transferable. You can also set the drag image, which is all that we do in the implementation below. If  <code>true</code>  is returned, the  <code>accept</code>  method is called. Here we get the image from the transferable, using the same helper method as before. Then we call the  <code>addNode</code>  method, instantiating a new  <a href="https://netbeans.apache.org/graph/documentation.html#IconNodeWidget">IconNodeWidget</a> and passing the image retrieved from the transferable.</p>
</div>
<div class="paragraph">
<p>All the code in this section is interrelated, and you will receive red error underlines in your code until all the methods below have been added, but we will try to add everything in some kind of logical order anyway!</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>First, add the  <code>createAcceptAction</code> , with its two methods, to the  <code>GraphSceneImpl</code>  class&#8217;s constructor:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">getActions().addAction(ActionFactory.createAcceptAction(new AcceptProvider() {

    public ConnectorState isAcceptable(Widget widget, Point point, Transferable transferable) {
        Image dragImage = getImageFromTransferable(transferable);
        JComponent view = getView();
        Graphics2D g2 = (Graphics2D) view.getGraphics();
        Rectangle visRect = view.getVisibleRect();
        view.paintImmediately(visRect.x, visRect.y, visRect.width, visRect.height);
        g2.drawImage(dragImage,
                AffineTransform.getTranslateInstance(point.getLocation().getX(),
                point.getLocation().getY()),
                null);
        return ConnectorState.ACCEPT;
    }

    public void accept(Widget widget, Point point, Transferable transferable) {
        Image image = getImageFromTransferable(transferable);
        Widget w = GraphSceneImpl.this.addNode(new MyNode(image));
        w.setPreferredLocation(widget.convertLocalToScene(point));
    }

}));</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
After you add the above code, some red underlines will remain, denoting that there are errors. These errors are because the code above refers to a method and a class that you have not yet created. You will create them in the next steps.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Next, in the  <code>GraphSceneImpl</code>  class, add a helper method for retrieving the image from the transferable:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private Image getImageFromTransferable(Transferable transferable) {
    Object o = null;
    try {
        o = transferable.getTransferData(DataFlavor.imageFlavor);
    } catch (IOException ex) {
        ex.printStackTrace();
    } catch (UnsupportedFlavorException ex) {
        ex.printStackTrace();
    }
    return o instanceof Image ? (Image) o : Utilities.loadImage("org/netbeans/shapesample/palette/shape1.png");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that you can define any kind of image when an image is not successfully returned from this helper method. For now we will use the " <code>shape1.png</code> " image instead.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Create a new class called  <code>MyNode</code> . This class represents a node in a graph-oriented model. It cannot be an image directly, since each node has to be unique (checked by "equals" method) in the model. If you would use the images directly, then you would be able to have only 3 nodes (one for each image) in the scene. Using the MyNode class, you can have multiple nodes and each node can have its own or a shared image instance.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class MyNode {

    private Image image;

    public MyNode(Image image) {
        this.image = image;
    }

    public Image getImage() {
        return image;
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Change the signature of the  <code>GraphSceneImpl</code>  class to the following, so that the node is received by the Visual Library implementation class:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">extends GraphScene&lt;MyNode, String&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You must let the IDE generate new stubs for the abstract methods.</p>
</div>
<div class="paragraph">
<p>Also, since we are now using generics, make sure that the IDE is using JDK 1.5. If you are not sure whether 1.6 is being used, right-click the project, choose Properties, and go to the Sources page. Change the Source Level drop-down to 1.5.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Finally, define the new widget in the  <code>GraphSceneImpl</code>  class. This method is called automatically by the  <code>accept</code>  method. Use it to define a Visual Library widget when the palette item is dropped.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">protected Widget attachNodeWidget(MyNode node) {
    IconNodeWidget widget = new IconNodeWidget(this);
    widget.setImage(node.getImage());
    widget.setLabel(Long.toString(node.hashCode()));
    widget.getActions().addAction(ActionFactory.createMoveAction());
    mainLayer.addChild(widget);
    return widget;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that we set the image retrieved from the node. We also generate a random number so that we have a label. By default, the widget exists but has no behavior. Here, we create a move action, so that the widget can be moved in the scene. Finally, before returning the widget to the scene, we add it as a child to the LayerWidget that we created in the previous section.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Reload the module and open the Shape window again.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now you can drag and drop items from the palette. As you drag an item over the scene, you will see the drag image. When you drop an item, it becomes a widget and is visible within the scene as well as within the satellite view, as you can see here:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/finishedscene.png" alt="finishedscene">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_functionality_to_the_scene">Adding Functionality to the Scene</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the previous section, we added  <code> <a href="https://netbeans.apache.org/graph/documentation.html#AcceptAction">AcceptAction</a></code>  to the scene. We had to define two methods to specify whether the item should be dropped and for resolving the item. In this section, we use  <code> <a href="https://netbeans.apache.org/graph/documentation.html#ZoomAction">ZoomAction</a></code> , to add zoom/unzoom functionality to the scene.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>At the end of the  <code>GraphSceneImpl</code>  class&#8217;s constructor, add this line:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">getActions().addAction(ActionFactory.createZoomAction());</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Install the module again.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>While holding CTRL key use the mouse wheel to zoom in and out of the scene:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/zoom.png" alt="zoom">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/unzoom.png" alt="unzoom">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The shapes are rendered as images. SVG is currently not supported.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the same way as described above, you can add Pan functionality to the scene, by means of this line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">getActions().addAction(ActionFactory.createPanAction());</code></pre>
</div>
</div>
<div class="paragraph">
<p>When you add this line, the user will be able to hold down the mouse wheel and then scroll in any direction in the scene.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_functionality_to_the_iconnodewidget">Adding Functionality to the IconNodeWidget</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Earlier we added  <code> <a href="https://netbeans.apache.org/graph/documentation.html#MoveAction">MoveAction</a></code>  to the IconNodeWidget, to enable move behavior for the widget. In the same way, a lot of other behavior can be added to the widget. In this section, we add  <code> <a href="https://netbeans.apache.org/graph/documentation.html#HoverAction">HoverAction</a></code> ,  <code> <a href="https://netbeans.apache.org/graph/documentation.html#SelectAction">SelectAction</a></code> , and  <code> <a href="https://netbeans.apache.org/graph/documentation.html#InplaceEditorAction">InplaceEditorAction</a></code> .</p>
</div>
<div class="paragraph">
<p>The  <code>InplaceEditorAction</code>  will let the user change the label:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/editable.png" alt="editable">
</div>
</div>
<div class="paragraph">
<p>The  <code>SelectAction</code>  will change the color of the label when the widget is selected, while the  <code>HoverAction</code>  will change the color of the label when the mouse hovers over the widget:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/selectable-hoverable.png" alt="selectable hoverable">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>First define the editor action that we will add to the IconNodeWidget:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private WidgetAction editorAction = ActionFactory.createInplaceEditorAction(new LabelTextFieldEditor());</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Now define the  <code>LabelTextFieldEditor</code> , as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private class LabelTextFieldEditor implements TextFieldInplaceEditor {

    public boolean isEnabled(Widget widget) {
        return true;
    }

    public String getText(Widget widget) {
        return ((LabelWidget) widget).getLabel();
    }

    public void setText(Widget widget, String text) {
        ((LabelWidget) widget).setLabel(text);
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Finally, assign the editor action to the IconNodeWidget, in the same way as done for the move action earlier:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">widget.getLabelWidget().getActions().addAction(editorAction);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, we first get the IconNodeWidget&#8217;s LabelWidget. Then we add the editor action to the LabelWidget.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>The IDE will prompt you to add several import statements. In each case, accept the suggestion offered by the IDE.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Next, in the case of  <code>SelectAction</code>  and  <code>HoverAction</code> , you need do nothing more than assign these actions to the IconNodeWidget:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">widget.getActions().addAction(createSelectAction());
widget.getActions().addAction(createObjectHoverAction());</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Next, you need to think about the order of the actions that you have created. For details, see the  <a href="https://netbeans.apache.org/graph/documentation.html#OrderOfActions">Order of Actions</a> section in the documentation. After you have reordered the actions, the  <code>attachNodeWidget</code>  should look as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">protected Widget attachNodeWidget(MyNode node) {
    IconNodeWidget widget = new IconNodeWidget(this);
    widget.setImage(node.getImage());
    widget.setLabel(Long.toString(node.hashCode()));

    //double-click, the event is consumed while double-clicking only:
    widget.getLabelWidget().getActions().addAction(editorAction);

    //single-click, the event is not consumed:
    widget.getActions().addAction(createSelectAction());

    //mouse-dragged, the event is consumed while mouse is dragged:
    widget.getActions().addAction(ActionFactory.createMoveAction());

    //mouse-over, the event is consumed while the mouse is over the widget:
    widget.getActions().addAction(createObjectHoverAction());

    mainLayer.addChild(widget);
    return widget;
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Install and try out the module again. As shown at the start of this section, when you hover over a widget&#8217;s label, or when you select it, its color will change. Also, when you click on a label, you are able to edit its content.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Congratulations, you have completed the Visual Library 2.0 Tutorial for NetBeans 6.0.</p>
</div>
<div class="paragraph">
<p><a href="http://netbeans.apache.org/community/mailing-lists.html">Send Us Your Feedback</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_steps">Next Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information on working with the Visual Library API, see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.javalobby.org/eps/netbeans_visual_library/">Roman Strobl&#8217;s Visual Library Screencast</a> on Javalobby.</p>
</li>
<li>
<p><a href="https://netbeans.apache.org/graph/">Visual Library Project Page</a></p>
</li>
<li>
<p><a href="https://netbeans.apache.org/graph/documentation.html">Visual Library 2.0 - Documentation</a></p>
</li>
</ul>
</div>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/60/nbm-visual_library.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1><a href="/about/index.html">About</a></h1>
                <ul>
                    <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb110/nb110.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="/plugins/index.html">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2019 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
