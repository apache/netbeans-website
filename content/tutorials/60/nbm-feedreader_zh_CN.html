
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans 平台 Feed Reader 教程</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans 平台 Feed Reader 教程 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, NetBeans 平台 Feed Reader 教程">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 12.1</h1>
            <p><a class="button success" href="/download/nb121/index.html">Find out more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">NetBeans 平台 Feed Reader 教程</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/60/nbm-feedreader_zh_CN.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_必备知识">必备知识</a></li>
<li><a href="#_设置应用程序">设置应用程序</a>
<ul class="sectlevel2">
<li><a href="#_创建模块套件项目">创建模块套件项目</a></li>
<li><a href="#_包装库">包装库</a></li>
<li><a href="#_创建模块项目">创建模块项目</a></li>
</ul>
</li>
<li><a href="#_创建_feed_reader_窗口">创建 Feed Reader 窗口</a></li>
<li><a href="#_运行应用程序">运行应用程序</a></li>
<li><a href="#_在应用程序中添加代码">在应用程序中添加代码</a>
<ul class="sectlevel2">
<li><a href="#_指定应用程序的依赖关系">指定应用程序的依赖关系</a></li>
<li><a href="#_设置库包装模块之间的依赖关系">设置库包装模块之间的依赖关系</a></li>
<li><a href="#_创建_rssfeeds_文件夹">创建 RssFeeds 文件夹</a></li>
<li><a href="#_创建_feed_对象">创建 Feed 对象</a></li>
<li><a href="#_扩展_feed_窗口">扩展 Feed 窗口</a></li>
<li><a href="#_创建_rssnode_类">创建 RssNode 类</a></li>
<li><a href="#_创建_rssfolderchildren_类">创建 RssFolderChildren 类</a></li>
<li><a href="#_创建_onefeednode_类">创建 OneFeedNode 类</a></li>
<li><a href="#_创建_feedchildren_类">创建 FeedChildren 类</a></li>
<li><a href="#_创建_entrybeannode_类">创建 EntryBeanNode 类</a></li>
<li><a href="#_创建_add_folder_菜单项">创建 "Add Folder" 菜单项</a></li>
<li><a href="#_创建_add_rss_菜单项">创建 "Add RSS" 菜单项</a></li>
<li><a href="#_对_rssnode_类进行本地化">对 RssNode 类进行本地化</a></li>
</ul>
</li>
<li><a href="#_标记应用程序">标记应用程序</a></li>
<li><a href="#_分发应用程序">分发应用程序</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>欢迎学习 NetBeans 平台 Feed Reader 教程。您在本教程中构建的 Feed Reader 是一个简单的 RSS/Atom Feed 浏览器，它模仿的是 Mozilla Firefox 的 Sage 插件。它用于呈现一个 Feed 树，其中的子节点表示可以在浏览器中打开的各个 Feed 条目。</p>
</div>
<div class="paragraph">
<p>为了说明最终的结果，下面显示了您将在本教程中构建的 Feed Reader，并且打开了  <a href="https://netbeans.org/rss-091.xml">NetBeans Highlights Feed</a> 中的一个 Feed 条目：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-result.png" alt="60 result">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_必备知识">必备知识</h2>
<div class="sectionbody">
<div class="paragraph">
<p>您无需了解有关 NetBeans 平台开发的任何知识即可学习本教程。此外，具有一些 Java 编程背景将会对您有所帮助，但这并不是必需的。不过，在开始学习本教程之前阅读下列文档可能会很有用，您可以从中获取一些有用的背景信息：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://netbeans.apache.org/tutorials/60/nbm-feedreader_background.html">Preparing to Create the FeedReader Application</a>（准备创建 FeedReader 应用程序）。此文档提供了本教程的背景知识。它指导您从概念上理解将在本教程中执行的所有操作。此外，还说明了可以从何处找到在本教程中构建的样例的源代码。</p>
</li>
<li>
<p><a href="../61/nbm-htmleditor.html">NetBeans 平台快速入门</a>。此简短教程将引导您完成在 NetBeans 平台之上构建富客户端 (rich client) 应用程序的完整过程。其中介绍了主要开发阶段和工具，并且最终生成了一个 HTML 编辑器。</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_设置应用程序">设置应用程序</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在 NetBeans IDE 中，要在 NetBeans 之上构建应用程序，首先应生成许多将用作应用程序基础的文件。例如，IDE 提供了一个模块项目向导、一个模块套件项目向导以及一个库包装模块项目向导，这些向导用于设置在 NetBeans 平台上构建模块和应用程序所需的全部基本文件。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>*模块套件项目。*该项目用于将一组互相依赖的模块项目和库包装模块项目组合在一起，并允许您将它们作为一个整体进行部署。</p>
</li>
<li>
<p>*库包装模块项目。*该项目用于将库 JAR 文件放在其类路径上，并将 JAR 文件的部分或所有包作为公共包从模块中导出。</p>
</li>
<li>
<p>*模块项目。*该项目用于实现在 NetBeans 平台上构建的模块或应用程序的功能、业务逻辑和用户界面。</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_创建模块套件项目">创建模块套件项目</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>选择“文件”&gt;“新建项目”(Ctrl-Shift-N)。在“类别”下选择“NetBeans 模块”。在“项目”下选择“模块套件”项目。您应该看到如下所示的屏幕：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-suite-wiz.png" alt="60 suite wiz">
</div>
</div>
<div class="paragraph">
<p>单击“下一步”。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>在“名称和位置”面板的“项目名称”中键入  <code>feedreader-suite</code> 。将项目位置更改为计算机上的任意目录。您现在应该看到如下所示的屏幕：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-suite-wiz2.png" alt="60 suite wiz2">
</div>
</div>
<div class="paragraph">
<p>单击“完成”。</p>
</div>
<div class="paragraph">
<p>IDE 将创建  <code>feedreader-suite</code>  项目，并在“项目”窗口中显示该项目，如下所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-suite.png" alt="60 suite">
</div>
</div>
<div class="paragraph">
<p>该项目将包含您在下面几小节中创建的模块项目和库包装模块项目。</p>
</div>
</div>
<div class="sect2">
<h3 id="_包装库">包装库</h3>
<div class="paragraph">
<p>您可以将整个 Feed Reader 应用程序捆绑到单个模块中。但是，该应用程序需要 Rome、Rome Fetcher 和 JDom 库：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>*Rome。*使用非常简单的 API 读取 RSS 和 Atom Feed。</p>
</li>
<li>
<p>*Rome Fetcher。*允许通过 HTTP 检索 Feed。</p>
</li>
<li>
<p>*JDom。*它是一个 XML 解析 API。Feed Reader 需要它的唯一原因是，Rome 库要使用它。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>如果您打算以后通过添加更多使用这些库的模块来扩展 Feed Reader 应用程序，则最好让这些模块只依赖库模块，而不是整个 Feed Reader。此外，库模块可以“自动装入”，这意味着 NetBeans 将只在需要时才装入它们。在自动装入库模块之前，它不会在运行时占用任何内存。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在如下所示的“项目”窗口中右键单击模块套件项目的“模块”节点，然后单击“添加新库”：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-add-lib0.png" alt="60 add lib0">
</div>
</div>
<div class="paragraph">
<p>执行此操作时，您应该看到如下所示的屏幕：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-lib-wiz.png" alt="60 lib wiz">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>在如上所示的“选择库”面板中，浏览到下载的 JDom 所在的文件夹，然后选择 "jdom.jar" 和 "LICENSE.txt"。单击“下一步”。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>在“名称和位置”面板中，接受所有缺省设置。您应该看到如下所示的屏幕：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-lib-wiz3.png" alt="60 lib wiz3">
</div>
</div>
<div class="paragraph">
<p>*注意：*库包装模块项目将被存储在模块套件项目中。您也可以将它存储在其他位置，但为了便于进行版本控制，最好将它放在模块套件项目内。因此， <code>feedreader-suite</code>  模块套件项目在“添加到模块套件中”下拉列表内处于选定状态。</p>
</div>
<div class="paragraph">
<p>单击“下一步”。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>在“基本模块配置”面板中，接受所有缺省设置。您应该看到如下所示的屏幕：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-lib-wiz2.png" alt="60 lib wiz2">
</div>
</div>
<div class="paragraph">
<p>单击“完成”。</p>
</div>
<div class="paragraph">
<p>将在 IDE 中打开新的库包装模块项目，并在“项目”窗口中显示该项目。您现在应该在“项目”窗口中看到如下所示的内容：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-lib-wiz4.png" alt="60 lib wiz4">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>返回至本小节的步骤 1，为 Rome 创建一个库包装模块项目。接受所有缺省设置。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>返回至本小节的步骤 1，为 Rome Fetcher 创建一个库包装模块项目。接受所有缺省设置。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>现在，您已具有一个模块套件项目以及三个库包装模块项目，从而提供了可供您在本教程中使用的许多有用的 Java 类。</p>
</div>
</div>
<div class="sect2">
<h3 id="_创建模块项目">创建模块项目</h3>
<div class="paragraph">
<p>在本小节中，我们将为应用程序所提供的功能创建一个项目。该项目将使用在上一节中创建的库包装模块所提供的类。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在如下所示的“项目”窗口中右键单击模块套件项目的“模块”节点，然后单击“添加新模块”：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-module-project.png" alt="60 module project">
</div>
</div>
<div class="paragraph">
<p>执行此操作时，您应该看到如下所示的屏幕：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-module-wiz.png" alt="60 module wiz">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>在如上所示的“名称和位置”面板的“项目名称”中键入  <code>FeedReader</code> 。接受所有缺省设置。单击“下一步”。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>在“基本模块配置”面板中，将“代码名称基”中的  <code>yourorghere</code>  替换为  <code>myorg</code> ，以使整个代码名称基为  <code>org.myorg.feedreader</code> 。在“模块显示名称”中键入  <code>FeedReader</code> 。保留本地化包和 XML 层的位置，以将其存储在名为  <code>org/myorg/feedreader</code>  的包中。您现在应该看到如下所示的屏幕：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-module-wiz2.png" alt="60 module wiz2">
</div>
</div>
<div class="paragraph">
<p>单击“完成”。</p>
</div>
<div class="paragraph">
<p>IDE 将创建 FeedReader 项目。此项目包含模块的所有源代码和项目 meta 数据，例如项目的 Ant 生成脚本。此项目将会在 IDE 中打开。您可以在“项目”窗口 (Ctrl-1) 中查看其逻辑结构，在“文件”窗口 (Ctrl-2) 中查看其文件结构。“项目”窗口现在应如下所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-module.png" alt="60 module">
</div>
</div>
<div class="paragraph">
<p>至此，您已创建了新应用程序的源代码结构。在下一节中，我们将开始添加一些代码。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_创建_feed_reader_窗口">创建 Feed Reader 窗口</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在本节中，您将使用“窗口组件”向导来生成一些用于创建定制窗口组件的文件，以及一个用于调用该组件的操作。此向导还将在  <code>layer.xml</code>  配置文件中将该操作注册为一个菜单项，并添加用于序列化窗口组件的条目。学完本节后，我们将向您演示如何试用“窗口组件”向导所生成的文件。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>右键单击 "FeedReader" 项目节点，然后选择“新建”&gt;“其他”。在“类别”下选择“模块开发”。在“文件类型”下选择“窗口组件”，如下所示：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-windowcomp-wiz.png" alt="60 windowcomp wiz">
</div>
</div>
<div class="paragraph">
<p>单击“下一步”。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>在“基本设置”面板中，从下拉列表中选择 "explorer"，然后选中“在应用程序启动时打开”，如下所示：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-windowcomp-wiz2.png" alt="60 windowcomp wiz2">
</div>
</div>
<div class="paragraph">
<p>单击“下一步”。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>在“名称和位置”面板的“类名前缀”中键入 Feed，然后浏览到  <code>rss16.gif (
image::images/rss16.gif[])</code>  的保存位置。该 GIF 文件将显示在调用此操作的菜单项中。您现在应该看到如下所示的屏幕：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-windowcomp-wiz3.png" alt="60 windowcomp wiz3">
</div>
</div>
<div class="paragraph">
<p>单击“完成”。</p>
</div>
<div class="paragraph">
<p>“项目”窗口现在应如下所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-windowcomp.png" alt="60 windowcomp">
</div>
</div>
<div class="paragraph">
<p>IDE 已创建下列新文件：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>FeedAction.java。</code> 定义出现在“窗口”菜单中且带有标签 "Open Feed Window" 和图像  <code>rss16.gif</code>  (
image::images/rss16.gif[]) 的操作。它将打开 "Feed Window"。</p>
</li>
<li>
<p><code>FeedTopComponent.java。</code> 定义 "Feed Window"。</p>
</li>
<li>
<p><code>FeedTopComponentSettings.xml。</code> 指定  <code>org.myorg.feedreader</code>  富客户端 (rich client) 应用程序的所有接口。可以轻松地查找实例，无需实例化每个实例。不必装入类或创建对象，从而提高了性能。已在  <code>layer.xml</code>  文件的  <code>Windows2/Components</code>  文件夹中注册。</p>
</li>
<li>
<p><code>FeedTopComponentWstcref.xml。</code> 指定对组件的引用。允许组件属于多种模式。已在  <code>layer.xml</code>  文件的  <code>Windows2/Modes</code>  文件夹中注册。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>IDE 已修改下列现有文件：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>project.xml。</code> 添加了两个模块依赖关系：“实用程序 API”（单击 <a href="http://bits.netbeans.org/dev/javadoc/org-openide-util/overview-summary.html">此处</a>可获取 Javadoc）和“窗口系统 API”（单击 <a href="http://bits.netbeans.org/dev/javadoc/org-openide-windows/overview-summary.html">此处</a>可获取 Javadoc）。</p>
</li>
<li>
<p><code>Bundle.properties。</code>
添加了以下三个键值对：</p>
</li>
<li>
<p><code>CTL_FeedAction。</code> 对  <code>FeedAction.java</code>  中定义的菜单项的标签进行本地化。</p>
</li>
<li>
<p><code>CTL_FeedTopComponent。</code> 对  <code>FeedTopComponent.java</code>  的标签进行本地化。</p>
</li>
<li>
<p><code>HINT_FeedTopComponent。</code> 对  <code>FeedTopComponent.java</code>  的工具提示进行本地化。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>最后，在  <code>layer.xml</code>  文件中添加了三个注册条目。</p>
</div>
<div class="paragraph">
<p>下面介绍了  <code>layer.xml</code>  文件中各个条目的作用：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;Actions&gt;</code>
将操作注册为“窗口”文件夹中的操作。</p>
</li>
<li>
<p><code>&lt;Menu&gt;</code>
将操作注册为“窗口”菜单中的菜单项。</p>
</li>
<li>
<p><code>&lt;Windows2&gt; </code> 注册  <code>FeedTopComponentSettings.xml</code> ，它用于查找窗口组件。在 "explorer" 区域中注册组件引用文件  <code>FeedTopComponentWstcref.xml</code> 。</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_运行应用程序">运行应用程序</h2>
<div class="sectionbody">
<div class="paragraph">
<p>无需键入任何代码，您便可以试用应用程序。要试用应用程序，您需要将模块部署到 NetBeans 平台，然后检查是否正确显示了空的 "Feed Window"。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>首先删除用于定义 NetBeans IDE，但在 Feed Reader 应用程序中不需要的所有模块。右键单击 "feedreader-suite" 项目，选择“属性”，然后单击“项目属性”对话框中的“库”。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>将显示一个“群集”列表。每个群集都是一组相关的模块。我们需要的唯一群集是平台群集，因此请取消选中所有其他群集，直到仅选中平台群集。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-runapp4.png" alt="60 runapp4">
</div>
</div>
<div class="paragraph">
<p>展开平台群集，浏览它所提供的模块：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-runapp5.png" alt="60 runapp5">
</div>
</div>
<div class="paragraph">
<p>平台模块提供 Swing 应用程序的通用基础结构。因此，由于我们已经包括了平台群集，所以将不需要为应用程序的基础结构（例如，菜单栏、窗口系统以及引导功能）创建“具体”的代码。</p>
</div>
<div class="paragraph">
<p>单击“确定”。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>在“项目”窗口中，右键单击 "feedreader-suite" 项目，然后选择“清理并生成所有”。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>在“项目”窗口中，右键单击 "feedreader-suite" 项目，然后选择“运行”，如下所示：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-runapp.png" alt="60 runapp">
</div>
</div>
<div class="paragraph">
<p>将启动应用程序。您会看到一个闪屏。然后，将打开应用程序，并显示新的 "Feed Window" 作为资源管理器窗口，如下所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-runapp2.png" alt="60 runapp2">
</div>
</div>
<div class="paragraph">
<p>*注意：*您现在获得的是一个包含以下模块的应用程序：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>NetBeans 平台所提供的模块，用于引导应用程序、管理生命周期以及解决其他基础结构问题。</p>
</li>
<li>
<p>您在本教程中创建的三个库包装模块。</p>
</li>
<li>
<p>您在本教程中创建的 FeedReader 功能模块，用于提供 Feed 窗口。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>在应用程序的“窗口”菜单中，您应该看到可用来打开 Feed 窗口（如果已关闭）的新菜单项，如下所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-runapp3.png" alt="60 runapp3">
</div>
</div>
<div class="paragraph">
<p>正如您所看到的，无需执行任何编码工作，您便拥有了一个完整的应用程序。它的功能并不多，但是具有完整的基础结构，并且可以按预期的方式工作。接下来，我们将使用一些 NetBeans API 向应用程序中添加代码。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_在应用程序中添加代码">在应用程序中添加代码</h2>
<div class="sectionbody">
<div class="paragraph">
<p>现在，您已建立了应用程序的基础结构，接下来该着手添加自己的代码了。在执行此操作之前，您需要指定应用程序的依赖关系。指定依赖关系也就是指定可提供将扩展或实现的 NetBeans API 的模块。然后，您将使用“新建文件”向导和源代码编辑器来创建组成 Feed Reader 应用程序的类并对这些类进行编码。</p>
</div>
<div class="sect2">
<h3 id="_指定应用程序的依赖关系">指定应用程序的依赖关系</h3>
<div class="paragraph">
<p>您需要对属于 NetBeans API 的几个类创建子类。这些类所属的模块需要声明为与 Feed Reader 应用程序具有依赖关系。为此，请使用“项目属性”对话框，具体如下面的步骤所述。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在“项目”窗口中，右键单击 "FeedReader" 项目，然后选择“属性”。在“项目属性”对话框中，单击“库”。请注意，一些 API 已被声明为与该模块具有依赖关系，如下所示：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-add-lib1.png" alt="60 add lib1">
</div>
</div>
<div class="paragraph">
<p>上面的库注册是在本教程的前面部分由“窗口组件”向导完成的。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>单击“添加依赖关系”。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>添加以下 API：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">操作 API
数据系统 API
对话框 API
资源管理器和属性表单 API
文件系统 API
节点 API
rome
rome-fetcher</code></pre>
</div>
</div>
<div class="paragraph">
<p>您现在应该看到如下所示的屏幕：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-add-lib2.png" alt="60 add lib2">
</div>
</div>
<div class="paragraph">
<p>单击“确定”退出“项目属性”对话框。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>展开 "FeedReader" 项目的“库”节点，并请注意现在可用于此项目的模块列表：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-add-lib5.png" alt="60 add lib5">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_设置库包装模块之间的依赖关系">设置库包装模块之间的依赖关系</h3>
<div class="paragraph">
<p>现在，您已设置了与将使用的 NetBeans API 模块之间的依赖关系，接下来还要设置库包装模块之间的依赖关系。例如，Rome JAR 使用来自 JDom JAR 的类。由于这些类包装在单独的库包装模块中，因此我们需要通过库包装模块的“项目属性”对话框指定 JAR 之间的关系。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>首先，使 Rome 依赖于 JDom。在“项目”窗口中，右键单击 "rome" 库包装模块项目，然后选择“属性”。在“项目属性”对话框中，单击“库”，然后单击“添加依赖关系”。添加 "jdom"。您现在应该看到如下所示的屏幕：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-add-lib3.png" alt="60 add lib3">
</div>
</div>
<div class="paragraph">
<p>单击“确定”退出“项目属性”对话框。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>最后，由于 Rome Fetcher 同时依赖于 Rome 和 JDom，因此您需要使 Rome Fetcher 依赖于 Rome，如下所示：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-add-lib4.png" alt="60 add lib4">
</div>
</div>
<div class="paragraph">
<p>由于 Rome 已依赖于 JDom，因此您不需要使 Rome Fetcher 依赖于 JDom。</p>
</div>
</div>
<div class="sect2">
<h3 id="_创建_rssfeeds_文件夹">创建 RssFeeds 文件夹</h3>
<div class="paragraph">
<p>您将使用 IDE 的用户界面在  <code>layer.xml</code>  文件中添加一个文件夹。该文件夹将包含 RSS Feed 对象。之后，您将在由“窗口组件”向导所创建的  <code>FeedTopComponent.java</code>  中添加代码，用于查看此文件夹的内容。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在“项目”窗口中，依次展开 "FeedReader" 项目节点、“重要文件”节点和“XML 层”节点。此时，您应该看到以下节点：</p>
<div class="ulist">
<ul>
<li>
<p><code>&lt;此层&gt;。</code> 显示由当前模块所提供的文件夹。例如，FeedReader 模块提供了本教程前面已讨论过的 "Actions"、"Menu" 和 "Windows2" 文件夹，如下所示：</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-feedfolder-1.png" alt="60 feedfolder 1">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;上下文中的此层&gt;。</code> 显示可用于整个应用程序的所有文件夹。我们将在本教程的后面部分介绍此节点。</p>
</li>
</ul>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>右键单击 "&lt;此层&gt;" 节点，然后选择“新建”&gt;“文件夹”，如下所示：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-feedfolder-2.png" alt="60 feedfolder 2">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>在“新建文件夹”对话框中键入  <code>RssFeeds</code> 。单击“确定”。现在有了一个新文件夹，如下所示：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-feedfolder-3.png" alt="60 feedfolder 3">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>双击  <code>layer.xml</code>  文件的节点，以在源代码编辑器中打开该文件。请注意，此时已添加了以下条目： <code> &lt;folder name="RssFeeds"/&gt;</code></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_创建_feed_对象">创建 Feed 对象</h3>
<div class="paragraph">
<p>接下来，您将创建一个简单的 POJO，用于封装 URL 及其关联的 Rome Feed。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>右键单击 "FeedReader" 项目节点，然后选择“新建”&gt;“Java 类”。单击“下一步”。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>将此类命名为  <code>Feed</code> ，然后在“包”下拉列表中选择 "org.myorg.feedreader"。单击“完成”。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>在源代码编辑器中，将缺省的  <code>Feed</code>  类替换为以下代码：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class Feed implements Serializable {

    private static FeedFetcher s_feedFetcher
            = new HttpURLFeedFetcher(HashMapFeedInfoCache.getInstance());
    private transient SyndFeed m_syndFeed;
    private URL m_url;
    private String m_name;

    protected Feed() {
    }

    public Feed(String str) throws MalformedURLException {
        m_url = new URL(str);
        m_name = str;
    }

    public URL getURL() {
        return m_url;
    }

    public SyndFeed getSyndFeed() throws IOException {
        if (m_syndFeed == null) {
            try {
                m_syndFeed = s_feedFetcher.retrieveFeed(m_url);
                if (m_syndFeed.getTitle() != null) {
                    m_name = m_syndFeed.getTitle();
                }
            } catch (Exception ex) {
                throw new IOException(ex.getMessage());
            }
        }
        return m_syndFeed;
    }

    @Override
    public String toString() {
        return m_name;
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>许多代码带有下划线，这是因为您尚未声明其包。您将在下面的步骤中执行此操作。</p>
</div>
<div class="paragraph">
<p>请通过执行以下步骤来重新设置文件的格式并声明其依赖关系：</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>按 Alt-Shift-F 组合键设置代码格式。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>按 Ctrl-Shift-I 组合键并确保选定以下 import 语句：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-imports.png" alt="60 imports">
</div>
</div>
<div class="paragraph">
<p>单击“确定”，IDE 将在类中添加以下 import 语句：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">import com.sun.syndication.feed.synd.SyndFeed;
import com.sun.syndication.fetcher.FeedFetcher;
import com.sun.syndication.fetcher.impl.HashMapFeedInfoCache;
import com.sun.syndication.fetcher.impl.HttpURLFeedFetcher;
import java.io.IOException;
import java.io.Serializable;
import java.net.MalformedURLException;
import java.net.URL;</code></pre>
</div>
</div>
<div class="paragraph">
<p>现在，所有红色下划线都应消失。否则，请先解决此问题，然后再继续学习本教程。</p>
</div>
</div>
<div class="sect2">
<h3 id="_扩展_feed_窗口">扩展 Feed 窗口</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>双击 "FeedTopComponent.java" 以在源代码编辑器中将其打开。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>在类声明的末尾键入  <code>implements ExplorerManager.Provider</code> 。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>在此代码行中按 Alt-Enter 组合键，然后单击建议的内容。IDE 将添加所需包  <code>org.openide.explorer.ExplorerManager</code>  的 import 语句。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>再次按 Alt-Enter 组合键，然后单击建议的内容。IDE 将实现抽象方法  <code>getExplorerManager()</code> 。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>在新的  <code>getExplorerManager()</code>  方法的主体中键入  <code>return manager;</code> 。在此代码行中按 Alt-Enter 组合键，使 IDE 创建一个名为  <code>manager</code>  的字段。将缺省定义替换为以下定义：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private final ExplorerManager manager = new ExplorerManager();</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>在紧邻上一步中创建的字段声明下方，声明以下内容：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private final BeanTreeView view = new BeanTreeView();</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>最后，在构造函数的末尾添加以下代码：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">setLayout(new BorderLayout());
add(view, BorderLayout.CENTER);
view.setRootVisible(true);
try {
    manager.setRootContext(new RssNode.RootRssNode());
} catch (DataObjectNotFoundException ex) {
    ErrorManager.getDefault().notify(ex);
}
ActionMap map = getActionMap();
map.put("delete", ExplorerUtils.actionDelete(manager, true));
associateLookup(ExplorerUtils.createLookup(manager, map));</code></pre>
</div>
</div>
<div class="paragraph">
<p>现在，许多代码带有下划线，这是因为您尚未声明其关联包。您将在下面的步骤中执行此操作。</p>
</div>
<div class="paragraph">
<p>请通过执行以下步骤来重新设置文件的格式并声明其依赖关系：</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>按 Alt-Shift-F 组合键设置代码格式。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>按 Ctrl-Shift-I 组合键，选择 "org.openide.ErrorManager"，然后单击“确定”，IDE 将在 package 语句下方添加几条 import 语句。import 语句的完整列表现在应如下所示：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">import java.awt.BorderLayout;
import java.io.Serializable;
import javax.swing.ActionMap;
import org.openide.ErrorManager;
import org.openide.explorer.ExplorerManager;
import org.openide.explorer.ExplorerUtils;
import org.openide.explorer.view.BeanTreeView;
import org.openide.loaders.DataObjectNotFoundException;
import org.openide.util.NbBundle;
import org.openide.util.RequestProcessor;
import org.openide.util.Utilities;
import org.openide.windows.TopComponent;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>请注意， <code>manager.setRootContext(new RssNode.RootRssNode());</code>  一行下面仍带有红色下划线，这是因为您尚未创建  <code>RssNode.java</code> 。您将在下面一小节中执行此操作。现在，所有其他红色下划线都应消失。否则，请先解决此问题，然后再继续学习本教程。</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_创建_rssnode_类">创建 RssNode 类</h3>
<div class="paragraph">
<p>Feed Reader 的顶层节点由 RssNode 类提供。此类扩展用于代理 "RssFeeds" 节点的  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/nodes/FilterNode.html">FilterNode</a></code> 。在本小节中，我们将定义一个显示名称并声明两个菜单项："Add" 和 "Add Folder"，如下所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-actions.png" alt="60 actions">
</div>
</div>
<div class="paragraph">
<p>请通过执行以下步骤来创建此类：</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在  <code>org.myorg.feedreader</code>  包中创建  <code>RssNode.java</code> 。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>将缺省类替换为以下代码：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class RssNode extends FilterNode {

    public RssNode(Node folderNode) throws DataObjectNotFoundException {
        super(folderNode, new RssFolderChildren(folderNode));
    }

    @Override
    public Action[] getActions(boolean popup) {

        *//Declare our actions
        //and pass along the node's data folder:*
        DataFolder df = getLookup().lookup(DataFolder.class);
        return new Action[]{
            new AddRssAction(df),
            new AddFolderAction(df)
        };

    }

    public static class RootRssNode extends RssNode {

        *//The filter node will serve as a proxy
        //for the 'RssFeeds' node, which we here
        //obtain from the NetBeans user directory:*
        public RootRssNode() throws DataObjectNotFoundException {
            super(DataObject.find(Repository.getDefault().getDefaultFileSystem().
                    getRoot().getFileObject("RssFeeds")).getNodeDelegate());
        }

        *//Set the display name of the node,
        //referring to the bundle file, and
        //a key, which we will define later:*
        @Override
        public String getDisplayName() {
            return NbBundle.getMessage(RssNode.class, "FN_title");
        }

    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>此类中存在几个红色下划线标记，这是因为当前尚未创建操作以及用于定义节点子级的类。</p>
</div>
</div>
<div class="sect2">
<h3 id="_创建_rssfolderchildren_类">创建 RssFolderChildren 类</h3>
<div class="paragraph">
<p>接下来，我们将考虑 "RSS/Atom Feeds" 节点的子级。这些子级可以是文件夹或 Feed。这就是下面的代码所执行的操作。</p>
</div>
<div class="paragraph">
<p>请通过执行以下步骤来创建此类：</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在  <code>org.myorg.feedreader</code>  包中创建  <code>RssFolderChildren.java</code> 。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>将缺省类替换为以下代码：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class RssFolderChildren extends FilterNode.Children {

    RssFolderChildren(Node rssFolderNode) {
        super(rssFolderNode);
    }

    @Override
    protected Node[] createNodes(Node key) {
        Node n = key;

        *//If we can find a data folder, then we create an RssNode,
        //if not, we look for the feed and then create a OneFeedNode:*
        try {
            if (n.getLookup().lookup(DataFolder.class) != null) {
                return new Node[]{new RssNode(n)};
            } else {
                Feed feed = getFeed(n);
                if (feed != null) {
                    return new Node[]{
                        new OneFeedNode(n, feed.getSyndFeed())
                    };
                } else {
                    // best effort
                    return new Node[]{new FilterNode(n)};
                }
            }
        } catch (IOException ioe) {
            Exceptions.printStackTrace(ioe);
        } catch (IntrospectionException exc) {
            Exceptions.printStackTrace(exc);
        }
        // Some other type of Node (gotta do something)
        return new Node[]{new FilterNode(n)};
    }

    /** Looking up a feed */
    private static Feed getFeed(Node node) {
        InstanceCookie ck = node.getCookie(InstanceCookie.class);
        if (ck == null) {
            throw new IllegalStateException("Bogus file in feeds folder: " + node.getLookup().lookup(FileObject.class));
        }
        try {
            return (Feed) ck.instanceCreate();
        } catch (ClassNotFoundException ex) {
            Exceptions.printStackTrace(ex);
        } catch (IOException ex) {
            Exceptions.printStackTrace(ex);
        }
        return null;
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>此类中存在几个红色下划线标记，这是因为尚未创建  <code>OneFeedNode</code>  类。</p>
</div>
</div>
<div class="sect2">
<h3 id="_创建_onefeednode_类">创建 OneFeedNode 类</h3>
<div class="paragraph">
<p>在本小节中，我们将考虑文章节点的容器，下面显示了 "NetBeans Highlights" 节点的容器：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-actions2.png" alt="60 actions2">
</div>
</div>
<div class="paragraph">
<p>如上所示，其中每个节点都有一个从 Feed 检索的显示名称、一个图标以及一个 "Delete" 菜单项。</p>
</div>
<div class="paragraph">
<p>请通过执行以下步骤来创建此类：</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在  <code>org.myorg.feedreader</code>  包中创建  <code>OneFeedNode.java</code> 。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>将缺省类替换为以下代码：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class OneFeedNode extends FilterNode {

    OneFeedNode(Node feedFileNode, SyndFeed feed) throws IOException, IntrospectionException {
        super(feedFileNode,
                new FeedChildren(feed),
                new ProxyLookup(
                new Lookup[]{Lookups.fixed(
                        new Object[]{feed}),
                        feedFileNode.getLookup()
        }));
    }

    @Override
    public String getDisplayName() {
        SyndFeed feed = getLookup().lookup(SyndFeed.class);
        return feed.getTitle();
    }

    @Override
    public Image getIcon(int type) {
        return Utilities.loadImage("org/myorg/feedreader/rss16.gif");
    }

    @Override
    public Image getOpenedIcon(int type) {
        return getIcon(0);
    }

    @Override
    public Action[] getActions(boolean context) {
        return new Action[]{SystemAction.get(DeleteAction.class)};
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>此类中存在几个红色下划线标记，这是因为尚未创建  <code>FeedChildren</code>  类。</p>
</div>
</div>
<div class="sect2">
<h3 id="_创建_feedchildren_类">创建 FeedChildren 类</h3>
<div class="paragraph">
<p>在本小节中，我们将添加用于为 Feed 所提供的每篇文章提供节点的代码。</p>
</div>
<div class="paragraph">
<p>请通过执行以下步骤来创建此类：</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在  <code>org.myorg.feedreader</code>  包中创建  <code>FeedChildren.java</code> 。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>将缺省类替换为以下代码：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class FeedChildren extends Children.Keys {

    private final SyndFeed feed;

    public FeedChildren(SyndFeed feed) {
        this.feed = feed;
    }

    @SuppressWarnings(value = "unchecked")
    @Override
    protected void addNotify() {
        setKeys(feed.getEntries());
    }

    public Node[] createNodes(Object key) {

        *//Return new article-level nodes:*
        try {
            return new Node[]{
                new EntryBeanNode((SyndEntry) key)
            };

        } catch (final IntrospectionException ex) {
            Exceptions.printStackTrace(ex);
            *//Should never happen, no reason for it to fail above:*
            return new Node[]{new AbstractNode(Children.LEAF) {
                @Override
                public String getHtmlDisplayName() {
                    return "" + ex.getMessage() + "";
                }
            }};
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>此类中存在几个红色下划线标记，这是因为尚未创建  <code>EntryBeanNode</code>  类。</p>
</div>
</div>
<div class="sect2">
<h3 id="_创建_entrybeannode_类">创建 EntryBeanNode 类</h3>
<div class="paragraph">
<p>最后，我们将处理最低层的节点，即表示由 Feed 所提供的文章的节点。</p>
</div>
<div class="paragraph">
<p>要创建此类，请执行以下步骤：</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在  <code>org.myorg.feedreader</code>  包中创建  <code>EntryBeanNode.java</code> 。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>将缺省类替换为以下代码：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class EntryBeanNode extends FilterNode {

    private SyndEntry entry;

    @SuppressWarnings(value = "unchecked")
    public EntryBeanNode(SyndEntry entry) throws IntrospectionException {
        super(new BeanNode(entry), Children.LEAF,
                Lookups.fixed(new Object[]{
            entry,
            new EntryOpenCookie(entry)
        }));
        this.entry = entry;
    }

    */** Using HtmlDisplayName ensures any HTML in RSS entry titles are
     * /**properly handled, escaped, entities resolved, etc. */*
    @Override
    public String getHtmlDisplayName() {
        return entry.getTitle();
    }

    */** Making a tooltip out of the entry's description */*
    @Override
    public String getShortDescription() {
        return entry.getDescription().getValue();
    }

    */** Providing the Open action on a feed entry */*
    @Override
    public Action[] getActions(boolean popup) {
        return new Action[]{SystemAction.get(OpenAction.class)};
    }

    @Override
    public Action getPreferredAction() {
        return (SystemAction) getActions(false) [0];
    }

    */** Specifying what should happen when the user invokes the Open action */*
    private static class EntryOpenCookie implements OpenCookie {

        private final SyndEntry entry;

        EntryOpenCookie(SyndEntry entry) {
            this.entry = entry;
        }

        public void open() {
            try {
                URLDisplayer.getDefault().showURL(new URL(entry.getUri()));
            } catch (MalformedURLException mue) {
                Exceptions.printStackTrace(mue);
            }
        }

    }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_创建_add_folder_菜单项">创建 "Add Folder" 菜单项</h3>
<div class="paragraph">
<p>在本小节中，我们将创建用于添加文件夹的菜单项（已在前面声明）。</p>
</div>
<div class="paragraph">
<p>要创建此类，请执行以下步骤：</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在  <code>org.myorg.feedreader</code>  包中创建  <code>AddFolderAction.java</code> 。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>将缺省类替换为以下代码：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class AddFolderAction extends AbstractAction {

    private DataFolder folder;

    public AddFolderAction(DataFolder df) {
        folder = df;
        putValue(Action.NAME, NbBundle.getMessage(RssNode.class, "FN_addfolderbutton"));
    }

    public void actionPerformed(ActionEvent ae) {
        NotifyDescriptor.InputLine nd =
                new NotifyDescriptor.InputLine(
                NbBundle.getMessage(RssNode.class, "FN_askfolder_msg"),
                NbBundle.getMessage(RssNode.class, "FN_askfolder_title"),
                NotifyDescriptor.OK_CANCEL_OPTION, NotifyDescriptor.PLAIN_MESSAGE);
        Object result = DialogDisplayer.getDefault().notify(nd);
        if (result.equals(NotifyDescriptor.OK_OPTION)) {
            final String folderString = nd.getInputText();
            try {
                DataFolder.create(folder, folderString);
            } catch (IOException ex) {
                Exceptions.printStackTrace(ex);
            }
        }
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_创建_add_rss_菜单项">创建 "Add RSS" 菜单项</h3>
<div class="paragraph">
<p>在本小节中，我们将创建用于添加新 Feed 的菜单项。</p>
</div>
<div class="paragraph">
<p>要创建此类，请执行以下步骤：</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在  <code>org.myorg.feedreader</code>  包中创建  <code>AddRssAction.java</code> 。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>将缺省类替换为以下代码：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class AddRssAction extends AbstractAction {

    private DataFolder folder;

    public AddRssAction(DataFolder df) {
        folder = df;
        putValue(Action.NAME, NbBundle.getMessage(RssNode.class, "FN_addbutton"));
    }

    public void actionPerformed(ActionEvent ae) {

        NotifyDescriptor.InputLine nd = new NotifyDescriptor.InputLine(
                NbBundle.getMessage(RssNode.class, "FN_askurl_msg"),
                NbBundle.getMessage(RssNode.class, "FN_askurl_title"),
                NotifyDescriptor.OK_CANCEL_OPTION,
                NotifyDescriptor.PLAIN_MESSAGE);

        Object result = DialogDisplayer.getDefault().notify(nd);

        if (result.equals(NotifyDescriptor.OK_OPTION)) {
            String urlString = nd.getInputText();
            URL url;
            try {
                url = new URL(urlString);
            } catch (MalformedURLException e) {
                String message = NbBundle.getMessage(RssNode.class, "FN_askurl_err", urlString);
                Exceptions.attachLocalizedMessage(e, message);
                Exceptions.printStackTrace(e);
                return;
            }
            try {
                checkConnection(url);
            } catch (IOException e) {
                String message = NbBundle.getMessage(RssNode.class, "FN_cannotConnect_err", urlString);
                Exceptions.attachLocalizedMessage(e, message);
                Exceptions.printStackTrace(e);
                return;
            }
            Feed f = new Feed(url);
            FileObject fld = folder.getPrimaryFile();
            String baseName = "RssFeed";
            int ix = 1;
            while (fld.getFileObject(baseName + ix, "ser") != null) {
                ix++;
            }
            try {
                FileObject writeTo = fld.createData(baseName + ix, "ser");
                FileLock lock = writeTo.lock();
                try {
                    ObjectOutputStream str = new ObjectOutputStream(writeTo.getOutputStream(lock));
                    try {
                        str.writeObject(f);
                    } finally {
                        str.close();
                    }
                } finally {
                    lock.releaseLock();
                }
            } catch (IOException ioe) {
                Exceptions.printStackTrace(ioe);
            }
    }

    private static void checkConnection(final URL url) throws IOException {
        InputStream is = url.openStream();
        is.close();
    }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_对_rssnode_类进行本地化">对 RssNode 类进行本地化</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>打开  <code>FeedReader</code>  模块的  <code>Bundle.properties</code>  文件。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>添加以下键值对：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">FN_title=RSS/Atom Feeds
FN_addbutton=Add
FN_askurl_title=New Feed
FN_askurl_msg=Enter the URL of an RSS/Atom Feed
FN_askurl_err=Invalid URL: {0}|
FN_addfolderbutton=Add Folder
FN_askfolder_msg=Enter the folder name
FN_askfolder_title=New Folder</code></pre>
</div>
</div>
<div class="paragraph">
<p>下面是有关新键值对的说明，它们用于对  <code>RssNode.java</code>  中定义的字符串进行本地化：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>*FN_title。*对 "Feed Window" 中顶层节点的标签进行本地化。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>以下键值对用于对添加 Feed 的用户界面进行本地化：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>*FN_addbutton。*对 "Add" 菜单项（出现在顶层节点的弹出式菜单中）的标签进行本地化。</p>
</li>
<li>
<p>*FN_askurl_title。*对 "New Feed" 对话框的标题进行本地化。</p>
</li>
<li>
<p>*FN_askurl_msg。*对 "New Feed" 对话框中出现的消息进行本地化。</p>
</li>
<li>
<p>*FN_askurl_err。*对由于 URL 无效而显示的错误字符串进行本地化。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>以下键值对用于对添加文件夹的用户界面进行本地化：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>*FN_addfolderbutton。*对 "Add Folder" 菜单项（出现在顶层节点的弹出式菜单中）的标签进行本地化。</p>
</li>
<li>
<p>*FN_askfolder_msg。*对 "Add Folder" 对话框中出现的消息进行本地化。</p>
</li>
<li>
<p>*FN_askfolder_title。*对 "Add Folder" 对话框的标题进行本地化。</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_标记应用程序">标记应用程序</h2>
<div class="sectionbody">
<div class="paragraph">
<p>现在，您已进展到开发周期的最后阶段，在即将完成该应用程序的开发时，您需要考虑以下问题：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>应用程序可执行文件的名称应该是什么？</p>
</li>
<li>
<p>用户在启动应用程序时应该看到什么？是否需要进度栏？是否需要闪屏？是否两者都需要？</p>
</li>
<li>
<p>当应用程序启动时，应该在标题栏中显示什么？</p>
</li>
<li>
<p>是否需要 NetBeans 平台缺省提供的所有菜单和工具栏按钮？</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>这些问题都与标记应用程序（即对构建于 NetBeans 平台之上的应用程序进行个性化定制的活动）有关。在模块套件项目的“项目属性”对话框中，IDE 提供了一个用于帮助您进行标记的面板。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>右键单击 "feedreader-suite" 项目节点（而不是 "FeedReader" 项目节点），然后选择“属性”。在“项目属性”对话框中，单击“生成”。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>在“生成”面板的“标记名称”中键入  <code>feedreader</code> 。在“应用程序标题”中键入  <code>Feed Reader Application</code> 。“标记名称”中的值用于设置可执行文件的名称，而“应用程序标题”中的值用于设置应用程序的标题栏。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>单击“浏览”找到  <code>rss16.gif</code>  图标 (
image::images/rss16.gif[])。该图标将显示在“帮助”&gt;“关于”对话框中。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>您现在应该看到如下所示的屏幕：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-brand1.png" alt="60 brand1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>在“闪屏”面板中，单击“浏览”找到  <code>splash.gif</code> 。（可选）更改进度栏的颜色和文本大小。如果不需要进度栏，请取消选中“启用”。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>您现在应该看到如下所示的屏幕：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/60-brand2.png" alt="60 brand2">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>单击“确定”。在  <code>FeedReader Application</code>  项目中创建  <code>branding</code>  文件夹。您可以在“文件”窗口 (Ctrl-2) 中看到它。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>在“文件”窗口中，展开 "FeedReader Application" 项目节点。然后，继续展开其节点，直到您找到以下节点： <code>branding/modules/org-netbeans-core-window.jar/org/netbeans/core/windows</code></p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>右键单击该节点，选择“新建”&gt;“其他”，并在“其他”类别中选择“文件夹”。单击“下一步”，然后将文件夹命名为  <code>resources</code> 。单击“完成”。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>右键单击新的 "resources" 节点，选择“新建”&gt;“其他”，并在 "XML" 类别中选择“XML 文档”。单击“下一步”。将文件命名为  <code>layer</code> 。单击“下一步”，然后单击“完成”。将新的  <code>layer.xml</code>  文件的内容替换为以下内容：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE filesystem PUBLIC "-//NetBeans//DTD Filesystem 1.1//EN" "https://netbeans.org/dtds/filesystem-1_1.dtd"&gt;
&lt;!--
This is a `branding' layer.  It gets merged with the layer file it's branding.
In this case, it's just hiding menu items and toolbars we don't want.
--&gt;
&lt;filesystem&gt;

	&lt;!-- hide unused toolbars --&gt;
	&lt;folder name="Toolbars"&gt;
		&lt;folder name="File_hidden"/&gt;
		&lt;folder name="Edit_hidden"/&gt;
	&lt;/folder&gt;

	&lt;folder name="Menu"&gt;
		&lt;folder name="File"&gt;
			&lt;file name="org-openide-actions-SaveAction.instance_hidden"/&gt;
			&lt;file name="org-openide-actions-SaveAllAction.instance_hidden"/&gt;
			&lt;file name="org-netbeans-core-actions-RefreshAllFilesystemsAction.instance_hidden"/&gt;
			&lt;file name="org-openide-actions-PageSetupAction.instance_hidden"/&gt;
			&lt;file name="org-openide-actions-PrintAction.instance_hidden"/&gt;
		&lt;/folder&gt;
		&lt;folder name="Edit_hidden"/&gt;
		&lt;folder name="Tools_hidden"/&gt;
	&lt;/folder&gt;

&lt;/filesystem&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_分发应用程序">分发应用程序</h2>
<div class="sectionbody">
<div class="paragraph">
<p>IDE 使用 Ant 生成脚本来创建应用程序的分发。此生成脚本是在创建项目时创建的。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在“项目”窗口中，右键单击 "FeedReader Application" 项目节点，然后选择“生成 ZIP 分发”。“输出”窗口将显示 ZIP 分发的创建位置。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>在文件系统中，在项目目录的  <code>dist</code>  文件夹中找到  <code>feedreader.zip</code>  分发。对其进行解压缩。启动位于  <code>bin</code>  文件夹中的应用程序。在启动过程中，将显示闪屏。启动应用程序后，转至“帮助”&gt;“关于”对话框，您会看到在<a href="#branding">标记应用程序</a>一节中指定的图标和闪屏。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>当 Feed Reader 应用程序启动并运行时，它将显示 RSS/Atom Feed 窗口，其中包含一个名为 "RSS/Atom Feeds" 的节点。</p>
</div>
<div class="paragraph">
<p>恭喜！您已学完了 FeedReader 教程。</p>
</div>
<div class="paragraph">
<p><a href="http://netbeans.apache.org/community/mailing-lists.html">请将您的意见和建议发送给我们</a></p>
</div>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/60/nbm-feedreader_zh_CN.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1><a href="/about/index.html">About</a></h1>
                <ul>
                    <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb110/nb110.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="/plugins/index.html">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2019 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
