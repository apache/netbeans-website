
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Tutorial Visual Library do NetBeans</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Tutorial Visual Library do NetBeans - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, Tutorial Visual Library do NetBeans">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Tutorial Visual Library do NetBeans</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/60/nbm-visual_library_pt_BR.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_configurando_o_módulo">Configurando o módulo</a></li>
<li><a href="#_criando_a_cena">Criando a cena</a></li>
<li><a href="#_criando_uma_paleta_de_componentes_da_cena">Criando uma paleta de componentes da cena</a></li>
<li><a href="#_adicionando_um_layerwidget">Adicionando um LayerWidget</a></li>
<li><a href="#_adicionando_um_iconnodewidget_por_meio_da_funcionalidade_arrastar_e_soltar">Adicionando um IconNodeWidget por meio da funcionalidade arrastar e soltar</a></li>
<li><a href="#_adicionando_funcionalidade_à_cena">Adicionando funcionalidade à cena</a></li>
<li><a href="#_adicionando_funcionalidade_ao_iconnodewidget">Adicionando funcionalidade ao IconNodeWidget</a></li>
<li><a href="#_próximas_etapas">Próximas etapas</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Neste tutorial, você aprenderá como usar os recursos principais fornecidos pela API Visual Library do NetBeans. A API Visual Library é uma API de visualização, útil no contexto de, por exemplo, modelagem e gráficos.</p>
</div>
<div class="paragraph">
<p>Opcionalmente, para fins de solução de problemas, você pode  <a href="http://plugins.netbeans.org/PluginPortal/faces/PluginDetailPage.jsp?pluginid=2701">baixar a amostra completa</a> e inspecionar os códigos-fonte.</p>
</div>
<div class="paragraph">
<p>Além disso, você usará 3 ícones no tutorial. Você pode clicar com o botão direito do mouse neles e salvá-los localmente, em seguida, copie-os para a localização do projeto do módulo, depois de criar o projeto do módulo mias tarde neste tutorial. Aqui estão os 3 ícones:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/vislib_image1.png" alt="vislib image1">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/vislib_image2.png" alt="vislib image2">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/vislib_image3.png" alt="vislib image3">
</div>
</div>
<div class="paragraph">
<p>Todas as informações que você precisa saber para trabalhar com a API do Visual Library são coletadas nestes dois locais:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://netbeans.apache.org/graph/">Página do projeto do Visual Library</a></p>
</li>
<li>
<p><a href="https://netbeans.apache.org/graph/documentation.html">Visual Library 2.0 - Documentação</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Além disso, consulte o  <a href="http://www.javalobby.org/eps/netbeans_visual_library/">Screencast sobre o Visual Library de Roman Strobl</a> em Javalobby.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configurando_o_módulo">Configurando o módulo</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nesta seção, usamos assistentes para criar um projeto do módulo e um componente de janela personalizado.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Escolha Arquivo &gt; Novo projeto. No assistente para Novo projeto. escolha Módulos do NetBeans em Categorias e Módulos em Projetos. Clique em Próximo. Digite  <code>ShapeSample</code>  em Nome do projeto e defina Localização do projeto como uma pasta apropriada no disco. Se não estiverem selecionadas, selecione Módulo independente e Definir como projeto principal. Clique em Próximo.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Digite  <code>org.netbeans.shapesample</code>  em Nome de base de código e  <code>Amostra de forma</code>  em Nome de exibição do módulo. Clique em Terminar.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Clique com o botão direito do mouse no projeto, escolha Propriedades, clique em Bibliotecas na caixa de diálogo Propriedades do projeto e declare uma dependência nas seguintes APIs:</p>
<div class="ulist">
<ul>
<li>
<p>API do Visual Library</p>
</li>
<li>
<p>API de utilitários</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Clique em OK.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Clique com o botão direito do mouse no projeto do módulo, escolha Novo &gt; Arquivo/pasta e escolha Componente da janela na categoria Desenvolvimento de módulo do NetBeans. Clique em Próximo. Escolha  <code>editor</code>  na lista suspensa e selecione Abrir ao iniciar aplicativo. Clique em Próximo.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Digite  <code>Shape</code>  no Prefixo do nome da classe. Opcionalmente, adicione um ícone com uma dimensão de 16x16 pixels. Clique em Terminar.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Vários arquivos são gerados, um deles é  <code>ShapeTopComponent</code> . Abra este arquivo no modo Design. O seguinte deverá ser exibido:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/vislib_shapetopcomponent.png" alt="vislib shapetopcomponent">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Clique com o botão direito do mouse em TopComponent no modo Design, escolha Definir layout e selecione BorderLayout.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_criando_a_cena">Criando a cena</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A programação com a API do Visual Library é semelhante à programação em Swing. Você constrói e modifica uma árvore de elementos visuais que são chamados de "widgets". A raiz da árvore é representada por uma classe Cena que mantém todos os dados visuais da cena. A cena é um widget. Você tem que criar uma visualização de cena, que é um JComponent. Em seguida, você deve adicionar o JComponent a um JScrollPane.</p>
</div>
<div class="paragraph">
<p>Nesta seção, adicionamos um JScrollPane ao nosso TopComponent. Em seguida, crie uma nova cena. Em seguida, passamos a visualização Cena para o TopComponent, de forma que ele possa ser exibido no JScrollPane do TopComponent. Em seguida, instalamos o projeto do módulo e exibimos nossa primeira cena.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Use a paleta (Ctrl-Shift-8) para soltar um  <code>JScrollPane</code>  no TopComponent. No Inspetor, clique com o botão direito do mouse em  <code>JScrollPane</code> , escolha Alterar nome da variável e digite  <code>shapePane</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>No pacote  <code>org.netbeans.shapesample</code> , crie uma classe Java chamada  <code>GraphSceneImpl</code> . Deixe a classe estender  <code>GraphScene</code> .</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Um sublinhado de erro vermelho e uma lâmpada aparecem. Deixe o IDE gerar a instrução de importação.</p>
</div>
<div class="paragraph">
<p>Um sublinhado de erro vermelho e uma lâmpada aparecem novamente. Deixe o IDE gerar os métodos abstratos da classe.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Crie uma implementação fictícia da classe, adicionando identificadores significativos e configurando  <code>leftnull</code>  para ser retornado quando necessário, de forma que todos os requisitos da classe sejam atendidos:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class GraphSceneImpl extends GraphScene {

    public GraphSceneImpl() {
    }

    protected Widget attachNodeWidget(Object node) {
        return null;
    }

    protected Widget attachEdgeWidget(Object edge) {
        return null;
    }

    protected void attachEdgeSourceAnchor(Object edge, Object oldSourceNode, Object newSourceNode) {

    }

    protected void attachEdgeTargetAnchor(Object edge, Object oldTargetNode, Object newTargetNode) {

    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Agora use o construtor do TopComponent para manter uma instância da classe  <code>GraphSceneImpl</code> . Para fazer isso, adicione o seguinte no fim do construtor da classe  <code>ShapeTopComponent</code> :</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">GraphSceneImpl scene = new GraphSceneImpl();
myView = scene.createView();

shapePane.setViewportView(myView);
add(scene.createSatelliteView(), BorderLayout.WEST);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Observe que estamos criando duas visualizações. A primeira será uma visualização grande para ver seus gráficos ou modelos, etc. A segunda é uma visualização satélite, que colocamos no WEST (ou seja, o lado esquerdo) do TopComponent. Isso permitirá que o usuário navegue rapidamente pela visualização e oferece uma visão geral da cena inteira.</p>
</div>
<div class="paragraph">
<p>Declare a visualização JComponent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private JComponent myView;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Quando o IDE é reinicializado, não é necessário persistir o TopComponent. Na verdade, fazer isso causará um erro nesse caso. Portanto, altere PERSISTENCE_ALWAYS para PERSISTENCE_NEVER, como mostrado abaixo:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public int getPersistenceType() {
   return TopComponent.PERSISTENCE_NEVER;
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Clique com o botão direito do mouse no nó do projeto e escolha "Instalar/recarregar no IDE de desenvolvimento". Se uma mensagem de aviso aparecer, clique em OK.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Quando o módulo é instalado, observe o menu Janela e você encontrará um nome item de menu chamado "Forma", no início da lista de itens de menu. Escolha-o e você verá o início da sua implementação da API do Visual Library:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/vislib_firstscene.png" alt="vislib firstscene">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_criando_uma_paleta_de_componentes_da_cena">Criando uma paleta de componentes da cena</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Para fazer algo útil com a API do Visual Library, implementaremos a  <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-spi-palette/overview-summary.html">API da paleta</a> de forma que terminemos com uma paleta de componentes contendo as formas mostradas no início deste tutorial. Mais tarde, adicionaremos a funcionalidade arrastar e soltar da API do Visual Library de forma que possamos arrastar e soltar as formas na cena. Depois disso, podermos enriquecer a cena com recursos adicionais, tais como a habilidade de colocar zoom e panorâmica na cena.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Já que o foco deste tutorial é a API do Visual Library, e não a API da paleta, não perderemos tempo explicando como a API da paleta funciona. Existem muitos tutoriais sobre esse assunto ( <a href="https://netbeans.apache.org/kb/docs/platform.html">aqui</a>). Portanto, você pode simplesmente copiar e colar os arquivos seguintes em um novo pacote chamado  <code>org.netbeans.shapesample.palette</code> :</p>
<div class="ulist">
<ul>
<li>
<p><a href="images/vislib_Category.java">Category.java</a></p>
</li>
<li>
<p><a href="images/vislib_CategoryChildren.java">CategoryChildren.java</a></p>
</li>
<li>
<p><a href="images/vislib_CategoryNode.java">CategoryNode.java</a></p>
</li>
<li>
<p><a href="images/vislib_PaletteSupport.java">PaletteSupport.java</a></p>
</li>
<li>
<p><a href="images/vislib_Shape.java">Shape.java</a></p>
</li>
<li>
<p><a href="images/vislib_ShapeChildren.java">ShapeChildren.java</a></p>
</li>
<li>
<p><a href="images/vislib_ShapeNode.java">ShapeNode.java</a></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Da mesma forma explicada na etapa 3 da seção chamada "Introdução", anteriormente neste tutorial, adicionamos dependências sobre a API de ações, a API de nós e a API de paleta comum.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Em seguida, adicionamos a paleta à pesquisa do TopComponent, adicionando esta linha no fim do construtor do TopComponent:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">associateLookup( Lookups.fixed( new Object[] { PaletteSupport.createPalette() } ) );</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>O IDE solicitará que você insira instruções de importação para  <code>org.openide.util.lookup.Lookups</code>  e  <code>org.netbeans.shapesample.palette.PaletteSupport</code> . Aceite os avisos e permita que o IDE gere as instruções de importação.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Coloque as imagens encontradas no início deste tutorial no pacote  <code>org.netbeans.shapesample.palette</code> .</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A janela Projetos agora deve ter esta aparência:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/vislib_proj-window.png" alt="vislib proj window">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Instale o módulo novamente. Quando você abre o TopComponent no item de menu, a nova paleta de componentes e mostrada à direita da cena:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/vislib_firstpalette.png" alt="vislib firstpalette">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adicionando_um_layerwidget">Adicionando um LayerWidget</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Um  <a href="https://netbeans.apache.org/graph/documentation.html#LayerWidget">LayerWidget</a> representa um painel de vidro, semelhante a JGlassPane em Swing. Ele é transparente por padrão. Portanto, antes de prosseguir, adicionaremos um LayerWidget à cena, portanto, temos algum lugar para colocar os widgets visíveis que arrastar e soltar na cena.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Na classe  <code>GraphSceneImpl</code> , declare a LayerWidget:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private LayerWidget mainLayer;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>No construtor da classe  <code>GraphSceneImpl</code> , adicione a LayerWidget como uma filha da cena:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">mainLayer = new LayerWidget (this);
addChild (mainLayer);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Agora, quando arrastamos e soltamos itens da paleta como widgets na cena, os adicionaremos como filhos de LayerWidget. Como LayerWidgets são transparentes por padrão, você poderia ter vários LayerWidgets transparentemente um em cima do outro, de forma que, por exemplo, possa adicionar uma imagem de segundo plano à cena.</p>
</div>
<div class="paragraph">
<p>Para obter detalhes, consulte  <a href="https://netbeans.apache.org/graph/documentation.html#LayerWidget">LayerWidget</a> no Javadoc.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adicionando_um_iconnodewidget_por_meio_da_funcionalidade_arrastar_e_soltar">Adicionando um IconNodeWidget por meio da funcionalidade arrastar e soltar</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Anteriormente, usamos o construtor da classe  <code>GraphSceneImpl</code>  para passar uma cena para o JScrollPane do TopComponent. Até aqui, a cena existe mas não tem comportamento. O comportamento é adicionado através de ações. A ação que examinaremos nesta seção se chama  <code> <a href="https://netbeans.apache.org/graph/documentation.html#AcceptAction">AcceptAction</a></code> . Essa ação ativa a funcionalidade arrastar e soltar. A funcionalidade arrastar e soltar poderia ser aplicada a um widget, mas aqui a aplicamos à cena em si.</p>
</div>
<div class="paragraph">
<p>Usamos  <code>createAcceptAction</code>  para especificar o que deve acontecer quando um item da paleta é arrastado sobre a cena. Dois métodos são envolvidos aqui. A primeira,  <code>isAcceptable()</code> , é usada para determinar se o item pode ser aceito na cena. Aqui você pode testar o item, usando a transferência. Você também pode definir a imagem arrastada, que é tudo o que fazemos na implementação abaixo. Se  <code>true</code>  for retornado, o método  <code>accept</code>  é chamado. Aqui obtemos a imagem da transferência, usando o mesmo método de ajuda anterior. Em seguida, chamamos o método  <code>addNode</code> , instanciando um novo  <a href="https://netbeans.apache.org/graph/documentation.html#IconNodeWidget">IconNodeWidget</a> e passando a imagem recuperada da transferência.</p>
</div>
<div class="paragraph">
<p>Todo código desta seção é inter-relacionado, e você receberá sublinhados de erro vermelhos em seu código até que todos os métodos abaixo tenham sido adicionados, mas tentaremos adicionar tudo de uma forma lógica!</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Primeiro, adicione  <code>createAcceptAction</code> , com seus dois métodos, ao construtor da classe  <code>GraphSceneImpl</code> :</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">getActions().addAction(ActionFactory.createAcceptAction(new AcceptProvider() {

    public ConnectorState isAcceptable(Widget widget, Point point, Transferable transferable) {
        Image dragImage = getImageFromTransferable(transferable);
        JComponent view = getView();
        Graphics2D g2 = (Graphics2D) view.getGraphics();
        Rectangle visRect = view.getVisibleRect();
        view.paintImmediately(visRect.x, visRect.y, visRect.width, visRect.height);
        g2.drawImage(dragImage,
                AffineTransform.getTranslateInstance(point.getLocation().getX(),
                point.getLocation().getY()),
                null);
        return ConnectorState.ACCEPT;
    }

    public void accept(Widget widget, Point point, Transferable transferable) {
        Image image = getImageFromTransferable(transferable);
        Widget w = GraphSceneImpl.this.addNode(new MyNode(image));
        w.setPreferredLocation(widget.convertLocalToScene(point));
    }

}));</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Observação:</strong> depois de adicionar o código acima, alguns sublinhados vermelhos permanecerão, indique que há erros. Esses erros acontecem porque o código acima se refere a um método e a uma classe que ainda não foram criados. Você irá criá-los nas próximas etapas.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Em seguida, na classe  <code>GraphSceneImpl</code> , adicione um método de ajuda para recuperar a imagem da transferência:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private Image getImageFromTransferable(Transferable transferable) {
    Object o = null;
    try {
        o = transferable.getTransferData(DataFlavor.imageFlavor);
    } catch (IOException ex) {
        ex.printStackTrace();
    } catch (UnsupportedFlavorException ex) {
        ex.printStackTrace();
    }
    return o instanceof Image ? (Imagem) o : Utilities.loadImage("org/netbeans/shapesample/palette/shape1.png");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Observe que você pode definir qualquer tipo de imagem quando uma imagem não é retornada com êxito desse método de ajuda. Por enquanto, usaremos a imagem " <code>shape1.png</code> " em vez disso.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Crie uma nova classe chamada  <code>MyNode</code> . Essa classe representa um nó em um modelo orientado a gráfico. Ela não pode ser uma imagem diretamente, já que cada nó deve ser único (verificado pelo método "equals") no modelo. Se você quisesse usar as imagens diretamente, então, poderia ter somente 3 nós (um para cada imagem) na cena. Usando a classe MyNode, você pode ter vários nós e cada nó pode ter sua própria instância de imagem ou uma compartilhada.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class MyNode {

    private Image image;

    public MyNode(Image image) {
        this.image = image;
    }

    public Image getImage() {
        return image;
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Altere a assinatura da classe  <code>GraphSceneImpl</code>  para o seguinte, de forma que o nó seja recebido pela classe de implementação do Visual Library:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">extends GraphScene&lt;MyNode, String&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Você deve deixar o IDE gerar novos stubs para os métodos abstratos.</p>
</div>
<div class="paragraph">
<p>Além disso, já que agora estamos usando genéricos, certifique-se de que o IDE esteja usando o JDK 1.5. Se você não tem certeza se o 1.6 está sendo usado, clique com o botão direito do mouse no projeto, escolha Propriedades e vá para a página Códigos-fonte. Altere a lista suspensa Nível do código-fonte para 1.5.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Finalmente, defina o novo widget na classe  <code>GraphSceneImpl</code> . Esse método é chamado automaticamente pelo método  <code>accept</code> . Use-o para definir o widget do Visual Library quando o item da paleta for solto.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">protected Widget attachNodeWidget(MyNode node) {
    IconNodeWidget widget = new IconNodeWidget(this);
    widget.setImage(node.getImage());
    widget.setLabel(Long.toString(node.hashCode()));
    widget.getActions().addAction(ActionFactory.createMoveAction());
    mainLayer.addChild(widget);
    return widget;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Observe que definimos a imagem recuperada do no. Também geramos um número aleatório para que tenhamos um rótulo. Por padrão, o widget existe mas não tem comportamento. Aqui, criamos uma ação de movimento, de forma que o widget possa ser movido na cena. Finalmente, antes de retornar o widget para a cena, o adicionamos como um filho ao LayerWidget que criamos na seção anterior.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Recarregue o módulo e abra-o na janela Forma novamente.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Agora você pode arrastar e saltar itens da paleta. Conforme você arrastar um item sobre a cena, você verá a imagem arrastada. Quando você solta um item, ele se torna um widget e fica visível na cena, assim como na visualização satélite, como você pode ver aqui:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/vislib_finishedscene.png" alt="vislib finishedscene">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adicionando_funcionalidade_à_cena">Adicionando funcionalidade à cena</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Na cena anterior, adicionamos  <code> <a href="https://netbeans.apache.org/graph/documentation.html#AcceptAction">AcceptAction</a></code>  à cena. Tínhamos que definir dois métodos para especificar se o item deve ser solto e para resolver o item. Nesta seção, usamos  <code> <a href="https://netbeans.apache.org/graph/documentation.html#ZoomAction">ZoomAction</a></code> , para adicionar a funcionalidade mais zoom/menos zoom à cena.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>No fim do construtor da classe  <code>GraphSceneImpl</code> , adicione esta linha:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">getActions().addAction(ActionFactory.createZoomAction());</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Instale o módulo novamente.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Enquanto mantém a tecla CTRL pressionada, use a roda do mouse para colocar mais zoom e menos zoom na cena:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/vislib_zoom.png" alt="vislib zoom">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/vislib_unzoom.png" alt="vislib unzoom">
</div>
</div>
<div class="paragraph">
<p><strong>Observação:</strong> As formas são renderizadas como imagens. SVG não tem suporte no momento.</p>
</div>
<div class="paragraph">
<p>Da mesma forma descrita acima, você pode adicionar a funcionalidade Panorâmica à cena, por meio desta linha:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">getActions().addAction(ActionFactory.createPanAction());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quando você adicionar essa linha, o usuário poderá manter a roda do mouse pressionada e rolar em qualquer direção na cena.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adicionando_funcionalidade_ao_iconnodewidget">Adicionando funcionalidade ao IconNodeWidget</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Anteriormente, adicionamos  <code> <a href="https://netbeans.apache.org/graph/documentation.html#MoveAction">MoveAction</a></code>  ao IconNodeWidget, para ativar o comportamento de movimentação do widget. Dessa forma, muitos outros comportamentos podem ser adicionados ao widget. Nesta seção, adicionamos  <code> <a href="https://netbeans.apache.org/graph/documentation.html#HoverAction">HoverAction</a></code> ,  <code> <a href="https://netbeans.apache.org/graph/documentation.html#SelectAction">SelectAction</a></code>  e  <code> <a href="https://netbeans.apache.org/graph/documentation.html#InplaceEditorAction">InplaceEditorAction</a></code> .</p>
</div>
<div class="paragraph">
<p>O  <code>InplaceEditorAction</code>  permitirá que o usuário altere o rótulo:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/vislib_editable.png" alt="vislib editable">
</div>
</div>
<div class="paragraph">
<p>O  <code>SelectAction</code>  irá alterar a cor do rótulo quando o widget for selecionado, enquanto o  <code>HoverAction</code>  irá alterar a cor do rótulo quando o mouse passar sobre o widget:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/vislib_selectable-hoverable.png" alt="vislib selectable hoverable">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Primeiro, defina a ação do editor que adicionaremos ao IconNodeWidget:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private WidgetAction editorAction = ActionFactory.createInplaceEditorAction(new LabelTextFieldEditor());</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Agora, defina o  <code>LabelTextFieldEditor</code> , da seguinte forma:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private class LabelTextFieldEditor implements TextFieldInplaceEditor {

    public boolean isEnabled(Widget widget) {
        return true;
    }

    public String getText(Widget widget) {
        return ((LabelWidget) widget).getLabel();
    }

    public void setText(Widget widget, String text) {
        ((LabelWidget) widget).setLabel(text);
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Finalmente, atribua a ação do editor ao IconNodeWidget, na mesma forma feita com a ação de movimento anteriormente:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">widget.getLabelWidget().getActions().addAction(editorAction);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Aqui, primeiro obtemos o LabelWidget do IconNodeWidget. Em seguida, adicionamos a ação do editor ao LabelWidget.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>O IDE solicita que você adicione várias instruções de importação. Em cada caso, aceite a sugestão oferecida pelo IDE.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Em seguida, no caso de  <code>SelectAction</code>  e  <code>HoverAction</code> , você não precisa fazer nada além de atribuir essas ações ao IconNodeWidget:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">widget.getActions().addAction(createSelectAction());
widget.getActions().addAction(createObjectHoverAction());</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Em seguida, você precisa pensar sobre a ordem das ações criadas. Para obter detalhes, consulte a seção  <a href="https://netbeans.apache.org/graph/documentation.html#OrderOfActions">Ordem de ações</a> na documentação. Depois de reordenar as ações, o  <code>attachNodeWidget</code>  deve ter a seguinte aparência:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">protected Widget attachNodeWidget(MyNode node) {
    IconNodeWidget widget = new IconNodeWidget(this);
    widget.setImage(node.getImage());
    widget.setLabel(Long.toString(node.hashCode()));

    //double-click, the event is consumed while double-clicking only:
    widget.getLabelWidget().getActions().addAction(editorAction);

    //single-click, the event is not consumed:
    widget.getActions().addAction(createSelectAction());

    //mouse-dragged, the event is consumed while mouse is dragged:
    widget.getActions().addAction(ActionFactory.createMoveAction());

    //mouse-over, the event is consumed while the mouse is over the widget:
    widget.getActions().addAction(createObjectHoverAction());

    mainLayer.addChild(widget);
    return widget;
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Instale e experimente o módulo novamente. Como mostrado no início desta seção, quando você passar o mouse sobre o rótulo do widget, ou quando você o selecionar, sua cor mudará. Além disso, quando você clica em um rótulo, é possível editar seu conteúdo.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Parabéns, você concluiu o Tutorial do Visual Library 2.0 para NetBeans 6.0.</p>
</div>
<div class="paragraph">
<p><a href="http://netbeans.apache.org/community/mailing-lists.html">Envie-nos seus comentários</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_próximas_etapas">Próximas etapas</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Para obter mais informações sobre como trabalhar com a API do Visual Library, consulte:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.javalobby.org/eps/netbeans_visual_library/">Screencast sobre o Visual Library de Roman Strobl</a> em Javalobby.</p>
</li>
<li>
<p><a href="https://netbeans.apache.org/graph/">Página do projeto do Visual Library</a></p>
</li>
<li>
<p><a href="https://netbeans.apache.org/graph/documentation.html">Visual Library 2.0 - Documentação</a></p>
</li>
</ul>
</div>
</div>
</div>
        
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/60/nbm-visual_library_pt_BR.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
