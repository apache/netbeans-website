
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans 文件模板模块教程</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans 文件模板模块教程 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, NetBeans 文件模板模块教程">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>

  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">NetBeans 文件模板模块教程</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/60/nbm-filetemplates_zh_CN.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_freemarker_简介">FreeMarker 简介</a></li>
<li><a href="#_创建模块项目">创建模块项目</a></li>
<li><a href="#_创建文件模板">创建文件模板</a>
<ul class="sectlevel2">
<li><a href="#_创建模板文件">创建模板文件</a></li>
<li><a href="#_创建描述文件">创建描述文件</a></li>
<li><a href="#_获取图标">获取图标</a></li>
</ul>
</li>
<li><a href="#_注册文件模板">注册文件模板</a></li>
<li><a href="#_生成和安装模块">生成和安装模块</a>
<ul class="sectlevel2">
<li><a href="#_安装_netbeans_模块">安装 NetBeans 模块</a></li>
<li><a href="#_使用_netbeans_模块">使用 NetBeans 模块</a></li>
<li><a href="#_创建可共享的模块二进制文件">创建可共享的模块二进制文件</a></li>
</ul>
</li>
<li><a href="#_提供其他变量">提供其他变量</a></li>
<li><a href="#_提供项目许可证">提供项目许可证</a></li>
<li><a href="#_后续步骤">后续步骤</a></li>
<li><a href="#_版本控制">版本控制</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>本教程将演示如何创建包含文件模板的模块。一旦用户在 IDE 中安装了此模块，他们便可在“新建文件”向导中使用其中包含的文件模板。获得包含文件模板的模块后，共享这些模板就变得很容易：您可以在 IDE 中创建一个可供他人使用的二进制文件，其他人可以通过插件管理器来安装此文件。</p>
</div>
<div class="paragraph">
<p>文件模板包含一个模板文件、一个 HTML 描述文件和一个图标。HTML 描述文件用于在“新建文件”向导中显示有关模板的信息。图标用于在“新建文件”向导中标识模板并将该模板与其他模板区分开。在本教程中，您将通过把现有文件模板的内容复制到一个空文件来创建一个新的文件模板。接下来，设置用于在“新建文件”向导中显示的描述文件以及一个区分图标，然后在 NetBeans 配置文件（即  <code>layer.xml</code>  文件）中注册模板、HTML 描述文件以及图标。</p>
</div>
<div class="paragraph">
<p>（可选）要解决疑难问题，可以 <a href="http://plugins.netbeans.org/PluginPortal/faces/PluginDetailPage.jsp?pluginid=3755">下载完整的样例</a>并查看其源代码。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_freemarker_简介">FreeMarker 简介</h2>
<div class="sectionbody">
<div class="paragraph">
<p>从 NetBeans IDE 6.0 开始，可以选择使用  <a href="http://freemarker.org/">FreeMarker</a> 模板语言来定义文件模板。某些与 IDE 捆绑在一起的模板就是以这种方式定义的。例如，Java 类模板的定义如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;#assign licenseFirst = "/*"&gt;
&lt;#assign licensePrefix = " * "&gt;
&lt;#assign licenseLast = " */"&gt;
&lt;#include "../Licenses/license-${project.license}.txt"&gt;

&lt;#if package?? &amp;amp;&amp;amp; package != ""&gt;
package ${package};

&lt;/#if&gt;
/**
 *
 * @author ${user}
 */
public class ${name} {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>从上面的模板中可以看出使用 FreeMarker 的好处，即：可以通过 if/elseif/else 等_指令_以及循环结构向模板中添加_逻辑_。有关 FreeMarker 模板语言的完整描述，请参见《 <a href="http://freemarker.org/docs/index.html">FreeMarker Manual</a>》（《FreeMarker 手册》），尤其是 " <a href="http://freemarker.org/docs/dgui_template_directives.html">Directives</a>"（指令）一章。在本教程中，您将了解把 FreeMarker 纳入文件模板所需的步骤以及其他一些内容。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_创建模块项目">创建模块项目</h2>
<div class="sectionbody">
<div class="paragraph">
<p>我们将首先按照新建模块项目向导进行操作，为新模块创建一个符合所有最低要求的源代码结构。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>选择“文件”&gt;“新建项目”(Ctrl-Shift-N)。在“类别”下选择“NetBeans 模块”。在“项目”下选择“模块”项目，然后单击“下一步”。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>在“名称和位置”面板的“项目名称”中键入  <code>AdditionalFileTemplates</code> 。将项目位置更改为计算机上的任意目录。将“独立模块”单选按钮和“设置为主项目”复选框保留为选中状态。单击“下一步”。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>在“基本模块配置”面板中，将“代码名称基”中的  <code>yourorghere</code>  替换为  <code>myorg</code> ，以使整个代码名称基为  <code>org.myorg.additionalfiletemplates</code> 。在缺省模块显示名称中添加空格，以将其更改为  <code>Additional File Templates</code> 。保留本地化包和 XML 层的位置，以将其存储在名为  <code>org/myorg/additionalfiletemplates</code>  的包中。单击“完成”。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>IDE 将创建  <code>Additional File Templates</code>  项目。此项目包含所有源代码和项目 meta 数据，例如项目的 Ant 生成脚本。此项目将会在 IDE 中打开。您可以在“项目”窗口 (Ctrl-1) 中查看其逻辑结构，在“文件”窗口 (Ctrl-2) 中查看其文件结构。例如，“项目”窗口现在应如下所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetemplates_initial-projects-window-60.png" alt="filetemplates initial projects window 60">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_创建文件模板">创建文件模板</h2>
<div class="sectionbody">
<div class="paragraph">
<p>文件模板包含一个模板文件、一个 HTML 描述文件和一个图标。创建新文件模板的一种简便方法是将现有文件模板的内容复制到一个空文件中。接下来，设置用于在“新建文件”向导中显示的描述文件以及一个区分图标，然后可以在  <code>layer.xml</code>  文件中注册模板。</p>
</div>
<div class="sect2">
<h3 id="_创建模板文件">创建模板文件</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>右键单击 "Additional File Templates" 节点，选择“新建”&gt;“其他”。在“新建文件”向导中的“类别”下选择“其他”，在“文件类型”下选择 "HTML"。单击“下一步”。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>在“文件名”中键入  <code>Description</code> 。单击“浏览”，然后找到  <code>src/org/myorg/additionalfiletemplates</code> 。单击“选择文件夹”。单击“完成”。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>将在源代码编辑器中打开一个名为  <code>HTML.html</code>  的新 HTML 文件，其中包含标准 HTML 文件的内容，如下所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;

&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;

  &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>根据需要更改此 HTML 文件。如果需要，可以添加下面的预定义变量：</p>
<div class="ulist">
<ul>
<li>
<p>${date} 按以下格式插入当前日期：Feb 16, 2008</p>
</li>
<li>
<p>${encoding} 插入缺省编码，例如：UTF-8</p>
</li>
<li>
<p>${name} 插入文件的名称。</p>
</li>
<li>
<p>${nameAndExt} 插入文件的名称及其扩展名。</p>
</li>
<li>
<p>${package} 插入文件所在的包的名称。</p>
</li>
<li>
<p>${time} 按以下格式插入当前时间：7:37:58 PM</p>
</li>
<li>
<p>${user} 插入用户名。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>*注意：*您的用户将能够在“工具”菜单下的“模板管理器”中设置这些变量的值。在该管理器中，用户可以一直滚动到最后面的“用户配置属性”。该节点内的  <code>user.properties</code>  文件可用于设置上面的值，以覆盖由系统提供的值。但是，他们通常不会这样做，因为上述变量的缺省值完全能够满足工作需要。</p>
</div>
<div class="paragraph">
<p>除了预定义的变量外，您还可以通过模块向用户提供其他变量。关于这一点，将在本教程的后面部分进行说明。FreeMarker 指令的完整列表也可用于向模板中添加逻辑：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>#assign</p>
</li>
<li>
<p>#else</p>
</li>
<li>
<p>#elseif</p>
</li>
<li>
<p>#end</p>
</li>
<li>
<p>#foreach</p>
</li>
<li>
<p>#if</p>
</li>
<li>
<p>#include</p>
</li>
<li>
<p>#list</p>
</li>
<li>
<p>#macro</p>
</li>
<li>
<p>#parse</p>
</li>
<li>
<p>#set</p>
</li>
<li>
<p>#stop</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>以 Java 类模板的定义为例：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;#assign licenseFirst = "/*"&gt;
&lt;#assign licensePrefix = " * "&gt;
&lt;#assign licenseLast = " */"&gt;
&lt;#include "../Licenses/license-${project.license}.txt"&gt;

&lt;#if package?? &amp;amp;&amp;amp; package != ""&gt;
package ${package};

&lt;/#if&gt;
/**
 *
 * @author ${user}
 */
public class ${name} {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>有关 #assign 指令的信息，请参见<a href="#license">提供项目许可证</a>。有关 FreeMarker 模板语言的完整描述，请参见《 <a href="http://freemarker.org/docs/index.html">FreeMarker Manual</a>》（《FreeMarker 手册》），尤其是 " <a href="http://freemarker.org/docs/dgui_template_directives.html">Directives</a>"（指令）一章。</p>
</div>
</div>
<div class="sect2">
<h3 id="_创建描述文件">创建描述文件</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>右键单击 "org.myorg.additionalfiletemplates" 节点，然后选择“新建”&gt;“其他”。在“类别”下选择“其他”。在“文件类型”下选择“HTML 文件”。单击“下一步”。在“文件名”中键入  <code>HTML</code> 。单击“浏览”，然后找到  <code>src/org/myorg/additionalfiletemplates</code> 。单击“选择文件夹”。单击“完成”。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>将在源代码编辑器中打开一个空的 HTML 文件，其节点显示在“项目”窗口中。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>在  <code>&lt;body&gt;</code>  标记之间键入 " <code>Creates new HTML file.</code> "（不带引号），以使文件如下所示：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;
&lt;html&gt;
   &lt;head&gt;
      &lt;title&gt;&lt;/title&gt;
   &lt;/head&gt;
   &lt;body&gt;
      Creates new HTML file.
   &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_获取图标">获取图标</h3>
<div class="paragraph">
<p>图标随文件模板一起显示在“新建文件”向导中。它用于标识文件模板并将该模板与其他文件模板区分开。图标的尺寸必须为 16x16 像素。</p>
</div>
<div class="paragraph">
<p>请将图标命名为  <code>icon.png</code>  并将其添加到  <code>org.myorg.additionalfiletemplates</code>  包中。</p>
</div>
<div class="paragraph">
<p>“项目”窗口现在应如下所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetemplates_final-projects-window-60.png" alt="filetemplates final projects window 60">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_注册文件模板">注册文件模板</h2>
<div class="sectionbody">
<div class="paragraph">
<p>创建文件模板后，必须在 NetBeans 系统 Filesystem 中进行注册。 <code>layer.xml</code>  文件就是为此目的而创建的。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在  <code>layer.xml</code>  文件中的  <code>&lt;filesystem&gt;</code>  标记之间添加以下条目：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;folder name="Templates"&gt;

        &lt;folder name="Other"&gt;

            &lt;attr name="SystemFileSystem.localizingBundle" stringvalue="org.myorg.additionalfiletemplates.Bundle"/&gt;
            &lt;file name="MyHTML.html" url="HTML.html"&gt;
                &lt;attr name="template" boolvalue="true"/&gt;
                &lt;attr name="SystemFileSystem.localizingBundle" stringvalue="org.myorg.additionalfiletemplates.Bundle"/&gt;
                &lt;attr name="SystemFileSystem.icon" urlvalue="nbresloc:/org/myorg/additionalfiletemplates/icon.png"/&gt;
                &lt;attr name="templateWizardURL" urlvalue="nbresloc:/org/myorg/additionalfiletemplates/Description.html"/&gt;
                *&lt;!--Use this line only if your template makes use of the FreeMarker template language:--&gt;*
                &lt;attr name="javax.script.ScriptEngine" stringvalue="freemarker"/&gt;
            &lt;/file&gt;

        &lt;/folder&gt;

&lt;/folder&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>将显示名称添加到  <code>Bundle.properties</code>  文件中：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Templates/Other/MyHTML.html=My HTML File</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_生成和安装模块">生成和安装模块</h2>
<div class="sectionbody">
<div class="paragraph">
<p>IDE 使用 Ant 生成脚本来生成和安装模块。此生成脚本是在创建模块项目时创建的。</p>
</div>
<div class="sect2">
<h3 id="_安装_netbeans_模块">安装 NetBeans 模块</h3>
<div class="paragraph">
<p>在“项目”窗口中，右键单击 "Additional File Templates" 项目，然后选择“在目标平台中安装/重新装入”。</p>
</div>
<div class="paragraph">
<p>将生成此模块并将其安装在目标 IDE 或平台中。此时将打开目标 IDE 或平台，您可以在其中试用新模块。缺省目标 IDE 或平台是开发 IDE 的当前实例所使用的安装。</p>
</div>
<div class="paragraph">
<p>*注意：*运行模块时，使用的是临时测试用户目录，而不是开发 IDE 的用户目录。</p>
</div>
</div>
<div class="sect2">
<h3 id="_使用_netbeans_模块">使用 NetBeans 模块</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>选择“文件”&gt;“新建项目”(Ctrl-Shift-N)，然后创建一个新项目。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>右键单击此项目，然后选择“新建”&gt;“其他”。将打开“新建文件”向导，并显示新类别及其新文件类型。该向导应该与下图类似，但图标可能会有所不同：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetemplates_new-file-wizard-60.png" alt="filetemplates new file wizard 60">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>选择新文件类型，然后单击“下一步”以创建一个新文件。单击“完成”后，源代码编辑器中应显示新创建的模板。</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_创建可共享的模块二进制文件">创建可共享的模块二进制文件</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>在“项目”窗口中，右键单击 "Additional File Templates" 项目，然后选择“创建 NBM”。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>将创建 NBM 文件，您可以在“文件”窗口 (Ctrl-2) 中查看它：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filetemplates_shareable-nbm-60.png" alt="filetemplates shareable nbm 60">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>通过发送电子邮件等方式将该文件提供给他人使用。</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_提供其他变量">提供其他变量</h2>
<div class="sectionbody">
<div class="paragraph">
<p>正如前面所提到的，除了 ${user} 和 ${time} 等预定义变量外，您还可以附加自己的变量。例如，如果您要传入一个表示一系列名称的变量，则可以按如下所示定义模板：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;

&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;

        &lt;#list names as oneName&gt;
            &lt;b&amp;amp;gt；${oneName}&lt;/b&amp;amp;gt；
        &lt;/#list&gt;

  &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>在上面的代码中，FreeMarker #list 指令通过一个名为 "names" 的变量执行迭代，其中每个实例称为 "oneName"。然后，在文件中通过粗体标记对输出迭代的每个值。"names" 的值可以来自多个不同的位置，通常来自向导面板。在本例中，用户将从该面板的列表中选择一组名称。</p>
</div>
<div class="paragraph">
<p>要实现上述功能，即，要通过某个新变量执行迭代，请参见  <a href="http://netbeans.dzone.com/news/freemarker-netbeans-ide-60-first-scenario">FreeMarker in NetBeans IDE 6.0: First Scenario</a>（NetBeans IDE 6.0 中 FreeMarker：第一种方案），然后查看 <a href="http://blogs.oracle.com/geertjan/entry/freemarker_baked_into_netbeans_ide1">此博客条目</a>中关于  <code>DataObject.createFromTemplate(df, targetName, hashMap)</code>  的讨论。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_提供项目许可证">提供项目许可证</h2>
<div class="sectionbody">
<div class="paragraph">
<p>目前还有一点尚未讨论，它与 FreeMarker #assign 指令有关，只有当您希望使用户能够在创建文件时生成项目许可证时，才需要用到该指令。为了满足用户的许可需求，您可以在文件模板中提供许可指令。之后，将以您提供的许可指令创建用户项目内的所有文件。</p>
</div>
<div class="paragraph">
<p>要实现上述功能，请执行以下步骤：</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>转至“工具”菜单。选择“模板”。在编辑器中打开 "Java" 下面的“Java 类”模板：</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="http://blogs.oracle.com/geertjan/resource/freemarker-in-nb-2.png" alt="freemarker in nb 2">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>上述模板以及在 FreeMarker 中对其进行定义的相关问题已在前面讨论过。但是，我们需要特别关注一下前四行：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;#assign licenseFirst = "/*"&gt;
&lt;#assign licensePrefix = " * "&gt;
&lt;#assign licenseLast = " */"&gt;
&lt;#include "../Licenses/license-${project.license}.txt"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>这四行与_许可_有着密切的关系。最后一行决定了将在每个项目中使用的许可证。前三行决定了许可证中每一行内容前后的字符。以上是 Java 源文件的前四行。下面是您将在 Properties 文件模板的开头看到的一组相同定义：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;#assign licensePrefix = "# "&gt;
&lt;#include "../Licenses/license-${project.license}.txt"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>第一行告诉我们许可证中的每一行内容都将带有 "#" 前缀，而不是带有 "<strong>" 前缀，"</strong>" 是 Java 源文件使用的前缀（第一行的前缀为 "/<strong>"，最后一行的前缀为 "</strong>/"）。要对此进行验证，请创建一个 Java 源文件，然后再创建一个 Properties 文件。您将会看到两种情况下的不同许可证。但是，由于上面的定义，每一行的前缀字符和后缀字符是不同的。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>接下来，我们了解一下许可证本身。请注意上面模板中的以下行：</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;#include "../Licenses/license-${project.license}.txt"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>尤其要注意以下部分：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">${project.license}</code></pre>
</div>
</div>
<div class="paragraph">
<p>请将其作为一个键放在应用程序的  <code>nbproject/project.properties</code>  文件中。接下来，添加一个值。例如：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">project.license=apache</code></pre>
</div>
</div>
<div class="paragraph">
<p>现在，再次查看“模板管理器”中的“许可证”文件夹。您会在该文件夹中看到一些模板。创建一个名为 "license-apache.txt" 的新模板。此时，可以只复制现有模板并将其粘贴到模板管理器的同一类别中。然后，创建一个由包含下面一行的 FreeMarker 模板定义的文件：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;#include "../Licenses/license-${project.license}.txt"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#8230;&#8203;您会将指定的许可证嵌入新创建的文件中。</p>
</div>
<div class="paragraph">
<p>简而言之，NetBeans IDE 6.0 使用户可以为每个项目定义一个许可证，项目的每个文件都应显示此许可证。另外，假定用户需要创建具有另一许可证的新项目。如果用户在“模板管理器”中定义了一组许可证，则使用新许可证如同在  <code>nbproject/project.properties</code>  文件中添加一个键/值对一样简单。这在以前是不可能实现的，但是，由于 NetBeans IDE 6.0 中新增了 FreeMarker 支持，才使此操作变得可行。有关许可证的详细信息，尤其是其末尾处的注释，请参见 <a href="http://blogs.oracle.com/geertjan/date/20071126">此博客条目</a>。</p>
</div>
<div class="paragraph">
<p><a href="http://netbeans.apache.org/community/mailing-lists.html">请将您的意见和建议发送给我们</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_后续步骤">后续步骤</h2>
<div class="sectionbody">
<div class="paragraph">
<p>有关创建和开发 NetBeans 模块的详细信息，请参见以下资源：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://netbeans.apache.org/kb/docs/platform.html">其他相关教程</a></p>
</li>
<li>
<p><a href="https://bits.netbeans.org/dev/javadoc/">NetBeans API Javadoc</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_版本控制">版本控制</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>版本</strong></th>
<th class="tableblock halign-left valign-top"><strong>日期</strong></th>
<th class="tableblock halign-left valign-top"><strong>更改</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2005 年 6 月 26 日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">初始版本</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2005 年 6 月 28 日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* 在描述符文件中添加了粗体标记，以指示“描述”框显示 HTML 标记
* 添加了排序属性
* 显示名称移至 Bundle.properties 中
* 更改了“使用 NetBeans 插件”中的屏幕快照
* 为 "BrandedJavaClass" 文件添加了 ".template" 扩展名，因为  <code>layer.xml</code>  查找的是名为 "BrandedJavaClass.template" 的文件。此外，还更改了“创建文件模板”一节中末尾部分“项目”窗口的屏幕快照，以反映 ".template" 扩展名。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2005 年 10 月 2 日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* 使用最新的 build 完成整个教程。进行了几处更改，主要是因为“模板”取代了模板的“选项”窗口。
* 在简介部分新增加了第 2 段和第 3 段，以说明如果您要创建新的文件类型，则此教程不是必需的。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2005 年 10 月 3 日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* 将 layer.xml 中的 templateWizard[Iterator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL] 更改为 instantiating[Iterator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WizardURL]，因为 templateWizard[Iterator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL] 即将过时。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2006 年 3 月 16 日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* 完成了整个教程，并稍稍调整了行间距，所有操作保持正常。
* 需要更换屏幕快照，因为图标稍有不同。
* 需要在文档中添加图标，而不仅仅是指出位置。
* 需要指出如何从“新建文件”向导同时创建多个文件模板。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2006 年 9 月 12 日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* 在 NetBeans IDE 5.5 Beta 2 中完成整个教程。
* 没有任何问题，完全按照所述进行操作。
* 更新了一些屏幕快照。
* 修复了代码中的缩进。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2007 年 6 月 9 日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">开始更新为 NetBeans 6。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2008 年 2 月 16 日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">开始将 <a href="http://blogs.oracle.com/geertjan/entry/freemarker_baked_into_netbeans_ide1">此博客条目</a>、 <a href="http://blogs.oracle.com/geertjan/entry/freemarker_baked_into_netbeans_ide2">此博客条目</a>、 <a href="http://blogs.oracle.com/geertjan/date/20071126">此博客条目</a>以及 <a href="http://netbeans.dzone.com/news/freemarker-netbeans-ide-60-first-scenario">此文章</a>中的信息迁移至本教程。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2008 年 4 月 15 日</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">将样式（标记、目录、所需软件表）更新为新格式。</p></td>
</tr>
</tbody>
</table>
</div>
</div>
        
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/60/nbm-filetemplates_zh_CN.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
