
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans セレクション管理のチュートリアル II—ノードを使う方法</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans セレクション管理のチュートリアル II—ノードを使う方法 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, NetBeans セレクション管理のチュートリアル II—ノードを使う方法">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 12.1</h1>
            <p><a class="button success" href="/download/nb121/index.html">Find out more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">NetBeans セレクション管理のチュートリアル II—ノードを使う方法</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/60/nbm-selection-2_ja.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_はじめに">はじめに</a></li>
<li><a href="#_エクスプローラビューの作成">エクスプローラビューの作成</a></li>
<li><a href="#_ノードと子ノードの実装">ノードと子ノードの実装</a></li>
<li><a href="#_サンプルの実行">サンプルの実行</a></li>
<li><a href="#_エクスプローラの探検">エクスプローラの探検</a></li>
<li><a href="#_複数オブジェクトの選択">複数オブジェクトの選択</a></li>
<li><a href="#_コンセプトのおさらい">コンセプトのおさらい</a></li>
<li><a href="#_次の手順">次の手順</a>
<ul class="sectlevel2">
<li><a href="#_この翻訳は_nora_さんに提供していただきました">この翻訳は、nora さんに提供していただきました。</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="nbm-selection-1_ja.html">前回のチュートリアル</a>では、 ` <a href="https://netbeans.apache.org/wiki/devfaqwindowstopcomponent">TopComponent</a>` の ` <a href="https://netbeans.apache.org/wiki/devfaqlookup">Lookup</a>` からセレクト可能なオブジェクトを提供する方法や、フォーカス中のコンポーネントの <code>Lookup</code> に応じて変化するコンポーネントの実装方法など、コンポーネント間のセレクション管理の基礎について学びました。</p>
</div>
<div class="paragraph">
<p>今回は、より詳細なビューや、単にコンポーネントレベルにとどまらないセレクションを可能にするために、 <a href="https://bits.netbeans.org/dev/javadoc/org-openide-nodes/overview-summary.html">ノード API</a> について学びます。もちろん Lookup を読み書きするコンポーネントを書き、より詳細なセレクションロジックを持たせることもできないわけではありません。しかし、ノード API はそのようなことが簡単に実現できるだけでなく、多くの利点を持っています。</p>
</div>
<div class="paragraph">
<p>１つ目の利点はノード API が提供する_プレゼンテーションレイヤー_です。このレイヤーは何らかの形で編集中のデータモデルと、このデータモデルをユーザーに見せる UI コンポーネントの間にある層です。これは、あるモデルを様々な形で、もしくは様々な UI で表現する上で、とても便利で強力なのです。</p>
</div>
<div class="paragraph">
<p>２つ目の利点はエクスプローラ API です。<code>org.openide.explorer</code> モジュールは、ツリーやリスト、ツリーテーブルなどの、ノードや、その子ノードを扱うことのできるコンポーネントを数多く提供しています。</p>
</div>
<div class="paragraph">
<p>ノードは、階層的なオブジェクトです。ノードは以下のものを持っています。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>子ノード—ツリーに表示することができる、階層的に配下にあるノード</p>
</li>
<li>
<p>アクション—ポップアップメニューに表示することができるアクション</p>
</li>
<li>
<p>表示名—UI コンポーネントに表示することができる、判読可能 (human-readable) で、ローカライズされた名前</p>
</li>
<li>
<p>アイコン—UI コンポーネントに表示することができるアイコン</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>ノードは上のどれに対しても変更通知を発行することができ、エクスプローラ UI コンポーネントの表示は自動的に更新されるでしょう。</p>
</div>
<div class="paragraph">
<p>決して前回のチュートリアルが無意味だというわけではありません。むしろ、ノード API が動作可能な理由がそこにあるのですから。お察しの通り、<code>org.openide.nodes.Node</code> の <code>getLookup()</code> というメソッドがその理由です。事実、 IDE のプロジェクトタブで選択を変更した時何が起きているかというと&#8230;&#8203;例えば、プロジェクトタブはトップコンポーネントです。<code>Utilities.actionsGlobalContext()</code> で取得した <code>Lookup</code> がフォーカス中の様々なコンポーネントの代わり (proxy) になり、フォーカスが移動する際に変更通知を発行するように、ツリー内で選択中のオブジェクトの <code>Lookup</code> の代わりとして使えます。</p>
</div>
<div class="paragraph">
<p>エクスプローラ API のコンポーネントのおかげで非常に簡単にツリーノードの体裁を整え、とても少ないコードでこのような代用 (proxying) を行うことができます。前回のチュートリアルに出てきた MyViewer のようなビューアタイプのコンポーネントは、自動的に選択変更を通知されるので、 エクスプローラコンポーネントで起きた選択変更に対応するために特に何かする必要はありません。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_はじめに">はじめに</h2>
<div class="sectionbody">
<div class="paragraph">
<p>あなたがその内容をよく知っているものとして、 <a href="nbm-selection-1_ja.html">前回のチュートリアル</a>のサンプルコードから始めます。</p>
</div>
<div class="paragraph">
<p>サンプルをダウンロードするには <a href="http://plugins.netbeans.org/PluginPortal/faces/PluginDetailPage.jsp?pluginid=3146">ここ</a>をクリックしてください。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_エクスプローラビューの作成">エクスプローラビューの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>まず最初にすることは、エディタコンポーネント <code>MyEditor</code> の大幅な変更です。<code>MyEditor</code> をエディタで開きます。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>まず My Editor プロジェクトのプロパティーダイアログを開きます。「ライブラリ」カテゴリの「依存関係を追加」をクリックし、ダイアログに "BeanTreeView" と入力します。以下のように「エクスプローラおよびプロパティーシート API」が表示されるのを確認して「了解」をクリックします。これでエクスプローラ API モジュールへの依存関係が追加され、モジュールのクラスを使用することができます。</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-deps-beantreeview-60_ja.png" alt="add deps beantreeview 60 ja">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>次にアクションハンドラメソッドの中身を削除します:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>さらにコンストラクタからこのメソッドの呼び出しを削除します。こうしておけば、このハンドラメソッドが関連付けされているボタンを削除した時、ハンドラメソッドも一緒に削除されるでしょう。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>フォームデザイナーに切り替え、コンポーネントのすべての部品を選択し、削除します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>コンポーネントインスペクタで <code>TopComponent</code> のノードを右クリックし、「レイアウトを設定」&gt;「BorderLayout」を選択します:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/border-layout-60_ja.png" alt="border layout 60 ja">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>パレットウィンドウの Swing コンテナの「スクロール区画」をクリックし、フォーム上にスクロールペインをドロップします。すると、このスクロールペインはフォーム全体に配置されるでしょう。ここでの秘密は、すべてのエクスプローラ UI コンポーネントは <code>JScrollPane</code> のサブクラスであるということです。そのため、その生成コードを変更するだけでエクスプローラビューを作成することができます。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>追加した <code>JScrollPane</code> を右クリックし、「コードのカスタマイズ」を選択します。コードカスタマイザで、 <code>new BeanTreeView()</code> を追加して、最初の行を変更します:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/custom-creation-60_ja.png" alt="custom creation 60 ja">
</div>
</div>
<div class="paragraph">
<p><code>BeanTreeView</code> はエクスプローラ API のコンポーネントで、ポップアップメニューや検索機能などが内臓された、ノードとその子ノードを表示する基本的な <code>JTree</code> ベースのビューです。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>下のようにインポート文の追加が必要になるので、ソースエディタに切り替え、 Ctrl-Shift-I キーを押して BeanTreeView をインポートします:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/beantreeview-60_ja.png" alt="beantreeview 60 ja">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>次にツリーに何か表示するものを追加します。エクスプローラ UI コンポーネントは、コンテナに追加されると、コンテナやそのスーパークラスが <code>ExplorerManager.Provider</code> を実装していないか探します。ですから直接コンポーネントに表示するノードを追加するのではなくて、コンポーネントマネージャーに追加します。こうすることでマスター/詳細ビューなど、１つのマネージャーが管理する複数のビューに表示することが可能になります。MyEditor のシグネチャに以下のように追加します:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class MyEditor extends TopComponent implements ExplorerManager.Provider {</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ctrl-Shift-I キーを押してインポートを修正します。シグネチャの行にカーソルを置いたままにしていると、欄外に電球が現れるはずです。Alt-Enter キーを押して、「すべての抽象メソッドの実装」を実行します。すると、 <code>getExplorerManager()</code> というメソッドが追加されるでしょう。これを以下のように実装します:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private final ExplorerManager mgr = new ExplorerManager();
public ExplorerManager getExplorerManager() {
    return mgr;
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>ゴールは複数の <code>APIObject</code> を表示できるコンポーネントなのですから、１つか２つのノードが必要です。それぞれ <code>APIObject</code> インスタンスを所有することになるでしょう。まずはツリービューにルートノードを作成するコードを追加します。コンストラクタに以下の行を追加します:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">mgr.setRootContext(new AbstractNode(new MyChildren()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>このコードでは <code>MyEditor</code> のすべてのエクスプローラビューのルートノードを設定しています。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>インポートを修正しようとすると、 <code>AbstractNode</code> も <code>MyChildren</code> も見つけられないとのエラーダイアログが表示されるでしょう。<code>AbstractNode</code> を解決するためには、ノード API への依存関係を追加する必要があります。My Editor プロジェクトを右クリックし、 「プロパティー」を選択して、「ライブラリ」カテゴリの「依存関係を追加」をクリックします。追加ダイアログで "AbstractNode" と入力し、リスト中で「ノード API」を選択して、「了解」をクリックするか Enter キーを押します 。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="11">
<li>
<p>ソースエディタに戻り、 Ctrl-Shift-I キーを押してインポートを修正します。依然 <code>MyChildren</code> が見つからないとのエラーが出るでしょう。このクラスは今から作成しますから問題ありません。</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ノードと子ノードの実装">ノードと子ノードの実装</h2>
<div class="sectionbody">
<div class="paragraph">
<p>上で <code>AbstractNode</code> というクラスを使っていますね。これは名前の通りの抽象クラスではありません！これはいくらかの時間と手間を省くための <code>org.openide.nodes.Node</code> のユーティリティー実装クラスです。１から Node を実装するのではなく、ただ AbstractNode を作成して子ノードを提供する <code>Children</code> オブジェクトを渡し、必要に応じてアイコンと表示名を設定するだけでよいのです。これが <code>Node</code> そのもののサブクラスを作成することなく、何かを表す <code>Node</code> オブジェクトを作成するための簡単な方法です。</p>
</div>
<div class="paragraph">
<p>これより、 <code>MyChildren</code> を実装して、先頭ノードの下に子ノードを作成します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>My Editor プロジェクトの <code>org.myorg.myeditor</code> パッケージを右クリックし、ポップアップメニューから「新規」&gt;「Java クラス」を選択します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「新規 Java クラス 」ウィザードで、「クラス名」を "MyChildren" とし、「完了」をクリックするか Enter キーを押します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p><code>Children.Keys</code> を拡張するようにクラスのシグネチャを変更します:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">class MyChildren extends Children.Keys {</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Ctrl-Shift-I キーを押してインポートを修正します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>シグネチャの行にカーソルを移動します。欄外に電球が表示されたら、Alt-Enter キーを押して、「すべての抽象メソッドの実装」を実行します。これで <code>createNodes (Object key)</code> メソッドが追加されます。ここでルートノードの子ノードを作成します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>まずは先に、 <code>addNotify</code> をオーバーライドします。Swing コンポーネントの <code>addNotify()</code> と同じで、 <code>Children.Keys.addNotify()</code> は子ノードへの注意が最初に向けられた時、つまり子ノードについて最初に尋ねられた時に呼ばれます。ですから、ユーザーが親ノードを展開し表示が必要になる瞬間まで、子ノードの作成を遅らせることができます。ソースコード上にカーソルを置いて、 Alt-Insert キーを押します。そして「メソッドをオーバーライド&#8230;&#8203;」を選択します。 出てきたダイアログで「Children」を展開し、 <code>addNotify()</code> メソッドを選択して、「生成」をクリックするか Enter キーを押します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p><code>addNotify()</code> メソッドを以下のように実装します:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">protected void addNotify() {
    APIObject[] objs = new APIObject[5];
    for (int i = 0; i &lt; objs.length; i++) {
        objs[i] = new APIObject();
    }
    setKeys (objs);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Children.Keys</code> という名前から想像したかもしれませんが、親ノードはキーオブジェクトの配列または <code>Collection</code> を持ち、それらに対する <code>Node</code> を生成するファクトリのように振る舞います。<code>addNotify()</code> は何かが子ノードを必要としていることを知らせているので、 <code>setKeys()</code> を呼びます。<code>setKeys()</code> に渡す配列またはコレクションの各要素に対して、 <code>createNodes()</code> を１度呼びます (あなたが望むなら１つのオブジェクトに対して複数のノードを割り当てることもできます) 。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>実際にノードを作成するためのコードを実装する必要があります。<code>createNodes()</code> を以下のように実装します:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">protected Node[] createNodes(Object o) {
    APIObject obj = (APIObject) o;
    AbstractNode result = new AbstractNode (new MyChildren(), Lookups.singleton(obj));
    result.setDisplayName (obj.toString());
    return new Node[] { result };
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Ctrl-Shift-I キーを押してインポートを修正します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>最後に、エクスプローラマネージャーを TopComponent の Lookup につなぐための配線コードを少し追加します。まずクラス定義の先頭から以下の行を削除します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">private final InstanceContent content = new InstanceContent();</code></pre>
</div>
</div>
<div class="paragraph">
<p>そして、選択されたノードの Lookup を TopComponent の Lookup につなぐために、ユーティリティを使用します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="11">
<li>
<p><code>MyEditor</code> のコンストラクタを以下のように修正します:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public MyEditor() {
    initComponents();
    associateLookup (ExplorerUtils.createLookup(mgr, getActionMap()));
    mgr.setRootContext(new AbstractNode(new MyChildren()));
    setDisplayName ("My Editor");
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_サンプルの実行">サンプルの実行</h2>
<div class="sectionbody">
<div class="paragraph">
<p>お気づきでしょうが、それぞれの <code>AbstractNode</code> に対し <code>MyChildren</code> のインスタンスを生成するので、無限に <code>APIObjects</code> が作られ、それぞれのノードは <code>APIObject</code> を持つ５つの子ノードを持つことになります。</p>
</div>
<div class="paragraph">
<p>準備が整ったので、 <code>SelectionSuite</code> を右クリックしてポップアップメニューから「生成物を削除してすべてを構築」を選択し、再度右クリックして「実行」を選択します。NetBeans が起動したら、ファイルメニューの「Open Editor」アクションで <code>MyEditor</code> インスタンスを開きます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/result-2-60_ja.png" alt="result 2 60 ja">
</div>
</div>
<div class="paragraph">
<p>ノードをクリックまたは展開すると、ビューアとプロパティーシートの内容が、以下のように選択したノードの <code>APIObject</code> の情報に更新されることに注目してください:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/result-1-60_ja.png" alt="result 1 60 ja">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_エクスプローラの探検">エクスプローラの探検</h2>
<div class="sectionbody">
<div class="paragraph">
<p>以上のサンプルコードを使って、ノードと子ノードを表示するために NetBeans で使用可能な他のコンポーネントを探検したらおもしろいでしょう。探検するには、 <code>MyEditor</code> をフォームエディタで開き、「カスタム作成コード」プロパティーのコードを他のコンポーネントを使うように変更します。あるコンポーネントに対しては、 <code>JScrollPane</code> を他のコンポーネントに変更する必要があるでしょう。(単に <code>JScrollPane</code> をフォームエディタで削除してしまって、コンストラクタに <code>(new BeanTreeView(), BorderLayout.CENTER)</code> と追加してしまってもよいでしょう。) 例えば以下のようなオプションがあります:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>ListView</strong>—ノードを JList に表示する (階層の深さを設定することができる)</p>
</li>
<li>
<p><strong>TreeTableView</strong>—一番左の列がツリーになっているツリーテーブル</p>
</li>
<li>
<p><strong>ChoiceView</strong>—ノードとその子ノードのコンボボックスビュー</p>
</li>
<li>
<p><strong>MenuView</strong>—ノードとその子ノードのポップアップメニューを表示する <code>JButton</code></p>
</li>
<li>
<p><strong>IconView</strong>—Windows エクスプローラのように子ノードをアイコン表示するコンポーネント</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_複数オブジェクトの選択">複数オブジェクトの選択</h2>
<div class="sectionbody">
<div class="paragraph">
<p>基本的なツリービューである <code>BeanTreeView</code> では、同時に複数のノードを選択できることに気づいたかもしれません。ですから、選択中のすべてのノードの情報が表示できるようにビューアコンポーネントを修正したほうが望ましいでしょう:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>My Viewer プロジェクトの <code>org.myorg.myviewer.MyViewerTopComponent</code> をエディタで開きます。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>リスナーメソッドの <code>resultChanged()</code> を次のコードに置き換えます:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public void resultChanged(LookupEvent lookupEvent) {
    Lookup.Result r = (Lookup.Result) lookupEvent.getSource();
    Collection c = r.allInstances();
    if (!c.isEmpty()) {
        StringBuffer text1 = new StringBuffer();
        StringBuffer text2 = new StringBuffer();
        for (Iterator i = c.iterator(); i.hasNext();) {
            APIObject o = (APIObject) i.next();
            text1.append (o.getIndex());
            text2.append (o.getDate().toString());
            if (i.hasNext()) {
                text1.append (',');
                text2.append (',');
            }
        }
        jLabel1.setText (text1.toString());
        jLabel2.setText (text2.toString());
    } else {
        jLabel1.setText("[no selection]");
        jLabel2.setText ("");
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>これで、<code>ExplorerUtils</code> によって作成された <code>Lookup</code> が様々なノードの <code>Lookup</code> のプロキシとして使用できるだけでなく、複数のノードの <code>Lookup</code> をも正確にプロキシすることがわかるでしょう。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/multi-selection-60_ja.png" alt="multi selection 60 ja">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_コンセプトのおさらい">コンセプトのおさらい</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ここで学んだコンセプトをいくつかおさらいします:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Lookup</code> はキーはクラスで値はクラスインスタンスである <code>Map</code> のようなものでした。<code>Lookup</code> は オブジェクトが出入りする_場所_であり、特定の型のオブジェクトが出入りした時に通知してもらうように設定できると考えてもよいでしょう。</p>
</li>
<li>
<p><code>Utilities.actionsGlobalContext()</code> により、フォーカス中の多様な <code>TopComponent</code> の <code>Lookup</code> のプロキシ <code>Lookup</code> を取得できます。この <code>Lookup</code> は、フォーカスが別のコンポーネントに移動すると変更通知を発行します。</p>
</li>
<li>
<p>ノードは、ツリーやリストなどのエクスプローラ API のコンポーネントで表示することができるプレゼンテーションオブジェクトです。それぞれのノードは自身の <code>Lookup</code> を持っています。</p>
</li>
<li>
<p><code>Utilities.actionsGlobalContext()</code> で取得した <code>Lookup</code> が TopComponent の <code>Lookup</code> のプロキシとして使用できるように、 <code>ExplorerUtils.createLookup(ExplorerManager, ActionMap)</code> によって作成される <code>Lookup</code> は エクスプローラ内で選択された様々な <code>Node</code> の <code>Lookup</code> のプロキシとして使用できます。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="http://netbeans.apache.org/community/mailing-lists.html">ご意見をお寄せください</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_次の手順">次の手順</h2>
<div class="sectionbody">
<div class="paragraph">
<p>これで、配下にモデルオブジェクト (<code>APIObject</code>) を持つノードを表示するビューができました。 <a href="nbm-nodesapi2_ja.html">次のチュートリアル</a>では、これまでに作成したノードにアクションやプロパティー、そしてカラフルな表示名などを付け足していきます。</p>
</div>
<div class="sect2">
<h3 id="_この翻訳は_nora_さんに提供していただきました">この翻訳は、nora さんに提供していただきました。</h3>

</div>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/60/nbm-selection-2_ja.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1><a href="/about/index.html">About</a></h1>
                <ul>
                    <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb110/nb110.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="/plugins/index.html">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2019 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
