
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans Manifest File Syntax Highlighting Module Tutorial</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans Manifest File Syntax Highlighting Module Tutorial - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, NetBeans Manifest File Syntax Highlighting Module Tutorial">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="/plugins/index.html">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Just released!</div>
            <h1 syle='font-size: 2rem'>Apache NetBeans 11.3</h1>
            <p><a class="button success" href="/download/nb113/index.html">Find out more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">NetBeans Manifest File Syntax Highlighting Module Tutorial</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/691/nbm-mfsyntax.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_getting_to_know_the_sample">Getting to Know the Sample</a>
<ul class="sectlevel2">
<li><a href="#_installing_the_software">Installing the Software</a></li>
<li><a href="#_installing_the_sample">Installing the Sample</a></li>
<li><a href="#_introducing_the_sample">Introducing the Sample</a></li>
<li><a href="#_introducing_the_sources">Introducing the Sources</a></li>
</ul>
</li>
<li><a href="#_setting_up_the_module_project">Setting Up the Module Project</a>
<ul class="sectlevel2">
<li><a href="#_creating_the_module_project">Creating the Module Project</a></li>
<li><a href="#_specifying_the_module_s_dependencies">Specifying the Module&#8217;s Dependencies</a></li>
</ul>
</li>
<li><a href="#_creating_the_main_files">Creating the Main Files</a>
<ul class="sectlevel2">
<li><a href="#_creating_tokens">Creating Tokens</a></li>
<li><a href="#_creating_syntax">Creating Syntax</a></li>
<li><a href="#_giving_the_ide_a_reading_test">Giving the IDE a Reading Test</a></li>
<li><a href="#_creating_the_editorkit">Creating the EditorKit</a></li>
<li><a href="#_creating_the_syntax_coloring">Creating the Syntax Coloring</a></li>
<li><a href="#_creating_the_color_restorer">Creating the Color Restorer</a></li>
</ul>
</li>
<li><a href="#_creating_the_supporting_files">Creating the Supporting Files</a>
<ul class="sectlevel2">
<li><a href="#_creating_the_options">Creating the Options</a></li>
<li><a href="#_displaying_the_options_in_the_options_window">Displaying the Options in the Options Window</a></li>
<li><a href="#_instantiating_the_options">Instantiating the Options</a></li>
<li><a href="#_registering_the_options_in_the_netbeans_system_filesystem">Registering the Options in the NetBeans System Filesystem</a></li>
</ul>
</li>
<li><a href="#_building_and_installing_the_module">Building and Installing the Module</a>
<ul class="sectlevel2">
<li><a href="#_installing_and_testing_the_netbeans_module">Installing and Testing the NetBeans Module</a></li>
<li><a href="#_creating_a_shareable_module_binary_nbm_file">Creating a Shareable Module Binary (NBM File)</a></li>
</ul>
</li>
<li><a href="#_exploring_further">Exploring Further</a>
<ul class="sectlevel2">
<li><a href="#_associating_the_editorkit_with_a_jeditorpane">Associating the EditorKit with a JEditorPane</a></li>
<li><a href="#_code_folding">Code Folding</a></li>
<li><a href="#_indentation_engine">Indentation Engine</a></li>
<li><a href="#_other_options">Other Options</a></li>
</ul>
</li>
<li><a href="#_applying_what_you_have_learned">Applying What You Have Learned</a></li>
<li><a href="#_next_steps">Next Steps</a></li>
<li><a href="#_versioning">Versioning</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Please note that this tutorial is <strong>obsolete</strong>. Go here instead:</p>
</div>
<div class="paragraph">
<p><a href="http://wiki.netbeans.org/How_to_create_support_for_a_new_language">http://wiki.netbeans.org/How_to_create_support_for_a_new_language</a></p>
</div>
<div class="paragraph">
<p>This tutorial shows you how to enhance the IDE by adding syntax highlighting for Manifest files. At the end of this tutorial, you will have a NetBeans plug-in module file (NBM) that you can share with others. When it is installed via the NetBeans Update Center, the 'name', 'colon', and 'value' of manifest entries will have distinct colors, as illustrated below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/result1.png" alt="result1">
</div>
</div>
<div class="paragraph">
<p>In addition, you will be able to use the Options window to modify the colors.</p>
</div>
<div class="paragraph">
<p>The following topics are covered in this tutorial:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#gettingtoknowthesample">Getting to Know the Sample</a></p>
</li>
<li>
<p><a href="#installing-software">Installing the Software</a></p>
</li>
<li>
<p><a href="#installing-sample">Installing the Sample</a></p>
</li>
<li>
<p><a href="#introducing-sample">Introducing the Sample</a></p>
</li>
<li>
<p><a href="#introducing-sources">Introducing the Sources</a></p>
</li>
<li>
<p><a href="#settingupthemoduleproject">Setting Up the Module Project</a></p>
</li>
<li>
<p><a href="#creatingthemoduleproject">Creating the Module Project</a></p>
</li>
<li>
<p><a href="#specifying">Specifying the Module&#8217;s Dependencies</a></p>
</li>
<li>
<p><a href="#creatingthemainfiles">Creating the Main Files</a></p>
</li>
<li>
<p><a href="#tokenizing">Creating Tokens</a></p>
</li>
<li>
<p><a href="#syntaxing">Creating Syntax</a></p>
</li>
<li>
<p><a href="#testing">Giving the IDE a Reading Test</a></p>
</li>
<li>
<p><a href="#editorkitting">Creating the Editor Kit</a></p>
</li>
<li>
<p><a href="#syntaxcoloring">Creating the Syntax Coloring</a></p>
</li>
<li>
<p><a href="#colorrestoring">Creating the Color Restorer</a></p>
</li>
<li>
<p><a href="#creatingthemainfiles">Creating the Supporting Files</a></p>
</li>
<li>
<p><a href="#creatingoptions">Creating Options</a></p>
</li>
<li>
<p><a href="#dipslayingoptionsinoptionswindow">Displaying the Options in the Options Window</a></p>
</li>
<li>
<p><a href="#instantiating">Instantiating the Options</a></p>
</li>
<li>
<p><a href="#registeringoptions">Registering the Options in the NetBeans System Filesystem</a></p>
</li>
<li>
<p><a href="#building">Building and Installing the Module</a></p>
</li>
<li>
<p><a href="#explore">Exploring Further</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once the software is installed, this tutorial can be completed in 60 minutes.</p>
</div>
<div class="paragraph">
<p>For more information on creating NetBeans plug-in modules, see the  <a href="https://netbeans.apache.org/platform/index.html"> NetBeans Development Project home</a> on the NetBeans website. If you have questions, visit the  <a href="http://wiki.netbeans.org/wiki/view/NetBeansDeveloperFAQ">NetBeans Developer FAQ</a> or use the feedback link at the top of this page.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_to_know_the_sample">Getting to Know the Sample</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you start writing the module, you have to make sure you have all of the necessary software. In addition, you might want to play with the sample before building it yourself.</p>
</div>
<div class="sect2">
<h3 id="_installing_the_software">Installing the Software</h3>
<div class="paragraph">
<p>Before you begin, you need to install the following software on your computer:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>NetBeans IDE 5.x ( <a href="https://netbeans.apache.org/download/index.html">download</a>)</p>
</li>
<li>
<p>Java Standard Development Kit (JDK™) version 1.4.2 ( <a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html">download</a>) or 5.0 ( <a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html">download</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_installing_the_sample">Installing the Sample</h3>
<div class="paragraph">
<p>Take the following steps to install the sample:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Unzip the  <a href="https://netbeans.org/files/documents/4/583/ManifestSupport.zip">attached file</a>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the IDE, choose File &gt; Open Project and browse to the folder that contains the unzipped file. Open the module project. It should look as follows:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/final_projects_window.png" alt="final projects window">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Right-click the project node and choose Install/Reload in Target Platform. The target platform opens and the module is installed.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_introducing_the_sample">Introducing the Sample</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Use the New project wizard (Ctrl-Shift-N) to create a new Java application project or NetBeans plug-in module project and notice that the project&#8217;s manifest file has syntax highlighting, as shown in the introduction of this tutorial.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Choose Tools &gt; Options. In the Options window, click Fonts &amp; Colors in the left sidebar and notice that there is an entry called 'Manifest' in the Language drop-down list, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fonts-and-colors-1.png" alt="fonts and colors 1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Select City Lights in the Profile drop-down list at the top of the Fonts &amp; Colors page, and notice that the syntax changes, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fonts-and-colors-4.png" alt="fonts and colors 4">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Click Editor in the left sidebar and notice that there is an entry called 'Manifest' in the Language drop-down list, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fonts-and-colors-2.png" alt="fonts and colors 2">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Click Advanced Options in the lower left corner of the Options window. In the Editor Settings node, notice that there is a new entry for the Manifest Editor, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fonts-and-colors-3.png" alt="fonts and colors 3">
</div>
</div>
<div class="paragraph">
<p>Now that you know what the user interface of the Manifest Support plug-in module looks like, let&#8217;s have a quick look at what each of the source files does.</p>
</div>
</div>
<div class="sect2">
<h3 id="_introducing_the_sources">Introducing the Sources</h3>
<div class="paragraph">
<p>The Manifest Support sample consists of main files and supporting files.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Main Files.</strong> The module&#8217;s main files are in the  <code>org.netbeans.modules.manifestsupport</code>  package:</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/final_projects_window1.png" alt="final projects window1">
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>File</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bundle.properties</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Localization information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#editorkitting"><code>ManifestEditorKit.java</code> </a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extends the  <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-editor/org/netbeans/modules/editor/NbEditorKit.html">NbEditorKit</a> class.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#syntaxcoloring"><code>ManifestSettingsInitializer.java</code> </a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extends the  <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-editor-lib/org/netbeans/editor/Settings.AbstractInitializer.html">Settings.AbstractInitializer</a> class. Includes an inner class than extends the  <a href="https://bits.netbeans.org/dev/javadocorg-netbeans-modules-editor-lib/org/netbeans/editor/SettingsUtil.TokenColoringInitializer.html">SettingsUtil.TokenColoringInitializer</a> class.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#syntaxing"><code>ManifestSyntax.java</code> </a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extends the  <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-editor-lib/org/netbeans/editor/Syntax.html">Syntax</a> class.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#tokenizing"><code>ManifestTokenContext.java</code> </a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extends the  <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-editor-lib/org/netbeans/editor/TokenContext.html">TokenContext</a> class.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#colorrestoring"><code>RestoreColoring.java</code> </a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extends the  <a href="https://bits.netbeans.org/dev/javadoc/org-openide-modules/org/openide/modules/ModuleInstall.html">ModuleInstall</a> class.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>layer.xml</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the NetBeans System Filesystem configuration file. It registers the following information in the NetBeans System Filesystem:</p>
<p class="tableblock">* Ability to distinguish Manifest file data objects (via the  <code>.mf</code>  file extension and  <code>text/x-java-jar-manifest</code>  MIME Type).
* Actions that appear in the right-click pop-up menu.
* A dummy template for creating new Manifest files is registered in the New File wizard.
* Editor kit, containing syntax highlighting information.
* Options settings file for instantiation of the relevant information in the Options window.
* Coloring information for the Options window, one set for the NetBeans profile and another set for the City Lights profile.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>*
<strong>Supporting Files.</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Data Object Files.</strong> The module&#8217;s files that distinguish Manifest files from other files are in the  <code>org.netbeans.modules.manifestsupport.dataobject</code>  package:</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/final_projects_window2.png" alt="final projects window2">
</div>
</div>
<div class="paragraph">
<p>For information on these files, see the  <a href="https://netbeans.apache.org/tutorials/nbm-filetype.html">NetBeans DataLoader Module Tutorial</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Options Window Files.</strong> The module&#8217;s files that install information in the Options window are in the  <code>org.netbeans.modules.manifestsupport.options</code>  package:</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/final_projects_window3.png" alt="final projects window3">
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>File</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bundle.properties</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Localization information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ManifestOptions.java</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extends the  <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-editor/org/netbeans/modules/editor/options/BaseOptions.html">BaseOptions</a> class.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ManifestOptions.settings</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instantiation data for the Options window.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ManifestOptionsBeanInfo.java</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extends the  <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-editor/org/netbeans/modules/editor/options/BaseOptionsBeanInfo.html">BaseOptionsBeanInfo</a> class.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mfOptions.gif</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GIF file displayed in the node for the Manifest Editor in the Classic View of the Options window.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>*
<strong>Resources.</strong> The module&#8217;s resources are in the  <code>org.netbeans.modules.manifestsupport.resources</code>  package and in the Unit Test Packages node:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/final_projects_window4.png" alt="final projects window4">
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>File</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CityLights-Properties-fontsColors.xml</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Colors for the CityLights profile in the Fonts &amp; Colors page of the Options window.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ManifestExample</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example used in the Fonts &amp; Colors page of the Options window.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NetBeans-Manifest-fontsColors.xml</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Colors for the NetBeans profile in the Fonts &amp; Colors page of the Options window.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ManifestSyntaxTest.java</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JUnit test for testing the Manifest file&#8217;s tokens.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>*
<strong>Important Files.</strong> The Projects window is typically used to display a project&#8217;s packages. However, to simplify working with some of the more important files in the project, you can access them through the Important Files node:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/final_projects_window5.png" alt="final projects window5">
</div>
</div>
<div class="paragraph">
<p>For basic information each of the Important Files, see the  <a href="https://netbeans.org/kb/articles/quickstart-nbm.html">Introduction to NetBeans Module Development</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_up_the_module_project">Setting Up the Module Project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you start writing the module, you have to make sure you that your project is set up correctly.  <a href="https://netbeans.apache.org/download/index.html">NetBeans IDE 5.x</a> provides a wizard that sets up all the basic files needed for a module.</p>
</div>
<div class="sect2">
<h3 id="_creating_the_module_project">Creating the Module Project</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Choose File &gt; New Project. Under Categories, select NetBeans Plug-in Modules. Under projects, select Module Project and click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the Name and Location panel, type  <code>ManifestSupport</code>  in Project Name. Change the Project Location to any directory on your computer, such as  <code>c:\mymodules</code> . Leave the Standalone Module radiobutton and the Set as Main Project checkbox selected. Click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the Basic Module Configuration panel, replace  <code>yourorghere</code>  in Code Name Base with  <code>netbeans.modules</code>  so that the whole name is  <code>org.netbeans.modules.manifestsupport</code> . Leave  <code>ManifestSupport</code>  as the Module Display Name. Leave the location of the localizing bundle and XML layer, so that they will be stored in a package with the name  <code>org.netbeans.modules.manifestsupport</code> . Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The IDE creates the  <code>ManifestSupport</code>  project. The project contains all of your sources and project metadata, such as the project&#8217;s Ant build script. The project opens in the IDE. You can view its logical structure in the Projects window (Ctrl-1) and its file structure in the Files window (Ctrl-2).</p>
</div>
</div>
<div class="sect2">
<h3 id="_specifying_the_module_s_dependencies">Specifying the Module&#8217;s Dependencies</h3>
<div class="paragraph">
<p>You will need to subclass several classes that belong to  <a href="https://bits.netbeans.org/dev/javadoc/">NetBeans APIs</a>. Each has to be declared as a Module dependency. Use the Project Properties dialog box for this purpose.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the Projects window, right-click the  <code>ManifestSupport</code>  project node and choose Properties. In the Project Properties dialog box, click Libraries.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>For each of the following APIs that is not already present in the Libraries panel, click "Add&#8230;&#8203;", select the name from the Module list, and then click OK to confirm it:</p>
<div class="ulist">
<ul>
<li>
<p><code> <a href="https://bits.netbeans.org/dev/javadoc/org-openide-loaders/org/openide/loaders/doc-files/api.html">Datasystems API</a></code></p>
</li>
<li>
<p><code> <a href="https://bits.netbeans.org/dev/javadoc/org-openide-text/overview-summary.html">Editor API</a></code></p>
</li>
<li>
<p><code>Editor Library API</code></p>
</li>
<li>
<p><code> <a href="https://bits.netbeans.org/dev/javadoc/org-openide-filesystems/overview-summary.html">File System API</a></code></p>
</li>
<li>
<p><code> <a href="https://bits.netbeans.org/dev/javadoc/org-openide-modules/overview-summary.html">Module System API</a></code></p>
</li>
<li>
<p><code> <a href="https://bits.netbeans.org/dev/javadoc/org-openide-nodes/overview-summary.html">Nodes API</a></code></p>
</li>
<li>
<p><code> <a href="https://bits.netbeans.org/dev/javadoc/org-openide-options/org/openide/options/doc-files/api.html">Settings Options API</a></code></p>
</li>
<li>
<p><code> <a href="https://bits.netbeans.org/dev/javadoc/org-openide-text/overview-summary.html">Text API</a></code></p>
</li>
<li>
<p><code> <a href="https://bits.netbeans.org/dev/javadoc/org-openide-util/overview-summary.html">Utilities API</a></code></p>
</li>
<li>
<p><code> <a href="https://bits.netbeans.org/dev/javadoc/org-openide-windows/overview-summary.html">Window System API</a></code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You should now see the following:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/proj-props1.png" alt="proj props1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Click OK to exit the Project Properties dialog box.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>In the Projects window, expand the Important Files node, double-click the Project Metadata node, and note that the APIs you selected have been declared as Module dependencies:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="https://netbeans.org/ns/project/1"&gt;
    &lt;type&gt;org.netbeans.modules.apisupport.project&lt;/type&gt;
    &lt;configuration&gt;
        &lt;data xmlns="https://netbeans.org/ns/nb-module-project/2"&gt;
            &lt;code-name-base&gt;org.netbeans.modules.manifestsupport&lt;/code-name-base&gt;
            &lt;standalone/&gt;
            &lt;module-dependencies&gt;
                &lt;dependency&gt;
                    &lt;code-name-base&gt;org.netbeans.modules.editor&lt;/code-name-base&gt;
                    &lt;build-prerequisite/&gt;
                    &lt;compile-dependency/&gt;
                    &lt;run-dependency&gt;
                        &lt;release-version&gt;3&lt;/release-version&gt;
                        &lt;specification-version&gt;1.25.0.1&lt;/specification-version&gt;
                    &lt;/run-dependency&gt;
                &lt;/dependency&gt;
                &lt;dependency&gt;
                    &lt;code-name-base&gt;org.netbeans.modules.editor.lib&lt;/code-name-base&gt;
                    &lt;build-prerequisite/&gt;
                    &lt;compile-dependency/&gt;
                    &lt;run-dependency&gt;
                        &lt;release-version&gt;1&lt;/release-version&gt;
                        &lt;specification-version&gt;1.8.0.1&lt;/specification-version&gt;
                    &lt;/run-dependency&gt;
                &lt;/dependency&gt;
                &lt;dependency&gt;
                    &lt;code-name-base&gt;org.openide.modules&lt;/code-name-base&gt;
                    &lt;build-prerequisite/&gt;
                    &lt;compile-dependency/&gt;
                    &lt;run-dependency&gt;
                        &lt;specification-version&gt;6.4&lt;/specification-version&gt;
                    &lt;/run-dependency&gt;
                &lt;/dependency&gt;
                &lt;dependency&gt;
                    &lt;code-name-base&gt;org.openide.options&lt;/code-name-base&gt;
                    &lt;build-prerequisite/&gt;
                    &lt;compile-dependency/&gt;
                    &lt;run-dependency&gt;
                        &lt;specification-version&gt;6.3&lt;/specification-version&gt;
                    &lt;/run-dependency&gt;
                &lt;/dependency&gt;
                &lt;dependency&gt;
                    &lt;code-name-base&gt;org.openide.util&lt;/code-name-base&gt;
                    &lt;build-prerequisite/&gt;
                    &lt;compile-dependency/&gt;
                    &lt;run-dependency&gt;
                        &lt;specification-version&gt;6.5&lt;/specification-version&gt;
                    &lt;/run-dependency&gt;
                &lt;/dependency&gt;
                &lt;dependency&gt;
                    &lt;code-name-base&gt;org.openide.filesystems&lt;/code-name-base&gt;
                    &lt;build-prerequisite/&gt;
                    &lt;compile-dependency/&gt;
                    &lt;run-dependency&gt;
                        &lt;specification-version&gt;6.3&lt;/specification-version&gt;
                    &lt;/run-dependency&gt;
                &lt;/dependency&gt;
                &lt;dependency&gt;
                    &lt;code-name-base&gt;org.openide.loaders&lt;/code-name-base&gt;
                    &lt;build-prerequisite/&gt;
                    &lt;compile-dependency/&gt;
                    &lt;run-dependency&gt;
                        &lt;specification-version&gt;5.7&lt;/specification-version&gt;
                    &lt;/run-dependency&gt;
                &lt;/dependency&gt;
                &lt;dependency&gt;
                    &lt;code-name-base&gt;org.openide.nodes&lt;/code-name-base&gt;
                    &lt;build-prerequisite/&gt;
                    &lt;compile-dependency/&gt;
                    &lt;run-dependency&gt;
                        &lt;specification-version&gt;6.6&lt;/specification-version&gt;
                    &lt;/run-dependency&gt;
                &lt;/dependency&gt;
                &lt;dependency&gt;
                    &lt;code-name-base&gt;org.openide.text&lt;/code-name-base&gt;
                    &lt;build-prerequisite/&gt;
                    &lt;compile-dependency/&gt;
                    &lt;run-dependency&gt;
                        &lt;specification-version&gt;6.7&lt;/specification-version&gt;
                    &lt;/run-dependency&gt;
                &lt;/dependency&gt;
                &lt;dependency&gt;
                    &lt;code-name-base&gt;org.openide.windows&lt;/code-name-base&gt;
                    &lt;build-prerequisite/&gt;
                    &lt;compile-dependency/&gt;
                    &lt;run-dependency&gt;
                        &lt;specification-version&gt;6.3&lt;/specification-version&gt;
                    &lt;/run-dependency&gt;
                &lt;/dependency&gt;
            &lt;/module-dependencies&gt;
            &lt;public-packages/&gt;
        &lt;/data&gt;
    &lt;/configuration&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_main_files">Creating the Main Files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Creating the module starts with ensuring that the IDE recognizes Manifest files. By default, it does not recognize them and, therefore, treats them as text files. Work through the  <a href="https://netbeans.apache.org/tutorials/nbm-filetype.html">NetBeans DataLoader Module Tutorial</a> before going further—make sure that you put the files you create in a package called  <code>org.netbeans.modules.manifestsupport.dataobject</code> . Before you go further with this tutorial, the IDE should be able to recognize Manifest files. At the end of the NetBeans DataLoader Module Tutorial, you should have a new MIME Type, too:  <code>text/x-java-jar-manifest</code> . This MIME Type is used throughout this tutorial.</p>
</div>
<div class="paragraph">
<p>Once you have a dataloader specifically for Manifest files, you need to identify items in the Manifest file that you want the IDE to be able to distinguish from each other. Each distinct item is called a <em>token</em>. Once you have created tokens, you need to tell the IDE how to interpret the text it finds—it needs to be told which piece of text constitutes which token. In other words, you need to create a <em>syntax</em>. Next, you associate the tokens with colors. In the process, you create an editor specifically for Manifest files.</p>
</div>
<div class="sect2">
<h3 id="_creating_tokens">Creating Tokens</h3>
<div class="paragraph">
<p>Do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><strong>Create the file.</strong> Right-click the  <code>ManifestSupport</code>  project node, choose New &gt; Java Class, and type  <code>ManifestTokenContext</code>  in Class Name. Click Finish. The new Java class opens in the Source Editor. Replace the default code with the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">package org.netbeans.modules.manifestsupport;

import org.netbeans.editor.BaseTokenID;
import org.netbeans.editor.TokenContext;
import org.netbeans.editor.TokenContextPath;
import org.netbeans.editor.Utilities;

public class ManifestTokenContext extends  link:https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-editor-lib/org/netbeans/editor/TokenContext.html[TokenContext] {

    // Numeric-ids for token categories
    public static final int NAME_ID = 1;
    public static final int COLON_ID = 2;
    public static final int VALUE_ID = 3;
    public static final int END_OF_LINE_ID = 4;

    // Token-ids
    public static final BaseTokenID NAME = new BaseTokenID("name", NAME_ID);
    public static final BaseTokenID COLON = new BaseTokenID("colon", COLON_ID);
    public static final BaseTokenID VALUE = new BaseTokenID("value", VALUE_ID);
    public static final BaseTokenID END_OF_LINE =
            new BaseTokenID("end-of-line", END_OF_LINE_ID);

    // Context instance declaration
    public static final ManifestTokenContext context = new ManifestTokenContext();
    public static final TokenContextPath contextPath = context.getContextPath();

    /**
     * Construct a new ManifestTokenContext
     */
    private ManifestTokenContext() {
        super("mf-");

        try {
            addDeclaredTokenIDs();
        } catch (Exception e) {
            Utilities.annotateLoggable(e);
        }
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><strong>Understand the file.</strong> This Java class specifies a token for each item in the Manifest file with which we want to work. Each distinct item in a Manifest file is a token: 'name', 'colon', and 'value'. In addition, there is also a token for the end of the line, because we need to work with the end of the line—the end of the line determines where a value ends and the next name begins. The constructor above specifies that all tokens will be prefaced by 'mf-'. So, we&#8217;ve now created tokens called 'mf-name', 'mf-colon', 'mf-value', and 'mf-end-of-line'.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_creating_syntax">Creating Syntax</h3>
<div class="paragraph">
<p>Do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><strong>Create the file.</strong> Right-click the  <code>ManifestSupport</code>  project node, choose New &gt; Java Class, and type  <code>ManifestSyntax</code>  in Class Name. Click Finish. The new Java class opens in the Source Editor. Replace the default code with the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">package org.netbeans.modules.manifestsupport;

import org.netbeans.editor.Syntax;
import org.netbeans.editor.TokenID;
import org.openide.ErrorManager;

public class ManifestSyntax extends Syntax {

    /**
     * The logger for this class. It can be used for tracing the class activity,
     * logging debug messages, etc.
     */
    private static final ErrorManager LOGGER =
            ErrorManager.getDefault().getInstance("org.netbeans.modules." +
            "manifestsupport.ManifestSyntax");

    /**
     * Used to avoing calling the log() or notify() method if the message
     * wouldn't be loggable anyway.
     */
    private static final boolean LOG =
            LOGGER.isLoggable(ErrorManager.INFORMATIONAL);

    // The states for the lexical analyzer

    private static final int ISI_NAME = 1; // inside the name part
    private static final int ISA_AFTER_NAME = ISI_NAME + 1; // immediately after the name part
    private static final int ISA_AFTER_COLON = ISA_AFTER_NAME + 1; // immediately after the
                                                                   // colon between the name
                                                                   // and the value
    private static final int ISI_VALUE = ISA_AFTER_COLON + 1; // inside the value part

    protected TokenID parseToken() {
        TokenID result = doParseToken();
        if (LOG) {
            LOGGER.log(ErrorManager.INFORMATIONAL, "parseToken: " + result);
        }
        return result;
    }

    private TokenID doParseToken() {
        char actChar;

        while (offset &lt; stopOffset) {
            actChar = buffer[offset];

            switch (state) {
                case INIT:
                    switch (actChar) {
                        case ':':
                            state = ISA_AFTER_COLON;
                            offset++;
                            return ManifestTokenContext.COLON;
                        case '\n':
                            state = INIT;
                            offset++;
                            return ManifestTokenContext.END_OF_LINE;
                        default:
                            state = ISI_NAME;
                    }
                    break;

                case ISI_NAME:
                    switch (actChar) {
                        case ':':
                        case '\n':
                            state = ISA_AFTER_NAME;
                            return ManifestTokenContext.NAME;
                    }
                    break;

                case ISA_AFTER_NAME:
                    switch (actChar) {
                        case ':':
                            state = ISA_AFTER_COLON;
                            offset++;
                            return ManifestTokenContext.COLON;
                        case '\n':
                            state = INIT;
                            offset++;
                            return ManifestTokenContext.END_OF_LINE;
                        default:
                            assert false;
                    }
                    break;

                case ISA_AFTER_COLON:
                    switch (actChar) {
                        case '\n':
                            state = INIT;
                            offset++;
                            return ManifestTokenContext.END_OF_LINE;
                        default:
                            state = ISI_VALUE;
                    }
                    break;

                case ISI_VALUE:
                    switch (actChar) {
                        case '\n':
                            state = INIT;
                            return ManifestTokenContext.VALUE;
                    }
                    break;
            }

            offset++;
        }

        /*
         * At this stage there's no more text in the scanned buffer.
         * It is valid to return a token here only if this is the last
         * buffer (otherwise the token could continue in the next buffer).
         */
        if (lastBuffer) {
            switch (state) {
                case ISI_NAME:
                    state = INIT;
                    return ManifestTokenContext.NAME;
                case ISI_VALUE:
                    state = INIT;
                    return ManifestTokenContext.VALUE;
            }
        }

        return null;
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><strong>Understand the file.</strong> This Java class tells the IDE which part of the text is which token. It does this by starting in an initial state and sequentially looking at each character in the text and deciding if it stays in that state, moves to another state, or announces that a token was found.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example, for names the IDE starts in the initial state and the first time it encounters a valid character for a name, it enters the  <code>ISI_NAME</code>  state. It stays in this state until it encounters a  <code>\r</code> ,  <code>\n</code>  or  <code>:</code>  character, which cannot be part of a name. When it encounters such a character, the IDE knows that the characters it just traversed make up a name token. The code runs within a while loop. At the end there is a break statement, which increases the offset in the text. The return statement in the code avoids increasing the offset and ensures that the parsing of the next token, after a name, will start with this character (it will likely be a colon, which is a meaningful token itself). The break statement, on the other hand, ensures that offset is increased. When all the characters up to the colon are tested, the IDE knows whether the cursor is inside a name or not.</p>
</div>
</div>
<div class="sect2">
<h3 id="_giving_the_ide_a_reading_test">Giving the IDE a Reading Test</h3>
<div class="paragraph">
<p>Do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><strong>Create the file.</strong> Right-click the Unit Test Packages node, choose New &gt; Java Class, type  <code>ManifestSyntaxTest</code>  in Class Name, and type  <code>org.netbeans.modules.manifestsupport</code>  in Package. Click Finish. The new Java class opens in the Source Editor. Replace the default code with the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">import java.util.Arrays;
import java.util.Iterator;
import java.util.List;
import junit.framework.TestCase;
import org.netbeans.editor.Syntax;
import org.netbeans.editor.TokenID;
import org.netbeans.modules.manifestsupport.*;
import junit.framework.TestCase;

public class ManifestSyntaxTest extends TestCase {

    public ManifestSyntaxTest(String testName) {
        super(testName);
    }

    public void testNextToken() {
	doParse("Manifest-Version: 1.0", new TokenID[] {
            ManifestTokenContext.NAME,
            ManifestTokenContext.COLON,
            ManifestTokenContext.VALUE,
        });
        doParse("Manifest-Version: 1.0\n\n" +
                 "OpenIDE-Module: org.netbeans.modules.manifestsupport\n",
                 new TokenID[] {
           ManifestTokenContext.NAME,
           ManifestTokenContext.COLON,
           ManifestTokenContext.VALUE,
           ManifestTokenContext.END_OF_LINE,
           ManifestTokenContext.END_OF_LINE,
           ManifestTokenContext.NAME,
   	   ManifestTokenContext.COLON,
           ManifestTokenContext.VALUE,
           ManifestTokenContext.END_OF_LINE,
        });
    }

    public void doParse(String m, TokenID[] expected) {
        Syntax s = new ManifestSyntax();
        s.load(null, m.toCharArray(), 0, m.length(), true, m.length());

        TokenID token = null;
        Iterator i = Arrays.asList(expected).iterator();
        do {
            token = s.nextToken();
            if (token != null) {
                if (!i.hasNext()) {
                    fail("More tokens returned than expected.");
                } else {
                    assertSame("Tokens differ", i.next(), token);
                }
            } else {
                assertFalse("More tokens expected than returned.", i.hasNext());
            }
            System.out.println(token);
        } while (token != null);
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><strong>Understand the file.</strong> This Java class checks that the IDE is able to correctly convert text to tokens. To run the test, right-click the project node and choose Run Unit Tests. The test should succeed, returning the following result in the JUnit Test Results window:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/junit-success.png" alt="junit success">
</div>
</div>
<div class="paragraph">
<p>You can play with the  <code>testNextToken()</code>  method to see what the IDE does when the entered text does not comply with the specified tokens. For example, change the method by deleting one of the token IDs ( <code>ManifestTokenContext.VALUE</code> ), so that the method looks as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public void testNextToken() {
   doParse("Manifest-Version: 1.0", new TokenID[] {
        ManifestTokenContext.NAME,
        ManifestTokenContext.COLON,
   });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now there are more tokens than token IDs. (There are two token IDs here— <code>ManifestTokenContext.NAME</code>  and  <code>ManifestTokenContext.COLON</code> .) When you run the JUnit test, the message 'More tokens returned than expected.' is returned:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/junit-more-tokens-than-expected.png" alt="junit more tokens than expected">
</div>
</div>
<div class="paragraph">
<p>Now change the method by deleting the colon between  <code>Manifest-Version</code>  and  <code>1.0</code> , as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public void testNextToken() {
   doParse("Manifest-Version 1.0", new TokenID[] {
        ManifestTokenContext.NAME,
        ManifestTokenContext.COLON,
        ManifestTokenContext.VALUE,
   });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now there are too few tokens. When you run the JUnit test, the message 'More tokens expected than returned.' is returned:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/junit-more-tokens-than-returned.png" alt="junit more tokens than returned">
</div>
</div>
<div class="paragraph">
<p>Finally, let&#8217;s test to see that the IDE understands more than just when there are too many or too few tokens—it should also know when a token is in the wrong place. Add the token that specifies the end-of-line. For example, here  <code>\n</code>  is added right after the name and before the colon:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public void testNextToken() {
  doParse("Manifest-Version\n:1.0", new TokenID[] {
       ManifestTokenContext.NAME,
       ManifestTokenContext.COLON,
       ManifestTokenContext.VALUE,
  });
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When you run the test, the following error is returned:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/junit-wrong-token.png" alt="junit wrong token">
</div>
</div>
<div class="paragraph">
<p>Now that we know that the IDE correctly converts manifest entries into tokens, lets create an editor to work with Manifest files and associate colors with tokens.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_the_editorkit">Creating the EditorKit</h3>
<div class="paragraph">
<p>Do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><strong>Create the file.</strong> Right-click the  <code>ManifestSupport</code>  project node, choose New &gt; Java Class, and type  <code>ManifestEditorKit</code>  in Class Name. Click Finish. The new Java class opens in the Source Editor. Replace the default code with the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">package org.netbeans.modules.manifestsupport;

import javax.swing.text.Document;
import org.netbeans.editor.BaseDocument;
import org.netbeans.editor.Syntax;
import org.netbeans.editor.SyntaxSupport;
import org.netbeans.modules.editor.NbEditorKit;
import org.openide.ErrorManager;

public class ManifestEditorKit extends  link:https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-editor/org/netbeans/modules/editor/NbEditorKit.html[NbEditorKit] {

    public static final String MIME_TYPE = "text/x-java-jar-manifest"; // NOI18N

    /**
     * Creates a new instance of ManifestEditorKit
     */
    public ManifestEditorKit() {
    }

    /**
     * Create a syntax object suitable for highlighting Manifest file syntax
     */
    public Syntax createSyntax(Document doc) {
        return new ManifestSyntax();
    }

    /**
     * Retrieves the content type for this editor kit
     */
    public String getContentType() {
        return MIME_TYPE;
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><strong>Understand the file.</strong> This Java class specifies an  <a href="https://docs.oracle.com/javase/8/docs/api/javax/swing/text/EditorKit.html">EditorKit</a> specifically for a NetBeans editor. Therefore, it extends the  <a href="https://bits.netbeans.org/dev/javadoc/org-netbeans-modules-editor/org/netbeans/modules/editor/NbEditorKit.html">NBEditorKit</a> class. An editor kit establishes the set of things needed by a text component to be a reasonably functioning editor for some type of text content. In this case, the editor is for content that uses the  <code>text/x-java-jar-manifest</code>  MIME Type.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_creating_the_syntax_coloring">Creating the Syntax Coloring</h3>
<div class="paragraph">
<p>Do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><strong>Create the file.</strong> Right-click the  <code>ManifestSupport</code>  project node, choose New &gt; Java Class, and type  <code>ManifestSettingsInitializer</code>  in Class Name. Click Finish. The new Java class opens in the Source Editor. Replace the default code with the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">package org.netbeans.modules.manifestsupport;

import java.awt.Color;
import java.awt.Font;
import java.util.Map;
import org.netbeans.editor.BaseKit;
import org.netbeans.editor.Coloring;
import org.netbeans.editor.Settings;
import org.netbeans.editor.SettingsDefaults;
import org.netbeans.editor.SettingsNames;
import org.netbeans.editor.SettingsUtil;
import org.netbeans.editor.TokenCategory;
import org.netbeans.editor.TokenContext;
import org.netbeans.editor.TokenContextPath;

public class ManifestSettingsInitializer
        extends Settings.AbstractInitializer {

    public static final String NAME =
            "manifest-settings-initializer"; // NOI18N

    /**
     * Constructor
     */
    public ManifestSettingsInitializer() {
        super(NAME);
    }

    /**
     * Update map filled with the settings.
     * @param kitClass kit class for which the settings are being updated.
     *   It is always non-null value.
     * @param settingsMap map holding [setting-name, setting-value] pairs.
     *   The map can be empty if this is the first initializer
     *   that updates it or if no previous initializers updated it.
     */
    public void updateSettingsMap(Class kitClass, Map settingsMap) {
        if (kitClass == BaseKit.class) {
            new ManifestTokenColoringInitializer().
                    updateSettingsMap(kitClass, settingsMap);
        }

        if (kitClass == ManifestEditorKit.class) {
            SettingsUtil.updateListSetting(
                    settingsMap,
                    SettingsNames.TOKEN_CONTEXT_LIST,
                    new TokenContext[]
            { ManifestTokenContext.context }
            );
        }
    }

    /**
     * Class for adding syntax coloring to the editor
     */
    /** Properties token coloring initializer. */
    private static class ManifestTokenColoringInitializer
            extends SettingsUtil.TokenColoringInitializer {

        /** Bold font. */
        private static final Font boldFont =
                SettingsDefaults.defaultFont.deriveFont(Font.BOLD);
        /** Italic font. */
        private static final Font italicFont =
                SettingsDefaults.defaultFont.deriveFont(Font.ITALIC);

        /** Key coloring. */
        private static final Coloring keyColoring =
                new Coloring(boldFont, Coloring.FONT_MODE_APPLY_STYLE,
                Color.blue, null);
        /** Value coloring. */
        private static final Coloring valueColoring =
                new Coloring(null, Color.magenta, null);
        /** Colon coloring. */
        private static final Coloring colonColoring =
                new Coloring(null, Color.DARK_GRAY, null);
        /** Empty coloring. */
        private static final Coloring emptyColoring =
                new Coloring(null, null, null);


        /** Constructs

[source,java]</code></pre>
</div>
</div>
<div class="paragraph">
<p>PropertiesTokenColoringInitializer</p>
</div>
<div class="listingblock">
<div class="content">
<pre>. */
        public ManifestTokenColoringInitializer() {
            super(ManifestTokenContext.context);
        }


        /** Gets token coloring. */
        public Object getTokenColoring(TokenContextPath tokenContextPath,
                TokenCategory tokenIDOrCategory, boolean printingSet) {

            if(!printingSet) {
                int tokenID = tokenIDOrCategory.getNumericID();

                if(tokenID == ManifestTokenContext.NAME_ID) {
                    return keyColoring;
                } else if(tokenID == ManifestTokenContext.VALUE_ID) {
                    return valueColoring;
                } else if(tokenID == ManifestTokenContext.COLON_ID) {
                    return colonColoring;

                }
            } else { // printing set
                return SettingsUtil.defaultPrintColoringEvaluator;
            }

            return null;
        }

    } // End of class ManifestTokenColoringInitializer.

}</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><strong>Understand the file.</strong> This Java class sets the default colors for our tokens. Thanks to the supporting files described in the following sections, the user will be able to use the Options window to change the defaults.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_creating_the_color_restorer">Creating the Color Restorer</h3>
<div class="paragraph">
<p>Do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><strong>Create the file.</strong> Right-click the  <code>ManifestSupport</code>  project node, choose New &gt; Java Class, and type  <code>RestoreColoring </code>  in Class Name. Click Finish. The new Java class opens in the Source Editor. Replace the default code with the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">package org.netbeans.modules.manifestsupport;

import org.netbeans.editor.LocaleSupport;
import org.netbeans.editor.Settings;
import org.openide.modules.ModuleInstall;
import org.openide.util.NbBundle;

public class RestoreColoring extends  link:https://bits.netbeans.org/dev/javadoc/org-openide-modules/org/openide/modules/ModuleInstall.html[ModuleInstall] {

    /**
     *

[source,java]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Localizer</p>
</div>
<div class="listingblock">
<div class="content">
<pre> passed to editor.
     */
    private static LocaleSupport.Localizer localizer;

    /**
     * Registers properties editor, installs options and copies settings.
     * Overrides superclass method.
     */
    public void restored() {
        addInitializer();
        installOptions();
    }

    /**
     * Uninstalls properties options.
     * And cleans up editor settings copy.
     * Overrides superclass method.
     */
    public void uninstalled() {
        uninstallOptions();
    }

    /**
     * Adds initializer and registers editor kit.
     */
    public void addInitializer() {
        Settings.addInitializer(new ManifestSettingsInitializer());
    }

    /**
     * Installs properties editor and print options.
     */
    public void installOptions() {
        // Adds localizer.
        LocaleSupport.addLocalizer(localizer = new LocaleSupport.Localizer() {
            public String getString(String key) {
                return NbBundle.getMessage(RestoreColoring.class, key);
            }
        });
    }

    /** Uninstalls properties editor and print options. */
    public void uninstallOptions() {
        // remove localizer
        LocaleSupport.removeLocalizer(localizer);
    }

}</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><strong>Understand the file.</strong> This Java class is used to install the module and maintain its state. In addition to creating it, you must specify this class in the module&#8217;s manifest file, by adding the following line:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">OpenIDE-Module-Install: org/netbeans/modules/manifestsupport/RestoreColoring.class</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the  <code>OpenIDE-Module-Install</code>  key belongs at the end of the first section (it is highlighted in bold below):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Manifest-Version: 1.0
OpenIDE-Module: org.netbeans.modules.manifestsupport
OpenIDE-Module-Layer: org/netbeans/modules/manifestsupport/layer.xml
OpenIDE-Module-Localizing-Bundle: org/netbeans/modules/manifestsupport/Bundle.properties
OpenIDE-Module-Specification-Version: 1.0
*OpenIDE-Module-Install: org/netbeans/modules/manifestsupport/RestoreColoring.class*

Name: org/netbeans/modules/manifestsupport/dataobject/ManifestDataLoader.class
OpenIDE-Module-Class: Loader</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_supporting_files">Creating the Supporting Files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, you update the Options window to allow the user to customize the way the tokens are presented in the IDE. Not only the colors, but also the font type and style, and the Manifest editor itself, can then be modified by the user in the Options window.</p>
</div>
<div class="sect2">
<h3 id="_creating_the_options">Creating the Options</h3>
<div class="paragraph">
<p>Do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><strong>Create the file.</strong> Right-click the  <code>ManifestSupport</code>  project node, choose New &gt; Java Class, type  <code>ManifestOptions</code>  in Class Name, and type  <code>org.netbeans.modules.manifestsupport.options</code>  in Package. Click Finish. The new Java class opens in the Source Editor. Replace the default code with the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">package org.netbeans.modules.manifestsupport.options;

import java.util.MissingResourceException;
import org.netbeans.modules.editor.options.BaseOptions;
import org.netbeans.modules.manifestsupport.ManifestEditorKit;
import org.openide.util.HelpCtx;
import org.openide.util.NbBundle;

public class ManifestOptions extends BaseOptions {

    public static String MANIFEST = "Manifest"; // NOI18N

    /** Name of property. */
    private static final String HELP_ID = "editing.editor.mf"; // NOI18N

    //no manifest specific options at this time
    static final String[] MF_PROP_NAMES = new String[] {};

    public ManifestOptions() {
        super(ManifestEditorKit.class, MANIFEST);
    }

    /**
     * Gets the help ID
     */
    public HelpCtx getHelpCtx() {
        return new HelpCtx(HELP_ID);
    }

    /**
     * Look up a resource bundle message, if it is not found locally defer to
     * the super implementation
     */
    protected String getString(String key) {
        try {
            return NbBundle.getMessage(ManifestOptions.class, key);
        } catch (MissingResourceException e) {
            return super.getString(key);
        }
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><strong>Understand the file.</strong> This Java class registers the  <code>ManifestEditorKit</code>  in the Options window. If there were properties specific to the Manifest Editor, they would be added in the  <code>static final String[] MF_PROP_NAMES = new String[] {};</code>  declaration. However, in this implementation, only the default options will be supported. In addition, this file adds the string 'Manifest' to the drop-down list in the Code Templates page of the Editor section, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fonts-and-colors-2.png" alt="fonts and colors 2">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_displaying_the_options_in_the_options_window">Displaying the Options in the Options Window</h3>
<div class="paragraph">
<p>Do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><strong>Create the file.</strong> Create the  <code>ManifestOptionsBeanInfo</code>  file and add it to the  <code>org.netbeans.modules.manifestsupport.options</code>  package. Replace the default code with the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">package org.netbeans.modules.manifestsupport.options;

import java.util.MissingResourceException;
import org.netbeans.modules.editor.options.BaseOptionsBeanInfo;
import org.netbeans.modules.editor.options.OptionSupport;
import org.openide.util.NbBundle;

public class ManifestOptionsBeanInfo extends BaseOptionsBeanInfo {

    /**
     * Constructor. The parameter in the superclass constructor is the
     * icon prefix.
     */
    public ManifestOptionsBeanInfo() {
        super("/org/netbeans/modules/manifestsupport/options/mfOptions"); // NOI18N
    }

    /*
     * Gets the property names after merging it with the set of properties
     * available from the BaseOptions from the editor module.
     */
    protected String[] getPropNames() {
        return OptionSupport.mergeStringArrays(
                super.getPropNames(),
                ManifestOptions.MF_PROP_NAMES);
    }

    /**
     * Get the class described by this bean info
     */
    protected Class getBeanClass() {
        return ManifestOptions.class;
    }

    /**
     * Look up a resource bundle message, if it is not found locally defer to
     * the super implementation
     */
    protected String getString(String key) {
        try {
            return NbBundle.getMessage(ManifestOptionsBeanInfo.class, key);
        } catch (MissingResourceException e) {
            return super.getString(key);
        }
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><strong>Understand the file.</strong> This Java class displays the options specified in  <code>ManifestOptions</code>  in the Options window. The file referenced in the constructor can be any 16x16 pixel file. If you do not have one, you can get it from the downloadable ZIP file at the top of the page or you can right-click and save it here:
image::images/mfOptions.gif[]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Add a  <code>Bundle.properties</code>  file to the  <code>org.netbeans.modules.manifestsupport.options</code>  package and add this line to it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">OPTIONS_Manifest=Manifest Editor</code></pre>
</div>
</div>
<div class="paragraph">
<p>The string after the "OPTIONS_" above <strong>must</strong> match the String declaration in the  <code>ManifestOptions</code>  class. For example, in this tutorial, the following string is declared in  <code>ManifestOptions.java</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public static String MANIFEST = "Manifest";</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, if this line was as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public static String MANIFEST = "MF";</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then the  <code>Bundle.properties</code>  file would specify this string instead:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">OPTIONS_MF=Manifest Editor</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note also that the string is case-sensitive.</p>
</div>
<div class="paragraph">
<p>Now this is the label that will be displayed in the Classic View of the Options window, to distinguish the Manifest Editor section from the other editors displayed in the Classic View of the Options window, as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fonts-and-colors-3.png" alt="fonts and colors 3">
</div>
</div>
<div class="paragraph">
<p>Notice that there is an icon to the left of the label 'Manifest Editor' in the screenshot above. This is the  <code>mfOptions.gif</code>  file specified in the  <code>ManifestOptionsBeanInfo </code>  class.</p>
</div>
</div>
<div class="sect2">
<h3 id="_instantiating_the_options">Instantiating the Options</h3>
<div class="paragraph">
<p>Do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><strong>Create the file.</strong> Create an XML file called  <code>ManifestOptions.settings</code>  and place it in the  <code>org.netbeans.modules.manifestsupport.options</code>  package. Replace the default code with the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE settings PUBLIC "-//NetBeans//DTD Session settings 1.0//EN"
 "https://netbeans.org/dtds/sessionsettings-1_0.dtd"&gt;
&lt;settings version="1.0"&gt;
    &lt;module name="org.netbeans.modules.manifestsupport"/&gt;
    &lt;instanceof class="java.io.Externalizable"/&gt;
    &lt;instanceof class="org.openide.util.SharedClassObject"/&gt;
    &lt;instanceof class="java.beans.beancontext.BeanContextProxy"/&gt;
    &lt;instanceof class="java.io.Serializable"/&gt;
    &lt;instanceof class="org.openide.options.SystemOption"/&gt;
    &lt;instanceof class="org.netbeans.modules.editor.options.OptionSupport"/&gt;
    &lt;instanceof class="org.netbeans.modules.editor.options.BaseOptions"/&gt;
    &lt;instance class="org.netbeans.modules.manifestsupport.options.ManifestOptions"/&gt;
&lt;/settings&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><strong>Understand the file.</strong> This file lets the IDE quickly instantiate the  <code>ManifestOptions.java</code>  file, whenever called upon to do so. The next section shows you how to register the settings file in the NetBeans System Filesystem.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_registering_the_options_in_the_netbeans_system_filesystem">Registering the Options in the NetBeans System Filesystem</h3>
<div class="paragraph">
<p>To register the module in the Options window, you must do the following in the  <code>layer.xml</code>  file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create default colors for each profile that the IDE supports. Currently, the IDE supports a profile called 'NetBeans' and a profile called 'City Lights'. They can be selected from the Profile drop-down list at the top of the Fonts &amp; Colors section.</p>
</li>
<li>
<p>Register the  <code>ManifestEditorKit.java</code>  class.</p>
</li>
<li>
<p>Register the  <code>ManifestOptions.settings</code>  file.</p>
</li>
<li>
<p>Create a file containing a text that will be shown in the Preview window, at the bottom of the Fonts &amp; Colors section of the Options window.</p>
</li>
<li>
<p>Localize the strings in the  <code>layer.xml</code>  file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The screenshot on the left shows the NetBeans profile; on the right you see the City Lights profile:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fonts-and-colors-1.png" alt="fonts and colors 1">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fonts-and-colors-4.png" alt="fonts and colors 4">
</div>
</div>
<div class="paragraph">
<p>Do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><strong>Update the  <code>layer.xml</code>  file.</strong> Add the following entries to the  <code>layer.xml</code>  file:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;folder name="Editors"&gt;
    &lt;folder name="text"&gt;
        &lt;folder name="x-java-jar-manifest"&gt;
            &lt;attr name="SystemFileSystem.localizingBundle"
            stringvalue="org.netbeans.modules.manifestsupport.Bundle"/&gt;
            &lt;folder name="NetBeans"&gt;
                &lt;folder name="Defaults"&gt;
                    &lt;file name="coloring.xml"
                        url="resources/NetBeans-Manifest-fontsColors.xml"&gt;
                        &lt;attr name="SystemFileSystem.localizingBundle"
                        stringvalue="org.netbeans.modules.manifestsupport.Bundle"/&gt;
                    &lt;/file&gt;
                &lt;/folder&gt;
            &lt;/folder&gt;
            &lt;folder name="CityLights"&gt;
                &lt;folder name="Defaults"&gt;
                    &lt;file name="coloring.xml"
                        url="resources/CityLights-Properties-fontsColors.xml"&gt;
                        &lt;attr name="SystemFileSystem.localizingBundle"
                        stringvalue="org.netbeans.modules.manifestsupport.Bundle"/&gt;
                    &lt;/file&gt;
                &lt;/folder&gt;
            &lt;/folder&gt;
            &lt;file name="Settings.settings"
            url="options/ManifestOptions.settings"/&gt;
            &lt;file name="EditorKit.instance"&gt;
                &lt;attr name="instanceClass"
                stringvalue="org.netbeans.modules.manifestsupport.ManifestEditorKit"/&gt;
            &lt;/file&gt;
        &lt;/folder&gt;
    &lt;/folder&gt;
&lt;/folder&gt;

&lt;folder name="OptionsDialog"&gt;
    &lt;folder name="PreviewExamples"&gt;
        &lt;folder name="text"&gt;
            &lt;file name="x-java-jar-manifest" url="resources/ManifestExample"/&gt;
        &lt;/folder&gt;
    &lt;/folder&gt;
&lt;/folder&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><strong>Localize the Fonts &amp; Colors page.</strong> In the package where the  <code>layer.xml</code>  file is found (i.e., in  <code>org.netbeans.modules.manifestsupport</code> ), add the following entries to the  <code>Bundle.properties</code>  file:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">text/x-java-jar-manifest=Manifest
NetBeans=NetBeans
mf-name=Name
mf-value=Value
mf-colon=Colon</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p><strong>Create a color file for each profile.</strong> Create a package called  <code>org.netbeans.modules.manifestsupport.resources</code>  and add two files,  <code>NetBeans-Manifest-fontsColors.xml</code>  and  <code>CityLights-Properties-fontsColors.xml</code> :</p>
<div class="ulist">
<ul>
<li>
<p><code>NetBeans-Manifest-fontsColors.xml</code>  has the following content:</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;fontscolors&gt;
    &lt;fontcolor name="mf-name" foreColor="blue" default="default"/&gt;
    &lt;fontcolor name="mf-value" foreColor="magenta" default="default"/&gt;
    &lt;fontcolor name="mf-colon" default="default"/&gt;
&lt;/fontscolors&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>CityLights-Properties-fontsColors.xml</code>  has the following content:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;fontscolors&gt;
    &lt;fontcolor name="mf-name" default="default"/&gt;
    &lt;fontcolor name="mf-value" default="default"/&gt;
    &lt;fontcolor name="mf-colon" default="default"/&gt;
&lt;/fontscolors&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p><strong>Create the Preview file.</strong> At the bottom of the Fonts &amp; Colors section in the Options window, the user can preview changes made to the way the Manifest file&#8217;s entries are displayed in the editor. To specify the text that is displayed in the preview window, you need to create a file, as specified in the  <code>OptionsDialog</code>  folder of the  <code>layer.xml</code>  file above. In the  <code>org.netbeans.modules.manifestsupport.resources</code>  package, add a file called  <code>ManifestExample</code>  (note that this file has no extension), with the following content:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">Manifest-Version: 1.0</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_and_installing_the_module">Building and Installing the Module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The IDE uses an Ant build script to build and install your module. The build script is created for you when you create the module project.</p>
</div>
<div class="sect2">
<h3 id="_installing_and_testing_the_netbeans_module">Installing and Testing the NetBeans Module</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the Projects window, right-click the  <code>ManifestSupport</code>  project and choose Install/Reload in Target Platform.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The module is built and installed in the target IDE or Platform. The target IDE or Platform opens so that you can try out your new module. The default target IDE or Platform is the installation used by the current instance of the development IDE. Note that when you run your module, you will be using a temporary test user directory, not the development IDE&#8217;s user directory.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Choose File &gt; New Project (Ctrl-Shift-N). Create a new Java application project or a new Plug-in Module project. Open the project&#8217;s Manifest file in the Source Editor and notice the syntax highlighting.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For other aspects of this module, see the <a href="#introducing-sample">Introducing the Sample</a> section.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_shareable_module_binary_nbm_file">Creating a Shareable Module Binary (NBM File)</h3>
<div class="paragraph">
<p>An NBM file is a NetBeans module packaged for delivery via the web. The principal differences between NBM files and module JAR files are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An NBM file is compressed.</p>
</li>
<li>
<p>An NBM file can contain more than one JAR file—modules can package any libraries they use into their NBM file.</p>
</li>
<li>
<p>An NBM file contains metadata that NetBeans will use to display information about it in the Update Center, such as the manifest contents, the license, etc.</p>
</li>
<li>
<p>An NBM file is typically signed for security purposes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>NBM files are just ZIP files with a special extension. They use the JDK&#8217;s mechanism for signing JAR files. Unless you are doing something unusual, you will not need to worry about the contents of an NBM file—just let the standard Ant build script for NBM creation take care of it for you. The IDE generates the build script based on the options you enter in the project&#8217;s Project Properties dialog box. You can set the module&#8217;s dependencies, versioning, and packaging information in the Project Properties dialog box. You can further customize program execution by editing the Ant script and Ant properties for the project.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the Projects window, right-click the  <code>ManifestSupport</code>  project node and choose Create NBM.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The NBM file is created and you can view it in the Files window (Ctrl-2):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/create-nbm.png" alt="create nbm">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Make it available to others via, for example, e-mail.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Use the Update Center to install the NBM file.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exploring_further">Exploring Further</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Below are some other avenues that you might want to explore.</p>
</div>
<div class="sect2">
<h3 id="_associating_the_editorkit_with_a_jeditorpane">Associating the EditorKit with a JEditorPane</h3>
<div class="paragraph">
<p>Instead of using the EditorKit in the Source Editor, you can associate it with a  <a href="https://docs.oracle.com/javase/8/docs/api/javax/swing/JEditorPane.html">JEditorPane</a>.</p>
</div>
<div class="paragraph">
<p>Do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Select the  <code>JEditorPane</code> , click the  <code>editorKit</code>  property, and make the following selections:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/editorPane.png" alt="editorPane">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Select the  <code>JEditorPane</code> , click the  <code>contentType</code>  property, and type the Manifest file&#8217;s MIME Type ( <code>text/x-java-jar-manifest</code> ):</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/editorPane2.png" alt="editorPane2">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>When you deploy the module, syntax highlighting will be enabled in the JEditorPane:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/editorPane3.png" alt="editorPane3">
</div>
</div>
<div class="paragraph">
<p>In effect, the JEditorPane is now your editor. You can use the Options window to modify fonts and colors, just as if you were using the Source Editor.</p>
</div>
</div>
<div class="sect2">
<h3 id="_code_folding">Code Folding</h3>
<div class="paragraph">
<p>To come.</p>
</div>
</div>
<div class="sect2">
<h3 id="_indentation_engine">Indentation Engine</h3>
<div class="paragraph">
<p>To come.</p>
</div>
</div>
<div class="sect2">
<h3 id="_other_options">Other Options</h3>
<div class="paragraph">
<p>To come.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_applying_what_you_have_learned">Applying What You Have Learned</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once you are comfortable with the principles outlined in this tutorial, you can begin applying them to your own scenarios. For example, here is NetBeans user Valentin Buergel&#8217;s Wiki syntax highlighting:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wiki-screenshot.png" alt="wiki screenshot">
</div>
</div>
<div class="paragraph">
<p><a href="http://netbeans.apache.org/community/mailing-lists.html">Send Us Your Feedback</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_steps">Next Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information about creating and developing NetBeans Module, see the following resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://netbeans.apache.org/platform/index.html">Module Developer&#8217;s Resources</a></p>
</li>
<li>
<p><a href="https://bits.netbeans.org/dev/javadoc/">NetBeans API List (Current Development Version)</a></p>
</li>
<li>
<p><a href="http://apisupport.netbeans.org/new-apisupport.html">New API Support-Proposal</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_versioning">Versioning</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Version</strong></th>
<th class="tableblock halign-left valign-top"><strong>Date</strong></th>
<th class="tableblock halign-left valign-top"><strong>Changes</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">23 October 2005</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* Initial version.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30 November 2005</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* Added Valentin&#8217;s screenshot at the end.
* Fixed some smaller issues:
*  <a href="https://bz.apache.org/netbeans/show_bug.cgi?id=69568">issue 69568</a>
* Wrong closing tag in one of the coloring XML files.
*  <code>NbEditorKit</code>  was mistakenly  <code>NBEditorkit</code>  before
* Need to fix several larger issues (from Andrei Badea and one or two people from openide mailing list) soon.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5 March 2006</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* Several fixes:
* Successfully worked through the whole tutorial, using NetBeans IDE 5.x (final version).
* Added new test (from Andrei Badea) to assert new line parsing is working.
* Fixed layer.xml error relating to new way of registering the preview file.
* Tried to use Andrei Badea (and Vladimir) fixes for manifestSyntax,java, but that broke other things. Need to check that with him.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">13 June 2006</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* Took the ZIP attached to this tutorial, installed the NBM in 5.5 dev. No problems, worked as expected, except JUnit test had problems&#8201;&#8212;&#8201;no junit.framework.test found in JUnit module.
* Following suggestion by Tim B., shortened many lines of code to ensure that people don&#8217;t need to scroll to the right too much, but some instances of this problem remain.
* Need to go back to the code snippets and put back links to Javadoc, which were removed when I replaced the code, straight from the Source Editor, which I did to make sure that the shortened lines wouldn&#8217;t cause errors.
* Need to change the ZIP file to match the changes made in previous versions of the tutorial.
* Need to integrate the Module Installer wizard, no need to manually create one (plus automatic manifest.mf and project.xml change).</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Many thanks to Andrei Badea, Tom Ball, and Martin Adamek for help and inspiration.</p>
</div>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/691/nbm-mfsyntax.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1><a href="/about/index.html">About</a></h1>
                <ul>
                    <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb110/nb110.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="/plugins/index.html">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2019 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
