
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Maven を使用した NetBeans モジュールスイートの操作</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Maven を使用した NetBeans モジュールスイートの操作 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, Maven を使用した NetBeans モジュールスイートの操作">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
</head>


    <body>
        

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


        
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 12.6</h1>
            <p><a class="button success" href="/download/nb126/nb126.html">Find out more</a></p>
        </div>
    </div>
</section>

        <div class='grid-container main-content tutorial'>
            <h1 class="sect0">Maven を使用した NetBeans モジュールスイートの操作</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://issues.apache.org/jira/projects/NETBEANS/issues">open a JIRA issue</a>, 
                     or <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/691/nbm-maven-modulesuite_ja.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
            <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_ide_での_maven_の使用方法">IDE での Maven の使用方法</a>
<ul class="sectlevel2">
<li><a href="#_maven_オプションの構成">Maven オプションの構成</a></li>
<li><a href="#_maven_リポジトリの表示">Maven リポジトリの表示</a></li>
</ul>
</li>
<li><a href="#_netbeans_プラットフォームモジュールスイートの作成">NetBeans プラットフォームモジュールスイートの作成</a></li>
<li><a href="#_myapi_モジュールの変更">MyAPI モジュールの変更</a>
<ul class="sectlevel2">
<li><a href="#_myapi_モジュールのクラスの作成">MyAPI モジュールのクラスの作成</a></li>
<li><a href="#_公開パッケージの指定">公開パッケージの指定</a></li>
</ul>
</li>
<li><a href="#_myviewer_モジュールの作成">MyViewer モジュールの作成</a>
<ul class="sectlevel2">
<li><a href="#_モジュールの作成">モジュールの作成</a></li>
<li><a href="#_ウィンドウコンポーネントの作成">ウィンドウコンポーネントの作成</a></li>
</ul>
</li>
<li><a href="#_myeditor_モジュールの作成">MyEditor モジュールの作成</a>
<ul class="sectlevel2">
<li><a href="#_モジュールの作成_2">モジュールの作成</a></li>
<li><a href="#_アクションの追加">アクションの追加</a></li>
<li><a href="#_エディタコンポーネントの追加">エディタコンポーネントの追加</a></li>
</ul>
</li>
<li><a href="#_モジュールスイートの構築および実行">モジュールスイートの構築および実行</a>
<ul class="sectlevel2">
<li><a href="#_直接依存リソースの宣言">直接依存リソースの宣言</a></li>
<li><a href="#_netbeans_インストールの場所の指定">NetBeans インストールの場所の指定</a></li>
<li><a href="#_アプリケーションの実行">アプリケーションの実行</a></li>
</ul>
</li>
<li><a href="#_lookup_の動的な変更">Lookup の動的な変更</a></li>
<li><a href="#_関連項目">関連項目</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>このドキュメントでは、Maven 原型から NetBeans プラットフォームモジュールスイートを作成し、スイートを構築して IDE のインストール構成にインストールする方法を示します。このチュートリアルでは、3 つの NetBeans モジュールをサブプロジェクトとして含む Maven モジュールスイートプロジェクトを作成します。サブプロジェクトを含む Maven プロジェクトは、スイートのコンパイル方法とインストールターゲットを宣言するだけの単純な POM プロジェクトです。</p>
</div>
<div class="paragraph">
<p>このドキュメントは、Ant ベースの「 <a href="https://netbeans.apache.org/tutorials/nbm-selection-1.html">NetBeans 選択管理のチュートリアル</a>」に基づいており、NetBeans プラットフォームモジュールスイートの開発において、Ant を使用する場合と Maven を使用する場合の違いについていくつか説明します。これらの相違点を少し理解すれば、「 <a href="https://netbeans.apache.org/kb/docs/platform_ja.html">NetBeans プラットフォームの学習</a>」のチュートリアルを容易に理解できるようになります。</p>
</div>
<div class="paragraph">
<p>NetBeans プラットフォームをはじめて使用する場合は、スクリーンキャストシリーズの「 <a href="https://netbeans.apache.org/tutorials/nbm-10-top-apis.html">NetBeans API のトップ 10</a>」を視聴いただくことをお勧めします。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
NetBeans プラットフォーム用のアプリケーション開発のために、別々のバージョンの NetBeans プラットフォームをダウンロードする必要はありません。通常、NetBeans IDE でアプリケーションおよびモジュールを開発し、NetBeans プラットフォームおよびアプリケーションを実行するのに必要なモジュールのみを追加します。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>このチュートリアルを開始する前に、必要に応じて次のドキュメントをお読みください。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://netbeans.apache.org/wiki/">NetBeans 開発者の FAQ</a></p>
</li>
<li>
<p><a href="http://wiki.netbeans.org/MavenBestPractices">NetBeans 6.x での Apache Maven のベストプラクティス</a></p>
</li>
<li>
<p><a href="http://www.sonatype.com/books/maven-book/reference/introduction.html">Chapter 1. Introducing Apache Maven</a> (『 <a href="http://www.sonatype.com/books/maven-book/reference/public-book.html">Maven: The Definitive Guide</a>』)</p>
</li>
<li>
<p><a href="https://netbeans.apache.org/kb/docs/java/gui-functionality_ja.html">GUI 構築入門</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ide_での_maven_の使用方法">IDE での Maven の使用方法</h2>
<div class="sectionbody">
<div class="paragraph">
<p>これがはじめての Maven プロジェクトである場合は、Maven の構成設定および Maven リポジトリブラウザに慣れることをお勧めします。</p>
</div>
<div class="sect2">
<h3 id="_maven_オプションの構成">Maven オプションの構成</h3>
<div class="paragraph">
<p>「オプション」ウィンドウの「Maven」タブを使用して、IDE における Maven の動作を設定したり、設定が正しいかどうかを確認したりできます。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「オプション」ウィンドウの「その他」カテゴリを選択して、「Maven」タブをクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Maven をインストールするローカルの場所を指定します (2.0.9 以降が必要)。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Maven のローカルリポジトリの場所が正しいことを確認します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「了解」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>ほとんどの場合、Maven の設定が標準的であれば、「オプション」ウィンドウの情報はすでに正しいものになっています。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Maven サポートは、Java SE 機能セットの一部として有効になっています。「オプション」ウィンドウで「Maven」タブが使用できない場合は、Java アプリケーションを作成して Java SE が有効になっているか確認してください。
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_maven_リポジトリの表示">Maven リポジトリの表示</h3>
<div class="paragraph">
<p>Maven ですべてのプロジェクトを構築するために使用されるアーティファクトは、Maven のローカルリポジトリに格納されます。アーティファクトがプロジェクトの依存リソースとして宣言されると、そのアーティファクトがインストールされていない場合は登録されたリモートリポジトリの 1 つからローカルリポジトリにダウンロードされます。</p>
</div>
<div class="paragraph">
<p>デフォルトで、NetBeans リポジトリおよびよく知られているインデックス付きの Maven リポジトリがいくつか登録され、リポジトリブラウザウィンドウに一覧表示されます。NetBeans リポジトリには、プロジェクトの構築に必要な、ほとんどの公開アーティファクトが含まれています。Maven リポジトリブラウザを使用すると、ローカルリポジトリとリモートリポジトリの内容を確認することができます。「ローカルリポジトリ」ノードを展開すると、ローカルにあるアーティファクトを表示できます。NetBeans リポジトリノードの下に一覧表示されているアーティファクトは、プロジェクトの依存リソースとして追加できますが、すべてのアーティファクトがローカルにあるわけではありません。これらはプロジェクトの依存リソースとして宣言されたときにだけ、ローカルリポジトリに追加されます。</p>
</div>
<div class="paragraph">
<p>Maven リポジトリブラウザを開くには、次の手順に従います。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>メインメニューから「ウィンドウ」&gt;「その他」&gt;「Maven リポジトリブラウザ」を選択します。</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-nbm-netbeans-repo.png" alt="maven nbm netbeans repo">
</div>
<div class="title">Figure 1. Maven リポジトリブラウザのスクリーンショット</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_netbeans_プラットフォームモジュールスイートの作成">NetBeans プラットフォームモジュールスイートの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この節では、「新規プロジェクト」ウィザードを使用して、Maven 原型から NetBeans プラットフォームモジュールスイートを作成します。モジュールプロジェクトを含む POM プロジェクトがウィザードによって作成されます。また、ウィザードでは、スイートのサブプロジェクトとしてモジュールも作成します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「新規プロジェクト」ウィザードを開き、「Maven」カテゴリから「Maven NetBeans モジュールスイート」を選択します。「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「プロジェクト名」に「<strong>MavenSelectionSuite</strong>」と入力します。「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「モジュールプロジェクトを作成」を選択し、モジュール名として「<strong>MyAPI</strong>」と入力します。「完了」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「完了」をクリックすると、IDE によって MavenSelectionSuite プロジェクトおよびサブプロジェクトの MyAPI NetBeans Module が作成されます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite-projectswindow.png" alt="maven suite projectswindow">
</div>
<div class="title">Figure 2. 「プロジェクト」ウィンドウのスクリーンショット</div>
</div>
<div class="paragraph">
<p>MavenSelectionSuite は、サブプロジェクト (この場合は NetBeans Module プロジェクト) のコンテナになる POM プロジェクトです。この POM プロジェクトにソースファイルは含まれません。プロジェクトの POM にはスイートをコンパイルするための命令が含まれており、プロジェクトの POM を見ると、packaging に  <code>pom</code>  が指定されているのが確認できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">     &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;com.mycompany&lt;/groupId&gt;
    &lt;artifactId&gt;MavenSelectionSuite&lt;/artifactId&gt;
    *&lt;packaging&gt;pom&lt;/packaging&gt;*
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;MavenSelectionSuite Netbeans Module Suite&lt;/name&gt;
    ...
        &lt;properties&gt;
            &lt;netbeans.version&gt;RELEASE69&lt;/netbeans.version&gt;
        &lt;/properties&gt;
    *&lt;modules&gt;
        &lt;module&gt;MyAPI&lt;/module&gt;
    &lt;/modules&gt;*
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>POM には、POM プロジェクトを構築するときに含まれるモジュールの一覧も含まれています。MyAPI プロジェクトがモジュールとして表示されているのが確認できます。</p>
</div>
<div class="paragraph">
<p>「プロジェクト」ウィンドウで「モジュール」ノードを展開すると、MyAPI プロジェクトがモジュールとして表示されているのが確認できます。「ファイル」ウィンドウでは、MyAPI プロジェクトディレクトリが  <code>MavenSelectionSuite</code>  ディレクトリの場所にあるのが確認できます。POM プロジェクトのディレクトリで新しいプロジェクトを作成すると、IDE によってこのプロジェクトが POM のモジュールの一覧に自動的に追加され、POM プロジェクトを構築および実行するときに含まれるようになります。</p>
</div>
<div class="paragraph">
<p>Maven 原型から NetBeans プラットフォームモジュールスイートを作成する場合、Ant を使用するときとは異なり、「新規プロジェクト」ウィザードでターゲット NetBeans プラットフォームインストールを指定しません。NetBeans プラットフォームインストールを設定するには、POM プロジェクトの  <code>profiles.xml</code>  ファイルで  <code>&lt;netbeans.installation&gt;</code>  要素を変更して、NetBeans プラットフォームインストールのパスを明示的に指定する必要があります。詳細は、このチュートリアルの「<a href="#05b">NetBeans インストールの場所の指定</a>」の節を参照してください。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_myapi_モジュールの変更">MyAPI モジュールの変更</h2>
<div class="sectionbody">
<div class="paragraph">
<p>モジュールスイートを作成したときに MyAPI モジュールを作成しましたが、ここでモジュールにクラスを作成して、このクラスをほかのモジュールに公開する必要があります。</p>
</div>
<div class="sect2">
<h3 id="_myapi_モジュールのクラスの作成">MyAPI モジュールのクラスの作成</h3>
<div class="paragraph">
<p>この課題では、 <code>APIObject</code>  という名前の簡単なクラスを作成します。新しい  <code>APIObject</code>  のインスタンスが作成されるごとにフィールドの  <code>index</code>  は 1 ずつ増えるため、 <code>APIObject</code>  の各インスタンスは一意になります。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「プロジェクト」ウィンドウで、「MyAPI」プロジェクトを展開します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「ソースパッケージ」ノードを右クリックし、「新規」&gt;「Java クラス」を選択します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「クラス名」に「<strong>APIObject</strong>」と入力し、「パッケージ」ドロップダウンリストから「 <code>com.mycompany.mavenselectionsuite</code> 」を選択します。「完了」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>クラスに対して、いくつかのフィールドを宣言し、次の簡単なメソッドを追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public final class APIObject {

   private final Date date = new Date();
   private static int count = 0;
   private final int index;

   public APIObject() {
      index = count++;
   }

   public Date getDate() {
      return date;
   }

   public int getIndex() {
      return index;
   }

   public String toString() {
       return index + " - " + date;
   }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>インポートを修正して変更内容を保存します。</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_公開パッケージの指定">公開パッケージの指定</h3>
<div class="paragraph">
<p>このチュートリアルでは、 <code>APIObject</code>  のメソッドにアクセスする必要がある追加モジュールを作成します。この課題では、MyAPI モジュールの内容を公開パッケージとして設定し、ほかのモジュールがこのメソッドにアクセスできるようにします。 <code>com.mycompany.mavenselectionsuite</code>  を公開パッケージとして宣言するには、POM にある  <code>nbm-maven-plugin</code>  の  <code>configuration</code>  要素を変更して、公開パッケージとしてエクスポートされたパッケージを指定します。エディタで POM を変更するか、プロジェクトの「プロパティー」ウィンドウで、公開するパッケージを選択できます。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>プロジェクトノードを右クリックして「プロパティー」を選択し、「プロパティー」ウィンドウを開きます。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「<strong>公開パッケージ</strong>」カテゴリの「<strong>com.mycompany.mavenselectionsuite</strong>」パッケージを選択します。「了解」をクリックします。
image::images/maven-suite-publicpackages.png[title="「プロパティー」ウィンドウの「公開パッケージ」"]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>エクスポートするパッケージを選択すると、IDE によって POM の  <code>nbm-maven-plugin</code>  要素がそのパッケージを指定するように変更されます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
    &lt;artifactId&gt;nbm-maven-plugin&lt;/artifactId&gt;
    &lt;extensions&gt;true&lt;/extensions&gt;
    &lt;configuration&gt;
        &lt;publicPackages&gt;
            *&lt;publicPackage&gt;com.mycompany.mavenselectionsuite&lt;/publicPackage&gt;*
        &lt;/publicPackages&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>プロジェクトを右クリックし、「構築」を選択します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>プロジェクトを構築すると、 <code>nbm-maven-plugin</code>  によって、公開パッケージを指定するマニフェストヘッダーが JAR の  <code>MANIFEST.MF</code>  に生成されます。</p>
</div>
<div class="paragraph">
<p>詳細は、「 <a href="http://bits.netbeans.org/mavenutilities/nbm-maven-plugin/manifest-mojo.html#publicPackages">nbm-maven-plugin マニフェストのドキュメント</a>」を参照してください。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_myviewer_モジュールの作成">MyViewer モジュールの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この節では、MyViewer という名前の新しいモジュールを作成して、1 つのウィンドウコンポーネントと 2 つのテキストフィールドを追加します。このコンポーネントは、 <a href="https://netbeans.apache.org/wiki/devfaqlookup">Lookup</a> への変更を待機する  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-util-lookup/org/openide/util/LookupListener.html">LookupListener</a></code>  を実装します。</p>
</div>
<div class="sect2">
<h3 id="_モジュールの作成">モジュールの作成</h3>
<div class="paragraph">
<p>この課題では、 <code>MavenSelectionSuite</code>  ディレクトリに MyViewer NetBeans モジュールを作成します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>メインメニューから「ファイル」&gt;「新規プロジェクト」(Ctrl-Shift-N) を選択します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「Maven」カテゴリから「Maven NetBeans モジュール」を選択します。「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「プロジェクト名」に「<strong>MyViewer</strong>」と入力します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「プロジェクトの場所」が「 <code>MavenSelectionSuite</code> 」ディレクトリであることを確認します。「完了」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>「プロジェクト」ウィンドウの「ライブラリ」ノードを右クリックし、「依存リソースを追加」を選択します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>「開いているプロジェクト」タブで、「MyAPI NetBeans Module」を選択します。「了解」をクリックします。
image::images/maven-suite-addapi.png[title="「プロパティー」ウィンドウの「公開パッケージ」"]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「了解」をクリックすると、IDE によって POM の依存リソースの一覧にアーティファクトが追加され、「ライブラリ」ノードの下にアーティファクトが表示されます。</p>
</div>
<div class="paragraph">
<p>MyViewer モジュールの POM を見ると、このモジュールの親プロジェクトは MavenSelectionSuite であること、 <code>packaging</code>  に  <code>nbm</code>  が指定されていること、および <strong>nbm-maven-plugin</strong> が NetBeans モジュールとしてプロジェクトの構築に使用されることが確認できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
*&lt;parent&gt;
    &lt;groupId&gt;com.mycompany&lt;/groupId&gt;
    &lt;artifactId&gt;MavenSelectionSuite&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
&lt;/parent&gt;*
&lt;groupId&gt;com.mycompany&lt;/groupId&gt;
&lt;artifactId&gt;MyViewer&lt;/artifactId&gt;
*&lt;packaging&gt;nbm&lt;/packaging&gt;*
&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
&lt;name&gt;MyViewer NetBeans Module&lt;/name&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ウィンドウコンポーネントの作成">ウィンドウコンポーネントの作成</h3>
<div class="paragraph">
<p>この課題では、1 つのウィンドウコンポーネントを作成して 2 つのテキストフィールドを追加します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>MyViewer プロジェクトを右クリックし、「新規」&gt;「ウィンドウ」を選択します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>ドロップダウンリストから「<strong>navigator</strong>」を選択し、「アプリケーションの起動時に開く」を選択します。「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「クラス名の接頭辞」に「<strong>MyViewer</strong>」と入力します。「完了」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>パレットから 2 つのラベルをコンポーネントにドラッグして、最上部のラベルのテキストを「 <code>[nothing selected]</code> 」に変更します。
image::images/maven-suite-myviewertopcomponent.png[title="ウィンドウコンポーネントのテキストフィールド"]</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>「ソース」タブをクリックして、クラス署名が  <code>LookupListener</code>  を実装するように変更します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class MyViewerTopComponent extends TopComponent *implements LookupListener* {</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>この行に挿入カーソルを置いて Alt-Enter を押し、abstract メソッドを実装します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>次の  <code>private</code>  フィールド  <code>result</code>  を追加して、初期値を NULL に設定します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private Lookup.Result result = null;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p><code>componentOpened()</code> 、 <code>componentClosed()</code> 、および  <code>resultChanged()</code>  メソッドを次のように変更します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void componentOpened() {
    *result = Utilities.actionsGlobalContext().lookupResult(APIObject.class);
    result.addLookupListener(this);*
}

public void componentClosed() {
    *result.removeLookupListener (this);
    result = null;*
}

public void resultChanged(LookupEvent le) {
    *Lookup.Result r = (Lookup.Result) le.getSource();
    Collection c = r.allInstances();
    if (!c.isEmpty()) {
        APIObject o = (APIObject) c.iterator().next();
        jLabel1.setText (Integer.toString(o.getIndex()));
        jLabel2.setText (o.getDate().toString());
    } else {
        jLabel1.setText("[no selection]");
        jLabel2.setText ("");
    }*
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`` link:http://bits.netbeans.org/dev/javadoc/org-openide-util/org/openide/util/Utilities.html#actionsGlobalContext%28%29[Utilities.actionsGlobalContext()]``  を使用すると、コンポーネントが開かれるごとに、フォーカスを持つコンポーネントの Lookup オブジェクトを、クラスがグローバルに待機できるようになります。Lookup は、コンポーネントが閉じられると削除されます。フォームの JLabel が、フォーカスを持つ  ``APIObject``  に従って更新されるように、 ``resultChanged()``  メソッドは  ``LookupListener``  を実装します。</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>インポートを修正して、必ず * <code>org.openide.util.Utilities</code> * を追加します。変更を保存します。</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_myeditor_モジュールの作成">MyEditor モジュールの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この節では、MyEditor という新しいモジュールを作成します。このモジュールには、Lookup を介して  <code>APIObject</code>  のインスタンスを提供する  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-windows/org/openide/windows/TopComponent.html">TopComponent</a></code>  が含まれます。また、MyEditor コンポーネントの新しいインスタンスを開くためのアクションも作成します。</p>
</div>
<div class="sect2">
<h3 id="_モジュールの作成_2">モジュールの作成</h3>
<div class="paragraph">
<p>この課題では、 <code>MavenSelectionSuite</code>  ディレクトリに NetBeans モジュールを作成して、MyAPI モジュールに依存リソースを追加します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>メインメニューから「ファイル」&gt;「新規プロジェクト」を選択します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「Maven」カテゴリから「Maven NetBeans モジュール」を選択します。「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「プロジェクト名」に「<strong>MyEditor</strong>」と入力します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「プロジェクトの場所」が「 <code>MavenSelectionSuite</code> 」ディレクトリであることを確認します。「完了」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>「プロジェクト」ウィンドウで、プロジェクトの「ライブラリ」ノードを右クリックし、「依存リソースを追加」を選択します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>「開いているプロジェクト」タブで、「MyAPI NetBeans Module」を選択します。「了解」をクリックします。</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_アクションの追加">アクションの追加</h3>
<div class="paragraph">
<p>この課題では、MyEditor という名前のコンポーネントを開くメニュー項目を、「ファイル」メニューに追加するためのクラスを作成します。このコンポーネントの作成は次の課題で行います。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「MyEditor」プロジェクトを右クリックして「新規」&gt;「アクション」を選択し、「新規アクション」ダイアログを開きます。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「常に有効化」を選択します。「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「GUI の登録」ページはデフォルトのままにします。「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「クラス名」に「<strong>OpenEditorAction</strong>」と入力します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>「表示名」に「<strong>Open Editor</strong>」と入力します。「完了」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>IDE によってエディタで  <code>OpenEditorAction</code>  クラスが開き、 <code>layer.xml</code>  ファイルに次の内容が追加されます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;filesystem&gt;
    &lt;folder name="Actions"&gt;
        &lt;folder name="Build"&gt;
            &lt;file name="com-mycompany-myeditor-OpenEditorAction.instance"&gt;
                &lt;attr name="delegate" newvalue="com.mycompany.myeditor.OpenEditorAction"/&gt;
                &lt;attr name="displayName" bundlevalue="com.mycompany.myeditor.Bundle#CTL_OpenEditorAction"/&gt;
                &lt;attr name="instanceCreate" methodvalue="org.openide.awt.Actions.alwaysEnabled"/&gt;
                &lt;attr name="noIconInMenu" boolvalue="false"/&gt;
            &lt;/file&gt;
        &lt;/folder&gt;
    &lt;/folder&gt;
    &lt;folder name="Menu"&gt;
        &lt;folder name="File"&gt;
            &lt;file name="com-mycompany-myeditor-OpenEditorAction.shadow"&gt;
                &lt;attr name="originalFile" stringvalue="Actions/Build/com-mycompany-myeditor-OpenEditorAction.instance"/&gt;
                &lt;attr name="position" intvalue="0"/&gt;
            &lt;/file&gt;
        &lt;/folder&gt;
    &lt;/folder&gt;
&lt;/filesystem&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p><code>OpenEditorAction</code>  クラスを修正して  <code>actionPerformed</code>  メソッドを変更します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void actionPerformed(ActionEvent e) {
    MyEditor editor = new MyEditor();
    editor.open();
    editor.requestActive();
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_エディタコンポーネントの追加">エディタコンポーネントの追加</h3>
<div class="paragraph">
<p>この課題では、 <code>OpenEditorAction</code>  によって呼び出されるとエディタ領域で開くコンポーネント MyEditor を作成します。コンポーネントの複数のインスタンスを作成できるようにするため、シングルトンコンポーネントの作成に使用されるウィンドウコンポーネントのテンプレートは使用しません。代わりに、JPanel フォームのテンプレートを使用してから、クラスを変更して  <code>TopComponent</code>  を拡張します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「ソースパッケージ」を右クリックして「新規」&gt;「その他」を選択し、「Swing GUI フォーム」カテゴリの「JPanel フォーム」を選択します。「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「クラス名」に「<strong>MyEditor</strong>」と入力し、「 <code>com.mycompany.myeditor</code> 」パッケージを選択します。「完了」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>2 つのテキストフィールドをコンポーネントにドラッグします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>各テキストフィールドの  <code>editable</code>  プロパティーを選択解除して、これらのテキストフィールドを読み取り専用にします。
image::images/maven-suite-editableprop.png[title="ラベルの editable プロパティー"]</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>「ソース」タブをクリックして、 <code>javax.swing.JPanel</code>  ではなく  <code>TopComponent</code>  を拡張するようにクラス署名を変更します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class MyEditor extends *TopComponent*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>署名に挿入カーソルを置いて Alt-Enter を入力し、Maven リポジトリを検索して  <code>org.openide.windows</code>  アーティファクトに依存リソースを追加することでコードのエラーを修正します。インポートを修正します。
image::images/maven-suite-add-topcomponent.png[title="ラベルの editable プロパティー"]</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>コンストラクタを変更して、クラスが呼び出されるたびに  <code>APIObject</code>  の新しいインスタンスが作成されるようにします。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public MyEditor() {
    initComponents();
    *APIObject obj = new APIObject();
    associateLookup(Lookups.singleton(obj));
    jTextField1.setText("APIObject #" + obj.getIndex());
    jTextField2.setText("Created: " + obj.getDate());
    setDisplayName("MyEditor " + obj.getIndex());*

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>コンストラクタの  <code>associateLookup(Lookups.singleton(obj));</code>  の行により、 <code>APIObject</code>  の新しいインスタンスを含む Lookup が作成されます。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>インポートを修正して変更内容を保存します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>コンポーネントのテキストフィールドには、 <code>APIObject</code>  からのインデックス値および日付だけが表示されます。これにより、各 MyEditor コンポーネントが一意であり、フォーカスを持つ MyEditor コンポーネントの詳細を MyViewer が表示していることを確認できます。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>OpenEditorAction</code>  のエラーは、 <code>MyEditor</code>  への変更を保存したあとで解決されます。
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_モジュールスイートの構築および実行">モジュールスイートの構築および実行</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この時点で、スイートが正常に構築、インストール、および動作するかどうかを確認するための実行準備がほぼ整いました。</p>
</div>
<div class="sect2">
<h3 id="_直接依存リソースの宣言">直接依存リソースの宣言</h3>
<div class="paragraph">
<p>スイートを構築および実行できるようにするには、MyEditor プロジェクトの依存リソースの 1 つを変更する必要があります。ここでモジュールスイートを構築しようとすると、MyEditor モジュールの実行時に  <code>org.openide.util-lookup</code>  アーティファクトが使用可能でなければならないため、スイートをコンパイルできないことを伝える内容が「出力」ウィンドウに表示されます。</p>
</div>
<div class="paragraph">
<p>プロジェクトノードを右クリックして「依存リソースグラフを表示」を選択すると、依存リソースグラフビューアによりモジュールの依存リソースを視覚化できます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite-dependency-graph.png" alt="maven suite dependency graph">
</div>
<div class="title">Figure 3. アーティファクト依存リソースグラフ</div>
</div>
<div class="paragraph">
<p>MyEditor が  <code>org.openide.util-lookup</code>  に依存リソースを持っていないことが確認できます。依存リソースは推移的であり、プロジェクトはコンパイル時にはアーティファクトを使用できますが、実行時にアーティファクトを使用できるようにするためには、直接依存リソースである必要があります。アーティファクトを直接依存リソースとして宣言するように POM を変更する必要があります。</p>
</div>
<div class="paragraph">
<p>POM を手動で編集するか、「プロジェクト」ウィンドウのポップアップメニュー項目を使用して、アーティファクトを直接依存リソースにできます。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「MyEditor」モジュールの「ライブラリ」ノードを展開します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「 <code>org.openide.util-lookup</code> 」アーティファクトを右クリックし、「直接依存リソースとして宣言」を選択します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「直接依存リソースとして宣言」を選択すると、IDE によって POM が変更され、アーティファクトが依存リソースとして追加されます。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>org.openide.util-lookup</code>  アーティファクトは、すでに MyViewer モジュールの直接依存リソースになっています。
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_netbeans_インストールの場所の指定">NetBeans インストールの場所の指定</h3>
<div class="paragraph">
<p>Maven 原型を使用して NetBeans プラットフォームモジュールスイートを作成した場合、デフォルトではターゲット NetBeans インストールは指定されません。IDE のインストール場所にモジュールスイートをインストールして実行するには、POM プロジェクトの  <code>profiles.xml</code>  ファイルを編集して、インストールディレクトリのパスを指定する必要があります。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>MavenSelectionSuite アプリケーションの下の「プロジェクトファイル」ノードを展開し、 <code>profiles.xml</code>  をダブルクリックしてエディタでファイルを開きます。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>ターゲット NetBeans プラットフォームのパスを指定するように  <code>&lt;netbeans.installation&gt;</code>  要素を変更して、変更を保存します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;profile&gt;
   &lt;id&gt;netbeans-ide&lt;/id&gt;
   &lt;properties&gt;
       &lt;netbeans.installation&gt;/home/me/netbeans-6.9&lt;/netbeans.installation&gt;
   &lt;/properties&gt;
&lt;/profile&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
パスには、実行可能ファイルが含まれている  <code>bin</code>  ディレクトリが存在するディレクトリを指定する必要があります。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>たとえば、OS X では次のようなパスになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;netbeans.installation&gt;/Applications/NetBeans/NetBeans6.9.app/Contents/Resources/NetBeans&lt;/netbeans.installation&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_アプリケーションの実行">アプリケーションの実行</h3>
<div class="paragraph">
<p>これで IDE のターゲットインストールが指定されたので、スイートプロジェクトで「実行」コマンドを使用できます。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>MavenSelectionSuite を右クリックして、「実行」を選択します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「実行」を選択すると、モジュールスイートがインストールされた IDE のインスタンスが起動します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite-run1.png" alt="maven suite run1">
</div>
<div class="title">Figure 4. 「My Viewer」および「MyEditor」ウィンドウ</div>
</div>
<div class="paragraph">
<p>アプリケーションが起動すると「MyViewer」ウィンドウが開き、2 つのテキストラベルが表示されます。ここで、「ファイル」メニューから「Open Editor」を選択すると、エディタ領域で MyEditor コンポーネントを開くことができます。MyViewer ウィンドウには、フォーカスを持つ MyEditor コンポーネントの詳細が表示されます。</p>
</div>
<div class="paragraph">
<p>モジュールスイートプロジェクトの「実行」アクションは、デフォルトで Reactor プラグインを使用して、スイートの一部として指定されたモジュールを再帰的に構築およびパッケージ化するように設定されています。プロジェクトの「プロパティー」ウィンドウを開くと、IDE のアクションにマップされている Maven ゴールを確認できます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-suite-run-action.png" alt="maven suite run action">
</div>
<div class="title">Figure 5. 「My Viewer」および「MyEditor」ウィンドウ</div>
</div>
<div class="paragraph">
<p>「プロパティー」ウィンドウの「アクション」カテゴリで、「実行」アクションにマップされているゴールを確認できます。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lookup_の動的な変更">Lookup の動的な変更</h2>
<div class="sectionbody">
<div class="paragraph">
<p>現時点では、新しい MyEditor コンポーネントを開くたびに新しい  <code>APIObject</code>  が作成されます。この節では、コンポーネントの現在の  <code>APIObject</code>  を新しいものに置き換えるボタンを MyEditor コンポーネントに追加します。 <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-util-lookup/org/openide/util/lookup/InstanceContent.html">InstanceContent</a></code>  を使用して Lookup の内容の変更を動的に処理するようにコードを変更します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「MyEditor」プロジェクトを展開して、エディタの「デザイン」ビューで  <code>MyEditor</code>  フォームを開きます。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>フォーム上にボタンをドラッグして、ボタンのテキストを「Replace」に設定します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>ボタンを右クリックして「イベント」&gt;「Action」&gt;「actionPerformed」を選択し、ボタンのイベントハンドラメソッドを作成して、ソースエディタでフォームを開きます。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>次の  <code>final</code>  フィールドをクラスに追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class MyEditor extends TopComponent {
    *private final InstanceContent content = new InstanceContent();*</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>``InstanceContent``  を利用するには、コンストラクタで  ``Lookup``  ではなく  `` link:http://bits.netbeans.org/dev/javadoc/org-openide-util-lookup/org/openide/util/lookup/AbstractLookup.html#AbstractLookup%28org.openide.util.lookup.AbstractLookup.Content%29[AbstractLookup]``  を使用する必要があります。</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>次のように、 <code>jButton1ActionPerformed</code>  イベントハンドラメソッドの本文に、クラスコンストラクタから行をコピーして  <code>content.set</code>  への呼び出しを追加します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    *APIObject obj = new APIObject();
    jTextField1.setText ("APIObject #" + obj.getIndex());
    jTextField2.setText ("Created: " + obj.getDate());
    setDisplayName ("MyEditor " + obj.getIndex());
    content.set(Collections.singleton (obj), null);*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>コンストラクタで、イベントハンドラへコピーした行を削除し、 <code>AbstractLookup</code>  を使用するように  <code>associateLookup</code>  を変更し、 <code>jButton1ActionPerformed(null);</code>  を追加します。ここで、コンストラクタは次のようになっているはずです。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public MyEditor() {
    initComponents();
    *associateLookup(new AbstractLookup(content));
    jButton1ActionPerformed(null);*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>コンストラクタに  <code>jButton1ActionPerformed(null);</code>  を追加したことによって、このコンポーネントが作成されたときに確実に初期化されるようになりました。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>インポートを修正して変更内容を保存します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>モジュールスイートプロジェクトを再度実行すると、各 MyEditor コンポーネントに新しいボタンが表示されます。このボタンをクリックすると、テキストフィールドのインデックス番号が増加します。「MyViewer」ウィンドウのラベルも、新しい値を反映して更新されます。</p>
</div>
<div class="paragraph">
<p>このチュートリアルでは、Maven 原型から NetBeans プラットフォームモジュールスイートを作成して実行する方法を示しました。モジュールスイートの構造について、および公開パッケージを指定するモジュール POM の設定方法について確認しました。また、ターゲット NetBeans インストールを指定するように親 POM プロジェクトを変更し、IDE の「実行」コマンドによってスイートのインストールおよびプラットフォームの新しいインスタンスの起動が行われるようにする方法を学習しました。ほかの NetBeans プラットフォームアプリケーションおよびモジュール構築の例については、「 <a href="https://netbeans.apache.org/kb/docs/platform.html">NetBeans プラットフォームの学習</a>」に一覧表示されている各チュートリアルを参照してください。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_関連項目">関連項目</h2>
<div class="sectionbody">
<div class="paragraph">
<p>NetBeans プラットフォームでの作成と開発の詳細については、次のリソースを参照してください。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://netbeans.apache.org/kb/docs/platform_ja.html">NetBeans プラットフォームの学習</a></p>
</li>
<li>
<p><a href="https://netbeans.apache.org/wiki/">NetBeans 開発者の FAQ</a></p>
</li>
<li>
<p><a href="http://bits.netbeans.org/dev/javadoc/">NetBeans API Javadoc</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>NetBeans プラットフォームに関して質問がある場合は、<a href="mailto:dev@platform.netbeans.org">dev@platform.netbeans.org</a> のメーリングリストに投稿していただくか、 <a href="https://mail-archives.apache.org/mod_mbox/netbeans-dev/">NetBeans プラットフォームメーリングリストのアーカイブ</a>を参照してください。</p>
</div>
</div>
</div>
            
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="JIRA" href="https://issues.apache.org/jira/projects/NETBEANS/summary"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/691/nbm-maven-modulesuite_ja.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

        </div>
        

<div class='grid-container incubator-area' style='margin-top: 64px'>
    <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/">
                <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
            </a>
        </div>
        <div class='large-auto cell text-center'>
            <a href="https://www.apache.org/events/current-event.html">
               <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>
    </div>
</div>
<footer>
    <div class="grid-container">
        <div class="grid-x grid-padding-x">
            <div class="large-auto cell">
                
                <h1><a href="/about/index.html">About</a></h1>
                <ul>
                    <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
                    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                    <li><a href="https://www.apache.org/security/">Security</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/community/index.html">Community</a></h1>
                <ul>
                    <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
                    <li><a href="/community/committer.html">Becoming a committer</a></li>
                    <li><a href="/community/events.html">NetBeans Events</a></li>
                    <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/participate/index.html">Participate</a></h1>
                <ul>
                    <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
                    <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
                    <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/help/index.html">Get Help</a></h1>
                <ul>
                    <li><a href="/help/index.html#documentation">Documentation</a></li>
                    <li><a href="/wiki/index.asciidoc">Wiki</a></li>
                    <li><a href="/help/index.html#support">Community Support</a></li>
                    <li><a href="/help/commercial-support.html">Commercial Support</a></li>
                </ul>
            </div>
            <div class="large-auto cell">
                <h1><a href="/download/nb110/nb110.html">Download</a></h1>
                <ul>
                    <li><a href="/download/index.html">Releases</a></li>                    
                    <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
                    <li><a href="/download/index.html#source">Building from source</a></li>
                    <li><a href="/download/index.html#previous">Previous releases</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div class='footer-disclaimer'>
    <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2020 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
            <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
            <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
        </div>
        
    </div>
</div>



        <script src="/js/vendor/jquery-3.2.1.min.js"></script>
        <script src="/js/vendor/what-input.js"></script>
        <script src="/js/vendor/jquery.colorbox-min.js"></script>
        <script src="/js/vendor/foundation.min.js"></script>
        <script src="/js/netbeans.js"></script>
        <script>
            
            $(function(){ $(document).foundation(); });
        </script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        <script>
         $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
        </script>
        
    </body>
</html>
