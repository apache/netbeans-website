
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Курс по использованию модуля Wizard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Курс по использованию модуля Wizard - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, Курс по использованию модуля Wizard">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 15</h1>
            <p><a class="button success" href="/download/nb15/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Курс по использованию модуля Wizard</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/691/nbm-wizard_ru.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_создание_модуля_проекта">Создание модуля проекта</a></li>
<li><a href="#_создание_инфраструктуры_мастера">Создание инфраструктуры мастера</a></li>
<li><a href="#_регистрация_класса_действия_мастера">Регистрация класса действия мастера</a></li>
<li><a href="#_проектирование_содержимого_мастера">Проектирование содержимого мастера</a></li>
<li><a href="#_обработка_данных_пользователя">Обработка данных пользователя</a></li>
<li><a href="#_проверка_данных_пользователя">Проверка данных пользователя</a></li>
<li><a href="#_сохранение_данных_при_перезапуске">Сохранение данных при перезапуске</a></li>
<li><a href="#_брэндинг_мастера">Брэндинг мастера</a></li>
<li><a href="#_дополнительные_сведения">Дополнительные сведения</a></li>
<li><a href="#_управление_версиями">Управление версиями</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>В этом учебном курсе вы узнаете, как использовать основные функциональные возможности, предлагаемые классами Wizard  <a href="http://bits.netbeans.org/dev/javadoc/org-openide-dialogs/org/openide/package-summary.html">интерфейса API NetBeans </a>.</p>
</div>
<div class="paragraph">
<p><strong>Содержимое</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#set">Создание модуля проекта</a></p>
</li>
<li>
<p><a href="#wiz">Создание инфраструктуры мастера</a></p>
</li>
<li>
<p><a href="#action">Регистрация класса действия мастера</a></p>
</li>
<li>
<p><a href="#design">Проектирование содержимого мастера</a></p>
</li>
<li>
<p><a href="#process">Обработка данных пользователя</a></p>
</li>
<li>
<p><a href="#validate">Проверка данных пользователя</a></p>
</li>
<li>
<p><a href="#persist">Сохранение данных при перезапуске</a></p>
</li>
<li>
<p><a href="#brand">Брэндинг мастера</a></p>
</li>
<li>
<p><a href="#further">Дополнительные сведения</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>В приложениях платформы NetBeans существует возможность создания различных мастеров. Если необходимо создать мастер, который отображается в диалоговом окне создания проекта, обратитесь к  <a href="https://netbeans.apache.org/tutorials/nbm-projectsamples.html">Учебному курсу по модулю добавления примера проекта</a>. Если необходимо создать мастер, который отображается в диалоговом окне создания файла, обратитесь к  <a href="https://netbeans.apache.org/tutorials/nbm-filetemplates.html">Учебному курсу по созданию модулей шаблонов файлов</a>. В этом учебном курсе будет рассмотрено создание общего мастера, который появляется при щелчке кнопки на панели инструментов.</p>
</div>
<div class="paragraph">
<p><strong>Для работы с этим учебным курсом требуется программное обеспечение и ресурсы, перечисленные в следующей таблице.</strong></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_модуля_проекта">Создание модуля проекта</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Сначала используется мастер "Новый модуль проекта". В конце его работы создается структура основных источников с некоторыми файлами по умолчанию, которые необходимы для любого модуля среды NetBeans.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Выберите в меню "Файл" команду "Новый проект" (CTRL+SHIFT+N). В разделе "Категории" выберите параметр "Модули NetBeans". В области "Проекты" выберите "Модуль". Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>На панели "Имя и расположение" в поле "Имя проекта" введите текст  <code>DemoWizard</code> . В поле "Расположение проекта" укажите любой каталог на компьютере. Оставьте параметр "Отдельный модуль" выбранным и не снимайте флажок "Установить как главный проект". Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>На панели "Основные настройки модуля" в поле "Основа кодового имени" введите текст  <code>org.demo.wizard</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Выберите "Создать слой XML". Не меняйте места расположения пакета локализации и файла слоя XML. Таким образом они будут сохранены с именем  <code>org/demo/wizard</code> . Нажмите кнопку "Готово".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>В среде IDE будет создан проект  <code>DemoWizard</code> . Проект содержит все источники и метаданные проекта, например, сценарий построения проекта Ant. Проект откроется в среде IDE. Логическую структуру проекта можно просмотреть в окне "Проекты" (CTRL+1), а его файловую структуру – в окне "Файлы" (CTRL+2).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_инфраструктуры_мастера">Создание инфраструктуры мастера</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе рассмотрено использование мастера "Мастер" для добавления к модулю заглушек мастера.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>В окне "Проекты" щелкните правой кнопкой мыши узел проекта DemoWizard и выберите "Создать | Прочее", а затем "Разработка модуля | Мастер":</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_wizard-wizard.png" alt="wizard wizard wizard">
</div>
</div>
<div class="paragraph">
<p>Нажмите кнопку "Далее".</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>На панели "Тип мастера" в поле "Количество панелей мастера" введите 2, а другие значения оставьте без изменений:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_wizard-wizard-3.png" alt="wizard wizard wizard 3">
</div>
</div>
<div class="paragraph">
<p>На вышеописанной панели используются следующие поля:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Тип регистрации.</strong> Определяет место, из которого осуществляется доступ к мастеру. При выборе варианта "Особый" с помощью мастера Wizard будет создан новый класс действия, который используется для открытия и инициализации данного мастера. При выборе параметра "Создать файл" мастер Wizard зарегистрирует созданный мастер в файле  <code>layer.xml</code>  модуля.</p>
</li>
<li>
<p><strong>Последовательность этапов мастера.</strong> Определяет, будет ли мастер иметь линейный характер и будет ли у пользователя возможность пропустить какие-либо этапы мастера, в зависимости от выбранных на предыдущих этапах параметров. По умолчанию для линейного мастера выбран вариант "Статический", в то время как для мастера с пропускаемыми шагами требуется наличие специального класса итерации, который создается при выборе варианта "Динамический".</p>
</li>
<li>
<p><strong>Количество панелей мастера.</strong> Определяет количество панелей в создаваемом мастере. Для каждого этапа мастера будет создано два файла Java: представление и контроллер.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Нажмите кнопку "Далее".</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>На панели "Имя и расположение" введите в поле "Префикс имени класса" текст  <code>Demo</code> , а в раскрывающемся меню "Пакет" выберите основной пакет.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_wizard-wizard-4.png" alt="wizard wizard wizard 4">
</div>
</div>
<div class="paragraph">
<p>Нажмите кнопку "Готово".</p>
</div>
<div class="paragraph">
<p>В окне "Проекты" должно отображаться следующее:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_projects-window.png" alt="wizard projects window">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_регистрация_класса_действия_мастера">Регистрация класса действия мастера</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе описывается изменение класса действия и его регистрация в файле  <code>layer.xml</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Откройте файл  <code>DemoWizardAction.java</code>  и замените весь код следующим:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package org.demo.wizard;

import java.awt.Component;
import java.awt.Dialog;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.text.MessageFormat;
import javax.swing.JComponent;
import org.openide.DialogDisplayer;
import org.openide.WizardDescriptor;

public final class DemoWizardAction implements ActionListener {

    private WizardDescriptor.Panel[] panels;

    public void actionPerformed(ActionEvent e) {
        WizardDescriptor wizardDescriptor = new WizardDescriptor(getPanels());
        // {0} заменяется на WizardDesriptor.Panel.getComponent().getName()
        wizardDescriptor.setTitleFormat(new MessageFormat("{0}"));
        wizardDescriptor.setTitle("Заголовок диалогового окна мастера");
        Dialog dialog = DialogDisplayer.getDefault().createDialog(wizardDescriptor);
        dialog.setVisible(true);
        dialog.toFront();
        boolean cancelled = wizardDescriptor.getValue() != WizardDescriptor.FINISH_OPTION;
        if (!cancelled) {
            // любые действия
        }
    }

    /**
     * Инициализация панелей, соответствующих отдельным этапам мастера
     * и установка различных свойств, регулирующих внешний вид мастера.
     */
    private WizardDescriptor.Panel[] getPanels() {
        if (panels == null) {
            panels = new WizardDescriptor.Panel[]{
                        new DemoWizardPanel1(),
                        new DemoWizardPanel2()
                    };
            String[] steps = new String[panels.length];
            for (int i = 0; i &lt; panels.length; i++) {
                Component c = panels[i].getComponent();
                // Название этапа по умолчанию для имени компонента панели. Обычно используется
                // для получения имени выбора цели, которое появляется
                // в перечне этапов.
                steps[i] = c.getName();
                if (c instanceof JComponent) { // assume Swing components
                    JComponent jc = (JComponent) c;
                    // Задает номер этапа для компонента
                    // TODO использует org.openide.dialogs &gt;= 7.8, может использовать WizardDescriptor.PROP_*:
                    jc.putClientProperty("WizardPanel_contentSelectedIndex", new Integer(i));
                    // Задание имени этапа для панели
                    jc.putClientProperty("WizardPanel_contentData", steps);
                    // Включение создания субтитров на каждом этапе
                    jc.putClientProperty("WizardPanel_autoWizardStyle", Boolean.TRUE);
                    // Отображает этапы на левой стороне с изображением на заднем фоне
                    jc.putClientProperty("WizardPanel_contentDisplayed", Boolean.TRUE);
                    // Включение нумерации для всех этапов
                    jc.putClientProperty("WizardPanel_contentNumbered", Boolean.TRUE);
                }
            }
        }
        return panels;
    }

    public String getName() {
        return "Start Sample Wizard";
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Используется тот же код, что и сгенерированный, за исключением реализации  <code>ActionListener</code> вместо  <code>CallableSystemAction</code> . Это сделано потому, что  <code>ActionListener</code>  является стандартным классом JDK, а  <code>CallableSystemAction</code>  - нет. Поскольку используется платформа NetBeans 6.5, можно использовать стандартный класс JDK, что более удобно и требует меньше кода.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Регистрация класса действий в файле  <code>layer.xml</code>  осуществляется следующим образом:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;filesystem&gt;
    &lt;folder name="Actions"&gt;
        &lt;folder name="File"&gt;
            &lt;file name="org-demo-wizard-DemoWizardAction.instance"&gt;
                &lt;attr name="delegate" newvalue="org.demo.wizard.DemoWizardAction"/&gt;
                &lt;attr name="iconBase" stringvalue="org/demo/wizard/icon.png"/&gt;
                &lt;attr name="instanceCreate" methodvalue="org.openide.awt.Actions.alwaysEnabled"/&gt;
                &lt;attr name="noIconInMenu" stringvalue="false"/&gt;
            &lt;/file&gt;
        &lt;/folder&gt;
    &lt;/folder&gt;
    &lt;folder name="Toolbars"&gt;
        &lt;folder name="File"&gt;
            &lt;file name="org-demo-wizard-DemoWizardAction.shadow"&gt;
                &lt;attr name="originalFile" stringvalue="Actions/File/org-demo-wizard-DemoWizardAction.instance"/&gt;
                &lt;attr name="position" intvalue="0"/&gt;
            &lt;/file&gt;
        &lt;/folder&gt;
    &lt;/folder&gt;
&lt;/filesystem&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Элемент "iconBase" указывает на изображение с именем "icon.png" в основном пакете. Если используется собственное изображение, оно должно быть размером 16x16 пикселей, или же необходимо сделать следующее:
image::images/wizard_icon.png[]</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Запустите модуль. Запустится приложение, и на панели инструментов, в месте, которое задано в файле  <code>layer.xml</code> , будут отображены кнопки:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_result-1.png" alt="wizard result 1">
</div>
</div>
<div class="paragraph">
<p>Нажмите кнопку для открытия мастера:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_result-2.png" alt="wizard result 2">
</div>
</div>
<div class="paragraph">
<p>Нажмите кнопку "Далее" и обратите внимание на то, что на последней панели кнопка "Готово" станет активной.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_result-3.png" alt="wizard result 3">
</div>
</div>
<div class="paragraph">
<p>Теперь, когда структура мастера работает, добавим дополнительное содержимое.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_проектирование_содержимого_мастера">Проектирование содержимого мастера</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе описывается добавление содержимого к мастеру и настройка основных функций.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Откройте файл  <code>DemoWizardAction.java</code> . Обратите внимание, существует возможность настройки различных свойств мастера:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_wizard-tweaking.png" alt="wizard wizard tweaking">
</div>
</div>
<div class="paragraph">
<p>Описание этих свойств приведено  <a href="http://ui.netbeans.org/docs/ui_apis/wide/index.html">здесь</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>В  <code>DemoWizardAction.java</code>  измените текст  <code>wizardDescriptor.setTitle</code>  на следующий:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">wizardDescriptor.setTitle("Выбор музыки");</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Откройте файл <code>DemoVisualPanel1.java</code>  и файл <code>DemoVisualPanel2.java</code>  и используйте конструктор графического интерфейса пользователя "Matisse" для добавления компонентов Swing например, следующих:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_panel-1-design.png" alt="wizard panel 1 design">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_panel-2-design.png" alt="wizard panel 2 design">
</div>
</div>
<div class="paragraph">
<p>Выше показаны файлы  <code>DemoVisualPanel1.java</code>  и  <code>DemoVisualPanel2.java</code> , с компонентами Swing.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Откройте две панели в представлении Источник и измените их методы  <code>getName()</code>  на "Имя и адрес" и "Сведения о музыканте", соответственно.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
Запустите модуль еще раз. При открытии мастера, в зависимости от добавленных компонентов Swing и использованных настроек, внешний вид мастера будет аналогичен следующему:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_result-4.png" alt="wizard result 4">
</div>
</div>
<div class="paragraph">
<p>Вышеприведенное изображение на левой панели мастера устанавливается в файле <code>DemoWizardAction.java</code>  следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">wizardDescriptor.putProperty("WizardPanel_image", ImageUtilities.loadImage("org/demo/wizard/banner.png", true));</code></pre>
</div>
</div>
<div class="paragraph">
<p>После того, как создано содержимое мастера, необходимо добавить программный код для обработки данных, которые вводятся пользователем.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_обработка_данных_пользователя">Обработка данных пользователя</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе описана процедура передачи данных пользователя от одной панели к другой, а также как отображение результатов для пользователя после нажатия кнопки "Готово".</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>В классе  <code>WizardPanel</code>  для получения набора данных из визуальных средств поддержки используется метод  <code>storeSettings</code> . Например, создадим модуль получения данных в файле  <code>DemoVisualPanel1.java</code> , а затем получим к нему доступ из файла  <code>DemoWizardPanel1.java</code> :</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void storeSettings(Object settings) {
    ((WizardDescriptor) settings).putProperty("name", ((DemoVisualPanel1)getComponent()).getNameField());
    ((WizardDescriptor) settings).putProperty("address", ((DemoVisualPanel1)getComponent()).getAddressField());
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Затем, с помощью файла  <code>DemoWizardAction.java</code>  получим введенные параметры и обработаем их:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void actionPerformed(ActionEvent e) {
    WizardDescriptor wizardDescriptor = new WizardDescriptor(getPanels());
    // {0} будет заменен на WizardDesriptor.Panel.getComponent().getName()
    wizardDescriptor.setTitleFormat(new MessageFormat("{0}"));
    wizardDescriptor.setTitle("Music Selection");
    Dialog dialog = DialogDisplayer.getDefault().createDialog(wizardDescriptor);
    dialog.setVisible(true);
    dialog.toFront();
    boolean cancelled = wizardDescriptor.getValue() != WizardDescriptor.FINISH_OPTION;
    if (!cancelled) {
        *String name = (String) wizardDescriptor.getProperty("name");
        String address = (String) wizardDescriptor.getProperty("address");
        DialogDisplayer.getDefault().notify(new NotifyDescriptor.Message(name + " " + address));*
    }
}</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>``NotifyDescriptor``  также можно использовать другими способами, например в окне завершения кода:</pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_notifydescriptor.png" alt="wizard notifydescriptor">
</div>
</div>
<div class="paragraph">
<p>Итак, была рассмотрена обработка данных, вводимых пользователем.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_проверка_данных_пользователя">Проверка данных пользователя</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе описана процедура проверки данных, введенных пользователем, при нажатии клавиши "Далее".</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>В  <code>DemoWizardPanel1</code>  измените сигнатуру класса, реализовав  <code>WizardDescriptor.ValidatingPanel</code>  вместо  <code>WizardDescriptor.Panel</code> :</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class DemoWizardPanel1 implements WizardDescriptor.ValidatingPanel</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>В начале класса следует изменить объявление  <code>JComponent</code>  на объявление</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private DemoVisualPanel1 component;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>При реализации необходимо использовать абстрактный метод, например:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Override
public void validate() throws WizardValidationException {

    String name = component.getNameTextField().getText();
    if (name.equals("")){
        throw new WizardValidationException(null, "Invalid Name", null);
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Запустите модуль. Нажмите кнопку "Далее", не вводя ничего в поле "Имя". После этого должен появиться нижеприведенный результат. Обратите внимание, что если данные не прошли проверку, то переход к следующей панели невозможен:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_validation1.png" alt="wizard validation1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Также, если поле было оставлено пустым, можно сделать кнопку "Далее" неактивной. Сначала необходимо объявить вверху класса логические переменные:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private boolean isValid = true;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Затем переопределить  <code>isValid()</code>  следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Override
public boolean isValid() {
    return isValid;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Тогда, при вызове  <code>validate()</code> , который происходит при нажатии кнопки "Далее", возвращается значение "false":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Override
public void validate() throws WizardValidationException {

    String name = component.getNameTextField().getText();
    if (name.equals("")) {
        *isValid = false;*
        throw new WizardValidationException(null, "Недопустимое имя", null);
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Другой вариант заключается в первоначальном задании значения логической переменной "false". Затем реализуется  <code>DocumentListener</code> , который добавляет слушатель для поля и, при вводе пользователем в этом поле текста, изменяет значения логической переменной на "true" и вызывает метод  <code>isValid()</code> .</p>
</div>
<div class="paragraph">
<p>Итак, была рассмотрена проверка данных, вводимых пользователем.</p>
</div>
<div class="paragraph">
<p>Для получения дополнительных сведений о проверке данных, введенных пользователем, обратитесь к примеру Тома Вилера в конце данного учебного курса.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_сохранение_данных_при_перезапуске">Сохранение данных при перезапуске</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе описана процедура сохранения данных при закрытии приложения, и их дальнейшее получение мастером при повторном запуске.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>В  <code>DemoWizardPanel1.java</code>  переопределите методы  <code>readSettings</code>  и  <code>storeSettings</code>  следующим образом:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">*JTextField nameField = ((DemoVisualPanel1) getComponent()).getNameTextField();
JTextField addressField = ((DemoVisualPanel1) getComponent()).getAddressTextField();*

@Override
public void readSettings(Object settings) {
    *nameField.setText(NbPreferences.forModule(DemoWizardPanel1.class).get("namePreference", ""));
    addressField.setText(NbPreferences.forModule(DemoWizardPanel1.class).get("addressPreference", ""));*
}

@Override
public void storeSettings(Object settings) {
    ((WizardDescriptor) settings).putProperty("name", nameField.getText());
    ((WizardDescriptor) settings).putProperty("address", addressField.getText());
    *NbPreferences.forModule(DemoWizardPanel1.class).put("namePreference", nameField.getText());
    NbPreferences.forModule(DemoWizardPanel1.class).put("addressPreference", addressField.getText());*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Запустите модуль еще раз и введите имя и адрес в первой панели мастера:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_nbpref1.png" alt="wizard nbpref1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Закройте приложение, откройте меню "Файлы" и просмотрите свойства файла в папке  <code>build</code> приложения. На экране должны появиться следующие настройки:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_nbpref2.png" alt="wizard nbpref2">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Еще раз запустите приложение. При следующем открытии мастера для задания значений в полях мастера будут автоматически использованы ранее заданные настройки.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Итак, было рассмотрено сохранение данных при перезапуске.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_брэндинг_мастера">Брэндинг мастера</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе описана процедура изменения наименования кнопки "Далее" в инфраструктуре мастера на надпись "Дополнительно".</p>
</div>
<div class="paragraph">
<p>Под термином "брэндинг" подразумевается настройка, которая обычно заключается в незначительных изменениях с сохранением языка интерфейса, в то время как под понятием "интернационализация" или "локализация" подразумевается перевод на другие языки. Сведения относительно локализации модулей NetBeans приведены  <a href="http://translatedfiles.netbeans.org/index-l10n.html">здесь</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>В окне "Файлы" разверните папку  <code>branding</code>  и создайте нижеприведенную структуру файлов и папок:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_branding-1.png" alt="wizard branding 1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Содержимое файла задайте следующим образом:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">CTL_NEXT=&amp;amp;Дополнительно &gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Для остальных строк можно выполнить следующий брэндинг:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">CTL_CANCEL
CTL_PREVIOUS
CTL_FINISH
CTL_ContentName</code></pre>
</div>
</div>
<div class="paragraph">
<p>Кнопка "CTL_ContentName" по умолчанию настроена на "Шаги" и используется в левой панели мастера, если свойство "WizardPanel_autoWizardStyle" не было установлено как "FALSE".</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Запустите приложение. Кнопка "Далее" будет подписана "Дополнительно":</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_branding-2.png" alt="wizard branding 2">
</div>
</div>
<div class="paragraph">
<p>Для удаления левой панели мастера можно использовать файл  <code>DemoWizardAction.java</code> , как было описано ранее:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java"> wizardDescriptor.putProperty("WizardPanel_autoWizardStyle", Boolean.FALSE);</code></pre>
</div>
</div>
<div class="paragraph">
<p>В результате вышеописанных настроек вид мастера будет следующим:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wizard_branding-3.png" alt="wizard branding 3">
</div>
</div>
<div class="paragraph">
<p>Был рассмотрен брэндинг строк, определенных в инфраструктуре мастера и создание собственной брендированной версии.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_дополнительные_сведения">Дополнительные сведения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Некоторые дополнительные сведения доступны в сети:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Сайт о NetBeans Тома Вилера (щелкните изображение внизу):</p>
</li>
</ul>
</div>
<div class="openblock feature">
<div class="content">
<div class="imageblock left">
<div class="content">
<a class="image" href="http://www.tomwheeler.com/netbeans/"><img src="images/wizard_tom.png" alt="wizard tom"></a>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Вышеприведенные примеры, хотя и были написаны для среды NetBeans 5.5, были успешно опробованы в среде IDE NetBeans 6.5.1 в операционной системе Ubuntu Linux с JDK 1.6.</p>
</div>
<div class="paragraph">
<p>Особенно полезны данные примеры для демонстрации проверки пользовательских данных.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Блог Джирджена (Geertjan)</p>
</li>
<li>
<p><a href="http://blogs.oracle.com/geertjan/entry/how_wizards_work">Как работает мастер. Часть 1: введение</a></p>
</li>
<li>
<p><a href="http://blogs.oracle.com/geertjan/entry/how_wizards_work_part_2">Как работает мастер. Часть 2: различные типы</a></p>
</li>
<li>
<p><a href="http://blogs.oracle.com/geertjan/entry/how_wizards_work_part_3">Как работает мастер. Часть 3: ваш первый мастер</a></p>
</li>
<li>
<p><a href="http://blogs.oracle.com/geertjan/entry/how_wizards_work_part_4">Как работает мастер. Часть 4: ваш собственный итератор</a></p>
</li>
<li>
<p><a href="http://blogs.oracle.com/geertjan/entry/how_wizards_work_part_5">Как работает мастер. Часть 5: использование и внедрение существующих панелей</a></p>
</li>
<li>
<p><a href="http://blogs.oracle.com/geertjan/entry/creating_a_better_java_class">Создание мастера Better Java Class</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_управление_версиями">Управление версиями</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Версия</strong></th>
<th class="tableblock halign-left valign-top"><strong>Дата</strong></th>
<th class="tableblock halign-left valign-top"><strong>Изменения</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">31 марта 2009 г.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Первоначальная версия. Выполнить:</p>
<p class="tableblock">* <span class="line-through">Добавить раздел о проверке данных, введенных пользователем.</span>
* <span class="line-through">Добавить раздел о сохранении данных мастером и загрузке данных из мастера.</span>
* Добавить таблицу с перечислением всех свойств WizardDescriptor.
* Добавить таблицу с перечислением и объяснением всех классов Wizard API.
* Добавить ссылки на Javadoc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 апреля 2009 г.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Добавлен раздел о проверке данных с примером программного кода, который делает кнопку "Далее" неактивной. Также добавлен раздел о сохранении состояния.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 апреля 2009 г.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Приведены комментарии Тома Вилера, переписан раздел о брэндинге, так чтобы было больше информации о самом брэндинге, добавлены ссылки на сведения о локализации.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
        
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/691/nbm-wizard_ru.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2022 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
