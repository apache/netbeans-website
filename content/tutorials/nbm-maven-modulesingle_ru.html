
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Создание модуля на платформе NetBeans с помощью Maven</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Создание модуля на платформе NetBeans с помощью Maven - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, Создание модуля на платформе NetBeans с помощью Maven">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet"> 
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 15</h1>
            <p><a class="button success" href="/download/nb15/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Создание модуля на платформе NetBeans с помощью Maven</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/nbm-maven-modulesingle_ru.asciidoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_использование_maven_в_среде_ide">Использование Maven в среде IDE</a>
<ul class="sectlevel2">
<li><a href="#_настройка_параметров_maven">Настройка параметров Maven</a></li>
<li><a href="#_просмотр_репозиториев_maven">Просмотр репозиториев Maven</a></li>
</ul>
</li>
<li><a href="#_создание_проекта_модуля_на_платформе_netbeans">Создание проекта модуля на платформе NetBeans</a>
<ul class="sectlevel2">
<li><a href="#_создание_модуля">Создание модуля</a></li>
<li><a href="#_создание_класса_dataobject">Создание класса DataObject</a></li>
</ul>
</li>
<li><a href="#_сборка_и_запуск_проекта">Сборка и запуск проекта</a>
<ul class="sectlevel2">
<li><a href="#_определение_местоположения_установки_netbeans">Определение местоположения установки NetBeans</a></li>
<li><a href="#_запуск_модуля">Запуск модуля</a></li>
</ul>
</li>
<li><a href="#_добавление_действия_для_типа_файлов">Добавление действия для типа файлов</a>
<ul class="sectlevel2">
<li><a href="#_создание_класса_действия">Создание класса действия</a></li>
<li><a href="#_присвоение_действию_поведения">Присвоение действию поведения</a></li>
</ul>
</li>
<li><a href="#_создание_окна_для_типа_файлов">Создание окна для типа файлов</a></li>
<li><a href="#_дополнительные_сведения">Дополнительные сведения</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>В этом документе описываются принципы создания проекта модуля на платформе NetBeans из архетипа Maven, принципы построения и установки этого модуля в среде IDE. В этом учебном курсе будет создан простой проект модуля, позволяющий после его установки создавать в проектах новый тип файлов. Модуль также создает действие меню, доступное при выборе нового типа файлов.</p>
</div>
<div class="paragraph">
<p>Этот документ основан на  <a href="https://netbeans.apache.org/tutorials/nbm-filetype_ru.html">Учебном курсе по типам файлов NetBeans</a> на базе Ant и описывает различия между Ant и Maven при разработке модулей на платформе NetBeans. После изучения отличий Maven от Ant можно легко пройти другие учебные курсы в  <a href="https://netbeans.apache.org/kb/docs/platform_ru.html">Учебной карте по платформе NetBeans</a>.</p>
</div>
<div class="paragraph">
<p>При отсутствии опыта работы с платформой NetBeans можно посмотреть серию демонстрационных роликов  <a href="https://netbeans.apache.org/tutorials/nbm-10-top-apis.html">10 лучших интерфейсов API NetBeans</a>.</p>
</div>
<div class="paragraph">
<p><strong>Содержимое</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#config">Использование Maven в среде IDE</a></p>
</li>
<li>
<p><a href="#config1">Настройка параметров Maven</a></p>
</li>
<li>
<p><a href="#config2">Просмотр репозиториев Maven</a></p>
</li>
<li>
<p><a href="#01">Создание проекта модуля на платформе NetBeans</a></p>
</li>
<li>
<p><a href="#01a">Создание модуля</a></p>
</li>
<li>
<p><a href="#01b">Создание класса DataObject</a></p>
</li>
<li>
<p><a href="#02">Сборка и запуск проекта модуля</a></p>
</li>
<li>
<p><a href="#02a">Определение местоположения установки NetBeans</a></p>
</li>
<li>
<p><a href="#02b">Запуск модуля</a></p>
</li>
<li>
<p><a href="#03">Добавление действия для типа файлов</a></p>
</li>
<li>
<p><a href="#03a">Создание класса действия</a></p>
</li>
<li>
<p><a href="#03b">Присвоение действию поведения</a></p>
</li>
<li>
<p><a href="#04">Создание окна для типа файлов</a></p>
</li>
<li>
<p><a href="#05">Создание окна с несколькими представлениями</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Для работы с этим учебным курсом требуется программное обеспечение и ресурсы, перечисленные в следующей таблице.</strong></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Для разработки приложений на платформе NetBeans не требуется загружать отдельную версию этой платформы. Как правило, разработка приложений и модулей осуществляется в среде IDE NetBeans, затем необходимо просто включить требуемые модули для выполнения платформы NetBeans и созданного приложения.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Перед изучением этого учебного курса можно ознакомиться со следующей документацией:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://wiki.netbeans.org/MavenBestPractices">Практические рекомендации по Apache Maven в NetBeans 6.x</a>;</p>
</li>
<li>
<p><a href="http://www.sonatype.com/books/maven-book/reference/introduction.html">Глава 1. Введение в Apache Maven</a> (из книги  <a href="http://www.sonatype.com/books/maven-book/reference/public-book.html">Maven: полное руководство</a>)</p>
</li>
<li>
<p><a href="https://netbeans.apache.org/kb/docs/java/gui-functionality_ru.html">Введение в разработку графического интерфейса </a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_использование_maven_в_среде_ide">Использование Maven в среде IDE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Если это первый опыт работы с Maven, следует проверить параметры настройки и обозреватель репозиториев Maven.</p>
</div>
<div class="sect2">
<h3 id="_настройка_параметров_maven">Настройка параметров Maven</h3>
<div class="paragraph">
<p>Для настройки поведения Maven в среде IDE и проверки корректности этой настройки перейдите на вкладку Maven в окне "Параметры".</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Выберите категорию "Разное" в окне "Параметры" и перейдите на вкладку Maven.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Укажите папку установки Maven (требуется версия 2.0.9 или более поздняя).</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Проверьте корректность адреса к локальному репозиторию Maven.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Нажмите кнопку "ОК".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>В большинстве случаев при использовании типичной настройки Maven данные в окне "Параметры" уже корректны.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Поддержка Maven активируется как часть набора функциональных возможностей Java SE. Если в окне "Параметры" вкладка Maven недоступна, подтвердите активацию Java SE при создании приложения Java.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_просмотр_репозиториев_maven">Просмотр репозиториев Maven</h3>
<div class="paragraph">
<p>Артефакты, используемые Maven для создания всех проектов, сохраняются в локальном репозитории Maven. Если артефакт объявлен как зависимость проекта, он загружается в локальный репозиторий из одного из зарегистрированных удаленных репозиториев.</p>
</div>
<div class="paragraph">
<p>Репозиторий NetBeans и некоторые известные индексированные репозитории Maven зарегистрированы и включены в список окна "Обозреватель репозитория" по умолчанию. Репозиторий NetBeans содержит большинство общедоступных артефактов, требуемых для создания проекта. Обозреватель репозиториев Maven можно использовать для просмотра содержимого локальных и удаленных репозиториев. Для просмотра локальных артефактов разверните узел "Локальный репозиторий". Артефакты, указанные в узлах удаленного репозитория, могут быть добавлены в качестве зависимостей проекта, однако не все из них представлены локально. Они добавляются к локальному репозиторию только в том случае, если объявляются в качестве зависимостей проекта.</p>
</div>
<div class="paragraph">
<p>Чтобы открыть обозреватель репозиториев Maven:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>выберите в главном меню "Окно" &gt; "Прочее" &gt; "Обозреватель репозиториев Maven".</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-quickstart68_maven-nbm-netbeans-repo.png" alt="maven quickstart68 maven nbm netbeans repo">
</div>
<div class="title">Figure 1. Снимок экрана: обозреватель репозиториев Maven</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_проекта_модуля_на_платформе_netbeans">Создание проекта модуля на платформе NetBeans</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе сначала будет создан проект модуля на платформе NetBeans, а затем для нового типа файлов - элемент DataObject.</p>
</div>
<div class="sect2">
<h3 id="_создание_модуля">Создание модуля</h3>
<div class="paragraph">
<p>В этом упражнении для построения проекта модуля на платформе NetBeans из архетипа Maven используется мастер создания проекта.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Откройте мастер создания проекта и выберите в категории Maven "Модуль Maven NetBeans". Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>В поле "Имя проекта" введите <strong>AbcFileType</strong>. Нажмите кнопку "Готово".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Готово" в среде IDE создается проект AbcFileType. Обратите внимание на POM: Maven будет использовать элемент  <code> <a href="http://maven.apache.org/plugins/maven-jar-plugin/">maven-jar-plugin</a></code>  для построения файла JAR, а элемент  <code> <a href="http://bits.netbeans.org/mavenutilities/nbm-maven-plugin/">nbm-maven-plugin</a></code>  добавит этот файл в пакет в качестве модуля на платформе NetBeans  <code>nbm</code> .</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;com.mycompany&lt;/groupId&gt;
    &lt;artifactId&gt;AbcFileType&lt;/artifactId&gt;
    *&lt;packaging&gt;nbm&lt;/packaging&gt;*
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;AbcFileType NetBeans Module&lt;/name&gt;
    ...
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
                *&lt;artifactId&gt;nbm-maven-plugin&lt;/artifactId&gt;*
                &lt;extensions&gt;true&lt;/extensions&gt;
            &lt;/plugin&gt;
            ...
            &lt;plugin&gt;
            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                *&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;*
                &lt;version&gt;2.2&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;!-- to have the jar plugin pickup the nbm generated manifest --&gt;
                    &lt;useDefaultManifestFile&gt;true&lt;/useDefaultManifestFile&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_создание_класса_dataobject">Создание класса DataObject</h3>
<div class="paragraph">
<p>В этом разделе будет использован мастер создания файла для создания и распознавания нового типа файлов с именем  <code>.abc</code> . Мастер создаст  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-loaders/org/openide/loaders/DataObject.html">DataObject</a></code> , средство разрешения типа MIME и шаблон для файлов  <code>abc</code> , а также изменит файл  <code>layer.xml</code> , чтобы добавить регистрационные записи для нового типа файлов.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>В окне "Проекты" щелкните правой кнопкой мыши узел проекта и выберите "Создать" &gt; "Тип файлов".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>На панели "Распознавание файлов" введите <strong>text/x-abc</strong> в поле "Тип MIME" и <strong>.abc .ABC</strong> в поле "Расширение файла". Нажмите кнопку "Далее".
image::images/maven-single_maven-single-new-filetype-wizard.png[title="Мастер создания файла"]</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>В качестве префикса имени класса введите <strong>Abc</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Нажмите кнопку "Обзор" и выберите изображение размером 16x16 пикселей в качестве значка нового типа файлов. Нажмите кнопку "Готово".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Можно сохранить на компьютере изображение  <code> <a href="images/maven-crud_abc16.png">abc16.png</a></code>  (
image::images/maven-crud_abc16.png[title="16x16"]) и указать его в мастере.</p>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Готово" среда IDE создает класс  <code>AbcDataObject</code>  и копирует этот значок типа файлов в пакет каталога  <code>src/main/resources</code>  в узле "Другие источники".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-single_maven-single-projects1.png" alt="maven single maven single projects1" width="Проекты""">
</div>
<div class="title">Figure 2. Снимок экрана: окно </div>
</div>
<div class="paragraph">
<p>В окне "Проекты" отображается, что мастер создал средство разрешения типа MIME ( <code>AbcResolver.xml</code> ) и шаблон для файлов ( <code>AbcTemplate.abc</code> ) в каталоге  <code>src/main/resources</code></p>
</div>
<div class="paragraph">
<p>Дополнительные сведения о файлах, создаваемых средой IDE приведены в документе  <a href="https://netbeans.apache.org/wiki/devfaqdataobject">Что такое DataObject?</a> и в разделе  <a href="nbm-filetype_ru.html#recognizing">Распознавание файлов Abc</a>  <a href="nbm-filetype_ru.html">Учебного курса по типу файлов NBN</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_сборка_и_запуск_проекта">Сборка и запуск проекта</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе будет выполнена настройка модуля для его установки в текущую версию среды IDE. Новый экземпляр среды IDE запускается при запуске модуля.</p>
</div>
<div class="sect2">
<h3 id="_определение_местоположения_установки_netbeans">Определение местоположения установки NetBeans</h3>
<div class="paragraph">
<p>По умолчанию при использовании архетипа Maven для создания модуля на платформе NetBeans установка целевой платформы NetBeans не указывается. Проект можно построить, однако при попытке запустить его до указания каталога установки будет появляться сообщение в окне "Вывод", подобное сообщению на рисунке ниже.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-single_output-build-error.png" alt="maven single output build error" width="Вывод""">
</div>
<div class="title">Figure 3. Сообщение об ошибке построения в окне </div>
</div>
<div class="paragraph">
<p>Чтобы установить и запустить модуль IDE, необходимо изменить элемент  <code>nbm-maven-plugin</code>  в POM для указания пути к каталогу установки.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Раскройте узел "Файлы проекта" и откройте в редакторе файл  <code>pom.xml</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Укажите путь к каталогу установки NetBeans, изменив элемент  <code>nbm-maven-plugin</code>  для добавления элемента  <code>&lt;netbeansInstallation&gt;</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
    &lt;artifactId&gt;nbm-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;3.2&lt;/version&gt;
    &lt;extensions&gt;true&lt;/extensions&gt;
    *&lt;configuration&gt;
       &lt;netbeansInstallation&gt;/home/me/netbeans-6.9&lt;/netbeansInstallation&gt;
    &lt;/configuration&gt;*
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Для этого пути необходимо указать каталог, содержащий каталог  <code>bin</code>  с выполняемым файлом.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Например, в OS X путь может выглядеть следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;netbeansInstallation&gt;/Applications/NetBeans/NetBeans 6.9.app/Contents/Resources/NetBeans&lt;/netbeansInstallation&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_запуск_модуля">Запуск модуля</h3>
<div class="paragraph">
<p>После указания каталога установки NetBeans модуль можно построить и запустить.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Щелкните правой кнопкой мыши узел проекта и выберите "Построить".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Щелкните правой кнопкой мыши узел проекта и выберите "Выполнить".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Выполнить" среда IDE запускает новый установленный модуль. Чтобы подтвердить корректность работы нового модуля, создайте новый проект и затем с помощью мастера создайте файл  <code>abc</code> . Например, можно создать простое приложение Java, открыть мастер создания файла и выбрать в категории "Прочее" тип файлов Empty Abc.</p>
</div>
<div class="paragraph">
<p>При создании нового файла укажите исходный файл, чтобы просмотреть его в окне "Проекты". Мастер создания типа файлов по умолчанию создает файл на корневом уровне проекта.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-single_wizard-new-abc-file.png" alt="maven single wizard new abc file">
</div>
<div class="title">Figure 4. Мастер создания файла с типом файлов Abc</div>
</div>
<div class="paragraph">
<p>После создания новый файл abc отображается в окне "Проекты" со значком своего типа. Откройте этот файл в редакторе: его содержимое создано из шаблона файла.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-single_maven-single-projects-abcfile.png" alt="maven single maven single projects abcfile" width="Проекты" и его содержимое в редакторе"">
</div>
<div class="title">Figure 5. Файл Abc в окне </div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_добавление_действия_для_типа_файлов">Добавление действия для типа файлов</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В этом разделе будет добавлено действие, вызываемое щелчком правой кнопки мыши в контекстном меню узла для нового типа файлов.</p>
</div>
<div class="sect2">
<h3 id="_создание_класса_действия">Создание класса действия</h3>
<div class="paragraph">
<p>В этом упражнении будет использован мастер создания действия для создания класса Java, выполняющего действие для нового типа файлов. Мастер также зарегистрирует этот класс в файле  <code>layer.xml</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Щелкните узел проекта правой кнопкой мыши и выберите "Создать" &gt; "Действие".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>В панели "Тип действия" выберите "Включено по условию" и введите в поле "Класс cookie" <strong>com.mycompany.abcfiletype.AbcDataObject</strong>. Нажмите кнопку "Далее".
image::images/maven-single_maven-single-newactionwizard.png[title="Мастер создания действия"]</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Выберите в контекстном меню "Категория" команду "Изменить" и снимите флажок "Глобальный пункт меню".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Выберите "Пункт контекстного меню типов файлов" и укажите <strong>text/x-abc</strong> в контекстном меню "Тип содержимого". Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Введите <strong>MyAction</strong> в поле "Имя класса" и <strong>My Action</strong> в поле "Отображаемое имя". Нажмите кнопку "Готово".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>При нажатии кнопки "Готово" создается  <code>MyAction.java</code>  в исходном файле  <code>com.mycompany.abcfiletype</code> . Откройте в редакторе файл  <code>layer.xml</code> : мастер добавил подробные данные о новом действии для типа файлов в элемент  <code>Edit</code>  папки  <code>Actions</code> .</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;folder name="Actions"&gt;
    &lt;folder name="Edit"&gt;
        *&lt;file name="com-mycompany-abcfiletype-MyAction.instance"&gt;*
            &lt;attr name="delegate" methodvalue="org.openide.awt.Actions.inject"/&gt;
            &lt;attr name="displayName" bundlevalue="com.mycompany.abcfiletype.Bundle#CTL_MyAction"/&gt;
            &lt;attr name="injectable" stringvalue="com.mycompany.abcfiletype.MyAction"/&gt;
            &lt;attr name="instanceCreate" methodvalue="org.openide.awt.Actions.context"/&gt;
            &lt;attr name="noIconInMenu" boolvalue="false"/&gt;
            &lt;attr name="selectionType" stringvalue="EXACTLY_ONE"/&gt;
            &lt;attr name="type" stringvalue="com.mycompany.abcfiletype.AbcDataObject"/&gt;
        &lt;/file&gt;
    &lt;/folder&gt;
&lt;/folder&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Также мастер создал элементы в папках  <code>Loaders</code>  и  <code>Factories</code> , присваиваемые новому типу файлов. Действия меню для типа файлов  <code>abc</code>  указываются в узле  <code>Actions</code> , а элемент  <code>DataLoader</code>  — в узле  <code>Factories</code> .</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml"> &lt;folder name="Loaders"&gt;
    &lt;folder name="text"&gt;
        *&lt;folder name="x-abc"&gt;
            &lt;folder name="Actions"&gt;
                &lt;file name="com-mycompany-abcfiletype-MyAction.shadow"&gt;*
                    &lt;attr name="originalFile" stringvalue="Actions/Edit/com-mycompany-abcfiletype-MyAction.instance"/&gt;
                    *&lt;attr name="position" intvalue="0"/&gt;*
                &lt;/file&gt;
                &lt;file name="org-openide-actions-CopyAction.shadow"&gt;
                    &lt;attr name="originalFile" stringvalue="Actions/Edit/org-openide-actions-CopyAction.instance"/&gt;
                    &lt;attr name="position" intvalue="400"/&gt;
                &lt;/file&gt;
                ...
            &lt;/folder&gt;
            *&lt;folder name="Factories"&gt;
                &lt;file name="AbcDataLoader.instance"&gt;*
                    &lt;attr name="SystemFileSystem.icon" urlvalue="nbresloc:/com/mycompany/abcfiletype/abc16.png"/&gt;
                    &lt;attr name="dataObjectClass" stringvalue="com.mycompany.abcfiletype.AbcDataObject"/&gt;
                    &lt;attr name="instanceCreate" methodvalue="org.openide.loaders.DataLoaderPool.factory"/&gt;
                    &lt;attr name="mimeType" stringvalue="text/x-abc"/&gt;
                &lt;/file&gt;
            &lt;/folder&gt;
        &lt;/folder&gt;
    &lt;/folder&gt;
&lt;/folder&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Позиция элемента My Action в контекстном меню определяется атрибутом  <code>position</code>  ( <code> &lt;attr name="position" intvalue="0"/&gt;</code> ). По умолчанию элементу  <code>intvalue</code>  атрибута нового действия присваивается значение  <code>0</code> , что предоставляет этому действию самую верхнюю позицию в меню. Можно изменить этот порядок, изменив значение  <code>intvalue</code> . Например, если изменить значение  <code>intvalue</code>  на  <code>200</code> , пункт меню My Action будет находиться ниже пункта "Открыть" (у действия "Открыть" значение  <code>intvalue</code>  равно  <code>100</code> ).</p>
</div>
</div>
<div class="sect2">
<h3 id="_присвоение_действию_поведения">Присвоение действию поведения</h3>
<div class="paragraph">
<p>Теперь необходимо добавить код действия. В этом примере будет добавлен код, использующий  <code>DialogDisplayer</code>  для открытия диалогового окна при выборе действия в контекстном меню. Чтобы использовать  <code>DialogDisplayer</code> , также необходимо объявить прямую зависимость от  <code>org.openide.dialogs</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Измените метод  <code>actionPerformed(ActionEvent ev)</code>  в  <code>MyAction.java</code> , чтобы открыть диалоговое окно при выборе My Action.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Override
public void actionPerformed(ActionEvent ev) {
   *FileObject f = context.getPrimaryFile();
   String displayName = FileUtil.getFileDisplayName(f);
   String msg = "This file is " + displayName + ".";
   NotifyDescriptor nd = new NotifyDescriptor.Message(msg);
   DialogDisplayer.getDefault().notify(nd);*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Исправьте операторы импорта и подтвердите импорт  <code><strong>org.openide.filesystems.FileObject</strong></code> . Сохраните изменения.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>После исправления был добавлен оператор импорта для  <code>org.openide.DialogDisplayer</code> . Теперь необходимо объявить зависимость от артефакта  <code>org.openide.dialogs</code>  как прямую зависимость, а не транзитивную.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Щелкните правой кнопкой мыши файл JAR  <code>org.openide.dialogs</code>  в узле проекта "Библиотеки" и выберите команду "Объявить как прямую зависимость".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Теперь можно протестировать модуль, чтобы подтвердить корректность работы нового действия.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Чтобы запустить модуль, необходимо сначала очистить его и построить.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-single_maven-single-action-popup.png" alt="maven single maven single action popup" width="Проекты" и его содержимое в редакторе"">
</div>
<div class="title">Figure 6. Файл Abc в окне </div>
</div>
<div class="paragraph">
<p>Щелкните правой кнопкой мыши узел типа файлов  <code>abc</code> : элемент My Action является одним из пунктов контекстного меню.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_окна_для_типа_файлов">Создание окна для типа файлов</h2>
<div class="sectionbody">
<div class="paragraph">
<p>По умолчанию новый тип файлов открывается в базовом текстовом редакторе. Если для нового типа файлов не требуется использование редактора, можно создать новое окно специально для редактирования этого типа файлов. Затем можно изменить оконный компонент, чтобы предоставить другие способы редактирования файла. Например, можно создать визуальный редактор. В этом разделе будет создан новый оконный компонент специально для файлов нового типа.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Щелкните узел проекта правой кнопкой мыши и выберите "Создать" &gt; "Окно".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Выберите в контекстном меню значение <strong>editor</strong> и установите флажок "Открывать при запуске приложения". Нажмите кнопку "Далее".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>В качестве префикса имени класса введите <strong>Abc</strong>. Нажмите кнопку "Готово".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Откройте в редакторе  <code>AbcDataObject.java</code>  и измените конструктор класса, чтобы использовать  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-loaders/org/openide/loaders/OpenSupport.html">OpenSupport</a></code>  вместо  <code>DataEditorSupport</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public AbcDataObject(FileObject pf, MultiFileLoader loader) throws DataObjectExistsException, IOException {
    super(pf, loader);
    CookieSet cookies = getCookieSet();
    *cookies.add((Node.Cookie) new AbcOpenSupport(getPrimaryEntry()));*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Создайте класс  <code>AbcOpenSupport</code> , вызываемый конструктором.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Нажмите сочетание клавиш ALT+ВВОД в строке, содержащей вызов  <code>AbcOpenSupport</code> , чтобы создать элемент  <code>AbcOpenSupport</code>  в пакете  <code>com.mycompany.abcfiletype</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Измените  <code>AbcOpenSupport</code> , чтобы расширить  <code>OpenSupport</code>  и реализовать  <code>OpenCookie</code>  и  <code>CloseCookie</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">class AbcOpenSupport *extends OpenSupport implements OpenCookie, CloseCookie* {</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Реализуйте абстрактные методы (ALT+ВВОД) и внесите в класс следующие изменения:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    public AbcOpenSupport(*AbcDataObject.Entry entry*) {
        *super(entry);*
    }

    @Override
    protected CloneableTopComponent createCloneableTopComponent() {
        *AbcDataObject dobj = (AbcDataObject) entry.getDataObject();
        AbcTopComponent tc = new AbcTopComponent();
        tc.setDisplayName(dobj.getName());
        return tc;*
    }</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Откройте в редакторе  <code>AbcTopComponent</code>  и измените класс, чтобы расширить  <code>CloneableTopComponent</code> вместо  <code>TopComponent</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public final class AbcTopComponent extends *CloneableTopComponent* {</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Измените значение модификатора класса с  <code>private</code>  на  <code>public</code> .<strong>public</strong></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java"> static AbcTopComponent instance;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>Исправьте операторы импорта и сохраните измененные данные.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Теперь попробуйте запустить модуль еще раз после очистки и построения проекта.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-single_maven-single-newfile-window.png" alt="maven single maven single newfile window" width="Проекты" и его содержимое в редакторе"">
</div>
<div class="title">Figure 7. Файл Abc в окне </div>
</div>
<div class="paragraph">
<p>Файлы abc открываются теперь в новом окне, а не в базовом редакторе.</p>
</div>
<div class="paragraph">
<p>В данном учебном курсе были рассмотрены принципы создания модуля на платформе NetBeans с помощью архетипа Maven, а также принципы его запуска. Также был рассмотрен процесс изменения проекта POM для указания местоположения установки целевой платформы NetBeans, чтобы команда "Выполнить" в среде IDE устанавливала модуль и запускала новый экземпляр этой среды. Кроме того, были рассмотрены некоторые принципы работы с типами файлов и элементами  <code>DataObjects</code> . Для получения дополнительных сведений об этом обратитесь к  <a href="https://netbeans.apache.org/tutorials/nbm-filetype_ru.html">Учебному курсу по типам файлов NetBeans</a>. Дополнительные примеры построения приложений и модулей на платформе NetBeans приведены в учебных курсах  <a href="https://netbeans.apache.org/kb/docs/platform_ru.html">Учебной карты по платформе NetBeans</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_дополнительные_сведения">Дополнительные сведения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Дополнительные сведения о создании и разработке приложений приведены в следующих ресурсах:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://netbeans.apache.org/kb/docs/platform_ru.html">Учебная карта по платформе NetBeans</a></p>
</li>
<li>
<p><a href="http://bits.netbeans.org/dev/javadoc/">Документация Javadoc по интерфейсам API в среде NetBeans</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Если у вас возникли вопросы по платформе NetBeans, можно отправить их в список рассылки <a href="mailto:dev@platform.netbeans.org">dev@platform.netbeans.org</a> либо ознакомиться с  <a href="https://mail-archives.apache.org/mod_mbox/netbeans-dev/">Архивом списка рассылки по платформе NetBeans</a>.</p>
</div>
</div>
</div>
        
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/nbm-maven-modulesingle_ru.asciidoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.asciidoc">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2022 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
