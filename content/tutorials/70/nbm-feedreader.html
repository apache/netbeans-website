
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans Platform Feed Reader Tutorial</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans Platform Feed Reader Tutorial - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, NetBeans Platform Feed Reader Tutorial">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">NetBeans Platform Feed Reader Tutorial</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/70/nbm-feedreader.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_prerequisite_knowledge">Prerequisite Knowledge</a></li>
<li><a href="#_setting_up_the_application">Setting Up the Application</a>
<ul class="sectlevel2">
<li><a href="#_creating_the_application_skeleton">Creating the Application Skeleton</a></li>
<li><a href="#_wrapping_the_libraries">Wrapping the Libraries</a></li>
<li><a href="#_creating_the_module_project">Creating the Module Project</a></li>
</ul>
</li>
<li><a href="#_creating_the_feed_reader_window">Creating the Feed Reader Window</a></li>
<li><a href="#_trying_out_the_application">Trying Out the Application</a></li>
<li><a href="#_adding_code_to_the_application">Adding Code to the Application</a>
<ul class="sectlevel2">
<li><a href="#_specifying_the_applications_dependencies">Specifying the Application&#8217;s Dependencies</a></li>
<li><a href="#_setting_dependencies_between_library_wrapper_modules">Setting Dependencies Between Library Wrapper Modules</a></li>
<li><a href="#_creating_the_rssfeeds_folder">Creating the RssFeeds Folder</a></li>
<li><a href="#_creating_the_feed_object">Creating the Feed Object</a></li>
<li><a href="#_extending_the_feed_window">Extending the Feed Window</a></li>
<li><a href="#_creating_the_root_node">Creating the Root Node</a></li>
<li><a href="#_creating_the_root_node_children">Creating the Root Node Children</a></li>
<li><a href="#_creating_the_add_feed_action">Creating the Add Feed Action</a></li>
<li><a href="#_creating_the_add_folder_action">Creating the Add Folder Action</a></li>
<li><a href="#_creating_the_feed_node">Creating the Feed Node</a></li>
<li><a href="#_creating_the_entry_node">Creating the Entry Node</a></li>
<li><a href="#_localizing_the_rssnode_class">Localizing the RssNode Class</a></li>
</ul>
</li>
<li><a href="#_run_the_application">Run the Application</a></li>
<li><a href="#_troubleshooting">Troubleshooting</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Welcome to the NetBeans Platform Feed Reader tutorial. The Feed Reader that you create in this tutorial is a simple RSS/Atom feed browser, modeled after the Sage plug-in for Mozilla Firefox. It presents a tree of feeds with subnodes representing individual feed entries that you can open in a browser.</p>
</div>
<div class="paragraph">
<p>To illustrate the end result, here you see the Feed Reader that you will create in this tutorial, displaying a feed entry from the  <a href="https://netbeans.org/rss-091.xml">NetBeans Highlights feed</a>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_70_feedreader.png" alt="feedreader 70 feedreader">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This document uses the NetBeans IDE 7.0 Release. If you are using an earlier version, see  <a href="691/nbm-feedreader.html">the previous version of this document</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisite_knowledge">Prerequisite Knowledge</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is not a beginner&#8217;s tutorial. You are assumed not only to be familiar with Java and with Swing, but with the basic concepts and processes of the NetBeans Platform. At the very least, you should be aware of the following two documents and, ideally, you will have worked through them and understood the topics they address:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://refcardz.dzone.com/refcardz/netbeans-platform-70">NetBeans Platform 7.0 DZone Refcard</a>. Anyone getting started with the NetBeans Platform must have this DZone RefCard, which explains the benefits, scope, and features of the NetBeans Platform. It outlines the most important APIs and provides many tips and tricks.</p>
</li>
<li>
<p><a href="nbm-quick-start.html">NetBeans Platform Quick Start</a>. This short tutorial guides you through a complete process for building a rich-client application on top of the NetBeans Platform. The major development stages and tools are covered, and a modular application is the result of the tutorial. This tutorial also introduces crucial classes used in the tutorial below, in particular the classes  <a href="http://bits.netbeans.org/dev/javadoc/org-openide-util-lookup/org/openide/util/Lookup.html">Lookup</a>,  <a href="http://bits.netbeans.org/dev/javadoc/org-openide-util-lookup/org/openide/util/LookupListener.html">LookupListener</a>, and  <a href="http://bits.netbeans.org/dev/javadoc/org-openide-util-lookup/org/openide/util/lookup/InstanceContent.html">InstanceContent</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_up_the_application">Setting Up the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In NetBeans IDE, building an application on top of the NetBeans Platform starts with generating a number of files which will serve as the foundation of your application. For example, the IDE provides several project wizards that set up all the basic files needed by modules and applications built on the NetBeans Platform.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>NetBeans Platform Application.</strong> A project that groups a set of module projects and library wrapper module projects that have dependencies on each other, and lets you deploy them together as a unit. Automatically included are a subset of the modules that make up the NetBeans Platform.</p>
</li>
<li>
<p><strong>Module Suite.</strong> Same as above, except that the pre-included modules are more than only those relating to the NetBeans Platform—in this case, all the modules that make up NetBeans IDE are included as well.</p>
</li>
<li>
<p><strong>Library Wrapper Module.</strong> A project that puts a library JAR file on its classpath and exports some or all of the JAR file&#8217;s packages from the module as public packages.</p>
</li>
<li>
<p><strong>Module.</strong> A project for implementing the functionality, business logic, and user interface of a module or application built on the NetBeans Platform.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_creating_the_application_skeleton">Creating the Application Skeleton</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Choose File &gt; New Project (Ctrl-Shift-N). Under Categories, select NetBeans Modules. Under Projects, select NetBeans Platform Application. You should see the following:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_70_paintapp-proj-wiz.png" alt="feedreader 70 paintapp proj wiz">
</div>
</div>
<div class="paragraph">
<p>Depending on the modules installed in your IDE, different categories may be shown in the Categories list above.</p>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the Name and Location panel, type  <code>FeedReader</code>  in Project Name. Change the Project Location to any directory on your computer.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_70_paintapp-proj-wiz2.png" alt="feedreader 70 paintapp proj wiz2">
</div>
</div>
<div class="paragraph">
<p>Click Finish.</p>
</div>
<div class="paragraph">
<p>The IDE creates the  <code>FeedReader</code>  project, which looks as follows in the Projects window:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_70_suite-project.png" alt="feedreader 70 suite project">
</div>
</div>
<div class="paragraph">
<p>The project will contain the custom module projects that you will create in the following sections.</p>
</div>
</div>
<div class="sect2">
<h3 id="_wrapping_the_libraries">Wrapping the Libraries</h3>
<div class="paragraph">
<p>You could bundle the entire Feed Reader application into a single module. However, the application needs the Rome, Rome Fetcher, and JDom libraries:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Rome.</strong> Reads RSS and Atom feeds, using a very simple API.</p>
</li>
<li>
<p><strong>Rome Fetcher.</strong> Allows the retrieval of feeds via HTTP.</p>
</li>
<li>
<p><strong>JDom.</strong> Is an XML parsing API. The only reason the Feed Reader will need it is because the Rome library uses it.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Later, if you want to extend the Feed Reader application with more modules that may use these libraries, it would be better for them to depend on just the library modules, rather than the entire Feed Reader. Also, library modules can be "autoloading", which means that NetBeans will only load them when needed. Until that happens, it won&#8217;t take up any memory at runtime.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the Modules node in the project in the Projects window, as shown below, and click Add New Library:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_70_add-lib0.png" alt="feedreader 70 add lib0">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the Select Library panel, browse to the folder where you downloaded JDom, and then select  <code>jdom.jar</code>  and  <code>LICENSE.txt.</code>  Click Next.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
In the Name and Location panel, accept all the defaults.</p>
</div>
<div class="paragraph">
<p>The library wrapper module project will be stored within the application project. You could also store it somewhere else, but for versioning purposes it is a good idea to put it within the application project. Therefore, the  <code>FeedReader</code>  application project is selected in the Add to Module Suite drop-down.</p>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>In the Basic Module Configuration panel, type  <code>org.jdom</code>  as the code name base and leave all the other defaults unchanged. Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The new library wrapper module project opens in the IDE and displays in the Projects window. You should now see the following in the Projects window:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_70_lib-wiz2.png" alt="feedreader 70 lib wiz2">
</div>
</div>
<div class="paragraph">
<p>A frequent point of confusion is that you see two different "jdom" nodes above, each accompanied by a purple icon. The first of these, above, shows the relationship of the "jdom" module to the whole application. The second is the "jdom" project itself, containing its sources and libraries. This pattern is used throughout the application, with each module being shown in two different ways, as above.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Return to step 1 of this section and create a library wrapper module project for Rome. Use code name base "org.rome" and accept all the other defaults.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Return to step 1 of this section and create a library wrapper module project for Rome Fetcher. Use code name base "org.fetcher" and accept all the other defaults.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You now have an application skeleton, with three library wrapper module projects, providing many useful Java classes that you will be able to make use of throughout this tutorial:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_70_lib-wiz3.png" alt="feedreader 70 lib wiz3">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_the_module_project">Creating the Module Project</h3>
<div class="paragraph">
<p>In this section, we create a project for the functionality that our application will provide. The project will make use of the classes made available by the library wrapper modules that we created in the previous section.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the Modules node in the application project in the Projects window, as shown below, and click Add New:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_70_module-project1.png" alt="feedreader 70 module project1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the Name and Location panel, type  <code>FeedReader</code>  in Project Name. Accept all the other defaults. Click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the Basic Module Configuration panel, type  <code>org.myorg.feedreader</code>  in Code Name Base.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Select "Generate XML Layer", but do not select "Generate OSGi Bundle". Leave the location of the XML layer file so that it will be stored in the main package, which has the name  <code>org/myorg/feedreader</code> . Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The IDE creates the FeedReader project. The project contains all of the module&#8217;s sources and project metadata, such as the project&#8217;s Ant build script. The project opens in the IDE. You can view its logical structure in the Projects window (Ctrl-1) and its file structure in the Files window (Ctrl-2). The Projects window should now show the following:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_70_module.png" alt="feedreader 70 module">
</div>
</div>
<div class="paragraph">
<p>You have now created the source structure of your new application. In the next section, we will begin adding some code.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_feed_reader_window">Creating the Feed Reader Window</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section you use the Window wizard to generate files that create a custom windowing component and an action to invoke it. Right after finishing this section, you are shown how to try out the files that the Window wizard generates for you.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the  <code>FeedReader</code>  module project node and choose New &gt; Other. Under Categories, select Module Development. Under File Types, select Window, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_70_windowcomp-wiz.png" alt="feedreader 70 windowcomp wiz">
</div>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the Basic Settings panel, select  <code>explorer</code>  in the drop-down list and click Open on Application Start, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_70_windowcomp-wiz2.png" alt="feedreader 70 windowcomp wiz2">
</div>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the Name and Location panel, type Feed in the Class Name Prefix field. In the Icon field, browse to the location where you saved  <code>rss16.gif (
image::images/feedreader_rss16.gif[]).</code>  The GIF file will be shown in the menu item that invokes the action. Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The new  <code>FeedTopComponent</code>  class is now shown in the Projects window, as well as in the Design view of the Matisse GUI Builder. Open it into the Source view and you should see the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">import org.openide.util.NbBundle;
import org.openide.windows.TopComponent;
import org.openide.windows.WindowManager;
import org.netbeans.api.settings.ConvertAsProperties;
import org.openide.awt.ActionID;
import org.openide.awt.ActionReference;

link:http://bits.netbeans.org/dev/javadoc/org-netbeans-modules-settings/org/netbeans/api/settings/ConvertAsProperties.html[@ConvertAsProperties](dtd = "-//org.myorg.feedreader//Feed//EN",
autostore = false)
link:http://bits.netbeans.org/dev/javadoc/org-openide-windows/org/openide/windows/TopComponent.Description.html[@TopComponent.Description](preferredID = "FeedTopComponent",
iconBase = "org/myorg/feedreader/rss16.gif",
persistenceType = TopComponent.PERSISTENCE_ALWAYS)
link:http://bits.netbeans.org/dev/javadoc/org-openide-windows/org/openide/windows/TopComponent.Registration.html[@TopComponent.Registration](mode = "explorer", openAtStartup = true)
link:http://bits.netbeans.org/dev/javadoc/org-openide-awt/org/openide/awt/ActionID.html[@ActionID](category = "Window", id = "org.myorg.feedreader.FeedTopComponent")
link:http://bits.netbeans.org/dev/javadoc/org-openide-awt/org/openide/awt/ActionReference.html[@ActionReference](path = "Menu/Window" /*, position = 333 */)
link:http://bits.netbeans.org/dev/javadoc/org-openide-windows/org/openide/windows/TopComponent.OpenActionRegistration.html[@TopComponent.OpenActionRegistration](displayName = "#CTL_FeedAction",
preferredID = "FeedTopComponent")
public final class FeedTopComponent extends  link:http://bits.netbeans.org/dev/javadoc/org-openide-windows/org/openide/windows/TopComponent.html[TopComponent] {

    private FeedTopComponent() {
        setName(NbBundle.getMessage(FeedTopComponent.class, "CTL_FeedTopComponent"));
        setToolTipText(NbBundle.getMessage(FeedTopComponent.class, "HINT_FeedTopComponent"));
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // &lt;editor-fold defaultstate="collapsed" desc="Generated Code"&gt;
    private void initComponents() {
        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 400, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 300, Short.MAX_VALUE)
        );
    }// &lt;/editor-fold&gt;
    // Variables declaration - do not modify
    // End of variables declaration

    @Override
    public void componentOpened() {
        // TODO add custom code on component opening
    }

    @Override
    public void componentClosed() {
        // TODO add custom code on component closing
    }

    void writeProperties(java.util.Properties p) {
        // better to version settings since initial version as advocated at
        // http://wiki.apidesign.org/wiki/PropertyFiles
        p.setProperty("version", "1.0");
    }

    void readProperties(java.util.Properties p) {
        String version = p.getProperty("version");
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When you build the module, the class annotations that you see at the top of the class above will be converted to XML tags in a file that will be contributed to the central registry of the application. The XML file will be named "generated-layer.xml" and will be found in the "build\classes\META-INF" folder of your module, which you can see if the Files window (Ctrl-2) is open in the IDE. This file is created at compile-time and contains XML entries generated from the NetBeans annotations that you have defined in your Java classes. Together with the "layer.xml" file that your module provides, the "generated-layer.xml" file defines the contributions that the module makes to the central registry.</p>
</div>
<div class="paragraph">
<p>Valid values for the "mode" parameter, in  <code>@TopComponent.Registration</code> , depend on the modes registered in the central registry. Commonly, these include "editor", "explorer", "properties", and "output", among others. See the section "Creating the RssFeeds Folder" below to learn about how you can explore the central registry and inspect its folders and files. if the  <a href="http://bits.netbeans.org/dev/javadoc/org-openide-util/org/openide/util/NbBundle.Messages.html">@Messages</a> annotation were to be used.</p>
</div>
<div class="paragraph">
<p>The code above could be even more idiomatic NetBeans Platform code if the  <a href="http://bits.netbeans.org/dev/javadoc/org-openide-util/org/openide/util/NbBundle.Messages.html">@Messages</a> annotation were to be used.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_trying_out_the_application">Trying Out the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Without having typed a single line of code, you can already take your application for a spin. Trying it out means deploying the modules to the NetBeans Platform and then checking to see that the empty Feed Window displays correctly.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the Projects window, right-click the  <code>FeedReader</code>  project.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Choose Run.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The application starts up. You see a splash screen. Then the application opens and displays the new Feed Window, as an explorer window, shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_70_feedreader-1.png" alt="feedreader 70 feedreader 1">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
What you now have is an application consisting of the following modules:
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>The modules provided by the NetBeans Platform, for bootstrapping the application, lifecycle management, window system, menu bars, toolbars, and other infrastructural concerns.</p>
</li>
<li>
<p>The three library wrapper modules that you created in this tutorial.</p>
</li>
<li>
<p>The FeedReader functionality module that you created in this tutorial, for providing the Feed window.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the application&#8217;s Window menu, you should see the new menu item, which you can use for opening the Feed window, if it is closed.</p>
</div>
<div class="paragraph">
<p>As you can see, without having done any coding, we have a complete application. It doesn&#8217;t do much yet, but the entire infrastructure exists and works as one would expect. Next, we begin using some of the NetBeans APIs, to add code to our application.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_code_to_the_application">Adding Code to the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that you have laid the basis for your application, it&#8217;s time to begin adding your own code. Before doing so, you need to specify the application&#8217;s dependencies. Dependencies are modules that provide the NetBeans APIs that you will extend or implement. Then, you will use the New File wizard and the Source Editor to create and code the classes that make up the Feed Reader application.</p>
</div>
<div class="sect2">
<h3 id="_specifying_the_applications_dependencies">Specifying the Application&#8217;s Dependencies</h3>
<div class="paragraph">
<p>You need to subclass several classes that belong to the NetBeans APIs. The classes belong to modules that need to be declared as dependencies of your Feed Reader application. Use the Project Properties dialog box for this purpose, as explained in the steps below.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the Projects window, right-click the  <code>FeedReader</code>  module project and choose Properties. In the Project Properties dialog box, click Libraries. Notice that some APIs have already been declared as Module Dependencies, thanks to the Window wizard you used earlier.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Click Add Dependency. You will need the following APIs. Some have been added by the Window wizard. Add the others yourself: <a href="http://bits.netbeans.org/dev/javadoc/org-openide-actions/org/openide/actions/doc-files/api.html">Actions APIs</a></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">link:http://bits.netbeans.org/dev/javadoc/org-openide-loaders/org/openide/loaders/doc-files/api.html[Datasystems API]
link:http://bits.netbeans.org/dev/javadoc/org-openide-dialogs/org/openide/package-summary.html[Dialogs API]
link:http://bits.netbeans.org/dev/javadoc/org-openide-explorer/org/openide/explorer/doc-files/api.html[Explorer and Property Sheet API]
link:http://bits.netbeans.org/dev/javadoc/org-openide-filesystems/org/openide/filesystems/doc-files/api.html[File System API]
link:http://bits.netbeans.org/dev/javadoc/org-openide-util-lookup/org/openide/util/lookup/doc-files/lookup-api.html[Lookup API]
link:http://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/nodes/doc-files/api.html[Nodes API]
rome
rome-fetcher
link:http://bits.netbeans.org/dev/javadoc/org-netbeans-modules-settings/overview-summary.html[Settings API]
link:http://bits.netbeans.org/dev/javadoc/org-openide-awt/overview-summary.html[UI Utilities API]
link:http://bits.netbeans.org/dev/javadoc/org-openide-util/overview-summary.html[Utilities API]
link:http://bits.netbeans.org/dev/javadoc/org-openide-windows/org/openide/windows/package-summary.html[Window System API]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Click OK to exit the Project Properties dialog box.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Expand the  <code>FeedReader</code>  project&#8217;s Libraries node and notice the list of modules that are now available to this project:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_70_add-lib5.png" alt="feedreader 70 add lib5">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_setting_dependencies_between_library_wrapper_modules">Setting Dependencies Between Library Wrapper Modules</h3>
<div class="paragraph">
<p>Now that we have set dependencies on the NetBeans API modules that we will use, let&#8217;s also set dependencies between our library wrapper modules. For example, the Rome JAR makes use of classes from the JDom JAR. Now that these are wrapped in separate library wrapper modules, we need to specify the relationship between the JARs via the library wrapper module&#8217;s Project Properties dialog box.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>First, lets make Rome dependent on JDom. Right-click the Rome library wrapper module project in the Projects window and choose Properties. In the Project Properties dialog box, click Libraries and then click Add Dependency. Add  <code>jdom</code> . Click OK to exit the Project Properties dialog box. When you expand the Libraries node in the Rome project, you should now see the following:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_70_props-jdom.png" alt="feedreader 70 props jdom">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Finally, since Rome Fetcher depends on both Rome and JDom, you need to make Rome Fetcher dependent on Rome. Do so following the same instructions as the above, so that Rome Fetcher depends on Rome, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_70_props-rome.png" alt="feedreader 70 props rome">
</div>
</div>
<div class="paragraph">
<p>Because Rome already depends on JDom, you do not need to make Rome Fetcher dependent on JDom.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_the_rssfeeds_folder">Creating the RssFeeds Folder</h3>
<div class="paragraph">
<p>You will use the IDE&#8217;s user interface to add a folder to the  <code>layer.xml</code>  file, which the module will contribute to the application&#8217;s central registry at runtime. The folder will contain our RSS feed objects. Later, you will add code to  <code>FeedTopComponent.java</code> , which was created for you by the Window wizard, to view the content of this folder.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the Projects window, expand the  <code>FeedReader</code>  module project node and then expand the XML Layer node.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you expand the subnodes, you see  <code>"&lt;this layer&gt;"</code> , containing the folders and files registered in the current module&#8217;s layer file, as well as  <code>"&lt;this layer in context&gt;"</code> , which merges all the folders and files from all the modules in the whole application:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_70_expanded-layer.png" alt="feedreader 70 expanded layer">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Right-click the  <code>&lt;this layer&gt;</code>  node and choose New &gt; Folder:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_70_expanded-layer2.png" alt="feedreader 70 expanded layer2">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Type  <code>RssFeeds</code>  in the New Folder dialog box. Click OK.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Double-click the node for the  <code>layer.xml</code>  file so that it opens in the Source Editor. Notice that this entry has been added:  <code>&lt;folder name="RssFeeds"/&gt;</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You have now created a new folder in the central registry. The central registry is also known as the "System FileSystem". Read more about  <a href="https://netbeans.apache.org/wiki/devfaqsystemfilesystem">the central registry here</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_the_feed_object">Creating the Feed Object</h3>
<div class="paragraph">
<p>Next you create a plain Java class that encapsulates a URL and its associated Rome feed.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the  <code>FeedReader</code>  module project node, choose New &gt; Java Class.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Name the class  <code>Feed</code>  and select  <code>org.myorg.feedreader</code>  in the Package drop-down. Click Finish.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the Source Editor, replace the default  <code>Feed</code>  class with the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class Feed implements Serializable {

    private static final long serialVersionUID = 1L;

    private static final FeedFetcher FEED_FETCHER =
            new HttpURLFeedFetcher(HashMapFeedInfoCache.getInstance());

    private transient SyndFeed syndFeed;
    private final URL url;
    private String name;

    public Feed(URL url) {
        this.url = url;
        name = url.toExternalForm();
    }

    public URL getURL() {
        return url;
    }

    public SyndFeed getSyndFeed() throws IOException {
        if (syndFeed == null) {
            try {
                syndFeed = FEED_FETCHER.retrieveFeed(url);
                String title = syndFeed.getTitle();
                if (title != null) {
                    name = title;
                }
            } catch (Exception ex) {
                throw (IOException) new IOException(ex.toString()).initCause(ex);
            }
        }
        return syndFeed;
    }

    @Override
    public String toString() {
        return name;
    }

    public static Feed getSample() {
        try {
            return new Feed(new URL(NbBundle.getMessage(Feed.class, "URL_sample_feed")));
        } catch (MalformedURLException x) {
            throw new AssertionError(x);
        }
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A lot of code is underlined, because you have not declared their packages. You do this in the next steps.</p>
</div>
<div class="paragraph">
<p>Take the following steps to reformat the file and declare its dependencies:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Press Alt-Shift-F to format the code.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
Press Ctrl-Shift-I and make sure the following import statements are selected:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_70_nb-imports.png" alt="feedreader 70 nb imports">
</div>
</div>
<div class="paragraph">
<p>Click OK, and the IDE adds the following import statements to the class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import com.sun.syndication.feed.synd.SyndFeed;
import com.sun.syndication.fetcher.FeedFetcher;
import com.sun.syndication.fetcher.impl.HashMapFeedInfoCache;
import com.sun.syndication.fetcher.impl.HttpURLFeedFetcher;
import java.io.IOException;
import java.io.Serializable;
import java.net.MalformedURLException;
import java.net.URL;
import org.openide.util.NbBundle;</code></pre>
</div>
</div>
<div class="paragraph">
<p>All the red underlining should now have disappeared. If not, do not continue with this tutorial until you have solved the problem.</p>
</div>
</div>
<div class="sect2">
<h3 id="_extending_the_feed_window">Extending the Feed Window</h3>
<div class="paragraph">
<p>In this section, we use a NetBeans Swing component called  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-explorer/org/openide/explorer/view/BeanTreeView.html">BeanTreeView</a></code>  to display a hierarchy of feeds in our  <code>TopComponent</code> .</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Double-click  <code>FeedTopComponent.java</code>  and then click the Source button, so that the  <code>TopComponent</code>  opens in the Source Editor.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Type  <code>implements  <a href="http://bits.netbeans.org/dev/javadoc/org-openide-explorer/org/openide/explorer/ExplorerManager.Provider.html">ExplorerManager.Provider</a></code>  at the end of the class declaration.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Press Alt-Enter in the line and click on the suggestion. The IDE adds an import statement for the required package  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-explorer/org/openide/explorer/ExplorerManager.html">org.openide.explorer.ExplorerManager</a></code>  .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Press Alt-Enter again and click on the suggestion. The IDE implements the abstract method  <code>getExplorerManager()</code> .</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Type  <code>return manager;</code>  in the body of the new  <code>getExplorerManager()</code>  method. Press Alt-Enter in the line and let the IDE create a field called  <code>manager</code>  for you. Replace the default definition with this one:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private final ExplorerManager manager = new ExplorerManager();</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Right below the field declaration in the previous step, declare this one:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private final BeanTreeView view = new BeanTreeView();</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Finally, add the following code to the end of the constructor:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">setLayout(new BorderLayout());
add(view, BorderLayout.CENTER);
manager.setRootContext(new RssNode.RootRssNode());
ActionMap map = getActionMap();
map.put("delete", ExplorerUtils.actionDelete(manager, true));
associateLookup(ExplorerUtils.createLookup(manager, map));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now a lot of code is underlined, because you have not declared their associated packages. You do this in the next steps.</p>
</div>
<div class="paragraph">
<p>Take the following steps to reformat the file and declare its dependencies:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Press Alt-Shift-F to format the code.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Press Ctrl-Shift-I and the IDE adds several import statements below the package statement. The complete list of import statements should be as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import java.awt.BorderLayout;
import java.util.logging.Logger;
import javax.swing.ActionMap;
import org.openide.util.NbBundle;
import org.openide.windows.TopComponent;
import org.openide.windows.WindowManager;
import org.openide.util.ImageUtilities;
import org.netbeans.api.settings.ConvertAsProperties;
import org.openide.explorer.ExplorerManager;
import org.openide.explorer.ExplorerUtils;
import org.openide.explorer.view.BeanTreeView;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Note that the line  <code>manager.setRootContext(new RssNode.RootRssNode());</code>  is still underlined in red, because you have not created  <code>RssNode.java</code>  yet. This you will do in the next subsection. All other red underlining should now have disappeared. If not, do not continue with this tutorial until you have solved the problem.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_creating_the_root_node">Creating the Root Node</h3>
<div class="paragraph">
<p>The top level node of our Feed Reader is provided by the RssNode class. The class extends  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/nodes/AbstractNode.html">AbstractNode</a></code> , which is the generic convenience class for creating your own Nodes. It creates its child Nodes by using the 'RssFeeds' folder that you created in the "Creating the RssFeeds Folder" section earlier in this tutorial. In addition to child Nodes, the RootNode has a display name and an Action for creating new feeds.</p>
</div>
<div class="paragraph">
<p>Take the following steps to create the RootNode class:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Create  <code>RssNode.java</code>  in the  <code>org.myorg.feedreader</code>  package.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Replace the default class with the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import javax.swing.Action;
import org.openide.filesystems.FileUtil;
import org.openide.loaders.DataFolder;
import org.openide.loaders.DataObject;
import org.openide.loaders.DataObjectNotFoundException;
import org.openide.nodes.FilterNode;
import org.openide.nodes.Node;
import org.openide.util.NbBundle;

public class RssNode extends  link:http://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/nodes/FilterNode.html[FilterNode] {

    /** Declaring the children of the root RSS node */
    public RssNode(Node folderNode) {
        super(folderNode, new RssFolderChildren(folderNode));
    }

    /** Declaring the Add Feed action and Add Folder action */
    @Override
    public Action[] getActions(boolean popup) {
        DataFolder df = getLookup().lookup(DataFolder.class);
        return new Action[] {
            new AddRssAction(df),
            new AddFolderAction(df)
        };
    }

    /** Getting the root node */
    public static class RootRssNode extends RssNode {
        public RootRssNode() throws DataObjectNotFoundException {
            super(DataObject.find(
                    FileUtil.getConfigFile("RssFeeds")).getNodeDelegate());
        }
        @Override
        public String getDisplayName() {
            return NbBundle.getMessage(RssNode.class, "FN_title");
        }
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Several red underline markings remain in the class, because you have not yet created the RssFolderChildren class, the OneFeedNode class, the AddRssAction class, and the AddFolderAction class.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_the_root_node_children">Creating the Root Node Children</h3>
<div class="paragraph">
<p>In this section, we create the children of the root node. Each child is a folder, containing RSS feeds. The RSS feeds, in turn, contain the articles that are shown in a browser.</p>
</div>
<div class="paragraph">
<p>To create this class, take the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Create  <code>RssFolderChildren.java</code>  in the  <code>org.myorg.feedreader</code>  package.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
Replace the default class with the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import java.io.IOException;
import org.netbeans.feedreader.Feed;
import org.openide.cookies.InstanceCookie;
import org.openide.filesystems.FileObject;
import org.openide.loaders.DataFolder;
import org.openide.nodes.FilterNode;
import org.openide.nodes.Node;
import org.openide.util.Exceptions;

/** Getting the children of the root node */
public class RssFolderChildren extends FilterNode.Children {

    RssFolderChildren(Node rssFolderNode) {
        super(rssFolderNode);
    }

    @Override
    protected Node[] createNodes(Node n) {
        if (n.getLookup().lookup(DataFolder.class) != null) {
            return new Node[]{new RssNode(n)};
        } else {
            Feed feed = getFeed(n);
            if (feed != null) {
                try {
                    return new Node[]{new OneFeedNode(n, feed.getSyndFeed())};
                } catch (IOException ioe) {
                    Exceptions.printStackTrace(ioe);
                }
            }
        }
        // best effort
        return new Node[]{new FilterNode(n)};
    }

    /** Looking up a feed */
    private static Feed getFeed(Node node) {
        InstanceCookie ck = node.getLookup().lookup(InstanceCookie.class);
        if (ck == null) {
            throw new IllegalStateException("Bogus file in feeds folder: " +
                    node.getLookup().lookup(FileObject.class));
        }
        try {
            return (Feed) ck.instanceCreate();
        } catch (ClassNotFoundException ex) {
            Exceptions.printStackTrace(ex);
        } catch (IOException ex) {
            Exceptions.printStackTrace(ex);
        }
        return null;
    }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_the_add_feed_action">Creating the Add Feed Action</h3>
<div class="paragraph">
<p>In this section, we create the menu item that adds new feeds. As you can see in the previous section, the Add Feed Action is bound to the context-menu of the Root Node.</p>
</div>
<div class="paragraph">
<p>To create this class, take the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Create  <code>AddRssAction.java</code>  in the  <code>org.myorg.feedreader</code>  package.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
Replace the default class with the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import java.awt.event.ActionEvent;
import java.io.IOException;
import java.io.InputStream;
import java.io.ObjectOutputStream;
import java.net.MalformedURLException;
import java.net.URL;
import javax.swing.AbstractAction;
import org.netbeans.feedreader.Feed;
import org.openide.DialogDisplayer;
import org.openide.NotifyDescriptor;
import org.openide.filesystems.FileLock;
import org.openide.filesystems.FileObject;
import org.openide.loaders.DataFolder;
import org.openide.util.Exceptions;
import org.openide.util.NbBundle;

/** An action for adding a feed */
public class AddRssAction extends AbstractAction {

    private final DataFolder folder;

    public AddRssAction(DataFolder df) {
        super(NbBundle.getMessage(AddRssAction.class, "FN_addbutton"));
        folder = df;
    }

    public void actionPerformed(ActionEvent ae) {
link:http://bits.netbeans.org/dev/javadoc/org-openide-dialogs/org/openide/NotifyDescriptor.html[NotifyDescriptor].InputLine nd = new NotifyDescriptor.InputLine(
                NbBundle.getMessage(AddRssAction.class, "FN_askurl_msg"),
                NbBundle.getMessage(AddRssAction.class, "FN_askurl_title"),
                NotifyDescriptor.OK_CANCEL_OPTION,
                NotifyDescriptor.PLAIN_MESSAGE);

        Object result =  link:http://bits.netbeans.org/dev/javadoc/org-openide-dialogs/org/openide/DialogDisplayer.html[DialogDisplayer].getDefault().notify(nd);

        if (result.equals(NotifyDescriptor.OK_OPTION)) {
            String urlString = nd.getInputText();
            URL url;
            try {
                url = new URL(urlString);
            } catch (MalformedURLException e) {
                String message = NbBundle.getMessage(AddRssAction.class, "FN_askurl_err", urlString);
                Exceptions.attachLocalizedMessage(e, message);
                Exceptions.printStackTrace(e);
                return;
            }
            try {
                checkConnection(url);
            } catch (IOException e) {
                String message = NbBundle.getMessage(AddRssAction.class, "FN_cannotConnect_err", urlString);
                Exceptions.attachLocalizedMessage(e, message);
                Exceptions.printStackTrace(e);
                return;
            }
            Feed f = new Feed(url);
            FileObject fld = folder.getPrimaryFile();
            String baseName = "RssFeed";
            int ix = 1;
            while (fld.getFileObject(baseName + ix, "ser") != null) {
                ix++;
            }
            try {
                FileObject writeTo = fld.createData(baseName + ix, "ser");
                FileLock lock = writeTo.lock();
                try {
                    ObjectOutputStream str = new ObjectOutputStream(writeTo.getOutputStream(lock));
                    try {
                        str.writeObject(f);
                    } finally {
                        str.close();
                    }
                } finally {
                    lock.releaseLock();
                }
            } catch (IOException ioe) {
                Exceptions.printStackTrace(ioe);
            }
        }
    }

    private static void checkConnection(final URL url) throws IOException {
        InputStream is = url.openStream();
        is.close();
    }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_the_add_folder_action">Creating the Add Folder Action</h3>
<div class="paragraph">
<p>In this section, we create the menu item that adds new folders, in which new feeds can be created. As you can see in an earlier section, the Add Folder Action is bound to the context-menu of the Root Node.</p>
</div>
<div class="paragraph">
<p>To create this class, take the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Create  <code>AddFolderAction.java</code>  in the  <code>org.myorg.feedreader</code>  package.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
Replace the default class with the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import java.awt.event.ActionEvent;
import java.io.IOException;
import javax.swing.AbstractAction;
import org.openide.DialogDisplayer;
import org.openide.NotifyDescriptor;
import org.openide.loaders.DataFolder;
import org.openide.util.Exceptions;
import org.openide.util.NbBundle;

/** An action for adding a folder to organize feeds into groups */
public class AddFolderAction extends AbstractAction {

    private final DataFolder folder;

    public AddFolderAction(DataFolder df) {
        super(NbBundle.getMessage(AddFolderAction.class, "FN_addfolderbutton"));
        folder = df;
    }

    public void actionPerformed(ActionEvent ae) {
link:http://bits.netbeans.org/dev/javadoc/org-openide-dialogs/org/openide/NotifyDescriptor.html[NotifyDescriptor].InputLine nd = new NotifyDescriptor.InputLine(
                NbBundle.getMessage(AddFolderAction.class, "FN_askfolder_msg"),
                NbBundle.getMessage(AddFolderAction.class, "FN_askfolder_title"),
                NotifyDescriptor.OK_CANCEL_OPTION,
                NotifyDescriptor.PLAIN_MESSAGE);

        Object result =  link:http://bits.netbeans.org/dev/javadoc/org-openide-dialogs/org/openide/DialogDisplayer.html[DialogDisplayer].getDefault().notify(nd);

        if (result.equals(NotifyDescriptor.OK_OPTION)) {
            final String folderString = nd.getInputText();
            try {
                DataFolder.create(folder, folderString);
            } catch (IOException ex) {
                Exceptions.printStackTrace(ex);
            }
        }
    }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_the_feed_node">Creating the Feed Node</h3>
<div class="paragraph">
<p>Here we are concerned with the container for the article nodes, as shown below for the 'NetBeans Highlights' node:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_60-actions2.png" alt="feedreader 60 actions2">
</div>
</div>
<div class="paragraph">
<p>As can be seen, each of these nodes has a display name, retrieved from the feed, an icon, and a Delete menu item.</p>
</div>
<div class="paragraph">
<p>Take the following steps to create this class:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Create  <code>OneFeedNode.java</code>  in the  <code>org.myorg.feedreader</code>  package.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Replace the default class with the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import com.sun.syndication.feed.synd.SyndFeed;
import java.awt.Image;
import javax.swing.Action;
import org.openide.actions.DeleteAction;
import org.openide.nodes.FilterNode;
import org.openide.nodes.Node;
import org.openide.util.ImageUtilities;
import org.openide.util.Lookup;
import org.openide.util.actions.SystemAction;
import org.openide.util.lookup.Lookups;
import org.openide.util.lookup.ProxyLookup;

/** Getting the feed node and wrapping it in a FilterNode */
public class OneFeedNode extends  link:http://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/nodes/FilterNode.html[FilterNode] {

    OneFeedNode(Node feedFileNode, SyndFeed feed) {
        super(feedFileNode,
                new FeedChildren(feed),
                new ProxyLookup(new Lookup[]{
                    Lookups.fixed(new Object[]{feed}),
                    feedFileNode.getLookup()
                }));
    }

    @Override
    public String getDisplayName() {
        SyndFeed feed = getLookup().lookup(SyndFeed.class);
        return feed.getTitle();
    }

    @Override
    public Image getIcon(int type) {
        return  link:http://bits.netbeans.org/dev/javadoc/org-openide-util/org/openide/util/ImageUtilities.html[ImageUtilities].loadImage("org/netbeans/feedreader/rss16.gif");
    }

    @Override
    public Image getOpenedIcon(int type) {
        return getIcon(type);
    }

    @Override
    public Action[] getActions(boolean context) {
        return new Action[]{SystemAction.get( link:http://bits.netbeans.org/dev/javadoc/org-openide-actions/org/openide/actions/DeleteAction.html[DeleteAction].class)};
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Several red underline markings remain in the class, because we have not created our  <code>FeedChildren</code>  class yet. Here it is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import com.sun.syndication.feed.synd.SyndEntry;
import com.sun.syndication.feed.synd.SyndFeed;
import java.beans.IntrospectionException;
import org.openide.nodes.Children;
import org.openide.nodes.Node;
import org.openide.util.NbCollections;

/** Defining the children of a feed node */
public class FeedChildren extends  link:http://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/nodes/Children.Keys.html[Children.Keys&lt;SyndEntry&gt;] {

    private final SyndFeed feed;

    public FeedChildren(SyndFeed feed) {
        this.feed = feed;
    }

    @Override
    protected void addNotify() {
        setKeys( link:http://bits.netbeans.org/dev/javadoc/org-openide-util/org/openide/util/NbCollections.html#checkedListByCopy%28java.util.List,%20java.lang.Class,%20boolean%29[NbCollections.checkedListByCopy](feed.getEntries(), SyndEntry.class, true));
    }

    @Override
    public Node[] createNodes(SyndEntry entry) {
        try {
            return new Node[]{new EntryBeanNode(entry)};
        } catch (IntrospectionException ex) {
            assert false : ex;
            return new Node[0];
        }
    }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_the_entry_node">Creating the Entry Node</h3>
<div class="paragraph">
<p>Finally, we deal with the lowest level nodes, those that represent articles provided by the feed.</p>
</div>
<div class="paragraph">
<p>To create this class, take the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Create  <code>OneEntryNode.java</code>  in the  <code>org.myorg.feedreader</code>  package.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Replace the default class with the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import com.sun.syndication.feed.synd.SyndEntry;
import java.beans.IntrospectionException;
import javax.swing.Action;
import org.openide.actions.OpenAction;
import org.openide.nodes.BeanNode;
import org.openide.nodes.FilterNode;
import org.openide.util.actions.SystemAction;
import org.openide.util.lookup.Lookups;

/** Wrapping the children in a FilterNode */
public class OneEntryNode extends  link:http://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/nodes/FilterNode.html[FilterNode] {

    private final SyndEntry entry;

    public OneEntryNode(SyndEntry entry) throws IntrospectionException {
        super(new BeanNode&lt;SyndEntry&gt;(entry), Children.LEAF,
                Lookups.fixed(entry, new EntryOpenCookie(entry)));
        this.entry = entry;
    }

    /** Using HtmlDisplayName ensures any HTML in RSS entry titles are properly handled, escaped, entities resolved, etc. */
    @Override
    public String getHtmlDisplayName() {
        return entry.getTitle();
    }

    /** Making a tooltip out of the entry's description */
    @Override
    public String getShortDescription() {
        StringBuilder sb = new StringBuilder();
        sb.append("Author: ").append(entry.getAuthor()).append("; ");
        if (entry.getPublishedDate() != null) {
            sb.append("Published: ").append(entry.getPublishedDate().toString());
        }
        return sb.toString();
    }

    /** Providing the Open action on a feed entry */
    @Override
    public Action[] getActions(boolean popup) {
        return new Action[]{SystemAction.get( link:http://bits.netbeans.org/dev/javadoc/org-openide-actions/org/openide/actions/OpenAction.html[OpenAction].class)};
    }

    @Override
    public Action getPreferredAction() {
        return getActions(false)[0];
    }

    /** Specifying what should happen when the user invokes the Open action */
    private static class EntryOpenCookie implements  link:http://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/cookies/OpenCookie.html[OpenCookie] {

        private final SyndEntry entry;

        EntryOpenCookie(SyndEntry entry) {
            this.entry = entry;
        }

        @Override
        public void open() {
            try {
                URLDisplayer.getDefault().showURL(new URL(entry.getUri()));
            } catch (MalformedURLException mue) {
                Exceptions.printStackTrace(mue);
            }
        }

    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Above, you use the NetBeans  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-awt/org/openide/awt/HtmlBrowser.URLDisplayer.html">URLDisplayer</a></code>  class to open an entry in the Swing browser. See the completed sample (referred to in the Troubleshooting section below) for code that lets you create your own TopComponent, containing a JEditorPane for displaying your entries.</p>
</div>
</div>
<div class="sect2">
<h3 id="_localizing_the_rssnode_class">Localizing the RssNode Class</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Open the  <code>FeedReader</code>  module&#8217;s  <code>Bundle.properties</code>  file.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Add the following key-value pairs:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">FN_title=RSS/Atom Feeds
FN_addbutton=Add
FN_askurl_title=New Feed
FN_askurl_msg=Enter the URL of an RSS/Atom Feed
FN_askurl_err=Invalid URL: {0}|
FN_askfolder_msg=Enter the folder name
FN_askfolder_title=New Folder</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an explanation of the new key-value pairs, which localize strings defined in  <code>RssNode.java</code> :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>* FN_title.* Localizes the label of the highest node in the Feed Window.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Localization of user interface for adding a feed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>* FN_addbutton.* Localizes the label of the Add menu item that appears in the highest node&#8217;s pop-up.</p>
</li>
<li>
<p>* FN_askurl_title.* Localizes the title of the New Feed dialog box.</p>
</li>
<li>
<p>* FN_askurl_msg.* Localizes the message that appears in the New Feed dialog box.</p>
</li>
<li>
<p>* FN_askurl_err.* Localizes the error string that is displayed if the URL is invalid.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_run_the_application">Run the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Right-click the application and choose Run. You should see the application shown at the start of this tutorial:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_70_feedreader.png" alt="feedreader 70 feedreader">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_troubleshooting">Troubleshooting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you encounter problems during this tutorial, get the completed sample here, in the New Project wizard (Ctrl-Shift-N):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/feedreader_70_sample.png" alt="feedreader 70 sample">
</div>
</div>
<div class="paragraph">
<p><a href="http://netbeans.apache.org/community/mailing-lists.html">Send Us Your Feedback</a></p>
</div>
</div>
</div>
        
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/70/nbm-feedreader.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
