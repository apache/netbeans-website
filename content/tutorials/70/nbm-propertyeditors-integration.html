
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Integrated Property Editors in NetBeans</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Integrated Property Editors in NetBeans - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, Integrated Property Editors in NetBeans">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>

  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Integrated Property Editors in NetBeans</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/70/nbm-propertyeditors-integration.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_why_is_this_so_complicated">Why is this so complicated?</a></li>
<li><a href="#_step_1_creating_some_beans">[[Step 1: Creating Some Beans]]</a>
<ul class="sectlevel2">
<li><a href="#_listing_1_bean1_java">[[Listing 1: Bean1.java]]</a></li>
</ul>
</li>
<li><a href="#_creating_a_class_that_will_need_a_custom_editor">Creating A Class That Will Need A Custom Editor</a>
<ul class="sectlevel2">
<li><a href="#_listing_2_colorvalue">[[Listing 2: ColorValue]]</a></li>
</ul>
</li>
<li><a href="#_creating_the_plug_in">[[Creating the Plug-In]]</a></li>
<li><a href="#_setting_the_module_to_require_an_ide_restart">[[Setting The Module To Require an IDE Restart]]</a></li>
<li><a href="#_modifying_the_plug_ins_build_script">[[Modifying the Plug-In&#8217;s Build Script]]</a>
<ul class="sectlevel2">
<li><a href="#_listing_3_module_build_script_changes">[[Listing 3: Module Build Script Changes]]</a></li>
</ul>
</li>
<li><a href="#_adding_bean_jar_to_tools_libraries">Adding Bean.jar to Tools &gt; Libraries</a>
<ul class="sectlevel2">
<li><a href="#_listing_4_adding_library_metadata_to_a_modules_xml_layer">[[Listing 4: Adding Library Metadata to a Module&#8217;s XML Layer]]</a></li>
<li><a href="#_listing_5_an_xml_library_definition_for_bean_jar">[[Listing 5: An XML Library Definition for Bean.jar]]</a></li>
</ul>
</li>
<li><a href="#_localizing_library_and_other_names">Localizing Library and Other Names</a>
<ul class="sectlevel2">
<li><a href="#_listing_6_localized_names_for_library_and_component_palette_items">[[Listing 6: Localized Names for Library and Component Palette Items]]</a></li>
</ul>
</li>
<li><a href="#_including_bean_jar_on_the_modules_class_path">Including <code>Bean.jar</code> on the Module&#8217;s Class Path</a>
<ul class="sectlevel2">
<li><a href="#_listing_7_adding_bean_jar_to_our_modules_classpath">[[Listing 7: Adding Bean.jar to our Module&#8217;s Classpath]]</a></li>
</ul>
</li>
<li><a href="#_adding_bean1_to_the_component_palette">Adding Bean1 to the Component Palette</a>
<ul class="sectlevel2">
<li><a href="#_listing_8_adding_a_palette_item_file_to_the_layer_xml">[[Listing 8: Adding a <code>palette_item</code> file to the layer.xml]]</a></li>
<li><a href="#_listing_9_xml_file_defining_a_component_on_the_palette">[[Listing 9: XML File Defining a Component on the Palette]]</a></li>
</ul>
</li>
<li><a href="#_creating_a_property_editor">Creating A Property Editor</a>
<ul class="sectlevel2">
<li><a href="#_listing_10_a_propertyeditor_for_colorvalue_objects">[[Listing 10: A PropertyEditor for ColorValue Objects]]</a></li>
</ul>
</li>
<li><a href="#_registering_the_property_editor_package">Registering The Property Editor Package</a>
<ul class="sectlevel2">
<li><a href="#_listing_11_registering_the_property_editors_package_at_ide_startup">[[Listing 11: Registering The Property Editors Package At IDE Startup]]</a></li>
</ul>
</li>
<li><a href="#_netbeans_form_editor_classloader_black_magic">NetBeans Form Editor Classloader Black Magic</a>
<ul class="sectlevel2">
<li><a href="#_listing_12_registering_classes_that_should_be_visible_in_layer_xml">[[Listing 12: Registering Classes That Should Be Visible in layer.xml]]</a></li>
<li><a href="#_listing_13_listing_module_classes_that_should_be_visible_to_components_in_the_form_editor">[[Listing 13: Listing Module Classes That Should Be Visible to Components in the Form Editor]]</a></li>
</ul>
</li>
<li><a href="#_adding_a_custom_editor">Adding A Custom Editor</a>
<ul class="sectlevel2">
<li><a href="#_listing_14_colorvaluecustomeditor_constructor">[[Listing 14: ColorValueCustomEditor Constructor]]</a></li>
<li><a href="#_listing_15_changing_the_class_signature_of_colorvaluecustomeditor_to_implement_listeners">[[Listing 15: Changing the Class Signature of ColorValueCustomEditor to Implement Listeners]]</a></li>
<li><a href="#_listing_16_listener_interface_implementation_for_colorvaluecustomeditor">[[Listing 16: Listener Interface Implementation for ColorValueCustomEditor]]</a></li>
<li><a href="#_listing_17_creating_our_custom_editor">[[Listing 17: Creating Our Custom Editor]]</a></li>
<li><a href="#_what_colorvalueeditor_does">What ColorValueEditor Does</a></li>
</ul>
</li>
<li><a href="#_writing_xml_instead_of_serializing">Writing XML Instead Of Serializing</a>
<ul class="sectlevel2">
<li><a href="#_listing_18_implementing_xmlpropertyeditor">[[Listing 18: Implementing XMLPropertyEditor]]</a></li>
</ul>
</li>
<li><a href="#_packaging_your_component">Packaging Your Component</a></li>
<li><a href="#_wrap_up">Wrap Up</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The NetBeans IDE includes a visual editor for Swing user interfaces (UIs). Components are controlled using property editors which follow the Java Beans™ specification. This tutorial will show how to distribute components inside a NetBeans plug-in, how to provide custom property editors for individual properties or an entire class of properties of those components; and how to write property editors that are able to call into and use features of the NetBeans IDE.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_is_this_so_complicated">Why is this so complicated?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Java Beans specification defines how components should interact with an integrated development environment (IDE), and various classes that both an IDE and a component vendor will use to communicate with the IDE and vice-versa. The fundamental problem with the beans specification is that, when it was created and cast in stone, <em>there were no Java IDEs</em>. The specification tends to be in some cases naively defined (BeanInfo), and in other cases woefully underspecified (PropertyEditor) with respect to what an IDE or a component will actually need to provide a good user experience.</p>
</div>
<div class="paragraph">
<p>It is possible to create generic property editors that will integrate with an IDE without depending on that IDE — and where this makes sense, it is encouraged to do that. However, there are many cases where that is not sufficient. For example, the specification for <code>java.beans.PropertyEditor</code> simply allows a property editor to return a <code>java.awt.Component</code> to provide a custom editor dialog. In practice, that component will be shown to the user in a dialog - and if it is possible for the user to provide invalid input, good UI design dictates that the OK button for that dialog should be disabled when the input is not usable. But there is no communication path for a component to tell an IDE about such a situation. Similarly, a property editor that lets the user supply an image needs to allow the user to choose a file on disk to use. If the image is not on the classpath of the project, it needs to be copied into some directory where it can be found at runtime — but there is no way for an IDE to communicate to a third party property editor anything about files or directories or classpaths.</p>
</div>
<div class="paragraph">
<p>For these cases, NetBeans provides APIs that fill some of the gaps in the beans spec. NetBeans also provides sophisticated user interface controls that can save time and create a better user experience if used.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/property-editors_borderCustomEditor.png" alt="property editors borderCustomEditor">
</div>
</div>
<div class="paragraph">
<p>_ NetBeans' custom editor for Borders uses NetBeans'
Nodes and Explorer API to provide the list of available
borders in an embedded property sheet. _</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_step_1_creating_some_beans">[[Step 1: Creating Some Beans]]</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The first step in packaging up some components is creating some components, so we will start by creating a simple Java project.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In NetBeans, select <strong>File &gt; New Project</strong> and choose <strong>Java &gt; Java Class Library</strong>. On the second page of the new project wizard, give the project the name <code>Bean</code>. Click Finish.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Once the project is open, create a new Java Class called <code>Bean1</code> in a package named <code>bean</code>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Add the following code to it (it will use a class that does not exist yet, so don&#8217;t worry about warnings for <code>ColorValue</code>):</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_listing_1_bean1_java">[[Listing 1: Bean1.java]]</h3>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class Bean1 extends JComponent {
    private ColorValue colorValue = new ColorValue (255, 235, 128);

    public ColorValue getColorValue() {
        return colorValue;
    }

    public void setColorValue(ColorValue val) {
        ColorValue old = this.colorValue;
        this.colorValue = val;
        if ((old == null) != (val == null) || old != null &amp;amp;&amp;amp; !old.equals(val)) {
            firePropertyChange("colorValue", old, val);
            repaint();
        }
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension (24, 24);
    }

    @Override
    public Dimension getMinimumSize() {
        return getPreferredSize();
    }

    @Override
    public void paint (Graphics g) {
        if (colorValue != null) {
            g.setColor(colorValue.toColor());
            g.fillRect(0, 0, getWidth(), getHeight());
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_class_that_will_need_a_custom_editor">Creating A Class That Will Need A Custom Editor</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We will start with a fairly simple (if slightly artificial) class. We need to create the <code>ColorValue</code> class which is the type of one of `Bean1&#8217;s properties (later we will handle a much more complex data type requiring a more sophisticated custom editor).</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Create a new Java class, <code>bean.ColorValue</code>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Populate it as shown in <a href="#listing2">Listing 2</a>.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_listing_2_colorvalue">[[Listing 2: ColorValue]]</h3>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package bean;
import java.awt.Color;
import java.beans.PropertyChangeListener;
import java.beans.PropertyChangeSupport;
import java.io.Serializable;
public class ColorValue implements Serializable {
    private final PropertyChangeSupport supp = new PropertyChangeSupport(this);
    private int red;
    private int green;
    private int blue;

    public ColorValue() {}

    public ColorValue(int red, int green, int blue) {
        if (red &lt; 0 || red &gt; 255) {
            throw new IllegalArgumentException("" + red);
        }
        if (green &lt; 0 || green &gt; 255) {
            throw new IllegalArgumentException("" + green);
        }
        if (blue &lt; 0 || blue &gt; 255) {
            throw new IllegalArgumentException("" + blue);
        }
        this.red = red;
        this.green = green;
        this.blue = blue;
    }

    public int getBlue() {
        return blue;
    }

    public int getGreen() {
        return green;
    }

    public int getRed() {
        return red;
    }

    public void setGreen(int green) {
        if (green &lt; 0 || green &gt; 255) {
            throw new IllegalArgumentException("" + green);
        }
        int old = this.green;
        this.green = green;
        if (green != old) {
            supp.firePropertyChange("green", old, green);
        }
    }

    public void setBlue(int blue) {
        if (blue &lt; 0 || blue &gt; 255) {
            throw new IllegalArgumentException("" + blue);
        }
        int old = blue;
        this.blue = blue;
        if (old != blue) {
            supp.firePropertyChange("blue", old, blue);
        }
    }

    public void setRed(int red) {
        if (red &lt; 0 || red &gt; 255) {
            throw new IllegalArgumentException("" + red);
        }
        int old = this.red;
        this.red = red;
        if (old != red) {
            supp.firePropertyChange("red", old, red);
        }
    }

    public Color toColor() {
        return new Color(red, green, blue);
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null || ColorValue.class != obj.getClass()) {
            return false;
        }
        final ColorValue other = (ColorValue) obj;
        return red == other.red &amp;amp;&amp;amp; green == other.green &amp;amp;&amp;amp; blue == other.blue;
    }

    @Override
    public int hashCode() {
        //evenly distribute 3 byte values across 32 bits
        return red + (green &lt;&lt; 12) + (blue &lt;&lt; 24);
    }

    public void removePropertyChangeListener(PropertyChangeListener pl) {
        supp.removePropertyChangeListener(pl);
    }

    public void addPropertyChangeListener(PropertyChangeListener pl) {
        supp.addPropertyChangeListener(pl);
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_plug_in">[[Creating the Plug-In]]</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now we need to create a NetBeans plug-in (module) which will do three things:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Integrate our class library into the IDE, so that it appears in the list of libraries available to users (found in <strong>Tools &gt; Libraries</strong> in the IDE). While we could ask users to put the JAR for our library on the classpath of every project they use it in, this approach is much more convenient.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Add <code>Bean1</code> to the Component Palette, so that users can simply drag the component into their user interfaces.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Provide our property editors for our property classes and integrate them into the IDE.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>NetBeans comes with built-in support for creating modules, so setting up a new module project is quite simple:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Select <strong>File &gt; New Project</strong> in the main menu.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the New Project wizard, choose <strong>NetBeans Modules&gt; Module</strong> on the first page, then click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>On the second page of the wizard, name the project <code>BeanLibraryModule</code>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>On the third page of the wizard, enter <code>org.netbeans.demo.form.beanlib</code> for the <strong>Code Name Base</strong>, and <code>Bean Library Module</code> for the display name. Check the <strong>Generate XML Layer</strong> checkbox and click <strong>Finish</strong>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_the_module_to_require_an_ide_restart">[[Setting The Module To Require an IDE Restart]]</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Modules which install Java libraries — particuarly ones which add components to the component palette should always require a restart of the IDE. There are two reasons for this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>MS Windows File Locking</em>—The IDE can reload a module without restarting. However, on the Windows platform, if something is using a JAR file, it will be locked at the operating system level, so updating the module may fail with an exception if the old JAR file cannot be overwritten with the new one.</p>
</li>
<li>
<p><em>Form Editor Reloading</em>—If the user has a form open, which is using a component from the JAR file, the component will not be replaced with one from the new JAR file (this could be very complicated if the file is modified but not saved). For the updated component to be used, we need to be sure both that the form is reloaded, and also that any cached class data from the JAR is discarded.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Causing a module to request that the IDE restart itself before it is installed is as simple as checking a checkbox:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Once the project is created, right click it and choose Properties</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>When the <strong>Project Properties</strong> dialog appears, click the <strong>Build &gt; Packaging</strong> item in the category list to show the Packaging page of the dialog; check the <strong>Needs Restart on Install</strong> checkbox and click <strong>OK</strong> to save this setting.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_modifying_the_plug_ins_build_script">[[Modifying the Plug-In&#8217;s Build Script]]</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We now have a plug-in. However, we will want it to bundle the <code>Bean</code> project. So before going further, it would be useful to do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Modify the module&#8217;s build script to recompile the Bean project — this way, the module will always contain the latest version of the project</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Modify the build script to copy the Bean project into the place it needs to be to bundle <code>Bean.jar</code> into our module.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Doing these things involves overriding two targets in our module project&#8217;s build script. Ant supports a crude sort of target inheritance, in which we replace a target from one build script, but call the original target by referring to <code>[projectname].[targetname]</code> (the project name in this case is the name defined in the <code>&lt;project&gt;</code> tag at the top of any Ant build script).</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Open the build script by expanding the module project in the <strong>Projects</strong> tab in the IDE, and the <strong>Important Files</strong> node under it, and double clicking the <strong>Build Script</strong> node. This corresponds to the file <code>build.xml</code> in the <code>BeanLibraryModule</code> directory which is the root of our module project.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Add the code found in  <a href="listing3">Listing 3</a> to the build script, below the line <code>&lt;import file="nbproject/build-impl.xml"/&gt;</code>.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_listing_3_module_build_script_changes">[[Listing 3: Module Build Script Changes]]</h3>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;target name="build-init" depends="harness.build-init"&gt;
    &lt;echo&gt;Rebuilding Bean JAR&lt;/echo&gt;
    &lt;ant antfile="../Bean/build.xml" target="jar" inheritall="false" inheritrefs="false"/&gt;
    &lt;mkdir dir="release/libs"/&gt;
    &lt;copy file="../Bean/dist/Bean.jar" todir="release/libs"/&gt;
&lt;/target&gt;

&lt;target name="clean" depends="projectized-common.clean"&gt;
    &lt;echo&gt;Cleaning and deleting copy of Bean JAR&lt;/echo&gt;
    &lt;ant antfile="../Bean/build.xml" target="clean" inheritall="false" inheritrefs="false"/&gt;
    &lt;delete file="${basedir}/release/libs/Bean.jar"/&gt;
&lt;/target&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Most of the targets in the <code>build.xml</code> for a module project are in other files — specifically, in <code>nbproject/build-impl.xml</code> and in <code>$HARNESS/build.xml</code> and <code>$HARNESS/common.xml</code> (<code>$HARNESS</code> is a directory under the copy of NetBeans you are building against, which may or may not be your IDE). To find out what file a target you are calling or overriding is in, find the <code>build.xml</code> in the <strong>Files</strong> tab in the IDE. Expand its node and you will see all of the targets (even ones in other files). Right click the target you are wondering about and choose <strong>Open</strong> to open the file which contains that target in the IDE. The path on disk to the file will be shown in the tooltip of its tab in the editor.</p>
</div>
<div class="paragraph">
<p>This code will build the <code>Bean</code> project, and copy the resulting JAR file to <code>BeanLibraryModule/release/libs</code>. The build script will bundle anything under the <code>release</code> subdir of a module into the NBM file you will deliver to your users (for example, via an update server found via <strong>Tools &gt; Plugins</strong>).</p>
</div>
<div class="paragraph">
<p>At this point, it is a good time to make sure everything is working correctly. You can test this by right clicking <code>BeanLibraryModule</code> in the <strong>Projects</strong> tab, and choosing <strong>Build</strong> from the popup menu (or by pressing F11).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_bean_jar_to_tools_libraries">Adding Bean.jar to Tools &gt; Libraries</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now we need to add some metadata to our module — no code yet — to make <code>Bean.jar</code> appear in the list of libraries for users who have installed our module. This involves two steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Open the module&#8217;s <em>layer file</em> — you can find it under the <strong>Important Files</strong> node below the module project&#8217;s node in the <strong>Projects</strong> tab (if you don&#8217;t see it, you did not check the <strong>Generate XML Layer</strong> button when you created the module project). This file provides declarative metadata to NetBeans at runtime. One of the things it can do is tell NetBeans about a library a module is installing.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Between the <code>&lt;filesystem&gt;</code> tags, add the XML from <a href="#listing4">listing 4</a>.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_listing_4_adding_library_metadata_to_a_modules_xml_layer">[[Listing 4: Adding Library Metadata to a Module&#8217;s XML Layer]]</h3>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;folder name="org-netbeans-api-project-libraries"&gt;
    &lt;folder name="Libraries"&gt;
        &lt;file name="Bean.xml" url="Bean.xml"/&gt;
    &lt;/folder&gt;
&lt;/folder&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>url</code> attribute of the <code>file</code> tag is important — the XML we have entered defines a <em>virtual file</em> — but a file name is usually useless without some content. The URL attribute is a path, relative to the layer file, in the location where it really lives on disk. The next step is to actually create a file called <code>Bean.xml</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>With the layer XML file open, press Ctrl-Shift-1 (Command-Shift-1 on Macintosh) to reveal the file, inside the package <code>org.netbeans.demo.form.beanlib</code> in the module project&#8217;s source code.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Right click that package, and choose <strong>New &gt; Other</strong>. In the New File Wizard which opens, choose <strong>XML &gt; XML Document</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Name the file <code>Bean</code> on the second page of the wizard and click <strong>Finish</strong> to create the file.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Populate the file with the XML content in <a href="#listing5">listing 5</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_listing_5_an_xml_library_definition_for_bean_jar">[[Listing 5: An XML Library Definition for Bean.jar]]</h3>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE library PUBLIC "-//NetBeans//DTD Library Declaration 1.0//EN" "https://netbeans.org/dtds/library-declaration-1_0.dtd"&gt;
&lt;library version="1.0"&gt;
    &lt;name&gt;Bean&lt;/name&gt;
    &lt;type&gt;j2se&lt;/type&gt;
    &lt;localizing-bundle&gt;org.netbeans.demo.form.beanlib.Bundle&lt;/localizing-bundle&gt;
    &lt;volume&gt;
        &lt;type&gt;classpath&lt;/type&gt;
        &lt;resource&gt;jar:nbinst://org.netbeans.demo.form.beanlib/modules/ext/Bean.jar!/&lt;/resource&gt;
    &lt;/volume&gt;
    &lt;volume&gt;
        &lt;type&gt;src&lt;/type&gt;
    &lt;/volume&gt;
    &lt;volume&gt;
        &lt;type&gt;javadoc&lt;/type&gt;
    &lt;/volume&gt;
&lt;/library&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that there are placeholders in this file for Javadoc documentation and source files. If you want to include these later, just create targets in <code>Bean/build.xml</code> to build and zip the javadoc and sources into zip files, and modify <code>BeanLibraryModule</code> to call those targets in the Bean project and copy the additional files into the same directory as <code>Bean.jar</code>; then add <code>&lt;resource&gt;</code> tags similar to the one already in this file, but pointing to the zip files. Such files are helpful for users who want instantly available documentation, or wish to step through your component&#8217;s code in a debugger.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_localizing_library_and_other_names">Localizing Library and Other Names</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All user-visible strings in NetBeans are localized — put into resource-bundle files, so they can be translated into other human languages. Things which are installed declaratively via <code>layer.xml</code> files are no exception. You may have noticed that a <em>localizing bundle</em> is mentioned in some of the XML we have already entered. This is a pointer to a file named <code>Bundle.properties</code>, which should live in the package <code>org.netbeans.demo.form.beanlib</code> alongside our other files. If it does not exist, create it as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right click the package <code>org.netbeans.demo.form.beanlib</code> and choose <strong>New &gt; Other</strong> from the popup menu.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Choose <strong>Other &gt; Properties File</strong> on the first step of the New File Wizard and click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>On the second step of the wizard, name the file <code>Bundle</code> and click <strong>Finish</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Add the content in <a href="#listing6">listing 6</a> to the newly created resource bundle file (the content includes entries for files we are about to create in order to add <code>Bean1</code> to the Component Palette).</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_listing_6_localized_names_for_library_and_component_palette_items">[[Listing 6: Localized Names for Library and Component Palette Items]]</h3>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Bean=Bean
FormDesignerPalette/Bean=Beans!
NAME_bean-Bean1=The Bean
HINT_bean-Bean1=This is a Bean</code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point, we have a working module to bundle Bean as a library. To try it out, right click the Bean Library Module project and choose <strong>Run</strong>. This will start another copy of NetBeans. When it is started, look for your library in the library manager dialog that opens when you select <strong>Tools &gt; Libraries</strong> from the main menu.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_including_bean_jar_on_the_modules_class_path">Including <code>Bean.jar</code> on the Module&#8217;s Class Path</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We are bundling the JAR file as a library. However, if we want property editors which can talk to both our Java Bean classes and to NetBeans itself, we will need to put <code>Bean.jar</code> onto our module&#8217;s classpath as well. NetBeans is very strict about what JARs a module can see classes from, and by default, a library is for use in the projects a user creates, not for loading in to the VM NetBeans is running in. So we need to explicitly include <code>Beans.jar</code> in our module&#8217;s classpath if we want to be able to use classes from it in our module — and if we want to provide <em>NetBeans-aware property editors</em> we need to do that.</p>
</div>
<div class="paragraph">
<p>Not everybody needs property editors that interact with the IDE beyond the very limited ways the Java Beans specification allows. If you are writing ordinary property editors, you can simply skip the rest of this step, then follow the later steps to add your beans to the component palette and stop there:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Create another Java Class Library project called BeanEditors.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Put the Beans project on its classpath.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Create the <code>beans</code> package in the new project.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Write your properties (and optionally BeanInfo) there.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Add another <code>&lt;resource&gt;</code> entry to <code>Bean.xml</code> below the first one, which refers to <code>BeanEditors.jar</code></p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Modify the module project&#8217;s build script to build that project. too, and copy <code>BeanEditors.jar</code> to <code>release/libs</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To add <code>Bean.jar</code> to the classpath of <em>classes in your module</em>, do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Under the <strong>Important Files</strong> node under the Bean Library Module project, double click the node <strong>Project Metadata</strong> to open the project&#8217;s <code>nbproject/project.xml</code> file in the editor.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Add the code in <a href="#listing7">listing 7</a> to the bottom of this file, just above the closing <code>&lt;/data&gt;</code> tag.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Build the Bean Library Module project, to ensure that the JAR is where it needs to be.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Shut down and restart the IDE (module projects are not terribly intelligent about rescanning the classpath when the project metadata is manually modified, so you need to do this to have code-completion and parsing work in the editor later, when you use classes from <code>Bean.jar</code> in your module. This may be improved in future release of NetBeans).</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_listing_7_adding_bean_jar_to_our_modules_classpath">[[Listing 7: Adding Bean.jar to our Module&#8217;s Classpath]]</h3>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;class-path-extension&gt;
    &lt;runtime-relative-path&gt;ext/Bean.jar&lt;/runtime-relative-path&gt;
    &lt;binary-origin&gt;../Bean/dist/Bean.jar&lt;/binary-origin&gt;
&lt;/class-path-extension&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The “runtime relative path” is the path to Bean.jar from the location of the module JAR at runtime. The NBM file which is created when you right click the module project and choose <strong>Create NBM</strong> is unpacked onto disk when the user installs it. You can build the NBM and then expand in the <strong>Files</strong> tab in the IDE to browse its contents. You will find the module JAR under the <code>modules/</code> folder in the NBM. You will also find <code>modules/ext/Bean.jar</code> there — Bean.jar is added to the module&#8217;s classpath using the standard Java mechanism of including <code>Class-Path: ext/Bean.jar</code> in the module&#8217;s JAR manifest.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_bean1_to_the_component_palette">Adding Bean1 to the Component Palette</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We have our library embedded in our module — next we need to put our component on the Component Palette, so users will be able to drag and drop it into their user interfaces. Doing that is quite simple, and very similar to the way we added <code>Bean.jar</code> as a library — it will again involve editing the <code>layer.xml</code> file, adding a reference to an external XML file and then creating that file.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Open the <code>layer.xml</code> file, either by clicking <strong>Important Files &gt; XML Layer</strong> under your project, or the node for <code>layer.xml</code> in the package <code>org.netbeans.demo.form.beanlib</code>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Add the code in <a href="#listing8">listing 8</a> after the initial <code>&lt;filesystem&gt;</code> tag.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Create a new XML file called <code>Bean1_paletteItem.xml</code> next to the <code>layer.xml</code> file in the same package.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Replace the new XML file&#8217;s contents with the XML code in <a href="#listing9">listing 9</a>.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_listing_8_adding_a_palette_item_file_to_the_layer_xml">[[Listing 8: Adding a <code>palette_item</code> file to the layer.xml]]</h3>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;folder name="FormDesignerPalette"&gt;
    &lt;folder name="Bean"&gt;
        &lt;attr name="SystemFileSystem.localizingBundle" stringvalue="org.netbeans.demo.form.beanlib.Bundle"/&gt;
        &lt;file name="Bean1.palette_item" url="Bean1_paletteItem.xml"/&gt;
    &lt;/folder&gt;
&lt;/folder&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_listing_9_xml_file_defining_a_component_on_the_palette">[[Listing 9: XML File Defining a Component on the Palette]]</h3>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;palette_item version="1.0"&gt;
  &lt;component classname="bean.Bean1"/&gt;
  &lt;description localizing-bundle="org.netbeans.demo.form.beanlib.Bundle"
               display-name-key="NAME_bean-Bean1"
               tooltip-key="HINT_bean-Bean1" /&gt;
  &lt;classpath&gt;
    &lt;resource type="library" name="Bean"/&gt;
  &lt;/classpath&gt;
&lt;/palette_item&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point, the work of embedding our library and our component is done. Run the module now to try out the result — create a new project in the copy of NetBeans that starts, then use <strong>New &gt; JPanel Form</strong> to show the form editor (aka “Matisse”). There will be a new category, <strong>Beans!</strong> on the Component Palette. Expand it, and you will see <code>Bean1</code>, listed as <strong>The Bean</strong> (these are the strings we defined in our <code>Bundle.properties</code> file). Drag it onto the form to use it.</p>
</div>
<div class="paragraph">
<p>Notice also that, after you add a <code>Bean1</code> to a form, if you expand the <strong>Libraries</strong> node under the project, the <code>Bean</code> library has automatically been added to the project&#8217;s classpath.</p>
</div>
<div class="paragraph">
<p>The Java Beans specification allows a <code>BeanInfo</code> class for a component to define a localized name for it, along with icons. In the example above, we defined the localized name in the <code>palette_item</code> file&#8217;s definition and the <code>Bundle.properties</code> file. You can use either one (just leave out the line about the resource bundle in the XML file to use the BeanInfo); if you are going to need a <code>BeanInfo</code> anyway, you can just define it there. However, since they are Java classes, BeanInfos use memory and are an inefficient way to define this sort of thing. If possible, avoid having a <code>BeanInfo</code> and just use this mechanism.</p>
</div>
<div class="paragraph">
<p>If you want to provide icons via the <code>palette_item</code> XML file, you can do that too — just add the following lines inside the <code>&lt;palette_item&gt;</code> tags in the file, replacing the file name with a .gif or .png file name, and the path with the path in your module to the package they are in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">&lt;icon16 urlvalue="nbres:/org/netbeans/modules/form/beaninfo/awt/panel.gif" /&gt;
&lt;icon32 urlvalue="nbres:/org/netbeans/modules/form/beaninfo/awt/panel32.gif" /&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_property_editor">Creating A Property Editor</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now we are ready to create a property editor. We will put our editors in another package, <code>org.netbeans.demo.form.beanlib.editors</code> — in accordance with the Java Beans specification, that package will be registered with <code>java.beans.PropertyEditorManager</code>. We don&#8217;t need <code>PropertyEditorManager</code> to be able to find other classes that are part of our module, but are not our property editors or classes our property editors use. So keeping unrelated classes invisible to our property editors is good sense both from a perfomance and a security perspective.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the <code>org.netbeans.demo.form.beanlib.editors</code> package and choose <strong>New &gt; Java Class</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>When the New File Wizard opens, name the class <code>ColorValueEditor</code>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Replace the template code that initially appears in the new Java file with the code in <a href="#listing10">listing 10</a>.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_listing_10_a_propertyeditor_for_colorvalue_objects">[[Listing 10: A PropertyEditor for ColorValue Objects]]</h3>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package org.netbeans.demo.form.beanlib.editors;
import bean.ColorValue;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.Rectangle;
import java.beans.PropertyChangeListener;
import java.beans.PropertyChangeSupport;
import java.beans.PropertyEditor;
import org.openide.explorer.propertysheet.ExPropertyEditor;
import org.openide.explorer.propertysheet.PropertyEnv;
public class ColorValueEditor implements PropertyEditor, ExPropertyEditor {
    private ColorValue value;
    public void setValue(Object o) {
        this.value = (ColorValue) o;
    }

    public Object getValue() {
        return value;
    }

    public boolean isPaintable() {
        return false;
    }

    public void paintValue(Graphics grphcs, Rectangle rctngl) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    public String getJavaInitializationString() {
        return "new ColorValue(" + value.getRed() + ',' +
                value.getGreen() + ',' + value.getBlue() + ')';
    }

    public String getAsText() {
        return "" + value.getRed() + ',' + value.getGreen() + ',' +
                value.getBlue();
    }

    public void setAsText(String string) throws IllegalArgumentException {
        String[] rgb = string.split(",");
        if (rgb == null || rgb.length != 3) {
            throw new IllegalArgumentException ("Should be in format " +
                    "'red,green,blue'");
        }
        try {
            int red = Integer.parseInt(rgb[0].trim());
            int green = Integer.parseInt(rgb[1].trim());
            int blue  = Integer.parseInt(rgb[2].trim());
            setValue (new ColorValue(red, green, blue));
        } catch (NumberFormatException nfe) {
            throw new IllegalArgumentException(nfe);
        }
    }

    public String[] getTags() {
        return null;
    }

    public Component getCustomEditor() {
        return null;
    }

    public boolean supportsCustomEditor() {
        return false;
    }

    private final PropertyChangeSupport supp = new PropertyChangeSupport(this);
    public void addPropertyChangeListener(PropertyChangeListener pl) {
        supp.addPropertyChangeListener(pl);
    }

    public void removePropertyChangeListener(PropertyChangeListener pl) {
        supp.removePropertyChangeListener(pl);
    }

    private PropertyEnv env;
    public void attachEnv(PropertyEnv pe) {
        env = pe;
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_registering_the_property_editor_package">Registering The Property Editor Package</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We now have a property editor for <code>ColorValue</code> objects. The next step is to register our property editor package, so that, when our module is run in the IDE, <code>java.beans.PropertyEditorManager</code> can find our editor and it will be used in the Property Sheet of the Form Editor.</p>
</div>
<div class="paragraph">
<p>While most of the time, the way you install things in NetBeans, so that the IDE can find your module&#8217;s classes at runtime, is declarative — using the <code>layer.xml</code> file and similar mechanisms — <code>PropertyEditorManager</code> is not part of NetBeans, it is part of the JDK. It expects registration to be done programmatically, via Java code that runs during IDE startup. Running code during startup is generally to be avoided, since it means the user will be looking at the startup splash-screen for longer, but in this case there is no other way.</p>
</div>
<div class="paragraph">
<p>To register our property editor, we need to create a subclass of <code>org.openide.modules.ModuleInstall</code>, and add a reference to it to our module&#8217;s JAR manifest. Fortunately, there is a file template built into NetBeans' module-writing tools that will take care of creating the subclass and adding the manifest entry — we can use that and then just add the code we need to the resulting <code>ModuleInstall</code>. To do that:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right click the <code>org.netbeans.demo.form.beanlib</code> package and choose <strong>New &gt; Other</strong> from the popup menu.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the New File Wizard, choose <strong>Module Development &gt; Module Installer</strong> and click <strong>Next</strong>, then click <strong>Finish</strong>. A Java file called <code>Installer</code> will be created in the package.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Replace the <code>restored()</code> method with the contents of <a href="#listing11">listing 11</a></p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_listing_11_registering_the_property_editors_package_at_ide_startup">[[Listing 11: Registering The Property Editors Package At IDE Startup]]</h3>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void restored() {
    String[] old = PropertyEditorManager.getEditorSearchPath();
    List &lt;String&gt; l = new ArrayList&lt;String&gt;(Arrays.asList(old));
    l.add ("org.netbeans.demo.form.beanlib.editors");
    PropertyEditorManager.setEditorSearchPath(l.toArray(new String[l.size()]));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>java.beans.PropertyEditorManager</code> uses a naming convention to recognize property editors: It expects the class name of an editor for a type to be the name of the class it edits plus "Editor" (i.e. the editor class for a ColorValue must be called ColorValueEditor). PropertyEditorManager also allows you to register a specific editor class to edit a specific class. The code above would look like <code>PropertyEditorManager.registerEditor (ColorValue.class, ColorValueEditor.class)</code> if we took that approach.</p>
</div>
<div class="paragraph">
<p>Package name based registration has the advantage that neither the ColorValue nor the ColorValueEditor class needs to be loaded into the VM unless the user actually uses it.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_netbeans_form_editor_classloader_black_magic">NetBeans Form Editor Classloader Black Magic</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At this point we are almost ready to run our module with our property editor. There is one bit of arcana left to take care of. As mentioned earlier, NetBeans does various tricks with classloaders — in particular, limiting classes a module can see to only those ones it says it needs access to.</p>
</div>
<div class="paragraph">
<p>A Swing GUI and its libraries are classes that belong to the user — they are not parts of NetBeans. The form editor takes a similar approach — Java classes used in a Swing UI <em>are</em> loaded into the Java Virtual Machine NetBeans is running in; however, they are loaded in their own classloader, which normally does not allow random components access to classes from a module. This has two beneficial effects:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>A foreign Swing component cannot interfere with the operation of the rest of the IDE, just because a user dropped it on a form.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Misbehaving or memory-leaking components can be discarded when the form is closed and the classloader it used is discarded — limiting the potential damage a buggy component can do.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>We have already set up the classpath so that our module can see classes from <code>Bean.jar</code>. We need to set up the reverse situation — allow our properties to call into classes in our module and the rest of NetBeans when they are loaded inside the sandbox of the classloader the form editor uses for loading the user&#8217;s components.</p>
</div>
<div class="paragraph">
<p>This is accomplished via a bit of black magic with the form editor&#8217;s classloader. The form editor allows us to define a special text file in our <code>layer.xml</code> file, which contains a list of classes and/or packages that should be visible to components living inside a Swing form. To accomplish this:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Open <code>layer.xml</code> again in the text editor.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Add the XML fragment from <a href="#listing12">listing 12</a> before the closing <code>&lt;/filesystem&gt;</code> tag.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Right click the <code>org.netbeans.demo.form.beanlib</code> package, and choose <strong>New &gt; Other</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>In the New File Wizard, choose <strong>Other &gt; Empty File</strong> and click <strong>Next</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>In the second page of the New File Wizard, name the file <code>BeanClasses.txt</code> (note that because we are using the <strong>Empty File</strong> template, we need to specify the file extension — normally you do not do this or you end up with file names such as <code>Foo.xml.xml</code>).</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Paste the contents of <a href="#listing13">listing 13</a> into the new text file.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_listing_12_registering_classes_that_should_be_visible_in_layer_xml">[[Listing 12: Registering Classes That Should Be Visible in layer.xml]]</h3>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;folder name="org-netbeans-modules-form"&gt;
   &lt;folder name="classloader"&gt;
       &lt;folder name="system"&gt;
            &lt;file name="BeanClasses.txt" url="BeanClasses.txt"/&gt;
        &lt;/folder&gt;
   &lt;/folder&gt;
&lt;/folder&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If your property editors or components also need to be able to see classes or resources (such as images) that are part of the user&#8217;s project, you can register the class list in the folder <code>system_with_project</code> instead of <code>system</code>. If some do and some do not, register two lists, including only those that really need to see classes from the user&#8217;s project in <code>system_with_project</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_listing_13_listing_module_classes_that_should_be_visible_to_components_in_the_form_editor">[[Listing 13: Listing Module Classes That Should Be Visible to Components in the Form Editor]]</h3>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">org.netbeans.demo.form.beanlib.editors.**
bean.**</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now at last we have working property editors which are registered by our module. You can run the module project, add a <code>Bean1</code> to a Swing form, and the property <code>colorValue</code> will use our property editor.</p>
</div>
<div class="paragraph">
<p>This file can list individual classes, or it can list packages including all subpackages of those classes by using the suffix <code><strong>*</code>, or limit the search to only the one specified package but using the suffix <code></strong></code>. The next step is to create a custom editor that will interact with the IDE, controlling its (NetBeans-provided) OK button.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_a_custom_editor">Adding A Custom Editor</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To really interact with the IDE, we should add support for a custom (pop-up window) editor for our <code>ColorValue</code> property. To do that:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the <code>org.netbeans.demo.form.beanlib.editors</code> package and choose <strong>New &gt; JPanel Form</strong> from the popup window.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the New File Wizard that opens, name the file <code>ColorValueCustomEditor</code>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the newly created JPanel form, add the following components from the Component Palette, arranging the UI as shown in <a href="#figure2">figure 2</a> and setting the variable names as shown below (to set the name, slow-double-click the name of each component in the <strong>Inspector</strong> window, then type the new name; component type shown in parentheses):</p>
<div class="literalblock">
<div class="content">
<pre> [[
image::images/property-editors_colorValueCustomEditorUI.png[]]]
_Figure 2: Color Value Custom Editor User Interface_</pre>
</div>
</div>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">redLabel (JLabel)</th>
<th class="tableblock halign-left valign-top">redSlider (JSlider)</th>
<th class="tableblock halign-left valign-top">redValue (JLabel)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">greenLabel (JLabel)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">greenSlider (JSlider)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">greenValue (JLabel)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">blueLabel (JLabel)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">blueSlider (JSlider)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">blueValue (JLabel)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">intLabel (JLabel)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">intValue (JTextField)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sample (JLabel)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><em>Table 1: Component Variable Names and Types in ColorValueCustomEditor</em></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Set the property <strong>Opaque</strong> to true on the property sheet for <code>sample</code>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Select all (shift-click) of the JSliders in the form editor, and set their <code>maximum</code> property to <code>255</code>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Replace the constructor of <code>ColorValueCustomEditor</code> with the content of <a href="#listing14">listing 14</a>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Change the class signature of <code>ColorValueCustomEditor</code> to look like <a href="#listing15">listing 15, implementing <code>ChangeListener</code> and <code>DocumentListener</code></a>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Add the code in  <a href="listing16">listing 16</a> to <code>ColorValueCustomEditor</code> to implement the listener interfaces and handle events.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_listing_14_colorvaluecustomeditor_constructor">[[Listing 14: ColorValueCustomEditor Constructor]]</h3>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    private final ColorValueEditor ed;
    public ColorValueCustomEditor(ColorValueEditor ed, PropertyEnv env) {
        initComponents();
        ColorValue cv = (ColorValue) ed.getValue();
        if (cv != null) {
            Color c = cv.toColor();
            setColor(c);
            intValue.setText(c.getRGB() + "");
        }
        env.setState(PropertyEnv.STATE_VALID);
        this.ed = ed;
        redSlider.getModel().addChangeListener(this);
        greenSlider.getModel().addChangeListener(this);
        blueSlider.getModel().addChangeListener(this);
        intValue.getDocument().addDocumentListener(this);
    }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_listing_15_changing_the_class_signature_of_colorvaluecustomeditor_to_implement_listeners">[[Listing 15: Changing the Class Signature of ColorValueCustomEditor to Implement Listeners]]</h3>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">final class ColorValueCustomEditor extends javax.swing.JPanel implements ChangeListener, DocumentListener {</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_listing_16_listener_interface_implementation_for_colorvaluecustomeditor">[[Listing 16: Listener Interface Implementation for ColorValueCustomEditor]]</h3>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    private ColorValue getPropertyValue() {
        return new ColorValue(redSlider.getValue(), greenSlider.getValue(),
                blueSlider.getValue());
    }

    private boolean inUpdate;
    public void stateChanged(ChangeEvent ce) {
        if (inUpdate) {
            return;
        }
        inUpdate = true;
        try {
            redValue.setText(redSlider.getValue() + "");
            greenValue.setText(greenSlider.getValue() + "");
            blueValue.setText(blueSlider.getValue() + "");
            ColorValue v = getPropertyValue();
            Color c = v.toColor();
            intValue.setText(c.getRGB() + "");
            sample.setBackground(c);
            ed.setValue(v);
        } finally {
            inUpdate = false;
        }
    }

    public void insertUpdate(DocumentEvent de) {
        changedUpdate(de);
    }

    public void removeUpdate(DocumentEvent de) {
        changedUpdate(de);
    }

    void setColor (Color c) {
        boolean old = inUpdate;
        inUpdate = true;
        try {
            redSlider.setValue(c.getRed());
            greenSlider.setValue(c.getGreen());
            blueSlider.setValue(c.getBlue());
        } finally {
            inUpdate = old;
        }
    }

    public void changedUpdate(DocumentEvent de) {
        if (!inUpdate) {
            try {
                int val = Integer.parseInt(intValue.getText().trim());
                setColor(new Color(val));
            } catch (NumberFormatException e) {
                PropertyEnv env = ed.env;
                if (env != null) {
                    env.setState(PropertyEnv.STATE_VALID);
                }
            }
        }
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we just need to modify <code>ColorValueEditor</code> to actually create a <code>ColorValueCustomEditor</code>. To do that:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Update the <code>supportsCustomEditor()</code> and <code>getCustomEditor()</code> to look like <a href="#listing17">listing 17</a></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_listing_17_creating_our_custom_editor">[[Listing 17: Creating Our Custom Editor]]</h3>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    public Component getCustomEditor() {
        return new ColorValueCustomEditor(this, env);
    }

    public boolean supportsCustomEditor() {
        return true;
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point, we are ready to run the project, and when you click on the [&#8230;&#8203;] button for the <code>colorValue</code> property of an instance of <code>Bean1</code> on your form, our newly finished custom editor will open. Notice that if you type an invalid number in the text area, the OK button will become disabled.</p>
</div>
</div>
<div class="sect2">
<h3 id="_what_colorvalueeditor_does">What ColorValueEditor Does</h3>
<div class="paragraph">
<p>You may have noticed that <code>ColorValueEditor</code> implements a NetBeans interface, <code>org.openide.explorer.propertysheet.ExPropertyEditor</code>, in addition to the standard JDK <code>PropertyEditor</code> interface. This interface, or more importantly the <code>PropertyEnv</code> object that is passed to it is the path for our property editor to escape the prison of the Java Beans spec and interact with the environment (the IDE) that instantiated it.</p>
</div>
<div class="paragraph">
<p><code>PropertyEnv</code> is an enigmatic little class, but it offers a lot of power. In our case, we are using it very simply, just to let our custom editor control the OK button of the dialog it appears in. To do that, we call <code>env.setState(PropertyEnv.STATE_INVALID)</code> to disable the OK button, and <code>env.setState(PropertyEnv.STATE_VALID)</code> to reënable it. Here are some of the other things we could do with it:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Delay figuring out if the user&#8217;s input is good or not until the user presses enter, by calling <code>env.setState(PropertyEnv.STATE_NEEDS_VALIDATION)</code> and attaching a <code>VetoableChangeListener</code> which can veto a change to <code>STATE_VALID</code> which will happen when the user presses OK</p>
</li>
<li>
<p>Get the <code>Node.Property</code> object which created the property editor and represents the property being useful, using <code>env.getFeatureDescriptor()</code>. This is useful for passing hints to the property sheet about how an editor should behave when in the property sheet. Two useful hints are</p>
</li>
<li>
<p>Call <code>env.getFeatureDescriptor().setValue("canEditAsText", Boolean.FALSE)</code> to make the property non-editable inside the property sheet (so the only way to change the property is to open the custom editor).</p>
</li>
<li>
<p>Call <code>env.getFeatureDescriptor().setValue("suppressCustomEditor", Boolean.TRUE)</code> from a <code>PropertyEditor</code> subclass, to hide the [&#8230;&#8203;] custom editor button on a property that would otherwise have one.</p>
</li>
<li>
<p>Register an <code>InplaceEditor.Factory</code> which can provide the UI component that is shown in the property sheet when the user edits the property without opening a custom editor (a tutorial on how to do that can  <a href="https://netbeans.apache.org/tutorials/nbm-property-editors.html">be found here</a>)</p>
</li>
<li>
<p>Get the Node for the file being edited like this:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Node n = null;
for (Object o : env.getBeans()) {
  if (o instanceof Node) {
    n = (Node) o;
    break;
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and use that to
* Get the file that is being edited — <code>n.getLookup().lookup(DataObject.class).getPrimaryFile()</code>
* Find the project that owns the file being edited and interrogate its classpath (for example, to list possible directories the user might want to save an icon file to):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">FileObject fo = n.getLookup().lookup(DataObject.class).getPrimaryFile();
Project project = FileOwnerQuery.getOwner(fo);
if (project != null) } {
   ClassPathProvider provider = project.getLookup().lookup(ClassPathProvider.class);
   ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Be aware that <code>attachEnv()</code> may be called more than once for your property editor. To make sure you are using the right instance of <code>PropertyEnv</code>, store the value from the most recent call in a field of your property editor, and pass that to the custom editor.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_writing_xml_instead_of_serializing">Writing XML Instead Of Serializing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The last thing we may want to do is more about plumbing than anything the user sees directly: When you are editing a Swing form in the NetBeans Form Editor, you are really editing two files (though you only see the Java file in the projects tab). The form editor is really an editor for an invisible (in NetBeans) XML file that sits next to the Java source file. The form editor is really an editor of that XML file. Whenever you make a change in the form editor, the data about how components are positioned and their properties is saved in that file. That file is then used to generate the <code>initComponents()</code> method and other code inside the non-editable blue code blocks in your Java source. Whenever the XML file changes (because you made a change in the form editor and saved the file), those blue <em>guarded blocks</em> are regenerated into the Java source file.</p>
</div>
<div class="paragraph">
<p>It is worth taking a look at the <code>.form</code> file after you have modified a <code>ColorValue</code> and saved the form (make sure you save it!). To do this, you will need to go outside of NetBeans and use a text editor (if on Windows, use a text editor that understands lines that end with just a carriage return character — WordPad, usually located in <code>C:\Program Files\Windows NT\Accessories</code> on Windows will do). What you will see is something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;Property name="colorValue" type="bean.ColorValue" editor="org.netbeans.demo.form.beanlib.editors.ColorValueEditor"&gt;
  &lt;SerializedValue value="-84,-19,0,5,115,114,0,15,98,101,97,110,46,67,
                   111,108,111,114,86,97,108,117,101,95,6,-80,34,96,
                  _[remainder omitted]_
&lt;/Property&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>What are all of these numbers? This is a <em>serialized</em> object. The form editor knows nothing about your component, but needs some way to save the state of our <code>ColorValue</code> object. The only built-in way Java has to do that is to use serialization to save the in-memory representation of your object as an array of bytes. The form editor then translates that array of bytes into a terribly inefficient comma-delimited string of numbers.</p>
</div>
<div class="paragraph">
<p>There are four big problems with using serialization to write out an object into the form file:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>It&#8217;s inefficent — it takes up a lot of space in the file, and takes longer to read and write</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>It&#8217;s not human-readable — If a form were corrupted in some way, the user doesn&#8217;t have any chance to figure out what the value of this object actually was</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>It&#8217;s fragile — the data structure depends on the JVM&#8217;s in-memory data structure for the class. If you add a field or a method to <code>ColorValue</code> in the future, the data in all existing <code>.form</code> files will be unusable. That means users will lose their components and have to recreate them, or they must never edit a form with a <code>Bean1</code> on it again.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>There is another way. Although nobody truly loves writing DOM code, you can implement XMLPropertyEditor. What happens then is:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>When the form is saved, the form editor will make an instance of the property editor for the property</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>The property editor will be passed the XML <code>Document</code> and asked to provide a document node that contains data about the component</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>The next time the form is opened, the form editor will read the name <code>org.netbeans.demo.form.beanlib.editors.ColorValueEditor</code> in the XML, make an instance of our editor, and ask it to read the XML that was written out and create an instance of <code>ColorValue</code> to display in the form editor.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>By using XML instead of serialization, we get to choose what data we store in the <code>.form</code> file, how it is stored, and our code is in charge of reading it back. If new properties or fields have been added to <code>ColorValue</code> and we are reading an old form, we can just ignore missing values and use some reasonable default value. The result is that our users are protected from having corrupted, unopenable forms caused by upgrading to a new version of <code>Bean.jar</code>. To use this approach instead,</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Modify the class signature of <code>ColorValueEditor</code> so that it implements <code>org.openide.explorer.propertysheet.editors.XMLPropertyEditor</code>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Implement the methods of <code>XMLPropertyEditor</code> as shown in <a href="#listing18">listing 18</a>.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_listing_18_implementing_xmlpropertyeditor">[[Listing 18: Implementing XMLPropertyEditor]]</h3>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public void readFromXML(Node node) throws IOException {
    NamedNodeMap attrs = node.getAttributes();
    Node red = attrs.getNamedItem("red");
    Node green = attrs.getNamedItem("green");
    Node blue = attrs.getNamedItem("blue");
    if (red != null &amp;amp;&amp;amp; green != null &amp;amp;&amp;amp; blue != null) {
        value = new ColorValue(
                Integer.parseInt(red.getNodeValue()),
                Integer.parseInt(green.getNodeValue()),
                Integer.parseInt(blue.getNodeValue())
                );
    } else {
        value = new ColorValue(); //use default value
    }
}

public Node storeToXML(Document doc) {
    Element el = doc.createElement("ColorValue");
    if (value != null) {
        el.setAttribute("red", "" + value.getRed());
        el.setAttribute("green", "" + value.getGreen());
        el.setAttribute("blue", "" + value.getBlue());
    }
    return el;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above results in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;Property name="colorValue" type="bean.ColorValue" editor="org.netbeans.demo.form.beanlib.editors.ColorValueEditor"&gt;
     &lt;ColorValue blue="128" green="235" red="26"/&gt;
&lt;/Property&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_packaging_your_component">Packaging Your Component</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once you have your module the way you like it, the next step is to package it up so that others can install it. In NetBeans, this is extremely simple: Just right click the module project and choose <strong>Create NBM</strong>. This will create an NBM (NetBeans Module) file which includes your module and your library in a single file any user can install using <strong>Tools &gt; Plugins</strong>. Users of your component do not have to deal with separate JAR and documentation downloads, and if they want an updated version of your components, all they have to do is install a new NBM to get them.</p>
</div>
<div class="paragraph">
<p>A useful way to deliver components is to set up your own <em>update center</em>. An update center has a list of NBM files for download. Users of NetBeans can just add the URL for your update center on the <strong>Settings</strong> tab in <strong>Tools &gt; Plugins</strong>. The IDE will automatically check with your server on a regular basis to see if there are updates available.</p>
</div>
<div class="paragraph">
<p>You can make this process even easier by doing two things:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Automatically generate the update index using NetBeans: Just create a <strong>Module Suite</strong> project and add the module to it. Right click that project and choose <strong>Create NBMs</strong>. Along with the NBM file, you get the <code>update.xml</code> file which is what the IDE reads to figure out if any updates are there.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Use  <a href="http://hudson.dev.java.net">Hudson</a> to run continuous builds of your suite and publish the resulting files. This way you can completely automate publishing new versions of your module and libraries. More information about setting up automated builds with Hudson  <a href="http://xtest.netbeans.org/XTest_for_Platform.html#Build_application_using_Hudson">can be found here</a></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_wrap_up">Wrap Up</h2>
<div class="sectionbody">
<div class="paragraph">
<p>NetBeans provides a powerful way to deliver Java components to your users, including all of the documentation and sources to your users and potential users in a single easy-to-use deliverable. By creating property editors that integrate tightly with NetBeans, you can further enhance the ease of use of working with your components.</p>
</div>
</div>
</div>
        
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/70/nbm-propertyeditors-integration.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
