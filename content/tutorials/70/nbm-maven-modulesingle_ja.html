
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Maven を使用した NetBeans モジュールの作成</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Maven を使用した NetBeans モジュールの作成 - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, Maven を使用した NetBeans モジュールの作成">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="https://blogs.apache.org/netbeans/">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 17</h1>
            <p><a class="button success" href="/download/nb17/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Maven を使用した NetBeans モジュールの作成</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/70/nbm-maven-modulesingle_ja.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_ide_での_maven_の使用方法">IDE での Maven の使用方法</a>
<ul class="sectlevel2">
<li><a href="#_maven_オプションの構成">Maven オプションの構成</a></li>
<li><a href="#_maven_リポジトリの表示">Maven リポジトリの表示</a></li>
</ul>
</li>
<li><a href="#_netbeans_プラットフォームモジュールプロジェクトの作成">NetBeans プラットフォームモジュールプロジェクトの作成</a>
<ul class="sectlevel2">
<li><a href="#_モジュールの作成">モジュールの作成</a></li>
<li><a href="#_dataobject_クラスの作成">DataObject クラスの作成</a></li>
</ul>
</li>
<li><a href="#_プロジェクトの構築と実行">プロジェクトの構築と実行</a>
<ul class="sectlevel2">
<li><a href="#_netbeans_インストールの場所の指定">NetBeans インストールの場所の指定</a></li>
<li><a href="#_モジュールの実行">モジュールの実行</a></li>
</ul>
</li>
<li><a href="#_ファイルの種類のアクションの追加">ファイルの種類のアクションの追加</a>
<ul class="sectlevel2">
<li><a href="#_アクションクラスの作成">アクションクラスの作成</a></li>
<li><a href="#_アクションへの動作の割り当て">アクションへの動作の割り当て</a></li>
</ul>
</li>
<li><a href="#_ファイルの種類のウィンドウの作成">ファイルの種類のウィンドウの作成</a></li>
<li><a href="#_関連項目">関連項目</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>このドキュメントでは、Maven 原型から NetBeans モジュールプロジェクトを作成し、モジュールを構築して IDE のインストール構成にインストールする方法を示します。このチュートリアルでは、インストールするとプロジェクトに新しいファイルの種類が作成できるようになる、簡単なモジュールプロジェクトを作成します。このモジュールは、新しいファイルの種類を選択したときに使用できるようになるメニューアクションも作成します。</p>
</div>
<div class="paragraph">
<p>このドキュメントは、Ant ベースの「 <a href="https://netbeans.apache.org/tutorials/nbm-filetype_ja.html">NetBeans ファイルの種類のチュートリアル</a>」に基づいており、NetBeans モジュールの開発において、Ant を使用する場合と Maven を使用する場合の違いについていくつか説明します。これらの相違点を少し理解すれば、「 <a href="https://netbeans.apache.org/kb/docs/platform_ja.html">NetBeans プラットフォームの学習</a>」のチュートリアルを容易に理解できるようになります。</p>
</div>
<div class="paragraph">
<p>NetBeans プラットフォームをはじめて使用する場合は、スクリーンキャストシリーズの「 <a href="https://netbeans.apache.org/tutorials/nbm-10-top-apis.html">NetBeans API のトップ 10</a>」を視聴いただくことをお勧めします。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
NetBeans プラットフォーム用のアプリケーション開発のために、別々のバージョンの NetBeans プラットフォームをダウンロードする必要はありません。通常、NetBeans IDE でアプリケーションおよびモジュールを開発し、NetBeans プラットフォームおよびアプリケーションを実行するのに必要なモジュールのみを追加します。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>このチュートリアルを開始する前に、必要に応じて次のドキュメントをお読みください。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://wiki.netbeans.org/MavenBestPractices">NetBeans 6.x での Apache Maven のベストプラクティス</a></p>
</li>
<li>
<p><a href="http://www.sonatype.com/books/maven-book/reference/introduction.html">Chapter 1. Introducing Apache Maven</a> (『 <a href="http://www.sonatype.com/books/maven-book/reference/public-book.html">Maven: The Definitive Guide</a>』)</p>
</li>
<li>
<p><a href="https://netbeans.apache.org/kb/docs/java/gui-functionality_ja.html">GUI 構築入門</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ide_での_maven_の使用方法">IDE での Maven の使用方法</h2>
<div class="sectionbody">
<div class="paragraph">
<p>これがはじめての Maven プロジェクトである場合は、Maven の構成設定および Maven リポジトリブラウザに慣れることをお勧めします。</p>
</div>
<div class="sect2">
<h3 id="_maven_オプションの構成">Maven オプションの構成</h3>
<div class="paragraph">
<p>「オプション」ウィンドウの「Maven」タブを使用して、IDE における Maven の動作を設定したり、設定が正しいかどうかを確認したりできます。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「オプション」ウィンドウの「その他」カテゴリを選択して、「Maven」タブをクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Maven をインストールするローカルの場所を指定します (2.0.9 以降が必要)。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Maven のローカルリポジトリの場所が正しいことを確認します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「了解」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>ほとんどの場合、Maven の設定が標準的であれば、「オプション」ウィンドウの情報はすでに正しいものになっています。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Maven サポートは、Java SE 機能セットの一部として有効になっています。「オプション」ウィンドウで「Maven」タブが使用できない場合は、Java アプリケーションを作成して Java SE が有効になっているか確認してください。
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_maven_リポジトリの表示">Maven リポジトリの表示</h3>
<div class="paragraph">
<p>Maven ですべてのプロジェクトを構築するために使用されるアーティファクトは、Maven のローカルリポジトリに格納されます。アーティファクトがプロジェクトの依存リソースとして宣言されると、そのアーティファクトは登録されたリモートリポジトリの 1 つからローカルリポジトリにダウンロードされます。</p>
</div>
<div class="paragraph">
<p>デフォルトで、NetBeans リポジトリおよびよく知られているインデックス付きの Maven リポジトリがいくつか登録され、リポジトリブラウザウィンドウに一覧表示されます。NetBeans リポジトリには、プロジェクトの構築に必要な、ほとんどの公開アーティファクトが含まれています。Maven リポジトリブラウザを使用すると、ローカルリポジトリとリモートリポジトリの内容を確認することができます。「ローカルリポジトリ」ノードを展開すると、ローカルにあるアーティファクトを表示できます。NetBeans リポジトリノードの下に一覧表示されているアーティファクトは、プロジェクトの依存リソースとして追加できますが、すべてのアーティファクトがローカルにあるわけではありません。これらはプロジェクトの依存リソースとして宣言されたときにだけ、ローカルリポジトリに追加されます。</p>
</div>
<div class="paragraph">
<p>Maven リポジトリブラウザを開くには、次の手順に従います。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>メインメニューから「ウィンドウ」&gt;「その他」&gt;「Maven リポジトリブラウザ」を選択します。</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-quickstart68_maven-nbm-netbeans-repo.png" alt="maven quickstart68 maven nbm netbeans repo">
</div>
<div class="title">Figure 1. Maven リポジトリブラウザのスクリーンショット</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_netbeans_プラットフォームモジュールプロジェクトの作成">NetBeans プラットフォームモジュールプロジェクトの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この節では、NetBeans モジュールプロジェクトを作成してから、新しいファイルの種類のための DataObject を作成します。</p>
</div>
<div class="sect2">
<h3 id="_モジュールの作成">モジュールの作成</h3>
<div class="paragraph">
<p>この課題では、「新規プロジェクト」ウィザードを使用して、Maven 原型から NetBeans モジュールプロジェクトを作成します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「新規プロジェクト」ウィザードを開き、「Maven」カテゴリから「Maven NetBeans モジュール」を選択します。「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「プロジェクト名」に「<strong>AbcFileType</strong>」と入力します。「完了」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「完了」をクリックすると、IDE によって AbcFileType プロジェクトが作成されます。POM を見ると、Maven が  <code> <a href="http://maven.apache.org/plugins/maven-jar-plugin/">maven-jar-plugin</a></code>  を使用して JAR を構築し、 <code> <a href="http://bits.netbeans.org/mavenutilities/nbm-maven-plugin/">nbm-maven-plugin</a></code>  が NetBeans モジュール ( <code>nbm</code> ) として JAR をパッケージ化することが確認できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;com.mycompany&lt;/groupId&gt;
    &lt;artifactId&gt;AbcFileType&lt;/artifactId&gt;
    *&lt;packaging&gt;nbm&lt;/packaging&gt;*
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;AbcFileType NetBeans Module&lt;/name&gt;
    ...
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
                *&lt;artifactId&gt;nbm-maven-plugin&lt;/artifactId&gt;*
                &lt;extensions&gt;true&lt;/extensions&gt;
            &lt;/plugin&gt;
            ...
            &lt;plugin&gt;
            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                *&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;*
                &lt;version&gt;2.2&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;!-- to have the jar plugin pickup the nbm generated manifest --&gt;
                    &lt;useDefaultManifestFile&gt;true&lt;/useDefaultManifestFile&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dataobject_クラスの作成">DataObject クラスの作成</h3>
<div class="paragraph">
<p>この節では、「新規ファイルの種類」ウィザードを使用して、 <code>.abc</code>  という名前の新しいファイルの種類を作成および認識するためのファイルを作成します。このウィザードは、MIME タイプリゾルバである  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-loaders/org/openide/loaders/DataObject.html">DataObject</a></code>  および  <code>abc</code>  ファイルのファイルテンプレートを作成し、新しいファイルの種類の登録エントリを追加するように  <code>layer.xml</code>  を変更します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「プロジェクト」ウィンドウでプロジェクトノードを右クリックし、「新規」&gt;「ファイルの種類」を選択します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「ファイルの認識」パネルで、「MIME タイプ」に「<strong>text/x-abc</strong>」、「ファイル名の拡張子」に「<strong>.abc .ABC</strong>」を入力します。「次へ」をクリックします。
image::images/maven-single_maven-single-new-filetype-wizard.png[title="「新規ファイルの種類」ウィザード"]</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「クラス名の接頭辞」に「<strong>Abc</strong>」と入力します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「参照」をクリックして、16x16 ピクセルの画像ファイルを新しいファイルの種類のアイコンとして選択します。「完了」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>この画像  <code> <a href="images/maven-crud_abc16.png">abc16.png</a></code>  (
image::images/maven-crud_abc16.png[title="16x16"]) をシステムに保存して、ウィザードでこの画像を指定することもできます。</p>
</div>
<div class="paragraph">
<p>「完了」をクリックすると、IDE によって  <code>AbcDataObject</code>  クラスが作成され、指定したファイルの種類のアイコンが、「その他のソース」の下の  <code>src/main/resources</code>  のパッケージにコピーされます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-single_maven-single-projects1.png" alt="maven single maven single projects1">
</div>
<div class="title">Figure 2. 「プロジェクト」ウィンドウのスクリーンショット</div>
</div>
<div class="paragraph">
<p>「プロジェクト」ウィンドウを見ると、ウィザードによって  <code>src/main/resources</code>  ディレクトリに MIME タイプリゾルバ ( <code>AbcResolver.xml</code> ) およびテンプレート ( <code>AbcTemplate.abc</code> ) ファイルが作成されているのが確認できます。</p>
</div>
<div class="paragraph">
<p>IDE によって作成されたファイルの詳細については、「 <a href="https://netbeans.apache.org/wiki/devfaqdataobject">DataObject とは</a>」、および「 <a href="nbm-filetype_ja.html">NBM ファイルの種類のチュートリアル</a>」の「 <a href="nbm-filetype_ja.html#recognizing">Abc ファイルの認識</a>」節を参照してください。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_プロジェクトの構築と実行">プロジェクトの構築と実行</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この節では、現バージョンの IDE にモジュールがインストールされるように、モジュールを設定します。モジュールを実行すると、IDE の新しいインスタンスが起動します。</p>
</div>
<div class="sect2">
<h3 id="_netbeans_インストールの場所の指定">NetBeans インストールの場所の指定</h3>
<div class="paragraph">
<p>Maven 原型を使用して NetBeans プラットフォームモジュールを作成した場合、デフォルトではターゲット NetBeans インストールは指定されません。プロジェクトを構築することはできますが、インストールディレクトリを設定せずにプロジェクトを実行しようとすると、「出力」ウィンドウに次のような構築エラーが表示されます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-single_output-build-error.png" alt="maven single output build error">
</div>
<div class="title">Figure 3. 構築エラーを表示する「出力」ウィンドウ</div>
</div>
<div class="paragraph">
<p>IDE のインストール場所にモジュールをインストールして実行するには、POM の  <code>nbm-maven-plugin</code>  要素を編集して、インストールディレクトリのパスを指定する必要があります。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>「プロジェクトファイル」ノードを展開し、 <code>pom.xml</code>  をエディタで開きます。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><code>nbm-maven-plugin</code>  要素に  <code>&lt;netbeansInstallation&gt;</code>  要素を追加して、NetBeans インストール場所のパスを指定します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
    &lt;artifactId&gt;nbm-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;3.2&lt;/version&gt;
    &lt;extensions&gt;true&lt;/extensions&gt;
    *&lt;configuration&gt;
       &lt;netbeansInstallation&gt;/home/me/netbeans-6.9&lt;/netbeansInstallation&gt;
    &lt;/configuration&gt;*
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
パスには、実行可能ファイルが含まれている  <code>bin</code>  ディレクトリが存在するディレクトリを指定する必要があります。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>たとえば、OS X では次のようなパスになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;netbeansInstallation&gt;/Applications/NetBeans/NetBeans 6.9.app/Contents/Resources/NetBeans&lt;/netbeansInstallation&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_モジュールの実行">モジュールの実行</h3>
<div class="paragraph">
<p>NetBeans IDE インストールディレクトリを指定したら、モジュールを構築および実行できます。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>プロジェクトノードを右クリックし、「構築」を選択します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>プロジェクトのノードを右クリックし、「実行」を選択します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「実行」を選択すると、新しいモジュールがインストールされた IDE が起動します。新しいモジュールが正常に機能しているかどうかを確認するには、新しいプロジェクトを作成してから、「新規ファイル」ウィザードを使用して  <code>abc</code>  ファイルを作成します。たとえば、簡単な Java アプリケーションを作成して「新規ファイル」ウィザードを開くと、「その他」カテゴリで「空の Abc ファイル」を選択できます。</p>
</div>
<div class="paragraph">
<p>新しいファイルを作成する際、「プロジェクト」ウィンドウにファイルを表示するにはソースパッケージを指定します。デフォルトでは、「新規ファイルの種類」ウィザードは、プロジェクトのルートレベルにファイルを作成します。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-single_wizard-new-abc-file.png" alt="maven single wizard new abc file">
</div>
<div class="title">Figure 4. Abc ファイルの種類が表示された「新規ファイル」ウィザード</div>
</div>
<div class="paragraph">
<p>新しい abc ファイルを作成したら、このファイルの種類のアイコンでファイルが「プロジェクト」ウィンドウに表示されているのが確認できます。エディタでファイルを開くと、新しいファイルの内容がファイルテンプレートから生成されたのが確認できます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-single_maven-single-projects-abcfile.png" alt="maven single maven single projects abcfile">
</div>
<div class="title">Figure 5. 「プロジェクト」ウィンドウの Abc ファイルとエディタ表示</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ファイルの種類のアクションの追加">ファイルの種類のアクションの追加</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この節では、ユーザーが新しいファイルの種類のノードを右クリックしたときに、ポップアップメニューから呼び出せるアクションを追加します。</p>
</div>
<div class="sect2">
<h3 id="_アクションクラスの作成">アクションクラスの作成</h3>
<div class="paragraph">
<p>この課題では、「新規アクション」ウィザードを使用して、新しいファイルの種類のアクションを実行する Java クラスを作成します。ウィザードは、 <code>layer.xml</code>  にもクラスを登録します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>プロジェクトノードを右クリックし、「新規」&gt;「アクション」を選択します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「アクションの種類」パネルで、「条件付きで有効化」を選択して、「Cookie クラス」に「<strong>com.mycompany.abcfiletype.AbcDataObject</strong>」と入力します。「次へ」をクリックします。
image::images/maven-single_maven-single-newactionwizard.png[title="「新規アクション」ウィザード"]</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「カテゴリ」ドロップダウンリストから「編集」を選択して、「大域メニュー項目」を選択解除します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「ファイルの種類のコンテキストメニュー項目」を選択して、「内容の種類」ドロップダウンリストで「<strong>text/x-abc</strong>」を選択します。「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>「クラス名」に「<strong>MyAction</strong>」、「表示名」に「<strong>My Action</strong>」と入力します。「完了」をクリックします。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>「完了」をクリックすると、 <code>com.mycompany.abcfiletype</code>  ソースパッケージに  <code>MyAction.java</code>  が作成されます。エディタで  <code>layer.xml</code>  を開くと、 <code>Actions</code>  folder 要素内にある  <code>Edit</code>  folder 要素内で、ウィザードによってこのファイルの種類の新しいアクションの詳細情報が追加されているのが確認できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;folder name="Actions"&gt;
    &lt;folder name="Edit"&gt;
        *&lt;file name="com-mycompany-abcfiletype-MyAction.instance"&gt;*
            &lt;attr name="delegate" methodvalue="org.openide.awt.Actions.inject"/&gt;
            &lt;attr name="displayName" bundlevalue="com.mycompany.abcfiletype.Bundle#CTL_MyAction"/&gt;
            &lt;attr name="injectable" stringvalue="com.mycompany.abcfiletype.MyAction"/&gt;
            &lt;attr name="instanceCreate" methodvalue="org.openide.awt.Actions.context"/&gt;
            &lt;attr name="noIconInMenu" boolvalue="false"/&gt;
            &lt;attr name="selectionType" stringvalue="EXACTLY_ONE"/&gt;
            &lt;attr name="type" stringvalue="com.mycompany.abcfiletype.AbcDataObject"/&gt;
        &lt;/file&gt;
    &lt;/folder&gt;
&lt;/folder&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>また、 <code>Loaders</code>  および  <code>Factories</code>  folder 要素内にも、新しいファイルの種類に適用される要素がウィザードによって生成されています。 <code>abc</code>  のファイルの種類のメニューアクションは  <code>Actions</code>  の下に指定され、 <code>DataLoader</code>  は  <code>Factories</code>  の下に指定されます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;folder name="Loaders"&gt;
    &lt;folder name="text"&gt;
        *&lt;folder name="x-abc"&gt;
            &lt;folder name="Actions"&gt;
                &lt;file name="com-mycompany-abcfiletype-MyAction.shadow"&gt;*
                    &lt;attr name="originalFile" stringvalue="Actions/Edit/com-mycompany-abcfiletype-MyAction.instance"/&gt;
                    *&lt;attr name="position" intvalue="0"/&gt;*
                &lt;/file&gt;
                &lt;file name="org-openide-actions-CopyAction.shadow"&gt;
                    &lt;attr name="originalFile" stringvalue="Actions/Edit/org-openide-actions-CopyAction.instance"/&gt;
                    &lt;attr name="position" intvalue="400"/&gt;
                &lt;/file&gt;
                ...
            &lt;/folder&gt;
            *&lt;folder name="Factories"&gt;
                &lt;file name="AbcDataLoader.instance"&gt;*
                    &lt;attr name="SystemFileSystem.icon" urlvalue="nbresloc:/com/mycompany/abcfiletype/abc16.png"/&gt;
                    &lt;attr name="dataObjectClass" stringvalue="com.mycompany.abcfiletype.AbcDataObject"/&gt;
                    &lt;attr name="instanceCreate" methodvalue="org.openide.loaders.DataLoaderPool.factory"/&gt;
                    &lt;attr name="mimeType" stringvalue="text/x-abc"/&gt;
                &lt;/file&gt;
            &lt;/folder&gt;
        &lt;/folder&gt;
    &lt;/folder&gt;
&lt;/folder&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>ポップアップメニューの「My Action」の位置は、 <code>position</code>  属性 ( <code>&lt;attr name="position" intvalue="0"/&gt;</code> ) によって指定されます。デフォルトでは、新しいアクションのこの属性の  <code>intvalue</code>  に  <code>0</code>  が割り当てられ、このアクションがリストの最上部に表示されます。順番を変えるには、 <code>intvalue</code>  を変更します。たとえば、 <code>intvalue</code>  を  <code>200</code>  に変更すると、「My Action」メニュー項目は「開く」メニュー項目の下に表示されます (「開く」アクションの  <code>intvalue</code>  は  <code>100</code> )。</p>
</div>
</div>
<div class="sect2">
<h3 id="_アクションへの動作の割り当て">アクションへの動作の割り当て</h3>
<div class="paragraph">
<p>ここで、アクションのコードを追加する必要があります。この例では、ポップアップメニューからアクションが呼び出されたら、 <code>DialogDisplayer</code>  を使用してダイアログボックスを開くコードを追加します。また、 <code>DialogDisplayer</code>  を使用するために、 <code>org.openide.dialogs</code>  で直接依存リソースを宣言する必要もあります。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><code>MyAction.java</code>  の  <code>actionPerformed(ActionEvent ev)</code>  メソッドを変更して、「My Action」が呼び出されるとダイアログを開くようにします。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">@Override
public void actionPerformed(ActionEvent ev) {
   *FileObject f = context.getPrimaryFile();
   String displayName = FileUtil.getFileDisplayName(f);
   String msg = "This file is " + displayName + ".";
   NotifyDescriptor nd = new NotifyDescriptor.Message(msg);
   DialogDisplayer.getDefault().notify(nd);*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>インポートを修正して、 <code><strong>org.openide.filesystems.FileObject</strong></code>  がインポートされることを確認します。変更を保存します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>インポートを修正したとき、 <code>org.openide.DialogDisplayer</code>  のインポート文を追加しました。ここで、 <code>org.openide.dialogs</code>  アーティファクトの依存リソースを、推移的な依存リソースではなく直接依存リソースと宣言する必要があります。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>プロジェクトの「ライブラリ」ノードの下にある「 <code>org.openide.dialogs</code> 」JAR を右クリックして、「直接依存リソースとして宣言」を選択します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>ここで、モジュールをテストして、新しいアクションが正常に機能するかどうかを確認できます。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
モジュールを実行するには、最初にモジュールに対して「生成物を削除」および「構築」を実行する必要があります。
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-single_maven-single-action-popup.png" alt="maven single maven single action popup">
</div>
<div class="title">Figure 6. 「プロジェクト」ウィンドウの Abc ファイルとエディタ表示</div>
</div>
<div class="literalblock">
<div class="content">
<pre>``abc``  のファイルの種類のノードを右クリックすると、ポップアップメニュー項目の 1 つに「My Action」が表示されているのが確認できます。</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ファイルの種類のウィンドウの作成">ファイルの種類のウィンドウの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>デフォルトでは、新しいファイルの種類は基本的なテキストエディタで開きます。新しいファイルの種類をエディタで開かないようにするには、新しいファイルの種類を編集するための専用の新しいウィンドウを作成します。そのあとで、ほかのファイル編集方法をサポートするためにウィンドウコンポーネントを変更できます。たとえば、ウィンドウをビジュアルエディタに変更できます。この節では、新しいファイルの種類専用の新しいウィンドウコンポーネントを作成します。</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>プロジェクトノードを右クリックし、「新規」&gt;「ウィンドウ」を選択します。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>ドロップダウンリストから「<strong>editor</strong>」を選択し、「アプリケーションの起動時に開く」を選択します。「次へ」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「クラス名の接頭辞」に「<strong>Abc</strong>」と入力します。「完了」をクリックします。</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>エディタで  <code>AbcDataObject.java</code>  を開き、 <code>DataEditorSupport</code>  ではなく  <code> <a href="http://bits.netbeans.org/dev/javadoc/org-openide-loaders/org/openide/loaders/OpenSupport.html">OpenSupport</a></code>  を使用するようにクラスコンストラクタを変更します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public AbcDataObject(FileObject pf, MultiFileLoader loader) throws DataObjectExistsException, IOException {
    super(pf, loader);
    CookieSet cookies = getCookieSet();
    *cookies.add((Node.Cookie) new AbcOpenSupport(getPrimaryEntry()));*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>コンストラクタによって呼び出される  <code>AbcOpenSupport</code>  クラスを作成します。</p>
<div class="literalblock">
<div class="content">
<pre>``AbcOpenSupport``  への呼び出しが含まれる行で Alt-Enter を入力すると、パッケージ  ``com.mycompany.abcfiletype``  に  ``AbcOpenSupport``  が作成されます。</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p><code>AbcOpenSupport</code>  を変更し、 <code>OpenSupport</code>  を拡張して  <code>OpenCookie</code>  および  <code>CloseCookie</code>  を実装します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">class AbcOpenSupport *extends OpenSupport implements OpenCookie, CloseCookie* {</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>abstract メソッドを (Alt-Enter で) 実装して、クラスを次のように変更します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">    public AbcOpenSupport(*AbcDataObject.Entry entry*) {
        *super(entry);*
    }

    @Override
    protected CloneableTopComponent createCloneableTopComponent() {
        *AbcDataObject dobj = (AbcDataObject) entry.getDataObject();
        AbcTopComponent tc = new AbcTopComponent();
        tc.setDisplayName(dobj.getName());
        return tc;*
    }</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>エディタで  <code>AbcTopComponent</code>  を開き、 <code>TopComponent</code>  ではなく  <code>CloneableTopComponent</code>  を拡張するようにクラスを変更します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public final class AbcTopComponent extends *CloneableTopComponent* {</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>クラス修飾子を  <code>private</code>  から  <code>public</code>  に変更します。<strong>public</strong></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java"> static AbcTopComponent instance;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>インポートを修正して変更内容を保存します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>ここで、プロジェクトに「生成物を削除」および「構築」を実行してから、ふたたびモジュールの実行を試行できます。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/maven-single_maven-single-newfile-window.png" alt="maven single maven single newfile window">
</div>
<div class="title">Figure 7. 「プロジェクト」ウィンドウの Abc ファイルとエディタ表示</div>
</div>
<div class="paragraph">
<p>abc ファイルを開くと、基本エディタではなく、新しいウィンドウでファイルが開くようになりました。</p>
</div>
<div class="paragraph">
<p>このチュートリアルでは、Maven 原型から NetBeans モジュールを作成して実行する方法を示しました。ターゲット NetBeans インストールを指定するようにプロジェクト POM を変更し、IDE の「実行」コマンドによってモジュールのインストールおよび IDE の新しいインスタンスの起動が行われるようにする方法を学習しました。また、ファイルの種類および  <code>DataObjects</code>  を扱う方法についても少し学習しましたが、より詳細な情報については、「 <a href="https://netbeans.apache.org/tutorials/nbm-filetype_ja.html">NetBeans ファイルの種類のチュートリアル</a>」を参照するようにしてください。ほかの NetBeans プラットフォームアプリケーションおよびモジュール構築の例については、「 <a href="https://netbeans.apache.org/kb/docs/platform_ja.html">NetBeans プラットフォームの学習</a>」に一覧表示されている各チュートリアルを参照してください。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_関連項目">関連項目</h2>
<div class="sectionbody">
<div class="paragraph">
<p>アプリケーションの作成と開発の詳細については、次のリソースを参照してください。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://netbeans.apache.org/kb/docs/platform_ja.html">NetBeans プラットフォームの学習</a></p>
</li>
<li>
<p><a href="http://bits.netbeans.org/dev/javadoc/">NetBeans API Javadoc</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>NetBeans プラットフォームに関して質問がある場合は、<a href="mailto:dev@platform.netbeans.org">dev@platform.netbeans.org</a> のメーリングリストに投稿していただくか、 <a href="https://mail-archives.apache.org/mod_mbox/netbeans-dev/">NetBeans プラットフォームメーリングリストのアーカイブ</a>を参照してください。</p>
</div>
</div>
</div>
        
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/70/nbm-maven-modulesingle_ja.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2022 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
