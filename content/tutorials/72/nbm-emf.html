
<!doctype html>
<html class="no-js" lang="en" dir="ltr">
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans Platform EMF Integration Tutorial</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans Platform EMF Integration Tutorial - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, NetBeans Platform EMF Integration Tutorial">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> 
    <link rel="stylesheet" href="/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="/"><img src='/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <a href="/community/index.html">Community</a> </li>
            <li> <a href="/participate/index.html">Participate</a> </li>
            <li> <a href="/blogs/index.html">Blog</a></li>
            <li> <a href="/help/index.html">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="/download/index.html">Download</a> </li>
        </ul>
    </div>
</div>


    
<!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 18</h1>
            <p><a class="button success" href="/download/nb18/">Download</a></p>
        </div>
    </div>
</section>

    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">NetBeans Platform EMF Integration Tutorial</h1>
            
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/72/nbm-emf.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="/kb/docs/contributing.html">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
            
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_creating_the_emf_model">Creating the EMF Model</a></li>
<li><a href="#_creating_the_netbeans_platform_application">Creating the NetBeans Platform Application</a></li>
<li><a href="#_importing_the_osgi_bundles">Importing the OSGi Bundles</a></li>
<li><a href="#_creating_an_osgi_bundle_to_contain_the_model">Creating an OSGi Bundle to Contain the Model</a></li>
<li><a href="#_creating_an_osgi_bundle_to_provide_the_window">Creating an OSGi Bundle to Provide the Window</a></li>
<li><a href="#_running_the_application">Running the Application</a></li>
<li><a href="#_further_reading">Further Reading</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This document shows you how to incorporate an  <a href="http://www.eclipse.org/modeling/emf/">EMF model</a> into a NetBeans Platform application.</p>
</div>
<div class="paragraph">
<p>You will start by setting up Eclipse, together with its modeling tools. Then you will set up one of the example EMF models provided by Eclipse. Next, you will use NetBeans IDE to create a new NetBeans Platform application on top of Equinox. You will import the OSGi bundles needed for Equinox to work with EMF. Then you will create two new OSGi bundles in NetBeans IDE. The first will contain the sources of the EMF model, while the second will provide a window for displaying values that, for purposes of this tutorial, you will hardcode in the application.</p>
</div>
<div class="paragraph">
<p>At the end of the tutorial, you will have a NetBeans Platform application that looks as follows, based on the "Extended Library Model Example" provided by Eclipse:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-015.png" alt="emf emf library model 015">
</div>
</div>
<div class="paragraph">
<p>Once you have gone through this simple scenario, you should be able to incorporate your own EMF models into your NetBeans Platform applications.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_emf_model">Creating the EMF Model</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, you create an EMF model in Eclipse.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Install EMF via the Eclipse update manager. Select "Modeling" and install "EMF - Eclipse Modeling Framework SDK". Also select the "Ecore Tools", which will let you create UML diagrams from your EMF model.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
In the New Project wizard, create the "Extended Library Model Example", as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-001.png" alt="emf emf library model 001">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the next step, click Finish:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-002.png" alt="emf emf library model 002">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>You now have the model that you will use throughout the rest of the tutorial:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-003.png" alt="emf emf library model 003">
</div>
</div>
<div class="paragraph">
<p>On disk, in your workspace, you have the sources of the EMF model you created. Later in this tutorial, you will copy the sources into an OSGi bundle created in NetBeans IDE. That way, you will be able to work with the sources in the IDE, and tweak them where necessary.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_netbeans_platform_application">Creating the NetBeans Platform Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once you have all the required OSGi bundles available, create your new NetBeans Platform application, as described below.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Choose File | New Project and choose to create a NetBeans Platform application atop Equinox, via the Equinox template:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="http://netbeans.dzone.com/sites/all/files/sudokugame-5.png" alt="sudokugame 5">
</div>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Name the application <code>LibraryManager</code> and click Finish.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>The application you now have is already deployable. Right-click the application to run it. When the application starts up, you&#8217;ll first see the default splash screen:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-010.png" alt="emf emf library model 010">
</div>
</div>
<div class="paragraph">
<p>Then you will see the main window containing a window that displays all the NetBeans modules and OSGi bundles that have been deployed.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Optionally, before continuing, remove the "Show OSGi Bundle List" module that the template provided by default. If you keep it, you will continue to have the window displaying the deployed modules and bundles as part of your application. To remove it, expand the application node in the Projects window, then expand the Modules node, right-click the "Show OSGi Bundle List" node, and select Remove.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_importing_the_osgi_bundles">Importing the OSGi Bundles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, you create a new folder on disk. Within that folder, you copy several general Equinox JARs, together with EMF-related JARs, from the Eclipse distribution. You then import these into your NetBeans Platform application.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Create a folder on disk, name it anything you like, such as "emf-jars".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Copy the following JARs into your new folder, where "xxx" is a placeholder for the version number:</p>
<div class="ulist">
<ul>
<li>
<p>Core bundles:</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">org.eclipse.core.expressions_xxx.jar
org.eclipse.core.filebuffers_xxx.jar
org.eclipse.core.filesystem_xxx.jar
org.eclipse.core.jobs_xxx.jar
org.eclipse.core.net_xxx.jar
org.eclipse.core.resources_xxx.jar
org.eclipse.core.runtime_xxx.jar
org.eclipse.core.runtime.compatibility_xxx.jar</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>EMF bundles:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">org.eclipse.emf.cdo.common_xxx.jar
org.eclipse.emf.cdo_xxx.jar
org.eclipse.emf.common_xxx.jar
org.eclipse.emf.ecore.change_xxx.jar
org.eclipse.emf.ecore.edit_xxx.jar
org.eclipse.emf.ecore.xmi_xxx.jar
org.eclipse.emf.ecore_xxx.jar
org.eclipse.emf.edit_xxx.jar
org.eclipse.emf.query_xxx.jar
org.eclipse.emf.transaction_xxx.jar
org.eclipse.emf.validation_xxx.jar
org.eclipse.emf_xxx.jar</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Equinox bundles:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">org.eclipse.equinox.app_xxx.jar
org.eclipse.equinox.common_xxx.jar
org.eclipse.equinox.preferences_xxx.jar
org.eclipse.equinox.registry_xxx.jar
org.eclipse.equinox.security_xxx.jar</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Miscellaneous bundles:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">com.ibm.icu_xxx.jar
org.eclipse.net4j.util_xxx.jar
org.eclipse.net4j_xxx.jar</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Right-click the application&#8217;s node and choose Properties. Open the Libraries panel of the Project Proprties dialog, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-016.png" alt="emf emf library model 016">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Click "Add Cluster". Browse to the "emf" folder you created earlier. When you select it, the NetBeans IDE will not recognize its content. It will ask you to let it add metadata to the folder, so that it will be able to recognize the OSGi bundles it finds there, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-017.png" alt="emf emf library model 017">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>When you click Next, the NetBeans IDE presents a list of OSGi bundles found in the selected folder. You are then asked to specifiy when the bundles should be loaded:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-018.png" alt="emf emf library model 018">
</div>
</div>
<div class="paragraph">
<p>Select "Autoload" in the first column, so that "Autoload" is selected in all the other columns too. "Autoload" means that a module is turned on only when needed. In contrast to regular modules, which require some manual action, the autoload modules are opaque for users and are managed solely by the infrastructure. As soon as there is a module needing, via its dependencies, an autoload module, the infrastructure enables it.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>At the end of the previous step, the OSGi bundles are registered and available to be used within the application, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-019.png" alt="emf emf library model 019">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Look at the "emf" folder on disk. The OSGi bundles are untouched and unchanged. However, two folders are added, providing the metadata needed for the OSGi support in the NetBeans Platform to recognize the JARs as OSGi bundles, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-020.png" alt="emf emf library model 020">
</div>
</div>
<div class="paragraph">
<p>For example, in the "config" folder, you will find an XML file as follows, for each of the OSGi bundles imported into the application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE module PUBLIC "-//NetBeans//DTD Module Status 1.0//EN"
                        "https://netbeans.org/dtds/module-status-1_0.dtd"&gt;
&lt;module name="com.ibm.icu"&gt;
    &lt;param name="autoload"&gt;true&lt;/param&gt;
    &lt;param name="eager"&gt;false&lt;/param&gt;
    &lt;param name="jar"&gt;com.ibm.icu_4.0.1.v20090822.jar&lt;/param&gt;
    &lt;param name="reloadable"&gt;false&lt;/param&gt;
&lt;/module&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that you have all the OSGi bundles you&#8217;ll need for working with EMF in the NetBeans Platform, let&#8217;s create a new OSGi bundle in the IDE. The new OSGi bundle will contain the sources of the EMF model you created earlier.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_an_osgi_bundle_to_contain_the_model">Creating an OSGi Bundle to Contain the Model</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now we create a new OSGi bundle in NetBeans IDE. Into the OSGi bundle, we copy the Java source files making up our EMF model. Then we set dependencies on the EMF-related bundles, so that the OSGi bundle can compile. Finally, we make the package containing the API classes public to the rest of the application.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Create a new module named <code>LibraryModel</code>, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-004.png" alt="emf emf library model 004">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the next step, set "org.eclipse.emf.examples.extlibrary" as the code name base, "Library Model" as the display name, and check the "Generate OSGi Bundle" checkbox, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-005.png" alt="emf emf library model 005">
</div>
</div>
<div class="paragraph">
<p>Click Finish. The IDE creates an OSGi bundle, with appropriate entries in the manifest.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Copy the source packages from the EMF model into the OSGi bundle in the IDE, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-006.png" alt="emf emf library model 006">
</div>
</div>
<div class="paragraph">
<p>As you can see, there are many error markings shown in the IDE. That is because you have not set dependencies on the required bundles yet.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>In the Projects window, right-click the "Libraries" node in the Library Model project. Then choose "Add Module Dependency". In the dialog, select all the EMF-related bundles:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-007.png" alt="emf emf library model 007">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Now that you have dependencies set on the EMF-related bundles, you should notice that the error markings are gone:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-008.png" alt="emf emf library model 008">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Right-click the LibraryModel project in the Projects window and choose Properties. In the API Versioning panel, publish the "org.eclipse.emf.examples.extlibrary" package to the rest of the application:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-012.png" alt="emf emf library model 012">
</div>
</div>
<div class="paragraph">
<p>After checking the above checkbox, only the Java classes in the specified package will be available to other modules and bundles in the application.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_an_osgi_bundle_to_provide_the_window">Creating an OSGi Bundle to Provide the Window</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now we add a new OSGi bundle that provides a window for the application. The window will display a ` <a href="http://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/nodes/Node.html">Node</a>` class for the Library object, together with ` <a href="http://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/nodes/Children.html">Children</a>` for each Book object and Borrower object in the Library. For demonstration purposes, we will hardcode some values to define a dummy Library, together with dummy Books and dummy Borrowers.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Create a new module named <code>LibraryViewer</code>, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-013.png" alt="emf emf library model 013">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the next step, set "org.library.viewer" as code name base, "LibraryViewer" as display name, check the "Generate XML Layer" checkbox, and check the "Generate OSGi Bundle" checkbox, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-014.png" alt="emf emf library model 014">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Set dependencies on the LibraryModel created in the previous section and two of the EMF-related OSGi bundles ("org.eclipse.emf.common" and "org.eclipse.emf.ecore") that you imported, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-021.png" alt="emf emf library model 021">
</div>
</div>
<div class="paragraph">
<p>In addition, for the functionality you will be creating in this section, add dependencies on the following modules too:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Explorer &amp; Property Sheet API</p>
</li>
<li>
<p>Lookup</p>
</li>
<li>
<p>Nodes API</p>
</li>
<li>
<p>UI Utilities API</p>
</li>
<li>
<p>Utilities API</p>
</li>
<li>
<p>Window System API</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The other OSGi-related dependencies you see in the screenshot above were added by the Equinox project template you created as the basis of the application earlier in this tutorial.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Create a new Java class named <code>LibraryNode</code>, which provides a new Node for the Library object, as well as a new Node for the Book object and Borrower object:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class LibraryNode extends  link:http://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/nodes/AbstractNode.html[AbstractNode] {

    public LibraryNode(Library library) {
        super(Children.create(new BookOrBorrowerChildFactory(library), true));
        setDisplayName(library.getName());
    }

    private static class BookOrBorrowerChildFactory extends  link:http://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/nodes/ChildFactory.html[ChildFactory]&lt;Object&gt; {

        private final Library library;

        private BookOrBorrowerChildFactory(Library library) {
            this.library = library;
        }

        @Override
        protected boolean createKeys(List list) {
            EList&lt;Book&gt; books = library.getBooks();
            for (Book book : books) {
                list.add(book);
            }
            EList&lt;Borrower&gt; borrowers = library.getBorrowers();
            for (Borrower borrower : borrowers) {
                list.add(borrower);
            }
            return true;
        }

        @Override
        protected Node createNodeForKey(Object key) {
link:http://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/nodes/BeanNode.html[BeanNode] childNode = null;
            try {
                childNode = new BeanNode(key);
                if (key instanceof Book) {
                    Book book = (Book) key;
                    childNode.setDisplayName(book.getTitle());
                    childNode.setIconBaseWithExtension("org/library/viewer/book.png");
                } else if (key instanceof Borrower) {
                    Borrower borrower = (Borrower) key;
                    childNode.setDisplayName(borrower.getLastName());
                    childNode.setIconBaseWithExtension("org/library/viewer/borrower.png");
                }
            } catch (IntrospectionException ex) {
                Exceptions.printStackTrace(ex);
            }
            return childNode;
        }

    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Create a new Java class named <code>LibraryChildFactory</code>, which is a factory class for creating new `LibraryNode`s:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class LibraryChildFactory extends  link:http://bits.netbeans.org/dev/javadoc/org-openide-nodes/org/openide/nodes/ChildFactory.html[ChildFactory]&lt;Library&gt; {

    @Override
    protected boolean createKeys(List&lt;Library&gt; list) {

        EXTLibraryFactory factory = EXTLibraryFactory.eINSTANCE;

        Writer writer1 = factory.createWriter();
        writer1.setName("William Shakespeare");

        Book book1 = factory.createBook();
        book1.setAuthor(writer1);
        book1.setTitle("Romeo and Juliet");

        Book book2 = factory.createBook();
        book2.setAuthor(writer1);
        book2.setTitle("Othello");

        Borrower borrower1 = factory.createBorrower();
        borrower1.setFirstName("Jack");
        borrower1.setLastName("Smith");

        Borrower borrower2 = factory.createBorrower();
        borrower2.setFirstName("John");
        borrower2.setLastName("Sykes");

        Borrower borrower3 = factory.createBorrower();
        borrower3.setFirstName("Lucy");
        borrower3.setLastName("Williams");

        Library library1 = factory.createLibrary();
        library1.setName("New York Public Library");
        EList&lt;Borrower&gt; borrowers1 = library1.getBorrowers();
        EList&lt;Book&gt; books1 = library1.getBooks();
        borrowers1.add(borrower1);
        books1.add(book1);

        Library library2 = factory.createLibrary();
        library2.setName("London Public Library");
        EList&lt;Borrower&gt; borrowers2 = library2.getBorrowers();
        EList&lt;Book&gt; books2 = library2.getBooks();
        borrowers2.add(borrower2);
        borrowers2.add(borrower3);
        books2.add(book2);

        list.add(library1);
        list.add(library2);

        return true;

    }

    @Override
    protected Node createNodeForKey(Library key) {
        return new LibraryNode(key);
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Create a new Java class named <code>LibraryViewer</code>, which provides the window where the <code>LibraryNode</code> will be displayed:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class LibraryViewer extends  link:http://bits.netbeans.org/dev/javadoc/org-openide-windows/org/openide/windows/TopComponent.html[TopComponent] implements  link:http://bits.netbeans.org/dev/javadoc/org-openide-explorer/org/openide/explorer/ExplorerManager.Provider.html[ExplorerManager.Provider] {

    private ExplorerManager em = new ExplorerManager();

    public LibraryViewer() {
        //Text displayed in the tab of the window:
        setDisplayName("Library Viewer");
        //Set the layout of the window:
        setLayout(new BorderLayout());
        //Create a new BeanTreeView:
link:http://bits.netbeans.org/dev/javadoc/org-openide-explorer/org/openide/explorer/view/BeanTreeView.html[BeanTreeView] btv = new BeanTreeView();
        //Hide the root node:
        btv.setRootVisible(false);
        //Add the BeanTreeView:
        add(btv, BorderLayout.CENTER);
        //Set the root node of the ExplorerManager:
        em.setRootContext(new AbstractNode(Children.create(new LibraryChildFactory(), true)));
        //Hook up the synchronization between the views:
        associateLookup(ExplorerUtils.createLookup(em, getActionMap()));
    }

    @Override
    public ExplorerManager getExplorerManager() {
        return em;
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Create a new Java class named <code>OpenLibraryViewerAction</code>, which will let the user open the viewer:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">public class OpenLibraryViewerAction implements  ActionListener {

    @Override
    public void actionPerformed(ActionEvent e) {
        LibraryViewer window = new LibraryViewer();
        window.open();
        window.requestActive();
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>In the layer file, register the Action you created in the previous step. Let it be always enabled and let it be displayed as a menu item in the File menu:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;folder name="Actions"&gt;
    &lt;folder name="File"&gt;
        &lt;file name="org-library-viewer-OpenLibraryViewerAction.instance"&gt;
            &lt;attr name="instanceCreate" methodvalue="org.openide.awt.Actions.alwaysEnabled"/&gt;
            &lt;attr name="delegate" newvalue="org.library.viewer.OpenLibraryViewerAction"/&gt;
            &lt;attr name="displayName" bundlevalue="org.library.viewer.Bundle#CTL_OpenLibraryViewerAction"/&gt;
        &lt;/file&gt;
    &lt;/folder&gt;
&lt;/folder&gt;
&lt;folder name="Menu"&gt;
    &lt;folder name="File"&gt;
        &lt;file name="OpenLibraryViewerWindowAction.shadow"&gt;
            &lt;attr name="originalFile" stringvalue="Actions/File/org-library-viewer-OpenLibraryViewerAction.instance"/&gt;
        &lt;/file&gt;
    &lt;/folder&gt;
&lt;/folder&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Look at line 6 above and then register an appropriate display name for the Action, in the <code>Bundle.properties</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">CTL_OpenLibraryViewerAction=Open Library Viewer</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_running_the_application">Running the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The application is now ready to be deployed, as described below.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Run the application. All the OSGi bundles and NetBeans modules in your application will be deployed. The Output window of the IDE should not show any bundle warnings, because Equinox should resolve everything correctly:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-011.png" alt="emf emf library model 011">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>The application starts up. Under the File menu, select the menu item for opening the viewer. Open the Properties window, from the Window menu, browse a few nodes and you should see the following:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emf_emf-library-model-015.png" alt="emf emf library model 015">
</div>
</div>
<div class="paragraph">
<p>Congratulations, you have integrated your EMF model into your NetBeans Platform application.</p>
</div>
<div class="paragraph">
<p><a href="http://netbeans.apache.org/community/mailing-lists.html">Send Us Your Feedback</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_further_reading">Further Reading</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that you have completed the tutorial and understand the steps to take when you want to reuse an OSGi bundle in your NetBeans Platform application, take a look at these related documents and more advanced scenarios:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.osgi.org/blog/2006_09_01_archive.html">Peter Kriens and the Sudoku Game</a></p>
</li>
<li>
<p><a href="http://wiki.apidesign.org/wiki/NetbinoxTutorial">Jaroslav Tulach and Netbinox</a></p>
</li>
<li>
<p>Toni Epple&#8217;s OSGi/NetBeans  <a href="http://eppleton.sharedhost.de/blog/?p=662">blog entry</a> and  <a href="http://eppleton.sharedhost.de/blog/?s=Frankenstein%27s+IDE">presentation</a></p>
</li>
<li>
<p>Gunnar Reinseth&#8217;s NetBeans-EMF integration ( <a href="http://eclipse.dzone.com/emf-on-netbeans-rcp">part 1</a>,  <a href="http://eclipse.dzone.com/emf-on-netbeans-rcp-2">part 2</a>)</p>
</li>
<li>
<p>Also read  <a href="http://java.dzone.com/news/new-cool-tools-osgi-developers">New Cool Tools for OSGi Developers</a></p>
</li>
</ul>
</div>
</div>
</div>
        
<section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        
        <li><a href="https://github.com/apache/netbeans-website/blob/master/netbeans.apache.org/src/content/tutorials/72/nbm-emf.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>

    </div>
    

    <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
                    
            <h1><a href="/about/index.html">About</a></h1>
            <ul>
              <li><a href="https://netbeans.apache.org/community/who.html">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/community/index.html">Community</a></h1>
            <ul>
              <li><a href="/community/mailing-lists.html">Mailing lists</a></li>
              <li><a href="/community/committer.html">Becoming a committer</a></li>
              <li><a href="/community/events.html">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/participate/index.html">Participate</a></h1>
            <ul>
              <li><a href="/participate/submit-pr.html">Submitting Pull Requests</a></li>
              <li><a href="/participate/report-issue.html">Reporting Issues</a></li>
              <li><a href="/participate/index.html#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/help/index.html">Get Help</a></h1>
            <ul>
              <li><a href="/help/index.html#documentation">Documentation</a></li>
              <li><a href="/wiki/index.html">Wiki</a></li>
              <li><a href="/help/index.html#support">Community Support</a></li>
              <li><a href="/help/commercial-support.html">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="/download/index.html">Download</a></h1>
            <ul>
              <li><a href="/download/index.html">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="/download/index.html#source">Building from source</a></li>
              <li><a href="/download/index.html#previous">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
            
      </div>
    </div>


    

    <script src="/js/vendor/jquery-3.2.1.min.js"></script>
    <script src="/js/vendor/what-input.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>
    <script src="/js/vendor/jquery.colorbox-min.js"></script>
    <script src="/js/netbeans.js"></script>
    <script>

       $(function(){ $(document).foundation(); });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
       $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); }); 
    </script>

  </body>
</html>
