<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>Overview (Editor Code Completion)</title>
<link rel="stylesheet" type="text/css" href="javadoc.css" title="Style">
<script type="text/javascript" src="script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Overview (Editor Code Completion)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li>Use</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-files/index-1.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">org.netbeans.modules.editor.completion/1 1.47.0 2</div>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList">
<li><a href="index.html?overview-summary.html" target="_top">Frames</a></li>
<li><a href="overview-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 class="title">Editor Code Completion<br/><span style='font-style:normal; font-size:medium; font-weight:normal; background-color:#ffffff;'><a href='http://wiki.netbeans.org/API_Stability#Official' target='_blank'>Official</a></span></h1>
</div>
<div class="header">
<p>See: <a href="#overview.description">Description</a></p>
</div>
<div class="contentContainer">
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Editor Code Completion table, listing packages, and an explanation">
<caption><span>Editor Code Completion</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Package</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="org/netbeans/api/editor/completion/package-summary.html">org.netbeans.api.editor.completion</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="org/netbeans/spi/editor/completion/package-summary.html">org.netbeans.spi.editor.completion</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="org/netbeans/spi/editor/completion/support/package-summary.html">org.netbeans.spi.editor.completion.support</a></td>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="contentContainer"><a name="overview.description">
<!--   -->
</a>
<div class="block"><p>
  
<p>
   The Code Completion module is located under <code>/cvs/editor/completion</code> directory. It provides the 
   <a href="index.html">CodeCompletionAPI</a>
   with a simple API for showing and hiding of the completion 
   located in <code>org.netbeans.api.editor.completion</code>
   and with SPI defining the completion providers that is located
   in <code>org.netbeans.spi.editor.completion</code>,
   and the implementation located in <code>org.netbeans.modules.editor.completion</code>.
  </p>
 
</p>
<h3>What is New (see <a href="apichanges.html">all changes</a>)?</h3>
<ul>

         
<!--Search for dates that are later or equal to 1997-09-01 in
          .-->
<!--Checking date 2013-9-24 with count of newer 0--><!--year ok-->
<li>Sep 24 '13 <a href="apichanges.html#CompositeCompletionItem">Addition of CompositeCompletionItem</a>
<p>
            
<p>
                
<code>CompositeCompletionItem</code> interface was added to allow for
                completion items containing possible sub-items.
            </p>
            
</p>
</li>
<!--Checking date 2008-2-7 with count of newer 1--><!--year ok-->
<li>Feb 7 '08 <a href="apichanges.html#CompletionResultSet.setHasAdditionalItemsText">Addition of CompletionResultSet.setHasAdditionalItemsText()</a>
<p>
            
<p>
                
<code>void CompletionResultSet.setHasAdditionalItemsText(String text)</code> was added
                to allow for customization of the text displayed in a completion popup whenever
                a CompletionProvider indicates that additional items could be added to the result set.
            </p>
            
</p>
</li>
<!--Checking date 2007-6-27 with count of newer 2--><!--year ok-->
<li>Jun 27 '07 <a href="apichanges.html#CompletionResultSet.setHasAdditionalItems">Addition of CompletionResultSet.setHasAdditionalItems()</a>
<p>
            
<p>
                
<code>void CompletionResultSet.setHasAdditionalItems(boolean value)</code> was added
                to indicate that some items could exist that will likely need a long time to be computed
                and added to the result set. It is preferred to add them on the special 'all' code
                completion invocation only.
            </p>
            
</p>
</li>
<!--Checking date 2007-4-17 with count of newer 3--><!--year ok-->
<li>Apr 17 '07 <a href="apichanges.html#ui.gestures.collector">Support for UI Gestures Collector</a>
<p>
            
<p>
            Adds few <a href="http://netbeans.apache.org/javadoc/dev/org-openide-util/org/openide/util/doc-files/logging.html" shape="rect">structured logging</a> 
            <a href="architecture-summary.html#logger-org.netbeans.ui.editor.completion" shape="rect">triggers</a> 
            to cooperate with the <!-- XXX http://netbeans.apache.org/javadoc/dev/org-netbeans-modules-uihandler/overview-summary.html link forbidden from stable -> dev module --> UI Gestures Collector.
            </p>
            
</p>
</li>
<!--Checking date 2005-11-8 with count of newer 4--><!--year ok-->
<li>Nov 8 '05 <a href="apichanges.html#CompletionResultSet.setWaitText">Addition of CompletionResultSet.setWaitText()</a>
<p>
            
<p>
                
<code>void CompletionResultSet.setWaitText(String waitText)</code> was added
                to allow customization of the text in the label displayed
                if the completion query results are not computed in certain timeout.
            </p>
            
</p>
</li>
<!--Checking date 2005-11-8 with count of newer 4--><!--year ok-->
<li>Nov 8 '05 <a href="apichanges.html#CompletionItem.getInsertPrefix">Adddition of CompletionItem.getInsertPrefix()</a>
<p>
            
<p>
                
<code>CharSequence CompletionItem.getInsertPrefix()</code> was added.
            </p>
            
</p>
</li>
<!--Checking date 2005-11-8 with count of newer 4--><!--year ok-->
<li>Nov 8 '05 <a href="apichanges.html#CompletionTask.refresh">Semantic change of CompletionTask.refresh()</a>
<p>
            
<p>
                CompletionTask.refresh(CompletionResultSet resultSet) now allows
                <code>null</code> parameter.
                <br>
                
<code>void AsyncCompletionQuery.preQueryUpdate(JTextComponent component)</code>
                was added to reflect that in AsyncCompletionTask.
            </p>
            
</p>
</li>
<!--Checking date 2005-7-27 with count of newer 7--><!--Skipped as the amount of changes is too big-->
</ul>
<h3>Use Cases</h3>
<answer id="arch-usecases">
 
 
<h3>API</h3>

 
<h5>Show or hide completion window</h5>

 
<p>
 The API is small and it only allows to explicitly show or hide the completion window.
 <br>
 It's being used by code templates that need to explicitly show the code completion
 window when tabbing to a particular parameter.
 <br>
 There may be certain actions that want to ensure that the code completion is hidden
 at the time when they are invoked. For example the actions pasting the content
 of the completion item into the document.
 </p>

 

 
<h3>SPI</h3>

 
<h5>Provide completion content by independent providers</h5>
 
 
<p>
  Completion infrastructure needs to obtain the results that are then displayed
  in the completion window.
  <br>
  There are three types of displayed results related to the current caret offset:
 </p>
 
<ul>
      
<li>
      Code completion items
      </li>
      
<li>
      Documentation (e.g. the javadoc documentation)
      </li>
      
<li>
      Tooltip (e.g. for method parameters)
      </li>
 
</ul>
 
<p>
  For the purpose of obtaining these completion results
  <a href="org/netbeans/spi/editor/completion/CompletionProvider.html" shape="rect">
  CompletionProvider</a>
  exists.

  <br>
  There may be an arbitrary number of independent completion providers for 
  a single completion popup window.
  <br>
  The completion providers are registered through the xml layer into
  <i>Editors/&lt;mime-type&gt;/CompletionProviders</i>. Once the document
  with the particular mime-type gets loaded the corresponding completion providers
  will get instantiated and used.
 </p>

 
<p>
 Threading:
 <br>
 The code completion's infrastructure invokes the requests
 for the completion results in the AWT thread.
 <br>
 Therefore all the methods of the completion providers are invoked
 in AWT thread but they may reschedule their processing into other threads.
 </p>
 
 

 
<h5>Provide completion results computed asynchronously</h5>
 
<p>
  The completion provider creates a task that computes the resulting
  data that will then be displayed by the code completion infrastructure.
  <br>
  The task creation and computation are called synchronously
  from the AWT event dispatch thread.
  <br>
  However there can be potentially long-running tasks (e.g. working with MDR)
  that are not desirable to be run in AWT thread.
  <br>
  Therefore the completion infrastructure provides a listener
  to which the completion task notifies the results.
  <br>
  The support class
  <a href="org/netbeans/spi/editor/completion/support/AsyncCompletionTask.html" shape="rect">
  AsyncCompletionTask</a> allows to post the task computation
  into <code>RequestProcessor</code>.
 </p>
 
 

 
<h5>Provide list of completion items fulfilling various requirements</h5>
 
<p>
  The completion task computes a collection of completion items
  which are then collected by the completion infrastructure and displayed.
  <br>
  
<b>Displaying</b>. Each completion item must be able to display itself in a <code>JList</code>.
  <br>
  
<b>Sorting</b>. The completion items may come from different completion providers
  and they must be sorted before displaying. The sort order
  should not only be alphabetical but it should also allow a prioritization
  of the items according to their importance in the given context.
  <br>
  
<b>Actions</b>. The interaction of the user with the completion item
  is done by interacting with item's input map and action map.
  <br>
  
<b>Documentation</b>. The item may want to display additional
  detailed information in a documentation popup window.
  </p>
 
 

 
</answer>
<h3>Exported Interfaces</h3>
          
                This table lists all of the module exported APIs 
                with 
                defined stability classifications. It is generated
                based on answers to questions about the architecture 
                of the module. <a href="architecture-summary.html">Read them all</a>...

                
                <a name="group-java">
<h5>Group of java interfaces</h5>
</a>
<table cellpadding="1" cellspacing="0" border="0" class="tablebg" width="100%">
<tr>
<td>
<table border="0" cellpadding="3" cellspacing="1" width="100%">
<tr class="tablersh">
<td align="CENTER" width="25%"><span class="titlectable">Interface Name</span></td><td align="CENTER" width="10%"><span class="titlectable">In/Out</span></td><td align="CENTER" width="10%"><span class="titlectable">Stability</span></td><td align="CENTER"><span class="titlectable">Specified in What Document?</span></td>
</tr>
<tr class="tabler">
<td>CodeCompletionAPI</td><td>Exported</td><td><a href="http://wiki.netbeans.org/API_Stability#Official">Official</a></td><td><a name="java-CodeCompletionAPI"><a href="index.html">index.html</a>
<p></p>
</a></td>
</tr>
</table>
</td>
</tr>
</table>
<p></p>
<a name="group-logger">
<h5>Group of logger interfaces</h5>
</a>
<table cellpadding="1" cellspacing="0" border="0" class="tablebg" width="100%">
<tr>
<td>
<table border="0" cellpadding="3" cellspacing="1" width="100%">
<tr class="tablersh">
<td align="CENTER" width="25%"><span class="titlectable">Interface Name</span></td><td align="CENTER" width="10%"><span class="titlectable">In/Out</span></td><td align="CENTER" width="10%"><span class="titlectable">Stability</span></td><td align="CENTER"><span class="titlectable">Specified in What Document?</span></td>
</tr>
<tr class="tabler">
<td>org.netbeans.ui.editor.completion</td><td>Exported</td><td><a href="http://wiki.netbeans.org/API_Stability#Devel">Under Development</a></td><td><a name="logger-org.netbeans.ui.editor.completion">
<p></p>
    Since version 1.8 the completion cooperates with <!-- XXX link to http://netbeans.apache.org/javadoc/dev/org-netbeans-modules-uihandler/overview-summary.html not OK from a stable API -->UI Gestures Collector
    by sending following messages to the <code>org.netbeans.ui.editor.completion</code> <a href="http://download.oracle.com/javase/8/docs/api/java/util/logging/Logger.html" shape="rect">logger</a>:
    <ul>
        
<li>
<b>COMPL_INVOCATION</b> - message about a code completion being invoked. Arguments:
            <ul>
                
<li>{0}: true - if explicit, false if implicit invocation happened</li>
                <!--
                <li>{1}: the index of selected item</li>
                <li>{2}: the classname of the selected item</li>
                -->
            
</ul>
        
</li>
        
<li>
<b>COMPL_KEY_SELECT</b> - send when user selects an item from completion using keyboard character. Arguments:
            <ul>
                
<li>{0}: character that invoked the action</li>
                
<li>{1}: the index of selected item</li>
                
<li>{2}: the classname of the selected item</li>
            
</ul>
        
</li>
        
<li>
<b>COMPL_KEY_SELECT_DEFAULT</b> - send when user selects an item from completion using enter. Arguments:
            <ul>
                
<li>{0}: '\n'</li>
                
<li>{1}: the index of selected item</li>
                
<li>{2}: the classname of the selected item</li>
            
</ul>
        
</li>
        
<li>
<b>COMPL_MOUSE_SELECT</b> - send when user selects an item from completion using mouse. Arguments:
            <ul>
                
<li>{0}: null</li>
                
<li>{1}: the index of selected item</li>
                
<li>{2}: the classname of the selected item</li>
            
</ul>
        
</li>
        
<li>
<b>COMPL_CANCEL</b> - send when user selects cancels completion without any selection. No arguments.
<!--
            <ul>
                <li>{0}: null</li>
                <li>{1}: the index of selected item</li>
                <li>{2}: the classname of the selected item</li>
            </ul>
-->
        </li>
        
    
</ul>
  
<p></p>
</a></td>
</tr>
</table>
</td>
</tr>
</table>
<p></p>
<a name="group-systemproperty">
<h5>Group of systemproperty interfaces</h5>
</a>
<table cellpadding="1" cellspacing="0" border="0" class="tablebg" width="100%">
<tr>
<td>
<table border="0" cellpadding="3" cellspacing="1" width="100%">
<tr class="tablersh">
<td align="CENTER" width="25%"><span class="titlectable">Interface Name</span></td><td align="CENTER" width="10%"><span class="titlectable">In/Out</span></td><td align="CENTER" width="10%"><span class="titlectable">Stability</span></td><td align="CENTER"><span class="titlectable">Specified in What Document?</span></td>
</tr>
<tr class="tabler">
<td>org.netbeans.modules.editor.completion.slowness.report</td><td>Exported</td><td><a href="http://wiki.netbeans.org/API_Stability#Private">Private</a></td><td><a name="systemproperty-org.netbeans.modules.editor.completion.slowness.report"><a href="http://wiki.netbeans.org/FitnessViaPostMortem">
                            ...//wiki.netbeans.org/FitnessViaPostMortem</a>
<p></p>
<p></p>
      You can suppress automatic reporting of slow code completion computation
      by increasing value of <code>-J-Dorg.netbeans.modules.editor.completion.slowness.report</code>
      property to more than 2000 ms (the default value).
  <p></p>
</a></td>
</tr>
</table>
</td>
</tr>
</table>
<p></p>
<h3>Implementation Details</h3>
<h5>Where are the sources for the module?</h5>
  
<p>
<p>
            The sources for the module are in the
            <a href="http://hg.netbeans.org/" shape="rect">NetBeans Mercurial repositories</a>.
        </p>
</p>
 
<h5>What do other modules need to do to declare a dependency on this one, in addition to or instead of a plain module dependency?</h5>
     Nothing.
 <p>
                Read more about the implementation in the <a href="architecture-summary.html">answers to 
                architecture questions</a>.
            </p></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li>Use</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-files/index-1.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">org.netbeans.modules.editor.completion/1 1.47.0 2</div>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList">
<li><a href="index.html?overview-summary.html" target="_top">Frames</a></li>
<li><a href="overview-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><span class="footnote"></span><!-- See javadoc.css for timestamp information --></small></p>
</body>
</html>
