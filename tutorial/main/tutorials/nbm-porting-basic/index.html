<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans Platform Swing Porting Tutorial</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans Platform Swing Porting Tutorial - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, NetBeans Platform Swing Porting Tutorial">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="../../../../_/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    <link rel="stylesheet" href="../../../../_/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../_/images/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../_/images/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../_/images/fav/favicon-16x16.png">
    <link rel="manifest" href="../../../../_/images/fav/site.webmanifest">
    <link rel="mask-icon" href="../../../../_/images/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="../../../../_/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="../../../../index.html"><img src='../../../../_/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <input id="search-input" type="text" placeholder="Search the docs"> </li>
            <li> <a href="../../../../front/main/community">Community</a> </li>
            <li> <a href="../../../../front/main/participate">Participate</a> </li>
            <li> <a href="../../../../front/main/blogs">Blog</a></li>
            <li> <a href="../../../../front/main/help">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="../../../../front/main/download">Download</a> </li>
        </ul>
    </div>
</div>

    <!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="../../../../front/main/download/nb19">Download</a></p>
        </div>
    </div>
</section>
    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">NetBeans Platform Swing Porting Tutorial</h1>
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/tutorials/nbm-porting-basic.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="../../../../tutorial/main/kb/docs/contributing">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_introduction_to_porting">Introduction to Porting</a></li>
<li><a href="#_getting_the_anagram_game">Getting the Anagram Game</a></li>
<li><a href="#_levels_of_compliance">Levels of Compliance</a>
<ul class="sectlevel2">
<li><a href="#section-LevelsOfCompliance-Level0Launchable">Level 0: Launchable</a></li>
</ul>
</li>
<li><a href="#_creating_the_netbeans_platform_application">Creating the NetBeans Platform Application</a></li>
<li><a href="#_porting_level_0_launchable">Porting Level 0: Launchable</a></li>
<li><a href="#_porting_level_1_integration">Porting Level 1: Integration</a></li>
<li><a href="#_porting_level_2_use_case_support">Porting Level 2: Use Case Support</a></li>
<li><a href="#_porting_level_3_aligned">Porting Level 3: Aligned</a></li>
<li><a href="#_porting_tips_tricks">Porting Tips &amp; Tricks</a></li>
<li><a href="#_next_steps">Next Steps</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial demonstrates how to port the Swing components and business logic of a simple Java application to the  <a href="https://netbeans.apache.org/platform/screenshots.html">NetBeans Platform</a>. Though the scenario below is simple, the basic concepts of "porting" an application to the NetBeans Platform will become clear. In the end, some general principles will be identified, based on the steps taken in the tutorial. Hopefully, they will be useful to you when porting your own Swing applications to the NetBeans Platform.</p>
</div>
<div class="paragraph">
<p>For troubleshooting purposes, you are welcome to download the  <a href="http://web.archive.org/web/20170409072842/http://java.net/projects/nb-api-samples/show/versions/8.0/tutorials/porting-basic">completed tutorial source code</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction_to_porting"><a class="anchor" href="#_introduction_to_porting"></a>Introduction to Porting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before beginning this procedure, it makes sense to ask why one would want to port an application to the NetBeans Platform in the first place. A typical Swing application consists of a domain-specific layer on top of a general framework. The general framework normally provides features dealing with an application&#8217;s infrastructure, such as an application&#8217;s menu bar, windowing system (also known as "docking framework"), and lifecycle management. Typically this framework is very generic and is (or could be) reused by many applications within the same organization.</p>
</div>
<div class="paragraph">
<p>The NetBeans Platform exists specifically to cater to these infrastructural concerns. You do not need to create these on your own for your own Swing applications. You can simply move the useful domain-specific parts of your application to the NetBeans Platform and then, from that point onwards, the NetBeans Platform will be the new underlying 'plumbing' layer of your application. You can then focus on the more interesting parts of your application, specifically, the domain-specific parts. This will speed up your development process and give you a consistent basis for all your applications.</p>
</div>
<div class="paragraph">
<p>In this tutorial, we will begin with the Anagram Game, which is a standard Swing application sample that is distributed with NetBeans IDE. We will, step by step, move it to the NetBeans Platform and gradually see the advantages of doing so.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_the_anagram_game"><a class="anchor" href="#_getting_the_anagram_game"></a>Getting the Anagram Game</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We begin by getting the Anagram Game, which is one of the IDE&#8217;s standard Java samples, from the New Project wizard. Then we run it and analyze its parts.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Choose File &gt; New Project (Ctrl-Shift-N). Under Categories, select Samples &gt; Java. Under Projects, select Anagram Game. Click Next and Finish. You should now see the Anagram Game application in the Projects window, as shown here:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_ag0.png" alt="porting 73 ag0">
</div>
</div>
<div class="paragraph">
<p>The application contains the following classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>* <code>WordLibrary.java</code> *. Provides an abstract class, with abstract methods like <code>getWord(int idx)</code>, <code>getScrambledWord(int idx)</code>, and <code>isCorrect(int idx, String userGuess)</code>.</p>
</li>
<li>
<p>* <code>StaticWordLibrary.java</code> *. Extends <code>WordLibrary.java</code>, providing a list of scrambled words, as well as their unscrambled equivalents, together with the getters and setters for accessing them and for evaluating them.</p>
</li>
<li>
<p>* <code>Anagrams.java</code> *. Provides the main user interface of the application, principally consisting of a <code>JFrame</code> with a  <code>JPanel</code>  containing labels and text fields. Also included is a menu bar containing a File menu, with the menu items 'About' and 'Exit'.</p>
</li>
<li>
<p>* <code>About.java</code> *. Provides the About box, accessed from the File menu.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>1.
Run the application and you should see the following:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_ag1.png" alt="porting 73 ag1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>When you enter the correctly unscrambled word, you will see this:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_ag2.png" alt="porting 73 ag2">
</div>
</div>
<div class="paragraph">
<p>Before porting this application to the NetBeans Platform, we need to think about <em>the stages in which we want to port our application</em>. In other words, you do not need to port everything at once. And there are different levels to which you can integrate your application, from a mostly superfical level to a level that aligns your application completely with the paradigms and purposes of the NetBeans Platform. The next section will show the levels of compliance your application can have with the NetBeans Platform.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_levels_of_compliance"><a class="anchor" href="#_levels_of_compliance"></a>Levels of Compliance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Converting an application to be fit for a framework such as the NetBeans Platform can be done on various levels. The integration can be shallow and use just a few integration points or it can be deeper, tightly following the paradigms of the NetBeans Platform.</p>
</div>
<div class="paragraph">
<p>The stages can be described as follows:</p>
</div>
<div class="sect2">
<h3 id="section-LevelsOfCompliance-Level0Launchable"><a class="anchor" href="#section-LevelsOfCompliance-Level0Launchable"></a>Level 0: Launchable</h3>
<div class="paragraph">
<p>One or more of the following can be done to make your application launchable with as few changes as possible:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enhance your manifest with NetBeans key/value pairs so that your JAR is recognized as an OSGi bundle or as a NetBeans module.</p>
</li>
<li>
<p>Set dependencies between modules. In the manifest, with instances of plain Class-Path you can set dependencies between modules.</p>
</li>
<li>
<p>Register a menu item in the declarative layer file ( <code>layer.xml</code> ) of your module, to invoke your original application. This file can be automatically created and populated when the module is compiled, via annotations on Action classes, as you will learn to do later in this tutorial.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this tutorial, we will do all of the above. We will enhance the manifest, which the module project wizard will do for us. We will create a menu item that will invoke our application. To do so, we will move our application&#8217;s classes into a module source structure. Then we will create a new Java <code>ActionListener</code> for opening the <code>JFrame</code> of the application. We will annotate the <code>ActionListener</code> to register it in the application&#8217;s registry as a new menu item. From that action, we will invoke our application.</p>
</div>
<div class="sect3">
<h4 id="section-LevelsOfCompliance-Level1Integrated"><a class="anchor" href="#section-LevelsOfCompliance-Level1Integrated"></a>Level 1: Integrated</h4>
<div class="paragraph">
<p>Here are some pointers for integrating the application more tightly with the NetBeans Platform:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Integrate visually to get the benefits of the NetBeans Window System, which is its docking framework.</p>
</li>
<li>
<p>Use NetBeans Window System API and the Dialog APIs, primarily the  <code>TopComponent</code>  class and the  <code>DialogDisplayer</code>  class.</p>
</li>
<li>
<p>Change initialization code of your application, use the  <code>ModuleInstall</code>  class or declarative registrations, through the layer file or the META-INF/services folder.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this tutorial, we will move the relevant parts of the  <code>JPanel</code>  from the  <code>JFrame</code>  to a new  <code>TopComponent</code> . The  <code>TopComponent</code>  class creates a window on the NetBeans Platform, which in our case will show our  <code>JPanel</code> .</p>
</div>
</div>
<div class="sect3">
<h4 id="section-LevelsOfCompliance-Level2UseCaseSupport"><a class="anchor" href="#section-LevelsOfCompliance-Level2UseCaseSupport"></a>Level 2: Use Case Support</h4>
<div class="paragraph">
<p>This level of compliance with the NetBeans Platform is concerned with one or more of the following activities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bind your application to other modules by inspecting existing functionality and trying to use it.</p>
</li>
<li>
<p>Simplify the workflow to fit into the NetBeans Platform paradigms.</p>
</li>
<li>
<p>Listen to the global selection to discover what other modules are doing and update your state accordingly.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this tutorial, we will listen for the existence of  <code> <a href="https://bits.netbeans.org/dev/javadoc/org-openide-text/org/openide/cookies/EditorCookie.html">EditorCookie</a>s</code> . A cookie is a <em>capability</em>. With a Java interface, your object&#8217;s capabilities are fixed at compile time, while NetBeans Platform cookies allow your object to behave dynamically because your object can expose capabilities, or not, based on its state. An  <code>EditorCookie</code>  defines an editor, with interfaces for common activities such as opening a document, closing the editor, background loading of files, document saving, and modification notifications.</p>
</div>
<div class="paragraph">
<p>We will listen for the existence of such a cookie and then we will pass the content of the editor to the  <code>TopComponent</code> , in the form of words. By doing this, we are doing what the first item above outlines, i.e., inspecting existing functionality and reusing it within the context of our ported application. This is a modest level of integration. However, it pays off because it shows how you can reuse functionality provided by the NetBeans Platform or by any other application created on top of the NetBeans Platform, such as NetBeans IDE.</p>
</div>
</div>
<div class="sect3">
<h4 id="section-LevelsOfCompliance-Level3Aligned"><a class="anchor" href="#section-LevelsOfCompliance-Level3Aligned"></a>Level 3: Aligned</h4>
<div class="paragraph">
<p>In this final stage of your porting activity, you are concerned with the following thoughts, first and foremost:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Become a good citizen of the NetBeans Platform, by exposing your own state to other modules so that they know what you are doing.</p>
</li>
<li>
<p>Eliminate duplicated functionality, by reusing the Navigator, Favorites window, Task List, Progress API, etc., instead of creating or maintaining your own.</p>
</li>
<li>
<p>Cooperate with other modules and adapt your application to the NetBeans Platform way of doing things.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Towards the end of this tutorial, we will adopt this level of compliance by letting our  <code>TopComponent</code>  expose a  <code> <a href="https://bits.netbeans.org/dev/javadoc/org-openide-awt/org/netbeans/api/actions/Savable.html">Savable</a></code>  when changes are made to the "Guessed Word" text field. By doing this, we will enable the NetBeans Platform Save actions, which can be invoked from the File menu, toolbar, and keyboard shortcuts. This kind of integration brings the full benefits of the NetBeans Platform, however it also requires some effort to attain.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_netbeans_platform_application"><a class="anchor" href="#_creating_the_netbeans_platform_application"></a>Creating the NetBeans Platform Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, let&#8217;s create the basis of our application. We use a wizard to do so. This is the typical first practical step of creating a new application on top of the NetBeans Platform application.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Choose File &gt; New Project (Ctrl-Shift-N). Under Categories, select NetBeans Modules. Under Projects, select NetBeans Platform Application, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_agp0.png" alt="porting 73 agp0">
</div>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Name the application <code>AnagramApplication</code>, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_agp1.png" alt="porting 73 agp1">
</div>
</div>
<div class="paragraph">
<p>Click Finish. You now have a NetBeans Platform application. You can right-click it and then run it and you will see an empty main window, with a menu bar and a tool bar:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_agp2.png" alt="porting 73 agp2">
</div>
</div>
<div class="paragraph">
<p>Look under some of the menus, click a few toolbar buttons, and explore the basis of your new application. For example, open the Properties window and the Output window, from the Window menu, and you have the starting point of a complex application:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_agp3.png" alt="porting 73 agp3">
</div>
</div>
<div class="paragraph">
<p>Next, we create a first custom module. We will name it <code>AnagramCore</code> because, in the end, it will contain the essential parts of the application. Using subsequent tutorials on the  <a href="../../kb/docs/platform/" class="xref page">NetBeans Platform Learning Trail</a>, we will be able to add more features to the application, none of which will be manadatory parts, since the user will be able to plug them into the application. The core module, however, that is, <code>AnagramCore</code>, will be a required module in every distribution of the application.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Right-click the application&#8217;s "Modules" node and choose "Add New&#8230;&#8203;", as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_agp4.png" alt="porting 73 agp4">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Type  <code>AnagramGameCore</code>  in Project Name and accept the default project location, which is the root folder of the application, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_agp5.png" alt="porting 73 agp5">
</div>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Type a unique name in the Code Name Base field, which provides the unique identifier for your module. It could be anything, but here it is  <code>com.toy.anagrams.core</code>  because it is convenient to reproduce the package structure of the original application, which is "com.toy.anagrams.*". Do not click "Generate OSGi Bundle", because in this tutorial you will use the default NetBeans module system.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_agp6.png" alt="porting 73 agp6">
</div>
</div>
<div class="paragraph">
<p>Click Finish. Below the original Anagram Game sample, you should now see the source structure of your new module, as shown here:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_agp7.png" alt="porting 73 agp7">
</div>
</div>
<div class="paragraph">
<p>Above, we can see that we now have the original application, together with the module to which it will be ported. In the next sections, we will begin porting the application to the module, using the porting levels described earlier.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_porting_level_0_launchable"><a class="anchor" href="#_porting_level_0_launchable"></a>Porting Level 0: Launchable</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At this stage, we simply want to be able to launch our application. To do that we will create a menu item that invokes the application. We begin by copying the application&#8217;s sources into the module source structure.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Copy the two packages from the Anagram Game into the module. Below, the new packages and classes in the module are highlighted:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_agc1.png" alt="porting 73 agc1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the <code>com.toy.anagrams.core</code> package, create a new Java class named <code>OpenAnagramGameAction</code>, implementing the standard JDK <code>ActionListener</code> class as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import com.toy.anagrams.ui.Anagrams;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class OpenAnagramGameAction implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent e) {
        new Anagrams().setVisible(true);
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see in the code above, when the user invokes the <code>OpenAnagramGameAction</code>, the <code>JFrame</code> from the Anagram Game will open.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Next, we need to register the new <code>OpenAnagramGameAction</code> in the NetBeans central registry, which is also known as the "System FileSystem". We will do this via annotations that will generate entries in the central registry. To use these annotations, the AnagramGameCore module needs to have a library dependency on the module that provides the annotations. Right-click on the module&#8217;s "Libraries" node and choose "Add Module Dependency", as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_agc2.png" alt="porting 73 agc2">
</div>
</div>
<div class="paragraph">
<p>Start typing "ActionRegistration" and you will see that the filter narrows to show the library dependency that provides the <code>ActionRegistration</code> class:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_agc3.png" alt="porting 73 agc3">
</div>
</div>
<div class="paragraph">
<p>Click OK. Next, add another dependency, this time on the Utilities API, which provides the  <code>@Messages</code>  annotation that you will use below.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Now you can annotate your <code>Action</code> class as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.toy.anagrams.core;

import com.toy.anagrams.ui.Anagrams;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import org.openide.awt.ActionID;
import org.openide.awt.ActionReference;
import org.openide.awt.ActionReferences;
import org.openide.awt.ActionRegistration;
import org.openide.util.NbBundle.Messages;

<a href="https://bits.netbeans.org/dev/javadoc/org-openide-awt/org/openide/awt/ActionID.html">@ActionID</a>(id="com.toy.anagrams.core.OpenAnagramGameAction",category="Window")
<a href="https://bits.netbeans.org/dev/javadoc/org-openide-awt/org/openide/awt/ActionRegistration.html">@ActionRegistration</a>(displayName = "#CTL_OpenAnagramGameAction")
<a href="https://bits.netbeans.org/dev/javadoc/org-openide-awt/org/openide/awt/ActionReferences.html">@ActionReferences</a>({
<a href="https://bits.netbeans.org/dev/javadoc/org-openide-awt/org/openide/awt/ActionReference.html">@ActionReference</a>(path = "Menu/Window", position = 10)
})
<a href="https://bits.netbeans.org/dev/javadoc/org-openide-util/org/openide/util/NbBundle.Messages.html">@Messages</a>("CTL_OpenAnagramGameAction=Open Anagram Game")
public class OpenAnagramGameAction implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent e) {
        new Anagrams().setVisible(true);
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>In the Projects window, right-click the AnagramApplication project node and choose Run. The application starts up, installing all the modules provided by the application, which includes our custom module.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Under the Window menu, you should find the menu item "Open Anagram Game", as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_agc4.png" alt="porting 73 agc4">
</div>
</div>
<div class="paragraph">
<p>Click "Open Anagram Game" and your application appears, as before.</p>
</div>
<div class="paragraph">
<p>The application is displayed, but note that it is not well integrated with the NetBeans Platform. For example, it is not modal and it is impossible to close the <code>JFrame</code>, unless you close the application. The latter is because the application now manages the lifecycle of the <code>JFrame</code>. In the next section, we will integrate the Anagram Game more tightly with the NetBeans Platform.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_porting_level_1_integration"><a class="anchor" href="#_porting_level_1_integration"></a>Porting Level 1: Integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we integrate the application more tightly by creating a new window, so that we have a user interface, that is, a window, to which we can move those contents of the  <code>JFrame</code>  that are useful to our new application.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the <code>com.toy.anagrams.core</code> package in the Projects window and then choose New &gt; Other. Under Categories, select Module Development. Under File Types, select Window:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_agw0.png" alt="porting 73 agw0">
</div>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Choose the position where you would like the window to appear. For purposes of this tutorial choose "editor", which will place the Anagram Game in the main part of the application. Also check the first checkbox, to specify that the window should open automatically when the application starts up:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_agw1.png" alt="porting 73 agw1">
</div>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Type  <code>Anagram</code>  in Class Name Prefix and select  <code>com.toy.anagrams.core</code>  in Package, as shown here:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_agw2.png" alt="porting 73 agw2">
</div>
</div>
<div class="paragraph">
<p>Above, notice that the IDE shows the files it will create and modify.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Click Finish. Now you have a new Java class named "AnagramGameTopComponent.java". Double-click it and the Matisse GUI Builder opens. You can use the GUI Builder to design your windows:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_agw3.png" alt="porting 73 agw3">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Open the  <code>Anagrams</code>  class in the <code>com.toy.anagrams.ui</code> package. Click within the Anagrams in the GUI Builder until you see an orange line around the <code>JPanel</code>, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_agw4.png" alt="porting 73 agw4">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>When you see the orange line around the <code>JPanel</code>, as shown above, right-click it and choose "Copy". Then paste the <code>JPanel</code> into the <code>AnagramTopComponent</code> and you should see the old user interface in your new <code>AnagramTopComponent</code> class:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_agw5.png" alt="porting 73 agw5">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>You have now ported the user interface of the Anagram Game. A few variables need still to be moved from the <code>Anagrams</code> class to the new <code>AnagramTopComponent</code> class. Declare these two, which are in the <code>Anagrams</code> class, at the top of your new <code>AnagramTopComponent</code> class.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">private int wordIdx = 0;
private WordLibrary wordLibrary;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, look in the constructor of the <code>Anagrams</code> class. The first line in the constructor is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">wordLibrary = WordLibrary.getDefault();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Copy that statement. Paste it into the <code>TopComponent</code> class, making it the new first statement in the constructor of the <code>TopComponent</code> class.</p>
</div>
<div class="paragraph">
<p>Make sure to add the import statement for the  <code>WordLibrary</code>  class to the import section at the top of the class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import com.toy.anagrams.lib.WordLibrary;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Run the application again. When the application starts up, you should now see the Anagram Game window, which you defined in this section. You will also find a new menu item that opens the window, under the Window menu. Also notice that the game works as before. You need to click the "New Word" button once, to have the module call up a new word, and then you can use it as before:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_agw6.png" alt="porting 73 agw6">
</div>
</div>
<div class="paragraph">
<p>As a final step in this section, you can simply delete the <code>com.toy.anagrams.ui</code> package. That package contains the two UI classes from the original Anagram Game. You do not need either of these two classes anymore. Simply delete the package that contains them, since you have ported everything of interest to the NetBeans Platform. Then also delete the <code>OpenAnagramGameAction</code> class, since this class is not needed because the <code>AnagramTopComponent</code> provides its own <code>Action</code> for opening the window.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_porting_level_2_use_case_support"><a class="anchor" href="#_porting_level_2_use_case_support"></a>Porting Level 2: Use Case Support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we are concerned with listening to the global selection and making use of data we find there. The global selection is the registry for global singletons and instances of objects which have been registered in the system by modules. Here we query the lookup for  <code> <a href="https://bits.netbeans.org/dev/javadoc/org-openide-text/org/openide/cookies/EditorCookie.html">EditorCookie</a></code> s and make use of the  <code>EditorCookie</code> 's document to fill the string array that defines the scrambled words displayed in the  <code>TopComponent</code> .</p>
</div>
<div class="paragraph">
<p>A cookie is a capability. With a Java interface, your object&#8217;s capabilities are fixed at compile time, while NetBeans Platform cookies allow your object to behave dynamically because your object can expose capabilities, or not, based on its state. An <code>EditorCookie</code> defines an editor, with interfaces for common activities such as opening a document, closing the editor, background loading of files, document saving, and modification notifications. We will listen for the existence of such a cookie and then we will pass the content of the editor to the TopComponent, in the form of words. By doing this, we are inspecting existing functionality and reusing it within the context of our ported application. This is a modest level of integration. However, it pays off because you are reusing functionality provided by the NetBeans Platform.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>We begin by tweaking the  <code>StaticWordLibrary</code>  class. We do this so that we can set its list of words externally. The sample provides a hardcoded list, but we want to be able to set that list ourselves, via an external action. Therefore, add this method to  <code>StaticWordLibrary</code> :</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public static void setScrambledWordList(String[] inScrambledWordList) {
    SCRAMBLED_WORD_LIST = inScrambledWordList;
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Importantly, change the class signature of  <code>StaticWordLibrary</code>  to <code>public class</code> and remove the <code>final</code> from the signature of <code>SCRAMBLED_WORD_LIST</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Next, we will create an action that will obtain the content of a Manifest file, break the content down into words, and fill the  <code>SCRAMBLED_WORD_LIST</code>  string array with these words.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>As you learned to do in the previous section, set library dependencies on the Text API and the Nodes API.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Create a Java class named <code>SetScrambledAnagramsAction</code>, in the <code>com.toy.anagrams.core</code> package, and define it as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.toy.anagrams.core;

import com.toy.anagrams.lib.StaticWordLibrary;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.text.BadLocationException;
import javax.swing.text.StyledDocument;
import org.openide.awt.ActionID;
import org.openide.awt.ActionReference;
import org.openide.awt.ActionReferences;
import org.openide.awt.ActionRegistration;
import org.openide.cookies.EditorCookie;
import org.openide.util.Exceptions;
import org.openide.util.NbBundle.Messages;
import org.openide.windows.TopComponent;
import org.openide.windows.WindowManager;

<a href="https://bits.netbeans.org/dev/javadoc/org-openide-awt/org/openide/awt/ActionID.html">@ActionID</a>(id="com.toy.anagrams.core.SetScrambledAnagramsAction",category="Window")
<a href="https://bits.netbeans.org/dev/javadoc/org-openide-awt/org/openide/awt/ActionRegistration.html">@ActionRegistration</a>(displayName = "#CTL_SetScrambledAnagramsAction")
<a href="https://bits.netbeans.org/dev/javadoc/org-openide-awt/org/openide/awt/ActionReferences.html">@ActionReferences</a>({
<a href="https://bits.netbeans.org/dev/javadoc/org-openide-awt/org/openide/awt/ActionReference.html">@ActionReference</a>(path = "Editors/text/x-manifest/Popup", position = 10)
})
<a href="https://bits.netbeans.org/dev/javadoc/org-openide-util/org/openide/util/NbBundle.Messages.html">@Messages</a>("CTL_SetScrambledAnagramsAction=Set Scrambled Words")
public final class SetScrambledAnagramsAction implements ActionListener {

    private final EditorCookie context;

    public SetScrambledAnagramsAction(EditorCookie context) {
        this.context = context;
    }

    @Override
    public void actionPerformed(ActionEvent ev) {
        try {
            <strong>//Get the EditorCookie's document:</strong>
            StyledDocument doc = context.getDocument();
            <strong>//Get the complete textual content:</strong>
            String all = doc.getText(0, doc.getLength());
            <strong>//Make words from the content:</strong>
            String[] tokens = all.split(" ");
            <strong>//Pass the words to the WordLibrary class:</strong>
            StaticWordLibrary.setScrambledWordList(tokens);
            <strong>//Open the TopComponent:</strong>
            TopComponent win = WindowManager.getDefault().findTopComponent("AnagramTopComponent");
            win.open();
            win.requestActive();
        } catch (BadLocationException ex) {
            Exceptions.printStackTrace(ex);
        }
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>As discussed above, when we run the application, we want to be able to right-click within a Manifest file, choose a menu item, and invoke our Action. Right now, however, the NetBeans Platform is unable to distinguish Manifest files from any other file. Therefore, we need to enable Manifest support in our application. For demonstration purposes, we will enable ALL the modules in the NetBeans Platform, as well as those provided by NetBeans IDE that relate to Java development. As a result, when we run the application, a new instance of NetBeans IDE for Java development will start up, together with our custom module. To achieve the above, expand the Important Files node in the AnagramApplication, then open the NetBeans Platform Config file, which on disk is named <code>platform.properties</code>. Notice that many clusters (groups of modules) and individual modules have been excluded or disabled. You can enable them via the Project Properties dialog of the NetBeans Platform application. Since we are simply going to enable ALL of those that relate to Java development them, we need only change the content of the <code>platform.properties</code> file to the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">branding.token=anagramapplication
cluster.path=\
    ${nbplatform.active.dir}/extide:\
    ${nbplatform.active.dir}/harness:\
    ${nbplatform.active.dir}/ide:\
    ${nbplatform.active.dir}/java:\
    ${nbplatform.active.dir}/platform:\
    ${nbplatform.active.dir}/websvccommon
disabled.modules=\
    javaewah.dummy,\
    org.apache.commons.httpclient,\
    org.apache.commons.io,\
    org.apache.commons.lang,\
    org.apache.ws.commons.util,\
    org.apache.xmlrpc,\
    org.eclipse.core.contenttype,\
    org.eclipse.core.jobs,\
    org.eclipse.core.net,\
    org.eclipse.core.runtime,\
    org.eclipse.core.runtime.compatibility.auth,\
    org.eclipse.equinox.app,\
    org.eclipse.equinox.common,\
    org.eclipse.equinox.preferences,\
    org.eclipse.equinox.registry,\
    org.eclipse.equinox.security,\
    org.eclipse.jgit,\
    org.eclipse.mylyn.bugzilla.core,\
    org.eclipse.mylyn.commons.core,\
    org.eclipse.mylyn.commons.net,\
    org.eclipse.mylyn.commons.repositories.core,\
    org.eclipse.mylyn.commons.xmlrpc,\
    org.eclipse.mylyn.tasks.core,\
    org.eclipse.mylyn.wikitext.confluence.core,\
    org.eclipse.mylyn.wikitext.core,\
    org.eclipse.mylyn.wikitext.textile.core,\
    org.netbeans.core.browser,\
    org.netbeans.core.browser.webview,\
    org.netbeans.libs.git,\
    org.netbeans.libs.ini4j,\
    org.netbeans.libs.javafx,\
    org.netbeans.libs.jsch.agentproxy,\
    org.netbeans.libs.nbi.ant,\
    org.netbeans.libs.nbi.engine,\
    org.netbeans.libs.smack,\
    org.netbeans.libs.svnClientAdapter,\
    org.netbeans.libs.svnClientAdapter.javahl,\
    org.netbeans.libs.svnClientAdapter.svnkit,\
    org.netbeans.modules.apisupport.harness,\
    org.netbeans.modules.bugtracking,\
    org.netbeans.modules.bugtracking.bridge,\
    org.netbeans.modules.bugtracking.commons,\
    org.netbeans.modules.bugzilla,\
    org.netbeans.modules.css.prep,\
    org.netbeans.modules.editor.global.format,\
    org.netbeans.modules.extexecution.impl,\
    org.netbeans.modules.git,\
    org.netbeans.modules.html.angular,\
    org.netbeans.modules.html.custom,\
    org.netbeans.modules.html.knockout,\
    org.netbeans.modules.hudson.git,\
    org.netbeans.modules.hudson.mercurial,\
    org.netbeans.modules.hudson.subversion,\
    org.netbeans.modules.hudson.tasklist,\
    org.netbeans.modules.languages,\
    org.netbeans.modules.lexer.nbbridge,\
    org.netbeans.modules.localhistory,\
    org.netbeans.modules.localtasks,\
    org.netbeans.modules.mercurial,\
    org.netbeans.modules.mylyn.util,\
    org.netbeans.modules.notifications,\
    org.netbeans.modules.parsing.ui,\
    org.netbeans.modules.properties.syntax,\
    org.netbeans.modules.server,\
    org.netbeans.modules.spellchecker,\
    org.netbeans.modules.spellchecker.bindings.htmlxml,\
    org.netbeans.modules.spellchecker.bindings.properties,\
    org.netbeans.modules.spellchecker.dictionary_en,\
    org.netbeans.modules.spellchecker.kit,\
    org.netbeans.modules.subversion,\
    org.netbeans.modules.target.iterator,\
    org.netbeans.modules.team.commons,\
    org.netbeans.modules.team.ide,\
    org.netbeans.modules.utilities.project,\
    org.netbeans.modules.versioning,\
    org.netbeans.modules.versioning.core,\
    org.netbeans.modules.versioning.indexingbridge,\
    org.netbeans.modules.versioning.masterfs,\
    org.netbeans.modules.versioning.system.cvss.installer,\
    org.netbeans.modules.versioning.ui,\
    org.netbeans.modules.versioning.util,\
    org.netbeans.modules.web.webkit.debugging,\
    org.netbeans.modules.websvc.saas.kit,\
    org.netbeans.modules.websvc.saas.services.amazon,\
    org.netbeans.modules.websvc.saas.services.delicious,\
    org.netbeans.modules.websvc.saas.services.flickr,\
    org.netbeans.modules.websvc.saas.services.google,\
    org.netbeans.modules.websvc.saas.services.strikeiron,\
    org.netbeans.modules.websvc.saas.services.weatherbug,\
    org.netbeans.modules.websvc.saas.services.zillow,\
    org.netbeans.modules.websvc.saas.services.zvents,\
    org.netbeans.modules.websvc.saas.ui,\
    org.openidex.util
nbplatform.active=default</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the next step, when we run the application, all the groups of modules (called "clusters") will be enabled, nothing will be excluded, and you will see NetBeans IDE started up.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Build the application by right-clicking it and choosing "Clean and Build". After you have done so, run the application. Go to the Window menu and choose Favorites. In the Favorites window, browse to a Manifest file. Open the file. Inside the file, i.e., in the Manifest Editor, right-click, and invoke the Set Scrambled Words action via the menu item.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_age0.png" alt="porting 73 age0">
</div>
</div>
<div class="paragraph">
<p>The <code>AnagramTopComponent</code> is displayed and, when you click the Next Word button, you will see that the scrambled words all come from the selected Manifest file.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_73_age1.png" alt="porting 73 age1">
</div>
</div>
<div class="paragraph">
<p>The result of this exercise is that you now see the content of the Manifest file in the Scrambled Word text field. Of course, these words are not really scrambled and you cannot really unscramble them. However, your module is making use of the content of a file that is supported by a different set of modules altogether, that is, the Manifest support modules, as well as related editor modules.</p>
</div>
<div class="paragraph">
<p>Optionally, before continuing, you can now remove all the groups of modules (known as "clusters") provided by NetBeans IDE, which may not be relevant for your own application. To do so, right-click the <code>AnagramApplication</code> node in the Projects window, choose Properties, go to the Libraries tab, and uncheck all the checkboxes, except for <code>platform</code>. Run the application again and you will see that all the project-related and editor-related features of the application have now been removed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_porting_level_3_aligned"><a class="anchor" href="#_porting_level_3_aligned"></a>Porting Level 3: Aligned</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we are concerned with becoming a "good citizen" of the NetBeans Platform. We are going to expose the state of the TopComponent to the other modules, so that we can cooperate with them.</p>
</div>
<div class="paragraph">
<p>As an example of this, we will modify the TopComponent to offer a  <code> <a href="https://bits.netbeans.org/dev/javadoc/org-openide-awt/org/netbeans/api/actions/Savable.html">Savable</a></code> , which gives the user a way to store the text typed in the text field. By offering the  <code>Savable</code>  when changes are made in the text field, the Save button and the Save menu item under the File menu and the shortcuts for invoking the Save action will become enabled. That is because the NetBeans Platform provides a context-sensitive Action called <code>SaveAction</code>. The <code>SaveAction</code> becomes enabled whenever the capability of being saved, in other words, the <code>Savable</code>, is available. In this case, we will make the <code>Savable</code> available whenever the user types something in the <code>guessedWord</code> text field. Then the <code>SaveAction</code> will automatically become enabled.</p>
</div>
<div class="paragraph">
<p>When the user selects the enabled button or menu item, a dialog will be displayed and the button and menu item will become disabled, until the next time that a change is made to the text field.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Begin by setting a library dependency on the Dialogs API, which you learned to do in the previous sections.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Next, we define an extension of the ` <a href="https://bits.netbeans.org/dev/javadoc/org-openide-awt/org/netbeans/spi/actions/AbstractSavable.html">AbstractSavable</a><code>, somewhere within the `AnagramTopComponent</code> class:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">class MySavable extends AbstractSavable {
    private final Object obj;
    public MySavable(Object obj) {
        this.obj = obj;
        register();
    }
    @Override
    protected String findDisplayName() {
        return "My name is " + obj.toString(); // get display name somehow
    }
    @Override
    protected void handleSave() throws IOException {
        // save 'obj' somehow
        Confirmation msg = new NotifyDescriptor.Confirmation("Do you want to save \""
                + guessedWord.getText() + "\"?", NotifyDescriptor.OK_CANCEL_OPTION,
                NotifyDescriptor.QUESTION_MESSAGE);
        Object result = DialogDisplayer.getDefault().notify(msg);
        //When user clicks "Yes", indicating they really want to save,
        //we need to disable the Save button and Save menu item,
        //so that it will only be usable when the next change is made
        //to the text field:
        if (NotifyDescriptor.YES_OPTION.equals(result)) {
            fire(false);
            //Implement your save functionality here.
        }
    }
    @Override
    public boolean equals(Object other) {
        if (other instanceof MySavable) {
            return ((MySavable)other).obj.equals(obj);
        }
        return false;
    }
    @Override
    public int hashCode() {
        return obj.hashCode();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We have not defined the <code>fire</code> method yet, so the related statement above will be underlined in red until we do so.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the constructor, call the as-yet-undefined <code>fire</code> method, passing in true this time, whenever a change is detected in the <code>guessedWord</code> text field:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">guessedWord.getDocument().addDocumentListener(new DocumentListener() {
    @Override
    public void insertUpdate(DocumentEvent arg0) {
        fire(true);
    }
    @Override
    public void removeUpdate(DocumentEvent arg0) {
        fire(true);
    }
    @Override
    public void changedUpdate(DocumentEvent arg0) {
        fire(true);
    }
});</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Now we declare an ` <a href="https://bits.netbeans.org/dev/javadoc/org-openide-util-lookup/org/openide/util/lookup/InstanceContent.html">InstanceContent</a>` at the top of the class. The <code>InstanceContent</code> class is a very powerful class in the NetBeans Platform, enabling you to update the Lookup on the fly, at runtime. We also declare the implementation of our <code>Savable</code>:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">InstanceContent ic;
MySavable impl;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Next, at the end of the constructor, we instantiate the <code>Savable</code> and the <code>InstanceContent</code>, while adding the <code>InstanceContent</code> to the <code>Lookup</code> of the <code>AnagramTopComponent</code>:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">impl = new MySavable(guessedWord.getText());

ic = new InstanceContent();

associateLookup(new AbstractLookup(ic));</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Now we can add the <code>fire</code> method, which dynamically adds and removes the <code>Savable</code> from the <code>InstanceContent</code>:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public void fire(boolean modified) {
    if (modified) {
        //If the text is modified,
        //we add the Savable implementation
        //to the InstanceContent, which
        //is in the Lookup of the TopComponent:
        ic.add(impl);
    } else {
        //Otherwise, we remove the Savable
        //from the InstanceContent:
        ic.remove(impl);
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Run the application again. Make a change in the "Guessed Word" text field and notice that the Save menu item is enabled:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_70_ageditorcookie2.png" alt="porting 70 ageditorcookie2">
</div>
</div>
<div class="paragraph">
<p>Click the menu item, click the "OK" button in the dialog&#8230;&#8203;</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/porting_70_ageditorcookie5.png" alt="porting 70 ageditorcookie5">
</div>
</div>
<div class="paragraph">
<p>&#8230;&#8203;and notice that the Save menu item is disabled afterwards.</p>
</div>
<div class="paragraph">
<p>Congratulations! Now that your application is making use of existing NetBeans Platform functionality, you have taken one further step in successfully aligning it with the NetBeans Platform. Other modules can be now be plugged into the NetBeans Platform to take advantage of, or even extend, features added by your application. Hence, not only can your application benefit from what the NetBeans Platform provides, but you can create features that other modules can use as well.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_porting_tips_tricks"><a class="anchor" href="#_porting_tips_tricks"></a>Porting Tips &amp; Tricks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are several next steps one can take at this point, aside from further aligning the application with the NetBeans Platform, as outlined above:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Attain a thorough understanding of what the NetBeans Platform provides.</strong> As you port your application, you will learn more and more about the various features that the NetBeans Platform makes available. A central problem is that the NetBeans Platform is quite large and attaining a thorough overview of all that it offers can be a lengthy process. A quick shortcut is to download and print out the  <a href="http://refcardz.dzone.com/refcardz/netbeans-platform-70">NetBeans Platform 7.0 Refcard</a>, which is a free DZone document that highlights all the NetBeans Platform benefits, features, APIs, and many tips and tricks in an easy to digest format.</p>
</li>
<li>
<p><strong>Become aware of the differences between standard Swing applications and the NetBeans Platform.</strong> For the most part, the standard Swing approach to creating a user interface will continue to work for your NetBeans Platform application. However, the NetBeans Platform approach is better, easier, or both in some cases. One example is that of the NetBeans Dialogs API. The standard Swing approach, via, for example, the  <code>JOptionsPane</code> , works OK, but using the NetBeans Dialogs API is easier, because it automatically centers your dialog in the application and allows you to dismiss it with the ESC key. Using the Dialogs API also lets you plug in a different DialogDisplayer, which can make it easier to customize or test your application.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Below is a list of the principle differences between the typical Swing approach and that of the NetBeans Platform:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Loading of images</p>
</li>
<li>
<p>Loading of resource bundles and localized string</p>
</li>
<li>
<p>Assigning of mnemonics to labels and buttons</p>
</li>
<li>
<p>Showing dialogs</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For details on all of the above items, read this FAQ:  <a href="../../../../wiki/main/wiki/DevFaqNbIdiosyncracies/" class="xref page">Common calls that should be done slightly differently in NetBeans than standard Swing apps (loading images, localized strings, showing dialogs)</a>.</p>
</div>
<div class="paragraph">
<p>In addition, note that, since the NetBeans Platform now handles the lifecycle of your module, since it is now part of the whole application, you can no longer use  <code>System.exit</code> . Instead, you need to use  <code>LifecycleManager</code> . To run code on start up, which should only be done when absolutely necessary, you need to use the NetBeans  <code>ModuleInstall</code>  class and, specifically, its  <code>restored</code>  method. A useful reference in this context is  <a href="http://www.ociweb.com/jnb/jnbOct2005.html#porting">Porting a Java Swing Application to the NetBeans Platform</a>, by Tom Wheeler, in  <a href="http://www.ociweb.com/jnb/jnbOct2005.html#porting">Building A Complete NetBeans Platform Application</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Create a module project for each distinct part of your application.</strong> The NetBeans Platform provides a modular architecture out of the box. Break your application into one or more modules. Doing so requires some analysis of your original application and an assessment of which parts could best fit within a new module and how to communicate between them. Since the example in this tutorial was simple, we only needed one module. A next step might be to put the  <code>WordLibrary</code>  class in a separate module and expose it as a public API. The  <code>StaticWordLibrary</code>  would be put into another module, providing an implementation of the  <code>WordLibrary</code>  API. Doing so would let other modules provide user interfaces on top of the API provided by the first module, without depending in any way on the implementations.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As shown above, you need to put the modules in a module suite. Then set a dependency in the plugin module on the API module, using the Libraries panel in the plugin module&#8217;s Project Properties dialog box. The size of each module, i.e., when one should create a new module or continue developing within an existing one, is a question of debate. Smaller is better, in general.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Always keep reevaluating what you really need to port.</strong> Look at the NetBeans Platform and decide where there is overlap with your own application. Where there is overlap, such as the menu bar and About box, decide what you want to do. Typically, you want to leverage as much as possible from the NetBeans Platform. Therefore, you would port as little as possible from your own application, while keeping as much of it as is useful to you.</p>
</li>
<li>
<p><strong>Move distinct parts of your user interface to one or more TopComponents.</strong> On the NetBeans Platform, the  <code>TopComponent</code>  class provides the top level Swing container. In effect, it is a window. Move the user interface from your original application to one or more of these windows and discard your original  <code>JFrame</code> s.</p>
</li>
<li>
<p><strong>Copy the Java classes that do not provide user interface elements.</strong> We simply copied the original  <code>WordLibrary.java</code>  class. You can do the same with the model of your own Swing applications. You might need to tweak some code to smoothen the transition between the old Swing application and the new NetBeans Platform application, but (as in the case shown in this tutorial) this might not even be necessary.</p>
</li>
<li>
<p><strong>Learn from others.</strong> Aside from joining the <a href="mailto:dev@platform.netbeans.org">dev@platform.netbeans.org</a> mailing list, also read the following two crucial articles:</p>
</li>
<li>
<p><a href="http://netbeans.dzone.com/10-tips-4-porting-2-netbeans">Top 10 Tips for Porting to the NetBeans Platform</a></p>
</li>
<li>
<p><a href="http://java.dzone.com/news/how-to-split-into-modules">How to Split an Application into Modules?</a></p>
</li>
<li>
<p><strong>Watch the Top 10 NetBeans APIs Screencast.</strong> The  <a href="../nbm-10-top-apis/" class="xref page">screencast series</a> gives a good overview of the NetBeans Platform, with many useful code snippets and coding patterns.
<a href="../../../../front/main/community/mailing-lists/" class="xref page">Send Us Your Feedback</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_steps"><a class="anchor" href="#_next_steps"></a>Next Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information about creating and developing NetBeans modules, see the following resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../../kb/docs/platform/" class="xref page">Other Related Tutorials</a></p>
</li>
<li>
<p><a href="https://bits.netbeans.org/dev/javadoc/">NetBeans API Javadoc</a></p>
</li>
</ul>
</div>
</div>
</div>
        <section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        <li><a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/tutorials/nbm-porting-basic.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>
    </div>
        <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="../../../../_/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/about">About</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/who">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/community">Community</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/mailing-lists">Mailing lists</a></li>
              <li><a href="../../../../front/main/community/committer">Becoming a committer</a></li>
              <li><a href="../../../../front/main/community/events">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/participate">Participate</a></h1>
            <ul>
              <li><a href="../../../../front/main/participate/submit-pr">Submitting Pull Requests</a></li>
              <li><a href="../../../../front/main/participate/report-issue">Reporting Issues</a></li>
              <li><a href="../../../../front/main/participate/#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/help">Get Help</a></h1>
            <ul>
              <li><a href="../../../../front/main/help/#documentation">Documentation</a></li>
              <li><a href="../../../../wiki/main/wiki">Wiki</a></li>
              <li><a href="../../../../front/main/help/#support">Community Support</a></li>
              <li><a href="../../../../front/main/help/commercial-support">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/download">Download</a></h1>
            <ul>
              <li><a href="../../../../front/main/download">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="../../../../front/main/download/#_daily_builds_and_building_from_source">Building from source</a></li>
              <li><a href="../../../../front/main/download/#_older_releases">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
      </div>
    </div>

    
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
    <script src="../../../../_/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../../../_/js/vendor/what-input.js"></script>
    <script src="../../../../_/js/vendor/foundation.min.js"></script>
    <script src="../../../../_/js/vendor/jquery.colorbox-min.js"></script>
    <script src="../../../../_/js/netbeans.js"></script>
    <script>
       $(function(){ $(document).foundation(); });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
      $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); });
    </script>
  </body>
</html>
