<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans Selection Management Tutorial II - Using Nodes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans Selection Management Tutorial II - Using Nodes - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, NetBeans Selection Management Tutorial II - Using Nodes">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="../../../../_/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    <link rel="stylesheet" href="../../../../_/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../_/images/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../_/images/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../_/images/fav/favicon-16x16.png">
    <link rel="manifest" href="../../../../_/images/fav/site.webmanifest">
    <link rel="mask-icon" href="../../../../_/images/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="../../../../_/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="../../../../index.html"><img src='../../../../_/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <input id="search-input" type="text" placeholder="Search the docs"> </li>
            <li> <a href="../../../../front/main/community">Community</a> </li>
            <li> <a href="../../../../front/main/participate">Participate</a> </li>
            <li> <a href="../../../../front/main/blogs">Blog</a></li>
            <li> <a href="../../../../front/main/help">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="../../../../front/main/download">Download</a> </li>
        </ul>
    </div>
</div>

    <!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="../../../../front/main/download/nb19">Download</a></p>
        </div>
    </div>
</section>
    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">NetBeans Selection Management Tutorial II - Using Nodes</h1>
            <div class="sectionbody">
              <div class="paragraph">
                <p class='reviewed'><i class="fa fa-check-circle"></i> Last reviewed on 2020-12-22</p>
              </div>
            </div>
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_introduction_to_the_nodes_api">Introduction to the Nodes API</a></li>
<li><a href="#_creating_an_explorer_view">Creating an Explorer View</a></li>
<li><a href="#_implementing_nodes_and_node_children">Implementing Nodes and Node Children</a></li>
<li><a href="#_running_the_tutorial">Running the Tutorial</a></li>
<li><a href="#_exploring_explorer">Exploring Explorer</a></li>
<li><a href="#_handling_multi_selection">Handling Multi-Selection</a></li>
<li><a href="#_review_of_concepts">Review of Concepts</a></li>
<li><a href="#_next_steps">Next Steps</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial is part 2 of a series. The <a href="../nbm-selection-1/" class="xref page">previous tutorial</a> covered the basics of component-wide selection handling in NetBeans - how to provide objects from a ` <a href="../../../../wiki/main/wiki/DevFaqWindowsTopComponent/" class="xref page">TopComponent</a><code>'s ` <a href="../../../../wiki/main/wiki/DevFaqLookup/" class="xref page">Lookup</a></code>, and how to write other components that are sensitive to the <code>Lookup</code> of whatever component has focus. This tutorial assumes that you have completed the previous tutorial, and have the source code to hand, since we will be modifying it in this part.</p>
</div>
<div class="paragraph">
<p>This tutorial focuses on the  <a href="https://bits.netbeans.org/dev/javadoc/org-openide-nodes/overview-summary.html">Nodes API</a>, which makes it possible to do more granular views and selection than just component-level selection. Of course, you could write a component that reads and writes into its own Lookup whatever it wants, and provides more granular selection logic that way. But the Nodes API makes it very easy to do this, and offers a number of advantages over doing it yourself.</p>
</div>
<div class="paragraph">
<p>Later parts of this tutorial series introduce more advanced use of the Nodes API.</p>
</div>
<div class="paragraph">
<p>For troubleshooting purposes, you are welcome to download the  <a href="https://github.com/bradh/NetBeansSelection2">completed tutorial source code</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction_to_the_nodes_api"><a class="anchor" href="#_introduction_to_the_nodes_api"></a>Introduction to the Nodes API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The first advantage is that the Nodes API provides a <em>presentation layer</em> - a layer between the data model being edited in some way, and the UI components that expose the data model to the user. This is quite useful and powerful, as the same model may be presented in multiple ways, or with multiple UIs.</p>
</div>
<div class="paragraph">
<p>The second advantage is the Explorer API - the module <code>org.openide.explorer</code> provides a vast array of components - trees, lists, tree tables and more - which can render a Node and its children.</p>
</div>
<div class="paragraph">
<p>A <code>Node</code> is a generic hierarchical object - a <code>Node</code> has:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Children - Nodes in a hierarchy underneath it, that can be displayed in a tree</p>
</li>
<li>
<p>Actions - An array of actions that can be displayed in a popup menu</p>
</li>
<li>
<p>Display Name - A human-readable, localized display name that can be shown in a UI component</p>
</li>
<li>
<p>Icon - An icon that can be shown in a UI component</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>and `Node`s can fire changes in any of the above, and the explorer UI components will automatically update themselves.</p>
</div>
<div class="paragraph">
<p>This is <em>not</em> to say that the content of the previous tutorial was useless - on the contrary, it is the reason the Nodes API can work. The reason: <code>org.openide.nodes.Node</code> has a method, you guessed it, <code>getLookup()</code>. In fact what is happening when you change selection in the Projects tab in the IDE, for example, is&#8230;&#8203;the Projects tab is a TopComponent. It proxies the <code>Lookup</code> of whatever object(s) are currently selected in the tree - just as the <code>Utilities.actionsGlobalContext()</code> <code>Lookup</code> proxies whichever component is focused and fires changes when focus changes.</p>
</div>
<div class="paragraph">
<p>Thanks to the components in the Explorer API, it is very easy to create your own views of a tree of <code>Node</code> s, and have this type of proxying in your own components with very little code. Viewer type components such as the <code>MyViewer</code> component in the previous tutorial do not have to do anything special to be able to respond to selection changes in Explorer components - they will automatically be notified as selection changes.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_an_explorer_view"><a class="anchor" href="#_creating_an_explorer_view"></a>Creating an Explorer View</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The first thing you will do is some substantial modifications to your <code>MyEditor</code> editor component (from the <a href="../nbm-selection-1/" class="xref page">previous tutorial</a>). This starts with opening it in the editor.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>First, bring up the properties dialog for the My Editor project by right-clicking the My Editor project and choosing Properties. On the Libraries tab, click the Add Dependency button, and type "BeanTreeView" in Filter text box:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/selection-2_explorer1.png" alt="selection 2 explorer1">
</div>
</div>
<div class="paragraph">
<p>Select the "Explorer &amp; Property Sheet API", and click <b class="button">OK</b> to add this dependency so you can use classes from it.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Open the MyEditor.java file. If not already showing, switch to the form designer.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Select all of the components (two text fields, and the button), and delete them.</p>
</div>
<div class="paragraph">
<p>In the following steps, we will use a component from the Explorer &amp; Property Sheet API, instead of the components we have been using so far.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Switch to the Source view of MyEditor.java, and rewrite the constructor of the  <code>MyEditor</code>  class as shown below:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public MyEditor() {
    initComponents();
    Event obj = new Event();
    associateLookup(new AbstractLookup(content));

    setLayout(new BorderLayout());
    add(new BeanTreeView(), BorderLayout.CENTER);

    setDisplayName("MyEditor " + obj.getIndex());
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>BeanTreeView</code> is a component from the Explorer &amp; Property Sheet API - a basic <code>JTree</code>-based view over a <code>Node</code> and its children, with built-in handling of popup menus, searching and more. Press <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>I</kbd></span> to import BeanTreeView, because the import statement needs to be added.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Remove the unused <code>updateContent()</code> method.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>The next step is to give your tree something to show. Explorer UI components work like this: When added to a container, they search that container and their ancestors until they find one that implements <code>ExplorerManager.Provider</code>. So you don&#8217;t set the node to be viewed directly on the component - you set it on the component&#8217;s manager. This makes it possible to have multiple views, master/detail views and such, all managed by a single manager. Add to the signature of MyEditor as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MyEditor extends TopComponent implements ExplorerManager.Provider {</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then press <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>I</kbd></span> to fix imports. Keeping the cursor in the signature line, a lightbulb glyph should appear in the margin. Press <span class="keyseq"><kbd>Alt</kbd>+<kbd>Enter</kbd></span>, and accept the hint "Implement all abstract methods". This will add one method, <code>getExplorerManager()</code>. Implement it as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">private final ExplorerManager mgr = new ExplorerManager();

@Override
public ExplorerManager getExplorerManager() {
    return mgr;
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Now, since the goal is one component that can display multiple <code>Event`s, you need a `Node</code> or two to display in your component. Each one will own an instance of <code>Event</code>. So, right now you&#8217;ll just add the code that will create a root node for your tree view. Add the following line to the constructor:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">mgr.setRootContext(new AbstractNode(Children.create(new EventChildFactory(), true)));</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is the code that sets the root node for all of the explorer views that are child components of <code>MyEditor</code>. The <code>Children.create</code> is a static call from the NetBeans APIs that will, thanks to the <code>true</code> parameter, create the child components asynchronously, that is, as needed, instead of all at once.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>If you tried Fix Imports, you may have seen the error dialog telling you that neither <code>AbstractNode</code>, <code>Children</code>, nor <code>EventChildFactory</code> could be resolved. To resolve <code>AbstractNode</code> and <code>Children</code>, you need to add one dependency, on the Nodes API module. Right click the My Editor project and select Properties, go to the Libraries page and click Add Dependency. Type "AbstractNode" in the Add dialog, and when the item "Nodes API" in the list is selected, click <b class="button">OK</b> or press Enter.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Now, back in the source editor, press Ctrl-Shift-I to Fix Imports. You will be notified that <code>EventChildFactory</code> could not be resolved. That&#8217;s okay - you&#8217;re about to write it, in the next section.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementing_nodes_and_node_children"><a class="anchor" href="#_implementing_nodes_and_node_children"></a>Implementing Nodes and Node Children</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You&#8217;ll notice you&#8217;re using a class called <code>AbstractNode</code> above. Despite its name, it is not an abstract class! It is a utility implementation of <code>org.openide.nodes.Node</code> which can save you some time and trouble - rather than implement Node yourself, you can just create an AbstractNode and pass it a <code>Children</code> object which will provide child nodes for it, and then set its icon and display name as needed. So it is a simple way to get a <code>Node</code> object to represent something, without needing to do any subclassing of <code>Node</code> itself.</p>
</div>
<div class="paragraph">
<p>The next step is to implement <code>EventChildFactory</code>, so that there are subnodes underneath the initial node.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right click the <code>org.myorg.myeditor</code> package in the My Editor project, and choose New &gt; Java Class from the popup menu. In the New Java Class wizard, name the class "EventChildFactory", and click Finish or press Enter to create the class.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Modify the signature of the class so it extends <code>ChildFactory</code>:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class EventChildFactory extends ChildFactory&lt;Event&gt; {</code></pre>
</div>
</div>
<div class="paragraph">
<p>Press <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>I</kbd></span> to Fix Imports.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Position the cursor in the class signature line. When the lightbulb glyph appears in the margin, press Alt-Enter and then Enter again to accept the hint "Implement all abstract methods". This will add a protected <code>createKeys(List&lt;Event&gt; list)</code> method - this is where you will create the keys, on a background thread, that will be used to create the children of your root node. The children will be created the first time the object is asked for its child nodes. So you can delay creation of child Nodes until the user has really expanded the parent node in a view and needs to see them. Implement the method as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Override
protected boolean createKeys(List&lt;Event&gt; list) {
    Event[] objs = new Event[5];
    for (int i = 0; i &lt; objs.length; i++) {
        objs[i] = new Event();
    }
    list.addAll(Arrays.asList(objs));
    return true;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you may have guessed from the name <code>ChildFactory</code>, what your parent class does is take an array or <code>Collection</code> of key objects, and act as a factory for child nodes for them. For each element in the array or collection you pass to the <code>toPopulate</code> list above, the <code>createNodeForKey()</code> method shown below will be called once when <code>true</code> is returned.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This means that you can have more than one node to represent one object, if that makes sense in your design.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Now you need to implement the code that actually creates Node objects for all of these. Implement <code>createNodeForKey</code> as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Override
protected Node createNodeForKey(Event key) {
    Node result = new AbstractNode(
            Children.create(new EventChildFactory(), true),
            Lookups.singleton(key));
    result.setDisplayName(key.toString());
    return result;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The new <code>Node</code> is created by passing in the definition of its <code>Children</code>, together with the current  <code>Event</code>, which is put into the <code>Lookup</code> of the  <code>Node</code>. When the user selects the  <code>Node</code>, the object in its <code>Lookup</code> will be proxied by the  <code>Lookup</code>  of the  <code>TopComponent</code>, which in turn is proxied by the global <code>Lookup</code>. In this way, you make the current  <code>Event</code> object available to any object that is interested in it, whenever the <code>Node</code> is selected.</p>
</div>
<div class="paragraph">
<p>Press <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>I</kbd></span> to Fix Imports.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>The last step is to install a bit of plumbing code that will wire up your explorer manager to your TopComponent&#8217;s lookup. First, delete the line</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">private final InstanceContent content = new InstanceContent();</code></pre>
</div>
</div>
<div class="paragraph">
<p>from the head of the class definition - you will be using a utility to wire up the selected <code>Node&#8217;s `Lookup</code> to your component&#8217;s <code>Lookup</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Modify the constructor of <code>MyEditor</code> so it looks like this:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public MyEditor() {
    initComponents();
    Event obj = new Event();
    associateLookup(ExplorerUtils.createLookup(mgr, getActionMap()));

    setLayout(new BorderLayout());
    add(new BeanTreeView(), BorderLayout.CENTER);

    setDisplayName("MyEditor " + obj.getIndex());
    mgr.setRootContext(new AbstractNode(Children.create(new EventChildFactory(), true)));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Press <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>I</kbd></span> to Fix Imports which will add the ExplorerUtils import.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_running_the_tutorial"><a class="anchor" href="#_running_the_tutorial"></a>Running the Tutorial</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You may have noticed that because you pass a new instance of <code>EventChildFactory</code> to each <code>AbstractNode</code> you create, that you will end up with an infinitely deep tree of <code>Events</code> - each <code>Node</code> will have five child Nodes, each with its own <code>Event</code>, although the children will only be created as required.</p>
</div>
<div class="paragraph">
<p>You are now ready to run, so right-click <code>EventManager</code> and choose Clean and Build, and then right-click again and choose Run from the popup menu. When the application starts, you should be able to browse the  <code>Events</code>, as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/selection-2_result1.png" alt="selection 2 result1">
</div>
</div>
<div class="paragraph">
<p>If you open the property sheet (From the Window menu, select IDE Tools and then Properties), then you should see your viewer and the property sheet update themselves to show the <code>Event</code> belonging to each node, as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/selection-2_result2.png" alt="selection 2 result2">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exploring_explorer"><a class="anchor" href="#_exploring_explorer"></a>Exploring Explorer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that you have the above code, it can be interesting to explore some of the other components available in the Explorer &amp; Property Sheet API, which can also render a <code>Node</code> and it&#8217;s children. You can do this by opening <code>MyEditor</code> in the Source view and changing <code>add (new BeanTreeView(), BorderLayout.CENTER)</code> to something different, in the constructor.</p>
</div>
<div class="paragraph">
<p>Some of the options are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>OutlineView</strong> - a tree-table - a table that has a tree as the leftmost column:</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/selection-2_result3.png" alt="selection 2 result3">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>IconView</strong> - a component that shows Node children in equally spaced icons, similar to Windows Explorer</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/selection-2_result4.png" alt="selection 2 result4">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>ListView</strong> - display nodes in a JList (you can set how deep into the Node hierarchy it should go)</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/selection-2_result5.png" alt="selection 2 result5">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>ChoiceView</strong> - a combo-box view of a Node and its children (typically used in combination with other elements, rather than being the primary view)</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/selection-2_result6.png" alt="selection 2 result6">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>MenuView</strong> - a <code>JButton</code> that pops up a menu of a Node and its children</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/selection-2_result7.png" alt="selection 2 result7">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_handling_multi_selection"><a class="anchor" href="#_handling_multi_selection"></a>Handling Multi-Selection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You may have noticed that <code>BeanTreeView</code> - the basic tree view for Nodes - lets you select more than one Node at a time. Therefore, it might be desirable to modify your viewer component to display information about all of the selected nodes:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Open <code>org.myorg.myviewer.MyViewerTopComponent</code> from the My Viewer project, in the editor. Switch to Source view if not already selected.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Replace the <code>resultChanged()</code> listener method with the following code:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Override
public void resultChanged(LookupEvent lookupEvent) {
    Collection&lt;? extends Event&gt; allEvents = result.allInstances();
    if (!allEvents.isEmpty()) {
        StringBuilder text1 = new StringBuilder();
        StringBuilder text2 = new StringBuilder();
        for (Iterator i = allEvents.iterator(); i.hasNext();) {
            Event o = (Event) i.next();
            text1.append(o.getIndex());
            text2.append(o.getDate().toString());
            if (i.hasNext()) {
                text1.append(',');
                text2.append(',');
            }
        }
        jLabel1.setText(text1.toString());
        jLabel2.setText(text2.toString());
    } else {
        jLabel1.setText("[no selection]");
        jLabel2.setText("");
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As usual, fix imports.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Clean and Build, and Run again.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>So you can see that the <code>Lookup</code> created by <code>ExplorerUtils</code> handle not only proxies the <code>Lookup</code> of whatever <code>Node</code> is selected; it also correctly proxies the <code>Lookup</code> for multiple selected entries.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/selection-2_multiselect1.png" alt="selection 2 multiselect1">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_review_of_concepts"><a class="anchor" href="#_review_of_concepts"></a>Review of Concepts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To review a few of the concepts you&#8217;ve covered here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>Lookup</code> is like a <code>Map</code> where the keys are classes and the values are instances of those classes. It&#8217;s also useful to think of a <code>Lookup</code> as a <em>place</em> that objects swim into and out of, and you can subscribe to be notified of the arrival and departure of specific types of object.</p>
</li>
<li>
<p><code>Utilities.actionsGlobalContext()</code> is a <code>Lookup</code> which proxies the <code>Lookup</code> of whichever <code>TopComponent</code> currently has keyboard focus, and fires changes when focus moves to a different component.</p>
</li>
<li>
<p>A <code>Node</code> is a presentation object that can be displayed in a tree, list or other component from the Explorer API. Each <code>Node</code> has its own <code>Lookup</code>.</p>
</li>
<li>
<p>Just as <code>Utilities.actionsGlobalContext</code> proxies the <code>Lookup</code> of TopComponents (so you can just ask that lookup for a result and listen for changes in it, rather than having to track focus changes yourself), the <code>Lookup</code> created by <code>ExplorerUtils.createLookup(ExplorerManager, ActionMap)</code> will create a <code>Lookup</code> which automatically proxies the <code>Lookup</code> of whatever <code>Node</code>(s) are selected in an Explorer component.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="../../../../front/main/community/mailing-lists/" class="xref page">Send Us Your Feedback</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_steps"><a class="anchor" href="#_next_steps"></a>Next Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>So you now have a view that can display <code>Node</code> s that expose some underlying model object (<code>Event</code> in your case). In the  <a href="../nbm-nodesapi2/" class="xref page">next tutorial</a>, you will cover how to enhance the Nodes you have already created with actions, properties and more colorful display names.</p>
</div>
</div>
</div>
        <section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        <li><a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/tutorials/nbm-selection-2.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>
    </div>
        <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="../../../../_/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/about">About</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/who">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/community">Community</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/mailing-lists">Mailing lists</a></li>
              <li><a href="../../../../front/main/community/committer">Becoming a committer</a></li>
              <li><a href="../../../../front/main/community/events">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/participate">Participate</a></h1>
            <ul>
              <li><a href="../../../../front/main/participate/submit-pr">Submitting Pull Requests</a></li>
              <li><a href="../../../../front/main/participate/report-issue">Reporting Issues</a></li>
              <li><a href="../../../../front/main/participate/#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/help">Get Help</a></h1>
            <ul>
              <li><a href="../../../../front/main/help/#documentation">Documentation</a></li>
              <li><a href="../../../../wiki/main/wiki">Wiki</a></li>
              <li><a href="../../../../front/main/help/#support">Community Support</a></li>
              <li><a href="../../../../front/main/help/commercial-support">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/download">Download</a></h1>
            <ul>
              <li><a href="../../../../front/main/download">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="../../../../front/main/download/#_daily_builds_and_building_from_source">Building from source</a></li>
              <li><a href="../../../../front/main/download/#_older_releases">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
      </div>
    </div>

    
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
    <script src="../../../../_/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../../../_/js/vendor/what-input.js"></script>
    <script src="../../../../_/js/vendor/foundation.min.js"></script>
    <script src="../../../../_/js/vendor/jquery.colorbox-min.js"></script>
    <script src="../../../../_/js/netbeans.js"></script>
    <script>
       $(function(){ $(document).foundation(); });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
      $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); });
    </script>
  </body>
</html>
