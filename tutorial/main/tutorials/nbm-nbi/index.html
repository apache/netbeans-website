<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NetBeans Platform Installer Integration Tutorial</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NetBeans Platform Installer Integration Tutorial - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="description" content="NetBeans Platform Installer Integration Tutorial - Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, NetBeans Platform Installer Integration Tutorial">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="../../../../_/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="../../../../_/css/highlight-11.9.0.default.min.css">
    <link rel="stylesheet" href="../../../../_/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../_/images/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../_/images/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../_/images/fav/favicon-16x16.png">
    <link rel="manifest" href="../../../../_/images/fav/site.webmanifest">
    <link rel="mask-icon" href="../../../../_/images/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="../../../../_/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="../../../../index.html"><img src='../../../../_/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <input id="search-input" type="text" placeholder="Search the docs"> </li>
            <li> <a href="../../../../front/main/community">Community</a> </li>
            <li> <a href="../../../../front/main/participate">Participate</a> </li>
            <li> <a href="../../../../front/main/blogs">Blog</a></li>
            <li> <a href="../../../../front/main/help">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="../../../../front/main/download">Download</a> </li>
        </ul>
    </div>
</div>

    <!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 23</h1>
            <p><a class="button success" href="../../../../front/main/download/nb23">Download</a></p>
        </div>
    </div>
</section>
    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">NetBeans Platform Installer Integration Tutorial</h1>
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/tutorials/nbm-nbi.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="../../../../tutorial/main/kb/docs/contributing">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_generating_and_using_the_default_installer">Generating and Using the Default Installer</a>
<ul class="sectlevel2">
<li><a href="#_generating_the_default_installer">Generating the Default Installer</a></li>
<li><a href="#_using_the_default_installer">Using the Default Installer</a></li>
</ul>
</li>
<li><a href="#_customizing_the_installation_wizard">Customizing the Installation Wizard</a>
<ul class="sectlevel2">
<li><a href="#_customizing_the_wizard_images">Customizing the Wizard Images</a></li>
<li><a href="#_customizing_the_wizard_texts">Customizing the Wizard Texts</a></li>
<li><a href="#_customizing_the_wizard_size">Customizing the Wizard Size</a></li>
<li><a href="#_customizing_the_wizard_destination_directory">Customizing the Wizard Destination Directory</a></li>
<li><a href="#_customizing_the_wizard_panels">Customizing the Wizard Panels</a></li>
</ul>
</li>
<li><a href="#_bundling_additional_resources">Bundling Additional Resources</a>
<ul class="sectlevel2">
<li><a href="#_bundling_glassfish">Bundling GlassFish</a></li>
<li><a href="#_bundling_the_jre">Bundling the JRE</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In this tutorial, you learn how to use the infrastructure of the NetBeans IDE installer to generate and customize an installer for your own NetBeans Platform application.</p>
</div>
<div class="paragraph">
<p><strong>Background Reading</strong></p>
</div>
<div class="paragraph">
<p>This tutorial is derived from the following sources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../../../../wiki/main/wiki/NBI/" class="xref page">NBI</a></p>
</li>
<li>
<p><a href="http://installer.netbeans.org/docs/nbi-devguide.html">http://installer.netbeans.org/docs/nbi-devguide.html</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_generating_and_using_the_default_installer"><a class="anchor" href="#_generating_and_using_the_default_installer"></a>Generating and Using the Default Installer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, you set up the Paint Application, which is one of the sample applications distributed with NetBeans IDE, and generate the default NetBeans installer for it.</p>
</div>
<div class="sect2">
<h3 id="_generating_the_default_installer"><a class="anchor" href="#_generating_the_default_installer"></a>Generating the Default Installer</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Go to File | New Project and go to Samples | NetBeans Modules, where you will find the Paint Application:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_paint-app-1.png" alt="nbi 721 paint app 1">
</div>
</div>
<div class="paragraph">
<p>Complete the wizard and you should see the Paint Application in the Projects window.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Right-click the application, choose Properties, and then go to the Installer tab. Select the operating systems for which you&#8217;d like to create installers, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_paint-app-2.png" alt="nbi 721 paint app 2">
</div>
</div>
<div class="paragraph">
<p>Specify whether you want to compress the installer and then click OK.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Right-click the application and choose Package as | Installers, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_paint-app-3.png" alt="nbi 721 paint app 3">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The process that creates installers can take a long time, especially if you specified that multiple installers should be created. Use the Output window to follow the creation process.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Switch to the Files window, expand the application&#8217;s "dist" folder, and you should see one or more installers that have been generated, together with a ZIP distribution of the application:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_paint-app-4.png" alt="nbi 721 paint app 4">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_the_default_installer"><a class="anchor" href="#_using_the_default_installer"></a>Using the Default Installer</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Right-click the installer and choose "Open in System", as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_paint-app-5.png" alt="nbi 721 paint app 5">
</div>
</div>
<div class="paragraph">
<p>Alternatively, if the above instruction does not work in your operating system, leave NetBeans IDE, go into your filesystem outside the IDE, and launch the installer in the standard way applicable to your operating system.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>After a moment, you should see the first panel of the installer wizard, as shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_paint-app-6.png" alt="nbi 721 paint app 6">
</div>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the second panel, specify a location where the application will be installed, together with whether a desktop icon and a start menu entry should be created:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_paint-app-7.png" alt="nbi 721 paint app 7">
</div>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>In the third panel, you are shown a summary prior to the installation starting:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_paint-app-8.png" alt="nbi 721 paint app 8">
</div>
</div>
<div class="paragraph">
<p>Click Install. You are shown the progression of the installation procedure:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_paint-app-9.png" alt="nbi 721 paint app 9">
</div>
</div>
<div class="paragraph">
<p>When the installation is complete, the panel below is shown:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_paint-app-1a.png" alt="nbi 721 paint app 1a">
</div>
</div>
<div class="paragraph">
<p>Now that you have learned how to create and use the default installer, let&#8217;s customize it!</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_customizing_the_installation_wizard"><a class="anchor" href="#_customizing_the_installation_wizard"></a>Customizing the Installation Wizard</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, you configure the NetBeans Installation (nbi) infrastructure in various ways. Then, when you generate the installer again, as shown in the previous section, your configurations will automatically be applied. The nbi infrastructure is a standard part of every NetBeans IDE installation, as shown in the screenshot below, and is always found within the NetBeans IDE installation directory&#8217;s "harness" subdirectory:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_favorites-view.png" alt="nbi 721 favorites view">
</div>
</div>
<div class="paragraph">
<p>Below, you are shown how to change the installer&#8217;s images, texts, size, destination directory, and panels. After you make a change, regenerate the installer to see the impact of your changes.</p>
</div>
<div class="sect2">
<h3 id="_customizing_the_wizard_images"><a class="anchor" href="#_customizing_the_wizard_images"></a>Customizing the Wizard Images</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the "harness/nbi" folder, go to "stub/ext/engine", which is the folder shown in the screenshot below. Then continue expanding the folders until you find the images shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_customize-icons-1.png" alt="nbi 721 customize icons 1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Replace the images with your own images and then generate the installer again, following the instructions in the previous section.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_customizing_the_wizard_texts"><a class="anchor" href="#_customizing_the_wizard_texts"></a>Customizing the Wizard Texts</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the "harness/nbi" folder, go to "stub/ext/engine", which is the folder shown in the screenshot below. Then continue expanding the folders until you find the  <code>Bundle.properties</code>  file shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_customize-texts-1.png" alt="nbi 721 customize texts 1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Replace the texts with your own and then regenerate the installer, which is explained in the previous section.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_customizing_the_wizard_size"><a class="anchor" href="#_customizing_the_wizard_size"></a>Customizing the Wizard Size</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the "harness/nbi" folder, go to "stub/ext/engine", which is the folder shown in the screenshot below. Then continue expanding the folders until you find the  <code>engine.properties</code>  file shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_customize-sizes-1.png" alt="nbi 721 customize sizes 1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Replace the sizes with your own and then regenerate the installer, which is explained in the previous section.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_customizing_the_wizard_destination_directory"><a class="anchor" href="#_customizing_the_wizard_destination_directory"></a>Customizing the Wizard Destination Directory</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the "harness/nbi" folder, go to "stub/ext/infra", which is the folder shown in the screenshot below. Then continue expanding the folders until you find the  <code>build.properties</code>  file shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_customize-destinationdir-1.png" alt="nbi 721 customize destinationdir 1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Replace the values of the  <code>product.properties</code>  keys with your own and then regenerate the installer, which is explained in the previous section.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_customizing_the_wizard_panels"><a class="anchor" href="#_customizing_the_wizard_panels"></a>Customizing the Wizard Panels</h3>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the "harness/nbi" folder, go to "stub/ext/components", which is the folder shown in the screenshot below. Then continue expanding the folders until you find the  <code>HelloWorldPanel.java</code>  and the  <code>wizard.xml</code>  file shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_customize-panels-1.png" alt="nbi 721 customize panels 1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Create new panels and register them in the  <code>wizard.xml</code>  file or unregister panels by removing their registration entries found in the  <code>wizard.xml</code>  file.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now that you have learned how to customize the default installer, let&#8217;s add additional resources to it!</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bundling_additional_resources"><a class="anchor" href="#_bundling_additional_resources"></a>Bundling Additional Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, you learn how to bundle additional resources together with your installer.</p>
</div>
<div class="sect2">
<h3 id="_bundling_glassfish"><a class="anchor" href="#_bundling_glassfish"></a>Bundling GlassFish</h3>
<div class="paragraph">
<p>Some NetBeans Platform applications use GlassFish in one way or another. Using the instructions below, you can bundle GlassFish with your installer and add a new panel to the installer wizard so that users can specify where and how GlassFish should be installed.</p>
</div>
<div class="paragraph">
<p>These instructions can be applied to any other tool or application that should be bundled and installed together with your NetBeans Platform application–simply replace each instance of "GlassFish" below with the name of the tool or application you&#8217;d like to bundle with the installer of your NetBeans Platform application.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Start by creating a ZIP file of your installation of GlassFish. Somewhere on disk, you should have GlassFish installed. Remove any domain folders you have there, since the procedure that follows will result in a "domain1" domain automatically being created at the time when the installer finished.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you have some custom libraries that GlassFish will need, simply include them in the appropriate folders in GlassFish before you ZIP it up. That means you&#8217;ll be providing a custom GlassFish distribution tailor made for the application you&#8217;ve created. Otherwise, ZIP up the default standard GlassFish distribution and the user will have that when they complete the installer.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Put the ZIP file anywhere on disk, such as in the home directory. Later, your ZIP file will be located by the nbi infrastructure, unzipped, and packed into the installer, once you choose "Package as | Installers" in the IDE.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the  <code>components</code>  folder and the  <code>infra</code>  folder, find the  <code>helloworld</code>  folders, shown below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_bundle-glassfish-1.png" alt="nbi 721 bundle glassfish 1">
</div>
</div>
<div class="paragraph">
<p>Copy the  <code>helloworld</code>  folders, one by one, and paste them in the same folders where the  <code>helloworld</code>  folders are found. Name both new folders  <code>glassfish</code> , as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_bundle-glassfish-2.png" alt="nbi 721 bundle glassfish 2">
</div>
</div>
<div class="paragraph">
<p>Depending on the operating system you&#8217;re using, make sure you have write permission for the folders into which you&#8217;re copying, otherwise you will not be able to complete the copy action. To fix this, go outside the IDE to the folder in your filesystem and fix the permissions set on the folder so that you have write permission.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In  <code>nbi/build.xml</code> , include  <code>glassfish</code>  in the  <code>-clean</code>  and  <code>-build</code>  targets. Do this by copying the  <code>helloworld</code>  equivalents and replacing  <code>helloworld</code>  references with  <code>glassfish</code>  references. In the same file, change  <code>create-bundle</code>  so that  <code>glassfish</code>  is included, as highlighted below:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;create-bundle root="${output.dir}/registry-temp"
           platform="${platform}"
           target="${bundles.release.dir}/${bundle.files.prefix}-${platform}.${bundle.extention}"&gt;
    &lt;component uid="${main.product.uid}" version="1.0.0.0.0"/&gt;
    *&lt;component uid="glassfish" version="1.0.0.0.0"/&gt;*
&lt;/create-bundle&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>In  <code>nbi/stub/ext/infra/products/glassfish</code> , open  <code>build.properties</code>  and change the value of  <code>product.data.1.path</code>  so that it points to the location on disk of your GlassFish ZIP file. In the same file, change the value of  <code>product.uid</code>  to  <code>glassfish</code> .</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you regenerate the installer, as explained in the previous section, your GlassFish ZIP file will be included in the installer. When you run the installer, a new panel will be shown for installing GlassFish. When the wizard is complete, GlassFish will be installed, together with the application.</p>
</div>
</div>
<div class="sect2">
<h3 id="_bundling_the_jre"><a class="anchor" href="#_bundling_the_jre"></a>Bundling the JRE</h3>
<div class="paragraph">
<p>In many cases, the users of your NetBeans Platform application may not have a Java runtime environment (JRE) installed on their system. As a result, they will not be able to start your NetBeans Platform application, in fact, they will not even be able to start your installer, and will need to download and configure the JRE manually. To help your users, you can bundle the JRE with the installer and create the installer and the NetBeans Platform application in such a way that they will automatically use the bundled JRE when starting up.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The instructions below apply to Windows. For Unix systems, refer to  <a href="http://netbeans.dzone.com/including-jre-in-nbi">Including the JRE in a NetBeans Platform Installer on Ubuntu Linux</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Preparing the JRE</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Go to your JDK installation and copy the JRE somewhere else, separately, so that you don&#8217;t accidentally destroy the JDK you&#8217;re using to run Java programs, such as NetBeans IDE. For purposes of this tutorial, we will copy the folder "jre", from the JDK, to a new folder named "C:\AJava":</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_bundle-jre-1.png" alt="nbi 721 bundle jre 1">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>The  <code>C:\\AJava\jre\lib\rt.jar</code>  is large. In this step, we&#8217;re going to replace  <code>rt.jar</code>  with a compressed version of the same JAR. Go to C:\\AJava\jre\lib and run:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">pack200 -J-Xmx1024m rt.jar.pack.gz rt.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now go into C:\\AJava\jre\lib and delete the "rt.jar".</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Go to C:\\AJava\jre and select the "bin" folder and the "lib" folder. Right-click and ZIP the selected folders. You&#8217;ll end up with "jre.zip".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Put "unzipsfx.exe",  <a href="http://www.info-zip.org/pub/infozip/">which can you get here</a> or  <a href="../../../../wiki/main/netbeansdevelopperfaq/DevFaqAccessSourcesUsingMercurial/" class="xref page">by downloading the NetBeans sources</a> and then looking in the "nbi/infra/build/jvm/tools/unzipsfx" folder, into the same folder as where the "jre.zip" is found. Then, in the folder where "unzipsfx.exe" and "jre.zip" are found, run this:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">copy /B unzipsfx.exe + jre.zip jre.exe</code></pre>
</div>
</div>
<div class="paragraph">
<p>The result of the above is that you now have a "jre.exe" file, which is a self-extractable ZIP archive. To try it out, run it and then you&#8217;ll find the "jre" installed on your system. We now need to bundle this "jre.exe" into the installer, via the Ant script that configures the installer, as outlined in the steps that follow.</p>
</div>
<div class="paragraph">
<p><strong>Configuring the NetBeans Installer Infrastructure</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Replace "create-bundle" in the "build.xml" found in the IDE&#8217;s "harness/nbi/stub" folder with the following:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;create-bundle root="${output.dir}/registry-temp" platform="${platform}"
       target="${bundles.release.dir}/${bundle.files.prefix}-${platform}.${bundle.extention}"&gt;
    &lt;component uid="${main.product.uid}" version="1.0.0.0.0"/&gt;
    *&lt;property name="nbi.bundled.jvm.file" value="C:\\AJava\jre\jre.exe"/&gt;*
&lt;/create-bundle&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Depending on the operating system you&#8217;re using, make sure you have write permission for the above file, otherwise you will not be able to make changes to it. To fix this, go outside the IDE to the file in your filesystem and fix the permissions set on the file so that you have write permission.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Put this right at the end of "install(Progress progress)" in ConfigurationLogic.java, which is within "harness/nbi/stub/ext/components/products/helloworld/src/org/mycompany":</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">File javaHome = new File(System.getProperty("java.home"));
File target = new File(installLocation, "jre");
try {
    FileUtils.copyFile(javaHome, target, true); //FileUtils is one of the NBI core classes, already imported
} catch (IOException e) {
    throw new InstallationException("Cannot copy JRE",e);
}

// to add uninstaller logic:
SystemUtils.getNativeUtils().addUninstallerJVM(new LauncherResource(false, target));</code></pre>
</div>
</div>
<div class="paragraph">
<p>And, in the "uninstall(Progress progress)" method, add this right before the last statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">File jre = new File(installLocation, "jre");
if (jre.exists()) {
    try {
        for (File file : FileUtils.listFiles(jre).toList()) {
            FileUtils.deleteOnExit(file);
        }
        FileUtils.deleteOnExit(installLocation);
    } catch (IOException e) {
        //ignore
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Add this to the import statement section at the top of the file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.netbeans.installer.utils.system.launchers.LauncherResource;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You will see compilation errors, i.e., red error marks, throughout the code. That is because you have not opened the code as projects into the IDE. Don&#8217;t worry, the code will compile once you regenerate the installer later in this tutorial.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Depending on the operating system you&#8217;re using, make sure you have write permission for the above file, otherwise you will not be able to make changes to it. To fix this, go outside the IDE to the file in your filesystem and fix the permissions set on the file so that you have write permission.</p>
</div>
<div class="paragraph">
<p>You have now specified how and when the "jre" will be installed by the installer wizard.</p>
</div>
<div class="paragraph">
<p><strong>Configuring the NetBeans Platform Application to Use the Bundled JRE</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In your application, e.g., in "nbproject" of your application, create a ".conf" file with. For example, for purposes of this tutorial, switch to the Files window, right-click on the Paint Application&#8217;s "nbproject" folder, and choose New | Other and then select Other | Empty File. Click Next, type "paintit.conf", and click Finish. You should now see this:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_bundle-jre-2.png" alt="nbi 721 bundle jre 2">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Paste the content below into the  <code>paintit.conf</code>  file. As you can see below, you need to make sure that the  <code>jdkhome</code>  key has its value set to "jre", which is the folder relative to the installation directory where your bundled JRE will be unpacked:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">default_userdir="C://paintit"
default_cachedir="C://paintit"
default_options="-J-client -J-Xss2m -J-Xms32m -J-XX:PermSize=32m -J-ea"
jdkhome="jre"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Read about  <a href="../../../../wiki/main/wiki/FaqWhatIsUserdir/" class="xref page">userdir &amp; cachedir</a> in the NetBeans Wiki.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Register the conf file in the application&#8217;s "project.properties" file, i.e., in the same file where  <code>app.name</code>  is defined, like this:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">app.conf=nbproject/paintit.conf</code></pre>
</div>
</div>
<div class="paragraph">
<p>The  <code>paintit.conf</code>  file needs to be defined relative to the application root folder. In this case, we have put the file within the "nbproject" folder, which has as its parent the application root folder. Now you have specified that the application will use the configuration file that you have provided, within which the bundled JRE is defined as the JRE to be used for starting up the application.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Regenerate the installer, as explained in the previous section, and the installer will be created, as always. However, when you run the installer, the JRE will be unbundled into a temp folder and the installer will use that JRE to run itself. A copy of the JRE will be made to a folder named "jre" within the root folder of your application, where the "jdkhome" setting in the .conf file of the application points. For the Paint Application, you should now see the following:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/nbi_721_bundle-jre-3.png" alt="nbi 721 bundle jre 3">
</div>
</div>
<div class="paragraph">
<p>Run the application via the executable in the "bin" folder and the JRE within the application root folder will be used to start it.</p>
</div>
<div class="paragraph">
<p>Now that you have learned how to create, customize, and bundle additional resources with the NetBeans installer, read the resources below for many additional details and other information that may be relevant to your business needs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../../../../wiki/main/wiki/NBI/" class="xref page">NBI</a></p>
</li>
<li>
<p><a href="http://installer.netbeans.org/docs/nbi-devguide.html">http://installer.netbeans.org/docs/nbi-devguide.html</a></p>
</li>
<li>
<p><a href="../../../../front/main/community/mailing-lists/" class="xref page">Send Us Your Feedback</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
        <section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        <li><a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/tutorials/nbm-nbi.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>
    </div>
        <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="../../../../_/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/about">About</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/who">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/community">Community</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/mailing-lists">Mailing lists</a></li>
              <li><a href="../../../../front/main/community/committer">Becoming a committer</a></li>
              <li><a href="../../../../front/main/community/events">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/participate">Participate</a></h1>
            <ul>
              <li><a href="../../../../front/main/participate/submit-pr">Submitting Pull Requests</a></li>
              <li><a href="../../../../front/main/participate/report-issue">Reporting Issues</a></li>
              <li><a href="../../../../front/main/participate/#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/help">Get Help</a></h1>
            <ul>
              <li><a href="../../../../front/main/help/#documentation">Documentation</a></li>
              <li><a href="../../../../wiki/main/wiki">Wiki</a></li>
              <li><a href="../../../../front/main/help/#support">Community Support</a></li>
              <li><a href="../../../../front/main/help/commercial-support">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/download">Download</a></h1>
            <ul>
              <li><a href="../../../../front/main/download">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="../../../../front/main/download/#_daily_builds_and_building_from_source">Building from source</a></li>
              <li><a href="../../../../front/main/download/#_older_releases">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2024 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
      </div>
    </div>

    
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
    <script src="../../../../_/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../../../_/js/vendor/what-input.js"></script>
    <script src="../../../../_/js/vendor/foundation.min.js"></script>
    <script src="../../../../_/js/vendor/jquery.colorbox-min.js"></script>
    <script src="../../../../_/js/netbeans.js"></script>
    <script>
       $(function(){ $(document).foundation(); });
    </script>
    <script src="../../../../_/js/vendor/highlight-11.9.0.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', (event) => {
         document.querySelectorAll('pre code').forEach((el) => {
         hljs.highlightElement(el);
        });
      });
    </script>
  </body>
</html>
