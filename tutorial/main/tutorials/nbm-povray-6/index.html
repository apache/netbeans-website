<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Writing POV-Ray Support for NetBeans VI—Implementing the API</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Writing POV-Ray Support for NetBeans VI—Implementing the API - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans Platform, Platform Tutorials, Writing POV-Ray Support for NetBeans VI—Implementing the API">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="../../../../_/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    <link rel="stylesheet" href="../../../../_/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../_/images/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../_/images/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../_/images/fav/favicon-16x16.png">
    <link rel="manifest" href="../../../../_/images/fav/site.webmanifest">
    <link rel="mask-icon" href="../../../../_/images/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="../../../../_/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="../../../../index.html"><img src='../../../../_/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <input id="search-input" type="text" placeholder="Search the docs"> </li>
            <li> <a href="../../../../front/main/community">Community</a> </li>
            <li> <a href="../../../../front/main/participate">Participate</a> </li>
            <li> <a href="../../../../front/main/blogs">Blog</a></li>
            <li> <a href="../../../../front/main/help">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="../../../../front/main/download">Download</a> </li>
        </ul>
    </div>
</div>

    <!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="../../../../front/main/download/nb19">Download</a></p>
        </div>
    </div>
</section>
    <div class='grid-container main-content tutorial'>
      <h1 class="sect0">Writing POV-Ray Support for NetBeans VI—Implementing the API</h1>
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/tutorials/nbm-povray-6.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="../../../../tutorial/main/kb/docs/contributing">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
        <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_implementing_mainfileprovider">Implementing MainFileProvider</a></li>
<li><a href="#_implementing_rendererserviceproviding_default_renderer_settings">Implementing RendererService—Providing Default Renderer Settings</a></li>
<li><a href="#_implementing_rendererservicebasic_implementation">Implementing RendererService—Basic Implementation</a></li>
<li><a href="#_providing_render_actions_on_pov_ray_files">Providing Render Actions on POV-Ray Files</a></li>
<li><a href="#_implementing_setmainfileaction">Implementing SetMainFileAction</a></li>
<li><a href="#_locating_the_pov_ray_executable">Locating the POV-Ray Executable</a></li>
<li><a href="#_next_steps">Next Steps</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This is a continuation of the tutorial for building a POV-Ray rendering application on the NetBeans Platform. If you have not read the  <a href="../nbm-povray-1/" class="xref page">first</a>,  <a href="../nbm-povray-2/" class="xref page">second</a>,  <a href="../nbm-povray-3/" class="xref page">third</a>,  <a href="../nbm-povray-4/" class="xref page">fourth</a>, and  <a href="../nbm-povray-5/" class="xref page">fifth</a> parts of this tutorial, you may want to start there.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementing_mainfileprovider"><a class="anchor" href="#_implementing_mainfileprovider"></a>Implementing MainFileProvider</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The first class we will implement is <code>MainFileProvider</code>. This is the class that our `Node`s for POV-Ray files will look up, to see if they represent the main scene file of the project (if so, they will display their name in boldface text, and later this will be used to provide actions to set which file is the main file).</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>In the Povray Project module, add the key for the main file to the top of the  <code>PovrayProject</code>  class:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public static final String KEY_MAINFILE = "main.file";</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>In the Povray Project module, create a new Java class in the package <code>org.netbeans.examples.modules.povproject</code>, and call it "MainFileProviderImpl".</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Implement it as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">class MainFileProviderImpl extends MainFileProvider {

    private final PovrayProject proj;

    private FileObject mainFile = null;

    private boolean checked = false;

    MainFileProviderImpl(PovrayProject proj) {
        this.proj = proj;
    }

    @Override
    public FileObject getMainFile() {
        //Try to look up the main file in the project properties
        //the first time this is called;  no need to look it up every
        //time, either it's there or it's not and when the user sets it
        //we'll save it when the project is closed
        if (mainFile == null &amp;amp;&amp;amp; !checked) {
            checked = true;
            Properties props = (Properties) proj.getLookup().lookup(Properties.class);
            String path = props.getProperty(PovrayProject.KEY_MAINFILE);
            if (path != null) {
                FileObject projectDir = proj.getProjectDirectory();
                mainFile = projectDir.getFileObject(path);
            }
        }
        if (mainFile != null &amp;amp;&amp;amp; !mainFile.isValid()) {
            return null;
        }
        return mainFile;
    }

    @Override
    public void setMainFile(FileObject file) {
        String projPath = proj.getProjectDirectory().getPath();
        assert file == null ||
                file.getPath().startsWith(projPath) :
                "Main file not under project";
        boolean change = ((mainFile == null) != (file == null)) ||
                (mainFile != null &amp;amp;&amp;amp; !mainFile.equals(file));
        if (change) {
            mainFile = file;
            //Get the project properties (loaded from
            //$PROJECT/pvproject/project.properties)
            Properties props = (Properties) proj.getLookup().lookup(
                    Properties.class);
            //Store the relative path from the project root as the main file
            String relPath = file.getPath().substring(projPath.length());
            props.put(PovrayProject.KEY_MAINFILE, relPath);
        }
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The code above is simple and quite straightforward—it will look for a <code>Properties</code> object in the <code>Lookup</code> of the project. The getter will look for the value of "main.file" from the <code>Properties</code> object (which was loaded from <code>$PROJECT/pvproject/project.properties</code>), which will be a relative path to the main file. If there is a value for that key, try to find the corresponding file and return it. The setter, in turn, will write a new relative path to the <code>Properties</code> object. That in turn, will cause the project to be marked as modified, so the system will call <code>PovProjectFactory.saveProject()</code> if it is unloading the project, causing the <code>Properties</code> to be written out to disk in <code>$PROJECT/pvproject/project.properties</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Add <code>new MainFileProviderImpl(this)</code> to the implementation of <code>getLookup()</code> in <code>PovrayProject</code>, so that it is included in the array of objects that make up the lookup contents:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Override
public Lookup getLookup() {
    if (lkp == null) {
        lkp = Lookups.fixed(new Object[]{
                    this, //handy to expose a project in its own lookup
                    state, //allow outside code to mark the project as needing saving
                    new ActionProviderImpl(), //Provides standard actions like Build and Clean
                    loadProperties(), //The project properties
                    new Info(), //Project information implementation
                    logicalView, //Logical view of project implementation
                    *new MainFileProviderImpl(this)*
                });
    }
    return lkp;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementing_rendererserviceproviding_default_renderer_settings"><a class="anchor" href="#_implementing_rendererserviceproviding_default_renderer_settings"></a>Implementing RendererService—Providing Default Renderer Settings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The next class to implement is <code>RendererService</code>—this is the service, belonging to the project, by which a project will be "compiled" into an image (by executing the POV-Ray program and passing it arguments).</p>
</div>
<div class="paragraph">
<p>As we discussed  <a href="../nbm-povray-2/" class="xref page">earlier</a>, we are not going to try to implement a complicated dialog that makes every possible POV-Ray setting adjustable via a GUI widget—this would add a lot of complexity when many users would be satisfied with a reasonable set of defaults. So we will have a set of different default combinations of settings that should satisfy most users. Later we will add the ability to create completely customized settings by editing the <code>project.properties</code> of a POV-Ray project, to satisfy the needs of power users.</p>
</div>
<div class="paragraph">
<p>Right now, we will not worry about the execution part—<code>RendererService</code> also provides for named sets of settings—combinations of line switches which should be passed to POV-Ray to determine rendering quality, image size and speed. Right now we will only implement that part of <code>RendererService</code>.</p>
</div>
<div class="paragraph">
<p>This is where we will begin dealing directly with the System Filesystem—the registry of runtime data supplied by modules. What we will do is create <code>.properties</code> files for each set of standard settings we will supply. We will start by creating <code>.properties</code> files for each set of settings in our module.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Create a new Java Package in the Povray Project project, <code>org.netbeans.examples.modules.povproject.defaults</code>. This is where we will put our properties files.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
Create six properties files with the following contents in that package:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>160x100.properties</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">W=160
H=100
Q=4
FN=8
A=0.0</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>320x200.properties</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">W=320
H=200
Q=4
FN=8
A=0.0</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>640x480.properties</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">W=640
H=480
Q=4
FN=8
A=0.0</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>640x480hq.properties</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">W=640
H=480
Q=R
FN=8
A=0.9</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>1024x768.properties</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">W=1024
H=768
Q=4
FN=9
A=0.0</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>1024x768hq.properties</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">W=1024
H=768
Q=R
FN=8
A=0.9</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Next, we will want to actually add these to the System Filesystem, so our module can find them at runtime, and more importantly, so other modules can modify and save, or add additional, sets of default settings by adding more properties files to the same folder we put these files in, in the System Filesystem.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Right-click the Povray Project project and choose New | Other | Module Development | XML Layer. Then click Next and Finish. The IDE creates the  <code>layer.xml</code>  file and registers it in the project&#8217;s manifest. Open the newly created  <code>layer.xml</code>  file in the code editor.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Replace the content of the  <code>layer.xml</code>  file with the content below.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE filesystem PUBLIC "-//NetBeans//DTD Filesystem 1.2//EN" "https://netbeans.org/dtds/filesystem-1_2.dtd"&gt;
&lt;filesystem&gt;

    &lt;folder name="Povray"&gt;

        &lt;folder name="RendererSettings"&gt;

        &lt;!-- Declare a file, with its content provided by the URL.  This
                 will be the command line arguments for 1024x768 high quality
                 rendering --&gt;
            &lt;file name="1024x768hq.properties" url="defaults/1024x768hq.properties"&gt;
                &lt;attr name="SystemFileSystem.localizingBundle"
                  stringvalue="org.netbeans.examples.modules.povproject.defaults.Bundle"/&gt;
            &lt;/file&gt;
        &lt;!-- This is an ordering attribute, it determines that the
                 DataFolder (but *not* the FileObject) for this folder will return
                 its child DataObjects (and thus also its Node's children) in
                 a specific order—in this case we are specifying that
                 1024x768hq must come before 1024x768.properties. --&gt;
            &lt;attr name="1024x768hq.properties/1024x768.properties" boolvalue="true"/&gt;

            &lt;file name="1024x768.properties" url="defaults/1024x768.properties"&gt;
                &lt;attr name="SystemFileSystem.localizingBundle"
                  stringvalue="org.netbeans.examples.modules.povproject.defaults.Bundle"/&gt;
            &lt;/file&gt;

            &lt;attr name="1024x768.properties/640x480hq.properties" boolvalue="true"/&gt;
            &lt;file name="640x480hq.properties" url="defaults/640x480hq.properties"&gt;
                &lt;attr name="SystemFileSystem.localizingBundle"
                  stringvalue="org.netbeans.examples.modules.povproject.defaults.Bundle"/&gt;
            &lt;/file&gt;

            &lt;attr name="640x480hq.properties/640x480.properties" boolvalue="true"/&gt;
            &lt;file name="640x480.properties" url="defaults/640x480.properties"&gt;
                &lt;attr name="SystemFileSystem.localizingBundle"
                  stringvalue="org.netbeans.examples.modules.povproject.defaults.Bundle"/&gt;
            &lt;/file&gt;

            &lt;attr name="640x480.properties/320x200.properties" boolvalue="true"/&gt;
            &lt;file name="320x200.properties" url="defaults/320x200.properties"&gt;
                &lt;attr name="SystemFileSystem.localizingBundle"
                  stringvalue="org.netbeans.examples.modules.povproject.defaults.Bundle"/&gt;
            &lt;/file&gt;

            &lt;attr name="320x200.properties/160x100.properties" boolvalue="true"/&gt;
            &lt;file name="160x100.properties" url="defaults/160x100.properties"&gt;
                &lt;attr name="SystemFileSystem.localizingBundle"
                  stringvalue="org.netbeans.examples.modules.povproject.defaults.Bundle"/&gt;
            &lt;/file&gt;

        &lt;/folder&gt;

    &lt;/folder&gt;

&lt;/filesystem&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>What this XML does is map the properties files we just created into the system filesystem in the folder <code>Povray/RendererSettings</code>, which is where our code will look for them. Additionally, it specifies <em>ordering attributes</em>, which are attributes we are adding to the folder <code>RendererSettings/</code>, which will determine what order the files will appear in when code asks for the array of children of the <code>DataFolder</code> (<code>DataObject</code> subclass for folders) or its Node for this folder.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>You may have noticed the attribute <code>SystemFilesystem.localizingBundle</code> which we added to the <code>RendererSettings</code> folder. NetBeans <code>FileObject`s (which is what the "files" in the System Filesystem are) can have ad-hoc key-value pairs associated with them. `SystemFilesystem.localizingBundle</code> is a magic attribute which the system will use to localize the names of files—all you have to do is get the <code>DataObject</code> for a file in the system filesystem, get the <code>Node</code> for that <code>DataObject</code>, and the return value of <code>Node.getDisplayName()</code> for that <code>Node</code> will look up its localized display name in the requested resource bundle—this is how file names for things declared in the System Filesystem are localized.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>So we need one <em>more</em> properties file in <code>org.netbeans.examples.modules.povproject.defaults</code>—create one called "Bundle". This one won&#8217;t contain renderer defaults, it will contain mappings from the file names of the files we declared above, to their localized, human friendly names.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Add the following contents to <code>Bundle.properties</code>:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Povray/RendererSettings/1024x768.properties=1024 x 768
Povray/RendererSettings/1024x768hq.properties=1024 x 768 High Quality
Povray/RendererSettings/640x480hq.properties=640 x 480 High Quality
Povray/RendererSettings/640x480.properties=640 x 480
Povray/RendererSettings/320x200.properties=320 x 200
Povray/RendererSettings/160x100.properties=160 x 100</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Make sure that you have the new files in the correct places, reflecting the structure in the image below:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/povray_71_ch6_pic1.png" alt="povray 71 ch6 pic1">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementing_rendererservicebasic_implementation"><a class="anchor" href="#_implementing_rendererservicebasic_implementation"></a>Implementing RendererService—Basic Implementation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now we have a set of default settings to show, so we can implement the methods of <code>RendererService</code> that will expose them.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Create a new class, <code>RendererServiceImpl</code>, in <code>org.netbeans.examples.modules.povproject</code>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Modify the class declaration to say that it extends <code>RendererService</code> and press Ctrl-Shift-I to fix imports and to generate stub implementations of the abstract methods. The result should be as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.netbeans.examples.modules.povproject;

import java.util.Properties;
import org.netbeans.examples.api.povray.RendererService;
import org.openide.filesystems.FileObject;

public class RendererServiceImpl extends RendererService {

    @Override
    public FileObject render(FileObject scene, String propertiesName) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public FileObject render(FileObject scene, Properties renderSettings) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public FileObject render(FileObject scene) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public FileObject render() {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public String[] getAvailableRendererSettingsNames() {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public Properties getRendererSettings(String name) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public String getPreferredRendererSettingsNames() {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public String getDisplayName(String settingsName) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>The first things we will do are implement the constructor and leave the render methods stubbed out—we will implement these later:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">private PovrayProject proj;

    public RendererServiceImpl(PovrayProject proj) {
        this.proj = proj;
    }

    PovrayProject getProject() {
        return proj;
    }</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Next, we will implement some private utility methods that the other methods will do. This should help to give some of the flavor of working with things in the system filesystem.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    private FileObject getRendererSettingsFolder() {
        String folderName = "Povray/RendererSettings";
        FileObject result = FileUtil.getConfigFile(folderName);
        if (result == null &amp;amp;&amp;amp; !logged) {
            //Corrupted userdir or something is very very wrong.
            //Log it and move on.
            Exceptions.printStackTrace(new IllegalStateException("Renderer settings dir missing!"));
            logged = true;
        }
        return result;
    }

    private static boolean logged = false;

    private FileObject fileFor (String settingsName) {
        FileObject settingsFolder = getRendererSettingsFolder();
        FileObject result;
        if (settingsFolder != null) { //should never be null
            result = settingsFolder.getFileObject(settingsName);
        } else {
            result = null;
        }
        return result;
    }

    private void setPreferredRendererSettingsName(String val) {
        getPreferences().put(KEY_PREFERRED_SETTINGS, val);
    }

    private static final String KEY_PREFERRED_SETTINGS = "preferredSettings";

    static Preferences getPreferences() {
        return Preferences.userNodeForPackage(RendererServiceImpl.class);
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first thing we have is a utility method that finds the folder we declared in our XML layer, in the System Filesystem—that is what <code>getRendererSettingsFolder()</code> does. You&#8217;ll note that there is a null check. This folder <strong>should</strong> not be null, since we are declaring it in our layer. But it conceivably could be (a corrupted settings directory or a module that for some reason hides the settings directory - it should not happen, but it is theoretically possible), so we log an exception if so, rather than throwing exceptions every time something goes and looks for a display name for a menu item or similar.</p>
</div>
<div class="paragraph">
<p>The next method is a utility method that just fetches the file corresponding to a file name—we are returning the names of all files in the settings folder, so this will allow us to find a corresponding properties file.</p>
</div>
<div class="paragraph">
<p>The last two methods are simply for saving the last-used set of renderer settings, and simply use the standard Java Preferences API.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>The next method we want to implement is <code>getAvailableRendererSettingsNames()</code>. This method will return an array of `String`s—the localized, human-friendly names of all of the files which we declared above:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    @Override
    public String[] getAvailableRendererSettingsNames() {
        FileObject settingsFolder = getRendererSettingsFolder();
        String[] result;
        if (settingsFolder != null) {
            //Use a DataFolder here, so our ordering attributes in the layer
            //file are applied, and our returned String array will be in the
            //order we want
            DataFolder fld = DataFolder.findFolder(settingsFolder);
            DataObject[] kids = fld.getChildren();
            result = new String[ kids.length ];
            for (int i = 0; i &lt; kids.length; i++) {
                result[i] = kids[i].getPrimaryFile().getNameExt();
            }
        } else {
            result = new String[0];
        }
        return result;
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is quite straightforward—we just iterate all of the files in the folder, and return an array of <code>String`s with their names. The one twist to it is that we don&#8217;t iterate the <em>`FileObject`</em>'s children, but rather we get a `DataFolder</code> (the <code>DataObject</code> type for filesystem folders), and iterate its children. The reason we do it this way is that the order of children of <code>FileObjects</code> is undefined—we might get the files we declared in any order. The <code>DataFolder</code>, however, understands <em>ordering attributes</em> - attributes we can declare in the XML of our layer file, which will determine what order a folder&#8217;s children are returned in. So this enables us to sort our settings files in an intuitive way—yet other modules could still insert additional settings, with their own ordering attributes, and they would be included in the sort (for more info on how and why this works, see the javadoc for  <a href="https://bits.netbeans.org/dev/javadoc/org-openide-util/org/openide/util/Utilities.html#topologicalSort(java.util.Collection,%20java.util.Map)">Utilities.topologicalSort()</a>).</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Next we will implement <code>getRendererSettings(name)</code>—this method will actually get a <code>Properties</code> object with the contents of whichever file name was passed to it:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    @Override
    public Properties getRendererSettings(String name) {
        Properties result = new Properties();
        FileObject settingsFile = fileFor (name);
        if (settingsFile != null) {
            try {
                result.load(new BufferedInputStream(settingsFile.getInputStream()));
            } catch (FileNotFoundException ex) {
                Exceptions.printStackTrace(ex);
            } catch (IOException ex) {
                Exceptions.printStackTrace(ex);
            }
        } else {
            Exceptions.printStackTrace(
		    new NullPointerException("Requested non-existent settings " +
                    "file " + name));
        }
        return result;
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The code here is also quite straightforward—it simply tries to load a <code>Properties</code> object from the input stream of the file in question.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Next we will implement the method that fetches the name of the preferred set of settings—this will be the most recently used settings, fetched from the Preferences API, with a fallback if none has yet been chosen:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    @Override
    public String getPreferredRendererSettingsName() {
        String result = getPreferences().get(KEY_PREFERRED_SETTINGS, null);
        if (result == null) {
            result = "640x480.properties";
        }
        return result;
    }</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>The last method we will implement takes a settings <em>file name</em> and converts it to a localized, human-readable name:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    @Override
    public String getDisplayName(String settingsName) {
        FileObject file = fileFor (settingsName);
        String result;
        if (file != null) {
            DataObject dob;
            try {
                dob = DataObject.find(file);
                result = dob.getNodeDelegate().getDisplayName();
            } catch (DataObjectNotFoundException ex) {
                Exceptions.printStackTrace(ex);
                result = "[error]";
            }
        } else {
            result = "";
        }
        return result;
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Human-readable display names are provided by <code>Nodes</code>—a <code>FileObject</code> is simply a file on disk (or similar storage such as the System Filesystem via our <code>layer.xml</code> file)—it has no notion of human readability. So if we want the <em>localized</em> name for a <code>FileObject</code>, we need to get the <code>Node</code> for it. In this case, the <code>Node</code> will use the hint we provided in the <code>layer.xml</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">&lt;attr name="SystemFileSystem.localizingBundle" stringvalue="org.netbeans.modules.povproject.defaults.Bundle"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and look up its localized name in <code>org.netbeans.examples.modules.povproject.defaults.Bundle.properties</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>As we did earlier with the  <code>MainFileProviderImpl</code> , we now need to expose our implementation of  <code>RendererService</code>  via the project&#8217;s lookup. Modify  <code>PovrayProject.getLookup()</code>  as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public Lookup getLookup() {
    if (lkp == null) {
        lkp = Lookups.fixed(new Object[] {
            this,  //handy to expose a project in its own lookup
            state, //allow outside code to mark the project as needing saving
            new ActionProviderImpl(), //Provides standard actions like Build and Clean
            loadProperties(), //The project properties
            new Info(), //Project information implementation
            logicalView, //Logical view of project implementation
            new MainFileProviderImpl(this), //So things can set the main file
            *new RendererServiceImpl(this), //Renderer Service Implementation*
        });
    }
    return lkp;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_providing_render_actions_on_pov_ray_files"><a class="anchor" href="#_providing_render_actions_on_pov_ray_files"></a>Providing Render Actions on POV-Ray Files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now we have an implementation of some of our API, the next step is to use it. As  <a href="../nbm-povray-2/" class="xref page">discussed earlier</a>, we want a user to be able to right-click and choose to render any file, not just the main file of the project. So there should be some menu items available from our `PovrayDataNode`s which will allow the user to render the file with one of our sets of settings.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Open <code>PovrayDataNode</code>, from the Povray File Support project, in the code editor</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
Press Ctrl-I (Command-I on Macintosh) and override the <code>getActions(boolean)</code> method. Implement it as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Override
public Action[] getActions (boolean popup) {
    Action[] actions = super.getActions(popup);
    RendererService renderer =
        (RendererService)getFromProject (RendererService.class);
    Action[] result;
    if (renderer != null &amp;amp;&amp;amp; actions.length &gt; 0) { //should always be &gt; 0
        Action rendererAction = new RendererAction (renderer, this);
        result = new Action[ actions.length + 2 ];
        result[0] = actions[0];
        result[1] = new SetMainFileAction();
        result[2] = rendererAction;
    } else {
        //Isolated file in the favorites window or something
        result = actions;
    }
    return result;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This method will add two (yet to be implemented) actions into the array of actions, if a renderer service for this file can be found. It positions them as the second and third elements in the array, since the first element is what will be invoked when you double click the file, and we want that to remain opening the file (we could also override <code>getPreferredAction()</code> to determine what happens when the node is doubled clicked).</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Now we need to implement RendererAction. Right-click the <code>org.netbeans.examples.modules.povfile</code> package, and create a new Java Class called <code>RendererAction</code>. Define it as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class RendererAction extends AbstractAction implements Presenter.Popup {</code></pre>
</div>
</div>
<div class="paragraph">
<p>Implementing <code>Presenter.Popup</code> is an important step—this is a way in which an action can actually provide whatever component it wants to insert into the popup menu. It is a one-method interface, with the method <code>getPopupPresenter</code> which returns a JMenuItem (remember that in Swing, JMenu is a subclass of JMenuItem, so it&#8217;s legal to return whole submenu here). In our case, we want a submenu:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Render</p>
</li>
<li>
<p>1024 x 768 High Quality</p>
</li>
<li>
<p>1024 x 768</p>
</li>
<li>
<p>640 x 480 High Quality</p>
</li>
<li>
<p>640 x 480 High Quality</p>
</li>
<li>
<p>320 x 200</p>
</li>
<li>
<p>160 x 120</p>
</li>
<li>
<p>Standard file menu items&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>1.
Now we will provide the body of <code>RendererAction</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.netbeans.examples.modules.povfile;

import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.JCheckBoxMenuItem;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import org.netbeans.examples.api.povray.RendererService;
import org.openide.util.NbBundle;
import org.openide.util.actions.Presenter;

public class RendererAction extends AbstractAction implements Presenter.Popup {

    private final RendererService renderer;
    private final PovrayDataNode node;

    public RendererAction(RendererService renderer, PovrayDataNode node) {
        this.renderer = renderer;
        this.node = node;
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        assert false;
    }

    @NbBundle.Messages("LBL_Render=Render")
    @Override
    public JMenuItem getPopupPresenter() {

        JMenu result = new JMenu();

        //Set the menu's label
        result.setText(Bundle.LBL_Render());

        //Get the names of all available settings sets:
        String[] availableSettings =
                renderer.getAvailableRendererSettingsNames();

        //Get the name of the most recently used setting set:
        String preferred = renderer.getPreferredRendererSettingsNames();

        for (int i = 0; i &lt; availableSettings.length; i++) {

            String currName = availableSettings[i];

            RenderWithSettingsAction action =
                    new RenderWithSettingsAction(currName);

            JCheckBoxMenuItem itemForSettings = new JCheckBoxMenuItem(action);

            //Show our menu item checked if it is the most recently used set
            //of settings:
            itemForSettings.setSelected(preferred != null
                    &amp;amp;&amp;amp; preferred.equals(currName));

            result.add(itemForSettings);

        }

        return result;

    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>The one thing missing here, of course, is the individual actions that will run the renderer with different sets of settings. Create an inner class of <code>RendererAction</code> called <code>RenderWithSettingsAction</code>, and implement it as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">private class RenderWithSettingsAction extends AbstractAction implements Runnable {

    private final String name;

    public RenderWithSettingsAction(String name) {
        this.name = name;
        putValue(NAME, renderer.getDisplayName(name));
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        RequestProcessor.getDefault().post(this);
    }

    @Override
    public void run() {
        DataObject ob = node.getDataObject();
        FileObject toRender = ob.getPrimaryFile();
        FileObject image = renderer.render(toRender, name);
        if (image != null) {
            try {
                //Try to open the file:
                DataObject dob = DataObject.find(image);
                Node n = dob.getNodeDelegate();
                OpenCookie ck = (OpenCookie) n.getLookup().lookup(OpenCookie.class);
                if (ck != null) {
                    ck.open();
                }
            } catch (DataObjectNotFoundException e) {
                //Should never happen
                Exceptions.printStackTrace(e);
            }
        }
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is relatively straightforward as well. We are using the <code>renderer</code> field of the outer class, and only storing the name of which specific properties file should be used to provide settings for this class, which we will pass to <code>renderer.render()</code>.</p>
</div>
<div class="paragraph">
<p>The two interesting areas are how we find the file, and how we actually perform the rendering. We have the instance of <code>PovRayDataNode</code> that we are operating against. It is a subclass of <code>DataNode</code>, so we can call its <code>getDataObject()</code> method (another way would be to call <code>node.getLookup().lookup(DataObject.class)</code>, but since we know its type, calling <code>getDataObject()</code> is more efficient). From that we may call <code>getPrimaryFile()</code> to actually get the <code>FileObject</code> that should be rendered into an image by POV-Ray.</p>
</div>
<div class="paragraph">
<p>The other item of interest is how we do our rendering. Notice that we implement Runnable. Our action will be, by default, called from the event dispatch thread when the user clicks it in a menu. It would not be good at all if running the action blocked the UI from repainting or anything else until the external POV-Ray process was completed. So instead, we use a handy thread pool NetBeans provides for us, and simply post the work to be done on another thread off of the event queue.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementing_setmainfileaction"><a class="anchor" href="#_implementing_setmainfileaction"></a>Implementing SetMainFileAction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The other action we added to the array of actions on the popup menu for POV-Ray files will set the main file of the project to be whatever file was clicked.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>We will simply implement this as an inner class of <code>PovrayDataNode</code>. Open <code>PovrayDataNode</code> in the code editor.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Implement it as follows. The only twist is that if our <code>Node</code> becomes the main file, it needs to tell the former main file that it is not the main file anymore—more specifically, it needs to force it to fire a property change in its display name so that it gets redrawn as non-bold:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@NbBundle.Messages("CTL_SetMainFile=Set Main File")
private final class SetMainFileAction extends AbstractAction {

    public SetMainFileAction() {
        putValue(NAME, Bundle.CTL_SetMainFile());
    }

    @Override
    public void actionPerformed(ActionEvent ae) {
        MainFileProvider provider = (MainFileProvider) getFromProject(MainFileProvider.class);
        FileObject oldMain = provider.getMainFile();
        provider.setMainFile(getFile());
        fireDisplayNameChange(getDisplayName(), getHtmlDisplayName());
        if (oldMain != null) {
            try {
                Node oldMainFilesNode = DataObject.find(oldMain).getNodeDelegate();
                if (oldMainFilesNode instanceof PovrayDataNode) {
                    ((PovrayDataNode) oldMainFilesNode).fireDisplayNameChange(null, oldMainFilesNode.getDisplayName());
                }
            } catch (DataObjectNotFoundException donfe) { //Should never happen
                Exceptions.printStackTrace(donfe);
            }
        }
    }

    @Override
    public boolean isEnabled() {
        return !isMainFile() &amp;amp;&amp;amp; getFromProject(MainFileProvider.class) != null;
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Run the application, create or open a POV-Ray project, right-click on a .pov file, and you should see your new Actions on the Node:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/tutorials/povray_71_ch6_pic2.png" alt="povray 71 ch6 pic2">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Though the Set Main File action should work correctly, the rendering Actions do not work yet because we have not implemented them yet. That will be done later in this tutorial.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_locating_the_pov_ray_executable"><a class="anchor" href="#_locating_the_pov_ray_executable"></a>Locating the POV-Ray Executable</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The next step is to write the code that will actually run POV-Ray and send its text output to the output window, and eventually open a rendered image. Since this involves some complicated code, we will create a separate utility class that will do the actual rendering.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Create a new Java class in the Povray Project project, in <code>org.netbeans.examples.modules.povproject</code>, called "Povray".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>1.
First we need to implement support for finding the POV-Ray executable, so that we have something to run. This will simply be a matter of popping up a <code>JFileChooser</code> to let the user locate the POV-Ray executable and the directory with the standard POV-Ray include files—once this has been done once, we will store the result so we do not have to ask again unless it is deleted.</p>
</div>
<div class="paragraph">
<p>Since we may need a file chooser twice, once to locate the executable, and once to locate the standard include file directory (which contains files that define standard colors, shapes, etc. that can be used in POV-Ray files), we should provide one method that shows a file chooser for both cases. Add the following method to <code>Povray</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">private static File locate(String key) {
    JFileChooser jfc = new JFileChooser();
    jfc.setDialogTitle(NbBundle.getMessage(Povray.class, key));
    jfc.setFileSelectionMode (JFileChooser.FILES_ONLY);
    jfc.showOpenDialog(WindowManager.getDefault().getMainWindow());
    File result = jfc.getSelectedFile();
    return result;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point we need to add another dependency, because we are calling <code>WindowManager</code> above. That is part of the Window System API. We could pass null here, but then there is the risk that on some window managers, our file chooser would pop up <em>behind</em> the main window. This makes sure it stays on top. Add a dependency on the Window System API to Povray Project, by right-clicking the project&#8217;s Libraries node and choosing Add Module Dependency.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>As you can see in the above code, we will be fetching a localized string from a resource bundle—a different one depending on whether we&#8217;re looking for the executable or include directory. So let&#8217;s add those strings to the resource bundle for this package via Bundle annotations. We will also add one warning message we will need later.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Next, we will add the two methods for fetching the POV-Ray executable and the include directory, which will automatically ask the user if they are unknown or unavailable. Add the following two methods, and their associated fields to <code>Povray</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">private static File povray = null;
private static File include = null;

/**
 * Preferences key for the povray executable
 */
private static final String KEY_POVRAY_EXEC = "povray";

/**
 * Preferences key for the povray standard includes dir
 */
private static final String KEY_POVRAY_INCLUDES = "include";

@NbBundle.Messages({"TTL_FindPovray=Locate POV-Ray Executable",
    "MSG_WindowsWarning="
    + "POV-Ray for Windows always displays its graphical"
    + "user interface when it runs. You can get a command-line "
    + "version of POV-Ray at &lt;a href=\"http://www.imagico.de/files/povcyg_350c.zip\"&gt;"
    + "http://www.imagico.de/files/povcyg_350c.zip&lt;/a&gt;"
})
private static File getPovray() {
    if (povray == null || !povray.exists()) {
        Preferences prefs = RendererServiceImpl.getPreferences();
        String loc = prefs.get(KEY_POVRAY_EXEC, null);
        if (loc != null) {
            povray = new File(loc);
        }
        if (povray == null || !povray.exists()) {
            File maybePov = locate(Bundle.TTL_FindPovray());
            if (maybePov.getPath().endsWith("pvengine.exe")) {
                //Warn the user to get a command line build:
                NotifyDescriptor msg = new NotifyDescriptor.Confirmation(
                        NbBundle.getMessage(RendererServiceImpl.class,
                        Bundle.MSG_WindowsWarning()),
                        NotifyDescriptor.WARNING_MESSAGE);
                Object result = DialogDisplayer.getDefault().notify(msg);
                if (result == NotifyDescriptor.CANCEL_OPTION) {
                    return null;
                }
            }
            povray = maybePov;
            if (povray != null) {
                prefs.put(KEY_POVRAY_EXEC, povray.getPath());
            }
        }
    }
    return povray;
}

@NbBundle.Messages("TTL_FindIncludeDir=Find POV-Ray Standard Include File Dir")
private static File getStandardIncludeDir(File povray) {
    if (include != null) {
        return include;
    }
    Preferences prefs = RendererServiceImpl.getPreferences();
    String loc = prefs.get(KEY_POVRAY_INCLUDES, null);
    if (loc != null) {
        include = new File(loc);
        if (!include.exists()) {
            include = null;
        }
    }
    if (include == null) {
        include = new File(povray.getParentFile().getParent()
                + File.separator + "include");
        if (!include.exists()) {
            include = locate(Bundle.TTL_FindIncludeDir());
            if (include != null) {
                prefs.put(KEY_POVRAY_INCLUDES, include.getPath());
            } else {
                include = null;
            }
        }
    }
    return include;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_steps"><a class="anchor" href="#_next_steps"></a>Next Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The  <a href="../nbm-povray-7/" class="xref page">next section</a> will cover actually executing POV-Ray and piping its output to the Output window of our application.</p>
</div>
</div>
</div>
        <section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        <li><a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/tutorials/nbm-povray-6.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>
    </div>
        <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="../../../../_/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/about">About</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/who">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/community">Community</a></h1>
            <ul>
              <li><a href="../../../../front/main/community/mailing-lists">Mailing lists</a></li>
              <li><a href="../../../../front/main/community/committer">Becoming a committer</a></li>
              <li><a href="../../../../front/main/community/events">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/participate">Participate</a></h1>
            <ul>
              <li><a href="../../../../front/main/participate/submit-pr">Submitting Pull Requests</a></li>
              <li><a href="../../../../front/main/participate/report-issue">Reporting Issues</a></li>
              <li><a href="../../../../front/main/participate/#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/help">Get Help</a></h1>
            <ul>
              <li><a href="../../../../front/main/help/#documentation">Documentation</a></li>
              <li><a href="../../../../wiki/main/wiki">Wiki</a></li>
              <li><a href="../../../../front/main/help/#support">Community Support</a></li>
              <li><a href="../../../../front/main/help/commercial-support">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../front/main/download">Download</a></h1>
            <ul>
              <li><a href="../../../../front/main/download">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="../../../../front/main/download/#_daily_builds_and_building_from_source">Building from source</a></li>
              <li><a href="../../../../front/main/download/#_older_releases">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
      </div>
    </div>

    
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
    <script src="../../../../_/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../../../_/js/vendor/what-input.js"></script>
    <script src="../../../../_/js/vendor/foundation.min.js"></script>
    <script src="../../../../_/js/vendor/jquery.colorbox-min.js"></script>
    <script src="../../../../_/js/netbeans.js"></script>
    <script>
       $(function(){ $(document).foundation(); });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
      $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); });
    </script>
  </body>
</html>
