<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Introduction to Ajax for PHP Web Applications</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Introduction to Ajax for PHP Web Applications - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Introduction to Ajax for PHP Web Applications">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="../../../../../../_/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    <link rel="stylesheet" href="../../../../../../_/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../../../_/images/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../../../_/images/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../../../_/images/fav/favicon-16x16.png">
    <link rel="manifest" href="../../../../../../_/images/fav/site.webmanifest">
    <link rel="mask-icon" href="../../../../../../_/images/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="../../../../../../_/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="../../../../../../index.html"><img src='../../../../../../_/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <input id="search-input" type="text" placeholder="Search the docs"> </li>
            <li> <a href="../../../../../../front/main/community">Community</a> </li>
            <li> <a href="../../../../../../front/main/participate">Participate</a> </li>
            <li> <a href="../../../../../../front/main/blogs">Blog</a></li>
            <li> <a href="../../../../../../front/main/help">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="../../../../../../front/main/download">Download</a> </li>
        </ul>
    </div>
</div>

    <!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="../../../../../../front/main/download/nb19">Download</a></p>
        </div>
    </div>
</section>
    <div class='grid-container main-content tutorial'>
      <article class="doc">
      <h1 class="sect0">Introduction to Ajax for PHP Web Applications</h1>
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/kb/docs/php/ajax-quickstart.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="../../../../../../tutorial/main/kb/docs/contributing">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#overview">Overview of the Application</a></li>
<li><a href="#client1">Programming the Client-Side: Part 1</a>
<ul class="sectlevel2">
<li><a href="#html">Using the HTML Editor</a></li>
<li><a href="#javascript">Using the JavaScript Editor</a></li>
</ul>
</li>
<li><a href="#serverside">Programming the Server-Side</a>
<ul class="sectlevel2">
<li><a href="#data">Creating the Data Store</a></li>
<li><a href="#business">Creating the Business Logic</a></li>
</ul>
</li>
<li><a href="#client2">Programming the Client-Side: Part 2</a>
<ul class="sectlevel2">
<li><a href="#callback">Adding Callback Functionality</a></li>
<li><a href="#htmldom">Updating the HTML DOM</a></li>
<li><a href="#stylesheet">Attaching a Stylesheet</a></li>
</ul>
</li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This document provides an introduction to Ajax and demonstrates some of the features in the NetBeans IDE that allow you to program faster and more efficiently when working with Ajax-related technologies. While learning about the low-level functionality of Ajax, you build a simple application that employs auto-completion in a text field. Content here has been adapted from Greg Murray&#8217;s article and sample application from <a href="http://weblogs.java.net/blog/gmurray71/archive/2005/12/using_ajax_with_1.html">Using Ajax with Java Technology</a>.</p>
</div>
<div class="paragraph">
<p>Ajax stands for Asynchronous JavaScript and XML. In essence, Ajax is an efficient way for a web application to handle user interactions with a web page - a way that reduces the need to do a page refresh or full page reload for every user interaction. This enables rich behavior (similar to that of a desktop application or plugin-based web application) using a browser. Ajax interactions are handled asynchronously in the background. As this happens, a user can continue working with the page. Ajax interactions are initiated by JavaScript code. When the Ajax interaction is complete, JavaScript updates the HTML source of the page. The changes are made immediately without requiring a page refresh. Ajax interactions can be used to do things such as validate form entries (while the user is entering them) using server-side logic, retrieve detailed data from the server, dynamically update data on a page, and submit partial forms from the page.</p>
</div>
<div class="paragraph">
<p><strong>To complete this tutorial, you need the following software and resources.</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Software or Resource</th>
<th class="tableblock halign-left valign-top">Version Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.php.net/downloads.php">PHP engine</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PHP 5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://httpd.apache.org/download.cgi">Apache web server</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.2</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
PHP development environment is often configured using an *AMP package, depending on your operating system. This includes the PHP engine and Apache web server. For instructions on configuring your environment, see the <a href="../" class="xref page">PHP Learning Trail</a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This tutorial assumes that you have a working knowledge of the various technologies it employs (i.e., HTML, CSS, JavaScript, and PHP). It attempts to provide an overview of the functionality provided by the code, but <em>does not</em> explain how the code works on a line-to-line basis.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you need to compare your project with a working solution, you can <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FPHP%252FMyAjaxApp.zip">download the sample application</a>. Use the IDE&#8217;s New Project wizard (Ctrl-Shift-N; âŒ˜-Shift-N on Mac), and select the PHP with Existing Sources project type. In the wizard, point to the downloaded sources on your computer.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview of the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Imagine a web page in which a user can search for information about musical composers. The page includes a field where the user can enter the name of the composer. In the example application, the entry field has an auto-complete feature. In other words, the user can type in part of the composer name, and the web application attempts to complete the name by listing all composers whose first or last name begins with the characters entered. The auto-complete feature saves the user from having to remember the complete name of the composer and can provide a more intuitive and direct path to the sought-after information.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/php/sample-app.png" alt="sample app">
</div>
<div class="title">Figure 1. Sample application displayed in browser</div>
</div>
<div class="paragraph">
<p>Implementing auto-completion in a search field is something that can be performed using Ajax. Ajax works by employing an <code>XMLHttpRequest</code> object to pass requests and responses asynchronously between the client and server. The following diagram illustrates the process flow of the communication that takes place between the client and server.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/php/ajax-process-flow.png" alt="ajax process flow">
</div>
<div class="title">Figure 2. Ajax process flow diagram</div>
</div>
<div class="paragraph">
<p>The process flow of the diagram can be described by the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The user triggers an event, for example by releasing a key when typing in a name. This results in a JavaScript call to a function that initializes an <code>XMLHttpRequest</code> object.</p>
</li>
<li>
<p>The <code>XMLHttpRequest</code> object is configured with a request parameter that includes the ID of the component that triggered the event, and any value that the user entered. The <code>XMLHttpRequest</code> object then makes an asynchronous request to the web server.</p>
</li>
<li>
<p>On the web server, an object such as a servlet or listener handles the request. Data is retrieved from the data store, and a response is prepared containing the data in the form of an XML document.</p>
</li>
<li>
<p>Finally, the <code>XMLHttpRequest</code> object receives the XML data using a callback function, processes it, and updates the HTML DOM (Document Object Model) to display the page containing the new data.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This tutorial demonstrates how to construct the auto-complete scenario by following the process flow indicated in the above diagram. You first create the client-side files for the presentation and functionality needed to generate the <code>XMLHttpRequest</code> object. Then, you set up the server-side by creating the data store and business logic using PHP-based technology. Finally, you return to the client-side and implement <code>callback()</code>, and other JavaScript functionality to update the HTML DOM.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="client1"><a class="anchor" href="#client1"></a>Programming the Client-Side: Part 1</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Begin by creating a new PHP application project in the IDE.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Choose File &gt; New Project. Under Categories, select <strong>PHP</strong>. Under Projects, select <strong>PHP Application</strong> then click <strong>Next</strong>.</p>
</li>
<li>
<p>In Step 2: Name and Location, name the project <code>MyAjaxApp</code>. The Sources Folder field enables you to specify the location of the project on your computer. Leave other options at their defaults and click <strong>Next</strong>.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/php/php-name-location.png" alt="php name location">
</div>
<div class="title">Figure 3. New PHP Project wizard - Name and Location panel</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Step 3: Run Configuration, specify how you want to deploy your application. If you have set up your PHP development environment by configuring an <strong>AMP package, you should select *Local Web Site</strong> from the drop-down list, and specify the URL of the project, as it will appear in a browser.</p>
</li>
<li>
<p>Select the Copy files from Sources Folder to another location option. Then, in the Copy to Folder field, type in the path to the deployment location on the server. (On Apache, this is the default <code>htdocs</code> directory.)</p>
</li>
</ol>
</div>
<div class="openblock feature">
<div class="content">
<div class="imageblock xref-image left">
<div class="content">
<a class="image" href="../../../../_images/kb/docs/php/php-run-config.png"><img src="../../../../_images/kb/docs/php/php-run-config.png" alt="php run config"></a>
</div>
</div>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <strong>Finish</strong>. The IDE creates the project folder in your file system and the project opens in the IDE.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can also use the Project wizard to add  framework support to your project (provided in Step 4 of the wizard).</p>
</div>
<div class="paragraph">
<p>A default <code>index.php</code> index page is generated and opens in the IDE&#8217;s editor. Also, your project appears in the Projects window.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/php/php-proj-win.png" alt="php proj win">
</div>
<div class="title">Figure 4. Projects window displays MyAjaxApp project</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Before beginning to code, quickly try running the application to ensure that configuration between the IDE, your server, and browser is set up properly.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the IDE&#8217;s editor, add an <code>echo</code> statement to the index page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php hljs" data-lang="php">&lt;?php
    // put your code here
    *echo "&lt;h2&gt;Hello World!&lt;/h2&gt;";*
?&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Projects window, right-click on the project node and choose Run. The IDE opens your default browser and displays the Hello World message you just created in <code>index.php</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you have difficulty setting up your project or establishing communication between the IDE, the server and browser, see <a href="../project-setup/" class="xref page">Setting Up a PHP Project</a> for a more thorough description. The <a href="../" class="xref page">PHP Learning Trail</a> can provide more information on configuring your environment.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="html"><a class="anchor" href="#html"></a>Using the HTML Editor</h3>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/php/palette.png" alt="palette">
</div>
<div class="title">Figure 5. Palette displaying HTML elements</div>
</div>
<div class="paragraph">
<p>Now that you are certain your environment is set up correctly, begin by developing the auto-complete interface that will be viewed by users. Because the index page that we&#8217;ll create does not require any server-side scripting elements, start by creating an HTML page and setting it as the entry point for the application.</p>
</div>
<div class="paragraph">
<p>One of the advantages of using an IDE is that the editor you work in often provides you with code completion which, if you learn to apply it when you code, can rapidly increase your productivity. The IDE&#8217;s editor generally adapts to the technology you are using, so if you are working in an HTML page, pressing the code completion key combination (Ctrl-Space) will produce suggestions for HTML tags and attributes. As will later be shown, the same applies for other technologies, such as CSS and JavaScript.</p>
</div>
<div class="paragraph">
<p>A second feature you can make use of is the IDE&#8217;s Palette. The Palette provides easy-to-use templates for elements that are commonly applied in the technology you are coding in. You simply click on an item, and drag it to a location in the file open in the Source Editor.</p>
</div>
<div class="paragraph">
<p>You can view large icons (as displayed here) by right-clicking in the Palette and choosing Show Big Icons.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Projects window, right-click the <code>MyAjaxApp</code> project node and choose New &gt; HTML File.</p>
</li>
<li>
<p>In the HTML File wizard, name the file <code>index</code>, then click <strong>Finish</strong>. The new <code>index.html</code> file opens in the editor.</p>
</li>
<li>
<p>Replace the existing content for the file as follows.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd"&gt;

&lt;html&gt;
    &lt;head&gt;
        &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
        &lt;title&gt;Auto-Completion using AJAX&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Auto-Completion using AJAX&lt;/h1&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add some explanatory text to describe the purpose of the text field. You can copy and paste in the following text at a point just beneath the <code>&lt;h1&gt;</code> tags:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;p&gt;This example shows how you can do real time auto-completion using Asynchronous
    JavaScript and XML (Ajax) interactions.&lt;/p&gt;

&lt;p&gt;In the form below enter a name. Possible names that will be completed are displayed
    below the form. For example, try typing in "Bach," "Mozart," or "Stravinsky,"
    then click on one of the selections to see composer details.&lt;/p&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add an HTML form to the page. You can do this by making use of the elements listed in the IDE&#8217;s Palette. If the Palette is not open, choose Window &gt; Palette from the main menu. Then, under HTML Forms, click on and drag a Form element into the page to a point beneath the <code>&lt;p&gt;</code> tags that you just added. The Insert Form dialog box opens. Specify the following:</p>
<div class="ulist">
<ul>
<li>
<p>Action: autocomplete.php</p>
</li>
<li>
<p>Method: GET</p>
</li>
<li>
<p>Name: autofillform</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/php/php-insert-form.png" alt="php insert form">
</div>
<div class="title">Figure 6. Insert form dialog</div>
</div>
<div class="paragraph">
<p>Click OK. The HTML <code>&lt;form&gt;</code> tags are inserted into the page containing the attributes you specified. (GET is applied by default, and so is not explicitly declared.)</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add an HTML table to the page. Under the HTML category in the Palette, click on a Table element and drag it to a point between the <code>&lt;form&gt;</code> tags. The Insert Table dialog box opens. Specify the following:</p>
<div class="ulist">
<ul>
<li>
<p>Rows: 2</p>
</li>
<li>
<p>Columns: 2</p>
</li>
<li>
<p>Border Size: 0</p>
</li>
<li>
<p>Width: 0</p>
</li>
<li>
<p>Cell Spacing: 0</p>
</li>
<li>
<p>Cell Padding: 5</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/php/insert-table.png" alt="insert table">
</div>
<div class="title">Figure 7. Insert table dialog</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click inside the Source Editor and choose Format. This tidies up the code. Your form should now display similar to that below:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;form name="autofillform" action="autocomplete.php"&gt;
  &lt;table border="0" cellpadding="5"&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;th&gt;&lt;/th&gt;
        &lt;th&gt;&lt;/th&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;tr&gt;
        &lt;td&gt;&lt;/td&gt;
        &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;&lt;/td&gt;
        &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Within the first row of the table, type the following text into the first column (changes in <strong>bold</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;td&gt;*&lt;strong&gt;Composer Name:&lt;/strong&gt;*&lt;/td&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Within the second column of the first row, instead of dragging a Text Input field from the Palette, type in the code below manually.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;input type="text"
    size="40"
    id="complete-field"
    onkeyup="doCompletion();"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>When you type, try using the IDE&#8217;s built-in code completion support. For example, type in <code>&lt;i</code>, then press Ctrl-Space. A list of suggested options displays below your cursor, and a description of the selected element appears in a box above. You can in fact press Ctrl-Space at anytime you are coding in the Source Editor to bring up possible options. Also, if there is only one possible option, pressing Ctrl-Space will automatically complete the element name.
<span class="image"><img src="../../../../_images/kb/docs/php/code-completion.png" alt="code completion" title="Ctrl-Space triggers code completion in the Source Editor"></span>
The <code>onkeyup</code> attribute that you typed in above points to a JavaScript function named <code>doCompletion()</code>. This function is called each time a key is pressed in the form text field, and maps to the JavaScript call depicted in the Ajax <a href="#flow-diagram">flow diagram</a> above.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Before moving on to work in the JavaScript editor, make the new <code>index.html</code> file replace the <code>index.php</code> file as the entry point for the application.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To do so, right-click the project node in the Projects window and choose Properties. Select the <strong>Run Configuration</strong> category, then enter <code>index.html</code> in the Index File field. <span class="image"><img src="../../../../_images/kb/docs/php/php-entry-point.png" alt="php entry point" title="Specify the application&#8217;s entry point in the Project Properties window"></span></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click OK to save changes and exit the Project Properties window.</p>
</li>
<li>
<p>Run the project to see what it looks like in a browser. Click the Run Project ( <span class="image"><img src="../../../../_images/kb/docs/php/run-project-btn.png" alt="run project btn"></span> ) button. The <code>index.html</code> file displays in your default browser.
<span class="image"><img src="../../../../_images/kb/docs/php/index-page.png" alt="index page" title="Run project to view its current state in browser"></span></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="javascript"><a class="anchor" href="#javascript"></a>Using the JavaScript Editor</h3>
<div class="paragraph">
<p>The IDE&#8217;s JavaScript Editor provides many advanced editing capabilities, such as intelligent code completion, semantic highlighting, instant renaming and refactoring capabilities, as well as many more features. For more information on the JavaScript editing features in the IDE, see <a href="http://docs.oracle.com/cd/E50453_01/doc.80/e50452/dev_html_apps.htm#BACFIFIG">Creating JavaScript Files</a> in the <a href="http://www.oracle.com/pls/topic/lookup?ctx=nb8000&amp;id=NBDAG">Developing Applications with NetBeans IDE User's Guide</a>. See <a href="http://wiki.netbeans.org/JavaScript">http://wiki.netbeans.org/JavaScript</a> for a detailed specification.</p>
</div>
<div class="paragraph">
<p>JavaScript code completion is automatically provided when you code in <code>.js</code> files, as well as within <code>&lt;script&gt;</code> tags when you work with other technologies (i.e., HTML, RHTML, JSP, PHP). When using the JavaScript Editor, the IDE provides you with browser-compatibility information, depending on the browser types and versions you specify in the JavaScript Options panel. Open the JavaScript Options panel by choosing Tools &gt; Options (NetBeans &gt; Preferences on Mac), then Miscellaneous &gt; JavaScript.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/php/php-javascript-options.png" alt="php javascript options">
</div>
<div class="title">Figure 8. JavaScript Options panel</div>
</div>
<div class="paragraph">
<p>The IDE provides out-of-the-box support for Firefox, Internet Explorer, Safari, and Opera. From the JavaScript Options panel, you can also specify the JavaScript engine version that code completion applies to.</p>
</div>
<div class="paragraph">
<p>Add a JavaScript file to the application and begin implementing <code>doCompletion()</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Projects window, right-click on the project node and choose New &gt; JavaScript file. (If JavaScript file is not listed, choose Other. Then choose JavaScript file from the Other category in the New File wizard.)</p>
</li>
<li>
<p>Name the file <code>javascript</code>, then click Finish. The new JavaScript file appears in the Projects window and opens in the editor.</p>
</li>
<li>
<p>Type the code below into <code>javascript.js</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php hljs" data-lang="php">var req;
var isIE;

function init() {
    completeField = document.getElementById("complete-field");
}

function doCompletion() {
        var url = "autocomplete.php?action=complete&amp;amp;id=" + escape(completeField.value);
        req = initRequest();
        req.open("GET", url, true);
        req.onreadystatechange = callback;
        req.send(null);
}

function initRequest() {
    if (window.XMLHttpRequest) {
        if (navigator.userAgent.indexOf('MSIE') != -1) {
            isIE = true;
        }
        return new XMLHttpRequest();
    } else if (window.ActiveXObject) {
        isIE = true;
        return new ActiveXObject("Microsoft.XMLHTTP");
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above code performs a simple browser compatibility check for Firefox 3 and Internet Explorer versions 6 and 7). If you would like to incorporate more robust code for compatibility issues, consider using this <a href="http://www.quirksmode.org/js/detect.html">browser detect script</a> from <a href="http://www.quirksmode.org">http://www.quirksmode.org</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Switch back to <code>index.html</code> and add a reference to the JavaScript file between the <code>&lt;head&gt;</code> tags.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;script type="text/javascript" src="javascript.js"&gt;&lt;/script&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can quickly toggle between pages opened in the editor by pressing Ctrl-Tab.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Insert a call to <code>init()</code> in the opening <code>&lt;body&gt;</code> tag.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;body *onload="init()"*&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This ensures that <code>init()</code> is called each time the page is loaded.</p>
</div>
<div class="paragraph">
<p>The role of <code>doCompletion()</code> is to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>create a URL that contains data that can be utilized by the server-side,</p>
</li>
<li>
<p>initialize an <code>XMLHttpRequest</code> object, and</p>
</li>
<li>
<p>prompt the <code>XMLHttpRequest</code> object to send an asynchronous request to the server.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>XMLHttpRequest</code> object is at the heart of Ajax and has become the de facto standard for enabling XML data to be passed asynchronously over HTTP. <em>Asynchronous</em> interaction implies that the browser can continue to process events in the page after the request is sent. Data is passed in the background, and can be automatically loaded into the page without requiring a page refresh.</p>
</div>
<div class="paragraph">
<p>Notice that the <code>XMLHttpRequest</code> object is actually created by <code>initRequest()</code>, which is called by <code>doCompletion()</code>. The function checks whether <code>XMLHttpRequest</code> can be understood by the browser, and if so it creates an <code>XMLHttpRequest</code> object. Otherwise, it performs a check on <code>ActiveXObject</code> (the <code>XMLHttpRequest</code> equivalent for Internet Explorer 6), and creates an <code>ActiveXObject</code> if identified.</p>
</div>
<div class="paragraph">
<p>Three parameters are specified when you create an <code>XMLHttpRequest</code> object: a URL, the HTTP method (<code>GET</code> or <code>POST</code>), and whether or not the interaction is asynchronous. In the above example, the parameters are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The URL <code>autocomplete.php</code>, and the text entered into the <code>complete-field</code> by the user:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php hljs" data-lang="php">var url = "autocomplete.php?action=complete&amp;amp;id=" + escape(completeField.value);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>GET</code>, signifying that HTTP interactions use the <code>GET</code> method, and</p>
</li>
<li>
<p><code>true</code>, signifying that the interaction is asynchronous:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php hljs" data-lang="php">req.open("GET", url, true);</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the interaction is set as asynchronous, a callback function must be specified. The callback function for this interaction is set with the statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php hljs" data-lang="php">req.onreadystatechange = callback;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and a <code>callback()</code> function <a href="#callback">must later be defined</a>. The HTTP interaction begins when <code>XMLHttpRequest.send()</code> is called. This action maps to the HTTP request that is sent to the web server in the above <a href="#flow-diagram">flow diagram</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="serverside"><a class="anchor" href="#serverside"></a>Programming the Server-Side</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The NetBeans IDE provides comprehensive support for web development using PHP. You can set up your development environment using an *AMP package, enabling you to edit and deploy from the IDE quickly and efficiently. The IDE allows you to configure your environment with a local server, as well as remotely, using FTP or SFTP. You can also configure an external debugger, such as <a href="http://xdebug.org/">Xdebug</a>, and set up unit testing with <a href="http://www.phpunit.de/">PHPUnit</a> from the IDE&#8217;s PHP Options window (Choose Tools &gt; Options; NetBeans &gt; Preferences on Mac, then select the PHP tab.) The PHP editor provides standard editing features such as code completion, syntax highlighting, mark occurrences, refactoring, code templates, documentation pop-up, code navigation, editor warnings and, for NetBeans 6.9, error badges for malformed syntax. See the <a href="../../intro-screencasts/" class="xref page">NetBeans Video Tutorials and Demos</a> page for screencasts on PHP support.</p>
</div>
<div class="paragraph">
<p>For applications requiring a database, the IDE supports wide-ranging support for most main-stream databases, especially MySQL. See the <a href="#../../articles/mysql.adoc" class="xref unresolved">NetBeans MySQL screencast</a> and <a href="#../../../features/ide/database.adoc" class="xref unresolved">Database Integration</a> features for more details.</p>
</div>
<div class="paragraph">
<p>The business logic for the auto-complete application that you are building needs to process requests by retrieving data from the data store, then prepare and send the response. This is implemented here using a PHP file named <code>autocomplete</code>. Before you begin coding the file, set up the data store and the functionality required by the file to access data.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#data">Creating the Data Store</a></p>
</li>
<li>
<p><a href="#business">Creating the Business Logic</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="data"><a class="anchor" href="#data"></a>Creating the Data Store</h3>
<div class="paragraph">
<p>For this simple application, you create a class called <code>Composer</code> that enables the business logic to retrieve data from entries contained in a <code>composers</code> array. You then create a class called <code>ComposerData</code> that retains composer data using the array.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click the <code>MyAjaxApp</code> project node in the Projects window and choose New &gt; PHP Class.</p>
</li>
<li>
<p>Name the class <code>Composer</code>, and click Finish. The class is created and opens in the editor.</p>
</li>
<li>
<p>Paste in the following code within the class (changes in <strong>bold</strong>).</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php hljs" data-lang="php">&lt;?php

class Composer {

    *public $id;
    public $firstName;
    public $lastName;
    public $category;

    function __construct($id, $firstName, $lastName, $category) {
        $this-&gt;id = $id;
        $this-&gt;firstName = $firstName;
        $this-&gt;lastName = $lastName;
        $this-&gt;category = $category;
    }*
}

?&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Create the <code>ComposerData</code> class.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click the <code>MyAjaxApp</code> project node in the Projects window and choose New &gt; PHP Class.</p>
</li>
<li>
<p>Name the class <code>ComposerData</code>, and click Finish. The class is created and opens in the IDE&#8217;s editor.</p>
</li>
<li>
<p>Add a <code>require</code> statement to the top of the class to specify that the class requires the <code>Composer.php</code> class that you just created (changes in <strong>bold</strong>).</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php hljs" data-lang="php">&lt;?php

*require "Composer.php";*

class ComposerData {

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the editor, paste in the following code within the class (changes in <strong>bold</strong>).</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php hljs" data-lang="php">&lt;?php

require "Composer.php";

class ComposerData {

    *public $composers;

    function __construct() {
        $this-&gt;composers = array(
            new Composer("1", "Johann Sebastian", "Bach", "Baroque"),
            new Composer("2", "Arcangelo", "Corelli", "Baroque"),
            new Composer("3", "George Frideric", "Handel", "Baroque"),
            new Composer("4", "Henry", "Purcell", "Baroque"),
            new Composer("5", "Jean-Philippe", "Rameau", "Baroque"),
            new Composer("6", "Domenico", "Scarlatti", "Baroque"),
            new Composer("7", "Antonio", "Vivaldi", "Baroque"),

            new Composer("8", "Ludwig van", "Beethoven", "Classical"),
            new Composer("9", "Johannes", "Brahms", "Classical"),
            new Composer("10", "Francesco", "Cavalli", "Classical"),
            new Composer("11", "Fryderyk Franciszek", "Chopin", "Classical"),
            new Composer("12", "Antonin", "Dvorak", "Classical"),
            new Composer("13", "Franz Joseph", "Haydn", "Classical"),
            new Composer("14", "Gustav", "Mahler", "Classical"),
            new Composer("15", "Wolfgang Amadeus", "Mozart", "Classical"),
            new Composer("16", "Johann", "Pachelbel", "Classical"),
            new Composer("17", "Gioachino", "Rossini", "Classical"),
            new Composer("18", "Dmitry", "Shostakovich", "Classical"),
            new Composer("19", "Richard", "Wagner", "Classical"),

            new Composer("20", "Louis-Hector", "Berlioz", "Romantic"),
            new Composer("21", "Georges", "Bizet", "Romantic"),
            new Composer("22", "Cesar", "Cui", "Romantic"),
            new Composer("23", "Claude", "Debussy", "Romantic"),
            new Composer("24", "Edward", "Elgar", "Romantic"),
            new Composer("25", "Gabriel", "Faure", "Romantic"),
            new Composer("26", "Cesar", "Franck", "Romantic"),
            new Composer("27", "Edvard", "Grieg", "Romantic"),
            new Composer("28", "Nikolay", "Rimsky-Korsakov", "Romantic"),
            new Composer("29", "Franz Joseph", "Liszt", "Romantic"),

            new Composer("30", "Felix", "Mendelssohn", "Romantic"),
            new Composer("31", "Giacomo", "Puccini", "Romantic"),
            new Composer("32", "Sergei", "Rachmaninoff", "Romantic"),
            new Composer("33", "Camille", "Saint-Saens", "Romantic"),
            new Composer("34", "Franz", "Schubert", "Romantic"),
            new Composer("35", "Robert", "Schumann", "Romantic"),
            new Composer("36", "Jean", "Sibelius", "Romantic"),
            new Composer("37", "Bedrich", "Smetana", "Romantic"),
            new Composer("38", "Richard", "Strauss", "Romantic"),
            new Composer("39", "Pyotr Il'yich", "Tchaikovsky", "Romantic"),
            new Composer("40", "Guiseppe", "Verdi", "Romantic"),

            new Composer("41", "Bela", "Bartok", "Post-Romantic"),
            new Composer("42", "Leonard", "Bernstein", "Post-Romantic"),
            new Composer("43", "Benjamin", "Britten", "Post-Romantic"),
            new Composer("44", "John", "Cage", "Post-Romantic"),
            new Composer("45", "Aaron", "Copland", "Post-Romantic"),
            new Composer("46", "George", "Gershwin", "Post-Romantic"),
            new Composer("47", "Sergey", "Prokofiev", "Post-Romantic"),
            new Composer("48", "Maurice", "Ravel", "Post-Romantic"),
            new Composer("49", "Igor", "Stravinsky", "Post-Romantic"),
            new Composer("50", "Carl", "Orff", "Post-Romantic"),
        );
    }*
}

?&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="business"><a class="anchor" href="#business"></a>Creating the Business Logic</h3>
<div class="paragraph">
<p>Implement the logic to handle the <code>autocomplete</code> URL that is received by the incoming request. Instead of creating a new PHP file using the File wizard as demonstrated in the previous section, modify the existing <code>index.php</code> file for this purpose.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Projects window, click the <code>index.php</code> file node. The file name becomes editable, enabling you to modify the name.
<span class="image"><img src="../../../../_images/kb/docs/php/edit-file-name.png" alt="edit file name" title="Click on file nodes to edit names"></span></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Name the file <code>autocomplete</code>, then click Enter. Double-click the new <code>autocomplete.php</code> file to have it display in the editor.</p>
</li>
<li>
<p>Replace the file&#8217;s existing code with the following script.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php hljs" data-lang="php">&lt;?php

require_once("ComposerData.php");

session_start();

$composerData = new ComposerData();
$composers = $composerData-&gt;composers;

$results = array();
$namesAdded = false;

// simple matching for start of first or last name, or both
if(isset($_GET['action']) &amp;amp;&amp;amp; $_GET['action'] == "complete") {
    foreach($composers as $composer) {
        if(!is_numeric($_GET['id']) &amp;amp;&amp;amp;

            // if id matches first name
            (stripos($composer-&gt;firstName, $_GET['id']) === 0 ||

            // if id matches last name
            stripos($composer-&gt;lastName, $_GET['id']) === 0) ||

            // if id matches full name
            stripos($composer-&gt;firstName." ".$composer-&gt;lastName, $_GET['id']) === 0) {

                $results[] = $composer;
        }
    }

    // prepare xml data
    if(sizeof($results) != 0) {
        header('Content-type: text/xml');
        echo "&lt;composers&gt;";
        foreach($results as $result) {
            echo "&lt;composer&gt;";
            echo "&lt;id&gt;" . $result-&gt;id . "&lt;/id&gt;";
            echo "&lt;firstName&gt;" . $result-&gt;firstName . "&lt;/firstName&gt;";
            echo "&lt;lastName&gt;" . $result-&gt;lastName . "&lt;/lastName&gt;";
            echo "&lt;/composer&gt;";
        }
        echo "&lt;/composers&gt;";
    }
}

// if user chooses from pop-up box
if(isset($_GET['action']) &amp;amp;&amp;amp; isset($_GET['id']) &amp;amp;&amp;amp; $_GET['action'] == "lookup") {
    foreach($composers as $composer) {
        if($composer-&gt;id == $_GET['id']) {
            $_SESSION ["id"] = $composer-&gt;id;
            $_SESSION ["firstName"] = $composer-&gt;firstName;
            $_SESSION ["lastName"] = $composer-&gt;lastName;
            $_SESSION ["category"] = $composer-&gt;category;

            header("Location: composerView.php");
        }
    }
}

?&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>*Note: * The file composerView.php is not described in this tutorial. You may create such a file to see the final result of the search. A sample of the file is included in the <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FPHP%252FMyAjaxApp.zip">sample application</a>.</p>
</div>
<div class="paragraph">
<p>As you can see, there is nothing really new you need to learn to write server-side code for Ajax processing. The response content type needs to be set to <code>text/xml</code> for cases where you want to exchange XML documents. With Ajax, you can also exchange plain text or even snippets of JavaScript which may be evaluated or executed by the callback function on the client. Note too that some browsers might cache the results, and so it may be necessary to set the Cache-Control HTTP header to <code>no-cache</code>.</p>
</div>
<div class="paragraph">
<p>In this example, the <code>autocomplete.php</code> file generates an XML document that contains all composers with a first or last name beginning with the characters typed in by the user. This document maps to the XML Data depicted in the <a href="#flow-diagram">flow diagram</a> above. Here is an example of an XML document that is returned to the <code>XMLHttpRequest</code> object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;composers&gt;
    &lt;composer&gt;
        &lt;id&gt;12&lt;/id&gt;
        &lt;firstName&gt;Antonin&lt;/firstName&gt;
        &lt;lastName&gt;Dvorak&lt;/lastName&gt;
    &lt;/composer&gt;
    &lt;composer&gt;
        &lt;id&gt;45&lt;/id&gt;
        &lt;firstName&gt;Aaron&lt;/firstName&gt;
        &lt;lastName&gt;Copland&lt;/lastName&gt;
    &lt;/composer&gt;
    &lt;composer&gt;
        &lt;id&gt;7&lt;/id&gt;
        &lt;firstName&gt;Antonio&lt;/firstName&gt;
        &lt;lastName&gt;Vivaldi&lt;/lastName&gt;
    &lt;/composer&gt;
    &lt;composer&gt;
        &lt;id&gt;2&lt;/id&gt;
        &lt;firstName&gt;Arcangelo&lt;/firstName&gt;
        &lt;lastName&gt;Corelli&lt;/lastName&gt;
    &lt;/composer&gt;
&lt;/composers&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="client2"><a class="anchor" href="#client2"></a>Programming the Client-Side: Part 2</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You must define the callback function to handle the server&#8217;s response, and add any functionality necessary to reflect changes in the page that is viewed by the user. This requires modifying the HTML DOM. Finally, you can work in the IDE&#8217;s CSS Editor to add a simple stylesheet to the presentation.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#callback">Adding Callback Functionality</a></p>
</li>
<li>
<p><a href="#htmldom">Updating the HTML DOM</a></p>
</li>
<li>
<p><a href="#stylesheet">Attaching a Stylesheet</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="callback"><a class="anchor" href="#callback"></a>Adding Callback Functionality</h3>
<div class="paragraph">
<p>The callback function is called asynchronously at specific points during HTTP interaction when the <code>readyState</code> property of the <code>XMLHttpRequest</code> object changes. In the application you are building, the callback function is <code>callback()</code>. You recall that in <code>doCompletion()</code>, <code>callback</code> was set as the <code>XMLHttpRequest.onreadystatechange</code> property to a function. Now, implement the callback function as follows.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open <code>javascript.js</code> in the editor and type in the code below.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">function callback() {
    if (req.readyState == 4) {
        if (req.status == 200) {
            parseMessages(req.responseXML);
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <code>readyState</code> of "4" signifies the completion of the HTTP interaction. The API for <code>XMLHttpRequest.readState</code> indicates that there are 5 possible values that can be set. These are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code>readyState</code> Value</th>
<th class="tableblock halign-left valign-top">Object Status Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uninitialized</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">loading</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">loaded</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">interactive</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">complete</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Notice that the <code>parseMessages()</code> function is called only when the <code>XMLHttpRequest.readyState</code> is "4" and the <code>status</code>&#8201;&#8212;&#8201;the HTTP status code definition of the request&#8201;&#8212;&#8201;is "200", signifying a success. You will define <code>parseMessages()</code> next in <a href="#htmldom">Updating the HTML DOM</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="htmldom"><a class="anchor" href="#htmldom"></a>Updating the HTML DOM</h3>
<div class="paragraph">
<p>The <code>parseMessages()</code> function handles the incoming XML data. In doing so, it relies on several ancillary functions, such as <code>appendComposer()</code>, <code>getElementY()</code>, and <code>clearTable()</code>. You must also introduce new elements to the index page, such as a second HTML table which serves as the auto-complete box, and ID&#8217;s for elements so they can be referenced in <code>javascript.js</code>. Finally, you create new variables corresponding to ID&#8217;s for elements in <code>index.php</code>, initialize them in the <code>init()</code> function that you previously implemented, and add some functionality that is needed each time <code>index.php</code> is loaded.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The functions and elements that you create in the following steps work interdependently. It is recommended that you work through this section, then examine the code once it is all in place.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open <code>index.html</code> in the editor and type in the below code for the second row of the HTML table you previously created.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;tr&gt;
    *&lt;td id="auto-row" colspan="2"&gt;

    &lt;td/&gt;*
&lt;/tr&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This new row, which can be identified as &#8216;auto-row&#8217;, serves as a handle for the JavaScript code in order to insert a new HTML table that will form the auto-complete box.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open <code>javascript.js</code> in the editor and the following three variables to the top of the file.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">var completeField;
var completeTable;
var autoRow;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the following lines (in <strong>bold</strong>) to the <code>init()</code> function.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">function init() {
    completeField = document.getElementById("complete-field");
    *completeTable = document.createElement("table");
    completeTable.setAttribute("class", "popupBox");
    completeTable.setAttribute("style", "display: none");
    autoRow = document.getElementById("auto-row");
    autoRow.appendChild(completeTable);
    completeTable.style.top = getElementY(autoRow) + "px";*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>One purpose of <code>init()</code> is to make elements inside <code>index.html</code> accessible to other functions that will modify the index page&#8217;s DOM. Above, the script creates a new HTML <code>table</code>, adds the <code>popupBox</code> class and modifies the element&#8217;s style to <code>display: none</code>. Finally, it gets the element whose <code>id</code> is <code>auto-row</code> and inserts the new <code>table</code> into it. In other words, the modified HTML looks as follows when the code is run.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;tr&gt;
    &lt;td id="auto-row" colspan="2"&gt;
        *&lt;table class="popupBox" style="display: none"&gt;&lt;/table&gt;*
    &lt;td/&gt;
&lt;/tr&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add <code>appendComposer()</code> to <code>javascript.js</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">function appendComposer(firstName,lastName,composerId) {

    var row;
    var cell;
    var linkElement;

    if (isIE) {
        completeTable.style.display = 'block';
        row = completeTable.insertRow(completeTable.rows.length);
        cell = row.insertCell(0);
    } else {
        completeTable.style.display = 'table';
        row = document.createElement("tr");
        cell = document.createElement("td");
        row.appendChild(cell);
        completeTable.appendChild(row);
    }

    cell.className = "popupCell";

    linkElement = document.createElement("a");
    linkElement.className = "popupItem";
    linkElement.setAttribute("href", "autocomplete.php?action=lookup&amp;amp;id=" + composerId);
    linkElement.appendChild(document.createTextNode(firstName + " " + lastName));
    cell.appendChild(linkElement);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This function creates a new table row, inserts a link to a composer into it using the data passed to the function via its three parameters, and inserts the row into the index page&#8217;s <code>complete-table</code> element.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add <code>clearTable()</code> to <code>javascript.js</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">function clearTable() {
    if (completeTable.getElementsByTagName("tr").length &gt; 0) {
        completeTable.style.display = 'none';
        for (loop = completeTable.childNodes.length -1; loop &gt;= 0 ; loop--) {
            completeTable.removeChild(completeTable.childNodes[loop]);
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This function sets the display of the <code>complete-table</code> element to 'none', (i.e., makes it invisible), and it removes any existing composer name entries that were created.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add <code>getElementY()</code> to <code>javascript.js</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">function getElementY(element){

    var targetTop = 0;

    if (element.offsetParent) {
        while (element.offsetParent) {
            targetTop += element.offsetTop;
            element = element.offsetParent;
        }
    } else if (element.y) {
        targetTop += element.y;
    }
    return targetTop;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This function is applied to find the vertical position of the parent element. This is necessary because the actual position of the element, when it is displayed, is often dependent on browser type and version. Note that the <code>complete-table</code> element, when displayed containing composer names, is shifted to the lower right of the table in which it exists. The correct height positioning is determined by <code>getElementY()</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
See <a href="http://www.quirksmode.org/js/findpos.html">this explanation</a> of <code>offset</code> on <a href="http://www.quirksmode.org/">http://www.quirksmode.org/</a>.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Modify the <code>callback()</code> function to call <code>clearTable()</code> each time new data is received from the server. Any composer entries that already exist in the auto-complete box are therefore removed before it becomes populated with new entries.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">function callback() {

    *clearTable();*

    if (req.readyState == 4) {
        if (req.status == 200) {
            parseMessages(req.responseXML);
        }
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add <code>parseMessages()</code> to <code>javascript.js</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">function parseMessages(responseXML) {

    // no matches returned
    if (responseXML == null) {
        return false;
    } else {

        var composers = responseXML.getElementsByTagName("composers")[0];

        if (composers.childNodes.length &gt; 0) {
            completeTable.setAttribute("bordercolor", "black");
            completeTable.setAttribute("border", "1");

            for (loop = 0; loop &lt; composers.childNodes.length; loop++) {
                var composer = composers.childNodes[loop];
                var firstName = composer.getElementsByTagName("firstName")[0];
                var lastName = composer.getElementsByTagName("lastName")[0];
                var composerId = composer.getElementsByTagName("id")[0];
                appendComposer(firstName.childNodes[0].nodeValue,
                    lastName.childNodes[0].nodeValue,
                    composerId.childNodes[0].nodeValue);
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>parseMessages()</code> function receives as a parameter an object representation of the XML document returned by the <code>autocomplete.php</code> file. The function programmatically traverses the XML document, extracting the <code>firstName</code>, <code>lastName</code>, and <code>id</code> of each entry, then passes this data to <code>appendComposer()</code>. This results in a dynamic update to the contents of the <code>complete-table</code> element. For example, an entry that is generated and inserted into <code>complete-table</code> might look as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;tr&gt;
    &lt;td class="popupCell"&gt;
        &lt;a class="popupItem" href="autocomplete?action=lookup&amp;amp;id=12"&gt;Antonin Dvorak&lt;/a&gt;
    &lt;/td&gt;
&lt;/tr&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The dynamic update to the <code>complete-table</code> element represents the final step of the process flow of communication that takes place during communication using Ajax. This update maps to the HTML &amp; CSS data being sent to the presentation in the <a href="#flow-diagram">flow diagram</a> above.</p>
</div>
</div>
<div class="sect2">
<h3 id="stylesheet"><a class="anchor" href="#stylesheet"></a>Attaching a Stylesheet</h3>
<div class="paragraph">
<p>At this stage, you have completed all the code needed for the functionality of the application. To see the results of your efforts, try running the application now.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the project to see what it looks like in a browser. Click the Run Project ( <span class="image"><img src="../../../../_images/kb/docs/php/run-project-btn.png" alt="run project btn"></span> ) button. The <code>index.html</code> file displays in your browser.
<span class="image"><img src="../../../../_images/kb/docs/php/no-css.png" alt="no css" title="Successful deployment without stylesheet"></span></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To attach a stylesheet to your application, simply create a CSS (Cascading Style Sheets) file and link to it from your presentation page(s). When you work in CSS files, the IDE provides you with code completion support, as well as several other features that can aid in producing stylesheet rules. These include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>CSS Style Builder:</strong> An interface designed to enable you to create rules using a selection of controls and widgets. (Window &gt; Other &gt; CSS Style Builder)</p>
</li>
<li>
<p><strong>CSS Preview:</strong> A preview window which, when you place your cursor within a rule, displays sample text rendered according to the declaration block of that rule. (Window &gt; Other &gt; CSS Preview)</p>
</li>
<li>
<p><strong>Style Rule Editor:</strong> A dialog enabling you to create rules based on classes, ID&#8217;s and HTML elements, and set their position in the document hierarchy. (Create Rule ( <span class="image"><img src="../../../../_images/kb/docs/php/style-rule-editor-btn.png" alt="style rule editor btn"></span> ) button, located in upper-left region of CSS editor toolbar)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>NetBeans 6.9 provides Rename Refactoring and Find Usages support. This support is available not only in css files, but in all files containing embedded CSS code (e.g., HTML, PHP). CSS classes, id&#8217;s and type elements can be refactored in all project files. To make use of this refactoring support, press Ctrl-R on a given CSS element and use the provided dialog to perform the rename action. You can also preview changes before performing the rename action. To utilize Find Usages support, right-click a CSS element and choose Find Usages. See <a href="http://wiki.netbeans.org/wiki/index.php?title=NewAndNoteworthy69m1&amp;section=T-25#Web_Languages">NewAndNoteworthy69m1</a> for more details.</p>
</div>
<div class="paragraph">
<p>Perform the following steps to attach a stylesheet to your application.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Projects window, right-click on the project node and choose New &gt; Cascading Style Sheet (If Cascading Style Sheet is not listed, choose Other. Then choose Cascading Style Sheet from the Other category in the New File wizard.)</p>
</li>
<li>
<p>In the CSS File Name text field, type in <code>stylesheet</code>.</p>
</li>
<li>
<p>Click Finish. The new file is added to the Projects window, and opens in the IDE&#8217;s editor.</p>
</li>
<li>
<p>In <code>stylesheet.css</code>, type in the following rules. You can make use of the IDE&#8217;s code completion support by pressing Ctrl-Space at points when you want to call up suggestions.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">body {
   font-family: sans-serif;
   font-size: smaller;
   padding: 50px;
   color: #555;
   width: 650px;
}

h1 {
   letter-spacing: 6px;
   font-size: 1.6em;
   color: #be7429;
   font-weight: bold;
}

h2 {
   text-align: left;
   letter-spacing: 6px;
   font-size: 1.4em;
   color: #be7429;
   font-weight: normal;
   width: 450px;
}

table {
   width: 550px;
   padding: 10px;
   background-color: #c5e7e0;
}

td {
   padding: 10px;
}

a {
  color: #be7429;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

.popupBox {
  position: absolute;
  top: 170px;
  left: 140px;
}

.popupCell {
   background-color: #fffafa;
}

.popupCell:hover {
  background-color: #f5ebe9;
}

.popupItem {
  color: #333;
  text-decoration: none;
  font-size: 1.2em;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Perform a check on the validity of your CSS code by right-clicking in the CSS Editor and choosing Check CSS. Any errors encountered are displayed in the Output window (Windows &gt; Output).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Switch to the <code>index.html</code> page in the editor (press Ctrl-Tab), and add a reference to the stylesheet between the <code>&lt;head&gt;</code> tags.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">&lt;link rel="stylesheet" type="text/css" href="stylesheet.css"&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the application again. The index page displays in the browser using the stylesheet you just created. Each time you type in a character, an asynchronous request is sent to the server, and returned with XML data that has been prepared by <code>autocomplete.php</code>. As you enter more characters, the number of composer names decreases to reflect the new list of matches.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion"><a class="anchor" href="#conclusion"></a>Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This concludes the Introduction to Ajax. Hopefully by now you realize that Ajax is simply exchanging information over HTTP in the background, and updating that page dynamically based on the results.</p>
</div>
<div class="paragraph">
<p>You may note that the application you built has numerous shortcomings, for example, nothing happens when a composer name is selected from the auto-complete box! You are welcome to <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FPHP%252FMyAjaxApp.zip">download the sample application</a> to see how this can be implemented using PHP technology. Furthermore, you might want to investigate validation that prevents a user from requesting a name that does not exist in the data store.</p>
</div>
</div>
</div>
      <section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        <li><a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/kb/docs/php/ajax-quickstart.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>
      </article>
    </div>
        <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="../../../../../../_/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/about">About</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/community/who">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/community">Community</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/community/mailing-lists">Mailing lists</a></li>
              <li><a href="../../../../../../front/main/community/committer">Becoming a committer</a></li>
              <li><a href="../../../../../../front/main/community/events">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/participate">Participate</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/participate/submit-pr">Submitting Pull Requests</a></li>
              <li><a href="../../../../../../front/main/participate/report-issue">Reporting Issues</a></li>
              <li><a href="../../../../../../front/main/participate/#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/help">Get Help</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/help/#documentation">Documentation</a></li>
              <li><a href="../../../../../../wiki/main/wiki">Wiki</a></li>
              <li><a href="../../../../../../front/main/help/#support">Community Support</a></li>
              <li><a href="../../../../../../front/main/help/commercial-support">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/download">Download</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/download">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="../../../../../../front/main/download/#_daily_builds_and_building_from_source">Building from source</a></li>
              <li><a href="../../../../../../front/main/download/#_older_releases">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
      </div>
    </div>

    
<script src="../../../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../../../.." data-snippet-length="100" data-stylesheet="../../../../../../_/css/search.css"></script>
<script async src="../../../../../../search-index.js"></script>
    <script src="../../../../../../_/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../../../../../_/js/vendor/what-input.js"></script>
    <script src="../../../../../../_/js/vendor/foundation.min.js"></script>
    <script src="../../../../../../_/js/vendor/jquery.colorbox-min.js"></script>
    <script src="../../../../../../_/js/netbeans.js"></script>
    <script>
       $(function(){ $(document).foundation(); });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
      $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); });
    </script>
  </body>
</html>
