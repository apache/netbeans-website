<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>The NetBeans E-commerce Tutorial - Designing the Data Model</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="The NetBeans E-commerce Tutorial - Designing the Data Model - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, The NetBeans E-commerce Tutorial - Designing the Data Model">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="../../../../../../../_/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    <link rel="stylesheet" href="../../../../../../../_/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../../../../_/images/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../../../../_/images/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../../../../_/images/fav/favicon-16x16.png">
    <link rel="manifest" href="../../../../../../../_/images/fav/site.webmanifest">
    <link rel="mask-icon" href="../../../../../../../_/images/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="../../../../../../../_/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="../../../../../../../index.html"><img src='../../../../../../../_/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <input id="search-input" type="text" placeholder="Search the docs"> </li>
            <li> <a href="../../../../../../../front/main/community">Community</a> </li>
            <li> <a href="../../../../../../../front/main/participate">Participate</a> </li>
            <li> <a href="../../../../../../../front/main/blogs">Blog</a></li>
            <li> <a href="../../../../../../../front/main/help">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="../../../../../../../front/main/download">Download</a> </li>
        </ul>
    </div>
</div>

    <!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="../../../../../../../front/main/download/nb19">Download</a></p>
        </div>
    </div>
</section>
    <div class='grid-container main-content tutorial'>
      <article class="doc">
      <h1 class="sect0">The NetBeans E-commerce Tutorial - Designing the Data Model</h1>
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/kb/docs/javaee/ecommerce/data-model.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="../../../../../../../tutorial/main/kb/docs/contributing">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#idEntities">Identifying Entities for the Data Model</a>
<ul class="sectlevel2">
<li><a href="#_use_case">Use-Case</a></li>
</ul>
</li>
<li><a href="#createERDiagram">Creating an Entity-Relationship Diagram</a>
<ul class="sectlevel2">
<li><a href="#createSchema">Creating the <code>affablebean</code> Schema</a></li>
<li><a href="#createEntities">Creating Entities</a></li>
<li><a href="#addProperties">Adding Entity Properties</a></li>
<li><a href="#identifyRelationships">Identifying Relationships</a></li>
</ul>
</li>
<li><a href="#forwardEngineer">Forward-Engineering to the Database</a></li>
<li><a href="#connectDB">Connecting to the Database from the IDE</a></li>
<li><a href="#seeAlso">See Also</a>
<ul class="sectlevel2">
<li><a href="#_netbeans_resources">NetBeans Resources</a></li>
<li><a href="#_mysql_data_modeling_resources">MySQL &amp; Data Modeling Resources</a></li>
</ul>
</li>
<li><a href="#_references">References</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial unit focuses on data modeling, or the process of creating a conceptual model of your storage system by identifying and defining the entities that your system requires, and their relationships to one another. The data model should contain all the logical and physical design parameters required to generate a script using the Data Definition Language (DDL), which can then be used to create a database.<sup><a href="#footnote1">[1]</a></sup></p>
</div>
<div class="paragraph">
<p>In this unit, you work primarily with <a href="http://wb.mysql.com/">MySQL Workbench</a>, a graphical tool that enables you to create data models, reverse-engineer SQL scripts into visual representations, forward-engineer data models into database schemata, and synchronize models with a running MySQL database server.</p>
</div>
<div class="paragraph">
<p>You begin by creating an entity-relationship diagram to represent the data model for the <code>AffableBean</code> application. When you have completed identifying and defining all entities and the relationships that bind them, you use Workbench to forward-engineer and run a DDL script that converts the data model into a database schema. Finally, you connect to the new schema from the NetBeans IDE.</p>
</div>
<div class="paragraph">
<p>You can view a live demo of the application that you build in this tutorial: <a href="http://services.netbeans.org/AffableBean/">NetBeans E-commerce Tutorial Demo Application</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Software or Resource</th>
<th class="tableblock halign-left valign-top">Version Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../../../../../../../front/main/download/" class="xref page">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java bundle, 6.8 or 6.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java Development Kit (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">version 6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://dev.mysql.com/downloads/mysql/">MySQL database server</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">version 5.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://dev.mysql.com/downloads/workbench/">MySQL Workbench</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">version 5.1 or 5.2</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Notes:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The NetBeans IDE requires the Java Development Kit (JDK) to run properly. If you do not have any of the resources listed above, the JDK should be the first item that you download and install.</p>
</li>
<li>
<p>The NetBeans IDE Java Bundle includes Java Web and EE technologies, which are required for the application you build in this tutorial.</p>
</li>
<li>
<p>You can download the complete DDL script that MySQL Workbench generates from the entity-relationship diagram you create in this tutorial: <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252Faffablebean_schema_creation.sql">affablebean_schema_creation.sql</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="idEntities"><a class="anchor" href="#idEntities"></a>Identifying Entities for the Data Model</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the real world, you may not have the luxury of designing the data model for your application. For example, your task may be to develop an application on top of an existing database system. Provided you do not have a data model to base your application on, creating one should be one of the first design steps you take before embarking on development. Creating a data model involves identifying the objects, or <em>entities</em>, required by your system and defining the relationships between them.</p>
</div>
<div class="paragraph">
<p>To begin identifying the entities we need for the data model, re-examine the use-case presented in <a href="../design/#mockups" class="xref page">Designing the Application</a>. Search for commonly-occurring nouns. For example:</p>
</div>
<div class="sect2">
<h3 id="_use_case"><a class="anchor" href="#_use_case"></a>Use-Case</h3>
<div class="paragraph">
<p><strong>Customer</strong> visits the welcome page and selects a product <strong>category</strong>. <strong>Customer</strong> browses <strong>products</strong> within the selected category page, then adds a <strong>product</strong> to his or her <strong>shopping cart</strong>. <strong>Customer</strong> continues shopping and selects a different <strong>category</strong>. <strong>Customer</strong> adds several <strong>products</strong> from this <strong>category</strong> to <strong>shopping cart</strong>. <strong>Customer</strong> selects 'view cart' option and updates quantities for cart <strong>products</strong> in the cart page. <strong>Customer</strong> verifies shopping cart contents and proceeds to checkout. In the checkout page, <strong>customer</strong> views the cost of the <strong>order</strong> and other information, fills in personal data, then submits his or her details. The <strong>order</strong> is processed and <strong>customer</strong> is taken to a confirmation page. The confirmation page provides a unique reference number for tracking the customer <strong>order</strong>, as well as a summary of the <strong>order</strong>.</p>
</div>
<div class="paragraph">
<p>The text highlighted above in <strong>bold</strong> indicates the candidates that we can consider for the data model. Upon closer inspection, you may deduce that the shopping cart does not need to be included, since the data it provides (i.e., products and their quantities) is equally offered by a customer order once it is processed. In fact, as will be demonstrated in Unit 8, <a href="../manage-sessions/" class="xref page">Managing Sessions</a>, the shopping cart merely serves as a mechanism that retains a user session temporarily while the customer shops online. We can therefore settle on the following list:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>customer</strong></p>
</li>
<li>
<p><strong>category</strong></p>
</li>
<li>
<p><strong>product</strong></p>
</li>
<li>
<p><strong>order</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>With these four entities, we can begin constructing an entity-relationship diagram (ERD).</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> In this tutorial, we create a database schema from the ERD, then use the IDE&#8217;s EclipseLink support to generate JPA entity classes from the existing database. (EclipseLink and the Java Persistence API (JPA) are covered in Unit 7, <a href="../entity-session/" class="xref page">Adding Entity Classes and Session Beans</a>.) This approach is described as <em>bottom up</em> development. An equally viable alternative is the <em>top down</em> approach.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Top down:</strong> In <em>top down</em> development, you start with an existing Java implementation of the domain model, and have complete freedom with respect to the design of the database schema. You must create mapping metadata (i.e., annotations used in JPA entity classes), and can optionally use a persistence tool to automatically generate the schema.</p>
</li>
<li>
<p><strong>Bottom up:</strong> <em>Bottom up</em> development begins with an existing database schema. In this case, the easiest way to proceed is to use forward-engineering tools to extract metadata from the schema and generate annotated Java source code (JPA entity classes).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information on top down and bottom up design strategies, see <a href="https://en.wikipedia.org/wiki/Data_modeling#Modeling_methodologies">Data modeling: Modeling methodologies</a> [Wikipedia].</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="createERDiagram"><a class="anchor" href="#createERDiagram"></a>Creating an Entity-Relationship Diagram</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Start by running MySQL Workbench. In this exercise, you use Workbench to design an entity-relationship diagram for the <code>AffableBean</code> application.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> The following instructions work for MySQL Workbench versions 5.1 <em>and</em> 5.2. The images used in this tutorial are taken from version 5.2. There are slight differences in the graphical interface between versions, however the functionality remains consistent. Because version 5.2 incorporates a query editor (previously MySQL Query Browser), as well as a server administration interface (previously MySQL Administrator), you are presented with the Home screen when opening the application (shown below).</p>
</div>
<div class="openblock feature">
<div class="content">
<div class="imageblock xref-image left">
<div class="content">
<a class="image" href="../../../../../_images/kb/docs/javaee/ecommerce/workbench-home.png"><img src="../../../../../_images/kb/docs/javaee/ecommerce/workbench-home.png" alt="workbench home"></a>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If you are working in Workbench 5.2, click <strong>Create New EER Model</strong> beneath the Data Modeling heading in the Home screen.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#createSchema">Creating the <code>affablebean</code> Schema</a></p>
</li>
<li>
<p><a href="#createEntities">Creating Entities</a></p>
</li>
<li>
<p><a href="#addProperties">Adding Entity Properties</a></p>
</li>
<li>
<p><a href="#identifyRelationships">Identifying Relationships</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="createSchema"><a class="anchor" href="#createSchema"></a>Creating the <code>affablebean</code> Schema</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the default interface, begin by creating a new schema which will be used with the <code>AffableBean</code> application. Click the plus ( <span class="image"><img src="../../../../../_images/kb/docs/javaee/ecommerce/plus-icon.png" alt="plus icon"></span> ) icon located to the right of the <strong>Physical Schemata</strong> heading.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A new panel opens in the bottom region of the interface, enabling you to specify settings for the new schema.</p>
</div>
<div class="openblock feature">
<div class="content">
<div class="imageblock xref-image left">
<div class="content">
<a class="image" href="../../../../../_images/kb/docs/javaee/ecommerce/workbench.png"><img src="../../../../../_images/kb/docs/javaee/ecommerce/workbench.png" alt="workbench"></a>
</div>
</div>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Enter the following settings for the new schema:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Schema Name:</strong> <code>affablebean</code></p>
</li>
<li>
<p><strong>Default Collation:</strong> <code>utf8 - utf8_unicode_ci</code></p>
</li>
<li>
<p><strong>Comments:</strong> <code>Schema used with the AffableBean application</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/affablebean-schema.png" alt="affablebean schema">
</div>
<div class="title">Figure 1. Enter settings for 'affablebean' schema</div>
</div>
<div class="paragraph">
<p>The new schema is created, and becomes listed under the Catalog tab in the right region of the Workbench interface.</p>
</div>
<div class="paragraph">
<p>For an explanation of character sets and collations, see the MySQL Server Manual: <a href="http://dev.mysql.com/doc/refman/5.1/en/charset-general.html">9.1.1. Character Sets and Collations in General</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="createEntities"><a class="anchor" href="#createEntities"></a>Creating Entities</h3>
<div class="paragraph">
<p>Start by creating a new entity-relationship diagram in MySQL Workbench. You can drag-and-drop entity tables onto the canvas.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Under the EER Diagrams heading in WorkBench, double-click the Add Diagram ( <span class="image"><img src="../../../../../_images/kb/docs/javaee/ecommerce/add-diagram-btn.png" alt="add diagram btn"></span> ) icon. A new EER Diagram opens displaying an empty canvas.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="tips">'EER' stands for Enhanced Entity-Relationship.</span></p>
</div>
<div class="openblock feature">
<div class="content">
<div class="imageblock xref-image left">
<div class="content">
<a class="image" href="../../../../../_images/kb/docs/javaee/ecommerce/workbench-empty-canvas.png"><img src="../../../../../_images/kb/docs/javaee/ecommerce/workbench-empty-canvas.png" alt="workbench empty canvas"></a>
</div>
</div>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Click the New Table ( <span class="image"><img src="../../../../../_images/kb/docs/javaee/ecommerce/wb-new-table-icon.png" alt="wb new table icon"></span> ) icon located in the left margin, then hover your mouse onto the canvas and click again. A new table displays on the canvas.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/wb-new-entity-table.png" alt="wb new entity table">
</div>
<div class="title">Figure 2. Click the New Table icon to drag empty tables (entities) onto the canvas</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Double-click the table. The Table editor opens in the bottom region of the interface, allowing you to configure settings for the table.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Note:</strong> The terms 'table' and 'entity' are nearly synonymous in this tutorial unit. From the point of view of a database schema, you are creating tables. From a data modeling perspective, you are creating entities. Likewise, the columns that you later create for each table correspond to entity <em>properties</em>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>In the Table editor, rename the table to one of the nouns you identified from the use-case above. Optionally add a comment describing the purpose of the table. For example:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Name:</strong> <code>customer</code></p>
</li>
<li>
<p><strong>Engine:</strong> <code>InnoDB</code></p>
</li>
<li>
<p><strong>Comments:</strong> <code>maintains customer details</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="openblock">
<div class="content">
<div class="imageblock xref-image left">
<div class="content">
<a class="image" href="../../../../../_images/kb/docs/javaee/ecommerce/wb-customer-table.png"><img src="../../../../../_images/kb/docs/javaee/ecommerce/wb-customer-table.png" alt="wb customer table"></a>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The <a href="http://www.innodb.com/">InnoDB</a> engine provides foreign key support, which is utilized in this tutorial. Later, under <a href="#forwardEngineer">Forward-Engineering to the Database</a>, you set the default storage engine used in Workbench to InnoDB.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Under the <strong>Catalog</strong> tab in the left region of WorkBench (right region for version 5.1), expand the <code>affablebean</code> &gt; <code>Tables</code> node. The <strong>customer</strong> table now displays.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/wb-catalog-tab.png" alt="wb catalog tab">
</div>
<div class="title">Figure 3. Catalog tab automatically refreshes to display any changes to the schema</div>
</div>
<div class="paragraph">
<p>More importantly, note that the new <code>customer</code> table is now included in the <code>affablebean</code> schema. Because the <code>affablebean</code> schema was selected when you created the new EER diagram, any changes you make to the diagram are automatically bound to the schema.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Repeat steps 2 - 4 above to add tables to the canvas for the remaining <a href="#nounList">nouns you identified in the use-case above</a>. Before naming your tables however, there is one important consideration which you should take into account. Certain keywords hold special meaning for the SQL dialect used by the MySQL server. Unfortunately, &#8216;order&#8217; is one of them. (For example, &#8216;order&#8217; can be used in an <code>ORDER BY</code> statement.) Therefore, instead of naming your table &#8216;order&#8217;, name it &#8216;customer_order&#8217; instead. At this stage, don&#8217;t worry about arranging the tables on the canvas in any special order.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For a list of reserved words used by the MySQL server, refer to the official manual: <a href="http://dev.mysql.com/doc/mysqld-version-reference/en/mysqld-version-reference-reservedwords-5-1.html">2.2. Reserved Words in MySQL 5.1</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/wb-entity-tables.png" alt="wb entity tables">
</div>
<div class="title">Figure 4. Create all tables for affablebean schema</div>
</div>
</div>
<div class="sect2">
<h3 id="addProperties"><a class="anchor" href="#addProperties"></a>Adding Entity Properties</h3>
<div class="paragraph">
<p>Now that you&#8217;ve added entities to the canvas, you need to specify their properties. Entity properties correspond to the columns defined in a database table. For example, consider the <code>customer</code> entity. In regard to the <code>AffableBean</code> application, what aspects of a customer would need to be persisted to the database? These would likely be all of the information gathered in the <a href="../design/#checkout" class="xref page">checkout page</a>'s customer details form, as well as some association to the processed order.</p>
</div>
<div class="paragraph">
<p>When adding properties, you need to determine the most appropriate data type for each property. MySQL supports a number of data types in several categories: numeric types, date and time types, and string (character) types. Refer to the official manual for a summary of data types within each category: <a href="http://dev.mysql.com/doc/refman/5.1/en/data-type-overview.html">10.1. Data Type Overview</a>. In this tutorial, the data types have been chosen for you. Choosing the appropriate data type plays a significant role in optimizing storage on your database server. For more information see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://dev.mysql.com/doc/refman/5.1/en/storage-requirements.html">10.5. Data Type Storage Requirements</a></p>
</li>
<li>
<p><a href="http://dev.mysql.com/doc/refman/5.1/en/choosing-types.html">10.6. Choosing the Right Type for a Column</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following steps describe how you can use MySQL Workbench to add properties to an existing entity in your ERD. As with most of the initial design steps, determining the entity properties would call for careful consideration of the business problem that needs to be solved, and could require hours of analysis as well as numerous consultations with the client.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Double-click the <code>customer</code> table heading to bring up the Table editor in WorkBench.</p>
</li>
<li>
<p>In the Table editor click the Columns tab, then click inside the displayed table to edit the first column. Enter the following details:</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datatype</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK (Primary Key)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NN (Not Null)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UN (Unsigned)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AI (Autoincrement)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/customer-id-column.png" alt="customer id column">
</div>
<div class="title">Figure 5. Click to edit table columns in the Table editor</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Continue working in the <code>customer</code> table by adding the following <code>VARCHAR</code> columns. These columns should be self-explanatory, and represent data that would need to be captured for the Affable Bean business to process a customer order and send a shipment of groceries to the customer address.</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datatype</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NN (Not Null)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(45)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>email</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(45)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>phone</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(45)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>address</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(45)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>city_region</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(2)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cc_number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(19)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><span class="tips">For an explanation of the <code>VARCHAR</code> data type, see the MySQL Reference Manual: <a href="http://dev.mysql.com/doc/refman/5.1/en/char.html">10.4.1. The CHAR and VARCHAR Types</a>.</span></p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/customer-varchar-columns.png" alt="customer varchar columns">
</div>
<div class="title">Figure 6. Edit inline to add columns to customer table</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>With the <code>customer</code> table selected on the canvas, choose Arrange &gt; Reset Object Size to resize the table so that all columns are visible on the canvas. Also click the Indexes row so that any table indexes are also visible. (This includes primary and foreign keys, which becomes useful when you begin creating relationships between tables later in the exercise.)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you finish, the <code>customer</code> entity looks as follows.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/customer-table.png" alt="customer table">
</div>
<div class="title">Figure 7. 'customer' table on EER canvas displays columns</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Follow the steps outlined above to create columns for the remaining tables.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_category"><a class="anchor" href="#_category"></a>category</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column</th>
<th class="tableblock halign-left valign-top">Datatype</th>
<th class="tableblock halign-left valign-top">PK</th>
<th class="tableblock halign-left valign-top">NN</th>
<th class="tableblock halign-left valign-top">UN</th>
<th class="tableblock halign-left valign-top">AI</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TINYINT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(45)</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_customer_order"><a class="anchor" href="#_customer_order"></a>customer_order</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2858%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column</th>
<th class="tableblock halign-left valign-top">Datatype</th>
<th class="tableblock halign-left valign-top">PK</th>
<th class="tableblock halign-left valign-top">NN</th>
<th class="tableblock halign-left valign-top">UN</th>
<th class="tableblock halign-left valign-top">AI</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>amount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DECIMAL(6,2)</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>date_created</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TIMESTAMP</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CURRENT_TIMESTAMP</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>confirmation_number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">` `</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_product"><a class="anchor" href="#_product"></a>product</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2858%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column</th>
<th class="tableblock halign-left valign-top">Datatype</th>
<th class="tableblock halign-left valign-top">PK</th>
<th class="tableblock halign-left valign-top">NN</th>
<th class="tableblock halign-left valign-top">UN</th>
<th class="tableblock halign-left valign-top">AI</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(45)</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>price</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DECIMAL(5,2)</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TINYTEXT</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>last_update</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TIMESTAMP</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For details on the <code>TIMESTAMP</code> data type, see the MySQL Reference Manual: <a href="http://dev.mysql.com/doc/refman/5.1/en/timestamp.html">10.3.1.1. TIMESTAMP Properties</a>.</p>
</div>
<div class="paragraph">
<p>When you finish, your canvas will look similar to the following.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/affablebean-tables.png" alt="affablebean tables">
</div>
<div class="title">Figure 8. Use the Table editor to add columns to all tables on canvas</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="identifyRelationships"><a class="anchor" href="#identifyRelationships"></a>Identifying Relationships</h3>
<div class="paragraph">
<p>So far, the entity-relationship diagram contains several entities, but lacks any relationships between them. The data model that we are creating must also indicate whether objects are aware of (i.e., contain references to) one another. If one object contains a reference to another object, this is known as a <em>unidirectional</em> relationship. Likewise, if both objects refer to each other, this is called a <em>bidirectional</em> relationship.</p>
</div>
<div class="paragraph">
<p>References correlate to foreign keys in the database schema. You will note that, as you begin linking tables together, foreign keys are added as new columns in the tables being linked.</p>
</div>
<div class="paragraph">
<p>Two other pieces of information are also commonly relayed in an ERD: <em>cardinality</em> (i.e., multiplicity) and <em>ordinality</em> (i.e., optionality). These are discussed below, as you begin adding relationships to entities on the canvas. In order to complete the ERD, you essentially need to create two <em>one-to-many</em> relationships, and one <em>many-to-many</em> relationship. Details follow.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#oneToMany">Creating One-To-Many Relationships</a></p>
</li>
<li>
<p><a href="#manyToMany">Creating Many-To-Many Relationships</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="oneToMany"><a class="anchor" href="#oneToMany"></a>Creating One-To-Many Relationships</h4>
<div class="paragraph">
<p>Examine the four objects currently on the canvas while considering the business problem. You can deduce the following two <em>one-to-many</em> relationships:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A category must contain one or more products</p>
</li>
<li>
<p>A customer must have placed one or more orders</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Incorporate these two relationships into the ERD. You can download a copy of the MySQL Workbench project that contains the four entities required for the following steps: <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252Faffablebean.mwb">affablebean.mwb</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the left margin, click the 1:n Non-Identifying Relationship ( <span class="image"><img src="../../../../../_images/kb/docs/javaee/ecommerce/one-many-btn.png" alt="one many btn"></span> ) button. This enables you to create a <em>one-to-many</em> relationship.</p>
</li>
<li>
<p>Click the <code>product</code> table, then click the <code>category</code> table. The first table you click will contain the foreign key reference to the second table. Here, we want the <code>product</code> table to contain a reference to <code>category</code>. In the image below, you see that a new column, <code>category_id</code>, has been added to the <code>product</code> table, and that a foreign key index, <code>fk_product_category</code> has been added to the table&#8217;s indexes.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/product-category-relationship.png" alt="product category relationship">
</div>
<div class="title">Figure 9. A one-to-many relationship is defined between the category and product objects</div>
</div>
<div class="paragraph">
<p>Since foreign keys must be of the same data type as the columns they reference, notice that <code>category_id</code> is of type <code>TINYINT</code>, similar to the <code>category</code> table&#8217;s primary key.</p>
</div>
<div class="paragraph">
<p><span class="tips">The entity-relationship diagram in this tutorial uses <a href="https://en.wikipedia.org/wiki/Entity-relationship_model#Crow.27s_Foot_Notation">Crow&#8217;s Foot</a> notation. You can alter the relationship notation in WorkBench by choosing Model &gt; Relationship Notation.</span></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Double-click the relationship (i.e., click the dashed line between the two entities). The Relationship editor opens in the bottom region of the interface.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Change the default caption to &#8216;belongs to&#8217;. In other words, "product x belongs to category y." Note that this is a <em>unidirectional</em> relationship: A <code>product</code> object contains a reference to the category it belongs to, but the related <code>category</code> object does not contain any references to the products it contains.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Click the Foreign Key tab in the Relationship editor. You see the following display.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/foreign-key-tab.png" alt="foreign key tab">
</div>
<div class="title">Figure 10. Use the Foreign Key tab to modify a relationship&#8217;s ordinality and cardinality</div>
</div>
<div class="paragraph">
<p>Under the Foreign key tab, you can modify a relationship&#8217;s:
* <strong>cardinality:</strong> whether the relationship between two objects is <em>one-to-one</em> or <em>one-to-many</em>.
* <strong>ordinality:</strong> whether a reference between entities must exist in order to maintain the integrity of the model. (Toggle the Mandatory checkbox for either side.)
* <strong>type:</strong> (i.e., <em>identifying</em> or <em>non-identifying</em>). A non-identifying relationship, such as this one, refers to the fact that the child object (<code>product</code>) can be identified independently of the parent (<code>category</code>). An identifying relationship means that the child cannot be uniquely identified without the parent. An example of this is demonstrated later, when you create a many-to-many relationship between the <code>product</code> and <code>order</code> tables.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Click the 1:n Non-Identifying Relationship ( <span class="image"><img src="../../../../../_images/kb/docs/javaee/ecommerce/one-many-btn.png" alt="one many btn"></span> ) button. In the following steps, you create a <em>one-to-many</em> relationship between the <code>customer</code> and <code>customer_order</code> objects.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Click the <code>order</code> table first (this table will contain the foreign key), then click the <code>customer</code> table. A relationship is formed between the two tables.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Click the link between the two tables, and in the Relationship editor that displays, change the default caption to &#8216;is placed by&#8217;. The relationship now reads, "customer order x is placed by customer y."</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/order-customer-relationship.png" alt="order customer relationship">
</div>
<div class="title">Figure 11. A one-to-many relationship is defined between the customer and order objects</div>
</div>
<div class="paragraph">
<p>You can click and drag tables on the canvas into whatever position makes the most sense for your model. In the image above, the <code>order</code> table has been moved to the left of <code>customer</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="manyToMany"><a class="anchor" href="#manyToMany"></a>Creating Many-To-Many Relationships</h4>
<div class="paragraph">
<p><em>Many-to-many</em> relationships occur when both sides of a relationship can have numerous references to related objects. For example, imagine the Affable Bean business offered products that could be listed under multiple categories, such as cherry ice cream, sausage rolls, or avocado soufflé. The data model would have to account for this by including a <em>many-to-many</em> relationship between <code>product</code> and <code>category</code>, since a category contains multiple products, and a product can belong to multiple categories.</p>
</div>
<div class="paragraph">
<p>In order to implement a <em>many-to-many</em> relationship in a database, it is necessary to break the relationship down into two <em>one-to-many</em> relationships. In doing so, a third table is created containing the primary keys of the two original tables. The <code>product</code> - <code>category</code> relationship described above might look as follows in the data model.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/many-to-many.png" alt="many to many">
</div>
<div class="title">Figure 12. A many-to-many relationship is depicted as two one-to-many relationships</div>
</div>
<div class="paragraph">
<p>Now, consider how the application will persist customer orders. The <code>customer_order</code> entity already contains necessary properties, such as the date it is created, its confirmation number, amount, and a reference to the customer who placed it. However, there currently is no indication of the products contained in the order, nor their quantities. You can resolve this by creating a <em>many-to-many</em> relationship between <code>customer_order</code> and <code>product</code>. This way, to determine which products are contained in a given order, the application&#8217;s business logic can query the new table that arises from the many-to-many relationship, and search for all records that match an <code>order_id</code>. Because customers can specify quantities for products in their shopping carts, we can also add a <code>quantity</code> column to the table.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the left margin, click the n:m Identifying Relationship ( <span class="image"><img src="../../../../../_images/kb/docs/javaee/ecommerce/many-many-btn.png" alt="many many btn"></span> ) button. This enables you to create a <em>many-to-many</em> relationship.</p>
</li>
<li>
<p>Click the <code>customer_order</code> table, then click the <code>product</code> table. A new table appears, named <code>customer_order_has_product</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Recall that an <em>identifying relationship</em> means that the child cannot be uniquely identified without the parent. Identifying relationships are indicated on the Workbench canvas by a solid line linking two tables. Here, the <code>customer_order_has_product</code> table forms an identifying relationship with its two parent tables, <code>customer_order</code> and <code>product</code>. A record contained in the <code>customer_order_has_product</code> table requires references from both tables in order to exist.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Arrange the tables according to the following image. The <em>many-to-many</em> relationship is highlighted below.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/many-to-many-order-product.png" alt="many to many order product">
</div>
<div class="title">Figure 13. The 'customer_order_has_product' table contains two foreign keys to the order and product tables</div>
</div>
<div class="paragraph">
<p>The new <code>customer_order_has_product</code> table contains two foreign keys, <code>fk_customer_order_has_product_customer_order</code> and <code>fk_customer_order_has_product_product</code>, which reference the primary keys of the <code>customer_order</code> and <code>product</code> tables, respectively. These two foreign keys form a composite primary key for the <code>customer_order_has_product</code> table.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Change the name of the new <code>customer_order_has_product</code> table to &#8216;ordered_product&#8217;. Double-click the <code>customer_order_has_product</code> table to open the Table editor. Enter <code>ordered_product</code> into the Name field.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Rename the foreign key indexes to correspond to the new table name. In the `ordered_product&#8217;s Table editor, click the Foreign Keys tab. Then, click into both foreign key entries and replace &#8216;customer_order_has_product&#8217; with &#8216;ordered_product&#8217;. When you finish, the two entries should read:</p>
<div class="ulist">
<ul>
<li>
<p><code>fk_*ordered_product*_customer_order</code></p>
</li>
<li>
<p><code>fk_*ordered_product*_product</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/ordered-product-foreign-key.png" alt="ordered product foreign key">
</div>
<div class="title">Figure 14. Rename the foreign key indexes under the Foreign Keys tab in the Table editor</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Double-click the lines between the two objects and delete the default captions in the Relationship editor.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Create a <code>quantity</code> column in the <code>ordered_product</code> table. To do so, click the Columns tab in the `ordered_product&#8217;s Table editor. Enter the following details.</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datatype</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NN (Not Null)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UN (Unsigned)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>quantity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SMALLINT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✓</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/quantity-column.png" alt="quantity column">
</div>
<div class="title">Figure 15. Add a 'quantity' column to the 'order_has_product' table</div>
</div>
<div class="paragraph">
<p>You have now completed the ERD (entity-relationship diagram). This diagram represents the data model for the <code>AffableBean</code> application. As will later be demonstrated, the JPA entity classes that you create will be derived from the entities existing in the data model.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/affablebean-erd.png" alt="affablebean erd">
</div>
<div class="title">Figure 16. ERD for the AffableBean application</div>
</div>
<div class="paragraph">
<p>Choose View &gt; Toggle Grid to disable the canvas grid. You can also create notes for your diagram using the New Text Object ( <span class="image"><img src="../../../../../_images/kb/docs/javaee/ecommerce/text-object-btn.png" alt="text object btn"></span> ) button in the left margin.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="forwardEngineer"><a class="anchor" href="#forwardEngineer"></a>Forward-Engineering to the Database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To incorporate the data model you created into the MySQL database, you can employ WorkBench to forward-engineer the diagram into an SQL script (more precisely, a DDL script) to generate the schema. The wizard that you use also enables you to immediately run the script on your database server.</p>
</div>
<div class="paragraph">
<p><strong>Important:</strong> Make sure your MySQL database server is running. Steps describing how to setup and run the database are provided in <a href="../setup-dev-environ/#communicate" class="xref page">Setting up the Development Environment: Communicating with the Database Server</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set the default storage engine used in Workbench to InnoDB. Choose Tools &gt; Options (MySQLWorkbench &gt; Preferences on Mac) to open the Workbench Preferences window. Click the MySQL tab, then select InnoDB as the default storage engine.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/inno-db.png" alt="inno db">
</div>
<div class="title">Figure 17. Set the default storage engine to InnoDB</div>
</div>
<div class="paragraph">
<p>The <a href="http://www.innodb.com/">InnoDB</a> engine provides foreign key support, which is utilized in this tutorial.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Click OK to exit the Preferences window.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Choose Database &gt; Forward Engineer from the main menu.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>In the first panel of the Forward Engineer to Database wizard, select &#8216;DROP Objects Before Each CREATE Object&#8217;, and &#8216;Generate DROP SCHEMA&#8217;.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/forward-engineer-wzd.png" alt="forward engineer wzd">
</div>
<div class="title">Figure 18. Enable DROP options to be generated in the SQL script</div>
</div>
<div class="paragraph">
<p>These <code>DROP</code> options are convenient for prototyping - if you need to make changes to the schema or schema tables, the script will first delete (i.e., <em>drop</em>) these items before recreating them. (If you attempt to create items on the MySQL server that already exist, the server will flag an error.)</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Click Continue. In Select Objects to Forward Engineer panel, note that the Export MySQL Table Objects option is selected by default. Click the Show Filter button and note that all five tables in the <code>affablebean</code> schema are included.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Click Continue. In the Review SQL Script panel, you can examine the SQL script that has been generated based on the data model. Optionally, click Save to File to save the script to a location on your computer.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Note:</strong> In examining the script, you may notice that the following variables are set at the top of the file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL';</code></pre>
</div>
</div>
<div class="paragraph">
<p>For an explanation of what these variables are, and their purpose in the script, see the official Workbench manual: <a href="http://dev.mysql.com/doc/workbench/en/workbench-faq.html">Chapter 11. MySQL Workbench FAQ</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Click Continue. In the Connection Options panel, set the parameters for connecting to the running MySQL server.</p>
<div class="ulist">
<ul>
<li>
<p><strong>Hostname:</strong> <code>127.0.0.1</code> (<em>or `localhost`</em>)</p>
</li>
<li>
<p><strong>Port:</strong> <code>3306</code></p>
</li>
<li>
<p><strong>Username:</strong> <code>root</code></p>
</li>
<li>
<p><strong>Password:</strong> <code>nbuser</code>
(The parameters you set should correspond to those from <a href="../setup-dev-environ/#communicate" class="xref page">Setting up the Development Environment: Communicating with the Database Server</a>.)</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Click Execute. In the final panel of the wizard, you receive confirmation that the wizard was able to connect to and execute the script successfully.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Click Close to exit the wizard.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <code>affablebean</code> schema is now created and exists on your MySQL server. In the next step, you connect to the schema, or <em>database</em>, from the IDE. At this stage you may ask, "What&#8217;s the difference between a schema and a database?" In fact, the MySQL command <code>CREATE SCHEMA</code> is a synonym for <code>CREATE DATABASE</code>. (See <a href="http://dev.mysql.com/doc/refman/5.1/en/create-database.html">12.1.10. CREATE DATABASE Syntax</a>.) Think of a schema as a blueprint that defines the contents of the database, including tables, relationships, views, etc. A database implements the schema by containing data in a way that adheres to the structure of the schema. This is similar to the object-oriented world of Java classes and objects. A class defines an object. When a program runs however, objects (i.e., class instances) are created, managed, and eventually destroyed as the program runs its course.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="connectDB"><a class="anchor" href="#connectDB"></a>Connecting to the Database from the IDE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that the <code>affablebean</code> schema exists on your MySQL server, ensure that you can view the tables you created in the ERD from the IDE&#8217;s Services window.</p>
</div>
<div class="paragraph">
<p><strong>Important:</strong> Make sure that you have followed the steps outlined in <a href="../setup-dev-environ/#communicate" class="xref page">Setting up the Development Environment: Communicating with the Database Server</a>. This heading describes how to run the MySQL database server, register it with the IDE, create a database instance, and form a connection to the instance from the IDE.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the IDE, open the Services window (Ctrl-5; ⌘-5 on Mac) and locate the database connection node ( <span class="image"><img src="../../../../../_images/kb/docs/javaee/ecommerce/db-connection-node.png" alt="db connection node"></span> ) for the <code>affablebean</code> database instance you created in the <a href="../setup-dev-environ/#communicate" class="xref page">previous tutorial unit</a>.</p>
</li>
<li>
<p>Refresh the connection to the <code>affablebean</code> database. To do so, right-click the connection node and choose Refresh.</p>
</li>
<li>
<p>Expand the Tables node. You can now see the five tables defined by the schema.</p>
</li>
<li>
<p>Expand any of the table nodes. Each table contains the columns and indexes that you created when working in MySQL Workbench.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/services-window-schema.png" alt="services window schema">
</div>
<div class="title">Figure 19. Update the database connection to view schema tables</div>
</div>
<div class="paragraph">
<p>The IDE is now connected to a database that uses the schema you created for the <code>AffableBean</code> application. From the IDE, you can now view any table data you create in the database, as well as directly modify, add and delete data. You will explore some of these options later, in <a href="../connect-db/" class="xref page">Connecting the Application to the Database</a>, after you&#8217;ve added sample data to the database.</p>
</div>
<div class="paragraph">
<p><a href="../../../../../../../front/main/community/mailing-lists/" class="xref page">Send Us Your Feedback</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="seeAlso"><a class="anchor" href="#seeAlso"></a>See Also</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_netbeans_resources"><a class="anchor" href="#_netbeans_resources"></a>NetBeans Resources</h3>
<div class="ulist">
<ul>
<li>
<p><a href="#front::articles/mysql.adoc" class="xref unresolved">MySQL and NetBeans IDE</a></p>
</li>
<li>
<p><a href="../../../ide/mysql/" class="xref page">Connecting to a MySQL Database</a></p>
</li>
<li>
<p><a href="../../../web/mysql-webapp/" class="xref page">Creating a Simple Web Application Using a MySQL Database</a></p>
</li>
<li>
<p><a href="../../../ide/database-improvements-screencast/" class="xref page">Screencast: Database Support in NetBeans IDE</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_mysql_data_modeling_resources"><a class="anchor" href="#_mysql_data_modeling_resources"></a>MySQL &amp; Data Modeling Resources</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://wb.mysql.com/">MySQL Workbench Blog</a></p>
</li>
<li>
<p><a href="http://forums.mysql.com/index.php?151">MySQL Workbench Forum</a></p>
</li>
<li>
<p><a href="http://dev.mysql.com/librarian/">The MySQL Community Librarian</a></p>
</li>
<li>
<p><a href="http://dev.mysql.com/doc/workbench/en/index.html">MySQL Workbench Reference Manual</a></p>
</li>
<li>
<p><a href="http://dev.mysql.com/doc/refman/5.1/en/">MySQL 5.1 Reference Manual</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Innodb">InnoDB</a> [Wikipedia]</p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Database_model">Database Model</a> [Wikipedia]</p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Data_modeling">Data Modeling</a> [Wikipedia]</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>References</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#fn1">^</a> Data Definition Language (DDL) is a subset of the SQL language and includes statements such as <code>CREATE TABLE</code>, <code>DROP</code>, and <code>ALTER</code>. Other subsets include Data Manipulation Language (DML), and Data Control Language (DCL). For more information, see <a href="https://en.wikipedia.org/wiki/Data_Definition_Language">Data Definition Language</a> [Wikipedia].</p>
</li>
</ol>
</div>
</div>
</div>
      <section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        <li><a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/kb/docs/javaee/ecommerce/data-model.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>
      </article>
    </div>
        <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="../../../../../../../_/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
            <h1><a href="../../../../../../../front/main/about">About</a></h1>
            <ul>
              <li><a href="../../../../../../../front/main/community/who">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../../front/main/community">Community</a></h1>
            <ul>
              <li><a href="../../../../../../../front/main/community/mailing-lists">Mailing lists</a></li>
              <li><a href="../../../../../../../front/main/community/committer">Becoming a committer</a></li>
              <li><a href="../../../../../../../front/main/community/events">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../../front/main/participate">Participate</a></h1>
            <ul>
              <li><a href="../../../../../../../front/main/participate/submit-pr">Submitting Pull Requests</a></li>
              <li><a href="../../../../../../../front/main/participate/report-issue">Reporting Issues</a></li>
              <li><a href="../../../../../../../front/main/participate/#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../../front/main/help">Get Help</a></h1>
            <ul>
              <li><a href="../../../../../../../front/main/help/#documentation">Documentation</a></li>
              <li><a href="../../../../../../../wiki/main/wiki">Wiki</a></li>
              <li><a href="../../../../../../../front/main/help/#support">Community Support</a></li>
              <li><a href="../../../../../../../front/main/help/commercial-support">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../../front/main/download">Download</a></h1>
            <ul>
              <li><a href="../../../../../../../front/main/download">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="../../../../../../../front/main/download/#_daily_builds_and_building_from_source">Building from source</a></li>
              <li><a href="../../../../../../../front/main/download/#_older_releases">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
      </div>
    </div>

    
<script src="../../../../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../../../../.." data-snippet-length="100" data-stylesheet="../../../../../../../_/css/search.css"></script>
<script async src="../../../../../../../search-index.js"></script>
    <script src="../../../../../../../_/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../../../../../../_/js/vendor/what-input.js"></script>
    <script src="../../../../../../../_/js/vendor/foundation.min.js"></script>
    <script src="../../../../../../../_/js/vendor/jquery.colorbox-min.js"></script>
    <script src="../../../../../../../_/js/netbeans.js"></script>
    <script>
       $(function(){ $(document).foundation(); });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
      $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); });
    </script>
  </body>
</html>
