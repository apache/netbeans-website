<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>The NetBeans E-commerce Tutorial - Adding Entity Classes and Session Beans</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="The NetBeans E-commerce Tutorial - Adding Entity Classes and Session Beans - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, The NetBeans E-commerce Tutorial - Adding Entity Classes and Session Beans">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="../../../../../../../_/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    <link rel="stylesheet" href="../../../../../../../_/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../../../../_/images/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../../../../_/images/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../../../../_/images/fav/favicon-16x16.png">
    <link rel="manifest" href="../../../../../../../_/images/fav/site.webmanifest">
    <link rel="mask-icon" href="../../../../../../../_/images/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="../../../../../../../_/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="../../../../../../../index.html"><img src='../../../../../../../_/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <input id="search-input" type="text" placeholder="Search the docs"> </li>
            <li> <a href="../../../../../../../front/main/community">Community</a> </li>
            <li> <a href="../../../../../../../front/main/participate">Participate</a> </li>
            <li> <a href="../../../../../../../front/main/blogs">Blog</a></li>
            <li> <a href="../../../../../../../front/main/help">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="../../../../../../../front/main/download">Download</a> </li>
        </ul>
    </div>
</div>

    <!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 21</h1>
            <p><a class="button success" href="../../../../../../../front/main/download/nb21">Download</a></p>
        </div>
    </div>
</section>
    <div class='grid-container main-content tutorial'>
      <article class="doc">
      <h1 class="sect0">The NetBeans E-commerce Tutorial - Adding Entity Classes and Session Beans</h1>
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/kb/docs/javaee/ecommerce/entity-session.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="../../../../../../../tutorial/main/kb/docs/contributing">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_tutorial_contents">Tutorial Contents</a></li>
<li><a href="#whatEJB">What are EJB and JPA Technologies?</a>
<ul class="sectlevel2">
<li><a href="#ejb">Enterprise JavaBeans</a></li>
<li><a href="#jpa">Java Persistence</a></li>
</ul>
</li>
<li><a href="#whatSession">What are Session Beans?</a></li>
<li><a href="#specification">About Specifications and Implementations</a></li>
<li><a href="#addEntity">Adding Entity Classes</a></li>
<li><a href="#addSession">Adding Session Beans</a></li>
<li><a href="#access">Accessing Data with EJBs</a>
<ul class="sectlevel2">
<li><a href="#index">index page</a></li>
<li><a href="#category">category page</a></li>
</ul>
</li>
<li><a href="#seeAlso">See Also</a>
<ul class="sectlevel2">
<li><a href="#_netbeans_resources">NetBeans Resources</a></li>
<li><a href="#_ejb_resources">EJB Resources</a></li>
<li><a href="#_jpa_resources">JPA Resources</a></li>
<li><a href="#_glassfish_resources">GlassFish Resources</a></li>
<li><a href="#_technical_articles">Technical Articles</a></li>
<li><a href="#_books">Books</a></li>
</ul>
</li>
<li><a href="#_references">References</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="_tutorial_contents"><a class="anchor" href="#_tutorial_contents"></a>Tutorial Contents</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="../intro/" class="xref page">Introduction</a></p>
</li>
<li>
<p><a href="../design/" class="xref page">Designing the Application</a></p>
</li>
<li>
<p><a href="../setup-dev-environ/" class="xref page">Setting up the Development Environment</a></p>
</li>
<li>
<p><a href="../data-model/" class="xref page">Designing the Data Model</a></p>
</li>
<li>
<p><a href="../page-views-controller/" class="xref page">Preparing the Page Views and Controller Servlet</a></p>
</li>
<li>
<p><a href="../connect-db/" class="xref page">Connecting the Application to the Database</a></p>
</li>
<li>
<p><strong>Adding Entity Classes and Session Beans</strong></p>
<div class="ulist">
<ul>
<li>
<p><a href="#whatEJB">What are EJB and JPA Technologies?</a></p>
</li>
<li>
<p><a href="#whatSession">What are Session Beans?</a></p>
</li>
<li>
<p><a href="#specification">About Specifications and Implementations</a></p>
</li>
<li>
<p><a href="#addEntity">Adding Entity Classes</a></p>
</li>
<li>
<p><a href="#addSession">Adding Session Beans</a></p>
</li>
<li>
<p><a href="#access">Accessing Data with EJBs</a></p>
</li>
<li>
<p><a href="#seeAlso">See Also</a></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p><a href="../manage-sessions/" class="xref page">Managing Sessions</a></p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p><a href="../transaction/" class="xref page">Integrating Transactional Business Logic</a></p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p><a href="../language/" class="xref page">Adding Language Support</a></p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="11">
<li>
<p><a href="../security/" class="xref page">Securing the Application</a></p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="12">
<li>
<p><a href="../test-profile/" class="xref page">Testing and Profiling</a></p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="13">
<li>
<p><a href="../conclusion/" class="xref page">Conclusion</a></p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/netbeans-stamp-68-69.png" alt="netbeans stamp 68 69">
</div>
<div class="title">Figure 1. Content on this page applies to NetBeans IDE, versions 6.8 and 6.9</div>
</div>
<div class="paragraph">
<p>This tutorial unit introduces the <a href="http://java.sun.com/products/ejb/">Enterprise JavaBeans</a> (EJB) and <a href="http://java.sun.com/javaee/technologies/persistence.jsp">Java Persistence</a> (JPA) technologies. In it, you use two of the IDE&#8217;s wizards that are essential to Java EE development. These are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Entity Classes from Database wizard:</strong> Creates a Java Persistence API entity class for each selected database table, complete with named query annotations, fields representing columns, and relationships representing foreign keys.</p>
</li>
<li>
<p><strong>Session Beans for Entity Classes wizard:</strong> Creates an EJB session facade for each entity class with basic access methods.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These two wizards provide an efficient way for you to quickly set up the model for your application. If you reexamine the <a href="../design/#mvcDiagram" class="xref page">MVC diagram</a> for the application you are building, you can see where EJB session beans and JPA entity classes fit into its structure.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/mvc-diagram.png" alt="mvc diagram">
</div>
<div class="title">Figure 2. MVC diagram of the AffableBean application</div>
</div>
<div class="paragraph">
<p>In this unit, the entity classes you create form a Java-based representation of the <code>affablebean</code> database. While each entity class represents a database table, instances of entity classes correspond to records that can be saved (i.e., <em>persisted</em>) to the database. The business logic of the application is encapsulated by session beans, which can either be used as <em>facade</em> classes that enable CRUD (Create-Read-Update-Delete) access to entities (as demonstrated here), or they can contain code that implements actions specific to your application. (An example of this is provided in <a href="../transaction/" class="xref page">Unit 9: Integrating Transactional Business Logic</a>).</p>
</div>
<div class="paragraph">
<p>You can view a live demo of the application that you build in this tutorial: <a href="http://services.netbeans.org/AffableBean/">NetBeans E-commerce Tutorial Demo Application</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Software or Resource</th>
<th class="tableblock halign-left valign-top">Version Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../../../../../../../front/main/download/" class="xref page">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java bundle, 6.8 or 6.9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java Development Kit (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">version 6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#glassFish">GlassFish server</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">v3 or Open Source Edition 3.0.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://dev.mysql.com/downloads/mysql/">MySQL database server</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">version 5.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot3.zip">AffableBean project</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">snapshot 3</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Notes:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The NetBeans IDE requires the Java Development Kit (JDK) to run properly. If you do not have any of the resources listed above, the JDK should be the first item that you download and install.</p>
</li>
<li>
<p>The NetBeans IDE Java Bundle includes Java Web and EE technologies, which are required for the application you build in this tutorial.</p>
</li>
<li>
<p>The NetBeans IDE Java Bundle also includes the GlassFish server, which you require for this tutorial. You could <a href="http://glassfish.dev.java.net/public/downloadsindex.html">download the GlassFish server independently</a>, but the version provided with the NetBeans download has the added benefit of being automatically registered with the IDE.</p>
</li>
<li>
<p>You can follow this tutorial unit without having completed previous units. To do so, see the <a href="../setup/" class="xref page">setup instructions</a>, which describe how to prepare the database and establish connectivity between the IDE, GlassFish, and MySQL.</p>
</li>
<li>
<p><a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot4.zip">Snapshot 4</a> of the <code>AffableBean</code> project is available for download and corresponds to state the project after completing this unit using NetBeans IDE 6.9.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="whatEJB"><a class="anchor" href="#whatEJB"></a>What are EJB and JPA Technologies?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Up until now, the project that you&#8217;ve been developing in this tutorial could be run in a web server with a servlet container, such as Apache Tomcat. After all, you&#8217;ve so far only made use of JSTL and servlet technologies, and are connecting to the database directly using JDBC. In fact, you could theoretically continue to develop the application using just these technologies, while manually coding for all aspects of your application, including thread-safety, transactions, and security. However, using Enterprise beans with JPA entity classes allows you focus on the business logic of your application while relying on solutions that have already been tried and tested. The following sections introduce the two technologies and define their role in EE development.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#ejb">Enterprise JavaBeans</a></p>
</li>
<li>
<p><a href="#jpa">Java Persistence</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="ejb"><a class="anchor" href="#ejb"></a>Enterprise JavaBeans</h3>
<div class="paragraph">
<p>The official <a href="http://java.sun.com/products/ejb/">EJB product page</a> describes EnterPrise JavaBeans technology as a "server-side component architecture" that "enables rapid and simplified development of distributed, transactional, secure and portable applications." You can apply EJBs (i.e., Enterprise beans) to your projects, and the services provided by the technology remain transparent to you as a developer, thus eliminating the tedious and often error-prone task of adding a lot of boiler plate code which would otherwise be required. If you are new to EE development, you may question the need for EJBs in your Java web application. The book <a href="http://www.manning.com/panda/">EJB 3 In Action</a>, by Debu Panda, Reza Rahman and Derek Lane, paraphrases the role of EJB technology nicely:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>_Although many people think EJBs are overkill for developing relatively simple web applications of moderate size, nothing could be further from the truth. When you build a house, you don&#8217;t build everything from scratch. Instead, you buy materials or even the services of a contractor as you need it. It isn&#8217;t too practical to build an enterprise application from scratch either. Most server-side applications have a lot in common, including churning business logic, managing application state, storing and retrieving information from a relational database, managing transactions, implementing security, performing asynchronous processing, integrating systems, and so on.</p>
</div>
<div class="paragraph">
<p>As a framework, the EJB container provides these kinds of common functionality as out-of-the-box services so that your EJB components can use them in your applications without reinventing the wheel. For instance, let&#8217;s say that when you build a credit card module in your web application, you write a lot of complex and error-prone code to manage transactions and security access control. You could have avoided that by using the declarative transaction and security services provided by the EJB container. These services as well as many others are available to EJB components when they are deployed in an EJB container. This means writing high-quality, feature-rich applications much faster than you might think._<sup><a href="#footnote1">[1]</a></sup></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can think of EJB both as components, or Java classes that are incorporated in your project, as well as a <em>framework</em> that provides numerous enterprise-related services. Some of the services that we take advantage of in this tutorial are described in <a href="http://www.manning.com/panda/">EJB 3 In Action</a> as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Pooling:</strong> For each EJB component, the EJB platform creates a pool of component instances that are shared by clients. At any point in time, each pooled instance is only allowed to be used by a single client. As soon as an instance is finished servicing a client, it is returned to the pool for reuse instead of being frivolously discarded for the garbage collector to reclaim.</p>
</li>
<li>
<p><strong>Thread Safety:</strong> EJB makes all components thread-safe and highly performant in ways athat are completely invisible. This means that you can write your server components as if you were developing a single-threaded desktop application. It doesn&#8217;t matter how complex the component itself is; EJB will make sure it is thread-safe.</p>
</li>
<li>
<p><strong>Transactions:</strong> EJB supports declarative transaction management that helps you add transactional behavior to components using simple configuration instead of code. In effect, you can designate any component method to be transactional. If the method completes normally, EJB commits the transaction and makes the data changes made by the method permanent. Otherwise the transaction is rolled back. Container-managed EJB transactions are demonstrated in Unit 9, <a href="../transaction/" class="xref page">Integrating Transactional Business Logic</a>.</p>
</li>
<li>
<p><strong>Security:</strong> EJB supports integration with the Java Authentication and Authorization Service (JAAS) API, so it is easy to completely externalize security and secure an application using simple configuration instead of cluttering up your application with security code.<sup><a href="#footnote2">[2]</a></sup> In Unit 11, <a href="../security/#secureEJB" class="xref page">Securing the Application</a>, a demonstration of EJB&#8217;s <a href="http://download.oracle.com/javaee/6/api/javax/annotation/security/RolesAllowed.html">@RolesAllowed</a> annotation is provided.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="jpa"><a class="anchor" href="#jpa"></a>Java Persistence</h3>
<div class="paragraph">
<p>In the context of Java Enterprise, <em>persistence</em> refers to the act of automatically storing data contained in Java objects into a relational database. The <a href="http://java.sun.com/javaee/technologies/persistence.jsp">Java Persistence API</a> (JPA) is an object-relational mapping (ORM) technology that enables applications to manage data between Java objects and a relational database in a way that is transparent to the developer. This means that you can apply JPA to your projects by creating and configuring a set of Java classes (<em>entities</em>) that mirror your data model. Your application can then access these entities as though it were directly accessing the database.</p>
</div>
<div class="paragraph">
<p>There are various benefits to using JPA in your projects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JPA has its own rich, SQL-like query language for static and dynamic queries. Using the Java Persistence Query Language (JPQL), your applications remain portable across different database vendors.</p>
</li>
<li>
<p>You can avoid the task of writing low-level, verbose and error-prone JDBC/SQL code.</p>
</li>
<li>
<p>JPA transparently provides services for data caching and performance optimization.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="whatSession"><a class="anchor" href="#whatSession"></a>What are Session Beans?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Enterprise session beans are invoked by a client in order to perform a specific business operation. The name <em>session</em> implies that a bean instance is available for the duration of a "unit of work". The <a href="http://jcp.org/aboutJava/communityprocess/final/jsr318/index.html">EJB 3.1 specification</a> describes a typical session object as having the following characteristics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Executes on behalf of a single client</p>
</li>
<li>
<p>Can be transaction-aware</p>
</li>
<li>
<p>Updates shared data in an underlying database</p>
</li>
<li>
<p>Does not represent directly shared data in the database, although it may access and update such data</p>
</li>
<li>
<p>Is relatively short-lived</p>
</li>
<li>
<p>Is removed when the EJB container crashes. The client has to re-establish a new session object to continue computation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>EJB provides three types of session beans: <em>stateful</em>, <em>stateless</em>, and <em>singleton</em>. The following descriptions are adapted from the <a href="http://download.oracle.com/docs/cd/E17410_01/javaee/6/tutorial/doc/index.html">Java EE 6 Tutorial</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Stateful:</strong> The state of the bean is maintained across multiple method calls. The "state" refers to the values of its instance variables. Because the client interacts with the bean, this state is often called the <em>conversational</em> state.</p>
</li>
<li>
<p><strong>Stateless:</strong> Stateless beans are used for operations that can occur in a single method call. When the method finishes processing, the client-specific state of the bean is not retained. A stateless session bean therefore does not maintain a conversational state with the client.</p>
</li>
<li>
<p><strong>Singleton:</strong> A singleton session bean is instantiated once per application, and exists for the lifecycle of the application. Singleton session beans are designed for circumstances where a single enterprise bean instance is shared across and concurrently accessed by clients.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information on EJB session beans, see the <a href="http://download.oracle.com/docs/cd/E17410_01/javaee/6/tutorial/doc/gipjg.html">Java EE 6 Tutorial: What is a Session Bean?</a>.</p>
</div>
<div class="paragraph">
<p>For purposes of developing the e-commerce application in this tutorial, we will only be working with stateless session beans.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="specification"><a class="anchor" href="#specification"></a>About Specifications and Implementations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>EJB and JPA technologies are defined by the following specifications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://jcp.org/en/jsr/summary?id=317">JSR 317: Java Persistence 2.0</a></p>
</li>
<li>
<p><a href="http://jcp.org/en/jsr/summary?id=318">JSR 318: Enterprise JavaBeans 3.1</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These specifications define the technologies. To apply a technology to your project however, you must use an <em>implementation</em> of the specification. When a specification becomes finalized, it includes a reference implementation, which is a free implementation of the technology. If you find this concept confusing, consider the following analogy: A musical composition (i.e., the notes on a page) defines a piece of music. When a musician learns the composition and records her performance, she provides an <em>interpretation</em> of the piece. In this manner the musical composition is likened to the technical specification, and the musician&#8217;s recording corresponds to the specification&#8217;s implementation.</p>
</div>
<div class="paragraph">
<p>See <a href="../intro/#jcp" class="xref page">What is the Java Community Process?</a> for an explanation of Java technical specifications, and how they are formally standardized.</p>
</div>
<div class="paragraph">
<p>If you examine the download pages for the final releases of the EJB and JPA specifications, you&#8217;ll find links to the following reference implementations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>JPA:</strong> <a href="http://www.eclipse.org/eclipselink/downloads/ri.php">http://www.eclipse.org/eclipselink/downloads/ri.php</a></p>
</li>
<li>
<p><strong>EJB:</strong> <a href="http://glassfish.dev.java.net/downloads/ri">http://glassfish.dev.java.net/downloads/ri</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Implementations of the JPA specification are dubbed <em>persistence providers</em>, and the persistence provider which has been chosen as the reference implementation for the JPA 2.0 specification is <a href="http://www.eclipse.org/eclipselink/">EclipseLink</a>.</p>
</div>
<div class="paragraph">
<p>If you examine the link for the EJB reference implementation, you&#8217;ll come to a page that lists not only the implementation for EJB, but for all reference implementations provided by <a href="http://glassfish.dev.java.net/">Project GlassFish</a>. The reason for this is that Project GlassFish forms the reference implementation of the Java EE 6 platform specification (<a href="http://jcp.org/en/jsr/summary?id=316">JSR 316</a>). The GlassFish v3 application server (or the Open Source Edition), which you are using to build the e-commerce project in this tutorial, contains the reference implementations of all technologies developed under Project GlassFish. As such, it is referred to as a Java EE 6 <em>container</em>.</p>
</div>
<div class="paragraph">
<p>A Java EE container contains three essential components: a web (i.e., servlet) container, an EJB container, and a persistence provider. The deployment scenario for the e-commerce application is displayed in the diagram below. Entity classes that you create in this unit are managed by the persistence provider. The session beans that you create in this unit are managed by the EJB container. Views are rendered in JSP pages, which are managed by the web container.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/java-ee-container.png" alt="java ee container">
</div>
<div class="title">Figure 3. As a Java EE container, GlassFish v3 contains web and EJB containers, and EclipseLink, the persistence provider</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="addEntity"><a class="anchor" href="#addEntity"></a>Adding Entity Classes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Begin by using the IDE&#8217;s Entity Classes from Database wizard to generate entity classes based on the <code>affablebean</code> schema. The wizard relies on the underlying persistence provider to accomplish this task.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot3.zip">project snapshot</a> in the IDE. In the IDE, press Ctrl-Shift-O (âŚ�-Shift-O on Mac) and navigate to the location on your computer where you unzipped the downloaded file.</p>
</li>
<li>
<p>Press Ctrl-N (⌘-N on Mac) to open the File wizard.</p>
</li>
<li>
<p>Select the Persistence category, then select Entity Classes from Database. Click Next.</p>
</li>
<li>
<p>In Step 2: Database Tables, choose <code>jdbc/affablebean</code> from the Data Source drop-down list. The drop-down list is populated by data sources registered with the application server.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you choose the <code>jdbc/affablebean</code> data source, the IDE scans the database and lists the database tables in the Available Tables pane.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/entity-from-database.png" alt="entity from database">
</div>
<div class="title">Figure 4. Choose an available data source to have the IDE read in database tables</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Click the Add All button, then click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Step 3 of the Entity Classes from Database wizard differs slightly between NetBeans IDE 6.8 and 6.9. Depending on the version IDE you are using, perform the following steps.</p>
<div class="ulist">
<ul>
<li>
<p><a href="#68">NetBeans IDE 6.8</a></p>
</li>
<li>
<p><a href="#69">NetBeans IDE 6.9</a></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>[[68]]
==== NetBeans IDE 6.8</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/entity-classes-68.png" alt="entity classes 68">
</div>
<div class="title">Figure 5. NetBeans 6.8 - Entity Classes from Database wizard, Step 3: Entity Classes</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Type in <strong>entity</strong> in the Package field. The wizard will create a new package for the entity classes upon completing.</p>
</li>
<li>
<p>Click the Create Persistence Unit button. The Create Persistence Unit dialog opens.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/create-pu.png" alt="create pu">
</div>
<div class="title">Figure 6. Use the Create Persistence Unit dialog to generate a persistence.xml file</div>
</div>
<div class="paragraph">
<p>A <em>persistence unit</em> refers to a collection of entity classes that exist in an application. The above dialog generates a <code>persistence.xml</code> file, which is used by your persistence provider to specify configuration settings for the persistence unit. Note that 'EclipseLink (JPA 2.0)' is the default selection for the server associated with the project. Leave 'Table Generation Strategy' set to &#8216;None&#8217;. This prevents the persistence provider from affecting your database. (For example, if you want the persistence provider to delete then recreate the database based on the existing entity classes, you could set the strategy to &#8216;Drop and Create&#8217;. This action would then be taken each time the project is deployed.)</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Click Create.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Back in Step 3: Entity Classes, note that the class names for the entities are based on database tables. For example, the <code>CustomerOrder</code> entity is mapped to the <code>customer_order</code> database table. Also note that the 'Generate Named Query Annotations for Persistent Fields' option is selected by default. We will be using various named queries later in the tutorial.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Continue to <a href="#step7">step 7</a> below.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>[[69]]
==== NetBeans IDE 6.9</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/entity-classes-69.png" alt="entity classes 69">
</div>
<div class="title">Figure 7. NetBeans 6.9 - Entity Classes from Database wizard, Step 3: Entity Classes</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Type in <strong>entity</strong> in the Package field. The wizard will create a new package for the entity classes upon completing.</p>
</li>
<li>
<p>Note the following:</p>
<div class="ulist">
<ul>
<li>
<p>The class names for the entities are based on database tables. For example, the <code>CustomerOrder</code> entity will be mapped to the <code>customer_order</code> database table.</p>
</li>
<li>
<p>The 'Generate Named Query Annotations for Persistent Fields' option is selected by default. We will be using various named queries later in the tutorial.</p>
</li>
<li>
<p>The 'Create Persistence Unit' option is selected by default. A <em>persistence unit</em> is a collection of entity classes that exist in an application. The persistence unit is defined by a <code>persistence.xml</code> configuration file, which is read by your persistence provider. Enabling this option therefore means that the wizard will also generate a <code>persistence.xml</code> file and populate it with default settings.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Click Finish. The JPA entity classes are generated, based on the <code>affablebean</code> database tables. You can examine the entity classes in the Projects window by expanding the newly created <code>entity</code> package. Also, note that the new persistence unit exists under the Configuration Files node.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/entity-classes.png" alt="entity classes">
</div>
<div class="title">Figure 8. View new entity classes in the Projects window</div>
</div>
<div class="paragraph">
<p>Note that the wizard generated an additional entity class, <code>OrderedProductPK</code>. Recall that the data model&#8217;s <code>ordered_product</code> table uses a composite primary key that comprises the primary keys of both the <code>customer_order</code> and <code>product</code> tables. (See <a href="../data-model/#manyToMany" class="xref page">Designing the Data Model - Creating Many-To-Many Relationships</a>.) Because of this, the persistence provider creates a separate entity class for the composite key, and <em>embeds</em> it into the <code>OrderedProduct</code> entity. You can open <code>OrderedProduct</code> in the editor to inspect it. JPA uses the <code>@EmbeddedId</code> annotation to signify that the embeddable class is a composite primary key.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class OrderedProduct implements Serializable {
    private static final long serialVersionUID = 1L;
    *@EmbeddedId*
    protected OrderedProductPK orderedProductPK;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Press Ctrl-Space on the <code>@EmbeddedId</code> annotation to invoke the API documentation.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/embedded-id.png" alt="embedded id">
</div>
<div class="title">Figure 9. Press Ctrl-Space to invoke the API documentation</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Open the persistence unit (<code>persistence.xml</code>) in the editor. The IDE provides a Design view for persistence units, in addition to the XML view. The Design view provides a convenient way to make configuration changes to the persistence provider&#8217;s management of the project.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/persistence-unit.png" alt="persistence unit">
</div>
<div class="title">Figure 10. Design view of the AffableBeanPU persistence unit</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Click the XML tab at the top of the <code>AffableBeanPU</code> persistence unit to open the XML view. Add the following property to the file.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;persistence-unit name="AffableBeanPU" transaction-type="JTA"&gt;
  &lt;jta-data-source&gt;jdbc/affablebean&lt;/jta-data-source&gt;
  *&lt;properties&gt;
    &lt;property name="eclipselink.logging.level" value="FINEST"/&gt;
  &lt;/properties&gt;*
&lt;/persistence-unit&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You set the logging level property to <code>FINEST</code> so that you can view all possible output produced by the persistence provider when the application runs. This enables you to see the SQL that the persistence provider is using on the database, and can facilitate in any required debugging.</p>
</div>
<div class="paragraph">
<p>See the official EclipseLink documentation for an explanation of logging and a list of all logging values: <a href="http://wiki.eclipse.org/EclipseLink/Examples/JPA/Logging">How To Configure Logging</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="addSession"><a class="anchor" href="#addSession"></a>Adding Session Beans</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we use the IDE&#8217;s Session Beans for Entity Classes wizard to generate an EJB <em>session facade</em> for each of the entity classes that you just created. Each session bean will contain basic access methods for its respective entity class.</p>
</div>
<div class="paragraph">
<p>A <em>session facade</em> is a design pattern advertised in the <a href="http://java.sun.com/blueprints/enterprise/index.html">Enterprise BluePrints program</a>. As stated in the <a href="http://java.sun.com/blueprints/corej2eepatterns/Patterns/SessionFacade.html">Core J2EE Pattern Catalog</a>, it attempts to resolve common problems that arise in a multi-tiered application environment, such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tight coupling, which leads to direct dependence between clients and business objects</p>
</li>
<li>
<p>Too many method invocations between client and server, leading to network performance problems</p>
</li>
<li>
<p>Lack of a uniform client access strategy, exposing business objects to misuse</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A session facade abstracts the underlying business object interactions and provides a service layer that exposes only the required functionality. Thus, it hides from the client&#8217;s view the complex interactions between the participants. Thus, the session bean (representing the session facade) manages the relationships between business objects. The session bean also manages the life cycle of these participants by creating, locating, modifying, and deleting them as required by the workflow.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Press Ctrl-N (⌘-N on Mac) to open the File wizard.</p>
</li>
<li>
<p>Select the Persistence category, then select Session Beans for Entity Classes.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/session-beans-for-entity-classes.png" alt="session beans for entity classes">
</div>
<div class="title">Figure 11. Select Session Beans for Entity Classes to generate a session facade for your persistence model</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>In Step 2: Entity Classes, note that all entity classes contained in your project are listed on the left, under Available Entity Classes. Click Add All. All entity classes are moved to the right, under Selected Entity Classes.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Click Next.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>In Step 3: Generated Session Beans, type in <strong>session</strong> into the Package field.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/generated-session-beans.png" alt="generated session beans">
</div>
<div class="title">Figure 12. Specify the location of the new session beans, and whether to create interfaces</div>
</div>
<div class="paragraph">
<p><strong>Note:</strong> You can use the wizard to generate local and remote interfaces for the session beans. While there is benefit to programming session beans to interfaces (For example, hiding business object interactions behind an interface enables you to further decouple the client from your business logic. This also means that you can code multiple implementations of the interface for your application, should the need arise.), this lies outside the scope of the tutorial. Note that EJB versions prior to 3.1 <em>require</em> that you implement an interface for each session bean.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Click Finish. The IDE generates session beans for each of the entity classes contained in your project. In the Projects window, expand the new <code>session</code> package to examine the session beans.</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">NetBeans 6.8</th>
<th class="tableblock halign-left valign-top">NetBeans 6.9</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="../../../../../_images/kb/docs/javaee/ecommerce/projects-window-session-beans.png" alt="projects window session beans" title="Examine new session beans in the Projects window"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="../../../../../_images/kb/docs/javaee/ecommerce/projects-window-session-beans-69.png" alt="projects window session beans 69" title="Examine new session beans in the Projects window"></span></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Note:</strong> As shown above, NetBeans IDE 6.9 provides slight improvements in the way the Session Beans for Entity Classes wizard generates facade classes. Namely, boiler-plate code that is common to all classes is factored out into an abstract class named <code>AbstractFacade</code>. If you are working in version 6.9, open any of the facade classes that have been generated (aside from <code>AbstractFacade</code>). You&#8217;ll see that the class extends <code>AbstractFacade</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Open a session facade in the editor, for example, <code>ProductFacade</code>. All of the generated session facades instantiate an <a href="http://java.sun.com/javaee/6/docs/api/javax/persistence/EntityManager.html">`EntityManager`</a> using the <a href="http://download.oracle.com/javaee/6/api/javax/persistence/PersistenceContext.html">`@PersistenceContext`</a> annotation.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@PersistenceContext(unitName = "AffableBeanPU")
private EntityManager em;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>@PersistenceContext</code> annotation is used to inject a container-managed <code>EntityManager</code> into the class. In other words, we rely on GlassFish' EJB container to open and close <code>EntityManager`s as and when needed. The `unitName</code> element specifies the <code>AffableBeanPU</code> persistence unit, which has been defined in the application&#8217;s <code>persistence.xml</code> file.</p>
</div>
<div class="paragraph">
<p>The <code>EntityManager</code> is an integral component of the Java Persistence API, and is responsible for performing persistence actions on the database. The book <a href="http://www.manning.com/panda/">EJB 3 In Action</a> describes the <code>EntityManager</code> as follows:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><em>The JPA <code>EntityManager</code> interface manages entities in terms of actually providing persistence services. While entities tell a JPA provider how they map to the database, they do not persist themselves. The <code>EntityManager</code> interface reads the ORM metadata for an entity and performs persistence operations.</em></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Your application now contains a persistence model of the <code>affablebean</code> database in the form of JPA entity classes. It also contains a session facade consisting of Enterprise beans that can be used to access the entity classes. The next section demonstrates how you can access the database using the session beans and entity classes.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="access"><a class="anchor" href="#access"></a>Accessing Data with EJBs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the <a href="../connect-db/" class="xref page">previous tutorial unit</a>, you learned how to access the database from the application by configuring a data source on GlassFish, adding a resource reference to the application&#8217;s deployment descriptor, and using JSTL <code>&lt;sql&gt;</code> tags in the application&#8217;s JSP pages. This is a valuable technique, as it allows you to quickly set up prototypes that include data from the database. However, this is not a realistic scenario for medium to large-sized applications, or applications managed by a team of developers, as it would prove difficult to maintain or scale. Furthermore, if you are developing the application into multiple tiers or are adhering to the MVC pattern, you would not want to keep data-access code in your front-end. Using Enterprise beans with a persistence model enables you better conform to the MVC pattern by effectively decoupling the presentation and model components.</p>
</div>
<div class="paragraph">
<p>The following instructions demonstrate how to begin using the session and entity beans in the <code>AffableBean</code> project. You are going to remove the JSTL data access logic that you previously set up for the index and category pages. In its place, you&#8217;ll utilize the data access methods provided by the session beans, and store the data in scoped variables so that it can be retrieved from front-end page views. We&#8217;ll tackle the index page first, then move on to the more complicated category page.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#index">index page</a></p>
</li>
<li>
<p><a href="#category">category page</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="index"><a class="anchor" href="#index"></a>index page</h3>
<div class="paragraph">
<p>The index page requires data for the four product categories. In our current setup, the JSTL <code>&lt;sql&gt;</code> tags query the database for category details each time the index page is requested. Since this information is rarely modified, it makes more sense from a performance standpoint to perform the query only once after the application has been deployed, and store the data in an application-scoped attribute. We can accomplish this by adding this code to the <code>ControllerServlet&#8217;s `init</code> method.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Projects window, double-click the Source Packages &gt; <code>controller</code> &gt; <code>ControllerServlet</code> node to open it in the editor.</p>
</li>
<li>
<p>Declare an instance of <code>CategoryFacade</code>, and apply the <code>@EJB</code> annotation to the instance.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class ControllerServlet extends HttpServlet {

    *@EJB
    private CategoryFacade categoryFacade;*

    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>@EJB</code> annotation instructs the EJB container to instantiate the <code>categoryFacade</code> variable with the EJB named <code>CategoryFacade</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Use the IDE&#8217;s hints to add import statements for:</p>
<div class="ulist">
<ul>
<li>
<p><code>javax.ejb.EJB</code></p>
</li>
<li>
<p><code>session.CategoryFacade</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Pressing Ctrl-Shift-I (⌘-Shift-I on Mac) automatically adds required imports to your class.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Add the following <code>init</code> method to the class. The web container initializes the servlet by calling its <code>init</code> method. This occurs only once, after the servlet is loaded and before it begins servicing requests.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class ControllerServlet extends HttpServlet {

    @EJB
    private CategoryFacade categoryFacade;

    *public void init() throws ServletException {

        // store category list in servlet context
        getServletContext().setAttribute("categories", categoryFacade.findAll());
    }*

    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, you apply the facade class' <code>findAll</code> method to query the database for all records of <code>Category</code>. You then set the resulting <code>List</code> of <code>Category</code> objects as an attribute that can be referenced by the &#8220;categories&#8221; string. Placing the reference in the <code>ServletContext</code> means that the reference exists in a scope that is application-wide.</p>
</div>
<div class="paragraph">
<p>To quickly determine the method signature of the <code>findAll</code> method, hover your mouse over the method while holding down the Ctrl key (⌘ on Mac). (The image below displays the popup that appears using NetBeans IDE 6.8.)</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/method-signature.png" alt="method signature">
</div>
<div class="title">Figure 13. Over your mouse over the method while holding down the Ctrl key to view its signature</div>
</div>
<div class="paragraph">
<p>Clicking the hyperlink enables you to navigate directly to the method.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Use the IDE&#8217;s hint to add the <code>@Overrides</code> annotation. The <code>init</code> method is defined by <code>HttpServlet&#8217;s superclass, `GenericServlet</code>.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/override.png" alt="override">
</div>
<div class="title">Figure 14. Use the IDE&#8217;s hint to add the @Overrides annotation to the method</div>
</div>
<div class="paragraph">
<p>Adding the annotation is not required, however it does provide several advantages:
* It enables you to use compiler checking to ensure that you are actually overriding a method that you assume you are overriding.
* It improves readability, as it becomes clear when methods in your source code are being overridden.</p>
</div>
<div class="paragraph">
<p>For more information on annotations, see the <a href="http://download.oracle.com/javase/tutorial/java/javaOO/annotations.html">Java Tutorials: Annotations</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Now that you have set up an application-scoped attribute that contains a list of categories, modify the index page to access the newly created attribute.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Double-click the Web Pages &gt; <code>index.jsp</code> node in the Projects window to open the file in the editor.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Comment out (or delete) the <code>&lt;sql:query&gt;</code> statement that is listed at the top of the file. To comment out code in the editor, highlight the code, then press Ctrl-/ (⌘-/ on Mac).</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/commented-out.png" alt="commented out">
</div>
<div class="title">Figure 15. Press Ctrl-/ to comment out a code snippet in the editor</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Modify the opening <code>&lt;c:forEach&gt;</code> tag so that its <code>items</code> attribute references the new application-scoped <code>categories</code> attribute.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">&lt;c:forEach var="category" items="*${categories}*"&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Open the project&#8217;s web deployment descriptor. Press Alt-Shift-O (Ctrl-Shift-O on Mac) and in the Go to File dialog, type &#8216;web&#8217;, then click OK.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/go-to-file.png" alt="go to file">
</div>
<div class="title">Figure 16. Use the Go to File dialog to quickly open files in the editor</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>Comment out (or delete) the <code>&lt;resource-ref&gt;</code> entry. The entry was required for the <code>&lt;sql&gt;</code> tags in order to identify the data source registered on the server. We are now relying on JPA to access the database, and the <code>jdbc/affablebean</code> data source has already been specified in the persistence unit. (Refer to the <a href="#pu">Design view of the project&#8217;s persistence unit</a> above.)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Highlight the entire <code>&lt;resource-ref&gt;</code> entry, then press Ctrl-/ (⌘-/ on Mac).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">*&lt;!-- *&lt;resource-ref&gt;
         &lt;description&gt;Connects to database for AffableBean application&lt;/description&gt;
         &lt;res-ref-name&gt;jdbc/affablebean&lt;/res-ref-name&gt;
         &lt;res-type&gt;javax.sql.ConnectionPoolDataSource&lt;/res-type&gt;
         &lt;res-auth&gt;Container&lt;/res-auth&gt;
         &lt;res-sharing-scope&gt;Shareable&lt;/res-sharing-scope&gt;
     &lt;/resource-ref&gt; *--&gt;*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="11">
<li>
<p>Run the project. Click the Run Project ( <span class="image"><img src="../../../../../_images/kb/docs/javaee/ecommerce/run-project-btn.png" alt="run project btn"></span> ) button. The project&#8217;s index page opens in the browser, and you see that all four category names and images display.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/index-page.png" alt="index page">
</div>
<div class="title">Figure 17. Verify that the index page is able to retrieve category details</div>
</div>
</div>
<div class="sect2">
<h3 id="category"><a class="anchor" href="#category"></a>category page</h3>
<div class="paragraph">
<p>The <a href="../design/#category" class="xref page">category page</a> requires three pieces of data in order to render properly:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>category data:</strong> for left column category buttons</p>
</li>
<li>
<p><strong>selected category:</strong> the selected category is highlighted in the left column, and the name of the selected category displays above the product table</p>
</li>
<li>
<p><strong>product data for selected category:</strong> for products displayed in the product table</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Let&#8217;s approach each of the three pieces of data individually.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#categoryData">category data</a></p>
</li>
<li>
<p><a href="#selectedCategoryData">selected category</a></p>
</li>
<li>
<p><a href="#productData">product data for selected category</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="categoryData"><a class="anchor" href="#categoryData"></a>category data</h4>
<div class="paragraph">
<p>To account for category data, we can reuse the application-scoped <code>categories</code> attribute that we created for the index page.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open <code>category.jsp</code> in the editor, and comment out (Ctrl-/; ⌘-/ on Mac) the JSTL <code>&lt;sql&gt;</code> statements that are listed at the top of the file.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/comment-out-sql.png" alt="comment out sql">
</div>
<div class="title">Figure 18. Comment out JSTL &lt;sql&gt; statements in the category page</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Modify the opening <code>&lt;c:forEach&gt;</code> tag so that its <code>items</code> attribute references the application-scoped <code>categories</code> attribute. (This is identical to what you did above for <code>index.jsp</code>.)</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">&lt;c:forEach var="category" items="*${categories}*"&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Run the project to examine the current state of the category page. Click the Run Project ( <span class="image"><img src="../../../../../_images/kb/docs/javaee/ecommerce/run-project-btn.png" alt="run project btn"></span> ) button. When the project&#8217;s index page opens in the browser, click any of the four categories. The category buttons in the left column display and function as expected.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/category-page-left-column.png" alt="category page left column">
</div>
<div class="title">Figure 19. Category buttons in left column display and function as expected</div>
</div>
</div>
<div class="sect3">
<h4 id="selectedCategoryData"><a class="anchor" href="#selectedCategoryData"></a>selected category</h4>
<div class="paragraph">
<p>To retrieve the selected category, we can use the <code>categoryFacade</code> that we already created to find the <code>Category</code> whose ID matches the request query string.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the <code>ControllerServlet</code> in the editor. (If already opened, press Ctrl-Tab and choose from the pop-up list.)</p>
</li>
<li>
<p>Start implementing functionality to acquire the selected category. Locate the <code>TODO: Implement category request</code> comment, delete it and add the following code (in <strong>bold</strong>).</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// if category page is requested
if (userPath.equals("/category")) {

    *// get categoryId from request
    String categoryId = request.getQueryString();

    if (categoryId != null) {

    }*

// if cart page is requested
} else if (userPath.equals("/viewCart")) {</code></pre>
</div>
</div>
<div class="paragraph">
<p>You retrieve the requested category ID by calling <code>getQueryString()</code> on the request.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> The logic to determine the selected category within the left column category buttons is already implemented in <code>category.jsp</code> using an EL expression, which is comparable to calling <code>getQueryString()</code> in the servlet. The EL expression is: <code>pageContext.request.queryString</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Add the following line of code within the <code>if</code> statement.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// get categoryId from request
String categoryId = request.getQueryString();

if (categoryId != null) {

    *// get selected category
    selectedCategory = categoryFacade.find(Short.parseShort(categoryId));*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You use the <code>CategoryFacade&#8217;s `find</code> method to retrieve the <code>Category</code> object based on the requested category ID. Note that you must cast <code>categoryId</code> to a <code>Short</code>, as this is the type used for the <code>id</code> field in the <code>Category</code> entity class.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Click the badge ( <span class="image"><img src="../../../../../_images/kb/docs/javaee/ecommerce/editor-badge.png" alt="editor badge"></span> ) in the left margin to use the editor&#8217;s hint to declare <code>selectedCategory</code> as a local variable within the <code>doGet</code> method.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/local-variable.png" alt="local variable">
</div>
<div class="title">Figure 20. Use editor hints to declare local variables</div>
</div>
<div class="paragraph">
<p>Because <code>selectedCategory</code> is of type <code>Category</code>, which hasn&#8217;t yet been imported into the class, the IDE automatically adds an import statement for <code>entity.Category</code> to the top of the file.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Add the following line to place the retrieved <code>Category</code> object in the request scope.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// get categoryId from request
String categoryId = request.getQueryString();

if (categoryId != null) {

    // get selected category
    selectedCategory = categoryFacade.find(Short.parseShort(categoryId));

    *// place selected category in request scope
    request.setAttribute("selectedCategory", selectedCategory);*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>In the editor, switch to <code>category.jsp</code>. (Press Ctrl-Tab and choose from the pop-up list.)</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Locate <code>&lt;p id="categoryTitle"&gt;</code> and make the following change.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;p id="categoryTitle"&gt;
    &lt;span style="background-color: #f5eabe; padding: 7px;"&gt;*${selectedCategory.name}*&lt;/span&gt;
&lt;/p&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You are now using the <code>selectedCategory</code> attribute, which you just placed in the request scope from the <code>ControllerServlet</code>. Using &#8216;.name&#8217; within the EL expression calls the <code>getName</code> method on the given <code>Category</code> object.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Switch back to the browser and refresh the category page. The name of the selected category now displays in the page.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/category-page-selected-category.png" alt="category page selected category">
</div>
<div class="title">Figure 21. Selected category name displays in the category page</div>
</div>
</div>
<div class="sect3">
<h4 id="productData"><a class="anchor" href="#productData"></a>product data for selected category</h4>
<div class="paragraph">
<p>In order to retrieve all products for a selected category, we&#8217;ll make use of the <code>Category</code> entity&#8217;s <code>getProductCollection()</code> method. Start by calling this method on <code>selectedCategory</code> to get a collection of all <code>Product`s associated with the `selectedCategory</code>. Then store the collection of products as an attribute in the request scope, and finally reference the scoped attribute from the <code>category.jsp</code> page view.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the <code>ControllerServlet</code>, add the following statement to the code that manages the category request.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// if category page is requested
if (userPath.equals("/category")) {

    // get categoryId from request
    String categoryId = request.getQueryString();

    if (categoryId != null) {

        // get selected category
        selectedCategory = categoryFacade.find(Short.parseShort(categoryId));

        // place selected category in request scope
        request.setAttribute("selectedCategory", selectedCategory);

        *// get all products for selected category
        categoryProducts = selectedCategory.getProductCollection();*
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Calling <code>getProductCollection()</code> here enables us to get a collection of all <code>Product`s associated with the `selectedCategory</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Use the editor&#8217;s hint to define <code>categoryProducts</code> as a local variable for the <code>doGet</code> method.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/local-variable2.png" alt="local variable2">
</div>
<div class="title">Figure 22. Use editor hints to declare local variables</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Place the collection of `Product`s in the request scope so that it can be retrieved from the application&#8217;s front-end.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// if category page is requested
if (userPath.equals("/category")) {

    // get categoryId from request
    String categoryId = request.getQueryString();

    if (categoryId != null) {

        // get selected category
        selectedCategory = categoryFacade.find(Short.parseShort(categoryId));

        // place selected category in request scope
        request.setAttribute("selectedCategory", selectedCategory);

        // get all products for selected category
        categoryProducts = selectedCategory.getProductCollection();

        *// place category products in request scope
        request.setAttribute("categoryProducts", categoryProducts);
    }*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Open the <code>category.jsp</code> file in the editor and make the following change to the product table.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">&lt;table id="productTable"&gt;

    &lt;c:forEach var="product" items="*${categoryProducts}*" varStatus="iter"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;c:forEach&gt;</code> tag now references the <code>categoryProducts</code> collection. The <code>c:forEach</code> loop will now iterate over each <code>Product</code> object contained in the collection, and extract data accordingly.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Press F6 (fn-F6 on Mac) to run the project. Navigate to the category page in the browser and note that all products now display for each category.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../../_images/kb/docs/javaee/ecommerce/category-page-product-table.png" alt="category page product table">
</div>
<div class="title">Figure 23. Product table displays products of a given category</div>
</div>
<div class="paragraph">
<p>This tutorial unit provided a brief introduction to JPA and EJB technologies. It also described the role of Java specifications, and how their reference implementations are used by the GlassFish application server. It then demonstrated how to create a set of JPA entity classes that provide a Java implementation of the project database. Then, following the <em>session facade</em> pattern, it showed how to create a set of EJB session beans that exist on top of the entity classes and enable convenient access to them. Finally, you modified the <code>AffableBean</code> project to utilize the new session beans and entities for database access required in the index and category pages.</p>
</div>
<div class="paragraph">
<p>You can download <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252Fecommerce%252FAffableBean_snapshot4.zip">snapshot 4</a> of the <code>AffableBean</code> project, which corresponds to state the project after completing this unit using NetBeans IDE 6.9.</p>
</div>
<div class="paragraph">
<p>In the next unit you explore session management, and how to enable the application to remember a user&#8217;s actions as he or she clicks through the site. This is key to implementing a shopping cart mechanism in an e-commerce application.</p>
</div>
<div class="paragraph">
<p><a href="../../../../../../../front/main/community/mailing-lists/" class="xref page">Send Feedback on This Tutorial</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="seeAlso"><a class="anchor" href="#seeAlso"></a>See Also</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_netbeans_resources"><a class="anchor" href="#_netbeans_resources"></a>NetBeans Resources</h3>
<div class="ulist">
<ul>
<li>
<p><a href="../../../java-ee/" class="xref page">Java EE &amp;amp; Java Web Learning Trail</a></p>
</li>
<li>
<p><a href="../../javaee-intro/" class="xref page">Introduction to Java EE Technology</a></p>
</li>
<li>
<p><a href="../../javaee-gettingstarted/" class="xref page">Getting Started with Java EE Applications</a></p>
</li>
<li>
<p><a href="../../secure-ejb/" class="xref page">Building Secure Enterprise Beans in Java EE</a></p>
</li>
<li>
<p><a href="../../javaee-entapp-ejb/" class="xref page">Creating an Enterprise Application with EJB 3.1</a></p>
</li>
<li>
<p><a href="../../jpa-eclipselink-screencast/" class="xref page">Using JPA Support with EclipseLink</a> [screencast]</p>
</li>
<li>
<p><a href="../../../../../../../front/main/community/media/" class="xref page">Video Tutorials and Demos for NetBeans IDE</a></p>
</li>
<li>
<p><a href="http://refcardz.dzone.com/refcardz/netbeans-java-editor-68">NetBeans Java Editor 6.8 Reference Card</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ejb_resources"><a class="anchor" href="#_ejb_resources"></a>EJB Resources</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Product Page:</strong> <a href="http://java.sun.com/products/ejb/">Enterprise JavaBeans Technology</a></p>
</li>
<li>
<p><strong>Specification Download:</strong> <a href="http://jcp.org/aboutJava/communityprocess/final/jsr318/index.html">JSR 318: EJB 3.1 Final Release</a></p>
</li>
<li>
<p><strong>Reference Implementation:</strong> <a href="http://glassfish.dev.java.net/downloads/ri">http://glassfish.dev.java.net/downloads/ri</a></p>
</li>
<li>
<p><strong>Official Forum:</strong> <a href="http://forums.sun.com/forum.jspa?forumID=13">Enterprise Technologies - Enterprise JavaBeans</a></p>
</li>
<li>
<p><strong>Java EE 6 Tutorial:</strong> <a href="http://download.oracle.com/docs/cd/E17410_01/javaee/6/tutorial/doc/bnblr.html">Part IV - Enterprise Beans</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_jpa_resources"><a class="anchor" href="#_jpa_resources"></a>JPA Resources</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Product Page:</strong> <a href="http://java.sun.com/javaee/technologies/persistence.jsp">Java Persistence API</a></p>
</li>
<li>
<p><strong>Specification Download:</strong> <a href="http://jcp.org/aboutJava/communityprocess/final/jsr317/index.html">JSR 317: Java Persistence 2.0 Final Release</a></p>
</li>
<li>
<p><strong>Reference Implementation:</strong> <a href="http://www.eclipse.org/eclipselink/downloads/ri.php">http://www.eclipse.org/eclipselink/downloads/ri.php</a></p>
</li>
<li>
<p><strong>Java EE 6 Tutorial:</strong> <a href="http://download.oracle.com/docs/cd/E17410_01/javaee/6/tutorial/doc/bnbpy.html">Part VI - Persistence</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_glassfish_resources"><a class="anchor" href="#_glassfish_resources"></a>GlassFish Resources</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://glassfish.dev.java.net/docs/index.html">GlassFish v3 Documentation</a></p>
</li>
<li>
<p><a href="http://www.sun.com/offers/details/GlassFish_Tomcat.html">Learning GlassFish for Tomcat Users</a></p>
</li>
<li>
<p><a href="http://glassfish.dev.java.net/javaee5/persistence/persistence-example.html">GlassFish Project - Java Persistence Example</a></p>
</li>
<li>
<p><a href="http://docs.sun.com/app/docs/doc/820-7759">Your First Cup: An Introduction to the Java EE Platform</a></p>
</li>
<li>
<p><a href="http://glassfish.dev.java.net/downloads/ri/">Reference Implementation Downloads</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_technical_articles"><a class="anchor" href="#_technical_articles"></a>Technical Articles</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.theserverside.com/news/1363656/New-Features-in-EJB-31">New Features in EJB 3.1</a></p>
</li>
<li>
<p><a href="http://www.ibm.com/developerworks/java/library/j-ejb1008.html">EJB Best Practices: Entity Bean Protection</a></p>
</li>
<li>
<p><a href="http://java.sun.com/blueprints/corej2eepatterns/Patterns/SessionFacade.html">Core J2EE Patterns - Session Facade</a></p>
</li>
<li>
<p><a href="http://www.ibm.com/developerworks/websphere/library/techarticles/0106_brown/sessionfacades.html">Rules and Patterns for Session Facades</a></p>
</li>
<li>
<p><a href="http://www.oracle.com/technology/sample_code/tech/java/j2ee/designpattern/businesstier/sessionfacade/readme.html">Design Pattern Sample Application - Session Facade</a></p>
</li>
<li>
<p><a href="http://www.ibm.com/developerworks/websphere/library/bestpractices/using_httpservlet_method.html">Best Practice: Using HttpServlet `init` Method</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_books"><a class="anchor" href="#_books"></a>Books</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.amazon.com/Beginning-Java-EE-GlassFish-Second/dp/143022889X/ref=dp_ob_title_bk">Beginning Java EE 6 with GlassFish 3</a></p>
</li>
<li>
<p><a href="http://www.amazon.com/Java-EE-GlassFish-Application-Server/dp/1849510369/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1281888153&amp;sr=1-1">Java EE 6 with GlassFish 3 Application Server</a></p>
</li>
<li>
<p><a href="http://www.apress.com/book/view/1590598954">Pro NetBeans IDE 6 Rich Client Platform Edition</a></p>
</li>
<li>
<p><a href="http://www.amazon.com/Real-World-Patterns-Rethinking-Practices/dp/0557078326/ref=pd_sim_b_4">Real World Java EE Patterns Rethinking Best Practices</a></p>
</li>
<li>
<p><a href="http://www.amazon.com/Patterns-Enterprise-Application-Architecture-Martin/dp/0321127420/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1281985949&amp;sr=1-1">Patterns of Enterprise Application Architecture</a></p>
</li>
<li>
<p><a href="http://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1281985959&amp;sr=1-1">Domain-Driven Design: Tackling Complexity in the Heart of Software</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>References</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#1">^</a> Adapted from <a href="http://www.manning.com/panda/">EJB 3 In Action</a> Chapter 1, section 1.1.2: EJB as a framework.</p>
</li>
<li>
<p><a href="#2">^</a> There are many other services provided by EJB. For a more comprehensive list, see <a href="http://www.manning.com/panda/">EJB 3 In Action</a>, Chapter 1, section 1.3.3: Gaining functionality with EJB services.</p>
</li>
</ol>
</div>
</div>
</div>
      <section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        <li><a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/kb/docs/javaee/ecommerce/entity-session.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>
      </article>
    </div>
        <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="../../../../../../../_/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
            <h1><a href="../../../../../../../front/main/about">About</a></h1>
            <ul>
              <li><a href="../../../../../../../front/main/community/who">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../../front/main/community">Community</a></h1>
            <ul>
              <li><a href="../../../../../../../front/main/community/mailing-lists">Mailing lists</a></li>
              <li><a href="../../../../../../../front/main/community/committer">Becoming a committer</a></li>
              <li><a href="../../../../../../../front/main/community/events">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../../front/main/participate">Participate</a></h1>
            <ul>
              <li><a href="../../../../../../../front/main/participate/submit-pr">Submitting Pull Requests</a></li>
              <li><a href="../../../../../../../front/main/participate/report-issue">Reporting Issues</a></li>
              <li><a href="../../../../../../../front/main/participate/#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../../front/main/help">Get Help</a></h1>
            <ul>
              <li><a href="../../../../../../../front/main/help/#documentation">Documentation</a></li>
              <li><a href="../../../../../../../wiki/main/wiki">Wiki</a></li>
              <li><a href="../../../../../../../front/main/help/#support">Community Support</a></li>
              <li><a href="../../../../../../../front/main/help/commercial-support">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../../front/main/download">Download</a></h1>
            <ul>
              <li><a href="../../../../../../../front/main/download">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="../../../../../../../front/main/download/#_daily_builds_and_building_from_source">Building from source</a></li>
              <li><a href="../../../../../../../front/main/download/#_older_releases">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2024 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
      </div>
    </div>

    
<script src="../../../../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../../../../.." data-snippet-length="100" data-stylesheet="../../../../../../../_/css/search.css"></script>
<script async src="../../../../../../../search-index.js"></script>
    <script src="../../../../../../../_/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../../../../../../_/js/vendor/what-input.js"></script>
    <script src="../../../../../../../_/js/vendor/foundation.min.js"></script>
    <script src="../../../../../../../_/js/vendor/jquery.colorbox-min.js"></script>
    <script src="../../../../../../../_/js/netbeans.js"></script>
    <script>
       $(function(){ $(document).foundation(); });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
      $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); });
    </script>
  </body>
</html>
