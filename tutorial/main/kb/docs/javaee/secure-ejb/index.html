<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Building Secure Enterprise Beans in Java EE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Building Secure Enterprise Beans in Java EE - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Building Secure Enterprise Beans in Java EE">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="../../../../../../_/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    <link rel="stylesheet" href="../../../../../../_/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../../../_/images/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../../../_/images/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../../../_/images/fav/favicon-16x16.png">
    <link rel="manifest" href="../../../../../../_/images/fav/site.webmanifest">
    <link rel="mask-icon" href="../../../../../../_/images/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="../../../../../../_/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="../../../../../../index.html"><img src='../../../../../../_/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <input id="search-input" type="text" placeholder="Search the docs"> </li>
            <li> <a href="../../../../../../front/main/community">Community</a> </li>
            <li> <a href="../../../../../../front/main/participate">Participate</a> </li>
            <li> <a href="../../../../../../front/main/blogs">Blog</a></li>
            <li> <a href="../../../../../../front/main/help">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="../../../../../../front/main/download">Download</a> </li>
        </ul>
    </div>
</div>

    <!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="../../../../../../front/main/download/nb19">Download</a></p>
        </div>
    </div>
</section>
    <div class='grid-container main-content tutorial'>
      <article class="doc">
      <h1 class="sect0">Building Secure Enterprise Beans in Java EE</h1>
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/kb/docs/javaee/secure-ejb.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="../../../../../../tutorial/main/kb/docs/contributing">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_creating_a_security_group_on_the_application_server">Creating a Security Group on the Application Server</a></li>
<li><a href="#_creating_a_java_class_library_for_the_remote_interface">Creating a Java Class Library for the Remote Interface</a></li>
<li><a href="#_creating_and_securing_the_enterprise_application">Creating and Securing the Enterprise Application</a>
<ul class="sectlevel2">
<li><a href="#_creating_the_enterprise_application_project">Creating the Enterprise Application Project</a></li>
<li><a href="#_securing_a_method_in_a_session_bean">Securing a Method in a Session Bean</a></li>
<li><a href="#_configuring_the_deployment_descriptors">Configuring the Deployment Descriptors</a></li>
</ul>
</li>
<li><a href="#_creating_the_application_client">Creating the Application Client</a></li>
<li><a href="#_running_the_application">Running the Application</a></li>
<li><a href="#_see_also">See Also</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Support for the Java EE specification in NetBeans IDE enables you to take full advantage of the many Java EE features simplifying application development. A significant development in the Java EE 5 specification was the incorporation of annotations. Using annotations enables you to eliminate a lot of the boilerplate code used when coding applications and minimizes the amount of configuration needed when deploying your application.</p>
</div>
<div class="paragraph">
<p>One area that has become greatly simplified through the use of annotations is the development and configuration of enterprise beans. Annotations enable you to specify many configuration properties that were previously specified in deployment descriptor files, making many of the deployment descriptor files unnecessary. Though applications may still require some deployment descriptor files (such as  <code>web.xml</code> ), the IDE&#8217;s multi-view deployment descriptor editor makes editing the files much easier.</p>
</div>
<div class="paragraph">
<p>Using annotations, building secure enterprise beans is now much easier. Instead of configuring enterprise bean security in the  <code>ejb-jar.xml</code>  deployment descriptor you can use security annotations to configure authorization directly in the source code. Java EE 5 enterprise applications do not require  <code>ejb-jar.xml</code>  or  <code>application.xml</code> .</p>
</div>
<div class="paragraph">
<p>For an overview of some of the features of the Java EE specification, see <a href="../javaee-intro/" class="xref page">Introduction to Java EE Technology</a>. For more information about annotation specifications, see <a href="http://jcp.org/en/jsr/detail?id=250">+ JSR 250: Common Annotations for the Java Platform+</a>.</p>
</div>
<div class="paragraph">
<p><strong>To follow this tutorial, you need the following software and resources.</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Software or Resource</th>
<th class="tableblock halign-left valign-top">Version Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../../../../../../front/main/download/" class="xref page">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7.2, 7.3, 7.4, 8.0, Java EE version</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java Development Kit (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">version 7 or 8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GlassFish Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1.x, 4.x</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For this tutorial you need to register a local instance of GlassFish server with the IDE. If you have installed the "Java EE" version of the IDE, the application server should already be installed and registered. If the application server is not registered in the IDE, choose Tools &gt; Servers to register the server in the Servers manager. You cannot deploy enterprise applications to the Tomcat web server.</p>
</div>
<div class="paragraph">
<p><strong>Prerequisites</strong></p>
</div>
<div class="paragraph">
<p>This document assumes you have some basic knowledge of, or programming experience with, the following technologies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Java Programming</p>
</li>
<li>
<p>NetBeans IDE</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_security_group_on_the_application_server"><a class="anchor" href="#_creating_a_security_group_on_the_application_server"></a>Creating a Security Group on the Application Server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this example, you only want users from the group  <code>bank_users</code>  to access the enterprise bean. You will create the user  <code>manager</code>  in the group  <code>bank_users</code>  in the  <code>file</code>  security realm on the application server.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start the application server by right-clicking its node in the Services window and choosing Start.</p>
</li>
<li>
<p>Right-click the application server node and choose View Domain Admin Console to open the GlassFish server Admin Console in your browser.</p>
</li>
<li>
<p>Expand the <strong>server-config</strong> node under the Configurations node in the left navigation bar.</p>
</li>
<li>
<p>Click <strong>Security &gt; Realms &gt; file</strong> to open the Edit Realm frame.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/console-file-realm.png" alt="console file realm">
</div>
<div class="title">Figure 1. Selecting the file realm node in admin console of application server</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the Manage Users button at the top of the Edit Realm panel to open the File Users panel.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/console-edit-realm.png" alt="console edit realm">
</div>
<div class="title">Figure 2. Edit Realm panel node in admin console of application server</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the New button at the top of the File Users table in the File Users panel.</p>
</li>
<li>
<p>Enter the following data in the New File Realm User form. Click OK.</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">User ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">manager</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Group List</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bank_users</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">password</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The form should resemble the following image.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/console-new-user.png" alt="console new user">
</div>
<div class="title">Figure 3. New File Realm User panel in admin console of application server</div>
</div>
<div class="paragraph">
<p>When you click OK, the server will create the user and open the File Users panel. You will see that there is now a user named  <code>manager</code> .</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/console-file-users.png" alt="console file users">
</div>
<div class="title">Figure 4. File Users panel in admin console with list of users</div>
</div>
<div class="paragraph">
<p>Now that the user is created, you will create an enterprise application that will check that the user is able to see the data.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_java_class_library_for_the_remote_interface"><a class="anchor" href="#_creating_a_java_class_library_for_the_remote_interface"></a>Creating a Java Class Library for the Remote Interface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this exercise you will create a simple Java class library project that will contain the remote interfaces for the session bean. The compiled class library JAR will be added to the classpath of the EJB module and the application client that will be used to call the session bean.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Choose File &gt; New Project and select Java Class Library in the Java category. Click Next.</p>
</li>
<li>
<p>Type SecureRemoteInterface for the Project Name.</p>
</li>
<li>
<p>Specify a location for the project. Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the next section you will create a session bean in an enterprise application. The session bean will be accessed via a remote interface. When you create the session bean, the IDE will automatically create the remote interface in the class library and add the class library JAR to the classpath of the enterprise application.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_and_securing_the_enterprise_application"><a class="anchor" href="#_creating_and_securing_the_enterprise_application"></a>Creating and Securing the Enterprise Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The enterprise application will consist of a simple session bean that is accessed via a remote interface in the class library project.</p>
</div>
<div class="sect2">
<h3 id="_creating_the_enterprise_application_project"><a class="anchor" href="#_creating_the_enterprise_application_project"></a>Creating the Enterprise Application Project</h3>
<div class="paragraph">
<p>In this exercise you will create an enterprise application that contains an EJB module.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Choose File &gt; New Project (Ctrl-Shift-N; ⌘-Shift-N on Mac) and select the Enterprise Application template from the Java EE category. Click Next.</p>
</li>
<li>
<p>Type <strong>Secure</strong> for the Project Name and set the Project Location.</p>
</li>
<li>
<p>Deselect the Use Dedicated Folder option, if selected.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For this tutorial there is little reason to copy project libraries to a dedicated folder because you will not need to share libraries with other users or projects.</p>
</div>
<div class="paragraph">
<p>Click Next.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set the server to GlassFish and set the Java EE Version to Java EE 6.</p>
</li>
<li>
<p>Select Create EJB Module and deselect Create Web Application Module. Click Finish.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/new-entapp-wizard.png" alt="new entapp wizard">
</div>
<div class="title">Figure 5. New File Realm User panel in admin console of application server</div>
</div>
</div>
<div class="sect2">
<h3 id="_securing_a_method_in_a_session_bean"><a class="anchor" href="#_securing_a_method_in_a_session_bean"></a>Securing a Method in a Session Bean</h3>
<div class="paragraph">
<p>In this exercise you will create a session bean in the EJB module project. The session bean does not do anything fancy. It just returns a sample balance amount. You will create a  <code>getStatus</code>  method and secure the method bean by annotating it with the  <code>@RolesAllowed</code>  annotation and specify the security roles allowed to access the method. This security role is used by the application and is not the same as the users and groups on the server. You will map the security role to the users and groups later when you configure the deployment descriptors.</p>
</div>
<div class="paragraph">
<p>Security annotations can be applied individually to each method in a class, or to an entire class. In this simple exercise you will use the  <code>@RolesAllowed</code>  to annotate a method, but the Java EE specification defines other security annotations that can be used in enterprise beans.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Projects window, right-click the EJB module&#8217;s node (Secure-ejb) and choose New &gt; Session Bean.</p>
</li>
<li>
<p>Type <strong>AccountStatus</strong> for the bean name, <strong>bean</strong> for the package.</p>
</li>
<li>
<p>Select Remote in project for the interface type.</p>
</li>
<li>
<p>Select SecureRemoteInterface in the dropdown list. Click Finish.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/new-sessionbean-wizard.png" alt="new sessionbean wizard">
</div>
<div class="title">Figure 6. Remote interface selected in New Session Bean wizard</div>
</div>
<div class="paragraph">
<p>When you click Finish, the IDE creates the  <code>AccountStatus</code>  class and opens the file in the source editor.</p>
</div>
<div class="paragraph">
<p>The IDE also creates the  <code>AccountStatusRemote</code>  remote interface for the bean in the  <code>bean</code>  package in the SecureRemoteInterface class library project and added the SecureRemoteInterface class library JAR to the classpath of the EJB module project.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/projects-window-bean.png" alt="projects window bean">
</div>
<div class="title">Figure 7. Projects window showing session bean and class library on classpath</div>
</div>
<div class="paragraph">
<p>If you open the Libraries category of the Properties dialog box of the EJB module you will see that the JAR is added to the compile-time libraries.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the source editor, add the following field declaration (in bold) to  <code>AccountStatus</code> :</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class AccountStatus implements AccountStatusRemote {
    *private String amount = "250";*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the source editor, right-click in the class and choose Insert Code (Alt-Insert; Ctrl-I on Mac) and then select Add Business Method to open the Add Business Method dialog box.</p>
</li>
<li>
<p>Type <strong>getStatus</strong> for the method name and set the return type to  <code>String</code> .</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The IDE automatically exposes the business method in the remote interface.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the source editor, add the following line in bold to the  <code>getStatus</code>  method.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public String getStatus() {
*    return "The account contains $" + amount;*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Type the following (in bold) to annotate the  <code>getStatus</code>  method.<strong>@RolesAllowed({"USERS"})</strong></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public String getStatus() {</code></pre>
</div>
</div>
<div class="paragraph">
<p>This annotation means that only users in the security role  <code>USERS</code>  can access the  <code>getStatus</code>  method.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click in the editor and choose Fix Imports (Alt-Shift-I; ⌘-Shift-I on Mac) and save your changes. Make sure that  <code>javax.annotation.security.RolesAllowed</code>  is added to the file.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_the_deployment_descriptors"><a class="anchor" href="#_configuring_the_deployment_descriptors"></a>Configuring the Deployment Descriptors</h3>
<div class="paragraph">
<p>Java EE enterprise applications usually do not require deployment descriptor files such as  <code>ejb-jar.xml</code> . If you expand the Configuration Files node under Secure-ejb or the Secure enterprise application, you can see that there are no deployment descriptors. You can use annotations to specify many of the properties that were configured in  <code>ejb-jar.xml</code> . In this example you specified the security roles for the EJB methods by using the  <code>@RolesAllowed</code>  annotation in the session bean.</p>
</div>
<div class="paragraph">
<p>However, when configuring security for an application you still have to specify some properties in the deployment descriptors. In this example you need to map the security roles used in the enterprise application ( <code>USERS</code> ) to the users and groups you configured on the application server. You created the group  <code>bank_users</code>  on the application server, and you now need to map this group to the security role  <code>USERS</code>  in the enterprise application. To do this you will edit the  <code>glassfish-application.xml</code>  deployment descriptor for the enterprise application.</p>
</div>
<div class="paragraph">
<p>Because the enterprise application does not need deployment descriptors to run, the IDE did not create the deployment descriptors by default. So you first need to create the deployment descriptor file and then edit the file in the multi-view editor to configure the security role mappings.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click the Secure enterprise application project and choose New &gt; Other to open the New File wizard.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Alternatively, you can open the New File wizard by choosing File &gt; New File from the main menu. In this case, be sure that you select the Secure project in the Project dropdown list.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select the GlassFish Descriptor file type in the GlassFish category. Click Next.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/new-gf-descriptor.png" alt="new gf descriptor">
</div>
<div class="title">Figure 8. GlassFish descriptor file type in the New File wizard</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Accept the default values in the wizard and click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you click Finish, the IDE creates  <code>glassfish-application.xml</code>  and opens the file in the multi-view editor.</p>
</div>
<div class="paragraph">
<p>If you expand the Secure enterprise application project node in the Projects window, you can see that the descriptor file is created under the Configuration Files node.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/glassfish-application-descriptor.png" alt="glassfish application descriptor">
</div>
<div class="title">Figure 9. Security tab in the multi-view editor</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Security tab of the multi-view editor, click Add Security Role Mapping and type <strong>USERS</strong> for the Security Role Name.</p>
</li>
<li>
<p>Click Add Group and type <strong>bank_users</strong> for the Group Name in the dialog box. Click OK.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The editor should now be similar to the following.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/security-tab-descriptor.png" alt="security tab descriptor">
</div>
<div class="title">Figure 10. Security tab in the multi-view editor</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Save your changes.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can click on the XML tab in the multi-view editor to view deployment descriptor file in XML view. You can see that the deployment descriptor file now contains the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;glassfish-application&gt;
  &lt;security-role-mapping&gt;
    &lt;role-name&gt;USERS&lt;/role-name&gt;
    &lt;group-name&gt;bank_users&lt;/group-name&gt;
  &lt;/security-role-mapping&gt;
&lt;/glassfish-application&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The  <code>getStatus</code>  method is now secure and only those users in the group  <code>bank_users</code>  that you specified on the server can access the method.</p>
</div>
<div class="paragraph">
<p>You now need a way to test the security settings. The simplest way is to create a basic application client that will prompt the user for a username and password.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_application_client"><a class="anchor" href="#_creating_the_application_client"></a>Creating the Application Client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section you will create a simple application client to access the  <code>AccountStatus</code>  session bean. You will use the  <code>@EJB</code>  annotation in the code to call the bean via the remote interface and the IDE will automatically add the class library JAR that contains the interface to the classpath of the application client.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Choose File &gt; New Project and select Enterprise Application Client in the Java EE category. Click Next.</p>
</li>
<li>
<p>Type SecureAppClient for the Project Name. Click Next.</p>
</li>
<li>
<p>Select <strong>&lt;None&gt;</strong> in the Add to Enterprise Application dropdown list.</p>
</li>
<li>
<p>Select GlassFish Server in the Server dropdown list and Java EE 6 or Java EE 7 as the Java EE version. Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you click Finish,  <code>Main.java</code>  opens in the source editor.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the source editor, right-click in the  <code>Main.java</code>  file and choose Insert Code (Alt-Insert; Ctrl-I on Mac) and select Call Enterprise Bean.</p>
</li>
<li>
<p>In the Call Enterprise Bean dialog box, expand the Secure-ejb node and select AccountStatus. Click OK.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/call-enterprise-bean.png" alt="call enterprise bean">
</div>
<div class="title">Figure 11. interface selected in the Call Enterprise Bean dialog box</div>
</div>
<div class="paragraph">
<p>The IDE adds the following code to the application client to look up the session bean.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@EJB
private static AccountStatusRemote accountStatus;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you expand the Libraries node in the Projects window you can see that the IDE added the SecureRemoteInterface JAR to the project classpath.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Modify the  <code>main</code>  method to add the following code and save your changes.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public static void main(String[] args) {
    *System.out.println(accountStatus.getStatus());*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more on applications clients, see <a href="../entappclient/" class="xref page">Creating and Running an Application Client on the GlassFish Server</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_running_the_application"><a class="anchor" href="#_running_the_application"></a>Running the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The application is now ready. You will first deploy the enterprise application to the server. After you deploy the enterprise application you can run the application client to test that the method in the enterprise application is secure and that the user roles are mapped correctly. When you run the application client you will be prompted for a username and password for a user in the  <code>bank_users</code>  group.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click the Secure enterprise application project node in the Projects window and choose Deploy.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you click Deploy, the IDE builds the EAR file, starts the application server (if it&#8217;s not running) and deploys the EAR file to the server.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click the SecureAppClient project node in the Projects window and choose Run. A dialog box appears prompting you for a username and password.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/login-window.png" alt="login window">
</div>
<div class="title">Figure 12. Login window prompting for username and password</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enter the user name ( <code>manager</code> ) and password ( <code>password</code> ) in the dialog box and click OK. The following will appear in the Output window:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">The account contains 250$</code></pre>
</div>
</div>
<div class="paragraph">
<p>This very basic example demonstrates how to use Java annotations to secure a method in an enterprise bean.</p>
</div>
<div class="paragraph">
<p><a href="../../../../../../front/main/community/mailing-lists/" class="xref page">Send Feedback on This Tutorial</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also"><a class="anchor" href="#_see_also"></a>See Also</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information about using annotations and deployment descriptors to secure enterprise beans, see the following resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://docs.oracle.com/javaee/7/tutorial/doc/security-intro003.htm">Securing Containers</a> and <a href="http://docs.oracle.com/javaee/7/tutorial/doc/security-advanced008.htm">Configuring Security Using Deployment Descriptors</a> chapters in the <a href="http://docs.oracle.com/javaee/7/tutorial/doc/partsecurity.htm">Security</a> section of the Java EE 7 Tutorial</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information about using NetBeans IDE to develop Java EE applications, see the following resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../javaee-intro/" class="xref page">Introduction to Java EE Technology</a></p>
</li>
<li>
<p><a href="../javaee-gettingstarted/" class="xref page">Getting Started with Java EE Applications</a></p>
</li>
<li>
<p><a href="../../java-ee/" class="xref page">Java EE &amp;amp; Java Web Learning Trail</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To send comments and suggestions, get support, and keep informed on the latest developments on the NetBeans IDE Java EE development features, <a href="../../../../../../front/main/community/mailing-lists/" class="xref page">join the nbj2ee mailing list</a>.</p>
</div>
</div>
</div>
      <section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        <li><a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/kb/docs/javaee/secure-ejb.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>
      </article>
    </div>
        <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="../../../../../../_/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/about">About</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/community/who">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/community">Community</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/community/mailing-lists">Mailing lists</a></li>
              <li><a href="../../../../../../front/main/community/committer">Becoming a committer</a></li>
              <li><a href="../../../../../../front/main/community/events">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/participate">Participate</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/participate/submit-pr">Submitting Pull Requests</a></li>
              <li><a href="../../../../../../front/main/participate/report-issue">Reporting Issues</a></li>
              <li><a href="../../../../../../front/main/participate/#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/help">Get Help</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/help/#documentation">Documentation</a></li>
              <li><a href="../../../../../../wiki/main/wiki">Wiki</a></li>
              <li><a href="../../../../../../front/main/help/#support">Community Support</a></li>
              <li><a href="../../../../../../front/main/help/commercial-support">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/download">Download</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/download">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="../../../../../../front/main/download/#_daily_builds_and_building_from_source">Building from source</a></li>
              <li><a href="../../../../../../front/main/download/#_older_releases">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
      </div>
    </div>

    
<script src="../../../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../../../.." data-snippet-length="100" data-stylesheet="../../../../../../_/css/search.css"></script>
<script async src="../../../../../../search-index.js"></script>
    <script src="../../../../../../_/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../../../../../_/js/vendor/what-input.js"></script>
    <script src="../../../../../../_/js/vendor/foundation.min.js"></script>
    <script src="../../../../../../_/js/vendor/jquery.colorbox-min.js"></script>
    <script src="../../../../../../_/js/netbeans.js"></script>
    <script>
       $(function(){ $(document).foundation(); });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
      $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); });
    </script>
  </body>
</html>
