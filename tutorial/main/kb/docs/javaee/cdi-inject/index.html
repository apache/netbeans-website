<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Working with Injection and Qualifiers in CDI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Working with Injection and Qualifiers in CDI - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Working with Injection and Qualifiers in CDI">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="../../../../../../_/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    <link rel="stylesheet" href="../../../../../../_/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../../../_/images/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../../../_/images/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../../../_/images/fav/favicon-16x16.png">
    <link rel="manifest" href="../../../../../../_/images/fav/site.webmanifest">
    <link rel="mask-icon" href="../../../../../../_/images/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="../../../../../../_/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="../../../../../../index.html"><img src='../../../../../../_/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <input id="search-input" type="text" placeholder="Search the docs"> </li>
            <li> <a href="../../../../../../front/main/community">Community</a> </li>
            <li> <a href="../../../../../../front/main/participate">Participate</a> </li>
            <li> <a href="../../../../../../front/main/blogs">Blog</a></li>
            <li> <a href="../../../../../../front/main/help">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="../../../../../../front/main/download">Download</a> </li>
        </ul>
    </div>
</div>

    <!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="../../../../../../front/main/download/nb19">Download</a></p>
        </div>
    </div>
</section>
    <div class='grid-container main-content tutorial'>
      <article class="doc">
      <h1 class="sect0">Working with Injection and Qualifiers in CDI</h1>
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/kb/docs/javaee/cdi-inject.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="../../../../../../tutorial/main/kb/docs/contributing">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_contexts_and_dependency_injection">Contexts and Dependency Injection</a></li>
<li><a href="#inject">Injection: the 'I' in CDI</a></li>
<li><a href="#qualifier">Working with Qualifiers</a></li>
<li><a href="#alternative">Alternative Injection Methods</a></li>
<li><a href="#seealso">See Also</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><em>Contributed by Andy Gibson</em></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contexts_and_dependency_injection"><a class="anchor" href="#_contexts_and_dependency_injection"></a>Contexts and Dependency Injection</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="../cdi-intro/" class="xref page">Getting Started with CDI and JSF 2.0</a></p>
</li>
<li>
<p><strong>Working with Injection and Qualifiers in CDI</strong></p>
<div class="ulist">
<ul>
<li>
<p><a href="#inject">Injection: the 'I' in CDI</a></p>
</li>
<li>
<p><a href="#qualifier">Working with Qualifiers</a></p>
</li>
<li>
<p><a href="#alternative">Alternative Injection Methods</a></p>
</li>
<li>
<p><a href="#seealso">See Also</a></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="../cdi-validate/" class="xref page">Applying @Alternative Beans and Lifecycle Annotations</a></p>
</li>
<li>
<p><a href="../cdi-events/" class="xref page">Working with Events in CDI</a></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Contexts and Dependency Injection (CDI), specified by <a href="http://jcp.org/en/jsr/detail?id=299">JSR-299</a>, is an integral part of Java EE 6 and provides an architecture that allows Java EE components such as servlets, enterprise beans, and JavaBeans to exist within the lifecycle of an application with well-defined scopes. In addition, CDI services allow Java EE components such as EJB session beans and JavaServer Faces (JSF) managed beans to be injected and to interact in a loosely coupled way by firing and observing events.</p>
</div>
<div class="paragraph">
<p>This tutorial is based on the blog post by Andy Gibson, entitled <a href="http://www.andygibson.net/blog/index.php/2009/12/22/getting-started-with-cdi-part-2-injection/">Getting Started with CDI part 2 – Injection</a>. It demonstrates how you can use CDI injection to <em>inject</em> classes or interfaces into other classes. It also shows how to apply CDI <em>qualifiers</em> to your code, so that you can specify which class type should be injected at a given injection point.</p>
</div>
<div class="paragraph">
<p>NetBeans IDE provides built-in support for Contexts and Dependency Injection, including the option of generating the <code>beans.xml</code> CDI configuration file upon project creation, editor and navigation support for annotations, as well as various wizards for creating commonly used CDI artifacts.</p>
</div>
<div class="paragraph">
<p>To complete this tutorial, you need the following software and resources.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Software or Resource</th>
<th class="tableblock halign-left valign-top">Version Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../../../../../../front/main/download/" class="xref page">NetBeans IDE</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7.2, 7.3, 7.4, 8.0, Java EE version</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java Development Kit (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">version 7 or 8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://glassfish.dev.java.net/">GlassFish server</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open Source Edition 3.x or 4.x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252FcdiDemo.zip">cdiDemo.zip</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>The NetBeans IDE Java bundle also includes the GlassFish Server Open Source Edition which is a Java EE-compliant container.</p>
</li>
<li>
<p>The solution sample project for this tutorial can be downloaded: <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaEE%252FcdiDemo2.zip">cdiDemo2.zip</a></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="inject"><a class="anchor" href="#inject"></a>Injection: the 'I' in CDI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>CDI is an API for injecting contexts and dependencies. In Seam and Spring, dependencies work mostly by naming beans and binding them to their injection points by their names. If you are following this tutorial after having completed <a href="../cdi-intro/" class="xref page">Getting Started with Contexts and Dependency Injection and JSF 2.0</a>, you have so far only referenced a managed bean by name from the JSF page when we defined the name for the bean using the <code>@Named</code> annotation. The primary role of the <code>@Named</code> annotation is to define the bean for the purpose of resolving EL statements within the application, usually through the JSF EL resolvers. Injection <em>could</em> be performed by using names, but this was not how injection in CDI was meant to work since CDI gives us a much richer way to express injection points and the beans to be injected into them.</p>
</div>
<div class="paragraph">
<p>In the following example, you create an <code>ItemProcessor</code> that takes a list of items from a class that implements the <code>ItemDao</code> interface. You take advantage of CDI&#8217;s <code>@Inject</code> annotation to demonstrate how it is possible to <em>inject</em> a bean into another class. The following diagram depicts the scenario you construct in this exercise.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/cdi-diagram-inject.png" alt="cdi diagram inject">
</div>
<div class="title">Figure 1. Use CDI injection to loosely couple classes in your application</div>
</div>
<div class="paragraph">
<p>DAO stands for <em>data access object</em>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Begin by extracting the sample start project from the <code>cdiDemo.zip</code> file (See the <a href="#requiredSoftware">table listing required resources</a> above.) Open the project in the IDE by choosing File &gt; Open Project (Ctrl-Shift-O; ⌘-Shift-O on Mac), then selecting the project from its location on your computer.</p>
</li>
<li>
<p>Right-click the project node in the Projects window and choose Properties.</p>
</li>
<li>
<p>Select the Run category and confirm that your GlassFish instance is selected in the Server dropdown list.</p>
</li>
<li>
<p>Create a new <code>Item</code> class, and store it in a new package named <code>exercise2</code>. Click the New File ( images:./new-file-btn.png[] ) button or press Ctrl-N (⌘-N on Mac) to open the File wizard.</p>
</li>
<li>
<p>Select the Java category, then select Java Class. Click Next.</p>
</li>
<li>
<p>Enter <strong>Item</strong> as the class name, then type in <strong>exercise2</strong> as the package. (The new package is created upon completing the wizard.)</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/java-class-wizard.png" alt="java class wizard">
</div>
<div class="title">Figure 2. Create a new Java class using the File wizard</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click Finish. The new class and package are generated, and the <code>Item</code> class opens in the editor.</p>
</li>
<li>
<p>Create <code>value</code> and <code>limit</code> properties for the <code>Item</code> POJO, and implement the <code>toString()</code> method. Add the following content to the class.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Item {

    *private int value;
    private int limit;

    @Override
    public String toString() {
        return super.toString() + String.format(" [Value=%d, Limit=%d]", value,limit);
    }*
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add getter and setter methods to the class. To do so, ensure that your cursor is placed between the class definition (i.e., between the class' curly brackets), then right-click in the editor and choose Insert Code (Alt-Insert; Ctrl-I on Mac). Choose Getter and Setter.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/insert-code.png" alt="insert code">
</div>
<div class="title">Figure 3. Create getters and setters using the Insert Code popup</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select the <code>Item</code> check box (doing so selects all properties contained in the class).</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/generate-getters-setters.png" alt="generate getters setters">
</div>
<div class="title">Figure 4. Select the class checkbox to select all properties contained in the class</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click Generate. Getter and setter methods are generated for the class.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Item {

    private int value;
    private int limit;

    *public int getLimit() {
        return limit;
    }

    public void setLimit(int limit) {
        this.limit = limit;
    }

    public int getValue() {
        return value;
    }

    public void setValue(int value) {
        this.value = value;
    }*

    @Override
    public String toString() {
        return super.toString() + String.format(" [Value=%d, Limit=%d]", value, limit);
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a constructor that takes both <code>value</code> and <code>limit</code> arguments. Again, the IDE can assist with this. Press Ctrl-Space within the class definition and choose the &#8216;Item(int value, int limit) - generate&#8217; option.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/generate-constructor.png" alt="generate constructor">
</div>
<div class="title">Figure 5. Press Ctrl-Space to utilize the editor&#8217;s code completion facilities</div>
</div>
<div class="paragraph">
<p>The following constructor is added to the class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Item {

    *public Item(int value, int limit) {
        this.value = value;
        this.limit = limit;
    }*

    private int value;
    private int limit;

    ...</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create an <code>ItemDao</code> interface to define how we get the list of <code>Item</code> objects. In this test application we anticipate using multiple implementations, so we will code to interfaces.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Click the New File ( images:./new-file-btn.png[] ) button or press Ctrl-N (⌘-N on Mac) to open the File wizard.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select the Java category, then select Java Interface. Click Next.</p>
</li>
<li>
<p>Type in <strong>ItemDao</strong> as the class name, then enter <strong>exercise2</strong> as the package.</p>
</li>
<li>
<p>Click Finish. The new interface is generated and opens in the editor.</p>
</li>
<li>
<p>Add a method called <code>fetchItems()</code> that returns a <code>List</code> of <code>Item</code> objects.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface ItemDao {

    *List&lt;Item&gt; fetchItems();*

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>(Use the editor&#8217;s hint to add the import statement for <code>java.util.List</code>.)</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create an <code>ItemProcessor</code> class. This is the main class that you will inject your beans into and execute the process from. For now, you will start with the DAO and look at how you will inject it into our processor bean.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Click the New File ( images:./new-file-btn.png[] ) button or press Ctrl-N (⌘-N on Mac) to open the File wizard.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select the Java category, then select Java Class. Click Next.</p>
</li>
<li>
<p>Type in <strong>ItemProcessor</strong> as the class name, then enter <strong>exercise2</strong> as the package. Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The new class is generated and opens in the editor.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Modify the class as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Named
@RequestScoped
public class ItemProcessor {

    private ItemDao itemDao;

    public void execute() {
        List&lt;Item&gt; items = itemDao.fetchItems();
        for (Item item : items) {
            System.out.println("Found item " + item);
        }
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Fix imports. Either right-click in the editor and choose Fix Imports, or press Ctrl-Shift-I (⌘-Shift-I on Mac).</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/fix-imports.png" alt="fix imports">
</div>
<div class="title">Figure 6. Right-click in the editor and choose Fix Imports to add import statements to the class</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click OK. Import statements for the following classes are required:</p>
<div class="ulist">
<ul>
<li>
<p><code>java.util.List</code></p>
</li>
<li>
<p><code>javax.inject.Named</code></p>
</li>
<li>
<p><code>javax.enterprise.context.RequestScoped</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Begin with a simple DAO that just creates a list of items and returns a fixed list of items.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the Projects window, right-click the <code>exercise2</code> package node and choose New &gt; Java Class. In the Java Class wizard, name the class <code>DefaultItemDao</code>. Click Finish.</p>
</div>
<div class="paragraph">
<p>images:./java-class-wizard2.png[title="Create a new Java class using the Java Class wizard"]</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the editor, have <code>DefaultItemDao</code> implement the <code>ItemDao</code> interface, and provide an implementation of <code>fetchItems()</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class DefaultItemDao *implements ItemDao* {

    *@Override
    public List&lt;Item&gt; fetchItems() {
        List&lt;Item&gt; results = new ArrayList&lt;Item&gt;();
        results.add(new Item(34, 7));
        results.add(new Item(4, 37));
        results.add(new Item(24, 19));
        results.add(new Item(89, 32));
        return results;
    }*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>(Press Ctrl-Shift-I (⌘-Shift-I on Mac) to add import statements for <code>java.util.List</code> and <code>java.util.ArrayList</code>.)</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Switch to the <code>ItemProcessor</code> class (press Ctrl-Tab). In order to inject the <code>DefaultItemDao</code> into <code>ItemProcessor</code>, we add the <code>javax.inject.Inject</code> annotation to the <code>ItemDao</code> field to indicate that this field is an injection point.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">*import javax.inject.Inject;*
...

@Named
@RequestScoped
public class ItemProcessor {

    *@Inject*
    private ItemDao itemDao;

    ...
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Utilize the editor&#8217;s code completion support to add the <code>@Inject</code> annotation and import statement to the class. For example, type &#8216;@Inj&#8217;, then press Ctrl-Space.#
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Finally, we need some way to call the <code>execute()</code> method on the <code>ItemProcessor</code>. We can run this in a SE environment, but for now we&#8217;ll keep it in a JSF page. Create a new page called <code>process.xhtml</code> that contains a button to call the <code>execute()</code> method.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Click the New File ( images:./new-file-btn.png[] ) button or press Ctrl-N (⌘-N on Mac) to open the File wizard.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select the JavaServer Faces category, then select JSF Page. Click Next.</p>
</li>
<li>
<p>Type in <strong>process</strong> as the file name, then click Finish.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/new-jsf-page.png" alt="new jsf page">
</div>
<div class="title">Figure 7. Create a new Facelets page using the JSF file wizard</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the new <code>process.xhtml</code> file, add a button that is wired to the <code>ItemProcessor.execute()</code> method. Using EL, the default name for the managed bean is the same as the class name, but with the first letter being lower-case (i.e., <code>itemProcessor</code>).</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;h:body&gt;
    *&lt;h:form&gt;
        &lt;h:commandButton action="#{itemProcessor.execute}" value="Execute"/&gt;
    &lt;/h:form&gt;*
&lt;/h:body&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Before running the project, set the <code>process.xhtml</code> file as the new welcome page in the project&#8217;s web deployment descriptor.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Use the IDE&#8217;s Go to File dialog to quickly open the <code>web.xml</code> file. Choose Navigate &gt; Go to File from the IDE&#8217;s main menu (Alt-Shift-O; Ctrl-Shift-O on Mac), then type &#8216;web&#8217;.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/go-to-file.png" alt="go to file">
</div>
<div class="title">Figure 8. Use the Go to File dialog to quickly locate a project file</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click OK. In the XML view of the <code>web.xml</code> file, make the following change.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;welcome-file-list&gt;
    &lt;welcome-file&gt;faces/*process.xhtml*&lt;/welcome-file&gt;
&lt;/welcome-file-list&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the Run Project ( images:./run-project-btn.png[] ) button in the IDE&#8217;s main toolbar. The project is compiled and deployed to GlassFish, and the <code>process.xhtml</code> file opens in the browser.</p>
</li>
<li>
<p>Click the &#8216;Execute&#8217; button that displays on the page. Switch back to the IDE and examine the GlassFish server log. The server log displays in the Output window (Ctrl-4; ⌘-4 on Mac) under the GlassFish Server tab. When the button is clicked, the log lists the items from our default DAO implementation.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/output-window.png" alt="output window">
</div>
<div class="title">Figure 9. Examine the server log in the IDE&#8217;s Output window</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Right-click in the Output window and choose Clear (Ctrl-L; ⌘-L on Mac) to clear the log. In the above image, the log was cleared just prior to clicking the &#8216;Execute&#8217; button.#
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We created a class which implements the <code>ItemDao</code> interface, and when the application was deployed our managed beans in the module were processed by the CDI implementation (because of the <code>beans.xml</code> file in the module). Our <code>@Inject</code> annotation specifies that we want to inject a managed bean into that field and the only thing we know about the injectable bean is that it must implement <code>ItemDao</code> or some subtype of that interface. In this case, the <code>DefaultItemDao</code> class fits the bill perfectly.</p>
</div>
<div class="paragraph">
<p>What would happen if there were multiple implementations of <code>ItemDao</code> that could have been injected? CDI would not know which implementation to choose from and would flag a deploy-time error. To overcome this, you would need to use a CDI qualifier. Qualifiers are explored in the following section.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="qualifier"><a class="anchor" href="#qualifier"></a>Working with Qualifiers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A CDI qualifier is an annotation that can be applied at the class level to indicate the kind of bean the class is, and also at the field level (among other places) to indicate what kind of bean needs to be injected at that point.</p>
</div>
<div class="paragraph">
<p>To demonstrate the need for a qualifier in the application we are building, let&#8217;s add another DAO class to our application which also implements the <code>ItemDao</code> interface. The following diagram depicts the scenario you are constructing in this exercise. CDI must be able to determine which bean implementation should be used at an injection point. Because there are two implementations of <code>ItemDao</code>, we can resolve this by creating a qualifier named <code>Demo</code>. Then, we "tag" both the bean we want to use, as well as the injection point in <code>ItemProcessor</code>, with a <code>@Demo</code> annotation.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/javaee/cdi-diagram-qualify.png" alt="cdi diagram qualify">
</div>
<div class="title">Figure 10. Use CDI injection and qualifiers to loosely couple classes in your application</div>
</div>
<div class="paragraph">
<p>Perform the following steps.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Projects window, right-click the <code>exercise2</code> package and choose New &gt; Java Class.</p>
</li>
<li>
<p>In the New Java Class wizard, name the new class <strong>AnotherItemDao</strong> then click Finish. The new class is generated and opens in the editor.</p>
</li>
<li>
<p>Modify the class as follows, so that it implements the <code>ItemDao</code> interface, and defines the interface&#8217;s <code>fetchItems()</code> method.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class AnotherItemDao *implements ItemDao* {

    *@Override
    public List&lt;Item&gt; fetchItems() {
        List&lt;Item&gt; results = new ArrayList&lt;Item&gt;();
        results.add(new Item(99, 9));
        return results;
    }*
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Be sure to add import statements for <code>java.util.List</code> and <code>java.util.ArrayList</code>. To do so, right-click in the editor and choose Fix Imports, or press Ctrl-Shift-I (⌘-Shift-I on Mac).</p>
</div>
<div class="paragraph">
<p>Now that there are two classes that implement <code>ItemDao</code>, the choice is not so clear as to which bean we want to inject.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the Run Project ( images:./run-project-btn.png[] ) button to run the project. Note that the project now fails to deploy.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You probably only need to save the file because the IDE will automatically deploy the project because Deploy on Save is enabled by default.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Examine the server log in the Output window (Ctrl-4; ⌘-4 on Mac). You see an error message similar to the following.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Caused by: org.jboss.weld.DeploymentException: Injection point has ambiguous dependencies.
Injection point: field exercise2.ItemProcessor.itemDao;
Qualifiers: [@javax.enterprise.inject.Default()];
Possible dependencies: [exercise2.DefaultItemDao, exercise2.AnotherItemDao]</code></pre>
</div>
</div>
<div class="paragraph">
<p>To wrap text onto multiple lines in the Output window, right-click and choose Wrap text. This eliminates the need to scroll horizontally.</p>
</div>
<div class="paragraph">
<p>Weld, the implementation for CDI, gives us an ambiguous dependency error meaning that it cannot determine what bean to use for the given injection point. Most, if not all of the errors that can occur with regard to CDI injection in Weld are reported at deployment time, even down to whether passivation-capable beans are missing a <code>Serializable</code> implementation.</p>
</div>
<div class="paragraph">
<p>We could make our <code>itemDao</code> field in the <code>ItemProcessor</code> a specific type that matches one of the implementation types (<code>AnotherItemDao</code> or <code>DefaultItemDao</code>) since it would then match one and only one class type. However, then we would lose the benefits of coding to an interface and find it harder to change implementations without changing the field type. A better solution is to instead look at CDI qualifiers.</p>
</div>
<div class="paragraph">
<p>When CDI inspects an injection point to find a suitable bean to inject, it takes not only the class type into account, but also any qualifiers. Without knowing it, we have already used one qualifier which is the default qualifier called <code>@Any</code>. Let&#8217;s create a <code>@Demo</code> qualifier which we can apply to our <code>DefaultItemDao</code> implementation and also to the injection point in <code>ItemProcessor</code>.</p>
</div>
<div class="paragraph">
<p>The IDE provides a wizard that enables you to generate CDI qualifiers.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the New File ( images:./new-file-btn.png[] ) button or press Ctrl-N (⌘-N on Mac) to open the File wizard.</p>
</li>
<li>
<p>Select the Context and Dependency Injection category, then select Qualifier Type. Click Next.</p>
</li>
<li>
<p>Enter <strong>Demo</strong> as the class name, then enter <strong>exercise2</strong> as the package.</p>
</li>
<li>
<p>Click Finish. The new <code>Demo</code> qualifier opens in the editor.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package exercise2;

import static java.lang.annotation.ElementType.TYPE;
import static java.lang.annotation.ElementType.FIELD;
import static java.lang.annotation.ElementType.PARAMETER;
import static java.lang.annotation.ElementType.METHOD;
import static java.lang.annotation.RetentionPolicy.RUNTIME;
import java.lang.annotation.Retention;
import java.lang.annotation.Target;
import javax.inject.Qualifier;

/**
*
* @author nbuser
*/
@Qualifier
@Retention(RUNTIME)
@Target({METHOD, FIELD, PARAMETER, TYPE})
public @interface Demo {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next you will add this qualifier to the default DAO implementation at the class level.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Switch to <code>DefaultItemDao</code> in the editor (press Ctrl-Tab), then type in &#8216;@Demo&#8217; above the class definition.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">*@Demo*
public class DefaultItemDao implements ItemDao {

@Override
public List&lt;Item&gt; fetchItems() {
    List&lt;Item&gt; results = new ArrayList&lt;Item&gt;();
    results.add(new Item(34, 7));
    results.add(new Item(4, 37));
    results.add(new Item(24, 19));
    results.add(new Item(89, 32));
    return results;
}
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
After typing &#8216;@&#8217;, press Ctrl-Space to invoke code completion suggestions. The editor recognizes the <code>Demo</code> qualifier and lists <code>@Demo</code> as an option for code completion.#
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the Run Project ( images:./run-project-btn.png[] ) button to run the project. The project builds and deploys without errors.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For this modification you might need to explicitly run the project to redeploy the application instead of incrementally deploying the changes.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the browser, click the &#8216;Execute&#8217; button, then return to the IDE and examine the server log in the Output window. You see the following output.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">INFO: Found item exercise2.Item@1ef62a93 [Value=99, Limit=9]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output lists the item from the <code>AnotherItemDao</code> class. Recall that we annotated the <code>DefaultItemDao</code> implementation but not the injection point in <code>ItemProcessor</code>. By adding the <code>@Demo</code> qualifier to the default DAO implementation, we made the other implementation a more suitable match for the injection point because it matched on both the type and the qualifier. The <code>DefaultItemDao</code> currently has the <code>Demo</code> qualifier which is not on the injection point, thus making it less suitable.</p>
</div>
<div class="paragraph">
<p>Next you will add the <code>@Demo</code> annotation to the injection point in <code>ItemProcessor</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Switch to <code>ItemProcessor</code> in the editor (press Ctrl-Tab), then make the following change.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Named
@RequestScoped
public class ItemProcessor {

@Inject *@Demo*
private ItemDao itemDao;

public void execute() {
    List&lt;Item&gt; items = itemDao.fetchItems();
    for (Item item : items) {
        System.out.println("Found item " + item);
    }
}
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the browser, click the &#8216;Execute&#8217; button, then return to the IDE and examine the server log in the Output window. You see output from the default implementation (<code>DefaultItemDao</code>) again.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">INFO: Found item exercise2.Item@7b3640f1 [Value=34, Limit=7]
INFO: Found item exercise2.Item@26e1cd69 [Value=4, Limit=37]
INFO: Found item exercise2.Item@3274bc70 [Value=24, Limit=19]
INFO: Found item exercise2.Item@dff76f1 [Value=89, Limit=32]</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is because you are now matching based on type <em>and</em> qualifiers, and <code>DefaultItemDao</code> is the only bean with both the correct type and the <code>@Demo</code> annotation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="alternative"><a class="anchor" href="#alternative"></a>Alternative Injection Methods</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are multiple ways to define an injection point on the injected class. So far you have annotated the fields that reference the injected object. You do not need to provide getters and setters for field injection. If you wish to create immutable managed beans with final fields, you can use injection in the constructor by annotating the constructor with the <code>@Inject</code> annotation. You can then apply any annotations to constructor parameters to qualify beans for injection. (Of course, each parameter has a type that can assist in qualifying beans for injection). A bean may only have one constructor with injection points defined, but it may implement more than one constructor.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Named
@RequestScoped
public class ItemProcessor {

    private final ItemDao itemDao;

    @Inject
    public ItemProcessor(@Demo ItemDao itemDao) {
        this.itemDao = itemDao;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also call an initialization method which can be passed a bean that is to be injected.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Named
@RequestScoped
public class ItemProcessor {

    private ItemDao itemDao;

    @Inject
    public void setItemDao(@Demo ItemDao itemDao) {
        this.itemDao = itemDao;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>While in the above case the setter method is used for initialization, you can create any method and use it for initialization with as many beans as you want in the method call. You can also have multiple initialization methods in a bean.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
public void initBeans(@Demo ItemDao itemDao, @SomeQualifier SomeType someBean) {
    this.itemDao = itemDao;
    this.bean = someBean;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The same rules apply to bean matching regardless of how the injection point is defined. CDI will try to find the best match based on type and qualifiers and will fail on deployment if there are multiple matching beans, or no matching beans for an injection point.</p>
</div>
<div class="paragraph">
<p><a href="../../../../../../front/main/community/mailing-lists/" class="xref page">Send Feedback on This Tutorial</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="seealso"><a class="anchor" href="#seealso"></a>See Also</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Continue to the next installment of this series on Contexts and Dependency Injection:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../cdi-validate/" class="xref page">Applying @Alternative Beans and Lifecycle Annotations</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information about CDI and Java EE, see the following resources.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../cdi-intro/" class="xref page">Getting Started with Contexts and Dependency Injection and JSF 2.0</a></p>
</li>
<li>
<p><a href="../javaee-gettingstarted/" class="xref page">Getting Started with Java EE Applications</a></p>
</li>
<li>
<p><a href="http://blogs.oracle.com/enterprisetechtips/entry/using_cdi_and_dependency_injection">Enterprise Tech Tip: Using CDI and Dependency Injection for Java in a JSF 2.0 Application</a></p>
</li>
<li>
<p><a href="http://download.oracle.com/javaee/6/tutorial/doc/gjbnr.html">The Java EE 6 Tutorial, Part V: Contexts and Dependency Injection for the Java EE Platform</a></p>
</li>
<li>
<p><a href="http://jcp.org/en/jsr/detail?id=299">JSR 299: Specification for Contexts and Dependency Injection</a></p>
</li>
</ul>
</div>
</div>
</div>
      <section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        <li><a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/kb/docs/javaee/cdi-inject.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>
      </article>
    </div>
        <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="../../../../../../_/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/about">About</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/community/who">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/community">Community</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/community/mailing-lists">Mailing lists</a></li>
              <li><a href="../../../../../../front/main/community/committer">Becoming a committer</a></li>
              <li><a href="../../../../../../front/main/community/events">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/participate">Participate</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/participate/submit-pr">Submitting Pull Requests</a></li>
              <li><a href="../../../../../../front/main/participate/report-issue">Reporting Issues</a></li>
              <li><a href="../../../../../../front/main/participate/#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/help">Get Help</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/help/#documentation">Documentation</a></li>
              <li><a href="../../../../../../wiki/main/wiki">Wiki</a></li>
              <li><a href="../../../../../../front/main/help/#support">Community Support</a></li>
              <li><a href="../../../../../../front/main/help/commercial-support">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/download">Download</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/download">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="../../../../../../front/main/download/#_daily_builds_and_building_from_source">Building from source</a></li>
              <li><a href="../../../../../../front/main/download/#_older_releases">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
      </div>
    </div>

    
<script src="../../../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../../../.." data-snippet-length="100" data-stylesheet="../../../../../../_/css/search.css"></script>
<script async src="../../../../../../search-index.js"></script>
    <script src="../../../../../../_/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../../../../../_/js/vendor/what-input.js"></script>
    <script src="../../../../../../_/js/vendor/foundation.min.js"></script>
    <script src="../../../../../../_/js/vendor/jquery.colorbox-min.js"></script>
    <script src="../../../../../../_/js/netbeans.js"></script>
    <script>
       $(function(){ $(document).foundation(); });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
      $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); });
    </script>
  </body>
</html>
