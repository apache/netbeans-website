<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Introduction to Profiling Java Applications in NetBeans IDE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Introduction to Profiling Java Applications in NetBeans IDE - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Introduction to Profiling Java Applications in NetBeans IDE">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="../../../../../../_/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    <link rel="stylesheet" href="../../../../../../_/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../../../_/images/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../../../_/images/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../../../_/images/fav/favicon-16x16.png">
    <link rel="manifest" href="../../../../../../_/images/fav/site.webmanifest">
    <link rel="mask-icon" href="../../../../../../_/images/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="../../../../../../_/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="../../../../../../index.html"><img src='../../../../../../_/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <input id="search-input" type="text" placeholder="Search the docs"> </li>
            <li> <a href="../../../../../../front/main/community">Community</a> </li>
            <li> <a href="../../../../../../front/main/participate">Participate</a> </li>
            <li> <a href="../../../../../../front/main/blogs">Blog</a></li>
            <li> <a href="../../../../../../front/main/help">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="../../../../../../front/main/download">Download</a> </li>
        </ul>
    </div>
</div>

    <!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="../../../../../../front/main/download/nb19">Download</a></p>
        </div>
    </div>
</section>
    <div class='grid-container main-content tutorial'>
      <article class="doc">
      <h1 class="sect0">Introduction to Profiling Java Applications in NetBeans IDE</h1>
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/kb/docs/java/profiler-intro.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="../../../../../../tutorial/main/kb/docs/contributing">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_profiling_for_the_first_time">Profiling for the First Time</a>
<ul class="sectlevel2">
<li><a href="#_creating_the_sample_project">Creating the Sample Project</a></li>
<li><a href="#_using_the_profiler_for_the_first_time">Using the Profiler for the First Time</a></li>
</ul>
</li>
<li><a href="#_selecting_a_profiling_task">Selecting a Profiling Task</a>
<ul class="sectlevel2">
<li><a href="#_monitoring_an_application">Monitoring an Application</a></li>
<li><a href="#_analyzing_cpu_performance">Analyzing CPU Performance</a></li>
<li><a href="#_analyzing_memory_usage">Analyzing Memory Usage</a></li>
</ul>
</li>
<li><a href="#_taking_snapshots">Taking Snapshots</a>
<ul class="sectlevel2">
<li><a href="#_taking_and_comparing_memory_snapshots">Taking and Comparing Memory Snapshots</a></li>
</ul>
</li>
<li><a href="#_conclusion">Conclusion</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>NetBeans IDE includes a powerful profiling tool that can provide important information about the runtime behavior of your application. The NetBeans profiling tool easily enables you to monitor thread states, CPU performance, and memory usage of your application from within the IDE, and imposes relatively low overhead.</p>
</div>
<div class="paragraph">
<p>This introductory document is an overview of the profiling tools included in the IDE and a guide to help you quickly start profiling your NetBeans projects. This document is intended to demonstrate the various profiling tasks available in the IDE and the profiling results you can obtain when profiling a project. It does not cover all the profiling features included in the IDE, nor does it explore how to interpret profiling results to resolve specific performance issues you may have in your application.</p>
</div>
<div class="paragraph">
<p>In this document you will use the profiling tool to obtain profiling data about the Anagram Game sample application, a simple Java application that is included in the IDE. Though the Anagram Game is a very simple Java application project, you would follow the same steps to profile larger, more complex Java applications, as well as web and enterprise application projects.</p>
</div>
<div class="paragraph">
<p>This document shows how to use the IDE to profile the application and obtain the following profiling results:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Runtime behavior of an application</p>
</li>
<li>
<p>CPU time used by an application&#8217;s methods</p>
</li>
<li>
<p>Object creation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additionally, this document demonstrates how to take and compare snapshots of profiling results.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_profiling_for_the_first_time"><a class="anchor" href="#_profiling_for_the_first_time"></a>Profiling for the First Time</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The first time that you use the profiling tool, the IDE needs to perform some initial operations to ensure that accurate profile results are obtained and to integrate the tool with the project. To demonstrate this, you will first create the AnagramGame project and then run the calibration. The IDE will automatically perform the integration the first time you profile the AnagramGame project.</p>
</div>
<div class="sect2">
<h3 id="_creating_the_sample_project"><a class="anchor" href="#_creating_the_sample_project"></a>Creating the Sample Project</h3>
<div class="paragraph">
<p>In this document you will profile the Anagram Game sample application. To do this you will first use the New Project wizard to create the sample application and set the project as the Main Project.</p>
</div>
<div class="paragraph">
<p>To create the Anagram Game application perform the following steps.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Choose File &gt; New Project (Ctrl-Shift-N; ⌘-Shift-N on Mac) from the main menu.</p>
</li>
<li>
<p>In the New Projects wizard, select the Samples &gt; Java category.</p>
</li>
<li>
<p>Select the Anagram Game project. Click Next.</p>
</li>
<li>
<p>Specify a location for the project. Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you click Finish, the IDE creates the Anagram Game sample project.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Choose Run &gt; Set Main Project &gt; AnagramGame from the main menu.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After you set the project as the main project you can see that the name of the Anagram Game project is in bold in the Projects window. By default, when using the IDE to profile a project, the IDE will profile the main project. If no project is set as the main project the IDE will profile the project that is selected in the Projects window.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_the_profiler_for_the_first_time"><a class="anchor" href="#_using_the_profiler_for_the_first_time"></a>Using the Profiler for the First Time</h3>
<div class="paragraph">
<p>To achieve accurate profiling results, you must have calibration data for each Java platform that will be used for profiling. If you are running the profiling tool for the first time, or if valid calibration data is unavailable for the Java platform, the IDE will prompt you to run the calibration process for your platform.</p>
</div>
<div class="paragraph">
<p>The calibration only needs to be performed once. However, if you make any substantial changes to the configuration of the machine that could affect machine performance, you should run the calibration again. You can run the calibration at any time by performing the following steps.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Choose <strong>Advanced Commands</strong> &gt; <strong>Manage Calibration Data</strong> from the Profile menu.</p>
</li>
<li>
<p>Select the Java Platform. Click Calibrate.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/java/calibrate-select-platform.png" alt="calibrate select platform">
</div>
<div class="title">Figure 1. Dialog box to select the Java Platform when calibrating.</div>
</div>
<div class="paragraph">
<p>A dialog box appears when the calibration operation is complete. You can click Show Details to view a dialog box with information about the calibration results. The calibration data for each Java platform is saved in the  <code>.nbprofile</code>  directory in your home directory.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/java/calibrate-information.png" alt="calibrate information">
</div>
<div class="title">Figure 2. Calibration Information dialog</div>
</div>
<div class="paragraph">
<p><strong>Note.</strong> If you are using NetBeans IDE 7.4 or earlier, choose <strong>Advanced Commands</strong> &gt; <strong>Run Profiler Calibration</strong> from the Profile menu and select the Java platform in the Select Java Platform to Calibrate dialog box.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/java/calibrate-select-platform.png" alt="calibrate select platform">
</div>
<div class="title">Figure 3. Dialog box to select the Java Platform when calibrating.</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_selecting_a_profiling_task"><a class="anchor" href="#_selecting_a_profiling_task"></a>Selecting a Profiling Task</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The IDE provides a number of internal settings that let you tune profiling to your needs. For example, you may decrease the profiling overhead at the cost of some reduction in the amount of generated information. However, it may take some time to understand the meaning and use of the numerous settings available. For many applications, the default settings specified for the profiling tasks are sufficient in most situations.</p>
</div>
<div class="paragraph">
<p>When profiling a project, you use the Select Profiling Task dialog box to choose a task according to the type of profiling information you want to obtain. The following table describes the profiling tasks and the profiling results obtained from running the task.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Profiling Task</th>
<th class="tableblock halign-left valign-top">Results</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#monitor">Monitor Application</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Choose this to obtain high-level information about properties of the target JVM, including thread activity and memory allocations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#cpu">Analyze CPU Performance</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Choose this to obtain detailed data on application performance, including the time to execute methods and the number of times the method is invoked.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#memory">Analyze Memory Usage</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Choose this to obtain detailed data on object allocation and garbage collection.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The Select Profiling Task dialog box is the main interface for running a profiling task. After you select a task, you can modify the task settings to fine tune the results you will obtain. For each of the profiling tasks, you can also create and save custom profiling tasks based on the task. When you create a custom profiling task, the custom task is listed in the Select Profiling Task dialog box so that you can easily find and run your custom settings later. When you create a custom profiling task, you can modify more advanced profiling settings by clicking <strong>Advanced settings</strong> in the Select Profiling Task dialog box.</p>
</div>
<div class="sect2">
<h3 id="_monitoring_an_application"><a class="anchor" href="#_monitoring_an_application"></a>Monitoring an Application</h3>
<div class="paragraph">
<p>When you choose the Monitor task, the target application is started without any instrumentation. When monitoring an application, you obtain high-level information about several important properties of the target JVM. Because monitoring an application imposes very low overhead, you can run the application in this mode for extended periods of time.</p>
</div>
<div class="paragraph">
<p>To monitor the Anagram Game application, perform the following steps.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Confirm that the AnagramGame project is set as the main project.</p>
</li>
<li>
<p>Choose Profile &gt; Profile Main Project from the main menu.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Alternatively, right-click the project node in the Projects window and choose Profile.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select Monitor in the Select Profiling Task dialog box.</p>
</li>
<li>
<p>Select additional monitor options, if desired. Click Run.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/java/monitor-task.png" alt="monitor task">
</div>
<div class="title">Figure 4. Selecting the Monitor Application profiling task</div>
</div>
<div class="paragraph">
<p>You can hover the cursor over an option to view a tooltip with details about the option.</p>
</div>
<div class="paragraph">
<p>When you click Run, the IDE launches the application and the Profiler window opens in the left pane of the IDE. The Profiler window contains the controls that enable you to do the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Control the profiling task</p>
</li>
<li>
<p>See the status of the current profiling task</p>
</li>
<li>
<p>Display profiling results</p>
</li>
<li>
<p>Manage profiling results snapshots</p>
</li>
<li>
<p>See basic telemetry statistics</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can use the controls in the Profiler window or the main menu to open the windows where you can view the monitoring data. You can use the Telemetry Overview window to quickly get an overview of the monitoring data in real time. If you place the cursor over a graph, you can see more detailed statistics about the data displayed in the graph. You can double-click on any of the graphs in the Telemetry Overview window to open a larger and more detailed version of the graph.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/java/profile-intro-telemoverview.png" alt="profile intro telemoverview">
</div>
<div class="title">Figure 5. Telemetry Overview window</div>
</div>
<div class="paragraph">
<p>If the overview does not open automatically you can choose Window &gt; Profiling &gt; VM Telemetry Overview to open the overview in the Output window. You can open the VM Telemetry Overview window and see monitoring data at any time during any profiling session.</p>
</div>
</div>
<div class="sect2">
<h3 id="_analyzing_cpu_performance"><a class="anchor" href="#_analyzing_cpu_performance"></a>Analyzing CPU Performance</h3>
<div class="paragraph">
<p>When you choose the CPU task, the IDE profiles the method-level CPU performance (execution time) of your application and processes the results in real-time. You can choose to analyze the performance by periodically taking a stack trace or by instrumenting the methods in the application. You can choose to instrument all the methods or limit the instrumentation to a part of the application code, even down to a specific code fragment.</p>
</div>
<div class="paragraph">
<p>To analyze CPU performance, you choose how the application is profiled by selecting one of the following options.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Quick (Sampled).</strong> In this mode, the IDE samples the application and takes a stack trace periodically. This option is less precise than instrumenting methods, but the overhead is lower. This option can help you locate methods that you might want to instrument.</p>
</li>
<li>
<p><strong>Advanced (Instrumented).</strong> In this mode, the methods of the profiled application are instrumented. The IDE records when threads enter and exit project methods enabling you to see how much time is spent in each method. When entering a method, threads generate a "method entry" event. Threads generate a corresponding "method exit" event when exiting the method. The timestamps for both of these events are recorded. This data is processed in real time.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can choose to instrument all the methods in the application or limit the instrumentation to a subset of the application&#8217;s code by specifying one or more <strong>root methods</strong>. You can specify a root method using the popup menu in the source code or by clicking <strong>customize</strong> to open the Edit Profiling Roots dialog box.</p>
</div>
<div class="paragraph">
<p>A root method is the method, class or package in your source code that you specify as an instrumentation root. Profiling data is collected when one of the application&#8217;s threads enters and leaves the instrumentation root. No profiling data is collected until one of the application&#8217;s threads enters the root method. Specifying a root method can significantly reduce the profiling overhead. For some applications, specifying a root method may be the only way to obtain any detailed and/or realistic performance data because profiling the entire application may generate so much profiling data that the application becomes unusable or may even cause the application to crash.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Quick profile mode is not available in NetBeans IDE 7.0 and earlier. You can only use instrumentation to obtain profiling results, but you can choose to instrument the entire application or limit instrumentation to part of the application by specifying one or more root methods.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can further fine tune how much code is profiled by using a filter to limit the sources that are instrumented.</p>
</div>
<div class="paragraph">
<p>You will now use the IDE to analyze the CPU performance of the Anagram Game application. You will choose the Part of Application option and then select  <code>WordLibrary.java</code>  as the profiling root. By selecting this class as the profiling root, you limit the profiling to the methods in this class.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the Stop button in the Profiler window to stop the previous profiling session (if still running).</p>
</li>
<li>
<p>Choose Profile &gt; Profile Main Project from the main menu.</p>
</li>
<li>
<p>Select CPU in the Select Profiling Task dialog box.</p>
</li>
<li>
<p>Select <strong>Advanced (Instrumented)</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To use this option you also need to specify a profiling root method.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <strong>customize</strong> to open the Edit Profiling Roots dialog box.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/java/select-cpu-task.png" alt="select cpu task">
</div>
<div class="title">Figure 6. Select CPU Profiling Task</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Edit Profiling Roots dialog box, expand the AnagramGame node and select  <code>Sources/com.toy.anagrams.lib/WordLibrary</code> . When profiling a project you can specify multiple root methods.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/java/edit-profiling-roots.png" alt="edit profiling roots">
</div>
<div class="title">Figure 7. Dialog box for selecting the root methods</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the Advanced button to open the Edit Profiling Roots (Advanced) dialog box which provides more advanced options for adding, editing and removing root methods.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/java/edit-profiling-roots-adv.png" alt="edit profiling roots adv">
</div>
<div class="title">Figure 8. Dialog box for specifying the root methods</div>
</div>
<div class="paragraph">
<p>You can see that  <code>WordLibrary</code>  is listed as the root method. Click OK to close the Edit Profiling Roots (Advanced) dialog box.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click OK to close the Edit Profiling Roots dialog box.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After you select the profiling root you can click <strong>edit</strong> in the Select Profiling Task dialog to modify the selected root method.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select <strong>Profile only project classes</strong> for the Filter value.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The filter enables you to limit the classes that are instrumented. You can choose from the IDE&#8217;s predefined profiling filters or create your own custom filters. You can click <strong>Show filter value</strong> to see a list of the classes that will be profiled when the selected filter is applied.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/java/show-filter-value.png" alt="show filter value">
</div>
<div class="title">Figure 9. Show Filter Value Dialog box</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click Run in the Select Profiling Task dialog box to start the profiling session.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you click Run, the IDE launches the application and starts the profiling session. To view the profiling results, click Live Results in the Profiler window to open the Live Results window. The Live Results window displays the profiling data collected thus far. The data displayed is refreshed every few seconds by default. When analyzing CPU performance, the Live Results window displays information on the time spent in each method and the number of invocations of each method. You can see that in the Anagram Game application only the selected root methods are invoked initially.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/java/cpu-liveresults1.png" alt="cpu liveresults1">
</div>
<div class="title">Figure 10. CPU Live Results</div>
</div>
<div class="paragraph">
<p>You can quickly navigate to the source code containing any of the listed methods by right-clicking the name of the method and choosing Go To Source. When you click Go To Source the class opens in the Source editor.</p>
</div>
</div>
<div class="sect2">
<h3 id="_analyzing_memory_usage"><a class="anchor" href="#_analyzing_memory_usage"></a>Analyzing Memory Usage</h3>
<div class="paragraph">
<p>The Analyze Memory Usage task gives you data on objects that have been allocated in the target application such as the number, type and location of the allocated objects.</p>
</div>
<div class="paragraph">
<p>To analyze memory performance, you choose how much data you want to obtain by selecting one of the following options.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Quick.</strong> When this option is selected, the profiler samples the application to provide data that is limited to the live objects. This option only tracks live objects and does not track allocations when instrumenting. It is not possible to record stack traces or to use profiling points if you select this option. This option incurs a significantly lower overhead than the Advanced option.</p>
</li>
<li>
<p><strong>Advanced.</strong> When this option is selected application you can obtain information about the number, type, and location of allocated objects. All classes that are currently loaded by the target JVM (and each new class as it is loaded) are instrumented to produce information about object allocations. You need to select this option if you want to use profiling points when analyzing memory usage or if you want to record the call stack. This options incurs a greater profiling overhead than the Quick option.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you select the Advanced option you can also set the following options.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Record Full Object Lifestyle.</strong> Select this option to record all information for each object, including the number of generations survived.</p>
</li>
<li>
<p><strong>Record Stack Trace for Allocations.</strong> Select this option to record the full call stack. This option enables you to view the reverse call tree for method calls when viewing a memory snapshot.</p>
</li>
<li>
<p><strong>Use defined Profiling Points.</strong> Select this option to enable profiling points. Disabled profiling points are ignored. When deselected, all profiling points in the project are ignored.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Overhead meter in the Select Profiling Tasks window gives a rough approximation of the increase or decrease in the profiling overhead according to the profiling options that you select.</p>
</div>
<div class="paragraph">
<p>In this exercise you will use the IDE to analyze the memory performance of the Anagram Game application. You will choose the <strong>Advanced</strong> option and select the <strong>Record Stack Trace for Allocations</strong> so that the IDE records the full call stack. By selecting this option, when you take the memory snapshot you will be able to view a reverse call tree.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the Stop button in the Profiler window to stop the previous profiling session (if still running) and stop the Anagram Game application.</p>
</li>
<li>
<p>Choose Profile &gt; Profile Main Project from the main menu.</p>
</li>
<li>
<p>Select Memory in the Select Profiling Task dialog box.</p>
</li>
<li>
<p>Select <strong>Advanced</strong>.</p>
</li>
<li>
<p>Select <strong>Record Stack Trace for Allocations</strong>. Click Run to start the profiling session.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Notice that when you selected this option the Overhead meter increased substantially, but the application is small enough that the performance hit should be manageable.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/java/profile-java-memory.png" alt="profile java memory">
</div>
<div class="title">Figure 11. Select Memory Profiling Task</div>
</div>
<div class="paragraph">
<p>When you click Run, the IDE launches the application and starts the profiling session. To view the profiling results, click Live Results in the Profiler window to open the Live Results window. The Live Results window displays information on the size and number of objects that are allocated in our project.</p>
</div>
<div class="paragraph">
<p>By default the results are sorted and displayed by the number of Live Bytes, but you can click a column header to change how the results are displayed. You can also filter the results by typing a class name in the filter box below the list.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/java/profile-java-memresults1.png" alt="profile java memresults1">
</div>
<div class="title">Figure 12. Memory Profiling Results</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_taking_snapshots"><a class="anchor" href="#_taking_snapshots"></a>Taking Snapshots</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a profiling session is in progress, you can capture profiling results by taking a snapshot. A snapshot captures the profiling data at the moment you take the snapshot. However, snapshots differ from live profiling results in the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Snapshots can be examined when no profiling session is running.</p>
</li>
<li>
<p>Snapshots contain a more detailed record of profiling data than live results.</p>
</li>
<li>
<p>Snapshots can be easily compared (memory snapshots).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because a profiling session does not have to be in progress to open a project&#8217;s snapshots, you can open a project&#8217;s snapshot at any time by selecting the snapshot in the list of saved snapshots in the Profiler window and clicking Open.</p>
</div>
<div class="sect2">
<h3 id="_taking_and_comparing_memory_snapshots"><a class="anchor" href="#_taking_and_comparing_memory_snapshots"></a>Taking and Comparing Memory Snapshots</h3>
<div class="paragraph">
<p>For the Anagram Game application, you can take a snapshot of the results to see the allocation stack trace for the objects of type  <code>String</code> . You can then take another snapshot and compare the two. By comparing memory snapshots you can see what objects have been created or released from the heap in the interval between when you took the two snapshots. The snapshots must be comparable, which means that the profiling type (e.g., Allocations vs. Liveness) and the number of tracked objects must match.</p>
</div>
<div class="paragraph">
<p>In this exercise you will take and save a snapshot to your project. You will then take a second snapshot and compare the second snapshot to the saved snapshot.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure the profiling session is still running.
(If you stopped the profiling session, repeat the steps to analyze memory performance and open the Live Results window.)</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click the line containing  <code>java.lang.String</code>  in the Live Results window and choose Take Snapshot and Show Allocation Stack Traces.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can use the filter in the Live Results window to help you find the line.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/java/profile-java-memstack1.png" alt="profile java memstack1">
</div>
<div class="title">Figure 13. Snapshot of Memory Profiling Results</div>
</div>
<div class="paragraph">
<p>The IDE takes a memory snapshot and opens the snapshot in the Allocation Stack Traces tab. In the Allocation Stack Traces tab you can explore the reverse call tree for the methods that instantiated the selected object.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the Save Snapshot to Project button in the snapshot toolbar (Ctrl-S; ⌘-S on Mac) to save the memory snapshot to your project. When you save the snapshot to your project, the snapshot is added to the list of Anagram Game&#8217;s saved snapshots in the Profiler window. By default, snapshots are physically saved in the  <code>nbproject/private/profiler</code>  directory of your project. Saved snapshots are appended with the  <code>.nps</code>  suffix.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Note.</strong> You can save snapshots anywhere on your filesystem, however only snapshots saved in the default location in your project will be listed in the Profiler window. You can also click the "Save current view to image" button in the snapshot&#8217;s toolbar to save the snapshot as an image files ( <code>.png</code> ) that can be viewed outside of the IDE.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Take another snapshot by clicking the Take Snapshot of Collected Results button in the Live Results toolbar (or alternatively, click the Take Snapshot button in the Profiler window). Save the snapshot.</p>
</li>
<li>
<p>In the window of one of the memory snapshots, click the Compute Difference button ( <span class="image"><img src="../../../../_images/kb/docs/java/comparesnapshots.png" alt="comparesnapshots" title="Compare Snapshot button"></span> ) in the snapshot toolbar. Alternatively, choose Profile &gt; Compare Memory Snapshots from the main menu.</p>
</li>
<li>
<p>In the Select Snapshot to Compare, select one of the open snapshots from the list. Click OK.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/java/profile-java-selectsnap.png" alt="profile java selectsnap">
</div>
<div class="title">Figure 14. Select Snapshots to Compare dialog box</div>
</div>
<div class="paragraph">
<p>When a memory snapshot is open, you can compare it to other comparable memory snapshots. You can compare the snapshot to unsaved snapshots that are currently open or to snapshots that are saved to the project or elsewhere on your system.</p>
</div>
<div class="paragraph">
<p>When you click OK, the Liveness Comparison window opens displaying the differences between the two memory snapshots.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/java/profile-java-compare.png" alt="profile java compare">
</div>
<div class="title">Figure 15. tab showing results of Liveness Comparison of two memory snapshots</div>
</div>
<div class="paragraph">
<p>The snapshot comparison looks similar to a memory snapshot but only displays the differences between the two compared snapshots. When you look at the numbers in the columns you can see that a plus sign ( + ) indicates that the value increased and a minus sign ( - ) indicates that the value decreased. In the Live Bytes column a graphical bar enables you to easily see the difference in the bytes allocated. If the left half of the cell in that column is green it means that the number of allocated bytes for that object is lower when the second snapshot was taken than it was when the first was taken. If the right half of the cell is red it means that the number of allocated bytes is higher in the second snapshot than in the first.</p>
</div>
<div class="paragraph">
<p><strong>Note.</strong> You can also set Take Snapshot profiling points for more precise control over when snapshots are taken. For more on how to take snapshots using profiling points, see <a href="../profiler-profilingpoints/" class="xref page">Using Profiling Points in NetBeans IDE</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion"><a class="anchor" href="#_conclusion"></a>Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This concludes the introduction to profiling an application using NetBeans IDE. This document demonstrated the basics of how to use the IDE to profile a simple NetBeans project and view the profiling results. The steps outlined above can be applied when profiling most projects. Profiling more complex projects such as enterprise applications and free-form projects may require additional configuration steps.</p>
</div>
<div class="paragraph">
<p><a href="#top">top</a></p>
</div>
</div>
</div>
      <section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        <li><a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/kb/docs/java/profiler-intro.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>
      </article>
    </div>
        <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="../../../../../../_/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/about">About</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/community/who">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/community">Community</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/community/mailing-lists">Mailing lists</a></li>
              <li><a href="../../../../../../front/main/community/committer">Becoming a committer</a></li>
              <li><a href="../../../../../../front/main/community/events">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/participate">Participate</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/participate/submit-pr">Submitting Pull Requests</a></li>
              <li><a href="../../../../../../front/main/participate/report-issue">Reporting Issues</a></li>
              <li><a href="../../../../../../front/main/participate/#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/help">Get Help</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/help/#documentation">Documentation</a></li>
              <li><a href="../../../../../../wiki/main/wiki">Wiki</a></li>
              <li><a href="../../../../../../front/main/help/#support">Community Support</a></li>
              <li><a href="../../../../../../front/main/help/commercial-support">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/download">Download</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/download">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="../../../../../../front/main/download/#_daily_builds_and_building_from_source">Building from source</a></li>
              <li><a href="../../../../../../front/main/download/#_older_releases">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
      </div>
    </div>

    
<script src="../../../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../../../.." data-snippet-length="100" data-stylesheet="../../../../../../_/css/search.css"></script>
<script async src="../../../../../../search-index.js"></script>
    <script src="../../../../../../_/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../../../../../_/js/vendor/what-input.js"></script>
    <script src="../../../../../../_/js/vendor/foundation.min.js"></script>
    <script src="../../../../../../_/js/vendor/jquery.colorbox-min.js"></script>
    <script src="../../../../../../_/js/netbeans.js"></script>
    <script>
       $(function(){ $(document).foundation(); });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
      $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); });
    </script>
  </body>
</html>
