<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Introduction to Ajax for Java Web Applications</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Introduction to Ajax for Java Web Applications - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Introduction to Ajax for Java Web Applications">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="../../../../../../_/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    <link rel="stylesheet" href="../../../../../../_/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../../../_/images/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../../../_/images/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../../../_/images/fav/favicon-16x16.png">
    <link rel="manifest" href="../../../../../../_/images/fav/site.webmanifest">
    <link rel="mask-icon" href="../../../../../../_/images/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="../../../../../../_/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="../../../../../../index.html"><img src='../../../../../../_/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <input id="search-input" type="text" placeholder="Search the docs"> </li>
            <li> <a href="../../../../../../front/main/community">Community</a> </li>
            <li> <a href="../../../../../../front/main/participate">Participate</a> </li>
            <li> <a href="../../../../../../front/main/blogs">Blog</a></li>
            <li> <a href="../../../../../../front/main/help">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="../../../../../../front/main/download">Download</a> </li>
        </ul>
    </div>
</div>

    <!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="../../../../../../front/main/download/nb19">Download</a></p>
        </div>
    </div>
</section>
    <div class='grid-container main-content tutorial'>
      <article class="doc">
      <h1 class="sect0">Introduction to Ajax for Java Web Applications</h1>
            <div class="sectionbody">
              <div class="paragraph">
                <p class='reviewed'><i class="fa fa-check-circle"></i> Last reviewed on 2022-01-21</p>
              </div>
            </div>
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#overview">Overview of the Application</a></li>
<li><a href="#client1">Programming the Client-Side: Part 1</a>
<ul class="sectlevel2">
<li><a href="#_using_the_html_editor">Using the HTML Editor</a></li>
<li><a href="#javascript">Using the JavaScript Editor</a></li>
</ul>
</li>
<li><a href="#serverside">Programming the Server-Side</a>
<ul class="sectlevel2">
<li><a href="#_creating_the_data_store">Creating the Data Store</a></li>
<li><a href="#servlet">Creating a Servlet</a></li>
</ul>
</li>
<li><a href="#client2">Programming the Client-Side: Part 2</a>
<ul class="sectlevel2">
<li><a href="#_adding_callback_functionality">Adding Callback Functionality</a></li>
<li><a href="#_updating_the_html_dom">Updating the HTML DOM</a></li>
<li><a href="#displayresults">Displaying the Results</a></li>
<li><a href="#stylesheet">Attaching a Stylesheet</a></li>
</ul>
</li>
<li><a href="#run">Running the Project</a>
<ul class="sectlevel2">
<li><a href="#httpMonitor">Using the HTTP Server Monitor</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
</li>
<li><a href="#seeAlso">See Also</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This document provides an introduction to Ajax and demonstrates some of the features in the NetBeans IDE that allow you to program faster and more efficiently when working with Ajax-related technologies. While learning about the low-level functionality of Ajax, you build a simple application that employs auto-completion in a text field. Content here has been adapted from Greg Murray&#8217;s article and sample application from <a href="http://weblogs.java.net/blog/gmurray71/archive/2005/12/using_ajax_with_1.html">Using Ajax with Java Technology</a>.</p>
</div>
<div class="paragraph">
<p>Ajax stands for Asynchronous JavaScript and XML. In essence, Ajax is an efficient way for a web application to handle user interactions with a web page - a way that reduces the need to do a page refresh or full page reload for every user interaction. This enables rich behavior (similar to that of a desktop application or plugin-based web application) using a browser. Ajax interactions are handled asynchronously in the background. As this happens, a user can continue working with the page. Ajax interactions are initiated by JavaScript code. When the Ajax interaction is complete, JavaScript updates the HTML source of the page. The changes are made immediately without requiring a page refresh. Ajax interactions can be used to do things such as validate form entries (while the user is entering them) using server-side logic, retrieve detailed data from the server, dynamically update data on a page, and submit partial forms from the page.</p>
</div>
<div class="paragraph">
<p><strong>To complete this tutorial, you need the following software and resources.</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Software or Resource</th>
<th class="tableblock halign-left valign-top">Version Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../../../../../../front/main/download/" class="xref page">NetBeans IDE, Java EE bundle</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java Development Kit (JDK)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://glassfish.java.net/">GlassFish server</a>
<em>or</em>
<a href="http://tomcat.apache.org/index.html">Tomcat server</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open Source Edition 3.1.x or 4.x
_Â _
version 7.x or 8.x</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>The Java EE installation of the IDE enables you to optionally install the GlassFish server and the Apache Tomcat servlet container.</p>
</li>
<li>
<p>This tutorial assumes that you have a working knowledge of the various technologies it employs (i.e., HTML, CSS, JavaScript, Java and JSP). It attempts to provide an overview of the functionality provided by the code, but <em>does not</em> explain how the code works on a line-to-line basis.</p>
</li>
<li>
<p>If you need to compare your project with a working solution, you can <a href="http://web.archive.org/web/20101218014131/http://netbeans.org/project_downloads/samples/Samples/JavaScript/MyAjaxApp.zip">download the sample application</a>.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview of the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Imagine a web page in which a user can search for information about musical composers. The page includes a field where the user can enter the name of the composer. In the example application, the entry field has an auto-complete feature. In other words, the user can type in part of the composer name, and the web application attempts to complete the name by listing all composers whose first or last name begins with the characters entered. The auto-complete feature saves the user from having to remember the complete name of the composer and can provide a more intuitive and direct path to the sought-after information.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/web/sample-app.png" alt="sample app">
</div>
<div class="title">Figure 1. Sample application displayed in browser</div>
</div>
<div class="paragraph">
<p>Implementing auto-completion in a search field is something that can be performed using Ajax. Ajax works by employing an <code>XMLHttpRequest</code> object to pass requests and responses asynchronously between the client and server. The following diagram illustrates the process flow of the communication that takes place between the client and server.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/web/ajax-process-flow.png" alt="ajax process flow">
</div>
<div class="title">Figure 2. Ajax process flow diagram</div>
</div>
<div class="paragraph">
<p>The process flow of the diagram can be described by the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The user triggers an event, for example by releasing a key when typing in a name. This results in a JavaScript call to a function that initializes an <code>XMLHttpRequest</code> object.</p>
</li>
<li>
<p>The <code>XMLHttpRequest</code> object is configured with a request parameter that includes the ID of the component that triggered the event, and any value that the user entered. The <code>XMLHttpRequest</code> object then makes an asynchronous request to the web server.</p>
</li>
<li>
<p>On the web server, an object such as a servlet or listener handles the request. Data is retrieved from the data store, and a response is prepared containing the data in the form of an XML document.</p>
</li>
<li>
<p>Finally, the <code>XMLHttpRequest</code> object receives the XML data using a callback function, processes it, and updates the HTML DOM (Document Object Model) to display the page containing the new data.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This tutorial demonstrates how to construct the auto-complete scenario by following the process flow indicated in the above diagram. You first create the client-side files for the presentation and functionality needed to generate the <code>XMLHttpRequest</code> object. Then, you set up the server-side by creating the data store and business logic using Java-based technology. Finally, you return to the client-side and implement <code>callback()</code>, and other JavaScript functionality to update the HTML DOM.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="client1"><a class="anchor" href="#client1"></a>Programming the Client-Side: Part 1</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Begin by creating a new web application project in the IDE. The IDE contains built-in templates for numerous project types.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Choose File &gt; New Project. Under Categories, select Java Web. Under Projects, select Web Application then click Next.</p>
</li>
<li>
<p>In the Name and Location panel, enter <code>MyAjaxApp</code> for Project Name. The Project Location field enables you to specify the location of the project on your computer. Leave other options at their defaults and click Next.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/web/java-name-location.png" alt="java name location">
</div>
<div class="title">Figure 3. Specify the name and location for your application project</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In the Server and Settings panel, select the server you want to deploy your application to. Only servers that are registered with the IDE are listed.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/web/java-server-settings.png" alt="java server settings">
</div>
<div class="title">Figure 4. Specify the server your application will be deployed to</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Accept other default settings and click Finish. The project is generated in your file system and opens in the IDE.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When Java-based web projects are created, an <a href="http://ant.apache.org/">Ant</a> build script is automatically generated which enables you to compile the project so that it can be immediately deployed and run on a server that has been registered in the IDE.</p>
</div>
<div class="paragraph">
<p>A default entry page is generated and opens in the IDE&#8217;s Source Editor. Depending on the target server, the entry page will be either <code>index.jsp</code> or <code>index.html</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/web/java-proj-win.png" alt="java proj win">
</div>
<div class="title">Figure 5. Projects window displays MyAjaxApp project</div>
</div>
<div class="paragraph">
<p>Before beginning to code, quickly try running the application to ensure that configuration between the IDE, your server, and browser is set up properly.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>In the Projects window, right-click the project node and choose Run.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The application is compiled, the application server starts and the application is deployed to it and run. The IDE opens your default browser and displays the default entry page.</p>
</div>
<div class="sect2">
<h3 id="_using_the_html_editor"><a class="anchor" href="#_using_the_html_editor"></a>Using the HTML Editor</h3>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/web/palette.png" alt="palette">
</div>
<div class="title">Figure 6. Palette displaying HTML elements</div>
</div>
<div class="paragraph">
<p>Now that you are certain your environment is set up correctly, begin by transforming your index page into the auto-completion interface that will be viewed by users.</p>
</div>
<div class="paragraph">
<p>One of the advantages of using an IDE is that the editor you work in often provides you with code completion which, if you learn to apply it when you code, can rapidly increase your productivity. The IDE&#8217;s Source Editor generally adapts to the technology you are using, so if you are working in an HTML page, pressing the code completion key combination (Ctrl-Space) will produce suggestions for HTML tags and attributes. As will later be shown, the same applies for other technologies, such as CSS and JavaScript.</p>
</div>
<div class="paragraph">
<p>A second feature you can make use of is the IDE&#8217;s Palette. The Palette provides easy-to-use templates for elements that are commonly applied in the technology you are coding in. You simply click on an item, and drag it to a location in the file open in the Source Editor.</p>
</div>
<div class="paragraph">
<p>You can view large icons (as displayed here) by right-clicking in the Palette and choosing Show Big Icons.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Replace the content for the <code>&lt;title&gt;</code> and <code>&lt;h1&gt;`tags to read: `Auto-Completion using AJAX</code>. The index page requires no server-side scripting code, so you can safely delete any remnants that were created by default. The index page should now appear as shown below.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;!DOCTYPE html&gt;

&lt;html&gt;
    &lt;head&gt;
        &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
        &lt;title&gt;Auto-Completion using AJAX&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Auto-Completion using AJAX&lt;/h1&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add some explanatory text to describe the purpose of the text field. You can copy and paste in the following text at a point just beneath the <code>&lt;h1&gt;</code> tags:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;p&gt;This example shows how you can do real time auto-completion using Asynchronous
    JavaScript and XML (Ajax) interactions.&lt;/p&gt;

&lt;p&gt;In the form below enter a name. Possible names that will be completed are displayed
    below the form. For example, try typing in "Bach," "Mozart," or "Stravinsky,"
    then click on one of the selections to see composer details.&lt;/p&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add an HTML form to the page. You can do this by making use of the elements listed in the IDE&#8217;s Palette. If the Palette is not open, choose Window &gt; Palette from the main menu. Then, under HTML Forms, click on and drag a Form element into the page to a point beneath the <code>&lt;p&gt;</code> tags that you just added. The Insert Form dialog box opens. Specify the following:</p>
<div class="ulist">
<ul>
<li>
<p>Action: autocomplete</p>
</li>
<li>
<p>Method: GET</p>
</li>
<li>
<p>Name: autofillform</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/web/insert-form.png" alt="insert form">
</div>
<div class="title">Figure 7. Insert form dialog</div>
</div>
<div class="paragraph">
<p>Click OK. The HTML <code>&lt;form&gt;</code> tags are inserted into the page containing the attributes you specified. (GET is applied by default, and so is not explicitly declared.)</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add an HTML table to the page. Under the HTML category in the Palette, click on a Table element and drag it to a point between the <code>&lt;form&gt;</code> tags. The Insert Table dialog box opens. Specify the following:</p>
<div class="ulist">
<ul>
<li>
<p>Rows: 2</p>
</li>
<li>
<p>Columns: 2</p>
</li>
<li>
<p>Border Size: 0</p>
</li>
<li>
<p>Cell Padding: 5</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/web/insert-table.png" alt="insert table">
</div>
<div class="title">Figure 8. Insert table dialog</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click inside the Source Editor and choose Format. This tidies up the code. Your form should now display similar to that below:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;form name="autofillform" action="autocomplete"&gt;
  &lt;table border="0" cellpadding="5"&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;th&gt;&lt;/th&gt;
        &lt;th&gt;&lt;/th&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;tr&gt;
        &lt;td&gt;&lt;/td&gt;
        &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;&lt;/td&gt;
        &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Within the first row of the table, type the following text into the first column (changes in <strong>bold</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;td&gt;&lt;strong&gt;Composer Name:&lt;/strong&gt;&lt;/td&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Within the second column of the first row, instead of dragging a Text Input field from the Palette, type in the code below manually (changes in <strong>bold</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;td&gt;
    &lt;input type="text"
        size="40"
        id="complete-field"
        onkeyup="doCompletion();"&gt;
&lt;/td&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>When you type, try using the IDE&#8217;s built-in code completion support. For example, type in <code>&lt;i</code>, then press Ctrl-Space. A list of suggested options displays below your cursor, and a description of the selected element appears in a box above. You can in fact press Ctrl-Space at anytime you are coding in the Source Editor to bring up possible options. Also, if there is only one possible option, pressing Ctrl-Space will automatically complete the element name.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/web/code-completion.png" alt="code completion">
</div>
<div class="title">Figure 9. Press Ctrl-Space in the editor to invoke code completion and documentation support</div>
</div>
<div class="paragraph">
<p>The <code>onkeyup</code> attribute that you typed in above points to a JavaScript function named <code>doCompletion()</code>. This function is called each time a key is pressed in the form text field, and maps to the JavaScript call depicted in the Ajax <a href="#flow-diagram">flow diagram</a> above.</p>
</div>
</div>
<div class="sect2">
<h3 id="javascript"><a class="anchor" href="#javascript"></a>Using the JavaScript Editor</h3>
<div class="paragraph">
<p>The IDE&#8217;s JavaScript Editor provides many advanced editing capabilities, such as intelligent code completion, semantic highlighting, instant renaming and refactoring capabilities, as well as many more features.</p>
</div>
<div class="paragraph">
<p>JavaScript code completion is automatically provided when you code in <code>.js</code> files, as well as within <code>&lt;script&gt;</code> tags when you work with other technologies (i.e., HTML, RHTML, JSP, PHP). The IDE can provide you with some hints when you are editing JavaScript code. You can specify the JavaScript hints options by choosing Tools &gt; Options (NetBeans &gt; Preferences on Mac) to open the Options window and then selecting the JavaScript language in the Hints tab in the Editor category. You can also add your own JavaScript code templates in the Code Templates tab in the Options window.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/web/javascript-options.png" alt="javascript options">
</div>
<div class="title">Figure 10. JavaScript Hint 0ptions in Options window</div>
</div>
<div class="paragraph">
<p>Add a JavaScript file to the application and begin implementing <code>doCompletion()</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Projects window, right-click the Web Pages node and choose New &gt; JavaScript file. (If JavaScript file is not listed, choose Other. Then choose JavaScript file from the Web category in the New File wizard.)</p>
</li>
<li>
<p>Name the file <code>javascript</code> and click Finish. The new JavaScript file appears in the Projects window within the Web Pages folder.</p>
</li>
<li>
<p>Type the code below into <code>javascript.js</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">var req;
var isIE;

function init() {
    completeField = document.getElementById("complete-field");
}

function doCompletion() {
        var url = "autocomplete?action=complete&amp;amp;id=" + escape(completeField.value);
        req = initRequest();
        req.open("GET", url, true);
        req.onreadystatechange = callback;
        req.send(null);
}

function initRequest() {
    if (window.XMLHttpRequest) {
        if (navigator.userAgent.indexOf('MSIE') != -1) {
            isIE = true;
        }
        return new XMLHttpRequest();
    } else if (window.ActiveXObject) {
        isIE = true;
        return new ActiveXObject("Microsoft.XMLHTTP");
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above code performs a simple browser compatibility check for Firefox 3 and Internet Explorer versions 6 and 7). If you would like to incorporate more robust code for compatibility issues, consider using this <a href="http://www.quirksmode.org/js/detect.html">browser detect script</a> from <a href="http://www.quirksmode.org">http://www.quirksmode.org</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Switch back to the index page and add a reference to the JavaScript file between the <code>&lt;head&gt;</code> tags.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;script type="text/javascript" src="javascript.js"&gt;&lt;/script&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can quickly toggle between pages opened in the Source Editor by pressing Ctrl-Tab.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Insert a call to <code>init()</code> in the opening <code>&lt;body&gt;</code> tag.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;body *onload="init()"*&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This ensures that <code>init()</code> is called each time the page is loaded.</p>
</div>
<div class="paragraph">
<p>The role of <code>doCompletion()</code> is to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>create a URL that contains data that can be utilized by the server-side,</p>
</li>
<li>
<p>initialize an <code>XMLHttpRequest</code> object, and</p>
</li>
<li>
<p>prompt the <code>XMLHttpRequest</code> object to send an asynchronous request to the server.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>XMLHttpRequest</code> object is at the heart of Ajax and has become the de facto standard for enabling XML data to be passed asynchronously over HTTP. <em>Asynchronous</em> interaction implies that the browser can continue to process events in the page after the request is sent. Data is passed in the background, and can be automatically loaded into the page without requiring a page refresh.</p>
</div>
<div class="paragraph">
<p>Notice that the <code>XMLHttpRequest</code> object is actually created by <code>initRequest()</code>, which is called by <code>doCompletion()</code>. The function checks whether <code>XMLHttpRequest</code> can be understood by the browser, and if so it creates an <code>XMLHttpRequest</code> object. Otherwise, it performs a check on <code>ActiveXObject</code> (the <code>XMLHttpRequest</code> equivalent for Internet Explorer 6), and creates an <code>ActiveXObject</code> if identified.</p>
</div>
<div class="paragraph">
<p>Three parameters are specified when you create an <code>XMLHttpRequest</code> object: a URL, the HTTP method (<code>GET</code> or <code>POST</code>), and whether or not the interaction is asynchronous. In the above example, the parameters are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The URL <code>autocomplete</code>, and the text entered into the <code>complete-field</code> by the user:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">var url = "autocomplete?action=complete&amp;amp;id=" + escape(completeField.value);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>GET</code>, signifying that HTTP interactions use the <code>GET</code> method, and</p>
</li>
<li>
<p><code>true</code>, signifying that the interaction is asynchronous:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">req.open("GET", url, true);</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the interaction is set as asynchronous, a callback function must be specified. The callback function for this interaction is set with the statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">req.onreadystatechange = callback;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and a <code>callback()</code> function <a href="#callback">must later be defined</a>. The HTTP interaction begins when <code>XMLHttpRequest.send()</code> is called. This action maps to the HTTP request that is sent to the web server in the above <a href="#flow-diagram">flow diagram</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="serverside"><a class="anchor" href="#serverside"></a>Programming the Server-Side</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The IDE provides comprehensive support for server-side web programming. While this includes basic editor support for many popular programming and scripting languages, it also encompasses web services, such as SOAP, REST, SaaS, and MVC-oriented frameworks, such as JSF, Spring and Struts. Several NetBeans plugins are available from the <a href="http://plugins.netbeans.org/">NetBeans Plugin Portal</a> for Ajax-driven frameworks, including <a href="https://developers.google.com/web-toolkit/">GWT</a> and <a href="http://struts.apache.org/2.x/">Struts2</a>.</p>
</div>
<div class="paragraph">
<p>The application&#8217;s business logic processes requests by retrieving data from the data store, then preparing and sending the response. This is implemented here using a servlet. Before you begin coding the servlet, set up the data store and the functionality required by the servlet to access data.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#data">Creating the Data Store</a></p>
</li>
<li>
<p><a href="#servlet">Creating a Servlet</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_creating_the_data_store"><a class="anchor" href="#_creating_the_data_store"></a>Creating the Data Store</h3>
<div class="paragraph">
<p>For this simple application, you create a class called <code>ComposerData</code> that retains composer data using a <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/HashMap.html">`HashMap`</a>. A <code>HashMap</code> allows you to store pairs of linked items in key-value pairs. You also create a <code>Composer</code> class that enables the servlet to retrieve data from entries in the <code>HashMap</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click on the project node in the Projects window and choose New &gt; Java Class.</p>
</li>
<li>
<p>Name the class <code>ComposerData</code>, and enter <code>com.ajax</code> in the Package field. This creates a new package to contain the class, as well as other classes that will later be created.</p>
</li>
<li>
<p>Click Finish. The class is created and opens in the Source Editor.</p>
</li>
<li>
<p>In the Source Editor, paste in the following code:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.ajax;

import java.util.HashMap;

/**
 *
 * @author nbuser
 */
public class ComposerData {

    private HashMap composers = new HashMap();

    public HashMap getComposers() {
        return composers;
    }

    public ComposerData() {

        composers.put("1", new Composer("1", "Johann Sebastian", "Bach", "Baroque"));
        composers.put("2", new Composer("2", "Arcangelo", "Corelli", "Baroque"));
        composers.put("3", new Composer("3", "George Frideric", "Handel", "Baroque"));
        composers.put("4", new Composer("4", "Henry", "Purcell", "Baroque"));
        composers.put("5", new Composer("5", "Jean-Philippe", "Rameau", "Baroque"));
        composers.put("6", new Composer("6", "Domenico", "Scarlatti", "Baroque"));
        composers.put("7", new Composer("7", "Antonio", "Vivaldi", "Baroque"));

        composers.put("8", new Composer("8", "Ludwig van", "Beethoven", "Classical"));
        composers.put("9", new Composer("9", "Johannes", "Brahms", "Classical"));
        composers.put("10", new Composer("10", "Francesco", "Cavalli", "Classical"));
        composers.put("11", new Composer("11", "Fryderyk Franciszek", "Chopin", "Classical"));
        composers.put("12", new Composer("12", "Antonin", "Dvorak", "Classical"));
        composers.put("13", new Composer("13", "Franz Joseph", "Haydn", "Classical"));
        composers.put("14", new Composer("14", "Gustav", "Mahler", "Classical"));
        composers.put("15", new Composer("15", "Wolfgang Amadeus", "Mozart", "Classical"));
        composers.put("16", new Composer("16", "Johann", "Pachelbel", "Classical"));
        composers.put("17", new Composer("17", "Gioachino", "Rossini", "Classical"));
        composers.put("18", new Composer("18", "Dmitry", "Shostakovich", "Classical"));
        composers.put("19", new Composer("19", "Richard", "Wagner", "Classical"));

        composers.put("20", new Composer("20", "Louis-Hector", "Berlioz", "Romantic"));
        composers.put("21", new Composer("21", "Georges", "Bizet", "Romantic"));
        composers.put("22", new Composer("22", "Cesar", "Cui", "Romantic"));
        composers.put("23", new Composer("23", "Claude", "Debussy", "Romantic"));
        composers.put("24", new Composer("24", "Edward", "Elgar", "Romantic"));
        composers.put("25", new Composer("25", "Gabriel", "Faure", "Romantic"));
        composers.put("26", new Composer("26", "Cesar", "Franck", "Romantic"));
        composers.put("27", new Composer("27", "Edvard", "Grieg", "Romantic"));
        composers.put("28", new Composer("28", "Nikolay", "Rimsky-Korsakov", "Romantic"));
        composers.put("29", new Composer("29", "Franz Joseph", "Liszt", "Romantic"));

        composers.put("30", new Composer("30", "Felix", "Mendelssohn", "Romantic"));
        composers.put("31", new Composer("31", "Giacomo", "Puccini", "Romantic"));
        composers.put("32", new Composer("32", "Sergei", "Rachmaninoff", "Romantic"));
        composers.put("33", new Composer("33", "Camille", "Saint-Saens", "Romantic"));
        composers.put("34", new Composer("34", "Franz", "Schubert", "Romantic"));
        composers.put("35", new Composer("35", "Robert", "Schumann", "Romantic"));
        composers.put("36", new Composer("36", "Jean", "Sibelius", "Romantic"));
        composers.put("37", new Composer("37", "Bedrich", "Smetana", "Romantic"));
        composers.put("38", new Composer("38", "Richard", "Strauss", "Romantic"));
        composers.put("39", new Composer("39", "Pyotr Il'yich", "Tchaikovsky", "Romantic"));
        composers.put("40", new Composer("40", "Guiseppe", "Verdi", "Romantic"));

        composers.put("41", new Composer("41", "Bela", "Bartok", "Post-Romantic"));
        composers.put("42", new Composer("42", "Leonard", "Bernstein", "Post-Romantic"));
        composers.put("43", new Composer("43", "Benjamin", "Britten", "Post-Romantic"));
        composers.put("44", new Composer("44", "John", "Cage", "Post-Romantic"));
        composers.put("45", new Composer("45", "Aaron", "Copland", "Post-Romantic"));
        composers.put("46", new Composer("46", "George", "Gershwin", "Post-Romantic"));
        composers.put("47", new Composer("47", "Sergey", "Prokofiev", "Post-Romantic"));
        composers.put("48", new Composer("48", "Maurice", "Ravel", "Post-Romantic"));
        composers.put("49", new Composer("49", "Igor", "Stravinsky", "Post-Romantic"));
        composers.put("50", new Composer("50", "Carl", "Orff", "Post-Romantic"));

    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will notice that a warning is displayed in the left margin of the editor because the  <code>Composer</code>  class cannot be found. Perform the following steps to create the <code>Composer</code> class.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click on the project node in the Projects window and choose New &gt; Java Class.</p>
</li>
<li>
<p>Name the class <code>Composer</code>, and choose <code>com.ajax</code> from the drop-down list in the Package field. Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you click Finish the IDE creates the class and opens the file in the Source Editor.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Source Editor, paste in the following code:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.ajax;

public class Composer {

    private String id;
    private String firstName;
    private String lastName;
    private String category;

    public Composer (String id, String firstName, String lastName, String category) {
        this.id = id;
        this.firstName = firstName;
        this.lastName = lastName;
        this.category = category;
    }

    public String getCategory() {
        return category;
    }

    public String getId() {
        return id;
    }

    public String getFirstName() {
        return firstName;
    }

    public String getLastName() {
        return lastName;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After you create the  <code>Composer</code>  class if you look at the  <code>ComposerData</code>  class in the editor you can see that the warning annotations are no longer there. If you still see warning annotations in  <code>ComposerData</code>  you can try to resolve the error by adding any missing import statements.</p>
</div>
</div>
<div class="sect2">
<h3 id="servlet"><a class="anchor" href="#servlet"></a>Creating a Servlet</h3>
<div class="paragraph">
<p>Create a servlet to handle the <code>autocomplete</code> URL that is received by the incoming request.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right-click on the project node in the Projects window and choose New &gt; Servlet to open the New Servlet wizard. (Choose Other and select Servlet from the Web category if Servlet is not displayed by default in the popup menu.)</p>
</li>
<li>
<p>Name the servlet <code>AutoCompleteServlet</code>, and choose <code>com.ajax</code> from the drop-down list in the Package field. Click Next.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/web/newservlet-name-location.png" alt="newservlet name location">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Configure Servlet Deployment panel, change the URL pattern to <strong><code>/autocomplete</code></strong> so that it matches the URL that you previously set in the <code>XMLHttpRequest</code> object.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/web/newservlet-configure-deployment.png" alt="newservlet configure deployment">
</div>
</div>
<div class="paragraph">
<p>This panel saves you the step of needing to manually add these details to the deployment descriptor.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Optionally, select "Add servlet information to deployment descriptor." This is so your project is the same as the downloaded sample. With later versions of the IDE, by default the servlet is registered by a <code>@WebServlet</code> annotation instead of in a deployment descriptor. The project will still work if you use the <code>@WebServlet</code> annotation instead of a deployment descriptor.</p>
</li>
<li>
<p>Click Finish. The servlet is created and opens in the Source Editor.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The only methods you need to override are <code>doGet()</code>, to define how the servlet handles the <code>autocomplete</code> <code>GET</code> request, and <code>init()</code>, which needs to initiate a <code>ServletContext</code> so the servlet can access other classes in the application once it is put into service.</p>
</div>
<div class="paragraph">
<p>You can override methods from superclasses using the IDE&#8217;s Insert Code popup menu. Implement <code>init()</code> by performing the following steps.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Place your cursor beneath the <code>AutoCompleteServlet</code> class declaration in the Source Editor. Press Alt-Insert (Ctrl-I on Mac) to open the Generate Code popup menu.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/web/insert-code.png" alt="insert code">
</div>
<div class="title">Figure 11. Insert Code popup menu displayed in Source Editor</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Choose Override Method. In the dialog that displays, all classes that <code>AutoCompleteServlet</code> inherits from are displayed. Expand the GenericServlet node and select <code>init(Servlet Config config)</code>.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/web/new-override.png" alt="new override">
</div>
<div class="title">Figure 12. Override dialog lists inherited classes</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click OK. The <code>init()</code> method is added in the Source Editor.</p>
</li>
<li>
<p>Add a variable for a <code>ServletContext</code> object and modify <code>init()</code> (changes in <strong>bold</strong>):</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">private ServletContext context;

@Override
public void init(ServletConfig config) throws ServletException {
    this.context = config.getServletContext();
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add an import statement for <code>ServletContext</code>. You can do this by clicking on the lightbulb icon that displays in the left margin of the Source Editor</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/web/import-hint.png" alt="import hint">
</div>
<div class="title">Figure 13. Import hints display in left margin of the Source Editor</div>
</div>
<div class="paragraph">
<p>The <code>doGet()</code> method needs to parse the URL of the request, retrieve data from the data store, and prepare a response in XML format. Note that the method declaration was generated when you created the class. To view it, you may need to expand the HttpServlet methods by clicking on the expand icon (images:./expand-icon.png[]) in the left margin.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the following variable declarations beneath the <code>AutocompleteServlet</code> class declaration.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">private ComposerData compData = new ComposerData();
private HashMap composers = compData.getComposers();</code></pre>
</div>
</div>
<div class="paragraph">
<p>This creates a <code>HashMap</code> of all composer data, which is then employed by <code>doGet()</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Scroll down to <code>doGet()</code> and implement the method as follows:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Override
public void doGet(HttpServletRequest request, HttpServletResponse response)
        throws IOException, ServletException {

    String action = request.getParameter("action");
    String targetId = request.getParameter("id");
    StringBuffer sb = new StringBuffer();

    if (targetId != null) {
        targetId = targetId.trim().toLowerCase();
    } else {
        context.getRequestDispatcher("/error.jsp").forward(request, response);
    }

    boolean namesAdded = false;
    if (action.equals("complete")) {

        // check if user sent empty string
        if (!targetId.equals("")) {

            Iterator it = composers.keySet().iterator();

            while (it.hasNext()) {
                String id = (String) it.next();
                Composer composer = (Composer) composers.get(id);

                if ( // targetId matches first name
                     composer.getFirstName().toLowerCase().startsWith(targetId) ||
                     // targetId matches last name
                     composer.getLastName().toLowerCase().startsWith(targetId) ||
                     // targetId matches full name
                     composer.getFirstName().toLowerCase().concat(" ")
                        .concat(composer.getLastName().toLowerCase()).startsWith(targetId)) {

                    sb.append("&lt;composer&gt;");
                    sb.append("&lt;id&gt;" + composer.getId() + "&lt;/id&gt;");
                    sb.append("&lt;firstName&gt;" + composer.getFirstName() + "&lt;/firstName&gt;");
                    sb.append("&lt;lastName&gt;" + composer.getLastName() + "&lt;/lastName&gt;");
                    sb.append("&lt;/composer&gt;");
                    namesAdded = true;
                }
            }
        }

        if (namesAdded) {
            response.setContentType("text/xml");
            response.setHeader("Cache-Control", "no-cache");
            response.getWriter().write("&lt;composers&gt;" + sb.toString() + "&lt;/composers&gt;");
        } else {
            //nothing to show
            response.setStatus(HttpServletResponse.SC_NO_CONTENT);
        }
    }
    if (action.equals("lookup")) {

        // put the target composer in the request scope to display
        if ((targetId != null) &amp;amp;&amp;amp; composers.containsKey(targetId.trim())) {
            request.setAttribute("composer", composers.get(targetId));
            context.getRequestDispatcher("/composer.jsp").forward(request, response);
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see in this servlet, there is nothing really new you need to learn to write server-side code for Ajax processing. The response content type needs to be set to <code>text/xml</code> for cases where you want to exchange XML documents. With Ajax, you can also exchange plain text or even snippets of JavaScript which may be evaluated or executed by the callback function on the client. Note too that some browsers might cache the results, and so it may be necessary to set the Cache-Control HTTP header to <code>no-cache</code>.</p>
</div>
<div class="paragraph">
<p>In this example, the servlet generates an XML document that contains all composers with a first or last name beginning with the characters typed in by the user. This document maps to the XML Data depicted in the <a href="#flow-diagram">flow diagram</a> above. Here is an example of an XML document that is returned to the <code>XMLHttpRequest</code> object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;composers&gt;
    &lt;composer&gt;
        &lt;id&gt;12&lt;/id&gt;
        &lt;firstName&gt;Antonin&lt;/firstName&gt;
        &lt;lastName&gt;Dvorak&lt;/lastName&gt;
    &lt;/composer&gt;
    &lt;composer&gt;
        &lt;id&gt;45&lt;/id&gt;
        &lt;firstName&gt;Aaron&lt;/firstName&gt;
        &lt;lastName&gt;Copland&lt;/lastName&gt;
    &lt;/composer&gt;
    &lt;composer&gt;
        &lt;id&gt;7&lt;/id&gt;
        &lt;firstName&gt;Antonio&lt;/firstName&gt;
        &lt;lastName&gt;Vivaldi&lt;/lastName&gt;
    &lt;/composer&gt;
    &lt;composer&gt;
        &lt;id&gt;2&lt;/id&gt;
        &lt;firstName&gt;Arcangelo&lt;/firstName&gt;
        &lt;lastName&gt;Corelli&lt;/lastName&gt;
    &lt;/composer&gt;
&lt;/composers&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use the IDE&#8217;s <a href="#httpMonitor">HTTP Monitor</a> to view the returned XML data once you complete the application.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="client2"><a class="anchor" href="#client2"></a>Programming the Client-Side: Part 2</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You must now define the callback function to handle the server&#8217;s response, and add any functionality necessary to reflect changes in the page that is viewed by the user. This requires modifying the HTML DOM. You need to create JSP pages to display the results of a successful request or the error messages of a failed request. You can then create a simple stylesheet for the presentation.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#callback">Adding Callback Functionality</a></p>
</li>
<li>
<p><a href="#htmldom">Updating the HTML DOM</a></p>
</li>
<li>
<p><a href="#displayresults">Displaying the Results</a></p>
</li>
<li>
<p><a href="#stylesheet">Attaching a Stylesheet</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_adding_callback_functionality"><a class="anchor" href="#_adding_callback_functionality"></a>Adding Callback Functionality</h3>
<div class="paragraph">
<p>The callback function is called asynchronously at specific points during HTTP interaction when the <code>readyState</code> property of the <code>XMLHttpRequest</code> object changes. In the application you are building, the callback function is <code>callback()</code>. You recall that in <code>doCompletion()</code>, <code>callback</code> was set as the <code>XMLHttpRequest.onreadystatechange</code> property to a function. Now, implement the callback function as follows.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open <code>javascript.js</code> in the Source Editor and type in the code below.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function callback() {
    if (req.readyState == 4) {
        if (req.status == 200) {
            parseMessages(req.responseXML);
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <code>readyState</code> of "4" signifies the completion of the HTTP interaction. The API for <code>XMLHttpRequest.readState</code> indicates that there are 5 possible values that can be set. These are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code>readyState</code> Value</th>
<th class="tableblock halign-left valign-top">Object Status Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uninitialized</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">loading</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">loaded</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">interactive</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">complete</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Notice that the <code>parseMessages()</code> function is called only when the <code>XMLHttpRequest.readyState</code> is "4" and the <code>status</code>&#8201;&#8212;&#8201;the HTTP status code definition of the request&#8201;&#8212;&#8201;is "200", signifying a success. You will define <code>parseMessages()</code> next in <a href="#htmldom">Updating the HTML DOM</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_updating_the_html_dom"><a class="anchor" href="#_updating_the_html_dom"></a>Updating the HTML DOM</h3>
<div class="paragraph">
<p>The <code>parseMessages()</code> function handles the incoming XML data. In doing so, it relies on several ancillary functions, such as <code>appendComposer()</code>, <code>getElementY()</code>, and <code>clearTable()</code>. You must also introduce new elements to the index page, such as a second HTML table which serves as the auto-complete box, and ID&#8217;s for elements so they can be referenced in <code>javascript.js</code>. Finally, you create new variables corresponding to ID&#8217;s for elements in the index page, initialize them in the <code>init()</code> function that you previously implemented, and add some functionality that is needed each time the index page is loaded.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> The functions and elements that you create in the following steps work interdependently. It is recommended that you work through this section, then examine the code once it is all in place.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the index page in the Source Editor and type in the below code for the second row of the HTML table you previously created.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;tr&gt;
    &lt;td id="auto-row" colspan="2"&gt;
        &lt;table id="complete-table" /&gt;
    &lt;/td&gt;
&lt;/tr&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The second row of the table contains another HTML table. This table represents the auto-complete box that will be used to populate composer names.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open <code>javascript.js</code> in the Source Editor and the following three variables to the top of the file.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">var completeField;
var completeTable;
var autoRow;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the following lines (in <strong>bold</strong>) to the <code>init()</code> function.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function init() {
    completeField = document.getElementById("complete-field");
    completeTable = document.getElementById("complete-table");
    autoRow = document.getElementById("auto-row");
    completeTable.style.top = getElementY(autoRow) + "px";
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>One purpose of <code>init()</code> is to make elements inside the index page accessible to other functions that will modify the index page&#8217;s DOM.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add <code>appendComposer()</code> to <code>javascript.js</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function appendComposer(firstName,lastName,composerId) {

    var row;
    var cell;
    var linkElement;

    if (isIE) {
        completeTable.style.display = 'block';
        row = completeTable.insertRow(completeTable.rows.length);
        cell = row.insertCell(0);
    } else {
        completeTable.style.display = 'table';
        row = document.createElement("tr");
        cell = document.createElement("td");
        row.appendChild(cell);
        completeTable.appendChild(row);
    }

    cell.className = "popupCell";

    linkElement = document.createElement("a");
    linkElement.className = "popupItem";
    linkElement.setAttribute("href", "autocomplete?action=lookup&amp;amp;id=" + composerId);
    linkElement.appendChild(document.createTextNode(firstName + " " + lastName));
    cell.appendChild(linkElement);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This function creates a new table row, inserts a link to a composer into it using the data passed to the function via its three parameters, and inserts the row into the index page&#8217;s <code>complete-table</code> element.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add <code>getElementY()</code> to <code>javascript.js</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function getElementY(element){

    var targetTop = 0;

    if (element.offsetParent) {
        while (element.offsetParent) {
            targetTop += element.offsetTop;
            element = element.offsetParent;
        }
    } else if (element.y) {
        targetTop += element.y;
    }
    return targetTop;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This function is applied to find the vertical position of the parent element. This is necessary because the actual position of the element, when it is displayed, is often dependent on browser type and version. Note that the <code>complete-table</code> element, when displayed containing composer names, is shifted to the lower right of the table in which it exists. The correct height positioning is determined by <code>getElementY()</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
See <a href="http://www.quirksmode.org/js/findpos.html">this explanation</a> of <code>offset</code> on <a href="http://www.quirksmode.org/">http://www.quirksmode.org/</a>.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add <code>clearTable()</code> to <code>javascript.js</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function clearTable() {
    if (completeTable.getElementsByTagName("tr").length &gt; 0) {
        completeTable.style.display = 'none';
        for (loop = completeTable.childNodes.length -1; loop &gt;= 0 ; loop--) {
            completeTable.removeChild(completeTable.childNodes[loop]);
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This function sets the display of the <code>complete-table</code> element to 'none', (i.e., makes it invisible), and it removes any existing composer name entries that were created.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Modify the <code>callback()</code> function to call <code>clearTable()</code> each time new data is received from the server. Any composer entries that already exist in the auto-complete box are therefore removed before it becomes populated with new entries.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function callback() {

    *clearTable();*

    if (req.readyState == 4) {
        if (req.status == 200) {
            parseMessages(req.responseXML);
        }
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add <code>parseMessages()</code> to <code>javascript.js</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function parseMessages(responseXML) {

    // no matches returned
    if (responseXML == null) {
        return false;
    } else {

        var composers = responseXML.getElementsByTagName("composers")[0];

        if (composers.childNodes.length &gt; 0) {
            completeTable.setAttribute("bordercolor", "black");
            completeTable.setAttribute("border", "1");

            for (loop = 0; loop &lt; composers.childNodes.length; loop++) {
                var composer = composers.childNodes[loop];
                var firstName = composer.getElementsByTagName("firstName")[0];
                var lastName = composer.getElementsByTagName("lastName")[0];
                var composerId = composer.getElementsByTagName("id")[0];
                appendComposer(firstName.childNodes[0].nodeValue,
                    lastName.childNodes[0].nodeValue,
                    composerId.childNodes[0].nodeValue);
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>parseMessages()</code> function receives as a parameter an object representation of the XML document returned by the <code>AutoComplete</code> servlet. The function programmatically traverses the XML document, extracting the <code>firstName</code>, <code>lastName</code>, and <code>id</code> of each entry, then passes this data to <code>appendComposer()</code>. This results in a dynamic update to the contents of the <code>complete-table</code> element. For example, an entry that is generated and inserted into <code>complete-table</code> might look as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;tr&gt;
    &lt;td class="popupCell"&gt;
        &lt;a class="popupItem" href="autocomplete?action=lookup&amp;amp;id=12"&gt;Antonin Dvorak&lt;/a&gt;
    &lt;/td&gt;
&lt;/tr&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The dynamic update to the <code>complete-table</code> element represents the final step of the process flow of communication that takes place during communication using Ajax. This update maps to the HTML &amp; CSS data being sent to the presentation in the <a href="#flow-diagram">flow diagram</a> above.</p>
</div>
</div>
<div class="sect2">
<h3 id="displayresults"><a class="anchor" href="#displayresults"></a>Displaying the Results</h3>
<div class="paragraph">
<p>To display the results, you need a JSP file named <code>composers.jsp</code>. This page is called from <code>AutoCompleteServlet</code> during a lookup action. You also need an <code>error.jsp</code> file, which is called from <code>AutoCompleteServlet</code> if the composer cannot be found.</p>
</div>
<div class="paragraph">
<p>To display results and errors:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Projects window, right-click the application&#8217;s Web Pages folder and select New &gt; JSP. The New JSP wizard opens.</p>
</li>
<li>
<p>In the File Name field, type <code>composer</code>. In the Created File field, you should see a path ending in <code>/web/composer.jsp</code>.</p>
</li>
<li>
<p>Click Finish. The file <code>composer.jsp</code> opens in the editor. A node for the file appears in the Projects window in the Web Pages folder.</p>
</li>
<li>
<p>Replace the placeholder code in <code>composer.jsp</code> with the following code:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Composer Information&lt;/title&gt;

    &lt;link rel="stylesheet" type="text/css" href="stylesheet.css"&gt;
  &lt;/head&gt;
  &lt;body&gt;

    &lt;table&gt;
      &lt;tr&gt;
        &lt;th colspan="2"&gt;Composer Information&lt;/th&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;First Name: &lt;/td&gt;
        &lt;td&gt;${requestScope.composer.firstName}&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;Last Name: &lt;/td&gt;
        &lt;td&gt;${requestScope.composer.lastName}&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;ID: &lt;/td&gt;
        &lt;td&gt;${requestScope.composer.id}&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;Category: &lt;/td&gt;
        &lt;td&gt;${requestScope.composer.category}&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;

    &lt;p&gt;Go back to &lt;a href="index.html" class="link"&gt;application home&lt;/a&gt;.&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You will need to change the link to return to the index page if your index page is  <code>index.jsp</code> .
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create another JSP file in the project&#8217;s Web Pages folder. Name the file <code>error.jsp</code>.</p>
</li>
<li>
<p>Replace the placeholder code in <code>error.jsp</code> with the following code:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;!DOCTYPE html&gt;

&lt;html&gt;
    &lt;head&gt;
        &lt;link rel="stylesheet" type="text/css" href="stylesheet.css"&gt;
        &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
        &lt;title&gt;Seach Error&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h2&gt;Seach Error&lt;/h2&gt;

        &lt;p&gt;An error occurred while performing the search. Please try again.&lt;/p&gt;

        &lt;p&gt;Go back to &lt;a href="index.html" class="link"&gt;application home&lt;/a&gt;.&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You will need to change the link to return to the index page if your index page is  <code>index.jsp</code> .
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="stylesheet"><a class="anchor" href="#stylesheet"></a>Attaching a Stylesheet</h3>
<div class="paragraph">
<p>At this stage, you have completed all the code needed for the functionality of the application. To see the results of your efforts, try running the application now.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Projects window, right-click the project node and choose Run. The project is recompiled and deployed to the target server. Your browser opens, and you can see the index page.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/web/no-css.png" alt="no css">
</div>
<div class="title">Figure 14. Successful deployment without stylesheet</div>
</div>
<div class="paragraph">
<p>To add a stylesheet to your application, simply create a <code>.css</code> file and link to it from your presentation page(s). When you work in <code>.css</code> files, the IDE provides you with code completion support, as well as the following windows to help you generate and edit stylesheet rules.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>CSS Styles window.</strong> The CSS Styles window enables you to edit the declarations of rules for HTML elements and selectors in a CSS file.</p>
</li>
<li>
<p><strong>Create CSS Rules dialog box.</strong> The Create CSS Rule dialog box enables you to create new rules in a CSS style sheet.</p>
</li>
<li>
<p>*Add CSS Property dialog box.*The Add CSS Property dialog box enables you to add declarations to a CSS rule in a style sheet by adding properties and values.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To add a stylesheet to your application perform the following steps.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Projects window, right-click the Web Pages node and choose New &gt; Cascading Style Sheet (If Cascading Style Sheet is not listed, choose Other. Then choose Cascading Style Sheet from the Web category in the New File wizard.)</p>
</li>
<li>
<p>In the CSS File Name text field, type <strong><code>stylesheet</code></strong>. Click Finish.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The new file is created and opens in the editor.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Type the following rules in <code>stylesheet.css</code> in the editor. You can make use of the IDE&#8217;s code completion support by pressing Ctrl-Space at points when you want to call up suggestions.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-css hljs" data-lang="css">body {
   font-family: Verdana, Arial, sans-serif;
   font-size: smaller;
   padding: 50px;
   color: #555;
   width: 650px;
}

h1 {
   letter-spacing: 6px;
   font-size: 1.6em;
   color: #be7429;
   font-weight: bold;
}

h2 {
   text-align: left;
   letter-spacing: 6px;
   font-size: 1.4em;
   color: #be7429;
   font-weight: normal;
   width: 450px;
}

table {
   width: 550px;
   padding: 10px;
   background-color: #c5e7e0;
}

td {
   padding: 10px;
}

a {
  color: #be7429;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

.popupBox {
  position: absolute;
  top: 170px;
  left: 140px;
}

.popupCell {
   background-color: #fffafa;
}

.popupCell:hover {
  background-color: #f5ebe9;
}

.popupItem {
  color: #333;
  text-decoration: none;
  font-size: 1.2em;
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the CSS Styles window by choosing Window &gt; Web &gt; CSS Styles.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/web/css-styles-window.png" alt="css styles window">
</div>
<div class="title">Figure 15. CSS Styles window displaying h1 rule properties</div>
</div>
<div class="paragraph">
<p>You can use the CSS Styles window to quickly view the properties and edit style rules. When you select a rule in the upper pane of the CSS Style window you can see the properties of the rule in the lower pane. You can add a CSS Rules to the stylesheet by clicking the Edit CSS Rules icon (images:./newcssrule.png[title="New CSS Property icon"]) in the toolbar of the upper pane. You can modify rules in the lower pane by editing the property sheet and add properties by clicking the Add Property icon (images:./newcssproperty.png[title="New CSS Property icon"]) in the toolbar of the lower pane.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Switch to the index page in the Source Editor, and add a reference to the stylesheet between the <code>&lt;head&gt;</code> tags.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;link rel="stylesheet" type="text/css" href="stylesheet.css"&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the <code>popupBox</code> class that is defined in the stylesheet to the <code>complete-table</code> element (changes in <strong>bold</strong>).</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;tr&gt;
    &lt;td id="auto-row" colspan="2"&gt;
        &lt;table id="complete-table" *class="popupBox"* /&gt;
    &lt;/td&gt;
&lt;/tr&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use the code completion in the editor to help you select the style rule that you want to apply to the selector.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/web/css-completion.png" alt="css completion">
</div>
<div class="title">Figure 16. CSS code completion in the editor</div>
</div>
<div class="paragraph">
<p>As indicated in <code>stylesheet.css</code>, this rule positions the <code>complete-table</code> element so that it displays slightly to the right of its parent element.</p>
</div>
<div class="paragraph">
<p>When you save the index page the application is automatically redeployed to the server. If the page is still open in your browser you can reload the page to see that the page is now rendered according to the rules in the CSS stylesheet.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="run"><a class="anchor" href="#run"></a>Running the Project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you run the application again, it displays in the browser using the stylesheet you just created. Each time you type in a character, an asynchronous request is sent to the server, and returned with XML data that has been prepared by <code>AutoCompleteServlet</code>. As you enter more characters, the number of composer names decreases to reflect the new list of matches.</p>
</div>
<div class="sect2">
<h3 id="httpMonitor"><a class="anchor" href="#httpMonitor"></a>Using the HTTP Server Monitor</h3>
<div class="paragraph">
<p>You can use the IDE&#8217;s HTTP Server monitor to verify the HTTP communication that takes place as requests and responses are passed between the client and server. The HTTP Server Monitor displays information such as client and server headers, session properties, cookie details, as well as request parameters.</p>
</div>
<div class="paragraph">
<p>Before you begin using the HTTP monitor, you must first enable it on the server you are using.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the Servers window by choosing Tools &gt; Servers from the main menu.</p>
</li>
<li>
<p>In the left pane, select the server you are using with the project. Then, in the right pane, select the Enable HTTP Monitor option.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This option displays under the Common tab for the GlassFish server. For Tomcat, it resides under the Connection tab.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click Close.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If the server is already running, you need to restart it in order to allow changes to take effect. You can restart the server by opening the Services window (Window &gt; Services), then right-clicking your server beneath the Servers node and choosing Restart.</p>
</div>
<div class="paragraph">
<p>Now, when you run the application again, the HTTP monitor opens in the lower region of the IDE. You can select a record in the left pane, then click the tabs in the main window to view information concerning each request that is made.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/web/http-monitor.png" alt="http monitor">
</div>
<div class="title">Figure 17. HTTP Server monitor displays in the IDE</div>
</div>
<div class="paragraph">
<p>You can verify the XML data that is sent from the server as a result of the asynchronous request made when a user enters a character in the auto-complete field.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the tree view on the left side of the HTTP monitor, right-click a request record and choose Replay.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The response is generated in your browser. In this case, because the response consists of XML data, the browser displays the data in it&#8217;s native XML viewer.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/web/xml-data.png" alt="xml data">
</div>
<div class="title">Figure 18. HTTP Server monitor displays in the IDE</div>
</div>
</div>
<div class="sect2">
<h3 id="conclusion"><a class="anchor" href="#conclusion"></a>Conclusion</h3>
<div class="paragraph">
<p>This concludes the Introduction to Ajax. Hopefully by now you realize that Ajax is simply exchanging information over HTTP in the background, and updating that page dynamically based on the results.</p>
</div>
<div class="paragraph">
<p>You may note that the application you built has numerous shortcomings, for example nothing happens when a composer name is selected from the auto-complete box! You are welcome to <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FJavaScript%252FMyAjaxApp.zip">download the solution project</a> to see how this can be implemented using JSP technology. Furthermore, you might want to investigate server-side validation that prevents a user from requesting a name that does not exist in the data store. You can learn more about these techniques and technologies by following other tutorials on the <a href="../../java-ee/" class="xref page">Java EE &amp;amp; Java Web Learning Trail</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="seeAlso"><a class="anchor" href="#seeAlso"></a>See Also</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information about Ajax and Java technology on <a href="../../../" class="xref page">netbeans.org</a>, see the following resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../js-toolkits-jquery/" class="xref page">Using jQuery to Enhance the Appearance and Usability of a Web Page</a>. Demonstrates how to integrate jQuery core and UI libraries into a NetBeans project.</p>
</li>
<li>
<p><a href="../js-toolkits-dojo/" class="xref page">Connecting a Dojo Tree to an ArrayList using JSON</a>. Based on a JavaOne Hands-On Lab, this document shows how to implement a Dojo Tree widget into a web page and enable the server-side to respond to Tree requests in JSON format.</p>
</li>
<li>
<p><a href="http://www.oracle.com/pls/topic/lookup?ctx=nb8000&amp;id=NBDAG2272">Creating JavaScript Files</a> in <em>Developing Applications with NetBeans IDE</em>.</p>
</li>
<li>
<p><a href="../quickstart-webapps-wicket/" class="xref page">Introduction to the Wicket Web Framework</a>. An introduction to creating reusable components and applying them to a web application using the Wicket framework.</p>
</li>
</ul>
</div>
</div>
</div>
      <section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        <li><a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/kb/docs/web/ajax-quickstart.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>
      </article>
    </div>
        <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="../../../../../../_/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/about">About</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/community/who">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/community">Community</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/community/mailing-lists">Mailing lists</a></li>
              <li><a href="../../../../../../front/main/community/committer">Becoming a committer</a></li>
              <li><a href="../../../../../../front/main/community/events">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/participate">Participate</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/participate/submit-pr">Submitting Pull Requests</a></li>
              <li><a href="../../../../../../front/main/participate/report-issue">Reporting Issues</a></li>
              <li><a href="../../../../../../front/main/participate/#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/help">Get Help</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/help/#documentation">Documentation</a></li>
              <li><a href="../../../../../../wiki/main/wiki">Wiki</a></li>
              <li><a href="../../../../../../front/main/help/#support">Community Support</a></li>
              <li><a href="../../../../../../front/main/help/commercial-support">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/download">Download</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/download">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="../../../../../../front/main/download/#_daily_builds_and_building_from_source">Building from source</a></li>
              <li><a href="../../../../../../front/main/download/#_older_releases">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
      </div>
    </div>

    
<script src="../../../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../../../.." data-snippet-length="100" data-stylesheet="../../../../../../_/css/search.css"></script>
<script async src="../../../../../../search-index.js"></script>
    <script src="../../../../../../_/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../../../../../_/js/vendor/what-input.js"></script>
    <script src="../../../../../../_/js/vendor/foundation.min.js"></script>
    <script src="../../../../../../_/js/vendor/jquery.colorbox-min.js"></script>
    <script src="../../../../../../_/js/netbeans.js"></script>
    <script>
       $(function(){ $(document).foundation(); });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
      $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); });
    </script>
  </body>
</html>
