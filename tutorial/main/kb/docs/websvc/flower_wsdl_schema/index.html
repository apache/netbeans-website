<!doctype html>
<html class="no-js" lang="en" dir="ltr">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Web Service Passing Binary Data, pt 4: Modifying the Schema and WSDL Files</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Web Service Passing Binary Data, pt 4: Modifying the Schema and WSDL Files - Apache NetBeans">
    <meta name="author" content="Apache NetBeans">
    <meta name="keywords" content="Apache NetBeans, Tutorials, Web Service Passing Binary Data, pt 4: Modifying the Schema and WSDL Files">
    <meta name="generator" content="Apache NetBeans">
    <link rel="stylesheet" href="../../../../../../_/css/font-awesome.min.css">
    <link rel="alternate" type="application/atom+xml" title="Apache NetBeans Blog" href="https://netbeans.apache.org/blogs/atom" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    <link rel="stylesheet" href="../../../../../../_/css/netbeans.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../../../_/images/fav/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../../../../_/images/fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../../../../_/images/fav/favicon-16x16.png">
    <link rel="manifest" href="../../../../../../_/images/fav/site.webmanifest">
    <link rel="mask-icon" href="../../../../../../_/images/fav/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="theme-color" content="#ffffff">
    <link href="../../../../../../_/css/font-open-sans.css" rel="stylesheet">
    <!--
        Licensed to the Apache Software Foundation (ASF) under one
        or more contributor license agreements.  See the NOTICE file
        distributed with this work for additional information
        regarding copyright ownership.  The ASF licenses this file
        to you under the Apache License, Version 2.0 (the
        "License"); you may not use this file except in compliance
        with the License.  You may obtain a copy of the License at
        http://www.apache.org/licenses/LICENSE-2.0
        Unless required by applicable law or agreed to in writing,
        software distributed under the License is distributed on an
        "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        KIND, either express or implied.  See the License for the
        specific language governing permissions and limitations
        under the License.
    -->
  </head>
  <body>
    <div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
    <button type="button" data-toggle="responsive-menu"><i style='font-size: 32px; color: #fff; padding: 8px' class='fa fa-bars'></i></button>
    <div class="title-bar-title">Apache NetBeans</div>
</div>
<div class="top-bar" id="responsive-menu">
    <div class='top-bar-left'>
        <a class='title' href="../../../../../../index.html"><img src='../../../../../../_/images/apache-netbeans.svg' style='padding: 8px; height: 48px;'></img> Apache NetBeans</a>
    </div>
    <div class="top-bar-right">
        <ul class="vertical medium-horizontal menu" data-responsive-menu="drilldown medium-dropdown">
            <li> <input id="search-input" type="text" placeholder="Search the docs"> </li>
            <li> <a href="../../../../../../front/main/community">Community</a> </li>
            <li> <a href="../../../../../../front/main/participate">Participate</a> </li>
            <li> <a href="../../../../../../front/main/blogs">Blog</a></li>
            <li> <a href="../../../../../../front/main/help">Get Help</a> </li>
            <li> <a href="https://plugins.netbeans.apache.org/">Plugins</a> </li>
            <li> <a href="../../../../../../front/main/download">Download</a> </li>
        </ul>
    </div>
</div>

    <!-- src/templates/news -->
<section class="hero news alternate">
    <div class='grid-container'>
        <div class='cell'>
            <div class="annotation">Latest release</div>
            <h1>Apache NetBeans 19</h1>
            <p><a class="button success" href="../../../../../../front/main/download/nb19">Download</a></p>
        </div>
    </div>
</section>
    <div class='grid-container main-content tutorial'>
      <article class="doc">
      <h1 class="sect0">Web Service Passing Binary Data, pt 4: Modifying the Schema and WSDL Files</h1>
            <div class="sectionbody">
              <div class="admonitionblock note">
                <table>
                  <tbody><tr>
                  <td class="icon"><i class="fa icon-note" title="Note"></i></td>
                  <td class="content">This tutorial needs a review. 
                     You can <a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/kb/docs/websvc/flower_wsdl_schema.adoc" title="Edit this tutorial in github">edit it in GitHub </a>
                     following these <a href="../../../../../../tutorial/main/kb/docs/contributing">contribution guidelines.</a></td>
                  </tr></tbody>
                </table>
              </div>
            </div>
      <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#_modifying_the_schema_file_and_wsdl_files_to_pass_binary_data">Modifying the Schema File and WSDL Files to Pass Binary Data</a></li>
<li><a href="#_next_step">Next Step:</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In this lesson, you add the WSDL file and schema file to the web application. Then you modify the schema file to interpret arrays of bytes as Images. You also edit the web service source code to correctly locate the schema and WSDL file. In the process, you are introduced to various tools in the IDE that help you with WSDL and Schema files.</p>
</div>
<div class="paragraph">
<p>You can apply the procedure in this section to any JAX-WS web service, to pass any MIME type as binary data. Starting with a web service that passes binary data, as you created in Lessons 2 and 3, you customize the service&#8217;s WSDL and XML schema. In the customized XML schema file, you add an  <code>expectedContentTypes="<em>mime_type</em>"</code>  attribute to the return element for the binary data. This attribute informs the client that it should map the binary data to a Java type (as per MIME &gt; Java type mapping) instead of to an array of bytes. In this tutorial, you map the binary data to  <code>java.awt.Image</code> , but you can map the binary data to any of the Java types given in the JAXB 2.0 specification, as described in the <a href="http://jax-ws.dev.java.net/nonav/2.1.4/docs/mtom-swaref.html">JAX-WS Users Guide</a>.</p>
</div>
<div class="paragraph">
<p>You can download a complete sample of the web service from the <a href="https://netbeans.org/projects/samples/downloads/download/Samples%252FWeb%2520Services%252FWeb%2520Service%2520Passing%2520Binary%2520Data%2520--%2520EE6%252FFlowerAlbumService.zip">NetBeans Samples Catalog</a>.</p>
</div>
<div class="paragraph">
<p><strong>Lessons In This Tutorial</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/websvc/netbeans-stamp-80-74-73.png" alt="netbeans stamp 80 74 73">
</div>
<div class="title">Figure 1. Content on this page applies to the NetBeans IDE 7.2, 7.3, 7.4 and 8.0</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="../flower_overview/" class="xref page">Overview</a></p>
</li>
<li>
<p><a href="../flower_ws/" class="xref page">Creating the Web Service</a></p>
</li>
<li>
<p><a href="../flower-code-ws/" class="xref page">Coding and Testing the Web Service</a></p>
</li>
<li>
<p>&#8658; Modifying the Schema and WSDL Files to Pass Binary Data</p>
</li>
<li>
<p><a href="../flower_swing/" class="xref page">+ Creating the Swing Client+</a></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_modifying_the_schema_file_and_wsdl_files_to_pass_binary_data"><a class="anchor" href="#_modifying_the_schema_file_and_wsdl_files_to_pass_binary_data"></a>Modifying the Schema File and WSDL Files to Pass Binary Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the following procedure, you create modified WSDL and XML Schema files for the web service that you created in a previous tutorial. The modified WSDL and Schema files enable the web service and the clients that consume it to parse JPEG image data that is passed as binary data.</p>
</div>
<div class="paragraph">
<p><strong>To modify the WSDL and Schema files:</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Projects window, expand the FlowerService web application node until you reach the  <code>WEB-INF</code>  node. Right-click the  <code>WEB-INF</code>  folder and select New &gt; Folder. (You might need to select New &gt; Other, then the Other category).</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/websvc/new-file-wiz-folder.png" alt="new file wiz folder">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Click Next. The Name and Location page opens. Name the folder  <code>wsdl</code> .</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/websvc/wsdl-folder-name-location.png" alt="wsdl folder name location">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Click Finish. The folder  <code>wsdl</code>  appears in the Projects Window.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/websvc/wsdl-folder.png" alt="wsdl folder">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Expand the Web Services node and right-click the FlowerService node. Choose Generate and Copy WSDL&#8230;&#8203;</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>The Generate and Copy WSDL dialog opens with a navigation tree. Navigate to the  <code>wsdl</code>  folder you created (FlowerAlbumService &gt; web &gt; WEB-INF &gt; wsdl) and click OK.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You now see  <code>FlowerService.wsdl</code>  and  <code>FlowerService_schema1.xsd</code>  in the  <code>wsdl</code>  node. You also see a new node for Generated Sources (jax-ws).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/websvc/generated-wsdl-and-schema.png" alt="generated wsdl and schema">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Explicitly make the application server use your own version of the WSDL file. Otherwise the application server will generate its own WSDL file. Open  <code>FlowerService.java</code>  and locate the  <code>@WebService</code>  annotation. Add to this annotation the parameter  <code>wsdlLocation="WEB-INF/wsdl/FlowerService.wsdl"</code>  as shown below:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@WebService(serviceName = "FlowerService"*, wsdlLocation = "WEB-INF/wsdl/FlowerService.wsdl")*</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p>Modify the schema file  <code>FlowerService_schema1.xsd</code>  so it specifies the expected content type of the return element. To identify the return element in the schema file, open the schema file and find the complex types  <code>getThumbnailResponse</code>  and  <code>getFlowerResponse</code> :</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;xs:complexType name="getThumbnailsResponse"&gt;&lt;xs:sequence&gt;&lt;xs:element name="return" type="xs:base64Binary" minOccurs="0" maxOccurs="unbounded"/&gt;&lt;/xs:sequence&gt;&lt;/xs:complexType&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;xs:complexType name="getFlowerResponse"&gt;&lt;xs:sequence&gt;&lt;xs:element name="return" type="xs:base64Binary" minOccurs="0"/&gt; &lt;/xs:sequence&gt;&lt;/xs:complexType&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Add the following attributes to both return elements ( <code>&lt;xs:element name="return"&#8230;&#8203;/&gt;):</code> .</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">xmime:expectedContentTypes="image/jpeg" xmlns:xmime="http://www.w3.org/2005/05/xmlmime"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should now see the following in the same lines.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;xs:complexType name="getThumbnailsResponse"&gt;&lt;xs:sequence&gt;&lt;xs:element name="return" type="xs:base64Binary" minOccurs="0" maxOccurs="unbounded"
                xmime:expectedContentTypes="image/jpeg" xmlns:xmime="http://www.w3.org/2005/05/xmlmime"/&gt;&lt;/xs:sequence&gt;&lt;/xs:complexType&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;xs:complexType name="getFlowerResponse"&gt;&lt;xs:sequence&gt;&lt;xs:element name="return" type="xs:base64Binary" minOccurs="0"
            xmime:expectedContentTypes="image/jpeg" xmlns:xmime="http://www.w3.org/2005/05/xmlmime"/&gt; &lt;/xs:sequence&gt;&lt;/xs:complexType&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Now, when you redeploy the web service to the Tester application, and invoke one of the operations, you see that an image is correctly returned:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/kb/docs/websvc/ws-tester-goodschema.png" alt="ws tester goodschema">
</div>
</div>
<div class="paragraph">
<p>Now that the Tester application has confirmed that images are correctly being returned, you can create a Swing client to retrieve and display the images.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_step"><a class="anchor" href="#_next_step"></a>Next Step:</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="../flower_swing/" class="xref page">Creating the Swing Client</a></p>
</div>
<div class="paragraph">
<p><a href="../../../../../../front/main/community/mailing-lists/" class="xref page">Send Feedback on This Tutorial</a></p>
</div>
<div class="paragraph">
<p>To send comments and suggestions, get support, and keep informed about the latest developments on the NetBeans IDE Java EE development features, <a href="../../../../../../front/main/community/mailing-lists/" class="xref page">join the nbj2ee@netbeans.org mailing list</a>.</p>
</div>
</div>
</div>
      <section class='tools'>
    <ul class="menu align-center">
        <li><a title="Facebook" href="https://www.facebook.com/NetBeans"><i class="fa fa-md fa-facebook"></i></a></li>
        <li><a title="Twitter" href="https://twitter.com/netbeans"><i class="fa fa-md fa-twitter"></i></a></li>
        <li><a title="Github" href="https://github.com/apache/netbeans"><i class="fa fa-md fa-github"></i></a></li>
        <li><a title="YouTube" href="https://www.youtube.com/user/netbeansvideos"><i class="fa fa-md fa-youtube"></i></a></li>
        <li><a title="Atom Feed" href="https://netbeans.apache.org/blogs/atom"><i class="fa fa-mf fa-rss"></i></a></li>
        <li><a title="Slack" href="https://tinyurl.com/netbeans-slack-signup/"><i class="fa fa-md fa-slack"></i></a></li>
        <li><a title="Issues" href="https://github.com/apache/netbeans/issues"><i class="fa fa-mf fa-bug"></i></a></li>
    </ul>
    <ul class="menu align-center">
        <li><a href="https://github.com/apache/netbeans-antora-tutorials/edit/main/modules/ROOT/pages/kb/docs/websvc/flower_wsdl_schema.adoc" title="See this page in github"><i class="fa fa-md fa-edit"></i> See this page in GitHub.</a></li>
    </ul>
</section>
      </article>
    </div>
        <div class='grid-container incubator-area' style='margin-top: 64px'>
      <div class='grid-x grid-padding-x'>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/">
            <img style="width: 320px" title="Apache Software Foundation" src="../../../../../../_/images/asf_logo_wide.svg" />
          </a>
        </div>
        <div class='large-auto cell text-center'>
          <a href="https://www.apache.org/events/current-event.html">
            <img style="width:234px; height: 60px;" title="Apache Software Foundation current event" src="https://www.apache.org/events/current-event-234x60.png"/>
          </a>
        </div>
      </div>
    </div>
    <footer>
      <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/about">About</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/community/who">Who's Who</a></li>
              <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              <li><a href="https://www.apache.org/security/">Security</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/community">Community</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/community/mailing-lists">Mailing lists</a></li>
              <li><a href="../../../../../../front/main/community/committer">Becoming a committer</a></li>
              <li><a href="../../../../../../front/main/community/events">NetBeans Events</a></li>
              <li><a href="https://www.apache.org/events/current-event.html">Apache Events</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/participate">Participate</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/participate/submit-pr">Submitting Pull Requests</a></li>
              <li><a href="../../../../../../front/main/participate/report-issue">Reporting Issues</a></li>
              <li><a href="../../../../../../front/main/participate/#documentation">Improving the documentation</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/help">Get Help</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/help/#documentation">Documentation</a></li>
              <li><a href="../../../../../../wiki/main/wiki">Wiki</a></li>
              <li><a href="../../../../../../front/main/help/#support">Community Support</a></li>
              <li><a href="../../../../../../front/main/help/commercial-support">Commercial Support</a></li>
            </ul>
          </div>
          <div class="large-auto cell">
            <h1><a href="../../../../../../front/main/download">Download</a></h1>
            <ul>
              <li><a href="../../../../../../front/main/download">Releases</a></li>                    
              <li><a href="https://plugins.netbeans.apache.org/">Plugins</a></li>
              <li><a href="../../../../../../front/main/download/#_daily_builds_and_building_from_source">Building from source</a></li>
              <li><a href="../../../../../../front/main/download/#_older_releases">Previous releases</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <div class='footer-disclaimer'>
      <div class="footer-disclaimer-content">
        <p>Copyright &copy; 2017-2023 <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
        <p>Licensed under the Apache <a href="https://www.apache.org/licenses/">license</a>, version 2.0</p>
        <div style='max-width: 40em; margin: 0 auto'>
          <p>Apache, Apache NetBeans, NetBeans, the Apache feather logo and the Apache NetBeans logo are trademarks of <a href="https://www.apache.org">The Apache Software Foundation</a>.</p>
          <p>Oracle and Java are registered trademarks of Oracle and/or its affiliates.</p>
          <p>The Apache NetBeans website conforms to the <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Apache Software Foundation Privacy Policy</a></p>
        </div>
      </div>
    </div>

    
<script src="../../../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../../../.." data-snippet-length="100" data-stylesheet="../../../../../../_/css/search.css"></script>
<script async src="../../../../../../search-index.js"></script>
    <script src="../../../../../../_/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../../../../../_/js/vendor/what-input.js"></script>
    <script src="../../../../../../_/js/vendor/foundation.min.js"></script>
    <script src="../../../../../../_/js/vendor/jquery.colorbox-min.js"></script>
    <script src="../../../../../../_/js/netbeans.js"></script>
    <script>
       $(function(){ $(document).foundation(); });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>
      $(document).ready(function() { $("pre code").each(function(i, block) { hljs.highlightBlock(block); }); });
    </script>
  </body>
</html>
